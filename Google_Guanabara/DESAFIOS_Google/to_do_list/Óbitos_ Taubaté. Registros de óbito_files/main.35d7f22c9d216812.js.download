(()=>{var e={4629:(e,t,a)=>{"use strict";a.d(t,{F:()=>g,Td:()=>v,eN:()=>m,jx:()=>y,ns:()=>f});var i=a(25155),r=a(31101),n=a(59903),o=a(92384),s=a(40087),l=a(61821),d=a(9705);const c=n.pc||"https://beta.familysearch.org",u="/dz/v1";let h=`${c}${u}`;const p=/localhost/.test(window.location.href);async function m(e){try{const t=p?{headers:{...l.Cf}}:null,a=await i.Ay.get(`${c}/das/v2/${e}/name?namespace=apid`,t),{data:r}=a;return r}catch(t){throw(0,d.Yt)(t,e,{codeId:11,arkToApid:"failed"}),(0,s.A)(t,"Failed to get APID from ARK")}}function g(e,t){if(!e)return"";const a=t?"?proxy=true":"";return(0,r.FY)("indexingFileCacheEx")&&"localhost"===window.location.hostname&&"3:1:3Q9M-CSMT-Y9P6"===e?`http://${window.location.host}/TH-909-54807-1603-49/image.xml`:`${h}/${e}/image.xml${a}`}function v(e,t){return`${u}/${e}/thumb_p200.jpg${t?"?proxy=true":""}`}function y(e,t){if("localhost"===window.location.hostname){const a=(0,o.u0)()?`?sessionId=${(0,o.u0)()}`:"";return`${n.BP}/service/records/storage/deepzoomcloud/dz/v1/apid:${e}/${t}${a}`}return`${n.BP}/service/records/storage/deepzoomcloud/dz/v1/apid:${e}/${t}`}function f(e){return i.Ay.get(`${n.BP}/service/records/storage/dascloud/das/v2/${e}/permission`)}p&&(h=u)},9705:(e,t,a)=>{"use strict";a.d(t,{QP:()=>y,Tk:()=>p,Vs:()=>h,Yt:()=>u,Zw:()=>w,_A:()=>b,_I:()=>f,hM:()=>g,mo:()=>A,sz:()=>m,tK:()=>T,xR:()=>v});var i=a(48451),r=a(37435),n=a(54024),o=a(17731),s=a(78787),l=a(61441),d=a(91079),c=a(11515);function u(e,t){var a;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&void 0!==e&&e.message&&(e.message.includes("Network Error")||e.message.includes("status code 404")||e.message.includes("status code 401")||e.message.includes("status code 403")||e.message.includes("Request aborted"))||"string"===typeof e&&(e.includes("Network Error")||e.includes("status code 404")||e.includes("status code 401")||e.includes("status code 403")||e.includes("Request aborted")))return;const o=null!==e&&void 0!==e&&e.stack&&null!==(a=e.stack)&&void 0!==a&&a.replace?e.stack.split("\n").slice(0,3).join(" | "):"",l={};i.codeId&&(l.codeId=i.codeId),i.userId&&(l.userId=i.userId),i.errorType&&(l.errorType=i.errorType);const d=Object.keys(l).length>0?` | extraInfo: ${JSON.stringify(l)}`:"",c=`shared-image-viewer error image: ${t} error: ${(null===e||void 0===e?void 0:e.message)||e} url: ${window.location.pathname}${d} stack: ${o}`;s.A.log(c),console.error("ErrorCollector: ",e),"undefined"!==typeof r&&r&&(n.o("extraInfo",i),n.NA("codeId",(null===i||void 0===i?void 0:i.codeId)||0),n.Cp(e),n.o(""),n.NA("codeId",0))}const h=()=>(0,o.A)(),p=e=>{if(e){const t=e.slice(1).split("&"),a={};return t.forEach((e=>{e=e.split("="),a[e[0]]=decodeURIComponent(e[1]||"")})),a}return{}},m=(e,t)=>{if(!e)return null;const a=((e,t)=>{if(!e||!Array.isArray(e.fieldIds))return[];const a=e.fieldIds.map((e=>null===t||void 0===t?void 0:t.find((t=>e===t.id)))),i=[{elementType:"NAME_GN",value:1},{elementType:"NAME_SURN",value:2},{elementType:"SEX_CODE",value:3}];return a.sort(((e,t)=>{const a=i.find((t=>t.elementType===e.elementType)),r=a?a.value:i.length+1,n=i.find((e=>e.elementType===t.elementType));return r-(n?n.value:i.length+1)})),a.filter(Boolean)})("object"===typeof e?e:t.persons.find((t=>t.id===e)),null===t||void 0===t?void 0:t.fields),r=a.find((e=>"NAME_GN"===e.elementType)),n=a.find((e=>"NAME_SURN"===e.elementType));return`${null!==r&&void 0!==r&&r.value?`${r.value} `:""}${null!==n&&void 0!==n&&n.value?n.value:""}`||i.i18n.t("get-person-full-name.unknown","<Unknown>")};function g(e,t,a){if(!e||!Array.isArray(e)||0===e.length)throw new Error("You passed in an invalid array");if(t<0)throw new Error("You tried to replace an array element with a negative index. Did findIndex fail?");if(t>=e.length)throw new Error("You tried to replace an array element that is past the length of the array");return[...e.slice(0,t),a,...e.slice(t+1)]}function v(e,t){if(!e||!Array.isArray(e)||0===e.length)throw new Error("You passed in an invalid array");if(t>=e.length)throw new Error("You tried to remove an array element that is past the length of the array");return[...e.slice(0,t),...e.slice(t+1)]}function y(e,t,a){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=[];for(let o=e.length-1;o>=0;o--){var n;if(null!==(n=e[o][t])&&void 0!==n&&n.includes(a)&&(r.push(e[o]),0===--i))break}return r.reverse()}function f(){const e=document.referrer;return e.includes("ark:/61903/1:1")||e.includes("ark:/61903/1:2")||e.includes("images/search-results")||e.includes("images/beta/search-results")?e:null}function b(e,t){Array.isArray(t)&&t.forEach((t=>{if((0,l.YL)(t)||(0,l.vE)(t)){const a=(0,d.Pt)(t);e[t.id]={originalText:(0,d.OV)(t)||"",standard:a?{id:(0,l.YL)(t)?a.split("/")[a.split("/").length-1]:null,standardizedText:(0,d.OV)(t)||"",formalText:(0,l.YL)(t)?a:null}:null}}else e[t.id]=(0,d.OV)(t)||""}))}function A(e,t,a){const i=e.toLowerCase().trim();return t.primaryText.toLowerCase().startsWith(i)?-1:a.primaryText.toLowerCase().startsWith(i)?1:t.primaryText-a.primaryText}function w(e,t,a,i){var r,n;const o=(0,c.Yy)(e,"records","recordType").map((e=>({key:e.recordType,primaryText:e.displayLabel,group:i("add-person.record-types","Record types")}))),s=[{key:"notImplemented",primaryText:i("add-person.types-not-implemented","Types Not Implemented")}],l=o.length?o:s,u=(0,d.Qp)(t,a),h=(null===(r=(0,d.Vx)(u))||void 0===r||null===(n=r.sort(((e,t)=>e.count-t.count)))||void 0===n?void 0:n.slice(0,3).map((e=>{var t;return{key:e.type,primaryText:null===(t=l.find((t=>t.key===e.type)))||void 0===t?void 0:t.primaryText,group:i("add-person.in-surrounding-records","In surrounding records")}})).filter((e=>e.primaryText)))||[],p=l.filter((e=>!h.some((t=>t.key===e.key))));return h.concat(p).reverse()}function T(e){return e.replace(/[^a-zA-Z0-9\xc0-\u017e\s\-',.]/g,"")}},12477:(e,t,a)=>{"use strict";a.d(t,{Yq:()=>u,Zy:()=>o,ou:()=>s});var i=a(7992),r=a.n(i);function n(e){var t;const a=null===(t=e.match(/-?\d{4,6}/))||void 0===t?void 0:t[0];if(!a)return e;const i=Number(a);if(i>0)return e;const r=Math.abs(i);return e.replace(a,`${r?"-":""}${String(r).padStart(4,"0")}`)}function o(){var e,t;let{fromISOString:a,toISOString:i,locale:r="en"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};[a,i]=[a,i].filter(Boolean).map(n);const o=/(-?\d{4})-(\d{2})-(\d{2})/,[,d,c,u]=(null===(e=a)||void 0===e?void 0:e.match(o))||[],[,h,p,m]=(null===(t=i)||void 0===t?void 0:t.match(o))||[],g=a&&d&&c&&u?new Date(d,c-1,u):null;d<100&&g.setFullYear(d);let v=i&&h&&p&&m?new Date(h,p-1,m):null;h<100&&v.setFullYear(h);let y="COMPACT";return"01"===u&&"01"===c&&"31"===m&&"12"===p?(y="YEAR",d===h&&(v=null)):"01"===u&&l(h,Number(p)-1,m)?(y="MONTH_YEAR",d===h&&c===p&&(v=null)):d===h&&c===p&&u===m?(y="COMPACT",v=null):y="COMPACT",s({fromDate:g,toDate:v,format:y,locale:r})}function s(e){let{fromDate:t,toDate:a,format:i,locale:r="en"}=e;const n=t?u({date:t,format:i,locale:r}):null,o=a?u({date:a,format:i,locale:r}):null;return n&&o?`${n}\u2013${o}`:n||o}function l(e,t,a){return d(t,e)===Number(a)}function d(e,t){if(Number(e)<0||Number(e)>11)return null;t&&!Number.isNaN(Number(t))||(t=(new Date).getFullYear());return[31,c(t)?29:28,31,30,31,30,31,31,30,31,30,31][Number(e)]}function c(e){const t=Number(e);return!Number.isNaN(t)&&(t%4===0&&t%100!==0||t%400===0)}function u(){let{date:e,format:t="COMPACT",locale:a="en"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)return null;const i="undefined"===typeof window?r():Intl,n=e.getFullYear()<1?"short":void 0;let o;switch("zh"===a&&(a="zh-Hant"),t){case"COMPACT":o=new i.DateTimeFormat(a,{day:"numeric",era:n,month:"short",year:"numeric"});break;case"MINIMAL":o=new i.DateTimeFormat(a,{era:n,month:"short",year:"numeric"});break;case"FULL_WITH_TIME":o=new i.DateTimeFormat(a,{day:"numeric",era:n,month:"long",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0});break;case"COMPACT_WITH_TIME":o=new i.DateTimeFormat(a,{day:"numeric",era:n,month:"short",year:"numeric",hour:"numeric",hour12:!0});break;case"COMPACT_WITH_HOUR_MINUTE":o=new i.DateTimeFormat(a,{day:"numeric",era:n,month:"short",year:"numeric",hour:"numeric",minute:"numeric"});break;case"MINIMAL_WITH_TIME":o=new i.DateTimeFormat(a,{era:n,hour:"numeric",minute:"numeric",hour12:!0});break;case"MONTH_YEAR":o=new i.DateTimeFormat(a,{era:n,month:"long",year:"numeric"});break;case"YEAR":o=new i.DateTimeFormat(a,{era:n,year:"numeric"});break;default:throw new Error(`Unknown formatType:${t}`)}return o.format(e)}},12628:e=>{"use strict";e.exports=JSON.parse('{"email.address.abbr":"Email","sign-in.action":"Sign In","contact-name.label":"Contact Name","done.action":"Done","to.recipient.label":"To","from.recipient.label":"From","country.label":"Country","get-started.action":"Get Started","open.action":"Open","add.action":"Add","continue.action":"Continue","cancel.action":"Cancel","close.action":"Close","dismiss.action":"Dismiss","edit.action":"Edit","submit.action":"Submit","save.action":"Save","yes.action":"Yes","no.action":"No","reject.action":"Reject","next.action":"Next","update.action":"Update","ok.action":"OK","feedback.label":"Feedback","error.label":"Error","remove.action":"Remove","name.person":"Name","loading.ellipsis.label":"Loading...","language.label":"Language","search.action":"Search","learn-more.action":"Learn More","notes.label":"Notes","reset.action":"Reset","report-abuse.action":"Report Abuse","back.action":"Back","find.action":"Find","print.action":"Print","select.action":"Select","previous.action":"Previous","menu.label":"Menu","day.label":"Day","month.label":"Month","year.label":"Year","username.label":"Username","description.label":"Description","by.contributor.label":"by {contributorName}","show-more.info.abbr":"More","show-less.info.abbr":"Less","delete.action":"Delete","title.person.name":"Title","attach.action":"Attach","results.count":"{count, plural, one {# result} other {# results}}","title.item":"Title","start-end.range.label":"{rangeStart} to {rangeEnd}","from.range.label":"From","to.range.label":"To","name.object":"Name","tooltip.copied":"Copied to clipboard","tooltip.copy":"Copy","play.action":"Play","pause.action":"Pause","rewind-seconds.action":"Rewind {seconds} seconds","fast-forward-seconds.action":"Fast-forward {seconds} seconds","button.collapse.action":"Click to collapse this section","button.expand.action":"Click to expand this section","copy.action":"Copy"}')},17636:(e,t,a)=>{"use strict";a.d(t,{A:()=>l,k:()=>o});var i=a(74914),r=a(19650),n=a(34435);const o=i.createContext({}),s=(e,t)=>{switch(t.type){case"SET_CREATOR_CHECKBOXES":return{...e,creatorCheckboxes:Object.values(t.value)};case"HANDLE_NEW_DATA":return d(t.value);default:throw new Error(`Unhandled type in checkboxReducer: ${t.type}`)}};function l(e){let{children:t}=e;const{setCreator:a,metadata:l}=(0,r.A)(),[c,u]=(0,i.useReducer)(s,d(l));(0,i.useEffect)((()=>{u({type:"HANDLE_NEW_DATA",value:l})}),[l]);const h=(0,i.useCallback)((()=>{u({type:"SET_CREATOR_CHECKBOXES",value:Object.keys(l.creator).map((()=>!1))})}),[l]),p=(0,i.useCallback)((()=>{const e=Object.keys((null===l||void 0===l?void 0:l.creator)||{}).filter(((e,t)=>!c.creatorCheckboxes[t])),t={};e.forEach((e=>{t[e]=l.creator[e]})),a(t)}),[l,a,c]),m=(0,i.useMemo)((()=>function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.some((e=>e.some((e=>Boolean(e)))))}(c.creatorCheckboxes)),[c.creatorCheckboxes]),g={creatorCheckboxes:c.creatorCheckboxes,resets:c.resets,dispatch:u,resetCreatorCheckboxes:h,deleteSelectedCreatorCheckboxes:p,deleteMode:m};return(0,n.Y)(o.Provider,{value:g},t)}function d(e){return{creatorCheckboxes:null!==e&&void 0!==e&&e.creator?Object.keys(e.creator).map((()=>!1)):[],resets:0}}},19650:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var i=a(75100),r=a(59881);function n(){const{group:{metadata:e}}=(0,i.A)(),t=(0,r.A)();function a(a){t({type:"SET_METADATA",value:{...e,...a}})}return{metadata:e,setArchivalReferenceNumber:function(e){a({archivalReferenceNumber:e})},setLanguages:function(e){a({languages:e})},setTitle:function(e){a({title:e})},setVolume:function(e){a({volume:e})},setCreator:function(e){a({creator:e})},updateMetadata:a,resetCreatorCheckboxes:function(){t({type:"SET_CREATOR_CHECKBOXES",value:[]})}}}},26297:e=>{"use strict";e.exports=JSON.parse('{"add-find-flow.alert.person-created":"Person Successfully Created","add-find-flow.alert.relationship-created":"Relationship Successfully Created","add-find-flow.button.add-child":"Add Child","add-find-flow.button.add-child-unknown-father":"Add Child with an Unknown Father","add-find-flow.button.add-child-unknown-mother":"Add Child with an Unknown Mother","add-find-flow.button.add-father":"Add Father","add-find-flow.button.add-mother":"Add Mother","add-find-flow.button.add-parent":"Add Parent","add-find-flow.button.add-spouse":"Add Spouse","add-find-flow.button.add-person":"Add Person","add-find-flow.button.add-relationship":"Add Relationship","add-find-flow.button.add-first-ancestor":"Add First Ancestor","add-find-flow.button.add-unconnected-person":"Add Unconnected Person","add-find-flow.button.copy-from-my-tree":"From FamilySearch Tree","add-find-flow.button.copy-to-pedigree":"Copy To Pedigree","add-find-flow.button.copy-couple":"Copy Couple","add-find-flow.button.copy-person":"Copy Person","add-find-flow.header.private-people-from-my-tree":"Private People From My Tree","add-find-flow.empty-private-people-list":"There are no private people in your tree.","add-find-flow.button.father":"Father","add-find-flow.button.find-by-id":"By ID Number","add-find-flow.button.find-by-name":"By Name","add-find-flow.button.husband":"Husband","add-find-flow.button.mother":"Mother","add-find-flow.button.refine-search":"Refine Search","add-find-flow.button.remove-additional-find-option.father":"Remove Father","add-find-flow.button.remove-additional-find-option.mother":"Remove Mother","add-find-flow.button.remove-additional-find-option.husband":"Remove Husband","add-find-flow.button.remove-additional-find-option.wife":"Remove Wife","add-find-flow.button.replace":"Replace","add-find-flow.button.wife":"Wife","add-find-flow.create-new.description":"If none of these matches are a correct match, select the Create Person button.","add-find-flow.error.TF_435":"There was an error trying to add this person. One of the fields contains a disallowed character (such as an emoji or a tab).","add-find-flow.error.TF_441":"Save failed. You are trying to create a relationship between a living person and a deceased person who died more than 150 years ago.","add-find-flow-error.TF_444":"Attempt to create a relationship between persons belonging to different spaces","add-find-flow.error.already-related":"This Relationship Already Exists","add-find-flow.error.cannot-have-relationship-with-self":"A person cannot have a parent, spouse, or child relationship to himself or herself.","add-find-flow.error.connection":"Connection error: Did not add. Try again or come back later.","add-find-flow.error.person-already-copied":"This person has already been copied into the group tree.","add-find-flow.error.person-is-tombstoned":"This person was deleted or does not exist.","add-find-flow.error.failed-to-copy-person":"We failed to copy this person into the group tree.","add-find-flow.error.general":"The system is currently unavailable.","add-find-flow.error.id-not-found":"ID number not found.","add-find-flow.error.partial-success":"Family Tree encountered a problem while processing your request. Some of the operations have failed.","add-find-flow.error.read-only.not-authorized":"You are not authorized to modify read-only relationships.","add-find-flow.error.resource-limits-exceeded.child-count":"This person has reached the maximum amount of children that can be recorded.","add-find-flow.error.unable-to-search.message":"The search service is down. If you create this person, please check for possible duplicates later.","add-find-flow.find-results.button.add-match":"Add Match","add-find-flow.find-results.button.aria-label.add-couple-as-parents-of-person":"Add {person1} and {person2} as parents of {person}","add-find-flow.find-results.button.aria-label.add-person-as-child-of-couple":"Add {person} as child of {person1} and {person2}","add-find-flow.find-results.button.aria-label.add-person-as-child-of-person":"Add {person} as child of {person1}","add-find-flow.find-results.button.aria-label.add-person-as-first-ancestor":"Add {person} as first ancestor","add-find-flow.find-results.button.aria-label.add-person-as-parent-of-person":"Add {person} as parent of {person1}","add-find-flow.find-results.button.aria-label.add-person-as-spouse-of-person":"Add {person} as spouse of {person1}","add-find-flow.find-results.button.aria-label.view-person":"View {person}","add-find-flow.find-results.button.create-new":"Create Person","add-find-flow.find-results.button.select-couple":"Select Couple","add-find-flow.find-results.button.select-person":"Select Person","add-find-flow.find-results.button.view-person":"View Person","add-find-flow.find-results.label.BIRTH":"Birth","add-find-flow.find-results.label.BURIAL":"Burial","add-find-flow.find-results.label.CHRISTENING":"Christening","add-find-flow.find-results.label.DEATH":"Death","add-find-flow.find-results.label.parents":"{count, plural, one {Parent} other {Parents}}","add-find-flow.find-results.label.spouse":"{count, plural, one {Spouse} other {Spouses}}","add-find-flow.find-results.title.you-entered":"You Entered","add-find-flow.find-record.add.suggestion":"Add this person to your tree?","add-find-flow.find-record.add.description":"Create and add this person to your tree, linking this record to them.","add-find-flow.find-results.warning.unknown-sex":"To add this person to a couple relationship, the sex must be either male or female.","add-find-flow.info.id-explanation":"An individual\'s unique ID number is in the format XXXX-XXX.","add-find-flow.info.if-female-use-maiden-name":"Enter birth or maiden name.","add-find-flow.info.indicate-gender":"You must indicate whether the person is male or female.","add-find-flow.info.indicate-living-or-deceased":"You must indicate whether the person is living or deceased.","add-find-flow.info.living-people.heading":"Living Persons","add-find-flow.info.living-people":"You may need to create living family members to connect you to your deceased ancestors.","add-find-flow.info.living-people-privacy.standard":"To protect privacy rights, only you can see the living people you create in Family Tree.","add-find-flow.info.living-people-privacy.groups":"To protect privacy only the group can see the living people added to the family group tree.","add-find-flow.info.required-data-for-find-by-id":"You must enter an ID to be able to continue.","add-find-flow.info.why-next-button-is-disabled":"The Next button is disabled because you must enter a name, indicate the sex, and indicate whether the person is living or deceased.","add-find-flow.label.father-first-names":"Father First Names","add-find-flow.label.father-last-names":"Father Last Names","add-find-flow.label.husband-first-names":"Husband First Names","add-find-flow.label.husband-last-names":"Husband Last Names","add-find-flow.label.id-number":"ID Number","add-find-flow.label.mother-first-names":"Mother First Names","add-find-flow.label.mother-last-names":"Mother Last Names","add-find-flow.label.sex.female":"Female","add-find-flow.label.sex.male":"Male","add-find-flow.label.sex.unknown":"Unknown","add-find-flow.label.status.deceased":"Deceased","add-find-flow.label.status.living":"Living","add-find-flow.label.status.birth-date":"Birth Date","add-find-flow.label.status.birth-place":"Birthplace","add-find-flow.label.status.burial-date":"Burial Date","add-find-flow.label.status.burial-place":"Burial Place","add-find-flow.label.status.death-date":"Death Date","add-find-flow.label.status.death-place":"Death Place","add-find-flow.label.wife-first-names":"Wife First Names","add-find-flow.label.wife-last-names":"Wife Last Names","add-find-flow.legend.additional-find-options":"Additional Find Options","add-find-flow.legend.living-status":"Status","add-find-flow.legend.sex":"Sex","add-find-flow.no-match-found.description":"Your deceased ancestor may already be in Family Tree. If possible, enter at least one date and place to improve the search results.","add-find-flow.no-match-found.title":"No Match Found","add-find-flow.no-match-found.suggest-create-person":"Or you can create a new person for the name you entered.","add-find-flow.searching-for-matches":"Searching for matches.","add-find-flow.possible-matches-found.title":"Possible Matches Found","add-find-flow.title.add-child":"Add Child","add-find-flow.sub-heading.child-male":"Child: {name}","add-find-flow.sub-heading.child-female":"Child: {name}","add-find-flow.sub-heading.child-unknown-sex":"Child: {name}","add-find-flow.title.add-father":"Add Father","add-find-flow.sub-heading.father":"Father: {name}","add-find-flow.title.add-mother":"Add Mother","add-find-flow.sub-heading.mother":"Mother: {name}","add-find-flow.title.add-parents":"Add Parents","add-find-flow.title.add-spouse":"Add Spouse","add-find-flow.sub-heading.spouse-male":"Spouse: {name}","add-find-flow.sub-heading.spouse-female":"Spouse: {name}","add-find-flow.sub-heading.person-of-focus":"Person of Focus: {name}","add-find-flow.title.add-from-private-pedigree":"Add From Your Private Pedigree","add-find-flow.title.add-spouse-1":"Add Spouse","add-find-flow.title.add-spouse-2":"Add Spouse","add-find-flow.title.add-first-ancestor":"Add First Ancestor","add-find-flow.title.add-unconnected":"Add Unconnected Person","add-find-flow.title.replace-parents":"Replace Parents","add-find-flow.title.replace-person":"Replace Person","add-find-flow.title.select-couple":"Select Couple","add-find-flow.warning.same-sex-relationships":"This change will create same-sex relationships.","add-find-flow.reason.heading.add":"Add Reason","add-find-flow.reason.heading.edit":"Edit Reason","add-find-flow.reason.caption":"Reason This Information Is Correct","add-find-flow.error.same-other-relationship-exists":"An other relationship of the same type already exists between these people.","add-find-flow.error.invalid-other-relationship-state":"This relationship cannot be updated.","add-find-flow.suggest-copying.body":"If this person is already in your tree, you may want to select the From My Tree tab above so that you can copy instead of retyping. Copying from your tree lets you easily share the memories and sources that you have already added about the person.","add-find-flow.add-by-name.action":"Add By Name","add-find-flow.copy-from-tree.action":"Copy From My Tree","add-find-flow.do-not-show-again":"Do not show again","add-find-flow.cannot-copy":"This person is from a different tree and cannot be added to this tree.","add-find-flow.living-too-old.error":"This person would be over 110 years old. Please check the dates entered, or mark this person deceased.","roles.exit-role":"Exit Role","roles.exit-role.heading":"Exit {roleName} Role","roles.exit-role.confirmation":"Are you sure you want to exit the {roleName} Role?","attachImageToTree.sourceAttachedToSinglePerson.statusOverlayMessage":"Source attached to {personName}.","attachImageToTree.sourceAttachedToTwoPersons.statusOverlayMessage":"Source attached to {personName} and 1 other.","attachImageToTree.sourceAttachedToMultiplePersons.statusOverlayMessage":"Source attached to {personName} and {count} others.","attachImageToTree.viewSource.statusOverlayButton":"View Source","attachImageToTree.attachFailed.statusOverlayMessage":"We were unable to attach this source. Please try again later.","attachImageToTree.nextStep.button":"Next","attachImageToTree.attachToTree.button":"Attach To Tree","attachImageToTree.attachToTree.heading":"Attach To Tree","attachImageToTree.stepInfo.subHeading":"Step {current} of {max}","attachImageToTree.step1.describeHeaderNote.instructions":"Describe the record you have found.","attachImageToTree.step1.sourceDate.label":"Source Date (Optional)","attachImageToTree.step1.sourceTitle.label":"Source Title (Required)","attachImageToTree.step1.notes.label":"Notes (Optional)","attachImageToTree.step1.notes.description":"Describe what is in this record.","attach.notes.placeholder":"Example:\\nHugh Smith Family, Page 7\\nLines 23\u201327\\n  Father: Robert Smith\\n  Mother: Helen Strachen\\n  Children: Hugh Smith, Robert Smith","attachImageToTree.step1.addToSourceBox.checkbox":"Add to Source Box","attach.selectPeopleList.instructions":"Select a person to attach this source to.","attachImageToTree.step2.personId.label":"Person ID","attachImageToTree.step2.personNotFound.heading":"Person Not Found","attach.personNotFound.subHeading":"Make sure you entered the Person ID correctly, and then try searching again","attachImageToTree.step2.resetSearch.button":"Reset Search","attachImageToTree.step3.spouses.label":"Spouses","attachImageToTree.step3.children.label":"Children","attachImageToTree.step3.parents.label":"Parents","attachImageToTree.step3.siblings.label":"Siblings","attachImageToTree.step3.spousesNotFound.label":"No spouses listed in Family Tree","attachImageToTree.step3.childrenNotFound.label":"No children listed in Family Tree","attachImageToTree.step3.parentsNotFound.label":"No parents listed in Family Tree","attachImageToTree.step3.siblingsNotFound.label":"No siblings listed in Family Tree","attachImageToTree.step3.noRelatives.paragraph":"{personName} does not have any relatives listed in Family Tree.","attachImageToTree.step3.attachMore.instructions":"Attach the source to other members of this person\'s family by selecting them from the list below. (Optional)","attachImageToTree.step3.youSelected.message":"You selected:","attachImageToTree.step4.finalWillBeAttached.notice":"This source will be attached to the following Family Tree people:","attachImageToTree.step4.reasonToAttach.label":"Reason to Attach Source (Optional)","attachImageToTree.step4.reasonToAttach.helpMessage":"Explain why you believe this source is a good match.","attachImageToTree.step3.noRelatives.instructions":"Click <bold>Next</bold> to continue the process of attaching this source to this person.","attachImageToTree.nextStep.buttonDescription":"Move on to step {step}","attachImageToTree.sourceAttached.statusOverlayMessage":"Source attached to {count, plural, =0 {{firstPersonName}} =1 {{firstPersonName} and 1 other} other {{firstPersonName} and # others}}.","attachImageToTree.step2.searchInFamilyTree.button":"Find in Family Tree","attachImageToTree.step2.searchForPerson.tooltip":"Search for Person","attachImageToTree.step1.viewAttachments.btn":"View all attachments","attachImageToTree.attachmentRow.imageAttachTooltipLabel":"View attached tree person","attachImageToTree.attachmentRow.attachTooltipLabel":"View in Source Linker","attachImageToTree.attachmentRow.attachToTreeTooltipDesc":"Compare this record with the tree person. You can attach and detach the records to the tree here.","attachImageToTree.viewAllAttachments.title":"Attached in Family Tree","attachImageToTree.viewAllAttachments.search":"Search for an attached person","attachImageToTree.viewAllAttachments.source-linker-attach.heading":"Attached through Source Linker","attachImageToTree.viewAllAttachments.source-linker-attach.content":"The traditional attachment includes indexed information with the source.","attachImageToTree.viewAllAttachments.image-attach.heading":"Attached as Image","attachImageToTree.viewAllAttachments.image-attach.content":"Image only provided as the document with the source.","attachImageToTree.viewAllAttachments.fix-attachment.heading":"Fix the attachment","attachImageToTree.viewAllAttachments.fix-attachment.content":"Add indexed information and then go through Source Linker to make the source more robust in Family Tree.","attachImageToTree.viewAllAttachments.image-attachment.overline":"Image","attachImageToTree.viewAllAttachments.attachedTo":"Attached to","attachImageToTree.viewAllAttachments.fixNow.btn":"Fix now","attachImageToTree.viewAllAttachments.done.btn":"Done","attachImageToTree.viewAllAttachments.noneAdded":"None added yet","attachImageToTree.viewAllAttachments.noResults":"No results","attachImageToTree.attachmentLoadErrorMsg":"This image may already be attached. Reload the page or try again later.","attachImageToTree.personLabel.attached":"Attached","attach.selectPeopleList.instructionsHeading":"Select a Family Tree person to attach this source to.","attach.selectPeopleList.instructionsSubHeading":"Choose from the list of people you recently viewed in Family Tree, or search for a specific person using his or her Person ID.","attachImageToTree.step3.attachMore.optional":"Optional","attachImageToTree.step3.attachMore.instructionsHeading":"Attach this source to the other relatives.","attachImageToTree.step3.attachMore.instructionsSubheading":"Select a relative from the list below or create a new family relationship.","attribution.reason.label":"Reason This Information Is Correct:","attribution.short-reason.label":"Reason:","attribution.last-changed-date.label":"Last Changed: {date}","attribution.add-reason.label":"Add Reason","attribution.edit-reason.label":"Edit Reason","chat.action":"Chat","chat.label":"Chat","chat.add-people.label":"Add Person to Chat","chat.ask-us-anything.heading":"Ask Us Anything - RootsTech","chat.attendee-groups.heading":"Attendee Groups","chat.aua-get-more-help.message":"The person helping you may be chatting with another guest. If you don\'t get a timely response, you may need to start a new Ask Us Anything chat.","chat.button-unread.label":"New chats available","chat.chat-attachment-accepted":"Accepted","chat.chat-attachment-rejected.label":"Rejected","chat.chat-attachment-reviewing.label":"Reviewing...","chat.chat-details.header":"Chat Details","chat.chat-image-attachment-caption":"View Image","chat.download-image-filename.label":"FamilySearch-Chat-image","chat.chats.action":"Chats","chat.create-chat.text":"Loading Chat...","chat.create-group.action":"Create Chat","chat.create-public-group.action":"Create Public Chat","chat.creator.label":"Creator","chat.description-optional.label":"Description (optional)","chat.details.action":"Details","chat.embedded-chat.fallback":"This chat is available to those 18 and older.","chat.empty-section.heading":"This section is empty.","chat.enter.new-line":"Enter Key Creates New Line","chat.enter.sends-message":"Enter Key Sends Message","chat.enter-shift.new-line":"Shift+Enter Key Creates New Line","chat.enter-shift.sends-message":"Shift+Enter Key Sends Message","chat.error-file-already-exists":"File already exists","chat.error-invalid-symbols-in-name.message":"Cannot contain symbols","chat.error-memories-load.message":"Unable to load memories","chat.error-memory-deleted.subheading":"Memory was possibly deleted","chat.error-memory-load.message":"Unable to load memory","chat.error-memory-not-found.heading":"Memory not found","chat.error-sending.message":"Failed to send the message","chat.error-uploading-file.message":"Error uploading file","chat.error.message":"Something went wrong, please try again later.","chat.exhibitors.heading":"Expo Hall - RootsTech","chat.find-speakers.button":"Find Speakers","chat.generic-details.action":"Details","chat.go-to-group-by-invite-link.button":"Go to Chat","chat.group-description.placeholder":"What is this chat about?","chat.group-members.heading":"Chat Members","chat.group-name.placeholder":"Name your chat","chat.group.add.sent":"Adding {name} to the chat.","chat.groups.action":"Attendee Groups - RootsTech","chat.helping-an-ask-us-anything.message":"{name} hasn\'t asked a question yet. If it\'s been a few minutes, please reach out to see if they still need help.","chat.invite-others-instructions.message":"Invite others to a new private chat (up to {maxParticipants} total).","chat.invite-people.action":"Invite People","chat.just-now.label":"Just now","chat.message-reply.action":"Reply","chat.compose.aria-label":"Compose Message","chat.message.placeholder":"Message {recipient}","chat.my-chats.heading":"Private","chat.new-chat.header":"New Chat","chat.new-group.header":"Create New Chat","chat.new-message-from-person.message":"New Message from {name}: {message}","chat.new-vendor.header":"Creating Chat","chat.open-expo-hall.action":"Open Expo Hall","chat.other-groups.heading":"Other Chats","chat.participants-count.label":"{count, plural, =0 {No participants} one {# Participant} other {# Participants}}","chat.person-is-typing.message":"{name} is typing...","chat.photo-attached-to-message.alt":"Photo attached to message","chat.profile-interrupter-current-profile.label":"How others see me in FamilySearch","chat.profile-interrupter-form-opt-in.button":"Include my profile information in directory search results.","chat.profile-interrupter-form-opt-in.help-text":"Family, friends, and others on FamilySearch will be able to find and collaborate with me.","chat.profile-interrupter-form-opt-out.button":"No, I don\'t want to appear in directory search results.","chat.profile-interrupter-later.button":"Later","chat.profile-interrupter-location-not-added.message":"Location not added","chat.profile-interrupter-location-set-to-private.message":"Location is set to private","chat.profile-interruptor-opt-in-error-message":"Your selection could not be saved. Please try again.","chat.profile-interrupter-opt-in-success.message":"We\'ll include you in directory search results.","chat.profile-interrupter-opt-out-success.message":"We\'ll leave you out of directory search results.","chat.profile-interrupter-subheader.heading":"Choose Your Directory Preference","chat.profile-interrupter-subheader.subheading":"This can be changed later in Settings.","chat.profile-interrupter-update.button":"Update Profile","chat.profile-interrupter.heading":"Join FamilySearch Chat","chat.profile-interrupter.subheading":"Connect with family and friends on FamilySearch","chat.profile.action":"View My Profile","chat.public-group-invite-sent.message":"An invite has been sent to {name}.","chat.remaining-participants-allowed.message":"{count, plural, =0 {Your Private Chat is now full. For more than {maxParticipantsCount}, create a Public Chat.} one {You can add # more person.} other {You can add # more people.}}","chat.reply.placeholder":"Reply in thread\u2026","chat.rootstech-groups.heading":"RootsTech Groups","chat.search-for-people.placeholder":"Search for people and chats","chat.select-a-chat.message":"Select a chat to start messaging.","chat.send-message.action":"Send Message","chat.send-options":"Send Options","chat.session.heading":"Session Chats - RootsTech","chat.share-memory.action":"Share Memory","chat.share-memory.memories-gallery":"Memories Gallery","chat.share-memory.limit":"Max Uploads Reached","chat.share-memory.private.error":"You are trying to share a Private memory. To continue, please visit your Memories Gallery, and change this setting to Public. Then come back to Chat, and try this action again.","chat.show-more.label":"View More","chat.someone-said.aria-label":"{name} said {message} {timeAgo}","chat.start-group-chat.action":"Start Public Chat","chat.to.placeholder":"Kim Lee, @KimLee123, etc.","chat.turn-sound-off.action":"Turn Sound Off","chat.turn-sound-on.action":"Turn Sound On","chat.type-your-ask-us-anything-question.message":"Someone will join you shortly. Please type your question below while you\'re waiting.","chat.type-your-question.label":"Type your question","chat.unknown-name.label":"Unknown Name","chat.upload-file-types.message":"We support .jpg, .png, and .gif, up to 5MB. Reviewing can take up to 15 minutes.","chat.upload-memory.action":"Upload Image to Chat","chat.view-all.button":"View All","chat.already-exists.error":"A public chat by that name already exists. Please choose a different name and try again.","chat.invite-accept.text":"Accept","chat.invite-reject.text":"Reject","chat.menu.aria-label":"Chat Menu","chat.leave-chat.action":"Leave","chat.hide-chat.action":"Hide Chat","chat.recent-chats.label":"Recent Chats","chat.user-invited.message":"{invitee} was invited to the chat by {inviter}.","chat.invite-accepted.text":"Accepted","chat.invite-rejected.text":"Rejected","chat.invite-pending.text":"Pending","chat.channel-leave-success.message":"You left {name}.","chat.channel-hide-success.message":"{name} was hidden.","chat.user-accepted-invite.message":"{userName} joined the chat.","chat.unable-to-join.error":"Unable to join {name}","chat.person-is-typing-in-thread.message":"{name} is typing in a thread...","chat.group.add.failed":"Adding {name} to the chat failed.","chat.no-messages-yet.heading":"Welcome to the \\"{channelName}\\" chat. No messages have been posted to this chat yet.","chat.public-chat-no-messages-yet.heading":"Hello and welcome to this Public Chat! Join an existing conversation or start a new one.","chat.user-left-channel.message":"{userName} left the chat.","chat.unmute-chat.action":"Unmute Chat","chat.mute-chat.action":"Mute Chat","chat.muted.aria-label":"Muted","chat.name-is-muted.message":"{name} is muted.","chat.person-menu.aria-label":"Chat Person Menu","chat.name-was-unmuted.message":"{name} was unmuted.","chat.channel-muted-success.message":"{name} was muted. To unmute this chat, click the three-dot menu button on the right side and select Unmute Chat.","chat.show-event-chats.label":"Show event chats","chat.reconnect-image.alt-text":"Reconnect Image","chat.try-again.message":"Try Again","chat.reconnect.heading":"Well, this is unexpected...","chat.reconnect.subheading":"We are unable to connect right now, or your session has expired. Please click \\"Try Again\\", and if you still cannot connect then refresh the page. If you still cannot connect then please try again in a few minutes.","chat.message-replies.action-plural":"{count, plural, =0 {No Replies} one {# Reply} other {# Replies}}","chat.thread.label":"Thread","chat.copy-to-clipboard.label":"Copy to Clipboard","chat.message-menu.aria-label":"Chat Message Menu","chat.familysearch-groups.heading":"Family Groups","chat.create-private-chat.action":"Create Private Chat","chat.too-many-requests.error":"We\'re Sorry! We were unable to complete your request because you have surpassed the allowed rate limit of what the FamilySearch Chat service provides.","chat.message-delete-confirmation.label":"Message Deleted","chat.message-delete-confirmation.message":"Are you sure you want to delete this message? This cannot be undone.","chat.message-delete.label":"Delete Message","chat.message-was-deleted.message":"This message was deleted.","chat.message-edit.label":"Edit Message","chat.message-edit.placeholder":"Edit Message","chat.message-edited.caption":"(edited)","chat.message-translated.caption":"(translated)","chat.insert-emoji.action":"Emoji","chat.emoji-like.label":"Like","chat.emoji-dislike.label":"Dislike","chat.emoji-smile.label":"Smile","chat.emoji-laugh.label":"Laugh","chat.emoji-wink.label":"Wink","chat.emoji-frown.label":"Frown","chat.emoji-smile-halo.label":"Smile with halo","chat.emoji-clap.label":"Clap","chat.emoji-celebrate.label":"Celebrate","chat.emoji-love.label":"Love","chat.emoji-100.label":"100","chat.emoji-exclamation-mark.label":"Exclamation mark","chat.emoji-thank-you.label":"Thank you","chat.emoji-magnifying-glass.label":"Magnifying glass","chat.emoji-man-shrugging.label":"Man shrugging","chat.emoji-woman-shrugging.label":"Woman shrugging","chat.add-reaction.action":"Add Reaction","chat.remove-reaction.action":"Remove Reaction","chat.people-count.label":"{count, plural, =0 {no people} one {# person} other {# people}}","chat.other-people-count.label":"{count, plural, =0 {no other people} one {# other person} other {# other people}}","chat.more-unreads.label":"More unreads","chat.mark-read.action":"Mark Chat as Read","chat.mark-all-read.action":"Mark All Chats as Read","chat.message-with-replies.warning":"A message with replies can not be deleted.","chat.my-unread-chats.heading":"Unread","chat.my-chat-threads.heading":"Threads","chat.create-members-truncated.warning":"We\u2019re sorry. Only {maxParticipants} participants are allowed in a private chat.","chat.missing-people-count.label":"{count, plural, =0 {# people were not included in the chat.} one {# person was not included in the chat.} other {# people were not included in the chat.}}","chat.block-user.action":"Block {name}","chat.display-blocked-users.action":"View Blocked Users","chat.blocked-users.heading":"Blocked Users","chat.use-blocked.message":"This user is blocked.","chat.unblock.action":"Unblock","chat.block-user.label":"Block User","chat.block-user.message":"{name} will be blocked and will no longer be able to message you. Previous messages will no longer be visible. To unblock this contact:","chat.block.action":"Block","chat.unblock-user-steps.message":"<0>Open the Chat menu \u22ee</0><0>Select View Blocked Users</0><0>Click the contact menu and unblock.</0>","chat.user-unblocked.label":"{name} has been unblocked","chat.unread.label":"Unread","chat.help.heading":"FamilySearch Chat Basics","chat.help.message":"Take a moment to learn the basics about FamilySearch Chat.","chat.help-1.heading":"Welcome to FamilySearch Chat!","chat.help-1.message":"The Chat tool makes is for collaborating and reaching out to other people on FamilySearch. It can be turned on or off in your account settings.","chat.help-1a.message":"Let\'s take a look at some of its most important features.","chat.help-2.heading":"Quickly Send a Message","chat.help-2.message":"To start a message, click on a contributor\u2019s Contact ID. Contact IDs are located in the Chat directory or anywhere a person has added information.","chat.help-3.heading":"Collaborate more easily","chat.help-3.message":"You can send a message to as many as {num} people.","chat.help-3a.message":"Entering an ancestor\u2019s Tree ID into the conversation creates a direct link to their profile page.","chat.help-4.heading":"Manage your workspace","chat.help-4.message":"The chat window fits over the page and can be moved or resized so that it doesn\u2019t get in the way.","chat.help-4a.message":"This is so you can send and receive messages without losing your place on the FamilySearch website.","chat.help-5.heading":"Manage your conversations","chat.help-5.message":"Click the menu at the top of the Chat window to mute a conversation, block a sender, or report abuse.","chat.help-5a.message":"Finally, your account settings has a toggle for including your profile information in directory search results. If you can\u2019t find a friend or family member in Chat, it could be that they have flipped this toggle to off.","chat.help-5b.message":"<0>Learn more</0> about Chat on the FamilySearch blog.","chat.dark-mode.label":"Dark mode","chat.turn-dark-mode-off.action":"Turn Dark Mode Off","chat.turn-dark-mode-on.action":"Turn Dark Mode On","chat.messages-from.label":"Messages from {name}","chat.from-chat-messages.label":"From Chat Messages","chat.chat-list.heading":"Chat List","chat.no-cis-id.error":"Unable to add user because they do not have a FamilySearch account.","chat.open-in-chat.action":"Open in Chat","chat.add-chat-group.label":"Add this chat to your Chat groups.","chat.file-too-large.error":"We\'re sorry, {filename} is too large to be uploaded.","chat.file-type.error":"Files of type: {fileType} are not supported.","chat.public-group.date":"Created {date}","chat.public-group.label":"Public Chats are for topics of general interest. For research questions, try our <0>Help Page</0>. Any RootsTech attendee can join this Public Chat.","chat.access-restricted-image.alt-text":"Access Restricted Image","chat-error.access-restricted.title":"Access Restricted","chat-error.access-restricted.message":"FamilySearch Chat is not available due to legal restrictions.","chat.minor-access-error.alt-text":"Service Unavailable Image","chat-error.minor-access-error.title":"Service Unavailable","chat-error.minor-access-error.message":"Sorry, FamilySearch Chat isn\'t available to users without a birthdate in Settings or for those under 18. We\'re working to bring Chat to Shared Family Groups for those under 18 soon. Stay tuned for updates!","chat.save-to-memories.label":"Save to Memories","chat.save-to-memories.success":"Saved to Memories","chat.save-to-memories.action":"View","chat.save-to-memories.duplicate":"Memory already saved","chat.save-to-memories.failed":"Failed to save to Memories","chat.download.action":"Download","chat.save-to-memories.saving":"Saving to Memories...","chat.unknown-file-type.error":"Files of this type are not supported.","chat.display-hidden-channels.action":"View Hidden Chats","chat.hidden-chats.heading":"Hidden Chats","chat.go-latest.label":"Go to latest","chat.create-button-disabled.label":"Unable to Message This User","chat.unavailable-chat-access.error":"This chat is currently unavailable.","chat.vendor-chat-no-messages-yet.heading":"Hello! Welcome to this public chat with {vendorName}. Ask your question here, and we\u2019ll be happy to assist you.","embedded-chat.signed-out.button":"View the Chat","chat.translate-message.error":"Something went wrong with the translation. Please wait a few minutes, and try again.","chat.join-channel.button":"Join This Chat","chat.embedded-chat-fallback.description":"Login required","chat.translate-message.label":"Translate Message in {language}","chat.view-original":"View Original","chat.share-memory.private.error.title":"Error sharing private memory","click-to-copy.person-id-copied.alert-message":"ID copied.","lesson-page.lessons":"{total, plural, =0 {No Lessons} one {# Lesson} other {# Lessons}}","lesson-page:attachment-header":"Lesson Content","location-page.phoneNumber":"Phone Number","search-overlay.closeSearch":"Close Search","search-overlay.openSearch":"Open Search","search-page.searchPlaceholder":"Search...","surname-search.label.last-name":"Last Name","add-new-conclusion-button.add-otherEvent":"Add Event","add-new-conclusion-button.add-otherFact":"Add Fact","add-new-conclusion-button.add":"Add","add-relationship-button.add-associationEvent":"Add Event","add-relationship-button.add-coupleEvent":"Add Event","add-relationship-button.add-coupleFact":"Add Fact","add-relationship-button.add-parentChildRelationshipEvent":"Add Relationship Type","conclusion.add.aria-label":"Add {conclusion}","conclusion.add.button":"Add","conclusion.ADOPTIVE.date.label":"Adopted Date","conclusion.ADOPTIVE.label":"Adoptive","conclusion.AFFILIATION.date.label":"Date of Affiliation","conclusion.AFFILIATION.delete.label":"Delete Affiliation","conclusion.AFFILIATION.description.label":"Description of Affiliation","conclusion.AFFILIATION.label":"Affiliation","conclusion.AFFILIATION.place.label":"Place of Affiliation","conclusion.ALTERNATE_NAME.delete.label":"Delete Alternate Name","conclusion.ALTERNATE_NAME.label":"Alternate Name","conclusion.ANNULMENT.date.label":"Date of Annulment","conclusion.ANNULMENT.delete.label":"Delete Event","conclusion.ANNULMENT.label":"Annulment","conclusion.ANNULMENT.place.label":"Place of Annulment","conclusion.BAR_MITZVAH.date.label":"Date of Bar Mitzvah","conclusion.BAR_MITZVAH.delete.label":"Delete Bar Mitzvah","conclusion.BAR_MITZVAH.label":"Bar Mitzvah","conclusion.BAR_MITZVAH.place.label":"Place of Bar Mitzvah","conclusion.BAS_MITZVAH.date.label":"Date of Bat Mitzvah","conclusion.BAS_MITZVAH.delete.label":"Delete Bat Mitzvah","conclusion.BAS_MITZVAH.label":"Bat Mitzvah","conclusion.BAS_MITZVAH.place.label":"Place of Bat Mitzvah","conclusion.BIOLOGICAL.label":"Biological","conclusion.BIRTH.date.label":"Date of Birth","conclusion.BIRTH.delete.label":"Delete Birth","conclusion.BIRTH.label":"Birth","conclusion.BIRTH.place.label":"Birthplace","conclusion.BURIAL.date.label":"Date of Burial","conclusion.BURIAL.delete.label":"Delete Burial","conclusion.BURIAL.label":"Burial","conclusion.BURIAL.place.label":"Place of Burial","conclusion.CASTE_NAME.delete.label":"Delete Caste Name","conclusion.CASTE_NAME.description.label":"Description of Caste Name","conclusion.CASTE_NAME.label":"Caste Name","conclusion.CHRISTENING.date.label":"Date of Christening","conclusion.CHRISTENING.delete.label":"Delete Christening","conclusion.CHRISTENING.label":"Christening","conclusion.CHRISTENING.place.label":"Place of Christening","conclusion.CLAN_NAME.delete.label":"Delete Clan Name","conclusion.CLAN_NAME.description.label":"Description of Clan Name","conclusion.CLAN_NAME.label":"Clan Name","conclusion.COMMON_LAW_MARRIAGE.date.label":"Date of Common Law Marriage","conclusion.COMMON_LAW_MARRIAGE.delete.label":"Delete Event","conclusion.COMMON_LAW_MARRIAGE.label":"Common Law Marriage","conclusion.COMMON_LAW_MARRIAGE.place.label":"Place of Common Law Marriage","conclusion.COUPLE_NEVER_HAD_CHILDREN.delete.label":"Delete Fact","conclusion.COUPLE_NEVER_HAD_CHILDREN.label":"No Children","conclusion.CREMATION.date.label":"Date of Cremation","conclusion.CREMATION.delete.label":"Delete Cremation","conclusion.CREMATION.label":"Cremation","conclusion.CREMATION.place.label":"Place of Cremation","conclusion.DEATH.date.label":"Date of Death","conclusion.DEATH.label":"Death","conclusion.DEATH.place.label":"Place of Death","conclusion.deceased":"Deceased","conclusion.delete.error":"An error ocurred while attempting to delete.","conclusion.DIVORCE.date.label":"Date of Divorce","conclusion.DIVORCE.delete.label":"Delete Event","conclusion.DIVORCE.label":"Divorce","conclusion.DIVORCE.place.label":"Place of Divorce","conclusion.dead-to-living.success":"Request submitted successfully.","conclusion.dead-to-living.body":"You are attempting to change this person\'s status from deceased to living. A reason for this request is required before this status change will be reviewed. Until that review occurs, this person will be shown as deceased. If the status change is approved, you will be notified by e-mail.","conclusion.dead-to-living.request-submitted":"Your request has been submitted.","conclusion.dead-to-living.label":"How do you know this person is alive?","conclusion.dead-to-living.heading":"Request to Mark Person as Living","conclusion.edit.reason-not-changed.header":"Reason Not Changed","conclusion.edit.reason-not-changed.body":"Are you sure that you want to continue without explaining your changes?","conclusion.edit.aria-label":"Edit {conclusion}","conclusion.ERROR_404":"Your change was not saved. Another user may have deleted this information.","conclusion.ERROR_409":"This information already exists. Make needed changes to the original.","conclusion.ERROR_CANNOT_MARK_SELF_DECEASED":"Save failed. You cannot change your own record from Living to Deceased.","conclusion.ERROR_CANNOT_HAVE_FUTURE_DEATH_DATE":"The death date cannot be in the future.","conclusion.ERROR_DISALLOWED_CHARACTERS":"Save failed. Your information contains symbols or characters that are not allowed.","conclusion.ERROR_DUPLICATE_SAVE_FAILED":"Save failed. This data already exists.","conclusion.ERROR_RACE_CONDITION_SAVE_FAILED":"Save failed. Please try again.","conclusion.ERROR_RAISE_FROM_DEAD_FAILED":"Unable to submit request at this time.","conclusion.ERROR_SAVE_FAILED":"Save failed.","conclusion.ERROR_SAVE_UNKNOWN_GENDER_FAILED":"Save failed. This person is a parent or spouse, so the sex must be either Male or Female. Sex of Unknown is not allowed.","conclusion.FOSTER.date.label":"Foster Date","conclusion.FOSTER.label":"Foster","conclusion.GENDER.label":"Sex","conclusion.HISTORICAL_FACT.label":"Historical Event","conclusion.IMMIGRATION.date.label":"Date of Immigration","conclusion.IMMIGRATION.delete.label":"Delete Immigration","conclusion.IMMIGRATION.description.label":"Description of Immigration","conclusion.IMMIGRATION.label":"Immigration","conclusion.IMMIGRATION.place.label":"Place of Immigration","conclusion.impedance-info.contributors":"{number, plural, one {# Past Contributor} other {# Past Contributors}}","conclusion.impedance-info.followers":"{number, plural, one {# Person Following} other {# People Following}}","conclusion.impedance-info.subheading":"People following this person will be notified of your change.","conclusion.LEGAL_GUARDIAN.date.label":"Guardianship Date","conclusion.LEGAL_GUARDIAN.label":"Guardianship","conclusion.LIFE_SKETCH.add.aria-label":"Add Brief Life History","conclusion.LIFE_SKETCH.delete.label":"Delete Brief Life History","conclusion.LIFE_SKETCH.label":"Brief Life History","conclusion.LIFE_SKETCH.more":"More","conclusion.LIFE_SKETCH.text.label":"Write a Brief Life History","conclusion.LIVED_TOGETHER.date.label":"Date Lived Together","conclusion.LIVED_TOGETHER.delete.label":"Delete Event","conclusion.LIVED_TOGETHER.label":"Lived Together","conclusion.LIVED_TOGETHER.place.label":"Place Lived Together","conclusion.living":"Living","conclusion.MARRIAGE.date.label":"Date of Marriage","conclusion.MARRIAGE.delete.label":"Delete Event","conclusion.MARRIAGE.label":"Marriage","conclusion.MARRIAGE.place.label":"Place of Marriage","conclusion.MILITARY_SERVICE.date.label":"Date of Military Service","conclusion.MILITARY_SERVICE.delete.label":"Delete Military Service","conclusion.MILITARY_SERVICE.description.label":"Description of Military Service","conclusion.MILITARY_SERVICE.label":"Military Service","conclusion.MILITARY_SERVICE.place.label":"Place of Military Service","conclusion.NAME.label":"Name","conclusion.nameType.AKA":"Also Known As","conclusion.nameType.BIRTH":"Birth Name","conclusion.nameType.MARRIED":"Married Name","conclusion.nameType.NICK":"Nickname","conclusion.nameType.COURTESY":"Courtesy Name","conclusion.nameType.ART":"Art Name","conclusion.nameType.TABOO":"Taboo Name","conclusion.nameType.POSTHUMOUS":"Posthumous Name","conclusion.NATIONAL_ID.delete.label":"Delete National Identification","conclusion.NATIONAL_ID.description.label":"Description of National Identification","conclusion.NATIONAL_ID.label":"National Identification","conclusion.NATIONAL_ORIGIN.delete.label":"Delete National Origin","conclusion.NATIONAL_ORIGIN.description.label":"Description of National Origin","conclusion.NATIONAL_ORIGIN.label":"National Origin","conclusion.NATURALIZATION.date.label":"Date of Naturalization","conclusion.NATURALIZATION.delete.label":"Delete Naturalization","conclusion.NATURALIZATION.description.label":"Description of Naturalization","conclusion.NATURALIZATION.label":"Naturalization","conclusion.NATURALIZATION.place.label":"Place of Naturalization","conclusion.NO_CHILDREN.delete.label":"Delete No Children","conclusion.NO_CHILDREN.label":"No Children","conclusion.NO_COUPLE_RELATIONSHIPS.delete.label":"Delete No Couple Relationships","conclusion.NO_COUPLE_RELATIONSHIPS.label":"No Couple Relationships","conclusion.NOBILITY_TITLE.date.label":"Date of Title of Nobility","conclusion.NOBILITY_TITLE.delete.label":"Delete Nobility Title","conclusion.NOBILITY_TITLE.description.label":"Description of Title of Nobility","conclusion.NOBILITY_TITLE.label":"Title of Nobility","conclusion.NOBILITY_TITLE.place.label":"Place of Title of Nobility","conclusion.nonstandardized.date-and-place":"Non-standardized Date and Place","conclusion.nonstandardized.date":"Non-standardized Date","conclusion.nonstandardized.place":"Non-standardized Place","conclusion.OCCUPATION.date.label":"Date of Occupation","conclusion.OCCUPATION.delete.label":"Delete Occupation","conclusion.OCCUPATION.description.label":"Description of Occupation","conclusion.OCCUPATION.label":"Occupation","conclusion.OCCUPATION.place.label":"Place of Occupation","conclusion.OTHER_EVENT.date.label":"Date of Custom Event","conclusion.OTHER_EVENT.delete.label":"Delete Custom Event","conclusion.OTHER_EVENT.description.label":"Description of Custom Event","conclusion.OTHER_EVENT.label":"Custom Event","conclusion.OTHER_EVENT.place.label":"Place of Custom Event","conclusion.OTHER_EVENT.title.label":"Title of Custom Event","conclusion.OTHER_FACT.delete.label":"Delete Custom Fact","conclusion.OTHER_FACT.description.label":"Description of Custom Fact","conclusion.OTHER_FACT.label":"Custom Fact","conclusion.OTHER_FACT.title.label":"Title of Custom Fact","conclusion.PARENT1_LINEAGE.delete.label":"Delete","conclusion.PARENT2_LINEAGE.delete.label":"Delete","conclusion.PHYSICAL_DESCRIPTION.delete.label":"Delete Physical Description","conclusion.PHYSICAL_DESCRIPTION.description.label":"Physical Description","conclusion.PHYSICAL_DESCRIPTION.label":"Physical Description","conclusion.RACE.delete.label":"Delete Race","conclusion.RACE.description.label":"Race","conclusion.RACE.label":"Race","conclusion.reason-for-deleting.label":"Reason for Deleting this Information","conclusion.reason-this-information-is-correct.label":"Reason This Information Is Correct","conclusion.relationship-to-child.label":"Relationship to Child","conclusion.RELIGIOUS_AFFILIATION.date.label":"Date of Religious Affiliation","conclusion.RELIGIOUS_AFFILIATION.delete.label":"Delete Religious Affiliation","conclusion.RELIGIOUS_AFFILIATION.description.label":"Description of Religious Affiliation","conclusion.RELIGIOUS_AFFILIATION.label":"Religious Affiliation","conclusion.RELIGIOUS_AFFILIATION.place.label":"Place of Religious Affiliation","conclusion.RESIDENCE.date.label":"Date of Residence","conclusion.RESIDENCE.delete.label":"Delete Residence","conclusion.RESIDENCE.description.label":"Description of Residence","conclusion.RESIDENCE.label":"Residence","conclusion.RESIDENCE.place.label":"Place of Residence","conclusion.standardized-data.label":"Standardized Data","conclusion.see-all-changes.link":"See All Changes","conclusion.sex.FEMALE":"Female","conclusion.sex.MALE":"Male","conclusion.sex.UNKNOWN":"Unknown","conclusion.source-count.label":"{number, plural, one {# Source} other {# Sources}}","conclusion.STEP.date.label":"Step Relationship Date","conclusion.STEP.label":"Step","conclusion.STILLBORN.date.label":"Stillborn Date","conclusion.STILLBORN.delete.label":"Delete Stillborn","conclusion.STILLBORN.label":"Stillborn","conclusion.STILLBORN.place.label":"Stillborn Place","conclusion.TRIBE_NAME.delete.label":"Delete Tribe Name","conclusion.TRIBE_NAME.description.label":"Tribe Name","conclusion.TRIBE_NAME.label":"Tribe","conclusion.validation.error.reason-required":"Please fill out the reason statement.","conclusion.warning.COUPLE_NEVER_HAD_CHILDREN":"Warning. You are about to indicate this couple had no children. Please add any evidence by either adding a source or an explanation above.","conclusion.warning.NO_CHILDREN":"Warning. You are about to indicate this person had no children. Please add any evidence by either adding a source or an explanation above.","conclusion.warning.NO_COUPLE_RELATIONSHIPS":"Warning. You are about to indicate this person had no couple relationships. Please add any evidence by either adding a source or an explanation above.","conclusion.warning.SAME_SEX_RELATIONSHIPS":"This change will create same-sex relationships.","conclusion.high-quality-impedance.warning":"Please review the tagged sources before editing this information.","conclusion.livingPerson.header":"Person Is Still Living","conclusion.livingPerson.warningText":"This person is marked as \\"Living\\" and cannot have a stillborn, burial, or cremation event. Mark this person as Deceased before adding one of these events.","conclusion.SLAVERY.label":"Enslavement","conclusion.ENSLAVEMENT.label":"Enslavement","conclusion.EMANCIPATION.label":"Emancipation","conclusion.GENERATION.label":"Lineage Gap","conclusion.RELATION.label":"Relative","conclusion.NEIGHBORHOOD.label":"Neighbor","conclusion.HOUSEHOLD.label":"Household","conclusion.GODPARENTHOOD.label":"Godparent","conclusion.EMPLOYMENT.label":"Employment","conclusion.APPRENTICESHIP.label":"Apprenticeship","conclusion.association.description.label":"Relationship Description","conclusion.association.date.label":"Relationship Date","conclusion.association.event.label":"Relationship Event","conclusion.association.place.label":"Relationship Place","conclusion.association.generationNumber.label":"Generation Number","conclusion.association.delete.label":"Delete {conclusionType}","conclusion.generations.label":"{count} generations","conclusion.publish-sketch.label":"Publish this Brief Life History to the about page.","conclusion.publish-sketch-description.label":"This will allow all to see this Brief Life History on the about section of the person page as well as on the details section of the person page.","conclusion.is-this-person-deceased.description":"By marking {personName} {gender, select, MALE {deceased} FEMALE {deceased} other {deceased}}, this person will become visible to all users. Are you sure {personName} is {gender, select, MALE {deceased} FEMALE {deceased} other {deceased}}?","conclusion.are-you-sure-this-person-is-deceased.heading":"Are you sure this person is deceased?","conclusion.yes-save.action":"Mark Deceased","conclusion.general.error":"An error occurred. Please try again later.","conclusion.expand-content.action":"Expand Content","conclusion.collapse-content.action":"Collapse content","conclusion.fgt-mark-deceased.description":"To mark this person as deceased, the associated user needs to be removed from the group by an administrator.","conclusion.mark-deceased.heading":"Mark Deceased","conclusion.manage-members.action":"Manage Members","relation-view.helper":"Relationships Disabled While Helping","go-to.settings":"Go to Settings","relation-view.opt-in":"Enable Relationship Viewing","relation-view.explanation-1":"You agree to allow other users to see their relationship to you, your portrait in Family Tree, if available, and any shared ancestors.","relation-view.explanation-2":"Both you and the other user must have Relationship Viewing enabled to see how you are related.","relation-view.explanation-3":"You can disable this feature in your Contact Settings.","relation-view.enable":"Enable","contact.support":"Contact Support","subject":"Subject","contact-overlay.get-user-error":"Unable to read contact information. Please try again later.","contact.overlay.unknown.contributor":"Unknown Contributor","relation-view.unavailable":"Relationship Not Available","relation-view.close":"Close relationship","relation-view.not-related":"Not related","relation-view.is-pending":"Request pending","relation-view.requested":"Request sent","relation-view.request.error":"Request failed","relation-view.retry!":"Try Again","relation-view.request":"Request to View Relationship","relation-view.get-status.error":"There was a problem communicating with the server. Please try again later or contact support if the problem persists.","relation-view.retry":"Retry Relationship Viewing","relation-view.opted-in":"Relationship Viewing enabled","undo":"Undo","relation-view.opt-in.error":"Opt in failed","relation-view.opted-out":"You have opted out of relationship viewing","relation-view.opt-out.error":"Opt out failed","contact-overlay.contact-add-remove-error":"There was a problem adding the Contact. Try again later.","contact-overlay.contact-added":"Contact Added Successfully","contact-overlay.view-contact":"View Contacts","contact-overlay.contact-removed":"Contact Removed Successfully","contact-overlay.add-contact":"Add Contact","contact-overlay.add-contact.a11y":"click to add {name} to contacts","contact-overlay.remove-contact":"Remove Contact","contact-overlay.remove-contact.a11y":"click to remove {name} from contacts","contact.location":"{stateOrProvinceName}, {countryName}","a11y.email":"click to email {email}","a11y.call":"click to call {phoneNumber}","learn-more.action":"Learn More","contact.familysearch":"FamilySearch","contact-overlay.familysearch.blurb":"Change made by authorized support staff or as part of an update.","message":"Message","contact-overlay.contact-add-error":"There was a problem adding the Contact. Try again later.","contact-overlay.contact-remove-error":"There was a problem removing the Contact. Try again later.","chat.open-direct.action":"Chat","contact-overlay.chat-disabled-message":"Unable to message this user. <1>Learn more.</1>","controlled-edit-trees.gedcom-errors.errors.label":"Errors","controlled-edit-trees.gedcom-errors.dismiss.label":"Dismiss","controlled-edit-trees.gedcom-errors.type.note.label":"Note","controlled-edit-trees.gedcom-errors.type.source.label":"Source","controlled-edit-trees.gedcom-errors.type.source.attachment.label":"Source Attachment","controlled-edit-trees.gedcom-errors.type.source.tagging.label":"Source Tagging","controlled-edit-trees.gedcom-errors.type.unknown.label":"Unknown Type","controlled-edit-trees.gedcom-errors.done-reviewing.label":"Done Reviewing","controlled-edit-trees.gedcom-errors.mark-reviewed.label":"Mark Reviewed","controlled-edit-trees.gedcom-errors.marked-reviewed.label":"Marked Reviewed","controlled-edit-trees.gedcom-errors.needs-review.label":"Needs Review","controlled-edit-trees.gedcom-errors.error-explanation.heading":"There were errors importing this data. View them, and add the data to the tree manually.","controlled-edit-trees.gedcom-errors.gedcom-upload-import-differences.heading":"Imported Tree Differences","controlled-edit-trees.gedcom-errors.no-persons-with-errors":"There were no errors uploading this Gedcom file.","controlled-edit-trees.gedcom-errors.dismiss-gedcom-errors":"Dismissing the imported tree differences will mean that you will not be able to review them again. Are you sure you want to dismiss the imported tree differences?","controlled-edit-trees.gedcom-errors.unknown.label":"Unknown","controlled-edit-trees.gedcom-errors.spouse.label":"Spouse","controlled-edit-trees.gedcom-errors.parent.label":"Parent","controlled-edit-trees.gedcom-errors.child.label":"Child","controlled-edit-trees.gedcom-errors.cannot-create-person.error":"The person could not be added.","controlled-edit-trees.gedcom-errors.cannot-create-couple-relationship.error":"The couple relationship could not be added because one or both of the spouses could not be added.","controlled-edit-trees.gedcom-errors.cannot-create-parent-relationship.error":"The parent child relationship could not be added because the child or the parent could not be added.","controlled-edit-trees.gedcom-errors.couple-spouse-missing.error":"One or both of the spouses could not be added.","controlled-edit-trees.gedcom-errors.parent-child-missing.error":"The child or one of the parents could not be added.","controlled-edit-trees.gedcom-errors.person-not-added.error":"Some of this person\'s information could not be added.","controlled-edit-trees.gedcom-errors.couple-not-added.error":"Some of this couple\'s information could not be added.","controlled-edit-trees.gedcom-errors.parent-child-not-added.error":"Some of this parent-child relationship information could not be added.","controlled-edit-trees.gedcom-errors.note-attach.error":"This note could not be attached.","controlled-edit-trees.gedcom-errors.source-adding.error":"This source could not be added.","controlled-edit-trees.gedcom-errors.source-attached.error":"This source could not be attached.","controlled-edit-trees.gedcom-errors.source-tagged.error":"This source could not be tagged.","controlled-edit-trees.gedcom-errors.source-title.error":"The title of this source is too long.","controlled-edit-trees.gedcom-errors.need-required-info.error":"Required information is missing.","controlled-edit-trees.gedcom-errors.unsupported-info.error":"Unsupported information is included.","controlled-edit-trees.gedcom-errors.no-fact-with-other.error":"No new facts with empty \'other\' type are accepted.","controlled-edit-trees.gedcom-errors.more-than-one-preferred.error":"More than one preferred name is specified.","controlled-edit-trees.gedcom-errors.more-than-one-fact-type.error":"More than one fact type is specified.","controlled-edit-trees.gedcom-errors.unable-to-show-tree.error":"Unable to show the tree.","controlled-edit-trees.gedcom-errors.creating-tree.error":"There was an error creating the tree.","controlled-edit-trees.gedcom-errors.cannot-attach-person-note.error":"Cannot attach note to person","controlled-edit-trees.gedcom-errors.cannot-attach-couple-note.error":"Cannot attach note to couple.","controlled-edit-trees.gedcom-errors.cannot-attach-parent-child-note.error":"Cannot attach note to parent child.","controlled-edit-trees.gedcom-errors.missing-spouse.error":"Missing one or more spouses in this relationship.","controlled-edit-trees.gedcom-errors.cannot-add-person-fact.error":"Unable to add person fact.","controlled-edit-trees.gedcom-errors.cannot-add-couple-fact.error":"Unable to add couple fact.","controlled-edit-trees.gedcom-errors.cannot-add-parent-child-fact.error":"Unable to add parent child fact.","controlled-edit-trees.gedcom-errors.not-person-fact.error":"This fact is not a person fact.","controlled-edit-trees.gedcom-errors.not-couple-fact.error":"This fact is not a couple fact.","controlled-edit-trees.gedcom-errors.not-parent-child-fact.error":"This fact is not a parent child fact.","controlled-edit-trees.gedcom-errors.no-couple-relationships.error":"This person has no couple relationships.","controlled-edit-trees.gedcom-errors.no-parent-child-relationships.error":"This person has no parent-child relationships.","controlled-edit-trees.gedcom-errors.person-does-not-exist.error":"This person does not exist. Unable to add fact.","controlled-edit-trees.gedcom-errors.person-death-date-future-error":"The death date cannot be in the future.","controlled-edit-trees.gedcom-errors.person-missing.error":"One or more person missing.","controlled-edit-trees.gedcom-errors.person-deleted.error":"Person was deleted.","errorboundary.message":"Oops, something went wrong. <br /> Please refresh the page.","error-page.generic.title":"Internal Server Error","error-page.generic.body":"We are sorry, but the page you are trying to access has an error.","error-page.not-found.title":"Page Not Found","error-page.not-found.header":"Well, this is unexpected...","error-page.not-found.body":"We can help you search literally billions of records, but we can\'t seem to find the page you\'re looking for.","error-page.personal-data.title":"Feature Unavailable","error-page.personal-data.body":"This feature is not available in your location.","error-page.offline.body":"Check your Wi-Fi, cellular, or other internet connection.","error-page.offline.header":"No Internet Connection","error-page.offline.title":"Offline","error-page.option-help-center":"Visit the Help Center","error-page.option-other":"Or choose a new activity from the main site menu.","error-page.option-records":"Find Historical Records","error-page.option-reload":"Reload the Page","error-page.option-site-map":"View the Site Map","error-page.option-home.action":"Return to the home page","error-page.option-blog":"Visit FamilySearch Blog","error-page.whats-next":"What\'s Next","action.undo":"Undo","button.add-label":"Add Label","follow.hover-text":"To be notified of any changes to this person, click Follow.","follow":"Follow","following-person":"You are now following {name}.","following.hover-text":"To stop being notified of any changes to this person, click Following to unfollow.","following":"Following","not-following-person":"You are no longer following {name}.","unavailable.service-failure":"Something went wrong with following this person. Please try again later.","unavailable.too-many.hover-text":"The number of follows allowed is 4,000. Reduce the number of follows.","unavailable.allowed-exceeded.hover-text":"You have exceeded the number of persons you are allowed to follow. To follow this person you will need to unfollow someone from the following list.","unavailable":"Unavailable","unfollow.hover-text":"To stop being notified of any changes to this person, click Unfollow.","unfollow":"Unfollow","unknown-name":"[Unknown Name]","feedback.error.msg":"Unable to create a case in our support system. Please try again later.","feedback.community.discussion":"Community Discussion","feedback.join.community":"Join the community of family history enthusiasts and FamilySearch employees to ask questions and discuss potential product enhancements.","go.to.discussion":"Go to discussion board","report.problem":"Report a Problem","report.problem.body":"Filling out the form below will help us to understand the problem you\u2019re experiencing and contact you as we work to address the issue. A support case will be submitted to our FamilySearch team.","fields.required":"Required","first-name.label":"First Name","last-name.label":"Last Name","email.label":"Email","phone-number.label":"Phone Number","feedback.description.label":"Brief Description","category.label":"Category","feedback.description.placeholder":"I noticed a problem while...","details.label":"Details","details.placeholder":"I noticed a problem while I was searching for my ancestor... ","feedback.authorize":"To provide the best service possible, do you authorize the FamilySearch support team to access information in your FamilySearch account?","privacy.policy.view.action":"View Privacy Policy","allow.access":"Allow Access","no.access":"Don\'t Allow Access","feedback.send.action":"Send","feedback.category.fs-account":"FamilySearch Account","feedback.category.family-tree":"Family Tree","feedback.category.memories":"Memories","feedback.category.records":"Records","feedback.category.indexing":"Indexing","feedback.category.what-is-indexing":"What is Indexing?","feedback.category.temple":"Temple","feedback.category.genealogies":"Genealogies","feedback.category.research-assistance":"Research Assistance","feedback.category.serving":"Serving in Family History","feedback.category.fhc":"Family History Centers","feedback.category.support":"Help Support and Events","feedback.category.other":"Other","footer.copyright-notice":"\xa9 {year} by Intellectual Reserve, Inc. All rights reserved.","nav.about-familysearch":"About","nav.blog":"Blog","nav.contact-us":"Contact Us","nav.site-map":"Site Map","nav.solutions-gallery":"Solutions Gallery","nav.find-ancestors":"Find Ancestors","nav.dna":"DNA","nav.help.volunteer":"Volunteer","nav.mobile-apps":"Mobile Apps","nav.footer":"Footer","nav.links.about.story":"Our Story","nav.links.about.why":"Why FamilySearch","nav.links.about.free":"How it is Free","nav.links.about.stories":"Customer Stories","nav.links.about.privacy":"Data Privacy","nav.links.about.newsroom":"Newsroom","nav.famApps":"FamilySearch Apps","nav.links.famApps.allApps":"All Mobile Apps","nav.links.famApps.famTreeApp":"Family Tree App","nav.links.famApps.memApp":"Memories App","nav.links.famApps.getInvApp":"Get Involved App","nav.links.famApps.togetherApp":"Together App","nav.genResources":"Genealogy Resources","nav.links.genResources.obituaries":"Obituaries","nav.links.genResources.fsCatalog":"FamilySearch Catalog","nav.links.genResources.ancestorSrch":"Ancestor Search","nav.links.genResources.placeNames":"Place Names","nav.links.genResources.genSrch":"Genealogy Search","nav.links.genResources.guidedRsrch":"Guided Research","nav.links.genResources.books":"Digital Books","nav.links.genResources.cemeteries":"Cemeteries","nav.getHelp":"Get Help","nav.links.help.uComm":"User Community","nav.links.help.helpCntr":"Help Center","nav.links.help.account":"Your Account","nav.links.help.feedback":"Give Feedback","nav.industry":"Industry","nav.links.industry.affilLib":"Affiliate Libraries","nav.links.industry.archives":"Archives","nav.links.industry.devCenter":"Developer Center","nav.involved":"Ways to Contribute","nav.links.involved.getInvolved":"Get Involved","nav.links.involved.1950Census":"1950 U.S. Census","nav.links.involved.donate":"Donate","nav.links.involved.helperRsc":"Helper Resources","nav.links.involved.helpfulRsc":"Helpful Resources","nav.links.involved.labs":"FamilySearch Labs","nav.learning":"Guidance and Learning","nav.links.learning.gettingStrtd":"Getting Started","nav.links.learning.rootsTech":"RootsTech Conference","nav.links.learning.new":"What\'s New","nav.links.learning.learnCntr":"Learning Center","nav.links.learning.wiki":"Genealogy Research Wiki","nav.links.learning.youtube":"YouTube Channel","nav.links.learning.consultations":"Free Virtual Consultations","nav.locations":"Locations","nav.links.locations.slcLoc":"Salt Lake FamilySearch Library","nav.links.locations.localLoc":"Find a Local FamilySearch Center","nav.offer":"What We Offer","nav.links.offer.records":"Genealogy Records","nav.links.offer.sharing":"Family Photo Sharing","nav.links.offer.activities":"Family Activities","nav.links.offer.learnRes":"Learning Resources","nav.links.offer.reGuide":"Research Guidance","nav.links.offer.dnaEd":"DNA Education","nav.links.offer.surname":"Surname Meanings","nav.popular":"Popular in Your Region","nav.links.popular.buildTree":"Build a Family Tree","nav.links.popular.vitalRecords":"Explore Birth, Marriage, and Death Records","nav.links.popular.discover":"Discover Your Ancestors","nav.links.popular.heritage":"Learn about Your Heritage","nav.links.temples.reservations":"My Reservations","nav.links.temples.ordReady":"Ordinances Ready","nav.links.temples.resPolicy":"Reservation Policies","nav.links.temples.tAppt":"Temple Appointments","nav.links.temples.fhCallings":"Family History Callings","nav.links.temples.helperRsc":"Helper Resources","nav.third-party-access":"Third-party Access","nav.links.third-party-access.ancestry":"Ancestry","nav.links.third-party-access.myheritage":"MyHeritage","nav.links.third-party-access.FindMyPast":"FindMyPast","nav.links.third-party-access.american-ancestors":"American Ancestors","nav.links.third-party-access.filae":"Filae","nav.links.third-party-access.geneanet":"Geneanet","nav.links.third-party-access.all-third-parties":"All Third-parties","nav.links.more.aria-label":"more links","fatFooter.tagline.firstLine":"Inspiring people everywhere to connect with their family\u2014across generations.","fatFooter.tagline.secondLine":"FamilySearch is an international nonprofit organization. <0>Donate</0> or <1>volunteer</1> today!","fatFooter.tagline.secondLineUnlinked":"FamilySearch is an international nonprofit organization. Donate or volunteer today!","fatFooter.terms-of-use":"FamilySearch <0>Terms of Use</0>","fatFooter.site-map":"<0>Site Map</0>","fatFooter.new.label":"NEW","fatFooter.privacy-notice":"<0>Privacy Notice</0>","footer.language-link.action":"Select a Language","footer.terms-of-use":"<0>FamilySearch Terms of Use</0>","footer.service-by-church.link":"A service provided by <1>The Church of Jesus Christ of Latter-day Saints</1>","footer.service-by-church.text":"A service provided by The Church of Jesus Christ of Latter-day Saints.","footer.privacy-notice":"<0>Privacy Notice</0>","footer.country-and-language-options":"<0>Country and Language Options</0>","first-name.required":"First Name is required","last-name.required":"Last Name is required","email.required":"Email is required","phone.required":"Phone Number is required","category.required":"Category is required","description.required":"Description is required","details.required":"Details is required","feedback.success.msg":"Your message has been sent. For your reference, the case number is: {caseNumber}","feedback.review.msg":"Your message will be reviewed within 24 hours by our support staff.","first-name.placeholder":"John","last-name.placeholder":"Doe","email.placeholder":"johndoe@gmail.com","phone-number.placeholder":"012-345-6789","nav.links.help.suggestIdea":"Suggest an Idea","footer.familysearch":"FamilySearch","footer.collapse":"Collapse footer","gedcomx.fact.adoption":"Adoption","gedcomx.fact.adoptive-parent":"Adoptive Parent","gedcomx.fact.adult-christening":"Adult Christening","gedcomx.fact.ancestral-home":"Ancestral Home","gedcomx.fact.AfricanAmerican":"African American","gedcomx.fact.age":"Age","gedcomx.fact.affiliation":"Affiliation","gedcomx.fact.amnesty":"Amnesty","gedcomx.fact.annulment":"Annulment","gedcomx.fact.apprenticeship":"Apprenticeship","gedcomx.fact.arrest":"Arrest","gedcomx.fact.award":"Award","gedcomx.fact.baptism":"Baptism","gedcomx.fact.bar-mitzvah":"Bar Mitzvah","gedcomx.fact.bat-mitzvah":"Bat Mitzvah","gedcomx.fact.biography":"Biography","gedcomx.fact.biological-parent":"Bological Parent","gedcomx.fact.birth":"Birth","gedcomx.fact.birth-notice":"Birth Notice","gedcomx.fact.birthplace":"Birthplace","gedcomx.fact.birth-registration":"Birth Registration","gedcomx.fact.blessing":"Blessing","gedcomx.fact.branch-name":"Branch Name","gedcomx.fact.burial":"Burial","gedcomx.fact.caste":"Caste","gedcomx.fact.census":"Census","gedcomx.fact.child-order":"Child Order","gedcomx.fact.christening":"Christening","gedcomx.fact.circumcision":"Circumcision","gedcomx.fact.citizenship":"Citizenship","gedcomx.fact.civil-union":"Civil Union","gedcomx.fact.common-law-marriage":"Common Law Marriage","gedcomx.fact.clan":"Clan","gedcomx.fact.concurrent-heir":"Concurrent Heir","gedcomx.fact.confirmation":"Confirmation","gedcomx.fact.court":"Court","gedcomx.fact.cremation":"Cremation","gedcomx.fact.death":"Death","gedcomx.fact.death-registration":"Death Registration","gedcomx.fact.died-before-eight":"Died before Eight","gedcomx.fact.directory":"Directory","gedcomx.fact.distinction":"Distinction","gedcomx.fact.divorce":"Divorce","gedcomx.fact.divorce-filing":"Divorce Filing","gedcomx.fact.domestic-partnership":"Domestic Partnership","gedcomx.fact.education":"Education","gedcomx.fact.education-enrollment":"Education Enrollment","gedcomx.fact.emigration":"Emigration","gedcomx.fact.engagement":"Engagement","gedcomx.fact.entering-heir":"Entering Heir","gedcomx.fact.ethnicity":"Ethnicity","gedcomx.fact.event-registration":"Event Registration","gedcomx.fact.excommunication":"Excommunication","gedcomx.fact.exiting-heir":"Exiting Heir","gedcomx.fact.financial-transaction":"Financial Transaction","gedcomx.fact.first-communion":"First Communion","gedcomx.fact.flourish":"Flourish","gedcomx.fact.foster-parent":"Foster Parent","gedcomx.fact.funeral":"Funeral","gedcomx.fact.sex":"Sex","gedcomx.fact.sex-change":"Sex Change","gedcomx.fact.generation-number":"Generation Number","gedcomx.fact.graduation":"Graduation","gedcomx.fact.guardian-parent":"Guardian Parent","gedcomx.fact.homeland":"Homeland","gedcomx.fact.immigration":"Immigration","gedcomx.fact.imprisonment":"Imprisonment","gedcomx.fact.inquest":"Inquest","gedcomx.fact.land-assessment":"Land Assessment","gedcomx.fact.land-transaction":"Land Transaction","gedcomx.fact.land":"Land","gedcomx.fact.legal":"Legal","gedcomx.fact.legitimation":"Legitimation","gedcomx.fact.life-sketch":"Life Sketch","gedcomx.fact.living":"Living","gedcomx.fact.marital-status":"Marital Status","gedcomx.fact.marriage":"Marriage","gedcomx.fact.marriage-banns":"Marriage Banns","gedcomx.fact.marriage-contract":"Marriage Contract","gedcomx.fact.marriage-license":"Marriage License","gedcomx.fact.marriage-notice":"Marriage Notice","gedcomx.fact.marriage-registration":"Marriage Registration","gedcomx.fact.marriage-settlement":"Marriage Settlement","gedcomx.fact.medical":"Medical","gedcomx.fact.military-award":"Military Award","gedcomx.fact.military":"Military","gedcomx.fact.military-casualty":"Military Casualty","gedcomx.fact.military-correspondence":"Military Correspondence","gedcomx.fact.military-discharge":"Military Discharge","gedcomx.fact.military-disposition":"Military Disposition","gedcomx.fact.military-draft-registration":"Military Draft Registration","gedcomx.fact.military-enlistment":"Military Enlistment","gedcomx.fact.military-induction":"Military Induction","gedcomx.fact.military-service":"Military Service","gedcomx.fact.military-tour":"Military Tour","gedcomx.fact.migration":"Migration","gedcomx.fact.military-mission":"Military Mission","gedcomx.fact.miscellaneous":"Miscellaneous","gedcomx.fact.move":"Move","gedcomx.fact.move-from":"Move From","gedcomx.fact.move-to":"Move To","gedcomx.fact.multiple-birth":"Multiple Birth","gedcomx.fact.municipal-census":"Municipal Census","gedcomx.fact.naming-ceremony":"Naming Ceremony","gedcomx.fact.national-id":"National ID","gedcomx.fact.nationality":"Nationality","gedcomx.fact.native-american":"Native American","gedcomx.fact.naturalization":"Naturalization","gedcomx.fact.number-of-children":"Number of Children","gedcomx.fact.number-of-marriages":"Number of Marriages","gedcomx.fact.obituary":"Obituary","gedcomx.fact.occupation":"Occupation","gedcomx.fact.ordinance":"Ordinance","gedcomx.fact.ordination":"Ordination","gedcomx.fact.other":"Other","gedcomx.fact.pardon":"Pardon","gedcomx.fact.passport-application":"Passport Application","gedcomx.fact.pension":"Pension","gedcomx.fact.photograph":"Photograph","gedcomx.fact.physical-description":"Physical Description","gedcomx.fact.probate":"Probate","gedcomx.fact.property":"Property","gedcomx.fact.race":"Race","gedcomx.fact.relationship-to-head":"Relationship to Head","gedcomx.fact.religion":"Religion","gedcomx.fact.residence":"Residence","gedcomx.fact.retirement":"Retirement","gedcomx.fact.school":"School","gedcomx.fact.separation":"Separation","gedcomx.fact.set-apart":"Set Apart","gedcomx.fact.stillbirth":"Stillbirth","gedcomx.fact.step-parent":"Step Parent","gedcomx.fact.sociological-parent":"Sociological Parent","gedcomx.fact.surrogate-parent":"Surrogate Parent","gedcomx.fact.tax-assessment":"Tax Assessment","gedcomx.fact.tax":"Tax","gedcomx.fact.title-of-nobility":"Title of Nobility","gedcomx.fact.tribe":"Tribe","gedcomx.fact.tribe-name":"Tribe Name","gedcomx.fact.unknown":"Unknown","gedcomx.fact.visit":"Visit","gedcomx.fact.vital":"Vital","gedcomx.fact.voting":"Voting","gedcomx.fact.voter-registration":"Voter Registration","gedcomx.fact.will":"Will","gedcomx.fact.workhouse-admission":"Workhouse Admission","gedcomx.fact.yahrzeit":"Yahrzeit","gedcomx.fact.otherfacttype":"Other ({factType})","relationship.adoptedchild":"Adopted Child","relationship.adopteddaughter":"Adopted Daughter","relationship.adoptedson":"Adopted Son","relationship.adoptivefather":"Adoptive Father","relationship.adoptivemother":"Adoptive Mother","relationship.adoptiveparent":"Adoptive Parent","relationship.ancestor":"Ancestor","relationship.aunt":"Aunt","relationship.boarder":"Boarder","relationship.bride":"Bride","relationship.brother":"Brother","relationship.brotherinlaw":"Brother-in-law","relationship.child":"Child","relationship.childinlaw":"Child-in-law","relationship.cousin":"Cousin","relationship.daughter":"Daughter","relationship.daughterinlaw":"Daughter-in-law","relationship.deceased":"Deceased","relationship.descendant":"Descendant","relationship.divorcedspouse":"Divorced Spouse","relationship.domestichusband":"Domestic Husband","relationship.domesticpartner":"Domestic Partner","relationship.domesticspouse":"Domestic Spouse","relationship.domesticwife":"Domestic Wife","relationship.employee":"Employee","relationship.exhusband":"Ex-husband","relationship.exspouse":"Ex-spouse","relationship.exwife":"Ex-wife","relationship.father":"Father","relationship.fatherinlaw":"Father-in-law","relationship.femalefiance":"Female Fiance","relationship.fianc\xe9":"Fianc\xe9","relationship.fiance":"Fiance","relationship.femaleancestor":"Female Ancestor","relationship.femalecousin":"Female Cousin","relationship.femaledescendant":"Female Descendant","relationship.femalerelative":"Female Relative","relationship.fosterchild":"Foster Child","relationship.fosterdaughter":"Foster Daughter","relationship.fosterfather":"Foster Father","relationship.fostermother":"Foster Mother","relationship.fosterparent":"Foster Parent","relationship.fosterson":"Foster Son","relationship.godchild":"God Child","relationship.goddaughter":"God Daughter","relationship.godson":"Godson","relationship.godfather":"Godfather","relationship.godmother":"Godmother","relationship.godparent":"Godparent","relationship.grandchild":"Grandchild","relationship.granddaughter":"Granddaughter","relationship.grandson":"Grandson","relationship.grandfather":"Grandfather","relationship.grandmother":"Grandmother","relationship.grandparent":"Grandparent","relationship.groom":"Groom","relationship.guardianchild":"Guardian Child","relationship.guardiandaughter":"Guardian Daughter","relationship.guardianson":"Guardian Son","relationship.guardianfather":"Guardian Father","relationship.guardianmother":"Guardian Mother","relationship.guardianparent":"Guardian Parent","relationship.head":"Head","relationship.hiredhand":"Hired hand","relationship.husband":"Husband","relationship.lodger":"Lodger","relationship.lodger\'swife":"Lodger\'s Wife","relationship.maid":"Maid","relationship.maleancestor":"Male Ancestor","relationship.malecousin":"Male Cousin","relationship.maledescendant":"Male Descendant","relationship.malefiance":"Male Fiance","relationship.malerelative":"Male Relative","relationship.military":"Military","relationship.mother":"Mother","relationship.motherinlaw":"Mother-in-law","relationship.nephew":"Nephew","relationship.niece":"Niece","relationship.nurse":"Nurse","relationship.nepheworniece":"Nephew or Niece","relationship.other":"Other","relationship.otherrelative":"Other Relative","relationship.parent":"Parent","relationship.parentinlaw":"Parent-in-law","relationship.partner":"Partner","relationship.religious":"Religious","relationship.servant":"Servant","relationship.sibling":"Sibling","relationship.siblinginlaw":"Sibling-in-law","relationship.sister":"Sister","relationship.sisterinlaw":"Sister-in-law","relationship.son":"Son","relationship.soninlaw":"Son-in-law","relationship.spouse":"Spouse","relationship.stepbrother":"Step-brother","relationship.stepchild":"Step-child","relationship.stepdaughter":"Step-daughter","relationship.stepsibling":"Step-sibling","relationship.stepsister":"Step-sister","relationship.stepson":"Step-son","relationship.stepfather":"Step-father","relationship.stepmother":"Step-mother","relationship.stepparent":"Step-parent","relationship.student":"Student","relationship.uncle":"Uncle","relationship.uncleoraunt":"Uncle or Aunt","relationship.wife":"Wife","relationship.relative":"Relative","relationship.nonrelative":"Non Relative","relationship.unknown":"Unknown","gedcomx.fact.membership":"Membership","relationship.hiredman":"Hired man","relationship.housekeeper":"Housekeeper","relationship.roomer":"Roomer","gedcomx.fact.roll":"Roll","relationship.hijoorson":"Hijo or son","gedcomx.fact.bank":"Bank","gedcomx.fact.population":"Population","relationship.caretaker":"Caretaker","relationship.lodger\'sdaughter":"Lodger\'s Daughter","gedcomx.fact.previous-residence_one":"Previous Residence","gedcomx.fact.previous-residence_other":"Previous Residence {count}","gedcomx.fact.newspaper":"Newspaper","relationship.clerk":"Clerk","relationship.cook":"Cook","relationship.cousininlaw":"Cousin-in-law","relationship.dependent":"Dependent","relationship.friend":"Friend","relationship.girl":"Girl","relationship.grandnephew":"Grandnephew","relationship.greatgrandson":"Great-grandson","relationship.greatgranddaughter":"Great-granddaughter","relationship.greatgrandmotherinlaw":"Great-grandmother-in-law","relationship.hermanoorbrother":"Hermano or brother","relationship.hiredgirl":"Hired girl","relationship.houseservant":"House servant","relationship.housekeeper\'sdaughter":"Housekeeper\'s daughter","relationship.nieceinlaw":"Niece-in-law","relationship.nursemaid":"Nursemaid","relationship.partner\'swife":"Partner\'s wife","relationship.partner\'sson":"Partner\'s son","relationship.pauper":"Pauper","relationship.stepdaughterinlaw":"Step-daughter-in-law","relationship.stepsoninlaw":"Step-son-in-law","relationship.stepgrandson":"Step-grandson","relationship.stepgranddaughter":"Step-granddaughter","relationship.courtward":"Court ward","relationship.cousin\'sgrandson":"Cousin\'s grandson","relationship.gardener":"Gardener","relationship.greatgrandchild":"Great-grandchild","relationship.grandmotherinlaw":"Grandmother-in-law","relationship.helper":"Helper","relationship.houseboy":"Houseboy","relationship.housekeeper\'sson":"Housekeeper\'s son","relationship.laborer":"Laborer","relationship.orphan":"Orphan","relationship.servant\'swife":"Servant\'s wife","relationship.adopteddaughterinlaw":"Adopted Daughter-in-law","relationship.adoptedgrandson":"Adopted Grandson","relationship.adoptedniece":"Adopted Niece","relationship.apprentice":"Apprentice","relationship.assistant":"Assistant","relationship.assistanthead":"Assistant Head","relationship.assistantpastor":"Assistant Pastor","relationship.attach\xe9":"Attach\xe9","relationship.attendantpriest":"Attendant Priest","relationship.auditor":"Auditor","relationship.auntinlaw":"Aunt-in-law","relationship.auntsson":"Aunt\'s Son","relationship.bartender":"Bartender","relationship.boarderschild":"Boarder\'s Child","relationship.boarderswife":"Boarder\'s Wife","relationship.bookkeeper":"Bookkeeper","relationship.boy":"Boy","relationship.butler":"Butler","relationship.chauffeur":"Chauffeur","relationship.companion":"Companion","relationship.cooksdaughter":"Cook\'s Daughter","relationship.curate":"Curate","relationship.dishwasher":"Dishwasher","relationship.domestic":"Domestic","relationship.farmhand":"Farm Hand","relationship.fianc\xe9e":"Fianc\xe9e","relationship.fostersister":"Foster Sister","relationship.foundling":"Foundling","relationship.gatherer":"Gatherer","relationship.governess":"Governess","relationship.grandaunt":"Grandaunt","relationship.granddaughterinlaw":"Granddaughter-in-law","relationship.grandfatherinlaw":"Grandfather-in-law","relationship.grandniece":"Grandniece","relationship.grandsoninlaw":"Grandson-in-law","relationship.granduncle":"Granduncle","relationship.greatgrandmother":"Great-grandmother","relationship.greatgreatgrandson":"Great-great-grandson","relationship.guest":"Guest","relationship.halfbrother":"Half-brother","relationship.halfsister":"Half-sister","relationship.halfsisterinlaw":"Half-sister-in-law","relationship.hand":"Hand","relationship.handyman":"Handyman","relationship.help":"Help","relationship.hired":"Hired","relationship.hiredboarder":"Hired Boarder","relationship.hiredgentleman":"Hired Gentleman","relationship.hiredhandsdaughter":"Hired Hand\'s Daughter","relationship.hiredhandsson":"Hired Hand\'s Son","relationship.hiredhandswife":"Hired Hand\'s Wife","relationship.hiredhelp":"Hired Help","relationship.hiredservant":"Hired Servant","relationship.hotelguest":"Hotel Guest","relationship.househelper":"House Helper","relationship.housekeepersgranddaughter":"Housekeeper\'s Granddaughter","relationship.housekeepersgrandson":"Housekeeper\'s Grandson","relationship.housekeeperssoninlaw":"Housekeeper\'s Son-in-law","relationship.housemaid":"Housemaid","relationship.houseman":"House Man","relationship.housewife":"Housewife","relationship.houseworker":"House Worker","relationship.inlawshusband":"In-law\'s husband","relationship.inmate":"Inmate","relationship.journeyman":"Journeyman","relationship.laundress":"Laundress","relationship.lodgersbrother":"Lodger\'s Brother","relationship.lodgersfatherinlaw":"Lodger\'s Father-in-law","relationship.lodgersgranddaughter":"Lodger\'s Granddaughter","relationship.lodgersmother":"Lodger\'s Mother","relationship.lodgersmotherinlaw":"Lodger\'s Mother-in-law","relationship.lodgersniece":"Lodger\'s Niece","relationship.lodgerssister":"Lodger\'s Sister","relationship.lodgersson":"Lodger\'s Son","relationship.maidandcook":"Maid and Cook","relationship.maidschild":"Maid\'s Child","relationship.maidservant":"Maidservant","relationship.maidssister":"Maid\'s Sister","relationship.maidsson":"Maid\'s Son","relationship.mothershelper":"Mother\'s Helper","relationship.nephewinlaw":"Nephew-in-law","relationship.newsboy":"Newsboy","relationship.partnersdaughter":"Partner\'s Daughter","relationship.patient":"Patient","relationship.roomersdaughter":"Roomer\'s Daughter","relationship.roomerssnephew":"Roomers\'s Nephew","relationship.roomersson":"Roomer\'s Son","relationship.roomerswife":"Roomer\'s Wife","relationship.saleswoman":"Saleswoman","relationship.schoolteacher":"Schoolteacher","relationship.secondcousin":"Second Cousin","relationship.secondwife":"Second Wife","relationship.servantsdaughter":"Servant\'s Daughter","relationship.servantsson":"Servant\'s Son","relationship.soninlawssister":"Son-in-law\'s sister","relationship.sonorsister":"Son or Sister","relationship.statewardboarder":"State Ward Boarder","relationship.stenographer":"Stenographer","relationship.stepbrotherinlaw":"Step-brother-in-law","relationship.stepfatherinlaw":"Step-father-in-law","relationship.stepgrandchild":"Step-grandchild","relationship.stepmotherinlaw":"Step-mother-in-law","relationship.stepniece":"Step-niece","relationship.subject":"Subject","relationship.subtenant":"Subtenant","relationship.sweetheart":"Sweetheart","relationship.teacher":"Teacher","relationship.tenant":"Tenant","relationship.tenantsson":"Tenant\'s Son","relationship.tenantswife":"Tenant\'s Wife","relationship.uncleinlaw":"Uncle-in-law","relationship.wagehand":"Wage Hand","relationship.waiter":"Waiter","relationship.waitress":"Waitress","relationship.ward":"Ward","relationship.widow":"Widow","relationship.worker":"Worker","gedcomx.fact.church-record":"Church Record","gedcomx.fact.draft":"Draft","gedcomx.fact.application":"Application","gedcomx.fact.employment":"Employment","gedcomx.fact.event-type":"Event Type","gedcomx.fact.travel":"Travel","gedcomx.fact.mission":"Mission","gedcomx.fact.passport":"Passport","gedcomx.lifespan.deceased":"Deceased","gedcomx.lifespan.living":"Living","gedcomx.fact.miscellaneous-record":"Miscellaneous Record","gedcomx.fact.account-journal":"Account Journal","gedcomx.fact.administration-record":"Administration Record","gedcomx.fact.birth-records-index":"Birth Records Index","gedcomx.fact.contract-record":"Contract Record","gedcomx.fact.criminal":"Criminal","gedcomx.fact.death-record-index":"Death Record Index","gedcomx.fact.deed-index":"Deed Index","gedcomx.fact.deed-record":"Deed Record","gedcomx.fact.financial-record":"Financial Record","gedcomx.fact.genealogy-record":"Genealogy Record","gedcomx.fact.guardianship-record":"Guardianship Record","gedcomx.fact.index":"Index","gedcomx.fact.inventory-record":"Inventory Record","gedcomx.fact.letter":"Letter","gedcomx.fact.map":"Map","gedcomx.fact.marriage-record-index":"Marriage Record Index","gedcomx.fact.medical-record":"Medical Record","gedcomx.fact.newspaper-article":"Newspaper Article","gedcomx.fact.note":"Note","gedcomx.fact.property-sale-record":"Property Sale Record","gedcomx.fact.receipt":"Receipt","gedcomx.fact.slave-purchase-record":"Slave Purchase Record","gedcomx.fact.will-index":"Will Index","gedcomx.fact.will-record":"Will Record","gedcomx.fact.deed":"Deed","gedcomx.fact.freedmens-bureau":"Freedmen\'s Bureau","gedcomx.fact.financial":"Financial","gedcomx.fact.homestead":"Homestead","gedcomx.fact.homesteadFinalCertificate":"Homestead Final Certificate","gedcomx.fact.illness":"Illness","gedcomx.fact.naturalization-petitions":"Naturalization Petitions","gedcomx.fact.no-couple-relationships":"No Couple Relationships","gedcomx.fact.religious":"Religious","gedcomx.fact.social-program-document":"Social Program Document","gedcomx.fact.banns":"Banns","gedcomx.fact.social-program-application":"Social Program Application","gedcomx.fact.social-program-claim":"Social Program Claim","gedcomx.fact.administration":"Administration","gedcomx.fact.couple-never-had-children":"Couple Never Had Children","gedcomx.fact.inventory":"Inventory","gedcomx.fact.lived-together":"Lived Together","gedcomx.fact.marriage-dissolution":"Marriage Dissolution","gedcomx.fact.no-children":"No Children","gedcomx.fact.property-sale":"Property Sale","gedcomx.fact.social-program-correspondence":"Social Program Correspondence","gedcomx.fact.birth-certificate":"Birth Certificate","gedcomx.fact.federal-population-census":"Federal Population Census","gedcomx.fact.marriage-certificate":"Marriage Certificate","gedcomx.fact.immigrationRegistration":"Immigration Registration","gedcomx.fact.vote":"Vote","gedcomx.fact.civil-record-of-ecclesiastical-marriage":"Civil Record Of Ecclesiastical Marriage","gedcomx.fact.baptismal-certificate":"Baptismal Certificate","gedcomx.fact.freedmen":"Freedmen","gedcomx.fact.intended-marriage\'":"Intended Marriage","gedcomx.fact.school-record":"School Record","gedcomx.fact.vestry-minutes":"Vestry Minutes","gedcomx.fact.census-index":"Census Index","gedcomx.fact.coming-of-age":"Coming Of Age","gedcomx.fact.intended-marriage":"Intended Marriage","gedcomx.fact.background-check":"Background Check","gedcomx.fact.background":"Background","gedcomx.fact.criminal-background-check":"Criminal Background Check","global.familysearch":"FamilySearch","header.account":"Account","header.user.portrait.label":"User Portrait","header.lang-picker.action":"Select a Language","header.open-menu.action":"Open Menu","header.close-menu.action":"Close Menu","account.center-tools.action":"Center Tools","account.create.action":"Create Account","account.help-others.action":"Help Others","account.sign-out.action":"Sign Out","nav.source-box":"Source Box","nav.settings":"Settings","nav.family-groups":"Family Groups","nav.family-tree":"Family Tree","nav.family-tree.tree":"Tree","nav.family-tree.private-people":"Private People","nav.family-tree.person":"Person","nav.family-tree.find":"Find","nav.family-tree.following":"Following","nav.family-tree.contributions":"My Contributions","nav.family-tree.recents":"Recents","nav.family-tree.family-groups-trees":"Family Groups and Trees","nav.search":"Search","nav.search.records":"Records","nav.records.images":"Images","nav.search.genealogies":"Genealogies","nav.search.catalog":"Catalog","nav.search.books":"Books","nav.search.cemeteries":"Cemeteries","nav.research-wiki":"Research Wiki","nav.research-wiki.url":"Main_Page","nav.research-trees":"Research Trees","nav.CETs":"CETs","nav.memories":"Memories","nav.overview":"Overview","nav.memories.gallery":"Gallery","nav.memories.people":"People","nav.memories.find":"Find","nav.memories.family-feed":"Family Feed","nav.indexing":"Indexing","nav.what-is-indexing":"What is Indexing?","nav.get-involved":"Get Involved","nav.get-involved.updated.opportunities":"Opportunities","nav.get-involved.census":"1950 U.S. Census","nav.get-involved.your-impact":"Your Impact","nav.activities":"Activities","nav.activities.all-activities":"All Activities","nav.activities.all-about-me":"All About Me","nav.activities.compare-a-face":"Compare-a-Face","nav.activities.famous-relatives":"Famous Relatives","nav.activities.record-my-story":"Record My Story","nav.activities.picture-my-heritage":"Picture My Heritage","nav.activities.in-home-activities":"In-Home Activities","nav.activities.where-am-i-from":"Where Am I From?","nav.activities.surname-origins":"Surname Origins","nav.activities.together-app":"Together App","nav.temple":"Temple","nav.temple.reservations":"My Reservations","nav.temple.shared":"Shared with Temple","nav.temple.completed":"Completed","nav.temple.ordinances-ready":"Ordinances Ready","nav.temple.family-name-assist":"Family Name Assist","nav.temple.schedule-temple-appointment":"Schedule Temple Appointment","nav.help":"Help","nav.notifications":"Notifications","notify.show-all-notifications":"Show all notifications","notify.notifications-blurb-youre-all-caught-up":"You\'re all caught up!","notify.notifications-check-back":"Check back for account updates and to make new family discoveries. Are your old notifications missing? They may have expired.","header.locations":"Locations","header.chat.new":"New chats available","header.chat":"Chat","nav.main":"Main","header.notifications.new":"New notifications available","header.notifications":"Notifications","nav.contacts":"Contacts","nav.group-reservations":"Group Reservations","help-tray.see-all-results.action":"See All Results","help-tray.search-field.placeholder":"Search articles and lessons","help-tray.back.button-label":"Back","help-tray.new-tab.button-label":"Open in New Tab","help-tray.getting-started.heading":"Getting Started","help-tray.getting-started.subtitle":"How to Do Family History","help-tray.suggested-topics.heading":"Suggested Topics","help-tray.community.link":"Community","help-tray.helper-resources.link":"Helper Resources","help-tray.contact-us.link":"Contact Us","help-tray.help-center.link":"Help and Learning","help-tray.feedback.text":"Is this helpful?","help-tray.feedback.link":"Give feedback.","help":"Help","help-tray.helpful-resources.link":"Helpful Resources","help-tray.help-overview.heading":"Overview","help-tutorial.tutorial-offer-dialog.overlay-aria":"Overview Offer Dialog","help-tutorial.no-thanks.button":"No Thanks","help-tutorial.start-tutorial.button":"Start Overview","help-tutorial.want-to-know-more.heading":"Want to know more?","help-tutorial.exit-tutorial.button":"Exit Overview","help-tutorial.reopen-tutorial.tip":"If you would like to get to the Overview again, click on the question mark.","help-tutorial.article.overline":"Article","help-tutorial.video-duration.overline":"Video ({durationText})","paginator.previous-slide":"Previous Slide","paginator.next-slide":"Next Slide","help-tutorial.dont-show-again.label":"Do not show again.","stopButton":"Stop","stop_helping_heading":"Stop Helping Others","are_you_sure_stop":"Are you sure you would like to stop helping others?","btn_stopHelping_text":"Stop Helping Others","btn_startHelping_text":"Help Others","helpernumber_label":"Helper Number","helping_phrase":"You are helping","helping_phrase_with_name":"You are helping <strong>{name}</strong>","stop_helping":"Stop Helping","username_required":"Username is required","username_maxlength":"Username can be at most {maxLength} characters","helperPin_required":"Helper Number is required","helperpin_maxlength":"Helper Pin can be at most {maxLength} characters","whom.to.help":"Whom do you want to help?","username_or_helper_number.error":"The username or helper number is incorrect. Please try again.","server_error":"Sorry. There was a problem starting helper mode. You may need to try again later.","birth-date.label":"Birthdate","birthdate_required":"Birth date is required","account-age.validation":"You must be at least {age} years old to create an account.","username.validation-error":"Username can be at most {maxLength} characters","helper-pin.validation-error":"Helper Pin can be at most {maxLength} characters","given-name.label":"Given Name","family-name.label":"Family Name","givenName_required":"Given Name is required","givenname_maxlength":"","given-name.validation-error":"Given name can be at most {maxLength} characters","surname_required":"Family Name is required","surname_maxlength":"","surname.validation-error":"Surname can be at most {maxLength} characters","help.others":"Help Others","user-name.placeholder":"Enter his or her username","helper-number.placeholder":"Enter his or her helper number","given-name.placeholder":"Enter his or her given name","family-name.placeholder":"Enter his or her family name","helper-alert.message":"When you give your helper number to others, they can access and edit your Family Tree information.","helper-dialog.help-message":"You can find and change your helper number in the <2>Permissions tab</2> in your account settings.","helper-dialog.username-tab.title":"Username","helper-dialog.full-name-tab.title":"Full Name","helper-alert.message-link":"Learn more","grid.image.add":"Add Image","grid.image.select":"Select Image","grid.image.remove":"Remove Image","grid.divider.header.images":"Images","image-viewer.toolbar.adjust-image.button":"Adjust Image","image-viewer.toolbar.download.button":"Download","image-viewer.thinganator.image.label":"Image","combo-image-viewer.toolbar.grid.button":"View Grid","single-image-viewer.adjustments.invert-image-colors.label":"Invert Image Colors","single-image-viewer.adjustments.increase-brightness.icon-button-label":"Increase Brightness","single-image-viewer.adjustments.increase-constrast.icon-button-label":"Increase Contrast","single-image-viewer.adjustments.decrease-brightness.icon-button-label":"Decrease Brightness","single-image-viewer.adjustments.decrease-contrast.icon-button-label":"Decrease Contrast","single-image-viewer.adjustments.adjust-image.heading":"Adjust Image","single-image-viewer.adjustments.contrast.heading":"Contrast","single-image-viewer.adjustments.rotate-image-right.button":"Rotate Image Right","single-image-viewer.adjustments.reset.button":"Reset","single-image-viewer.adjustments.image-adjustments.heading":"Image Adjustments","single-image-viewer.adjustments.brightness.heading":"Brightness","single-image-viewer.adjustments.image-rotation.heading":"Image Rotation","single-image-viewer.adjustments.rotate-image-left.button":"Rotate Image Left","single-image-viewer.adjustments.save-rotation.button":"Save Image Rotation","image-viewer.previous-image.button":"Previous Image","image-viewer.next-image.button":"Next Image","imageAttribution.courtesy":"This image courtesy of {attribution}","single-image-viewer.adjustments.zoom-level.heading":"Zoom Level","single-image-viewer.adjustments.zoom-level.maintiain-zoom-level":"Maintain Image Zoom","image-viewer.singleImageViewerError.unauthorized":"We don\'t have permission to share this image. Access is usually determined by the records\' creator or custodian or by data privacy laws.","image-viewer.singleImageViewerError.unavailable":"Try refreshing the page, or come back later.","ImageGroupError.impervaHeader":"Oops. You\u2019re moving too quickly.","ImageGroupError.unauthorizedHeader":"Unable to Display Image Group","imageAttribution.termsOfUse":"Terms of Use","ImageGroupError.impervaSubheader":"You may need to wait a moment and try again.","ImageGroupError.unauthorizedSubheader":"You do not have permission to view this image.","ImageGroupError.unavailableSubheader":"Try refreshing the page, or come back later.","single-image-viewer.keyboard-shortcuts.button":"Keyboard Shortcuts","single-image-viewer.keyboard-shortcuts.title":"Keyboard Shortcuts","single-image-viewer.keyboard-shortcuts.description":"Try using these shortcuts to enhance your image viewer experience.","single-image-viewer.keyboard-shortcuts.shortcut.table-heading":"Shortcut","single-image-viewer.keyboard-shortcuts.action.table-heading":"Action","single-image-viewer.keyboard-shortcuts.download-image":"Download Image","single-image-viewer.keyboard-shortcuts.zoom-in":"Zoom In","single-image-viewer.keyboard-shortcuts.zoom-out":"Zoom Out","single-image-viewer.keyboard-shortcuts.pan-up":"Pan Up","single-image-viewer.keyboard-shortcuts.pan-down":"Pan Down","single-image-viewer.keyboard-shortcuts.pan-left":"Pan Left","single-image-viewer.keyboard-shortcuts.pan-right":"Pan Right","image-viewer.toolbar.toggle-controls.button":"Adjust Image","single-image-viewer.keyboard-shortcuts.invert-image-colors":"Invert Image Colors","single-image-viewer.keyboard-shortcuts.increase-brightness":"Increase Brightness","single-image-viewer.keyboard-shortcuts.decrease-brightness":"Decrease Brightness","single-image-viewer.keyboard-shortcuts.increase-contrast":"Increase Contrast","single-image-viewer.keyboard-shortcuts.decrease-contrast":"Decrease Contrast","single-image-viewer.keyboard-shortcuts.rotate-image-right":"Rotate Image Right","single-image-viewer.keyboard-shortcuts.previous-image":"Previous Image","single-image-viewer.keyboard-shortcuts.next-image":"Next Image","single-image-viewer.adjustments.disabled-in-grid-mode.tooltip":"Only available in single image view","imageAttribution.subTitle":"Image Attribution","imageAttribution.okay":"Okay","member-message.heading":"Image Restricted","member-message.description":"These images are viewable to members of supporting organizations.","member-message.learn-more":"LEARN MORE","restricted-message.image-alt":"Unauthorized access illustration","restricted-message.custodian.title":"Custodian: {title}","on-site-message.heading":"Image Restricted","on-site-message.image-alt":"Unauthorized access illustration","restricted-message.heading":"Image Restricted","error":"unable to load custodian url.","sign-in-prompt.heading":"Please Sign In","sign-in-prompt.description":"Please sign in to determine if you have the right permissions to view this image.","sign-in-prompt.sign-in":"Sign In","sign-in-prompt.create-account":"Create a Free Account","sign-in-prompt.image-alt":"Unauthorized access illustration","lang-picker.apply.action":"Apply","lang-picker.select-language.title":"Change Language","lang-picker.recent-languages.title":"Recently used languages","memory-card.comments.label":"Comments:","memory-card.error.label":"Something didn\'t work","memory-card.error.tooltip":"Sorry. Due to a system error we couldn\u2019t process this memory. Try re-uploading it. If you have more trouble, check with support.","memory-card.missing.label":"Missing Memory","memory-card.missing.tooltip":"The file for this Memory is missing. Click (or tap) to see your restoration options in the Memories Restoration Tool.","memory-card.no-date":"No Date","memory-card.processing.label":"Processing...","memory-card.processing.tooltip":"This memory is being screened to ensure a family friendly environment. You can still edit it, but others won\u2019t see it yet.","memory-card.restricted.label":"Restricted","memory-card.restricted.tooltip":"An initial review shows that this memory may conflict with one or more site guidelines. To find out more, check your email or contact FamilySearch Support.","memory-card.tombstone.description-plural":"{count, plural, one {This memory will be permanently deleted in # day.} other {This memory will be permanently deleted in # days.}}","memory-card.tombstone.label-plural":"{count, plural, one {# day} other {# days}}","memory-tile.view-all":"View All","memory-tile.aria-label.audio-duration":"Audio duration","memory-tile.aria-label.attached-photo-count":"Number of attached photos","memory-tile.aria-label.view-all":"Go to additional memories","memory-tile.aria-label.type-photo":"Photo memory","memory-tile.aria-label.type-document":"Document memory","memory-tile.aria-label.type-story":"Story memory","memory-tile.aria-label.type-audio":"Audio memory","mobile-app-buttons.google-play":"Get it on Google Play","mobile-app-buttons.app-store":"Download on the App Store","name-template.error.forbidden-character":"The following characters are not allowed:{forbiddenChars}","name-template.warning.partial-transliteration":"The computer-generated translation in these fields might be wrong. Correct these fields as needed.","name-template.CHINESE-HAN":"Hanzi","name-template.CHINESE-HANJA":"Hanja","name-template.CHINESE-KANJI":"Kanji","name-template.ARAB":"Arabic","name-template.arabic":"Arabic","name-template.CYRILLIC":"Cyrillic","name-template.GREEK":"Greek","name-template.GEOR":"Georgian","name-template.HANGUL":"Hangul","name-template.KANA":"Kana","name-template.KHMER":"Khmer","name-template.MONGOLIAN":"Mongolian","name-template.ROMAN":"Roman","name-template.THAI":"Thai","name-template.VIETNAMESE":"Vietnamese","name-template.albanian":"Albanian","name-template.ARMENIAN":"Armenian","name-template.bulgarian":"Bulgarian","name-template.chinese":"Chinese","name-template.croatian":"Croatian","name-template.czech":"Czech","name-template.danish":"Danish","name-template.dutch":"Dutch","name-template.english":"English","name-template.estonian":"Estonian","name-template.farsi":"Persian (Farsi)","name-template.finnish":"Finnish","name-template.first-names":"First Names","name-template.french":"French","name-template.georgian":"Georgian","name-template.german":"German","name-template.hungarian":"Hungarian","name-template.indonesian":"Indonesian","name-template.italian":"Italian","name-template.japanese":"Japanese","name-template.korean":"Korean","name-template.language-selector.label":"Language Template","name-template.last-names":"Last Names","name-template.last-name-help-text":"If female, use maiden name.","name-template.latvian":"Latvian","name-template.lithuanian":"Lithuanian","name-template.family-surname":"Family Name and Surname","name-template.malagasy":"Malagasy","name-template.malay":"Malay","name-template.non-standard-forms-label":"Non-standard Name Forms","name-template.norwegian":"Norwegian","name-template.other":"Other","name-template.polish":"Polish","name-template.portuguese":"Portuguese","name-template.remove-name-form":"Remove {lang} Name Form","name-template.romanian":"Romanian","name-template.russian":"Russian","name-template.samoan":"Samoan","name-template.slovak":"Slovak","name-template.spanish":"Spanish","name-template.suffix":"Suffix","name-template.swahili":"Swahili","name-template.swedish":"Swedish","name-template.tagalog":"Tagalog","name-template.tongan":"Tongan","name-template.turkish":"Turkish","name-template.ukrainian":"Ukrainian","name-template.mismatch-lang-template.error":"Characters do not match Language Template.","name-template.multiple-scripts.error":"Not all characters are the same script.","name-template.problem-with-language-template.heading":"Problem with Language Template","name-template.problem-with-language-template.description":"Please either change the Language Template to match the characters used in the name fields, or change the characters used in the name fields to match the Language Template.","name-template.character-mismatch.heading":"Character Mismatch in NameFields","name-template.character-mismatch.description":"Please change all the characters in the name fields to the same scripts.","name-template.name-fields-value-missing":"Please include at least one first name or last name.","ordinances-reserve.110year.i-have-permission.label":"I Have Permission","ordinances-reserve.110year.permission-required-explanation":"This person was born within the last 110 years. Permission from a close relative is required to perform these ordinances. <0>Learn more</0>.","ordinances-reserve.110year.request-in-review":"Permission to request these ordinances is being reviewed.","ordinances-reserve.110year.you-are-approved":"You are approved to request these ordinances.","ordinances-reserve.110year.request-ordinances-for-person":"Request Ordinances for {person}","ordinances-reserve.110year.question-are-you-related":"Are you related to {person}?","ordinances-reserve.110year.family-search-cannot-detect-relationship":"FamilySearch cannot detect a relationship between you and {person}.","ordinances-reserve.110year.no-relationship-found-but-user-claims-they-are-related":"You will need to obtain written permission from a close living relative: an undivorced spouse (the spouse to whom the individual was married when he or she died), an adult child, a parent, or a sibling.","ordinances-reserve.110year.no-relationship-found":"FamilySearch cannot detect a relationship between you and {person}. You must add the relationship in Family Tree to request ordinances.","ordinances-reserved.requesting-friend-ordinances":"Requesting ordinances for a friend?","ordinances-reserve.110year.must-be-related":"Church temple ordinance policy requires you to be related to the person for whom you are requesting ordinances. Thank you for following Church policy.","ordinances-reserve.110year.learn-more-about-policy":"Learn more about the policy","ordinances-reserve.110year.how-you-know-person":"How do you know {person}?","ordinances-reserve.110year.why-request":"Why are these ordinances being requested?","ordinances-reserve.110year.error.attachment-error":"Error getting attachment.","ordinances-reserve.110year.explain-here":"Explain here","ordinances-reserve.110year.enter-your-reason":"Enter your reason","ordinances-reserve.110year.person-granting-permission":"Close Living Relative Granting Permission","ordinances-reserve.110year.signed-permission-document":"Signed Permission Document","ordinances-reserve.110year.please-attach":"Please attach a copy of the signed written permission from a close living relative.","ordinances-reserve.110year.written-permission-wording":"The written permission needs to be worded as follows:","ordinances-reserve.permission-approved.label":"Permission Approved","ordinances-reserve.110year.permission-wording":"I, (name of person giving permission), give (your name) permission to do temple work for (name of deceased), who is my (relationship to person giving permission).","ordinances-reserve.110year.add-attachment":"Add Attachment","ordinances-reserve.110year.your-contact-info":"Your Contact Information","ordinances-reserve.110year.email-address":"Email address","ordinances-reserve.110year.example-email":"name@email.com","ordinances-reserve.110year.mailing-address":"Mailing address","ordinances-reserve.110year.example-mailing-address":"Enter the mailing address","ordinances-reserve.110year.first-and-last-name":"First and last name","ordinances-reserve.110year.phone-number":"Phone number","ordinances-reserve.110year.example-phone-number":"000-000-0000","ordinances-reserve.110year.reserves-right-to-contact":"I understand FamilySearch reserves the right to contact the person giving the permission, if necessary.","ordinances-reserve.110year.you-have-received-this-form":"You have received this form because you are not his or her spouse, parent, child, or sibling. To do the ordinances, you must share the information below.","ordinances-reserve.110year.is-spouse-alive":"Is the spouse of {person} alive?","ordinances-reserve.110year.spouse-first-and-last-name":"Spouse\'s first and last name","ordinances-reserve.110year.enter-first-and-last-name":"Enter the first and last name","ordinances-reserve.110year.did-not-have-spouse":"Didn\'t have a spouse","ordinances-reserve.110year.only-ex-spouse-living":"Only an ex-spouse is living","ordinances-reserve.110year.what-type-of-permission-from-spouse":"What type of permission did you get from the spouse?","ordinances-reserve.110year.what-type-of-permission":"What type of permission did you receive?","ordinances-reserve.110year.written-permission":"Written permission","ordinances-reserve.110year.verbal-permission":"Verbal permission","ordinances-reserve.110year.did-not-get-permission":"Didn\'t get permission","ordinances-reserve.110year.why-did-not-get-permission":"Why didn\'t you get permission from the spouse?","ordinances-reserve.110year.who-gave-permission":"Which relative of {person} gave you permission?","ordinances-reserve.110year.parent":"Parent","ordinances-reserve.110year.child":"Child","ordinances-reserve.110year.sibling":"Sibling","ordinances-reserve.110year.none-are-alive":"None of the above are alive","ordinances-reserve.110year.invalid-email":"Please enter a valid email","ordinances-reserve.110year.invalid-phone":"Please enter a valid phone number","ordinances-reserve.110year.invalid-mailing-address":"Please enter a valid mailing address","ordinances-reserve.110year.missing-first-and-last-name":"Please enter a first and last name","ordinances-reserve.110year.data-missing":"One or more fields are missing data","ordinances-reserve.110year.reason-no-permission":"Please enter why you didn\'t get permission from the spouse","ordinances-reserve.110year.reason-requesting-ordinances":"Please enter why you are requesting these ordinances","ordinances-reserve.110year.reason-know-person":"Please enter how you know the person","ordinances-reserve.110year.required":"Required","ordinances-reserve.110year.invalid-attachment":"Please select an image, video, or document less than 5 MB in size.","ordinances-reserve.110year.invalid-type-attachment":"Please select an image, video, or document.","ordinances-reserve.110year.bytes":"{fileName} is {numBytes, plural, one {# byte} other {# bytes}}.","ordinances-reserve.110year.kb":"{fileName} is {numKb} KB.","ordinances-reserve.110year.mb":"{fileName} is {numMb} MB.","ordinances-reserve.accept.action":"Accept","ordinances-reserve.church-policy.description":"Please Read before Continuing","ordinances-reserve.church-policy.label":"Church Policy","ordinances-reserve.confidential-person.description":"Confidential people are managed in a private space. Only you will be able to print their ordinances.","ordinances-reserve.group-confidential-person.description":"Confidential people are managed in a private space. Only group members will be able to print their ordinances.","ordinances-reserve.confidential-person.label":"Confidential Person","ordinances-reserve.data-problems.label":"Data Problems","ordinances-reserve.error.exceeds-300-limit.description":"You may have up to 300 temple reservations. To ensure ordinances are completed in a timely manner, please complete, share, or unreserve them before requesting more. <0>Learn more</0>.","ordinances-reserve.error.exceeds-300-limit-print.description":"You are unable to print [Ordinances: {listOfOrdinances}] because the previous ordinances are shared with the temple and your reserved list has more than 300 reservations. Before you can add new reservations, you will need to complete, share with the temple, or unreserve other reservations in your list. <0>Learn more</0>.","ordinances-reserve.error.exceeds-300-limit.label":"Max Reservations Exceeded","ordinances-reserve.error.reservation-family-error":"Unable to display the temple ordinances for this family.","ordinances-reserve.error.reservation-person-error":"Unable to display the temple ordinances for this individual.","ordinances-reserve.error.reserve-general":"There was an error processing your request.","ordinances-reserve.success.message":"The ordinances were successfully requested.","ordinances-reserve.error.general.body":"An error occurred. Please try again later.","ordinances-reserve.legend.label":"Legend","ordinances-reserve.permission-required.label":"Permission Required","ordinances-reserve.possible-duplicates-BAPTISM.description":"Baptism. Please resolve the possible duplicates before reserving this ordinance.","ordinances-reserve.possible-duplicates-CONFIRMATION.description":"Confirmation. Please resolve the possible duplicates before reserving this ordinance.","ordinances-reserve.possible-duplicates-INITIATORY.description":"Initiatory. Please resolve the possible duplicates before reserving this ordinance.","ordinances-reserve.possible-duplicates-ENDOWMENT.description":"Endowment. Please resolve the possible duplicates before reserving this ordinance.","ordinances-reserve.possible-duplicates-SEALING_TO_PARENTS.description":"Sealing to Parents. Please resolve the possible duplicates before reserving this ordinance.","ordinances-reserve.possible-duplicates-SEALING_TO_SPOUSE.description":"Sealing to Spouse. Please resolve the possible duplicates before reserving this ordinance.","ordinances-reserve.possible-duplicates.description":"Possible duplicate of {personName} ({pid}) exists. Review duplicates before requesting family names.","ordinances-reserve.view-duplicates.action":"View Duplicates","ordinances-reserve.possible-duplicates.label":"Possible Duplicates","ordinances-reserve.request.action":"Request","ordinances-reserve.status.Completed":"Completed","ordinances-reserve.status.InProgressNotPrinted":"In Progress","ordinances-reserve.status.NeedsMoreInformation":"Needs More Information","ordinances-reserve.status.Ready":"Request Family Names","ordinances-reserve.status.ready-shared":"90-Day Request","ordinances-reserve.status.ready-shared.label":"120-Day Request","ordinances-reserve.status.Reserved":"In Progress","ordinances-reserve.status.ReservedSharedReadyRequest.description":"You may reserve these ordinances, and then you have 120 days to complete them.","ordinances-reserve.temple-policy.body":"Temple ordinances are sacred and should be treated with respect. Please reserve ordinances for individuals only if you are related to them.","ordinances-reserve.temple-policy.born-110.body":"To do ordinances for a deceased person who was born in the last 110 years, the following requirements must be met.","ordinances-reserve.temple-policy.born-110.closest-living.label":" You must either be one of the closest living relatives, or you must obtain permission from one of the closest living relatives. If you are not a spouse, child, parent, or sibling of the deceased, please obtain permission from one of the closest living relatives before doing the ordinances. The closest living relatives are an undivorced spouse (the spouse to whom the individual was married when he or she died), an adult child, a parent, or a brother or sister.","ordinances-reserve.temple-policy.born-110.deceased.label":" The person must have been deceased for at least 30 days.","ordinances-reserve.temple-policy.born-110.header":"Persons Born within the Last 110 Years","ordinances-reserve.temple-policy.general-handbook.body":"General Handbook, 28.1.1.1","ordinances-reserve.temple-policy.more-info.body":"For more information, please read:","ordinances-reserve.temple-policy.responsibility.ancestors.label":"Direct-line ancestors (parents, grandparents, great-grandparents, and so on, and their families).","ordinances-reserve.temple-policy.responsibility.body":"You are responsible to submit names of the following individuals:","ordinances-reserve.temple-policy.responsibility.family.label":"Immediate family members","ordinances-reserve.temple-policy.verbal-approval.label":"Verbal approval is acceptable. Family members should work together to determine when the ordinances will be done and who will do them.","ordinances-reserve.temple-policy.whose-also.ancestor-descendants.label":"Descendants of your ancestors.","ordinances-reserve.temple-policy.whose-also.body":"You may also submit the names of the following individuals:","ordinances-reserve.temple-policy.whose-also.collateral-family.label":"Collateral family lines (uncles, aunts, cousins, and their families).","ordinances-reserve.temple-policy.whose-also.family.label":"Biological, adoptive, and foster family lines connected to your family.","ordinances-reserve.temple-policy.whose-also.own-descendants.label":"Your own descendants.","ordinances-reserve.temple-policy.whose-also.possible-ancestors.label":"Possible ancestors, meaning individuals who have a probable family relationship that cannot be verified because the records are inadequate, such as those who have the same last name and resided in the same small geographic area as your known ancestors.","ordinances-reserve.temple-policy.whose-not-holocaust-exception.family-member.label":" They are an immediate family member of the deceased (defined as parents, spouse, children or siblings).","ordinances-reserve.temple-policy.whose-not-holocaust-exception.permission-family-member.label":" Or they have permission of all living immediate family members.","ordinances-reserve.temple-policy.whose-not-holocaust-exception.permission-of-closest.label":" Or they have the permission of the closest living relative if no immediate family members are living.","ordinances-reserve.temple-policy.whose-not.body":"Do not submit the following individuals unless you are related to them:","ordinances-reserve.temple-policy.whose-not.famous.label":" Famous people.","ordinances-reserve.temple-policy.whose-not.holocaust.label":" Jewish Holocaust victims. Members can do the ordinances for these people only under the following conditions:","ordinances-reserve.temple-policy.whose-not.unapproved.body":" Those gathered from unapproved extraction projects.","ordinances-reserve.temple-policy.whose.body":"Who You Can Do Ordinances For","ordinances-reserve.terms-of-use.label":"Terms of Use","ordinances-reserve.temple-status.green":"Temple Available","ordinances-reserve.temple-status.blue":"Temple In Progress","ordinances-reserve.temple-status.yellow":"Temple Needs More Information","ordinances-reserve.spouse.label":"Spouse","ordinances-reserve.parents.label":"Parents","ordinances-reserve.unreserve-success":"The selected ordinances were succesfully unreserved.","ordinances-reserve.unreserve-error":"There was an error trying to unreserve your ordinances.","ordinances-reserve.unreserve-ordinances-heading":"Unreserve Ordinances","ordinances-reserve.unreserve-ordinances-with-checkboxes-subheading":"All selected ordinances will be unreserved and made available to others.","ordinances-reserve.unreserve-ordinances-subheading":"These ordinances will be unreserved and made available to others.","ordinances-reserve.unreserve.label":"Unreserve","ordinances-reserve.ordinances.label":"Ordinances","ordinances-reserve.schedule-appointment.label":"Schedule Appointment","ordinances-reserve.people.label":"People","ordinances-reserve.BAPTISM.label":"Baptism","ordinances-reserve.CONFIRMATION.label":"Confirmation","ordinances-reserve.INITIATORY.label":"Initiatory","ordinances-reserve.ENDOWMENT.label":"Endowment","ordinances-reserve.SEALING_TO_SPOUSE.label":"Sealing to Spouse","ordinances-reserve.SEALING_TO_PARENTS.label":"Sealing to Parents","ordinances-reserve.select-ordinances.message":"Select only the ordinances needed for your temple visit.","ordinances-reserve.show-contact-information.label":"Print Profile Name on {cardType, select, for {Family Ordinance Request} other {Family Name Cards}} ","ordinances-reserve.print-request-sub":"Family name cards to be used in the temple will be created on this computer.","ordinances-reserve.card.height.measurement":"3\u215b in. (80 mm)","ordinances-reserve.card.width.measurement":"4\u215e in. (123 mm)","ordinances-reserve.print.heading":"Print","ordinances-reserve.print-card.instructions":"<ul><li>Print on white paper.</li><li>Printer settings:<ul><li>Portrait Layout</li><li>Actual Size</li></ul></li></ul>","ordinances-reserve.prepare.heading":"Prepare","ordinances-reserve.prepare-card.instructions":"<ul><li>Cut cards on dotted line.</li><li>Verify card size:<ul><li>3\u215b in. by 4\u215e in.</li><li>80 mm by 123 mm</li></ul></li><li>Be sure QR Code is on the card.</li></ul>","ordinances-reserve.perform.heading":"Perform","ordinances-reserve.perform-card.instructions":"<ul><li>Please complete ordinances as soon as possible.</li><li>Ordinances not completed by the Expiration Date shown in My Reservations in FamilySearch will be shared to others.</li><li>For more information, see <i>General Handbook</i> section 28, \\"Temple Ordinances for the Deceased.\\"</li></ul>","ordinances-reserve.print-verify":"Was a Family Name Card Created?","ordinances-reserve.print-verify-for":"Family Ordinance Request Created?","ordinances-reserve.print-verify-sub-for":"Did you see the Family Ordinance Request form on your computer screen?","ordinances-reserve.print-verify-no":"<0>If no</0>, the PDF file may be in your browser download list, or on another tab or window, or there may have been an error.","ordinances-reserve.print-verify-sub":"Did you see family name cards on your computer screen?","ordinances-reserve.print-verify-yes-new-card":"<0>If yes</0>, please verify that the cut cards are approximately 3\u215b inches by 4\u215e inches (80 mm by 123 mm).","ordinances-reserve.print-verify-yes-for":"If yes, you may print the form at any time on a printer. On most browsers click <0>File</0>, and then click <1>Print</1>. You may then take the printed form to a temple, where your ordinance cards can be printed.","ordinances-reserve.print-warning":"Warning: You previously printed family name cards for this person. Please destroy the card printed earlier, if no ordinances are recorded on it. If the card printed earlier has completed ordinances stamped by the temple, it is an official temple record and can be used to verify completed ordinances. Cross through boxes of incomplete ordinances on the card printed earlier, and use the card you are now printing to complete all needed ordinances.","ordinances-reserve.print-warning-for":"Warning: A Family Ordinance Request was previously printed for this person. Please destroy the old Family Ordinance Request and any old family name cards that were printed by the temple.","ordinances-reserve-for-request-par":"To print the Family Ordinance Request, use your browser\'s print option. (On most browsers, click <0>File</0>, and then click <1>Print</1>.) Then take the printed request to a temple, where your cards can be printed.","ordinances-reserve.print-no-print-message":"Ordinances Marked Printed","ordinances-reserve.print-no-print-message-sub":"We are sorry that family name cards did not appear on your computer screen. The ordinances have been marked as printed, and you can reprint them later.","ordinances-reserve.print-for-no-print-message":"Ordinance Marked Printed","ordinances-reserve.print-for-no-print-message-sub":"We are sorry the Family Ordinance Request form did not appear on your computer screen. It may be in your browser download list, on another tab or window, or there may have been an error.","ordinances-reserve.print-for-no-print-message-sub2":"Regardless of the reason, the ordinance has been marked as printed and will appear in your printed reservation list, where you can try reprinting again.","ordinances-reserve-not-now.action":"Not now","ordinances-reserve.required.label":"Required","ordinances-reserve.share-individual.max.error":"Must be {max} characters or less","ordinances-reserve.share-temple.error":"An error occurred sharing your ordinances with the temple.","ordinances-reserve.share-individual.success":"You have successfully sent ordinances to {name}. If your invitation is not accepted within 2 weeks, it will expire.","ordinances-reserve.share-individual.error":"An error occurred sharing your ordinances with {name}.","ordinances-reserve.share-individual.header":"Share Family Names with Individual","ordinances-reserve.share-individual.subheader":"Fill in the information below and click Send. If the recipient accepts them, the names will be removed from your reserved list.","ordinances-reserve.share-individual.senderName":"Your Name","ordinances-reserve.share-individual.recipientName":"Recipient","ordinances-reserve.share-individual.recipientName-name":"Recipient\'s Name","ordinances-reserve.share-individual.recipientEmail":"Recipient\'s Email","ordinances-reserve.share-individual.info":"When the recipient accepts family names, they will be removed from your reservation list. This action cannot be undone.","ordinances-reserve.share-individual.action":"Send","ordinances-reserve.valid-email.warning":"Invalid email address","ordinances-reserve.share-with-temple.heading":"Share Ordinances With Temple","ordinances-reserve.share-with-temple.subheading":"Select the ordinances you would like to share with the temple.","ordinances-reserve.unshare-with-temple.header":"Unshare Ordinances With Temple","ordinances-reserve.unshare-with-temple.subheader":"Select the ordinances you would like to unshare with the temple.","ordinances-reserve.share-with-temple.submit.action":"Share with Temple","ordinances-reserve.unshare-with-temple.submit.action":"Unshare with Temple","ordinances-reserve.share-temple.success":"You successfully shared ordinances with the temple.","ordinances-reserve.unshare-temple.success":"Ordinances successfully unshared.","ordinances-reserve.unshare-temple.error":"An error occurred unsharing your temple ordinances.","ordinances-reserve.share-group.success":"You successfully shared ordinances with {group}.","ordinances-reserve.share-group.partial-success":"Only some of these ordinances were able to be shared with {group}.","ordinances-reserve.share-group.error":"An error occurred sharing your ordinances with {group}.","ordinances-reserve.share-group.header":"Share Ordinances With Group","ordinances-reserve.share-group.group.header":"Share Ordinances With {name}","ordinances-reserve.share-group.action":"Share with Group","ordinances-reserve.unshare-group.action":"Unshare with Group","ordinances-reserve.error.unshare-exceeds-limit":"To encourage timely completion of temple work, temple reservation lists have a limit of 300 reservations. Please complete, share with the temple, or unreserve other reservations in your list, and try again. <0>Learn more</0>.","ordinances-reserve.cannot-unshare-ordinances.heading":"Unable to Unshare Ordinances","ordinances-reserve.reserve-for-later.subheading":"Select the ordinances you would like to reserve for later.","ordinances-reserve.reserve-for-later":"Reserve for Later","ordinances-reserve.cannot-reserve-ordinances-for-later.heading":"Unable to Reserve Ordinances for Later","ordinances-reserve.reserve-for-later-partial-success":"Only some of these ordinances were able to be reserved for later.","ordinances-reserve.reserve-for-later-total-success":"These ordinances were successfully reserved for later and can be viewed in My Reservations.","ordinances-reserve.reserve-for-later.error":"Sorry, an error occurred while retrieving the ordinances that you requested. We apologize for the inconvenience.","ordinances-reserve.print-dialog.header":"Print Family Name Cards for the Temple","ordinances-reserve.general.error":"An error occurred. Please try again later.","ordinances-reserve.unshare-with-group-subheader":"Select the ordinances you would like to unshare with a group.","ordinances-reserve.unshare-group-success-message":"These ordinances were successfully unshared and can be viewed in My Reservations.","ordinances-reserve.group-unshare-partial-success":"Only some of these ordinances were able to be unshared.","ordinances-reserve.error.unshare":"Unable to unshare your ordinances.","ordinances-reserve.error-reserve-print.heading":"Unable to Print Ordinances","ordinances-reserve.confidential.label":"Confidential","ordinances-reservation-policy.description":"By requesting these ordinances, you agree you are following the <0>Reservation Policy</0>.","ordinances-reservation.review-data-problems.label":"Review Data Problems","ordinances-reservation.duplicates-and-data-problems.info":"Please resolve duplicates and data problems before requesting ordinances.","ordinances-reserve.status.not-available.label":"Not Available","ordinances-reserve.resend-individual.success":"You successfully resent ordinances to {email}.","ordinances-reserve.resend-individual.error":"An error occurred resending your temple reservations.","ordinances-reserve.resend-individual.copied":"The link was copied to the clipboard.","ordinances-reserve.resend-individual-copy.error":"An error occurred while copying the link to the clipboard.","ordinances-reserve.resend-individual.header":"Resend Temple Ordinance","ordinances-reserve.resend-individual.subheader":"If your friend or family member has not received all of the names that were shared, you may try again.","ordinances-reserve.resend-individual.email":"Option 1 \u2014 Resend the email now to:","ordinances-reserve.resend-individual.action":"Resend","ordinances-reserve.resend-individual.receive-url.label":"Option 2 \u2014 Copy this link for your friends or family members to paste in their browser, which allows them to get all the names you shared.","ordinances-reserve.resend-individual.copy":"Copy Link","person-quality-score-issues.low.action":"Low","person-quality-score-issues.medium.action":"Medium","person-quality-score-issues.high.action":"High","person-quality-score-issues.low-verbose.label":"Low Quality","person-quality-score-issues.medium-verbose.label":"Medium Quality","person-quality-score-issues.high-verbose.label":"High Quality","person-quality-score-issues.low-with-number.label":"Low: {number}","person-quality-score-issues.medium-with-number.label":"Medium: {number}","person-quality-score-issues.high-with-number.label":"High: {number}","person-quality-score-issues.low-description.label":"This data needs improvement. Review the suggestions to better document the person.","person-quality-score-issues.medium-description.label":"This person has some documentation and could be improved if wanted.","person-quality-score-issues.high-description.label":"This person is well documented. Consider spending time documenting other people.","person-quality-score-issues.quality-score.label":"Quality Score:","person-quality-score-issues.completeness.title":"Completeness","person-quality-score-issues.consistency.title":"Consistency","person-quality-score-issues.verifiability.title":"Verifiability","person-quality-score-issues.coherence.title":"Coherence","person-quality-score-issues.completeness.label":"Data Completeness","person-quality-score-issues.consistency.label":"Source Consistency","person-quality-score-issues.verifiability.label":"Source Tagging","person-quality-score-issues.coherence.label":"Conflict-free Data","person-quality-score-issues.no-issues-found":"No quality issues identified.","person-quality-score-issues.issue-improvement-day-not-specified.description":"The {conclusionType, select, BIRTH {birth} CREMATION {cremation} CHRISTENING {christening} DEATH {death} BURIAL {burial} other {}} date is missing a day.","person-quality-score-issues.issue-improvement-day-not-specified-multi.description":"A {conclusionType, select, MARRIAGE {marriage} other {}} date is missing a day.","person-quality-score-issues.issue-improvement-month-not-specified.description":"The {conclusionType, select, BIRTH {birth} CREMATION {cremation} CHRISTENING {christening} DEATH {death} BURIAL {burial} other {}} date is missing a month.","person-quality-score-issues.issue-improvement-month-not-specified-multi.description":"A {conclusionType, select, MARRIAGE {marriage} other {}} date is missing a month.","person-quality-score-issues.issue-improvement-year-not-specified.description":"The {conclusionType, select, BIRTH {birth} CREMATION {cremation} CHRISTENING {christening} DEATH {death} BURIAL {burial} other {}} date is missing a year.","person-quality-score-issues.issue-improvement-year-not-specified-multi.description":"A {conclusionType, select, MARRIAGE {marriage} other {}} date is missing a year.","person-quality-score-issues.issue-improvement-missing-event-date.description":"The {conclusionType, select, BIRTH {birth} CREMATION {cremation} CHRISTENING {christening} DEATH {death} BURIAL {burial} other {}} date is missing.","person-quality-score-issues.issue-improvement-missing-event-date-multi.description":"A {conclusionType, select, MARRIAGE {marriage} RESIDENCE {residence} other {}} date is missing.","person-quality-score-issues.issue-improvement-missing-event.description":"The person is missing a {conclusionType, select, BIRTH {birth} CHRISTENING {christening} BURIAL {burial} CREMATION {cremation} other {}}.","person-quality-score-issues.issue-improvement-missing-event-place.description":"The {conclusionType, select, BIRTH {birth} CREMATION {cremation} CHRISTENING {christening} DEATH {death} BURIAL {burial} other {}} place is missing.","person-quality-score-issues.issue-improvement-missing-event-place-multi.description":"A {conclusionType, select, MARRIAGE {marriage} RESIDENCE {residence} other {}} place is missing.","person-quality-score-issues.issue-improvement-missing-place-jurisdictions.description":"The {conclusionType, select, BIRTH {birth} CREMATION {cremation} CHRISTENING {christening} DEATH {death} BURIAL {burial} other {}} place is missing a city.","person-quality-score-issues.issue-improvement-missing-place-jurisdictions-multi.description":"A {conclusionType, select, MARRIAGE {marriage} RESIDENCE {residence} other {}} place is missing a city.","person-quality-score-issues.issue-improvement-non-standard-place.description":"The {conclusionType, select, BIRTH {birth} CREMATION {cremation} CHRISTENING {christening} DEATH {death} BURIAL {burial} other {}} is missing a standardized location for {originalPlace}.","person-quality-score-issues.issue-improvement-non-standard-place-multi.description":"A {conclusionType, select, MARRIAGE {marriage} RESIDENCE {residence} other {}} is missing a standardized location for {originalPlace}.","person-quality-score-issues.issue-improvement-non-standard-date.description":"The {conclusionType, select, BIRTH {birth} BURIAL {burial} CREMATION {cremation} CHRISTENING {christening} DEATH {death} other {}} is missing a standardized date for {originalDate}.","person-quality-score-issues.issue-improvement-non-standard-date-multi.description":"A {conclusionType, select, MARRIAGE {marriage} RESIDENCE {residence} other {}} is missing a standardized date for {originalDate}.","person-quality-score-issues.issue-improvement-no-given-name-found.description":"The first name is missing.","person-quality-score-issues.issue-improvement-no-surname-found.description":"The last name is missing.","person-quality-score-issues.issue-improvement-no-gender-found.description":"Male or female is not specified.","person-quality-score-issues.issue-improvement-missing-tagged-sources.description":"The {conclusionType, select, BIRTH {birth} CHRISTENING {christening} DEATH {death} BURIAL {burial} CREMATION {cremation} GENDER {sex} NAME {name} other {}} has no tagged sources.","person-quality-score-issues.issue-improvement-missing-tagged-sources-informational.description":"A {conclusionType, select, MARRIAGE {marriage} RESIDENCE {residence} other {}} has no tagged sources.","person-quality-score-issues.issue-improvement-too-few-tagged-sources-old.description":"The {conclusionType, select, BIRTH {birth} CHRISTENING {christening} DEATH {death} BURIAL {burial} CREMATION {cremation} GENDER {sex} NAME {name} other {}} only has {numTags} of {numTagsNeeded} expected tagged sources.","person-quality-score-issues.issue-improvement-too-few-tagged-sources-informational-old.description":"The {conclusionType, select, MARRIAGE {marriage} RESIDENCE {residence} other {}} only has {numTags} of {numTagsNeeded} expected tagged sources.","person-quality-score-issues.issue-improvement-too-few-tagged-sources.description":"The {conclusionType, select, BIRTH {birth} CHRISTENING {christening} DEATH {death} BURIAL {burial} CREMATION {cremation} GENDER {sex} NAME {name} other {}} has fewer than {numTagsNeeded} tagged sources.","person-quality-score-issues.issue-improvement-too-few-tagged-sources-informational.description":"A {conclusionType, select, MARRIAGE {marriage} RESIDENCE {residence} other {}} has fewer than {numTagsNeeded} tagged sources.","person-quality-score-issues.issue-improvement-missing-expected-census-us.description":"This person appears to have lived in the United States in {collectionYear}. If this is true, they would likely have a source in the \\"{collectionName}\\" collection.","person-quality-score-issues.issue-improvement-missing-expected-census-canada.description":"This person appears to have lived in Canada in {collectionYear}. If this is true, they would likely have a source in the \\"{collectionName}\\" collection.","person-quality-score-issues.issue-improvement-missing-expected-census-england.description":"This person appears to have lived in England in {collectionYear}. If this is true, they would likely have a source in the \\"{collectionName}\\" collection.","person-quality-score-issues.issue-improvement-missing-expected-census-wales.description":"This person appears to have lived in Wales in {collectionYear}. If this is true, they would likely have a source in the \\"{collectionName}\\" collection.","person-quality-score-issues.issue-improvement-date-mismatch.description":"This person has a {conclusionType, select, BIRTH {birth} CHRISTENING {christening} DEATH {death} BURIAL {burial} CREMATION {cremation} MARRIAGE {marriage} RESIDENCE {residence} other {}} date of {conclusionOriginalDate}, which does not match the date {sourceOriginalDate}.","person-quality-score-issues.issue-improvement-gender-mismatch.description":"This person\'s sex does not match the information in this source.","person-quality-score-issues.issue-improvement-given-name-mismatch.description":"This person has a first name of {conclusionName}, which does not match the name {sourceName}.","person-quality-score-issues.issue-improvement-surname-mismatch.description":"This person has a last name of {conclusionName}, which does not match the last name {sourceName}.","person-quality-score-issues.issue-improvement-no-sources.description":"This person has no sources.","person-quality-score-issues.issue-improvement-no-indexed-sources.description":"This person has no indexed sources.","person-quality-score-issues.issue-improvement-no-indexed-conclusion-sources.description":"This person\'s {conclusionType, select, BIRTH {birth} CHRISTENING {christening} DEATH {death} BURIAL {burial} GENDER {sex} NAME {name} other {}} is not supported by any indexed sources.","person-quality-score-issues.issue-improvement-no-indexed-conclusion-sources-multi.description":"This person has a {conclusionType, select, MARRIAGE {marriage} RESIDENCE {residence} other {}} that is not supported by any tagged indexed sources.","person-quality-score-issues.issue-improvement-missing-surname.description":"This person is missing a last name. A possible last name is in this source.","person-quality-score-issues.issue-improvement-place-mismatch.description":"This person has a {conclusionType, select, BIRTH {birth} CHRISTENING {christening} DEATH {death} BURIAL {burial} CREMATION {cremation} MARRIAGE {marriage} RESIDENCE {residence} other {}} place of {conclusionOriginalPlace}, which does not match the place {sourceOriginalPlace}.","person-quality-score-issues.issue-child-count.description":"This person has {actualChildCount} children. Most people had {profileChildCount} or fewer.","person-quality-score-issues.issue-delayed-burial.description":"The burial date is {actualDays} days after the death date. Burial usually happened within {profileDays} days of death.","person-quality-score-issues.issue-old-christening.description":"This person is listed as having been christened at age {actualAge}. Christening normally happened by age {profileAge}.","person-quality-score-issues.issue-old-death.description":"This person\'s birth and death dates indicate death at age {actualAge}, which is older than usual.","person-quality-score-issues.issue-old-marriage.description":"This person\'s birth and marriage dates indicate marriage at age {actualAge}, which is older than usual.","person-quality-score-issues.issue-young-marriage.description":"This person\'s birth and marriage dates indicate marriage at age {actualAge}, which is younger than usual.","person-quality-score-issues.issue-parent-died-too-young-for-children.description":"This person\'s parent {youngPersonGivenName} died at age {youngDeathAge}.","person-quality-score-issues.issue-died-too-young-for-children.description":"This person shows as having children, even though they died at age {youngDeathAge}.","person-quality-score-issues.issue-coparent-died-too-young-for-children.description":"This person shows as having children, even though their coparent {youngPersonGivenName} died at age {youngDeathAge}.","person-quality-score-issues.issue-died-too-young-for-couple-relationship.description":"This person shows as being in a couple relationship, even though they died at age {youngDeathAge}.","person-quality-score-issues.issue-partner-died-too-young-for-couple-relationship.description":"This person shows as being in a couple relationship with {youngPersonGivenName}, even though {youngPersonGivenName} died at age {youngDeathAge}.","person-quality-score-issues.issue-born-before-parents-married.description":"This person was born in {childBirthYear}, {yearsBeforeMarriage} years before {marriageYear}, when their parents {parent1GivenName} and {parent2GivenName} were married.","person-quality-score-issues.issue-child-born-before-marriage.description":"{childGivenName} was born in {childBirthYear}, {yearsBeforeMarriage} years before {marriageYear}, when {parent1GivenName} and {parent2GivenName} were married.","person-quality-score-issues.issue-couple-never-had-children-fact-yet-has-children.description":"{parent1GivenName} and {parent2GivenName} have children, but have a fact listed as \\"No Children.\\"","person-quality-score-issues.issue-child-of-childless-couple.description":"This person was born to {parent1GivenName} and {parent2GivenName}, who have a fact listed as \\"No Children.\\"","person-quality-score-issues.issue-no-children-conflict.description":"This person has children but has a fact listed as \\"No Children.\\"","person-quality-score-issues.issue-no-couple-relationships-conflict.description":"This person has one or more couple relationships but has a fact listed as \\"No Couple Relationships.\\"","person-quality-score-issues.issue-date-place-mismatch-unknown-to-year-old.description":"The date of {conclusionType, select, BIRTH {birth} CHRISTENING {christening} DEATH {death} BURIAL {burial} other {}}, {conclusionNormalizedDate}, is in conflict with the standardized place of {placeNormalized}, which has only been called that since {placeNormalizedFromYear}.","person-quality-score-issues.issue-date-place-mismatch-unknown-from-year-old.description":"The date of {conclusionType, select, BIRTH {birth} CHRISTENING {christening} DEATH {death} BURIAL {burial} other {}}, {conclusionNormalizedDate}, is in conflict with the standardized place of {placeNormalized}, which changed its name after {placeNormalizedToYear}.","person-quality-score-issues.issue-date-place-mismatch-unknown-to-year.description":"The standard \\"{placeNormalized}\\" (ID: {placeRepId}) is used for dates from {placeNormalizedFromYear} onward. This conflicts with the {conclusionType, select, BIRTH {birth} CHRISTENING {christening} DEATH {death} BURIAL {burial} other {}} date of {conclusionNormalizedDate}.","person-quality-score-issues.issue-date-place-mismatch-unknown-from-year.description":"The standard \\"{placeNormalized}\\" (ID: {placeRepId}) is used for dates up to {placeNormalizedToYear}. This conflicts with the {conclusionType, select, BIRTH {birth} CHRISTENING {christening} DEATH {death} BURIAL {burial} other {}} date of {conclusionNormalizedDate}.","person-quality-score-issues.issue-stillbirth-conflict.description":"This person is marked as stillborn but lived to age {age}.","person-quality-score-issues.issue-old-birth-as-parent.description":"If {childGivenName} was born {childOriginalBirthDate}, this person would have been {actualAge}, which is normally after child bearing years.","person-quality-score-issues.issue-old-birth-as-child.description":"If this person was born {childOriginalBirthDate}, {parentGivenName} would have been {actualAge}, which is normally after child bearing years.","person-quality-score-issues.issue-young-birth-as-parent.description":"If {childGivenName} was born {childOriginalBirthDate}, this person would have been {actualAge}, which is normally before child bearing years.","person-quality-score-issues.issue-young-birth-as-child.description":"If this person was born {childOriginalBirthDate}, {parentGivenName} would have been {actualAge}, which is normally before child bearing years.","person-quality-score-issues.issue-impossible-event-order-focus-person.description":"The {firstConclusionType, select, BURIAL {burial} CREMATION {cremation} CHRISTENING {christening} DEATH {death} other {}} happened before the {secondConclusionType, select, DEATH {death} CREMATION {cremation} BIRTH {birth} CHRISTENING {christening} other {}}.","person-quality-score-issues.issue-impossible-event-order-focus-person-single-multi.description":"The {firstConclusionType, select, BURIAL {burial} CREMATION {cremation} DEATH {death} other {}} happened before a {secondConclusionType, select, MARRIAGE {marriage} RESIDENCE {residence} other {}}.","person-quality-score-issues.issue-impossible-event-order-focus-person-multi-single.description":"A {firstConclusionType, select, MARRIAGE {marriage} RESIDENCE {residence} other {}} happened before the {secondConclusionType, select, BIRTH {birth} other {}}.","person-quality-score-issues.issue-impossible-event-order-birth-parent-birth.description":"This person\'s birth happened before the birth of their parent, {parentGivenName}.","person-quality-score-issues.issue-impossible-event-order-parent-death-birth.description":"This person\'s parent, {parentGivenName}, died before this person was born.","person-quality-score-issues.issue-impossible-event-order-death-child-birth.description":"This person\'s death happened before the birth of their child, {childGivenName}.","person-quality-score-issues.issue-impossible-event-order-child-birth-birth.description":"This birth of this person\'s child, {childGivenName}, happened before this person was born.","person-quality-score-issues.issue-impossible-event-order-death-parent-birth.description":"This person died before their parent, {parentGivenName}, was born.","person-quality-score-issues.issue-impossible-event-order-death-spouse-birth.description":"This person died before their spouse, {spouseGivenName}, was born.","person-quality-score-issues.issue-impossible-event-order-spouse-death-birth.description":"This person\'s spouse, {spouseGivenName}, died before this person was born.","person-quality-score-issues.issue-impossible-event-order-christening-parent-birth.description":"This person was christened before the birth of their parent, {parentGivenName}.","person-quality-score-issues.issue-date-place-mismatch-old.description":"The date of {conclusionType, select, BIRTH {birth} CHRISTENING {christening} DEATH {death} BURIAL {burial} CREMATION {cremation} other {}}, {conclusionNormalizedDate}, is in conflict with the standardized place {placeNormalized}, which existed from {placeNormalizedFromYear} to {placeNormalizedToYear}.","person-quality-score-issues.issue-date-place-mismatch.description":"The standard \\"{placeNormalized}\\" (ID: {placeRepId}) is used for {placeNormalizedFromYear} to {placeNormalizedToYear}. This conflicts with the {conclusionType, select, BIRTH {birth} CHRISTENING {christening} DEATH {death} BURIAL {burial} other {}} date of {conclusionNormalizedDate}.","person-quality-score-issues.issue-children-born-too-close.description":"This person gave birth to {youngerSiblingGivenName} {ageGapInMonths} months after {olderSiblingGivenName} was born.","person-quality-score-issues.issue-coparents-children-born-too-close.description":"This person\'s coparent {motherGivenName} gave birth to {youngerSiblingGivenName} {ageGapInMonths} months after {olderSiblingGivenName} was born.","person-quality-score-issues.issue-alternating-locations.description":"This person had life events in {returnedToPlaceName}, then in {movedToPlaceName}, and then in {returnedToPlaceName} again.\\nThese places are {actualDistanceMiles} miles away, making this unlikely. This may indicate a bad merge.","person-quality-score-issues.issue-father-count.description":"This person has {count} biological fathers.","person-quality-score-issues.issue-mother-count.description":"This person has {count} biological mothers.","person-quality-score-issues.learn-more.description":"<0>Learn more</0> about the Quality Score.","person-service.unknown-pid":"UNKNOWN","person-service.unknown-name":"[Unknown Name]","person.couple.spouse-position.spouse1-label":"Spouse 1","person.couple.spouse-position.spouse2-label":"Spouse 2","person.person-overlay.collaborate-link-with-count":"Collaborate ({count})","person.person-overlay.deleted-notice":"Person Deleted","person.person-overlay.link-to-person-page-for-this-person-action":"Person","person.person-overlay.link-to-tree-for-this-person-action":"Tree","person.person-overlay.memories-link-with-count":"Memories ({count})","person.person-overlay.not-found-message":"This person does not exist, has been removed, or is restricted in FamilySearch.","person.person-overlay.quick-view-label":"Person Quick View: {name}","person.person-overlay.sources-link-with-count":"Sources ({count})","person.person-overlay.temple-ordinances.temple-information-unavailable":"Unavailable","person.person-overlay.vital-block.birth-heading":"Birth","person.person-overlay.vital-block.burial-heading":"Burial","person.person-overlay.vital-block.christening-heading":"Christening","person.person-overlay.vital-block.death-heading":"Death","person.person-overlay.vital-block.death-information-deceased":"Deceased","person.person-overlay.vital-block.death-information-living":"Living","person.person-overlay.vital-block.event-hover-text":"{eventTitle}\\nStandard Date: {standardizedDate}\\nStandard Place: {standardizedPlace}","person.person-overlay.vital-block.event-information-unavailable":"Unavailable","person.person-overlay.vital-block.living-event-hover-text":"Death\\nLiving","person.person-overlay.vital-block.no-standard-date-selected":"No standard selected.","person.person-overlay.vital-block.no-standard-place-selected":"No standard selected.","person.person-sheet.add-alternate-name":"Add Alternate Name","person.person-sheet.alternate-names":"Alternate Names","person.person-sheet.children":"Children","person.person-sheet.events":"Events","person.person-sheet.facts":"Facts","person.person-sheet.parents":"Parents","person.person-sheet.siblings":"Siblings","person.person-sheet.spouse":"Spouse","person.person-sheet.vitals":"Vitals","person.person-sheet.more-info":"More information about {name}.","person.sex.female":"Female","person.sex.male":"Male","person.sex.unknown":"Unknown","person.associated-user.heading":"Associated Group Member:","person.associated-user.body":"This person is associated with the following group member: {name}","person.associated-user.label":"This person is associated with a group member.","person.invite.label":"Invite","person.service-unavailable.error":"We were unable to show you this person.","picker-dialog.selector.heading.facebook":"Select photos to import from Facebook","picker-dialog.selector.heading.gallery":"Select memories to import from your Gallery","picker-dialog.selector.heading.google":"Select photos to import from Google Photos","picker-dialog.selector.heading.instagram":"Select photos to import from Instagram","picker-dialog.selector.nav.facebook.albums.header":"Facebook Albums","picker-dialog.selector.nav.facebook.albums.your-photos":"Your Photos","picker-dialog.selector.nav.facebook.albums.photos-of-you":"Photos of You","picker-dialog.selector.empty.heading":"Choose another album to find memories to import.","picker-dialog.selector.empty.message":"You can add memories to this album in the gallery.","picker-dialog.selector.nav.gallery.bookmarks":"Bookmarks","picker-dialog.selector.nav.gallery.albums":"Albums","picker-dialog.selector.nav.gallery.my-memories":"My Memories","picker-dialog.selector.nav.gallery.my-archive":"My Archive","picker-dialog.selector.nav.gallery.bookmarked-memories":"Memories","picker-dialog.selector.gallery.arrange.newest":"Newest Added","picker-dialog.selector.gallery.arrange.title-a-z":"Title A-Z","picker-dialog.selector.gallery.arrange.no-title":"No Title","picker-dialog.selector.gallery.arrange.not-tagged":"Not Tagged","picker-dialog.selector.nav.google.albums.header":"Google Photos Albums","picker-dialog.selector.nav.google.all-photos":"All Photos","picker-dialog.arrange.label":"Arrange","picker-dialog.search.label":"Search","picker-dialog.empty.image.alt":"No content available","picker-dialog.count.of.total.label":"{number} of {total} Selected","picker-dialog.count-selected.label":"{number} Selected","picker-dialog.import.action":"Import","profile-search.form.country-input":"Country or Location","profile-search.form.state-input":"State or Province","profile-search.form.name-input":"Name or Contact ID","profile-search.no-results-found":"No Results Found","profile-search.error":"Sorry an error occured","profile-search.advancd-search.cant-find-person":"Can\'t Find Person?","profile-search.header.advanced-search":"Advanced Search","profile-search.symbols.validation":"Cannot contain symbols.","profile-search.max-string-length.validation":"Cannot be more than {max} characters","profile-search.notice-info.see-person-details":"See Person Details","profile-search.group-global-contacts":"Global Contacts","profile-search.invite-others.header":"Share this link with friends and family","profile-search.invite-others.message":"Connect with family and friends on FamilySearch","profile-search.invite-others.description":"They\'ll be able to connect with you easily","profile-search.opt-in.button":"Yes, include me in directory search results as shown.","profile-search-opt-out.button":"No, I don\u2019t want to appear in directory search results.","profile-search.opt-in-success.message":"We\'ll include you in directory search results.","profile-search.profile-update.button":"Update Profile","profile-search.opt-out-success.message":"We\'ll leave you out of directory search results.","profile-search.opt-in.error-message":"Your selection could not be saved. Please try again.","profile-search.opt-in.heading":"Connect with family and friends on FamilySearch","profile-search.opt-in.directory-preference":"Choose your Directory Preference","profile-search.opt-in.directory-preference.subheading":"This can be changed later in Settings.","profile-search.current-profile.label":"How others see me in FamilySearch","profile-search.location-set-to-private":"Location is set to private","profile-search.location-not-added":"Location not added","profile-search.invite-others.button":"Invite Others","profile-search.opt-in-suggestion":"Currently your family and friends may not be able to contact you on FamilySearch. <OptInButton> Click to fix this. </OptInButton>","profile-search.opt-in-promotion":"Family, friends, and others on FamilySearch will be able to find and collaborate with me.","profile-search.contact-group.contacts":"Contacts","profile-search.contact-group.fh-network":"Family History Consultants","profile-search.contact-group.ward-directory":"Ward Members","profile-search.contact-group.stake-directory":"Stake Members","profile-search.contact-group.global-directory":"Global Directory","profile-search.contact-group.helpee":"Helpee","profile-search.contact-group.helper":"Helper","profile-search.contact-group.help-contacts":"Helping","profile-search.contact-group.stake-consultant":"Stake Consultant","profile-search.contact-group.ward-consultant":"Ward Consultant","profile-search.contact-group.area-consultant":"Area Consultant","profile-search.contact-group.friend":"Friend","profile-search.contact-group.group-member":"Group Member","profile-search.header.no-cis-id":"No FamilySearch Account","profile-search.invite-dialog-content-1":"This person is a member of your ward or stake but does not yet have a FamilySearch account. ","profile-search.invite-dialog-content-2":"An account is needed to send and receive messages on FamilySearch. ","profile-search.invite-dialog-content-3":"Would you like to invite this person to sign up?","profile-search.invite-dialog-footer-invite":"Invite","profile-search.invite-dialog-footer-copy-link":"Share this link to invite someone to create a FamilySearch account.","provisional-place.303-invalid-characters-in-name.warning":"The name contains an invalid character. Display names can only contain letters.","provisional-place.403-parent-place-invalid.warning":"The parent place is invalid or unknown. Please verify your entries and try again.","provisional-place.560-place-duplicate.warning":"This place already exists.","provisional-place.572-invalid-place-name.warning":"Invalid character found in place name. Please verify your entries and try again.","provisional-place.573-years-too-close.warning":"\\"To\\" year must be at least 5 years later than \\"from\\" year.","provisional-place.574-parent-is-provisional.warning":"The parent place must be Accepted, or Certified.","provisional-place.575-576-place-type-same-as-parent.warning":"The place type cannot be the same type as its parent place.","provisional-place.577-invalid-place-type.warning":"Invalid place type.","provisional-place.578-bad-parent-type.warning":"Invalid parent place type. Please choose a different parent place, and try again.","provisional-place.579-place-name-in-hierarchy.warning":"The requested place name cannot be the same as a parent at any level.","provisional-place.584-lat-long-cant-be-zero.warning":"The latitude and longitude cannot both be zero.","provisional-place.585-longitude-out-of-bounds.warning":"The longitude is out of bounds. Please verify your entries and try again.","provisional-place.586-latitude-out-of-bounds.warning":"The latitude is out of bounds. Please verify your entries and try again.","provisional-place.588-toyear-out-of-bounds.warning":"The \\"to\\" year is out of bounds. Please verify your entries and try again.","provisional-place.589-fromyear-out-of-bounds.warning":"The \\"from\\" year is out of bounds. Please verify your entries and try again.","provisional-place.594-missing-parent-place-not-found.warning":"The parent place was not found.","provisional-place.596-locale-not-provided.warning":"Invalid language or BCP-47 code. Please verify your entries and try again.","provisional-place.598-parent-jurisdiction-not-provided.warning":"The parent place was not provided. Please verify your entries and try again.","provisional-place.additional-info.label":"Additional Information","provisional-place.additional-info.place-holder":"Enter helpful details, citations, and more","provisional-place.create-new-place.label":"Create Place","provisional-place.enter-language.place-holder":"Enter a language","provisional-place.enter-name.place-holder":"Enter a name","provisional-place.enter-parent1-parent2.label":"Enter the {parentPlace1} or {parentPlace2}","provisional-place.enter-valid-lat-lon.warning":"Please enter a valid lat/long.","provisional-place.general.error":"An error occurred. Please try again later.","provisional-place.help.label":"Help","provisional-place.http-400-422-bad-params.error":"We\'re sorry. An unexpected error occurred. Please verify your entries and try again later.","provisional-place.http-404-bad-params.error":"We\'re sorry. The requested entry was not found. You may need to refresh your page or try again later.","provisional-place.http-423-locked-resource.error":"One or more fields cannot be modified because the place is Certified.","provisional-place.http-500-place-service.error":"We\'re sorry. An unexpected error occurred. Please try again later.","provisional-place.http-503-service-busy.error":"We\'re sorry. The FamilySearch Place Service is too busy to process your request right now. Please try again later.","provisional-place.input-blank.warning":"Input text cannot only contain blank spaces.","provisional-place.invalid-language.warning":"Invalid language or BCP-47 code.","provisional-place.language-of-place.label":"Language of Place Name","provisional-place.language-required.warning":"Language is a required field.","provisional-place.location.label":"Location","provisional-place.location.place-holder":"40.7608, -111.8903","provisional-place.narrow-search.heading":"Enter a Place Name","provisional-place.narrow-search.warning":"FamilySearch will look for possible duplicates before submitting a new place to the standards database.","provisional-place.new-place-form.heading":"Add Details","provisional-place.new-provisional-place.text":"FamilySearch will validate these details within 24 hours. If accepted, your new place will be added to the list of standard places.","provisional-place.no-matches-found.warning":"No Matches Found","provisional-place.parent-place-required.warning":"Parent place is required.","provisional-place.parent-place-type-not-supported.tooltip":"FamilySearch restricts editing and creation of places directly within places of type \\"{placeType}\\". Please choose a parent place of a lower level type and try again.","provisional-place.parent-place-type-not-supported.warning":"Creating provisional places within a parent place of type \\"{placeType}\\" requires additional permission.","provisional-place.parent-place.label":"Parent Place","provisional-place.parent-place.tooltip":"A parent place is the next largest geographical area that the town of city belongs to. For example, a township might be the parent place to a small village. A county or even state might be the parent place to a large city.","provisional-place.parent1-parent2.label":"{parentPlace1} or {parentPlace2}","provisional-place.place-name-required.warning":"Place name is required.","provisional-place.place-name.label":"Place Name","provisional-place.place-type-required.warning":"Place type is required.","provisional-place.place-type.label":"Place Type","provisional-place.possible-matches.warning":"Possible Matches","provisional-place.search-results.heading":"Search Results","provisional-place.select-from-map.text":"Select \\"{placeName}\\" From the Map","provisional-place.select-place-type.heading":"Select a Category","provisional-place.select-place-type.text":"The following place types are a set of geographical areas and structures that may be submitted. Larger parent places cannot be added, such as county, country, province, region, or state.","provisional-place.successful-submit.text":"Your request to create \\"{placeName}, {parentPlaceName}\\" has been successfully submitted.","provisional-place.suggest-place.heading":"Suggest a New Place","provisional-place.web-address.label":"Source Web Address (URL)","provisional-place.web-address.place-holder":"Enter address","provisional-place.what-is-parent-place.label":"What is a parent place?","provisional-place.request-submitted.heading":"Place Request Submitted","provisional-place.review-place.text":"The approval process may take up to 24 hours. In the meantime, we\'ve created a temporary version of the place that you can use now.","provisional-place.hide-message.text":"Don\'t show this message again","provisional-place.confirm-review.text":"Got It","record-details.attach-button":"Attach to Family Tree","record-details.save.citationLabel":"Citing this Record","record-details.household":"Household","record-details.role":"Role","Record-details.sex":"Sex","record-details.age":"Age","record-details.birthplace":"Birthplace","record-details.successMessage":"Copied Record to Clipboard","search.record.copyRecordDetailsError":"Something went wrong. Try again later.","record-details.copyFullRecord":"Copy Full Record","search.record.notAMatchSuccess":"We have received your feedback. Thank you.","search.record.notAMatchError":"Something went wrong. Try again later.","search.record.dismissHint":"Dismiss Match","search.record.dismissMatchHead":"Dismiss Family Tree Match","search.record.dismiss.record":"Record","search.record.dismiss.person":"Person","search.record.dismissBlurb":"Dismissing this possible match will cause the suggestion to be removed for all users.","search.record.undismissBlurb":"Show this record hint in the list of possible matches for others to review and possibly attach.","search.record.dismissWhy":"Why should this suggestion be dismissed?","search.record.dismiss.namesNoMatch":"Names do not match.","search.record.dismiss.placesNoMatch":"Places do not match.","search.record.dismiss.datesNoMatch":"Dates do not match.","search.record.dismiss.relativesNoMatch":"Relatives do not match.","search.record.dismiss.cannotTell":"I can\'t tell if it is a match.","search.record.dismiss.duplicate":"This source is a duplicate.","search.record.dismiss.otherReason":"Other Reason","search.record.dismiss.otherPlaceholder":"Example: \\"Name is too common.\\"","search.record.dismissMatch.submit":"Dismiss","search.record.closeDocumentInformation":"Collapse Document Information","search.record.openDocumentInformation":"Expand Document Information","search.record.documentInformation":"Document Information","search.record.collectionInfo":"Collection Information","search.record.aboutCollection":"About This Collection","search.record.aboutCollectionDesc":"Learn more about this collection through the FamilySearch Wiki.","search.record.citeThisRecord":"Cite This Record","search.record.copyCitation":"Copy Citation","error.imageAlt":"Something Went Wrong","record-details.unauthorized.header":"We\'re unable to show this record.","record-details.recordRemoved.header":"This Record has been removed.","error.header":"Something Went Wrong","record-details.unauthorized.body":"This record can only be displayed on certain accounts. FamilySearch must honor the agreements we have with our partners, record owners, and internal policies.","record-details.recordRemoved.body":"Unfortunately, the record that you requested is no longer available. If you arrived here from a bookmark, please delete your bookmark.","error.body":"Unfortunately, something went wrong and we are unable to display the record. Try refreshing the page, or come back later.","record-details.error.goBack":"Go Back","record-details.error.returnToHomePage":"FamilySearch Home Page","record-details.not-found.option-reload":"Reload the page","record-details.retiredBanner.text":"This record was a duplicate and has been retired. We recommend using the most current copy.","record-details.retiredBanner.confirm":"View Current Record","record-details.alertBanner.notice":"Important Notice","search.record.closeEditData":"Collapse Edit History","search.record.openEditData":"Expand Edit History","search.record.viewMap":"View Map","search.record.attachHead":"Family Tree","record-details.signInMessage":"Sign in or create a free account to discover even more information in our shared Family Tree.","search.record.attachedTo":"Attached in Family Tree to","search.record.possibleTreeMatches":"Possible Family Tree Match","search.record.attachHint":"Attach to Family Tree","search.record.mentionedIn":"Mentioned in the record of {principalName}","hr.record-details.citation":"Citing This Record","hr.record-details.record-fields":"Record Fields","record-details.relationships.brother":"Brother","record-details.relationships.extendedFamily":"{name}\'s Extended Family","record-details.relationships.noRelationship":"No Relationship","record-details.relationships.others":"Other People on This Record","record-details.relationships.parentsAndSiblings":"{name}\'s Parents and Siblings","record-details.relationships.sibling":"Sibling","record-details.relationships.sister":"Sister","record-details.relationships.spousesAndChildren":"{name}\'s Spouses and Children","record-details.expander.collapse":"Collapse This Section","record-details.expander.expand":"Expand This Section","record-details-expander-close":"Close All","record-details-expander-open":"Open All","record-details.header.collectionDescription":"{recordType} \u2022 {collectionName}","record-details.header.noRelationshipToPrincipal":"Mentioned in the Record of <0>{principalName}</0>","record-details.header.print.relationshipToPrincipal":"Mentioned in the Record of {principalName} ({name}\'s {relationship})","record-details.header.relationshipToPrincipal":"Mentioned in the Record of <0>{principalName}</0> ({name}\'s {relationship})","record.header.info":"Record","record.header.hints":"Hints","record.header.image":"Image","image.unavailable":"No Image Available","image.restricted":"Image Unavailable","protected.image.button":"View Image Visibility","image.viewOriginal":"View Original Document","image.showVisibilityOverlay.heading":"Image Visibility","image.showVisibilityOverlay.subheading":"This image is visible because you are:","image.digital.noContent":"No content","born.digital.no.title":"[No Title]","image.browseImageOverlay.heading":"Viewing the Image on Film","image.browseImageOverlay.description":"This record may have come from this image, but it could be slightly off. You may need to look through several surrounding images if it does not appear on this image.","image.browseImageOverlay.viewImage":"View Image","image.restricted.check":"Check Image Availability","image.restriction.details":"Image Restriction Details","image.restricted.available.header":"Image Available","image.restricted.browseFilm":"The information on this record came from a group of images. To view the image of this record, you will need to look through several images. ","image.browseFilmOverlay.browseFilm":"Browse the Film","image.restricted.remedy":"To view these images do one of the following:","image.restriction.find.affiliate":"Find a Location Near Me","image.third.party.tooltip.label":"Available on {provider}","image.third.party.tooltip.description":"The image is available through {provider}. Additional information may also be available.","image.third.party.button":"View on {provider}","restricted.image.login":"Log in.","restricted.image.fsc":"Access the site at a FamilySearch center.","restricted.image.FSAffiliate":"Access the site at a FamilySearch affiliate library.","restricted.image.logOrDisc":"Log in or go to a discovery center.","restricted.image.lds":"You may be able to view this image by visiting one of our partner\'s sites or the legal record custodian (fees may apply).","visibility.image.login":"Signed in to your FamilySearch account","visibility.image.fsc":"In a FamilySearch center","visibility.image.FSAffiliate":"In a FamilySearch affiliate library","visibility.image.logOrDisc":"Logged in or in a discovery center","visibility.image.lds":"Signed in to your FamilySearch account","record-details.viewRecordButton":"View Record","record-details.saveToSourceBox":"Save to Source Box","record-details.printFullRecord":"Print Full Record","record-details.printRecord":"Print Record","record-details.makeNewEdit":"Make a New Edit","record-details.hideAllRecordEdits":"Hide All Record Edits","record-details.showAllRecordEdits":"Show All Record Edits","record-details.share.subject":"FamilySearch Record","record-details.share.copyDescription":"Share this record with your family and friends by clicking the button below; then paste the link into your favorite messaging service or social media account.","record-details.edit-dialog.title":"Edit Record","record-details.edit-dialog.description":"Select the field you would like to change:","search.roboKey.errorType":"Please select an error type.","search.roboKey.errorDescription":"Please enter an error description.","search.record.roboKeyFeedbackSuccess":"We have received your feedback. Thank you.","search.record.roboKeyFeedbackError":"Something went wrong. Try again later.","search.record.error.PeopleAndNames":"People and Names","search.record.error.Places":"Places","search.record.error.Dates":"Dates","search.record.error.Sex":"Sex","search.record.error.PeopleRelationships":"People Relationships","search.record.error.Other":"Other","search.record.reportRoboKeyError":"Report an Error","search.record.reportRoboKeyErrorBlurb":"Please help us update the record with better information.","search.record.roboKeyErrorType":"Type of Error","search.record.roboKeyErrorPlaceholder":"Please copy the incorrect information here.","search.record.sendFeedback":"Send","search.record.roboKeyFeedback":"This record was indexed by a computer. If you find an error, <0>click here to report it.</0>","newFolder":"Create New Folder","search.record.sourceBoxFolderInvalid":"Please enter a unique folder name.","search.record.sourceBoxError":"Something went wrong. Try again later.","search.record.newFolderName":"New Folder Name","search.record.sourceBoxHome":"Home","search.record.sourceBoxFolderVal":"Please select a folder.","search.record.sourceBoxTitleVal":"Please enter a title.","search.record.sourceBoxSuccess":"Record saved to source box.","search.record.saveToSourceBox":"Save to Source Box","search.record.sourceBoxBlurb":"Save this source to your account, where it can be accessed by clicking your name.","search.record.sourceBoxFolder":"Select Folder","search.record.sourceBoxTitle":"Source Title","record-details.createAccount":"Create Account","search.record.similarRecordTitle":"Preview Similar Record","search.record.previewRecord":"Record Information","search.record.attached-to":"Attached To:","search.records.similarRecords":"Similar Records","search.records.noSimilar":"No similar records were found.","record-details.indexer.message-sent":"Message Sent!","record-details.indexer":"This information is available because a volunteer indexed it for you.","record-details.indexer.thank-you-button":"Say Thank You","record-details.indexer.message-header":"Sending a Thank You for indexing","record-details.indexer.explanation":"This will be sent directly to any persons that spent their time to index this record for you. This is likely the reason you were able to find this information today.","record-details.indexer.subject-label":"Subject","record-details.indexer.message-subject":"Thank you for indexing a record I found!","record-details.indexer.message-label":"Message","record-details.indexer.message-body":"I found a record today that helped in my family history research. Thank you for indexing, because it made a difference for me and my family. \\n \\n Sincerely, \\n {name}","record-details.indexer.send-message":"Send Message","search.record.attachTooltipLabel":"View in Source Linker","search.record.attachTooltipDesc":"Compare this record with the Family Tree person. You can attach and detach the records to Family Tree here.","image.third.party.link.overlay.stay":"Stay","image.third.party.link.overlay.heading":"Leaving FamilySearch","image.third.party.link.overlay.description.info":"This image is only available on {provider}.","image.third.party.link.overlay.description.question":"Are you sure you want to leave FamilySearch?","image.third.party.link.overlay.leaveSite":"Go to {provider}","record.header.prevRecord":"Go to previous record","record.header.nextRecord":"Go to next record","record-details.cannotEditRecord":"Sorry, this record cannot be edited.","record-details.needSignIn":"Please sign in before editing this record.","record-details.needSpecialAuth":"Sorry, you need special authorization to edit this record.","record-details.editUnavailable":"Edit Unavailable","record-details.hinting.attach":"Review & Attach","record-details.hinting.dismissHint":"Not a Match","record-details.hinting.undismissHint":"May Be a Match","record-details.source-record-unavailable":"We are unable to display the record for this source. Please try again later.","record.restricted.tooltipLabel":"Record access is restricted","record.restricted.tooltipDescription":"This record is not generally available.","record-details.discovery-button.text":"See Discovery Page","record-details.printSettings":"Print Settings","record-details.personaFields.caption":"{name} person details","record-details.selectFieldsPrint":"Select the fields you would like to print:","record-details.record-connect-card.action":"Yes, we\'re related","record-details.record-connect-card.body":"Connecting yourself to {name} in Family Tree may lead to more discoveries.","record-details.record-connect-card-b.body":"{gender, select, male { If he is a close relative, we can help you add him and grow your family tree.} female {If she is a close relative, we can help you add her and grow your family tree.} other {If they are a close relative, we can help you add them and grow your family tree.}} As you add people, we\u2019ll search for more family details.","record-details.record-connect-to-tree-card.body":"Connecting {name} to your ancestor in the tree may lead to more discoveries.","record-details.record-connect-to-tree-card-b.body":"{gender, select, male { If he is a close relative, we can help you add him and grow your family tree.} female {If she is a close relative, we can help you add her and grow your family tree.} other {If they are a close relative, we can help you add them and grow your family tree.}} As you add people, we\u2019ll search for more family details.","record-details.record-connect-card.heading":"Is {name} your relative?","record-details.record-connect-card-b.heading":"Are you related to {name}?","record-details.record-connect-overlay.action":"We\'re not related","search.record.weakHint":"Weaker Hint","search.record.weakHintToolTip":"This record is a weaker match and may not be about your ancestor. To remove these types of hints, turn off expanded hints in your account settings","search.record.roboKeyEditable":"This record was indexed by a computer. Use the Edit button above to make corrections.","record-details.thumbnail.alt-text":"Thumbnail","search.record.dismissTreeMatch":"Dismiss Tree Match","search.record.attachToTreeHead":"Tree","search.record.attachedInTreeTo":"Attached in Tree to","search.record.possibleTreeMatch":"Possible Tree Match","search.record.attachHintToTree":"Attach to Tree","search.record.attachToTreeTooltipDesc":"View in Source Linker and compare everyone on this record to your ancestors in the tree. If the information matches, you can attach the record to their profiles.","search.record.matchAttachError":"Unable to show if this record is attached to a person in the tree.","search.record.otherMatch":"Other Possible Match","born.digital.publicationDate":"Date of Publication: {cleanDate}","record-discovery.add-to-family-tree.action":"Add {name}","record-discovery.add-to-family-tree.content":"If you add {name} to the Family Tree, you may be able to discover photos, stories, or historical documents about {gender, select, male {him} female {her} other {them}} and other family members.","record-discovery.add-to-family-tree.heading":"Add {name} to make more discoveries","record-discovery.add-to-family-tree.optionA.action":"Add {gender, select, male {him} female {her} other {them}} to my Tree","record-discovery.add-to-family-tree.optionA.content":"Adding {gender, select, male {him} female {her} other {them}} to your family tree may lead to more discoveries.","record-discovery.add-to-family-tree.optionA.heading":"Add {name} to your tree?","record-discovery.add-to-family-tree.optionB.action":"Yes, we\'re related","record-discovery.add-to-family-tree.optionB.content":"Connecting youself to {name} in Family Tree may lead to more discoveries.","record-discovery.add-to-family-tree.optionB.heading":"Is {name} your relative?","record-discovery.age.full.all-about-eve.image-caption":"Best Film","record-discovery.age.full.cinderella.image-caption":"Top Grossing Film","record-discovery.age.full.first-class-stamp.image-caption":"First-Class Stamp","record-discovery.age.full.gallon-of-gas.image-caption":"1 Gallon of Gas","record-discovery.age.full.movie-ticket.image-caption":"Movie Ticket","record-discovery.age.full.tennessee-waltz.image-caption":"Popular Song","record-discovery.attached-to-tree.title":"Attached in Family Tree to","record-discovery.attached-to-tree.viewInSourceLinker":"View in Source Linker","record-discovery.authentication-required.create-account.action":"Create Account","record-discovery.authentication-required.in-order-to-add-to-tree":"In order to add {name} to the tree you will need to sign in or create an account. Don\u2019t worry it\u2019s 100% free.","record-discovery.authentication-required.in-order-to-save":"In order to save {givenName}\u2019s page you will need to sign in or create an account. Don\u2019t worry it\u2019s 100% free.","record-discovery.authentication-required.sign-in.action":"Sign In","record-discovery.authentication-required.title":"Get a FamilySearch Account","record-discovery.born":"Born {birthYear}","record-discovery.find-someone-else.first-name":"First Name","record-discovery.find-someone-else.heading":"Find someone else in the 1950 Census","record-discovery.find-someone-else.last-name":"Last Name","record-discovery.find-someone-else.search.action":"Search","record-discovery.info-sheet.nextRecord":"Go to next record.","record-discovery.info-sheet.prevRecord":"Go to previous record.","record-discovery.info-sheet.title":"Discovery Page","record-discovery.info-sheet.view-full-page":"View Full Page","record-discovery.learn-more.heading":"Learn more about {name} in the Family Tree","record-discovery.learn-more.other-details":"{gender, select, male {There may be other details about him for you to explore.} female {There may be other details about her for you to explore.}  other {There may be other details about them for you to explore.}}","record-discovery.learn-more.record-attached":"The 1950 Census record has been attached. {gender, select, male {It provides evidence that he lived in that place and time.} female {It provides evidence that she lived in that place and time.} other {It provides evidence that they lived in that place and time.}}","record-discovery.learn-more.what-is-family-tree":"It\u2019s a community family tree project. People from all over the world have been adding their ancestors to it for many years.","record-discovery.lived-with-husband.details":"{gender, select, male {From the census we can see that in 1950 {name} was living with his husband, {husbandName}.} female {From the census we can see that in 1950 {name} was living with her husband, {spouseName}.} other {From the census we can see that in 1950 {name} was living with their husband, {husbandName}.}}","record-discovery.lived-with-parents.details":"{gender, select, male {From the census we can see that in 1950 {name} was living with his parents, {parentName1} and {parentName2}.} female {From the census we can see that in 1950 {name} was living with her parents, {parentName1} and {parentName2}.} other {From the census we can see that in 1950 {name} was living with their parents, {parentName1} and {parentName2}.}}","record-discovery.lived-with-wife.details":"{gender, select, male {From the census we can see that in 1950 {name} was living with his wife, {wifeName}.} female {From the census we can see that in 1950 {name} was living with her wife, {wifeName}.} other {From the census we can see that in 1950 {name} was living with their wife, {wifeName}.}}","record-discovery.lived-with.aunt-or-uncle.nephew-and-niece":"{gender, select, male {From the census, we can see that in {year} {name} was living with his nephew and niece, {nephew} and {niece}.} female {From the census, we can see that in {year} {name} was living with her nephew and niece, {nephew} and {niece}.} other {From the census, we can see that in {year} {name} was living with their nephew and niece, {nephew} and {niece}.}}","record-discovery.lived-with.aunt-or-uncle.nephew":"{gender, select, male {From the census, we can see that in {year} {name} was living with his nephew, {nephew}.} female {From the census, we can see that in {year} {name} was living with her nephew, {nephew}.} other {From the census, we can see that in {year} {name} was living with their nephew, {nephew}.}}","record-discovery.lived-with.aunt-or-uncle.nephews":"{gender, select, male {From the census, we can see that in {year} {name} was living with his nephews, {nephew1} and {nephew2}.} female {From the census, we can see that in {year} {name} was living with her nephews, {nephew1} and {nephew2}.} other {From the census, we can see that in {year} {name} was living with their nephews, {nephew1} and {nephew2}.}}","record-discovery.lived-with.aunt-or-uncle.niece-and-nephew":"{gender, select, male {From the census, we can see that in {year} {name} was living with his niece and nephew, {niece} and {nephew}.} female {From the census, we can see that in {year} {name} was living with her niece and nephew, {niece} and {nephew}.} other {From the census, we can see that in {year} {name} was living with their niece and nephew, {niece} and {nephew}.}}","record-discovery.lived-with.aunt-or-uncle.niece":"{gender, select, male {From the census, we can see that in {year} {name} was living with his niece, {niece}.} female {From the census, we can see that in {year} {name} was living with her niece, {niece}.} other {From the census, we can see that in {year} {name} was living with their niece, {niece}.}}","record-discovery.lived-with.aunt-or-uncle.nieces":"{gender, select, male {From the census, we can see that in {year} {name} was living with his nieces, {niece1} and {niece2}.} female {From the census, we can see that in {year} {name} was living with her nieces, {niece1} and {niece2}.} other {From the census, we can see that in {year} {name} was living with their nieces, {niece1} and {niece2}.}}","record-discovery.lived-with.aunt-or-uncle.step-nephew-and-niece":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-nephew and step-niece, {nephew} and {niece}.} female {From the census, we can see that in {year} {name} was living with her step-nephew and step-niece, {nephew} and {niece}.} other {From the census, we can see that in {year} {name} was living with their step-nephew and step-niece, {nephew} and {niece}.}}","record-discovery.lived-with.aunt-or-uncle.step-nephew":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-nephew, {nephew}.} female {From the census, we can see that in {year} {name} was living with her step-nephew, {nephew}.} other {From the census, we can see that in {year} {name} was living with their step-nephew, {nephew}.}}","record-discovery.lived-with.aunt-or-uncle.step-niece-and-nephew":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-niece and step-nephew, {niece} and {nephew}.} female {From the census, we can see that in {year} {name} was living with her step-niece and step-nephew, {niece} and {nephew}.} other {From the census, we can see that in {year} {name} was living with their step-niece and step-nephew, {niece} and {nephew}.}}","record-discovery.lived-with.aunt-or-uncle.step-niece":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-niece, {niece}.} female {From the census, we can see that in {year} {name} was living with her step-niece, {niece}.} other {From the census, we can see that in {year} {name} was living with their step-niece, {niece}.}}","record-discovery.lived-with.child.father-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his father-in-law, {father}.} female {From the census, we can see that in {year} {name} was living with her father-in-law, {father}.} other {From the census, we can see that in {year} {name} was living with their father-in-law, {father}.}}","record-discovery.lived-with.child.father":"{gender, select, male {From the census, we can see that in {year} {name} was living with his father, {father}.} female {From the census, we can see that in {year} {name} was living with her father, {father}.} other {From the census, we can see that in {year} {name} was living with their father, {father}.}}","record-discovery.lived-with.child.mother-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his mother-in-law, {mother}.} female {From the census, we can see that in {year} {name} was living with her mother-in-law, {mother}.} other {From the census, we can see that in {year} {name} was living with their mother-in-law, {mother}.}}","record-discovery.lived-with.child.mother":"{gender, select, male {From the census, we can see that in {year} {name} was living with his mother, {mother}.} female {From the census, we can see that in {year} {name} was living with her mother, {mother}.} other {From the census, we can see that in {year} {name} was living with their mother, {mother}.}}","record-discovery.lived-with.child.parents-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his in-laws, {parent1} and {parent2}.} female {From the census, we can see that in {year} {name} was living with her in-laws, {parent1} and {parent2}.} other {From the census, we can see that in {year} {name} was living with their in-laws, {parent1} and {parent2}.}}","record-discovery.lived-with.child.parents":"{gender, select, male {From the census, we can see that in {year} {name} was living with his parents, {parent1} and {parent2}.} female {From the census, we can see that in {year} {name} was living with her parents, {parent1} and {parent2}.} other {From the census, we can see that in {year} {name} was living with their parents, {parent1} and {parent2}.}}","record-discovery.lived-with.child.step-father-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-father-in-law, {father}.} female {From the census, we can see that in {year} {name} was living with her step-father-in-law, {father}.} other {From the census, we can see that in {year} {name} was living with their step-father-in-law, {father}.}}","record-discovery.lived-with.child.step-father":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-father, {father}.} female {From the census, we can see that in {year} {name} was living with her step-father, {father}.} other {From the census, we can see that in {year} {name} was living with their step-father, {father}.}}","record-discovery.lived-with.child.step-mother-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-mother-in-law, {mother}.} female {From the census, we can see that in {year} {name} was living with her step-mother-in-law, {mother}.} other {From the census, we can see that in {year} {name} was living with their step-mother-in-law, {mother}.}}","record-discovery.lived-with.child.step-mother":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-mother, {mother}.} female {From the census, we can see that in {year} {name} was living with her step-mother, {mother}.} other {From the census, we can see that in {year} {name} was living with their step-mother, {mother}.}}","record-discovery.lived-with.grandchild.grandfather-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his grandfather-in-law, {grandfather}.} female {From the census, we can see that in {year} {name} was living with her grandfather-in-law, {grandfather}.} other {From the census, we can see that in {year} {name} was living with their grandfather-in-law, {grandfather}.}}","record-discovery.lived-with.grandchild.grandfather":"{gender, select, male {From the census, we can see that in {year} {name} was living with his grandfather, {grandfather}.} female {From the census, we can see that in {year} {name} was living with her grandfather, {grandfather}.} other {From the census, we can see that in {year} {name} was living with their grandfather, {grandfather}.}}","record-discovery.lived-with.grandchild.grandmother-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his grandmother-in-law, {grandmother}.} female {From the census, we can see that in {year} {name} was living with her grandmother-in-law, {grandmother}.} other {From the census, we can see that in {year} {name} was living with their grandmother-in-law, {grandmother}.}}","record-discovery.lived-with.grandchild.grandmother":"{gender, select, male {From the census, we can see that in {year} {name} was living with his grandmother, {grandmother}.} female {From the census, we can see that in {year} {name} was living with her grandmother, {grandmother}.} other {From the census, we can see that in {year} {name} was living with their grandmother, {grandmother}.}}","record-discovery.lived-with.grandchild.grandparents-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his grandparents-in-law, {grandparent1} and {grandparent2}.} female {From the census, we can see that in {year} {name} was living with her grandparents-in-law, {grandparent1} and {grandparent2}.} other {From the census, we can see that in {year} {name} was living with their grandparents-in-law, {grandparent1} and {grandparent2}.}}","record-discovery.lived-with.grandchild.grandparents":"{gender, select, male {From the census, we can see that in {year} {name} was living with his grandparents, {grandparent1} and {grandparent2}.} female {From the census, we can see that in {year} {name} was living with her grandparents, {grandparent1} and {grandparent2}.} other {From the census, we can see that in {year} {name} was living with their grandparents, {grandparent1} and {grandparent2}.}}","record-discovery.lived-with.grandchild.step-grandfather-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-grandfather-in-law, {grandfather}.} female {From the census, we can see that in {year} {name} was living with her step-grandfather-in-law, {grandfather}.} other {From the census, we can see that in {year} {name} was living with their step-grandfather-in-law, {grandfather}.}}","record-discovery.lived-with.grandchild.step-grandfather":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-grandfather, {grandfather}.} female {From the census, we can see that in {year} {name} was living with her step-grandfather, {grandfather}.} other {From the census, we can see that in {year} {name} was living with their step-grandfather, {grandfather}.}}","record-discovery.lived-with.grandchild.step-grandmother-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-grandmother-in-law, {grandmother}.} female {From the census, we can see that in {year} {name} was living with her step-grandmother-in-law, {grandmother}.} other {From the census, we can see that in {year} {name} was living with their step-grandmother-in-law, {grandmother}.}}","record-discovery.lived-with.grandchild.step-grandmother":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-grandmother, {grandmother}.} female {From the census, we can see that in {year} {name} was living with her step-grandmother, {grandmother}.} other {From the census, we can see that in {year} {name} was living with their step-grandmother, {grandmother}.}}","record-discovery.lived-with.grandparent.granddaughter-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his granddaughter-in-law, {granddaughter}.} female {From the census, we can see that in {year} {name} was living with her granddaughter-in-law, {granddaughter}.} other {From the census, we can see that in {year} {name} was living with their granddaughter-in-law, {granddaughter}.}}","record-discovery.lived-with.grandparent.granddaughter":"{gender, select, male {From the census, we can see that in {year} {name} was living with his granddaughter, {granddaughter}.} female {From the census, we can see that in {year} {name} was living with her granddaughter, {granddaughter}.} other {From the census, we can see that in {year} {name} was living with their granddaughter, {granddaughter}.}}","record-discovery.lived-with.grandparent.grandson-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his grandson-in-law, {grandson}.} female {From the census, we can see that in {year} {name} was living with her grandson-in-law, {grandson}.} other {From the census, we can see that in {year} {name} was living with their grandson-in-law, {grandson}.}}","record-discovery.lived-with.grandparent.grandson":"{gender, select, male {From the census, we can see that in {year} {name} was living with his grandson, {grandson}.} female {From the census, we can see that in {year} {name} was living with her grandson, {grandson}.} other {From the census, we can see that in {year} {name} was living with their grandson, {grandson}.}}","record-discovery.lived-with.grandparent.step-granddaughter-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-granddaughter-in-law, {granddaughter}.} female {From the census, we can see that in {year} {name} was living with her step-granddaughter-in-law, {granddaughter}.} other {From the census, we can see that in {year} {name} was living with their step-granddaughter-in-law, {granddaughter}.}}","record-discovery.lived-with.grandparent.step-granddaughter":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-granddaughter, {granddaughter}.} female {From the census, we can see that in {year} {name} was living with her step-granddaughter, {granddaughter}.} other {From the census, we can see that in {year} {name} was living with their step-granddaughter, {granddaughter}.}}","record-discovery.lived-with.grandparent.step-grandson-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-grandson-in-law, {grandson}.} female {From the census, we can see that in {year} {name} was living with her step-grandson-in-law, {grandson}.} other {From the census, we can see that in {year} {name} was living with their step-grandson-in-law, {grandson}.}}","record-discovery.lived-with.grandparent.step-grandson":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-grandson, {grandson}.} female {From the census, we can see that in {year} {name} was living with her step-grandson, {grandson}.} other {From the census, we can see that in {year} {name} was living with their step-grandson, {grandson}.}}","record-discovery.lived-with.heading":"{gender, select, male {Who he lived with} female {Who she lived with} other {Who they lived with}}","record-discovery.lived-with.listed-as":"From the census, we can see that in {year} {name} was listed as \\"{relationshipToHead}\\".","record-discovery.lived-with.living-alone":"From the census, we can see that in {year} {name} was living alone.","record-discovery.lived-with.living-in-asylum-as":"From the census, we can see that in {year} {name} was living in an asylum and was listed as \\"{relationshipToHead}\\".","record-discovery.lived-with.living-in-convalescent-home-as":"From the census, we can see that in {year} {name} was living in a convalescent home and was listed as \\"{relationshipToHead}\\".","record-discovery.lived-with.living-in-dormitory-as":"From the census, we can see that in {year} {name} was living in a dormatory and was listed as \\"{relationshipToHead}\\".","record-discovery.lived-with.living-in-hospital-as":"From the census, we can see that in {year} {name} was living in a hospital and was listed as \\"{relationshipToHead}\\".","record-discovery.lived-with.living-in-hotel-as":"From the census, we can see that in {year} {name} was living in a hotel and was listed as \\"{relationshipToHead}\\".","record-discovery.lived-with.living-in-institution-as":"From the census, we can see that in {year} {name} was living in the {institution} and was listed as \\"{relationshipToHead}\\".","record-discovery.lived-with.living-in-military-as":"From the census, we can see that in {year} {name} was living in a military installation and was listed as \\"{relationshipToHead}\\".","record-discovery.lived-with.living-in-orphanage-as":"From the census, we can see that in {year} {name} was living in an orphanage and was listed as \\"{relationshipToHead}\\".","record-discovery.lived-with.living-in-prison-as":"From the census, we can see that in {year} {name} was living in a prison and was listed as \\"{relationshipToHead}\\".","record-discovery.lived-with.nephew-or-niece.aunt-and-uncle":"{gender, select, male {From the census, we can see that in {year} {name} was living with his aunt and uncle, {aunt} and {uncle}.} female {From the census, we can see that in {year} {name} was living with her aunt and uncle, {aunt} and {uncle}.} other {From the census, we can see that in {year} {name} was living with their aunt and uncle, {aunt} and {uncle}.}}","record-discovery.lived-with.nephew-or-niece.aunt":"{gender, select, male {From the census, we can see that in {year} {name} was living with his aunt, {aunt}.} female {From the census, we can see that in {year} {name} was living with her aunt, {aunt}.} other {From the census, we can see that in {year} {name} was living with their aunt, {aunt}.}}","record-discovery.lived-with.nephew-or-niece.aunts":"{gender, select, male {From the census, we can see that in {year} {name} was living with his aunts, {aunt1} and {aunt2}.} female {From the census, we can see that in {year} {name} was living with her aunts, {aunt1} and {aunt2}.} other {From the census, we can see that in {year} {name} was living with their aunts, {aunt1} and {aunt2}.}}","record-discovery.lived-with.nephew-or-niece.step-aunt-and-uncle":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-aunt and step-uncle, {aunt} and {uncle}.} female {From the census, we can see that in {year} {name} was living with her step-aunt and step-uncle, {aunt} and {uncle}.} other {From the census, we can see that in {year} {name} was living with their step-aunt and step-uncle, {aunt} and {uncle}.}}","record-discovery.lived-with.nephew-or-niece.step-aunt":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-aunt, {aunt}.} female {From the census, we can see that in {year} {name} was living with her step-aunt, {aunt}.} other {From the census, we can see that in {year} {name} was living with their step-aunt, {aunt}.}}","record-discovery.lived-with.nephew-or-niece.step-uncle-and-aunt":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-uncle and step-aunt, {uncle} and {aunt}.} female {From the census, we can see that in {year} {name} was living with her step-uncle and step-aunt, {uncle} and {aunt}.} other {From the census, we can see that in {year} {name} was living with their step-uncle and step-aunt, {uncle} and {aunt}.}}","record-discovery.lived-with.nephew-or-niece.step-uncle":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-uncle, {uncle}.} female {From the census, we can see that in {year} {name} was living with her step-uncle, {uncle}.} other {From the census, we can see that in {year} {name} was living with their step-uncle, {uncle}.}}","record-discovery.lived-with.nephew-or-niece.uncle-and-aunt":"{gender, select, male {From the census, we can see that in {year} {name} was living with his uncle and aunt, {uncle} and {aunt}.} female {From the census, we can see that in {year} {name} was living with her uncle and aunt, {uncle} and {aunt}.} other {From the census, we can see that in {year} {name} was living with their uncle and aunt, {uncle} and {aunt}.}}","record-discovery.lived-with.nephew-or-niece.uncle":"{gender, select, male {From the census, we can see that in {year} {name} was living with his uncle, {uncle}.} female {From the census, we can see that in {year} {name} was living with her uncle, {uncle}.} other {From the census, we can see that in {year} {name} was living with their uncle, {uncle}.}}","record-discovery.lived-with.nephew-or-niece.uncles":"{gender, select, male {From the census, we can see that in {year} {name} was living with his uncles, {uncle1} and {uncle2}.} female {From the census, we can see that in {year} {name} was living with her uncles, {uncle1} and {uncle2}.} other {From the census, we can see that in {year} {name} was living with their uncles, {uncle1} and {uncle2}.}}","record-discovery.lived-with.others":"From the census, we can see that in {year} {name} was living with others.","record-discovery.lived-with.parent.children":"{gender, select, male {From the census, we can see that in {year} {name} was living with his children.} female {From the census, we can see that in {year} {name} was living with her children.} other {From the census, we can see that in {year} {name} was living with their children.}}","record-discovery.lived-with.parent.daughter-and-daughter-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his daughter and daughter-in-law, {daughter} and {daughterInLaw}.} female {From the census, we can see that in {year} {name} was living with her daughter and daughter-in-law, {daughter} and {daughterInLaw}.} other {From the census, we can see that in {year} {name} was living with their daughter and daughter-in-law, {daughter} and {daughterInLaw}.}}","record-discovery.lived-with.parent.daughter-and-son-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his daughter and son-in-law, {daughter} and {sonInLaw}.} female {From the census, we can see that in {year} {name} was living with her daughter and son-in-law, {daughter} and {sonInLaw}.} other {From the census, we can see that in {year} {name} was living with their daughter and son-in-law, {daughter} and {sonInLaw}.}}","record-discovery.lived-with.parent.daughter-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his daugther-in-law, {daughterInLaw}.} female {From the census, we can see that in {year} {name} was living with her daugther-in-law, {daughterInLaw}.} other {From the census, we can see that in {year} {name} was living with their daugther-in-law, {daughterInLaw}.}}","record-discovery.lived-with.parent.daughter":"{gender, select, male {From the census, we can see that in {year} {name} was living with his daughter, {daughter}.} female {From the census, we can see that in {year} {name} was living with her daughter, {daughter}.} other {From the census, we can see that in {year} {name} was living with their daughter, {daughter}.}}","record-discovery.lived-with.parent.son-and-daughter-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his son and daughter-in-law, {son} and {daughterInLaw}.} female {From the census, we can see that in {year} {name} was living with her son and daughter-in-law, {son} and {daughterInLaw}.} other {From the census, we can see that in {year} {name} was living with their son and daughter-in-law, {son} and {daughterInLaw}.}}","record-discovery.lived-with.parent.son-and-son-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his son and son-in-law, {son} and {sonInLaw}.} female {From the census, we can see that in {year} {name} was living with her son and son-in-law, {son} and {sonInLaw}.} other {From the census, we can see that in {year} {name} was living with their son and son-in-law, {son} and {sonInLaw}.}}","record-discovery.lived-with.parent.son-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his son-in-law, {sonInLaw}.} female {From the census, we can see that in {year} {name} was living with her son-in-law, {sonInLaw}.} other {From the census, we can see that in {year} {name} was living with their son-in-law, {sonInLaw}.}}","record-discovery.lived-with.parent.son":"{gender, select, male {From the census, we can see that in {year} {name} was living with his son, {son}.} female {From the census, we can see that in {year} {name} was living with her son, {son}.} other {From the census, we can see that in {year} {name} was living with their son, {son}.}}","record-discovery.lived-with.parent.step-daughter-and-daughter-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-daughter and step-daughter-in-law, {daughter} and {daughterInLaw}.} female {From the census, we can see that in {year} {name} was living with her step-daughter and step-daughter-in-law, {daughter} and {daughterInLaw}.} other {From the census, we can see that in {year} {name} was living with their step-daughter and step-daughter-in-law, {daughter} and {daughterInLaw}.}}","record-discovery.lived-with.parent.step-daughter-and-son-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-daughter and step-son-in-law, {daughter} and {sonInLaw}.} female {From the census, we can see that in {year} {name} was living with her step-daughter and step-son-in-law, {daughter} and {sonInLaw}.} other {From the census, we can see that in {year} {name} was living with their step-daughter and step-son-in-law, {daughter} and {sonInLaw}.}}","record-discovery.lived-with.parent.step-daughter":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-daughter, {daughter}.} female {From the census, we can see that in {year} {name} was living with her step-daughter, {daughter}.} other {From the census, we can see that in {year} {name} was living with their step-daughter, {daughter}.}}","record-discovery.lived-with.parent.step-son-and-daughter-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-son and step-daughter-in-law, {son} and {daughterInLaw}.} female {From the census, we can see that in {year} {name} was living with her step-son and step-daughter-in-law, {son} and {daughterInLaw}.} other {From the census, we can see that in {year} {name} was living with their step-son and step-daughter-in-law, {son} and {daughterInLaw}.}}","record-discovery.lived-with.parent.step-son-and-son-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-son and step-son-in-law, {son} and {sonInLaw}.} female {From the census, we can see that in {year} {name} was living with her step-son and step-son-in-law, {son} and {sonInLaw}.} other {From the census, we can see that in {year} {name} was living with their step-son and step-son-in-law, {son} and {sonInLaw}.}}","record-discovery.lived-with.parent.step-son":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-son, {son}.} female {From the census, we can see that in {year} {name} was living with her step-son, {son}.} other {From the census, we can see that in {year} {name} was living with their step-son, {son}.}}","record-discovery.lived-with.sibling.brother-and-brother-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his brother and brother-in-law, {brother} and {brotherInLaw}.} female {From the census, we can see that in {year} {name} was living with her brother and sister-in-law, {brother} and {sisterInLaw}.} other {From the census, we can see that in {year} {name} was living with their brother and brother-in-law, {brother} and {brotherInLaw}}}","record-discovery.lived-with.sibling.brother-and-sister-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his brother and sister-in-law, {brother} and {sisterInLaw}.} female {From the census, we can see that in {year} {name} was living with her brother and sister-in-law, {brother} and {sisterInLaw}.} other {From the census, we can see that in {year} {name} was living with their brother and sister-in-law, {brother} and {sisterInLaw}}}","record-discovery.lived-with.sibling.brother-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his brother-in-law, {brotherInLaw}.} female {From the census, we can see that in {year} {name} was living with her brother-in-law, {brotherInLaw}.} other {From the census, we can see that in {year} {name} was living with their brother-in-law, {brotherInLaw}.}}","record-discovery.lived-with.sibling.brother":"{gender, select, male {From the census, we can see that in {year} {name} was living with his brother, {brother}.} female {From the census, we can see that in {year} {name} was living with her brother, {brother}.} other {From the census, we can see that in {year} {name} was living with their brother, {brother}.}}","record-discovery.lived-with.sibling.sister-and-brother-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his sister and brother-in-law, {sister} and {brotherInLaw}} female {From the census, we can see that in {year} {name} was living with her sister and brother-in-law, {sister} and {brotherInLaw}} other {From the census, we can see that in {year} {name} was living with their sister and brother-in-law, {sister} and {brotherInLaw}}}","record-discovery.lived-with.sibling.sister-and-sister-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his sister and sister-in-law, {sister} and {sisterInLaw}} female {From the census, we can see that in {year} {name} was living with her sister and sister-in-law, {sister} and {sisterInLaw}} other {From the census, we can see that in {year} {name} was living with their sister and sister-in-law, {sister} and {sisterInLaw}}}","record-discovery.lived-with.sibling.sister":"{gender, select, male {From the census, we can see that in {year} {name} was living with his sister, {sister}.} female {From the census, we can see that in {year} {name} was living with her sister, {sister}.} other {From the census, we can see that in {year} {name} was living with their sister, {sister}.}}","record-discovery.lived-with.sibling.step-brother-and-brother-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-brother and step-brother-in-law, {brother} and {brotherInLaw}.} female {From the census, we can see that in {year} {name} was living with her step-brother and step-brother-in-law, {brother} and {brotherInLaw}.} other {From the census, we can see that in {year} {name} was living with their step-brother and step-brother-in-law, {brother} and {brotherInLaw}}}","record-discovery.lived-with.sibling.step-brother-and-sister-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-brother and step-sister-in-law, {brother} and {sisterInLaw}.} female {From the census, we can see that in {year} {name} was living with her step-brother and step-sister-in-law, {brother} and {sisterInLaw}.} other {From the census, we can see that in {year} {name} was living with their step-brother and step-sister-in-law, {brother} and {sisterInLaw}}}","record-discovery.lived-with.sibling.step-brother":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-brother, {brother}.} female {From the census, we can see that in {year} {name} was living with her step-brother, {brother}.} other {From the census, we can see that in {year} {name} was living with their step-brother, {brother}.}}","record-discovery.lived-with.sibling.step-sister-and-brother-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-sister and step-brother-in-law, {sister} and {brotherInLaw}} female {From the census, we can see that in {year} {name} was living with her step-sister and step-brother-in-law, {sister} and {brotherInLaw}} other {From the census, we can see that in {year} {name} was living with their step-sister and step-brother-in-law, {sister} and {brotherInLaw}}}","record-discovery.lived-with.sibling.step-sister-and-sister-in-law":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-sister and step-sister-in-law, {sister} and {sisterInLaw}} female {From the census, we can see that in {year} {name} was living with her step-sister and step-sister-in-law, {sister} and {sisterInLaw}} other {From the census, we can see that in {year} {name} was living with their step-sister and step-sister-in-law, {sister} and {sisterInLaw}}}","record-discovery.lived-with.sibling.step-sister":"{gender, select, male {From the census, we can see that in {year} {name} was living with his step-sister, {sister}.} female {From the census, we can see that in {year} {name} was living with her step-sister, {sister}.} other {From the census, we can see that in {year} {name} was living with their step-sister, {sister}.}}","record-discovery.lived-with.spouse.husband-and-children":"{gender, select, male {From the census, we can see that in {year} {name} was living with his husband, {husband}, and {numberOfChildren} children.} female {From the census, we can see that in {year} {name} was living with her husband, {husband}, and {numberOfChildren} children.} other {From the census, we can see that in {year} {name} was living with their husband, {husband}, and {numberOfChildren} children.}}","record-discovery.lived-with.spouse.husband-and-daugther":"{gender, select, male {From the census, we can see that in {year} {name} was living with his husband, {husband}, and her daughter, {daughter}.} female {From the census, we can see that in {year} {name} was living with her husband, {husband}, and her daughter, {daughter}.} other {From the census, we can see that in {year} {name} was living with their husband, {husband}, and their daughter, {daughter}.}}","record-discovery.lived-with.spouse.husband-and-son":"{gender, select, male {From the census, we can see that in {year} {name} was living with his husband, {husband}, and her son, {son}.} female {From the census, we can see that in {year} {name} was living with her husband, {husband}, and her son, {son}.} other {From the census, we can see that in {year} {name} was living with their husband, {husband}, and their son, {son}.}}","record-discovery.lived-with.spouse.husband":"{gender, select, male {From the census, we can see that in {year} {name} was living with his husband, {husband}.} female {From the census, we can see that in {year} {name} was living with her husband, {husband}.} other {From the census, we can see that in {year} {name} was living with their husband, {husband}.}}","record-discovery.lived-with.spouse.wife-and-children":"{gender, select, male {From the census, we can see that in {year} {name} was living with his wife, {wife}, and {numberOfChildren} children.} female {From the census, we can see that in {year} {name} was living with her wife, {wife}, and {numberOfChildren} children.} other {From the census, we can see that in {year} {name} was living with their wife, {wife}, and {numberOfChildren} children.}}","record-discovery.lived-with.spouse.wife-and-daugther":"{gender, select, male {From the census, we can see that in {year} {name} was living with his wife, {wife}, and his daughter, {daughter}.} female {From the census, we can see that in {year} {name} was living with her wife, {wife}, and her daughter, {daughter}.} other {From the census, we can see that in {year} {name} was living with their wife, {wife}, and their daughter, {daughter}.}}","record-discovery.lived-with.spouse.wife-and-son":"{gender, select, male {From the census, we can see that in {year} {name} was living with his wife, {wife}, and his son, {son}.} female {From the census, we can see that in {year} {name} was living with her wife, {wife}, and her son, {son}.} other {From the census, we can see that in {year} {name} was living with their wife, {wife}, and their son, {son}.}}","record-discovery.lived-with.spouse.wife":"{gender, select, male {From the census, we can see that in {year} {name} was living with his wife, {wife}.} female {From the census, we can see that in {year} {name} was living with her wife, {wife}.} other {From the census, we can see that in {year} {name} was living with their wife, {wife}.}}","record-discovery.lived-with.unknown":"From the census, we are not sure if {name} was living with anyone in {year}.","record-discovery.meta-data.description":"{gender, select, male {Discover how {name} lived in 1950. Find out important information about his life and share it with others.} female {Discover how {name} lived in 1950. Find out important information about her life and share it with others.} other {Discover how {name} lived in 1950. Find out important information about their life and share it with others.}}","record-discovery.meta-data.keywords":"1950 census, 1950 census records, 1950 united states census","record-discovery.meta-data.social-description":"{gender, select, male {Discover how {name} lived in 1950. Find out important information about his life and share it with others.} female {Discover how {name} lived in 1950. Find out important information about her life and share it with others.} other {Discover how {name} lived in 1950. Find out important information about their life and share it with others.}}","record-discovery.meta-data.social-title":"{gender, select, male {{name} (born {year})} female {{name} (born {year})} other {{name} (born {year})}} \u2022 FamilySearch","record-discovery.meta-data.title":"{gender, select, male {{name} (born {year})} female {{name} (born {year})} other {{name} (born {year})}}, \\"United States 1950 Census\\"","record-discovery.name-meaning.heading":"Name Meaning","record-discovery.occupation.census-image.label":"Occupation","record-discovery.other-details.heading":"Other Details","record-discovery.person-banner.portrait.aria-label":"Portrait of {name}","record-discovery.possible-tree-match.attach-action":"Attach to Family Tree","record-discovery.possible-tree-match.heading":"Possible Family Tree Match","record-discovery.related-to.action":"I\'m related to {name}","record-discovery.relationship.unknown.label":"Unknown","record-discovery.review-match.content":"We may have found {name} in the Family Tree. If the person listed below is a match, you may unlock new discoveries about {name} and {gender, select, male {his} female {her} other {their}} family.","record-discovery.review-match.heading":"Make more discoveries","record-discovery.review-match.review-possible":"Review this possible Family Tree match","record-discovery.review-match.review.action":"Review","record-discovery.save-link.action":"Save","record-discovery.save-link.body":"Save a link to {name}\'s discovery page on your home page.","record-discovery.save-link.heading":"Save what you found","record-discovery.save-link.post.high-button-text":"View {givenName}\'s page","record-discovery.save-link.post.low-button-text":"Find another relative","record-discovery.save-link.post.status-overlay-action":"View","record-discovery.save-link.post.status-overlay-message":"You saved a link to {givenName}\'s Discovery Page on your home page.","record-discovery.save-link.post.text":"I discovered interesting details about my relative {givenName} in the 1950 US Census.","record-discovery.save-link.saved":"Saved","record-discovery.save-link.view-on-homepage":"View on homepage","record-discovery.share-memories.heading":"Do you have photos or stories from {name}\'s life you would like to share?","record-discovery.share-what-you-have.action":"Share What You Have","record-discovery.story.age.census-image.label":"Age","record-discovery.story.age.details":"In the 1950 Census, {name} is listed as {relationshipToHead}, {race}, {gender}, age {age}, {maritalStatus}, and born in {birthPlace}. What was {name}\u2019s life like in 1950?","record-discovery.story.age.full.all-about-eve.body":"All About Eve","record-discovery.story.age.full.cinderella.body":"Cinderella","record-discovery.story.age.full.cleveland-browns.body":"The Cleveland Browns defeated the Los Angeles Rams, 30 \u2013 28","record-discovery.story.age.full.cleveland-browns.heading":"Cleveland Browns","record-discovery.story.age.full.cleveland-browns.image-caption":"NFL Champion","record-discovery.story.age.full.details":"{gender, select, male {In the 1950 Census, {name} is listed as {relationshipToHead}, his age was {age}, and he was born in {birthPlace}.} female {In the 1950 Census, {name} is listed as {relationshipToHead}, her age was {age}, and she was born in {birthPlace}.} other {In the 1950 Census, {name} is listed as {relationshipToHead}, their age was {age}, and they were born in {birthPlace}.}}","record-discovery.story.age.full.entertainment.heading":"Entertainment","record-discovery.story.age.full.first-class-stamp.body":"3\xa2","record-discovery.story.age.full.gallon-of-gas.body":"$0.27","record-discovery.story.age.full.heading":"{gender, select, male {{name} was {age, plural,  =0 {# years old} one {# year old} other {# years old}}} female {{name} was {age, plural,  =0 {# years old} one {# year old} other {# years old}}} other {{name} was {age, plural,  =0 {# years old} one {# year old} other {# years old}}}}","record-discovery.story.age.full.interesting-trivia.details":"<p>Here is a snapshot of what life was like for {name} in 1950.</p>","record-discovery.story.age.full.interesting-trivia.heading":"Interesting trivia form 1950","record-discovery.story.age.full.margaret-osborne-duPont.body":"Margaret Osborne duPont (USA) defeated Doris Hart (USA)","record-discovery.story.age.full.margaret-osborne-duPont.heading":"Margaret Osborne duPont","record-discovery.story.age.full.margaret-osborne-duPont.image-caption":"Grand Slams Winners","record-discovery.story.age.full.minneapolis-lakers.body":"The Minneapolis Lakers defeated the Syracuse Nationals, 4 \u2013 2","record-discovery.story.age.full.minneapolis-lakers.heading":"Minneapolis Lakers","record-discovery.story.age.full.minneapolis-lakers.image-caption":"NBA Champion","record-discovery.story.age.full.movie-ticket.body":"$0.55","record-discovery.story.age.full.new-york-yankees.body":"The New York Yankees defeated the Philadelphia Phillies, 4 \u2013 0","record-discovery.story.age.full.new-york-yankees.heading":"New York Yankees","record-discovery.story.age.full.new-york-yankees.image-caption":"World Series Winners","record-discovery.story.age.full.prices.heading":"Prices","record-discovery.story.age.full.sports.heading":"Sports","record-discovery.story.age.full.tennessee-waltz.body":"The Tennessee Waltz","record-discovery.story.age.full.tennessee-waltz.patti-page":"Patti Page","record-discovery.story.age.full.Uruguay.body":"Uruguay defeated Brazil, 2 \u2013 1","record-discovery.story.age.full.Uruguay.heading":"Uruguay","record-discovery.story.age.full.Uruguay.image-caption":"World Cup Champion","record-discovery.story.age.full.us-median-age.age":"30.2 yrs","record-discovery.story.age.full.us-median-age.details":"The median age in the United States in 1950 was 30.2 years. For males it was 29.9.","record-discovery.story.age.full.us-median-age.heading":"US Median Age","record-discovery.story.age.heading":"{gender, select, male {He was {age, plural,  =0 {# years old} one {# year old} other {# years old}}} female {She was {age, plural,  =0 {# years old} one {# year old} other {# years old}}} other {They were {age, plural,  =0 {# years old} one {# year old} other {# years old}}}}","record-discovery.story.census-image.alt":"Census Record Image","record-discovery.story.find-out.action":"Find Out","record-discovery.story.flu.census-image.label":"Flu Pandemic","record-discovery.story.flu.details":"{gender, select, male {In 1950, {name} was {age}. This means he was {fluAge, plural,  =0 {# years old} one {# year old} other {# years old}} in 1918 when the Spanish Flu Pandemic broke out.} female {In 1950, {name} was {age}. This means she was {fluAge, plural,  =0 {# years old} one {# year old} other {# years old}} in 1918 when the Spanish Flu Pandemic broke out.} other {In 1950, {name} was {age}. This means they were {fluAge, plural,  =0 {# years old} one {# year old} other {# years old}} in 1918 when the Spanish Flu Pandemic broke out.}} How was the flu pandemic similar to COVID-19?","record-discovery.story.flu.full.body":"{gender, select, male {In 1950, {name} was {age}. This means he was {fluAge, plural,  =0 {# years old} one {# year old} other {# years old}} in 1918 when the Spanish Flu Pandemic broke out.} female {In 1950, {name} was {age}. This means she was {fluAge, plural,  =0 {# years old} one {# year old} other {# years old}} in 1918 when the Spanish Flu Pandemic broke out.} other {In 1950, {name} was {age}. This means they were {fluAge, plural,  =0 {# years old} one {# year old} other {# years old}} in 1918 when the Spanish Flu Pandemic broke out.}}","record-discovery.story.flu.full.heading":"{name} lived through the flu pandemic","record-discovery.story.flu.full.impact.body":"The 1918 pandemic, also known as the Spanish flu pandemic, was the last major pandemic prior to the arrival of COVID-19. <br/><br/> It had a drastic impact on individuals, families, and countries around the globe, with an estimated 50 million deaths. Young adults were hit especially hard, an oddity in the world of diseases. <br /><br/> Learn more about the 1918 pandemic\u2014where the Spanish flu came from, how it spread, how long it lasted, who it impacted, and how it compares with COVID-19.","record-discovery.story.flu.full.impact.heading":"How Did the 1918 Pandemic Impact People?","record-discovery.story.flu.full.infection-rate.body":"In the US, about 28% of the population (29.4 million people) became infected, and 500,000 to 850,000 died (0.48 to 0.81 percent of the population). Native American tribes were particularly hard hit.","record-discovery.story.flu.full.infection-rate.heading":"Infection Rate","record-discovery.story.flu.full.pandemic.body":"With everything that\u2019s happened due to COVID-19, many people are looking to the 1918 pandemic for answers. As the last major worldwide pandemic, the 1918 pandemic offers some insight in an otherwise unprecedented time.<br /><br />What can we learn from the Spanish flu of 1918? Studying a historic pandemic can help us anticipate what we might be able expect from COVID-19. It can also help us see what worked last time the world was faced with something similar.<br /><br /><a href=\\"\\">Read more</a>","record-discovery.story.flu.full.pandemic.heading":"The 1918 Pandemic","record-discovery.story.flu.heading":"{gender, select, male {He lived through a flu pandemic} female {She lived through a flu pandemic} other {They lived through a flu pandemic}}","record-discovery.story.graduate.census-image.label":"College Graduate","record-discovery.story.graduate.details":"Not as many people were listed as college graduates in 1950. {name} was one of them.","record-discovery.story.graduate.heading":"{gender, select, male {He graduated college} female {She graduated college} other {They graduated college}}","record-discovery.story.marital-status.body":"In 1950 {name} was recorded as {maritalStatus}. What percentage of {gender, select, male {men} female {women} other {people}} {name}\'s age were {maritalStatus}?","record-discovery.story.marital-status.d.label":"Divorced","record-discovery.story.marital-status.full.body":"According to the 1950 Census, {name} was {maritalStatus}","record-discovery.story.marital-status.full.graph.age":"(14 and older)","record-discovery.story.marital-status.full.graph.body":"This graphic shows the percentages of marital status in 1950. Those that were enumerated as \\"separated\\" were included in the Married category.","record-discovery.story.marital-status.full.graph.females.married":"Married (49.51%)","record-discovery.story.marital-status.full.graph.females.single":"Single (15.11%)","record-discovery.story.marital-status.full.graph.females.widowed":"Widowed or Divorced (10.66%)","record-discovery.story.marital-status.full.graph.females":"Females","record-discovery.story.marital-status.full.graph.heading":"Marital status in 1950","record-discovery.story.marital-status.full.graph.males.married":"Married (50.08%)","record-discovery.story.marital-status.full.graph.males.single":"Single (19.7%)","record-discovery.story.marital-status.full.graph.males.widowed":"Widowed or Divorced (4.55%)","record-discovery.story.marital-status.full.graph.males":"Males","record-discovery.story.marital-status.full.heading":"{name} was {maritalStatus}","record-discovery.story.marital-status.heading":"{gender, select, male {He was {maritalStatus}} female {She was {maritalStatus}} other {They were {maritalStatus}}}","record-discovery.story.marital-status.mar.label":"Married","record-discovery.story.marital-status.nev.label":"Never Married","record-discovery.story.marital-status.wd.label":"Widowed","record-discovery.story.name.census-image.label":"Name","record-discovery.story.negro.body":"In the 1950 census the enumerator recorded {name} as Negro. Where were most of those listed as Negro living at the time?","record-discovery.story.negro.full.arthur-ashe.caption":"Age in 1950: 7<br />Tennis player<br /><br /><a href=\\"\\">1950 Census Record</a> (Line 7)<br /><a href=\\"\\">Page</a>in Family Tree","record-discovery.story.negro.full.arthur-ashe.heading":"Arthur Ashe","record-discovery.story.negro.full.body":"{gender, select, male {He was} female {She was} other {They were}} one of a total of 15,042,286 people recorded as Negro in the 1950 Census.","record-discovery.story.negro.full.famous-people.heading":"Famous People","record-discovery.story.negro.full.gladys-knight.caption":"Age in 1950: 6<br />Singer<br /><br /><a href=\\"\\">1950 Census Record</a> (Line 7)<br /><a href=\\"\\">Page</a>in Family Tree","record-discovery.story.negro.full.gladys-knight.heading":"Gladys Knight","record-discovery.story.negro.full.heading":"{name} was recorded as Negro","record-discovery.story.negro.full.martin-luther-king-jr.caption":"Age in 1950: 21<br />Baptist minister and American Civil Rights Activist<br /><br /><a href=\\"\\">1950 Census Record</a> (Line 7)<br /><a href=\\"\\">Page</a>in Family Tree","record-discovery.story.negro.full.martin-luther-king-jr.heading":"Martin Luther King Jr.","record-discovery.story.negro.full.maya-angelou.caption":"Age in 1950: 22<br />Poet<br /><br /><a href=\\"\\">1950 Census Record</a> (Line 7)<br /><a href=\\"\\">Page</a>in Family Tree","record-discovery.story.negro.full.maya-angelou.heading":"Maya Angelou","record-discovery.story.negro.full.nat-king-cole.caption":"Age in 1950: 31<br />American singer<br /><br /><a href=\\"\\">1950 Census Record</a> (Line 7)<br /><a href=\\"\\">Page</a>in Family Tree","record-discovery.story.negro.full.nat-king-cole.heading":"Nat King Cole","record-discovery.story.negro.full.rosa-parks.caption":"Age in 1950: 37<br />American civil rights activist<br /><br /><a href=\\"\\">1950 Census Record</a> (Line 7)<br /><a href=\\"\\">Page</a>in Family Tree","record-discovery.story.negro.full.rosa-parks.heading":"Rosa Parks","record-discovery.story.negro.full.where-lived.body":"Most people record as Negro were living in the South, specifically the South Atlantic area. The state with largest population was Georgia with 1,062,762 people, followed by North and South Carolina.","record-discovery.story.negro.full.where-lived.heading":"Where this population lived","record-discovery.story.negro.heading":"{gender, select, male {He was} female {She was} other {They were}} recorded as Negro","record-discovery.story.occupation.details":"The 1950 Census asked about a person\'s employment. In the record, we can see that {gender, select, male {his} female {her} other {their}} occupation was {occupation}. How many hours did {name} work?","record-discovery.story.occupation.full.body":"The 1950 Census asked about a person\'s employment. In the record, we can see that {gender, select, male {his} female {her} other {their}} occupation was {occupation}. The week before the Census was taken {name} worked {hoursWorked, plural, =0 {# hours} one {# hour} other {# hours}}.","record-discovery.story.occupation.full.business-or-industry.body":"{name}\'s business or industry was listed as {industry}.","record-discovery.story.occupation.full.business-or-industry.heading":"Business or industry","record-discovery.story.occupation.full.employment-has-changed.body":"In 1950, 28 percent of the workforce was female, compared to 51.5 percent in the 2020 census. The median income for a family was $3,300 a year.","record-discovery.story.occupation.full.employment-has-changed.heading":"How employment has changed","record-discovery.story.occupation.full.family-income.body":"$3,300 a year","record-discovery.story.occupation.full.family-income.heading":"1950 Family Income","record-discovery.story.occupation.full.heading":"{gender, select, male {His occupation was listed as {occupation}} female {Her occupation was listed as {occupation}} other {Their occupation was listed as {occupation}}}","record-discovery.story.occupation.full.total-employment.body":"53.4% of the entire US population was working in 1950. This is compared to 52.4% in 1940.","record-discovery.story.occupation.full.total-employment.heading":"Total employment in 1950","record-discovery.story.occupation.full.working-class.heading":"Working Class","record-discovery.story.occupation.heading":"{gender, select, male {His occupation was listed as {occupation}} female {Her occupation was listed as {occupation}} other {Their occupation was listed as {occupation}}}","record-discovery.story.race.chi.label":"Chinese","record-discovery.story.race.fil.label":"Filipino","record-discovery.story.race.ind.label":"American Indian","record-discovery.story.race.jap.label":"Japanese","record-discovery.story.race.neg.label":"Negro","record-discovery.story.race.w.label":"White","record-discovery.story.view-full-image.action":"View Full Image","record-discovery.story.ww2.census-image.label":"World War II Veteran","record-discovery.story.ww2.details":"{gender, select, male {In the record, {name} was listed as a WWII veteran. In 1950 he was {age}, meaning that in 1941 when the US entered WWII, he would have been approximately {ww2Age, plural,  =0 {# years old} one {# year old} other {# years old}}.} female {In the record, {name} was listed as a WWII veteran. In 1950 she was {age}, meaning that in 1941 when the US entered WWII, she would have been approximately {ww2Age, plural,  =0 {# years old} one {# year old} other {# years old}}.} other {In the record {name} was listed as a WWII veteran. In 1950 they were {age}, meaning that in 1941 when the US entered WWII, they would have been approximately {ww2Age, plural,  =0 {# years old} one {# year old} other {# years old}}.}} Can you find {name}\'s WWII draft card?","record-discovery.story.ww2.full.body":"{gender, select, male {In the record, {name} was listed as a WWII veteran. In 1950 he was {age}, meaning that in 1941 when the US entered WWII, he would have been approximately {ww2Age, plural,  =0 {# years old} one {# year old} other {# years old}}.} female {In the record, {name} was listed as a WWII veteran. In 1950 she was {age}, meaning that in 1941 when the US entered WWII, she would have been approximately {ww2Age, plural,  =0 {# years old} one {# year old} other {# years old}}.} other {In the record {name} was listed as a WWII veteran. In 1950 they were {age}, meaning that in 1941 when the US entered WWII, they would have been approximately {ww2Age, plural,  =0 {# years old} one {# year old} other {# years old}}.}}","record-discovery.story.ww2.full.draft-registration.body":"On September 16, 1940, the United States Congress passed the Selective Training and Service Act of 1940. This law instituted a national draft that required all men ages 21\u201365 to register. Men who were selected were required to serve for at least one year. When the United States entered the war, the draft was extended. <a href=\\"\\">Read More</a>","record-discovery.story.ww2.full.draft-registration.heading":"Draft Registration Cards","record-discovery.story.ww2.full.heading":"{name} served in WWII","record-discovery.story.ww2.full.how-many-served.body":"Americans were in military service by September 2, 1945","record-discovery.story.ww2.full.how-many-served.heading":"How many served?","record-discovery.story.ww2.full.how-many-served.number":"12,209,238","record-discovery.story.ww2.full.how-many-served.population-body":"That is 9% of the entire US population at the time.","record-discovery.story.ww2.heading":"{gender, select, male {He served in World War II} female {She served in World War II} other {They served in World War II}}","record-discovery.view-person-profile.action":"View {name}\u2019s Profile","record-discovery.view-record-details.action":"View Record Details","record-discovery.view-record-image":"View Record Image","record-discovery.what-do-we-know.description":"We can learn a lot about {name} from the 1950 census record. Here are some of the main details. You can learn more about census records on <0>our blog</0>.","record-discovery.what-do-we-know.heading":"What do we know about {name}?","record-discovery.where-lived.details":"{gender, select, male {In 1950, {name} was living at {place}.} female {In 1950, {name} was living at {place}.} other {In 1950, {name} was living at {place}.}}","record-discovery.where-lived.heading":"{gender, select, male {Where he lived} female {Where she lived} other {Where they lived}}","record-discovery.where-lived.map-image.alt":"Map of Census Location","record-discovery.where-lived.view-map.action":"View Map","recordSearch.error.goBack":"Go Back","recordSearch.error.header":"Something Went Wrong","recordSearch.error.imageAlt":"Something Went Wrong","recordSearch.error.noCriteria.header":"Search for Your Ancestors","recordSearch.error.noResults.header":"No Results Found","recordSearch.error.noResults.imageAlt":"No Results","recordSearch.error.noSearchCriteria.imageAlt":"Search for Your Ancestors","recordSearch.error.returnToHomePage":"FamilySearch Home Page","recordSearch.error.tryYourSearchAgain":"Try Your Search Again","recordSearch.error.tryYourSearchAgain.body":"Consider adding a last name to avoid this message.","recordSearch.error.tryYourSearchAgain.imageAlt":"Try Your Search Again","recordSearch.filter.name":"{filterChipLabel}-filter","recordSearch.filter.chip.tooltip":"Filter by {filterChipLabel}","recordSearch.filters.allCollections":"All {displayName} Collections","recordSearch.filters.applyButton":"Apply","recordSearch.filters.browse":"Browse in {filterName}","recordSearch.filters.collection":"Filter by Collection","recordSearch.filters.collectionApply":"Apply Collection Filter","recordSearch.filters.collectionSearchLabel":"Collection Title","recordSearch.filters.error":"We\u2019re sorry, something unexpected happened, and we couldn\u2019t show you this filter. Try again later.","recordSearch.filters.filterDialog":"Filter Dialog","recordSearch.filters.filterName":"Filter by {filterName}","recordSearch.filters.selected":"Selected Filter","recordSearch.filters.showAllNum":"Show All {count}","recordSearch.filters.showLess":"Show Less","recordSearch.filters.showMore":"Show More","recordSearch.filters.sortCollection":"Sort search results. Results can be sorted alphabetically or by collection size.","recordSearch.filters.title":"Filters","recordSearch.form.chip.searchFieldTitle":"Add Ancestor Information","recordSearch.form.afn.tooltip":"When searching with Ancestral File Number, you cannot include any additional search fields. As a result, all other fields have been disabled.","recordSearch.form.all":"All","recordSearch.form.button.remove":"Remove Event","recordSearch.form.button.remove.AncestorAttribute":"Remove Ancestor\'s {fieldName}","recordSearch.form.button.remove.Restriction":"Remove Restriction","recordSearch.form.button.remove.afnId":"Remove Ancestral File Number","recordSearch.form.button.remove.afnId.aria":"Remove the Ancestral File Number from the search form.","recordSearch.form.button.remove.any":"Remove Event","recordSearch.form.button.remove.batchNumber":"Remove Batch Number","recordSearch.form.button.remove.batchNumber.aria":"Remove the Batch Number from the search form.","recordSearch.form.button.remove.birthLike":"Remove Birth Event","recordSearch.form.button.remove.birthLike.aria":"Remove the Birth event from the search form.","recordSearch.form.button.remove.collectionId":"Remove Collection","recordSearch.form.button.remove.collectionId.aria":"Remove the Collection option from the search form.","recordSearch.form.button.remove.deathLike":"Remove Death Event","recordSearch.form.button.remove.deathLike.aria":"Remove the Death event from the search form.","recordSearch.form.button.remove.father":"Remove Father","recordSearch.form.button.remove.father.aria":"Remove the Father from the search form.","recordSearch.form.button.remove.father_1":"Remove Father 2","recordSearch.form.button.remove.father_1.aria":"Remove Father 2 from the search form.","recordSearch.form.button.remove.father_2":"Remove Father 3","recordSearch.form.button.remove.father_2.aria":"Remove Father 3 from the search form.","recordSearch.form.button.remove.filmNumber":"Remove Image Group Number (DGS) or Film Number","recordSearch.form.button.remove.filmNumber.aria":"Remove the Image Group Number (DGS) or Film Number from the search form.","recordSearch.form.button.remove.igiSheetNumber":"Remove Serial or Sheet Number","recordSearch.form.button.remove.igiSheetNumber.aria":"Remove the Serial or Sheet Number from the search form.","recordSearch.form.button.remove.marriageLike":"Remove Marriage Event","recordSearch.form.button.remove.marriageLike.aria":"Remove the Marriage event from the search form.","recordSearch.form.button.remove.mother":"Remove Mother","recordSearch.form.button.remove.mother.aria":"Remove the Mother from the search form.","recordSearch.form.button.remove.mother_1":"Remove Mother 2","recordSearch.form.button.remove.mother_1.aria":"Remove Mother 2 from the search form.","recordSearch.form.button.remove.mother_2":"Remove Mother 3","recordSearch.form.button.remove.mother_2.aria":"Remove Mother 3 from the search form.","recordSearch.form.button.remove.other":"Remove Other Person","recordSearch.form.button.remove.other.aria":"Remove the Other Person from the search form.","recordSearch.form.button.remove.other_1":"Remove Other Person 2","recordSearch.form.button.remove.other_1.aria":"Remove the Other Person 2 from the search form.","recordSearch.form.button.remove.other_2":"Remove Other Person 3","recordSearch.form.button.remove.other_2.aria":"Remove the Other Person 3 from the search form.","recordSearch.form.button.remove.parent":"Remove Parent","recordSearch.form.button.remove.parent.aria":"Remove the Parent from the search form.","recordSearch.form.button.remove.recordCountry":"Remove Location","recordSearch.form.button.remove.recordCountry.aria":"Remove the Location restriction from the search form.","recordSearch.form.button.remove.recordType":"Remove Type","recordSearch.form.button.remove.recordType.aria":"Remove the Type restrictions from the search form.","recordSearch.form.button.remove.relative":"Remove Ancestor\'s Name","recordSearch.form.button.remove.relative.aria":"Remove the Ancestor\'s Name from the search form.","recordSearch.form.button.remove.relative_1":"Remove Alternate Name","recordSearch.form.button.remove.relative_1.aria":"Remove the Alternate Name from the search form.","recordSearch.form.button.remove.residence":"Remove Residence","recordSearch.form.button.remove.residence.aria":"Remove the Residence from the search form.","recordSearch.form.button.remove.sex":"Remove Sex","recordSearch.form.button.remove.sex.aria":"Remove the Sex from the search form.","recordSearch.form.button.remove.spouse":"Remove Spouse","recordSearch.form.button.remove.spouse.aria":"Remove the Spouse from the search form.","recordSearch.form.button.remove.spouse_1":"Remove Spouse 2","recordSearch.form.button.remove.spouse_1.aria":"Remove Spouse 2 from the search form.","recordSearch.form.button.remove.spouse_2":"Remove Spouse 3","recordSearch.form.button.remove.spouse_2.aria":"Remove Spouse 3 from the search form.","recordSearch.form.button.remove.subcollectionId":"Remove Submission ID","recordSearch.form.button.remove.subcollectionId.aria":"Remove the Submission ID option from the search form.","recordSearch.form.chip.afn":"Ancestral File Number","recordSearch.form.chip.afn.aria":"Add an Ancestral File Number to the search form.","recordSearch.form.chip.altName":"Alternate Name","recordSearch.form.chip.altName.aria":"Add an Alternate Name to the search form.","recordSearch.form.chip.any":"Any","recordSearch.form.chip.any.aria":"Add Any event to the search form.","recordSearch.form.chip.batchNumber":"Batch Number","recordSearch.form.chip.batchNumber.aria":"Add a Batch Number to the search form.","recordSearch.form.chip.birth":"Birth","recordSearch.form.chip.birth.aria":"Add a Birth event to the search form.","recordSearch.form.chip.collection":"Collection","recordSearch.form.chip.collection.aria":"Add a Collection to the search form.","recordSearch.form.chip.death":"Death","recordSearch.form.chip.death.aria":"Add a Death event to the search form.","recordSearch.form.chip.father":"Father","recordSearch.form.chip.father.aria":"Add a Father to the search form.","recordSearch.form.chip.filmNumber":"Film/Fiche/Image Group Number (DGS)","recordSearch.form.chip.filmNumber.aria":"Add a Image Group Number (DGS) or Film Number to the search form.","recordSearch.form.chip.isPrincipal":"Principal","recordSearch.form.chip.isPrincipal.aria":"Add a Principal on Record option to the search form.","recordSearch.form.chip.location":"Location","recordSearch.form.chip.location.aria":"Add a Location to the search form.","recordSearch.form.chip.marriage":"Marriage","recordSearch.form.chip.marriage.aria":"Add a Marriage event to the search form.","recordSearch.form.chip.mother":"Mother","recordSearch.form.chip.mother.aria":"Add a Mother to the search form.","recordSearch.form.chip.name.aria":"Add an ancestor name to the search form.","recordSearch.form.chip.other":"Other Person","recordSearch.form.chip.other.aria":"Add an Other Person to the search form.","recordSearch.form.chip.parent":"Parent","recordSearch.form.chip.parent.aria":"Add a Parent to the search form.","recordSearch.form.chip.recordType":"Type","recordSearch.form.chip.recordType.aria":"Add a Record Type to the search form.","recordSearch.form.chip.residence":"Residence","recordSearch.form.chip.residence.aria":"Add a Residence to the search form.","recordSearch.form.chip.sex":"Sex","recordSearch.form.chip.sex.aria":"Add a Sex to the search form.","recordSearch.form.chip.sheetNumber":"Serial or Sheet Number","recordSearch.form.chip.sheetNumber.aria":"Add an IGI Serial or Sheet Number to the search form.","recordSearch.form.chip.spouse":"Spouse","recordSearch.form.chip.spouse.aria":"Add a Spouse to the search form.","recordSearch.form.chip.subcollectionId":"Submission ID","recordSearch.form.chip.subcollectionId.aria":"Add a Submission ID to the search form.","recordSearch.form.exact":"Show Exact Search","recordSearch.form.exact.tooltip":"When enabled, you can search for an exact match by checking the box next to its related field.","recordSearch.form.fewerOptions":"Fewer Options","recordSearch.form.field.exact":"Exact","recordSearch.form.field.exact.tooltip":"Match {fieldName} exactly","recordSearch.form.group.familyMember":"Add Family Member","recordSearch.form.group.lifeEvent":"Add Life Event","recordSearch.form.group.otherOptions":"Add Record Options","recordSearch.form.group.relative.info":"Add Ancestor Information","recordSearch.form.label.afn":"Ancestral File Number (AFN)","recordSearch.form.label.altName":"Alternate Name","recordSearch.form.label.batchNumber":"Batch Number","recordSearch.form.label.birthLikeDate":"Birth Year (Range)","recordSearch.form.label.birthLikeDate.from":"Birth year (from)","recordSearch.form.label.birthLikeDate.to":"Birth year (to)","recordSearch.form.label.birthLikePlace":"Birth Place","recordSearch.form.label.collectionId":"Collection","recordSearch.form.label.countryOrLocation":"Country or Location","recordSearch.form.label.deathLikeDate":"Death Year (Range)","recordSearch.form.label.deathLikeDate.from":"Death year (from)","recordSearch.form.label.deathLikeDate.to":"Death year (to)","recordSearch.form.label.deathLikePlace":"Death Place","recordSearch.form.label.fatherBirthPlace":"Father\'s Birthplace","recordSearch.form.label.fatherGivenName":"Father\'s First Names","recordSearch.form.label.fatherNames":"Father","recordSearch.form.label.fatherSurname":"Father\'s Last Names","recordSearch.form.label.filmNumber":"Film/Fiche/Image Group Number (DGS)","recordSearch.form.label.givenname.alt":"Alternate First Name","recordSearch.form.label.isPrincipal":"Principal on Record","recordSearch.form.label.maritalStatus":"Marital Status","recordSearch.form.label.marriageLikeDate":"Marriage Year (Range)","recordSearch.form.label.marriageLikeDate.from":"Marriage year (from)","recordSearch.form.label.marriageLikeDate.to":"Marriage year (to)","recordSearch.form.label.marriageLikePlace":"Marriage Place","recordSearch.form.label.motherBirthPlace":"Mother\'s Birthplace","recordSearch.form.label.motherGivenName":"Mother\'s First Names","recordSearch.form.label.motherNames":"Mother","recordSearch.form.label.motherSurname":"Mother\'s Last Names","recordSearch.form.label.occupation":"Occupation","recordSearch.form.label.otherBirthPlace":"Other Person\'s Birthplace","recordSearch.form.label.otherGivenName":"Other Person\'s First Names","recordSearch.form.label.otherNames":"Other","recordSearch.form.label.otherSurname":"Other Person\'s Last Names","recordSearch.form.label.port":"Port of Departure","recordSearch.form.label.race":"Race","recordSearch.form.label.recordSubcountry":"State or Province","recordSearch.form.label.recordType":"Record Type","recordSearch.form.label.recordType.0":"Birth, Baptism, and Christening","recordSearch.form.label.recordType.1":"Marriage","recordSearch.form.label.recordType.2":"Death","recordSearch.form.label.recordType.3":"Census, Residence, and Lists","recordSearch.form.label.recordType.4":"Immigration and Naturalization","recordSearch.form.label.recordType.5":"Military","recordSearch.form.label.recordType.6":"Probate","recordSearch.form.label.recordType.7":"Other","recordSearch.form.label.relToHead":"Relationship to Head","recordSearch.form.label.religion":"Religion","recordSearch.form.label.residenceDate":"Residence Year (Range)","recordSearch.form.label.residenceDate.from":"Residence year (from)","recordSearch.form.label.residenceDate.to":"Residence year (to)","recordSearch.form.label.residencePlace":"Residence Place","recordSearch.form.label.selectSex":"Select Sex","recordSearch.form.label.sex":"Sex","recordSearch.form.label.sex.female":"Female","recordSearch.form.label.sex.male":"Male","recordSearch.form.label.sex.unspecified":"Unspecified","recordSearch.form.label.sheetNumber":"Serial or Sheet Number","recordSearch.form.label.shipName":"Ship Name","recordSearch.form.label.spouseBirthPlace":"Spouse\'s Birthplace","recordSearch.form.label.spouseGivenName":"Spouse\'s First Names","recordSearch.form.label.spouseNames":"Spouse","recordSearch.form.label.spouseSurname":"Spouse\'s Last Names","recordSearch.form.label.subcollectionId":"Submission ID","recordSearch.form.label.surname.alt":"Alternate Last Name","recordSearch.form.label.yearRange":"Year (Range)","recordSearch.form.moreOptions":"More Options","recordSearch.form.select.item.action":"Select Item","recordSearch.form.simple.label.firstNames":"First Names","recordSearch.form.simple.label.lastNames":"Last Names","recordSearch.form.simple.label.surname":"Surnames","recordSearch.form.simple.label.place":"Place","recordSearch.form.simple.label.place.placeholder":"City, County, State, Province, or Country","recordSearch.form.simple.label.year":"Year","recordSearch.form.simple.label.year.placeholder":"Birth or Death Year","recordSearch.form.submissionId.tooltip":"The Ancestral File and IGI are not searched if a submission ID is supplied.","recordSearch.form.submit.error":"Please add more information to your search.","recordSearch.form.validation.endYearMustBeGreater":"End year must be greater than start year.","recordSearch.form.validation.enterDataForSearch":"Please enter more data to complete a search.","recordSearch.form.validation.enoughParamsFullTextProvided":"In addition to collection. Please enter one more data point.","recordSearch.form.validation.inputMustBeInteger":"Input must be an integer.","recordSearch.form.validation.inputMustBeNumber":"Input must be a number.","recordSearch.form.validation.inputMustBePositive":"Input must be positive.","recordSearch.form.validation.invalidChars":"Input cannot contain the following characters: {invalidChars}","recordSearch.form.validation.yearFromCantBeGreaterThanMaxYear":"{event} Year (from) cannot be greater than {maxYear}.","recordSearch.form.validation.yearFromCantBeLessThanMinYear":"{event} Year (from) cannot be less than {minYear}.","recordSearch.form.validation.yearFromCantBeZero":"{event} Year (from) cannot be zero.","recordSearch.form.validation.yearToCantBeGreaterThanMaxYear":"{event} Year (to) cannot be greater than {maxYear}.","recordSearch.form.validation.yearToCantBeLessThanMinYear":"{event} Year (to) cannot be less than {minYear}.","recordSearch.form.validation.yearToCantBeZero":"{event} Year (to) cannot be zero.","recordSearch.gen.submissionType.communityTrees":"Community Trees","recordSearch.gen.submissionType.oralGenealogies":"Oral Genealogies","recordSearch.notFound.body":"Sometimes in life, less is more. Try your search again with a little less information. If you get too many results, you can always add more later.","recordSearch.notFound.body.genResultsSignInPrompt":"You might find more results after you <0>Sign In</0>.","recordSearch.notFound.optionReload":"Reload the Page","recordSearch.person.F":"Female","recordSearch.person.M":"Male","recordSearch.person.U":"Unknown","recordSearch.results":"Search Results","recordSearch.results.catalog.tipsAndResources.button":"Tips and Resources","recordSearch.results.catalogPrintList.title":"Catalog Print List ({printListLength})","recordSearch.results.addToPrintLIst":"Add","recordSearch.results.chip.birth":"Birth","recordSearch.results.chip.death":"Death","recordSearch.results.chip.marriage":"Marriage","recordSearch.results.chip.other":"Other","recordSearch.results.chip.residence":"Residence","recordSearch.results.defaultMetaDescription":"Search for your ancestors in birth certificates, marriage registrations, census records, and other documents.","recordSearch.results.displayPrefs.title":"Preferences","recordSearch.results.error.body":"Unfortunately, something went wrong, and we are unable to display the search results. Try refreshing the page, or come back later.","recordSearch.results.eventsHead":"Events","recordSearch.results.eventsRelationshipsHead":"Events and Relationships","recordSearch.results.fact.birthLike":"Birth","recordSearch.results.fact.birthLikeDate":"Birth Date","recordSearch.results.fact.birthLikePlace":"Birth Place","recordSearch.results.fact.deathLike":"Death","recordSearch.results.fact.deathLikeDate":"Death Date","recordSearch.results.fact.deathLikePlace":"Death Place","recordSearch.results.fact.marriageLike":"Marriage","recordSearch.results.fact.marriageLikeDate":"Marriage Date","recordSearch.results.fact.marriageLikePlace":"Marriage Place","recordSearch.results.fact.residence":"Residence","recordSearch.results.fact.residenceDate":"Residence Date","recordSearch.results.fact.residencePlace":"Residence Place","recordSearch.results.fact.typeDate":"{factType} Date","recordSearch.results.fact.typePlace":"{factType} Place","recordSearch.results.filters.numberOfResults":"Filtered Results ({resultCount, number})","recordSearch.results.header.collection":"Collection","recordSearch.results.mobileHead":"Name, Events, Relationships","recordSearch.results.noSearchCriteria":"Begin by entering what you know. Add a person\'s name, a life event, family members, or other record options. We\'ll show you everything we can find that meets that criteria.","recordSearch.results.numberOfResults":"Results ({resultCount, number})","recordSearch.results.openFormButtonDescription":"Modify your search or start a new one.","recordSearch.results.otherName":"Other Name","recordSearch.results.otherNames":"Other Names","recordSearch.results.preferencesButtonDescription":"Customize your results.","recordSearch.results.prefs.customizeDataSheet":"Customize Data Sheet","recordSearch.results.prefs.customizeDataSheet.columnCheckboxDescription":"Each box checked below will create columns in the table to display its associated record information.","recordSearch.results.prefs.customizeTable":"Customize Table","recordSearch.results.prefs.displayInformation":"Display Information","recordSearch.results.prefs.download":"Export Search Results","recordSearch.results.prefs.downloadCount":"Number of Results","recordSearch.results.prefs.downloading":"Downloading your search results.","recordSearch.results.prefs.export":"Export Results","recordSearch.results.prefs.format":"Format","recordSearch.results.prefs.format.data":"Data Sheet","recordSearch.results.prefs.format.fixed":"Fixed Table","recordSearch.results.prefs.language":"Language Options","recordSearch.results.prefs.language.original":"Original Text","recordSearch.results.prefs.language.standard":"Translated Text","recordSearch.results.prefs.row.all":"All Information","recordSearch.results.prefs.row.default":"Default Information","recordSearch.results.prefs.row.minimal":"Minimal Information","recordSearch.results.rel.child":"Child","recordSearch.results.rel.children":"Children","recordSearch.results.rel.children.singular":"Child","recordSearch.results.rel.father":"Father","recordSearch.results.rel.mother":"Mother","recordSearch.results.rel.other":"Other","recordSearch.results.rel.others":"Others","recordSearch.results.rel.others.singular":"Other","recordSearch.results.rel.parent":"Parent","recordSearch.results.rel.parent.singular":"Parent","recordSearch.results.rel.parents":"Parents","recordSearch.results.rel.parents.singular":"Parent","recordSearch.results.rel.sibling":"Sibling","recordSearch.results.rel.sibling.singular":"Sibling","recordSearch.results.rel.siblings":"Siblings","recordSearch.results.rel.spouse":"Spouse","recordSearch.results.rel.spouses":"Spouses","recordSearch.results.rel.spouses.singular":"Spouse","recordSearch.results.relationshipsHead":"Relationships","recordSearch.results.removeFromPrintList":"Remove","recordSearch.results.sex":"Sex","recordSearch.results.author":"Author","recordSearch.results.surname":"Surname","recordSearch.results.callNumber":"Call Number","recordSearch.results.author.noneProvided":"None Provided","recordSearch.results.view.image":"View the image.","recordSearch.results.view.possibleTreeMatches":"View possible tree matches.","recordSearch.results.view.recordDetails":"View record details.","recordSearch.results.view.treePersons":"View attached tree person.","recordSearch.results.viewAttachedRecords.title":"View Attached Records","recordSearch.results.cet.subcollection.aria":"Tree Name","recordSearch.results.cet.collection.aria":"Collection Name","recordSearch.tree.tab.findByID":"Find by ID","recordSearch.tree.tab.findByName":"Find by Name","recordSearch.treeIdForm.AncestorId":"Ancestor ID","recordSearch.treeIdForm.helpMessage":"An individual\'s unique ID number is in the format XXXX-XXX.","recordSearch.treeIdForm.invalidId":"This is an invalid ID.","recordSearch.filters.showAllNum_plural":"Show All {count}","recordSearch.form.validation.invalidArkChars":"Input cannot contain the following characters: {invalidArkChars}","recordSearch.form.miscKeyword.helpMessage":"Search by street number, religion, street address, occupation, and/or marital status.","recordSearch.results.mergedInto":"Merged Into","recordSearch.results.prefs.downloadError":"Something went wrong. Try again later.","recordSearch.results.memoryAttachError":"Could not attach person to memory","recordSearch.results.deleted":"Person Deleted","recordSearch.form.chip.race":"Race","recordSearch.form.option.white":"White","recordSearch.form.option.negro":"Negro","recordSearch.form.option.black":"Black","recordSearch.form.option.indian":"Indian","recordSearch.form.option.japanese":"Japanese","recordSearch.form.option.colored":"Colored","recordSearch.form.option.chinese":"Chinese","recordSearch.form.option.filipino":"Filipino","recordSearch.form.option.part.hawaiian":"Part Hawaiian","recordSearch.form.option.native.american":"Native American","recordSearch.form.option.chamorro":"Chamorro","recordSearch.form.option.eskimo":"Eskimo","recordSearch.form.option.hawaiian":"Hawaiian","recordSearch.form.option.mexican":"Mexican","recordSearch.form.option.polynesian":"Polynesian","recordSearch.form.option.puerto.rican":"Puerto Rican","recordSearch.form.option.korean":"Korean","recordSearch.form.option.mixed":"Mixed","recordSearch.form.option.alaskan.native":"Alaskan Native","recordSearch.fieldDisclaimer.title":"Sensitive Terms and Content","recordSearch.fieldDisclaimer.body":"The language and content used on the FamilySearch records have been copied directly as they were documented by the creators of the historical records. The content is neither created nor endorsed by FamilySearch.","recordSearch.fieldDisclaimer.doNotShowAgain":"Don\'t show this again.","recordSearch.raceDisclaimer":"The language and content in historical records like this are displayed as documented by the original creators and are not endorsed by FamilySearch.","recordSearch.form.chip.groupName":"Image Group Number (DGS)","recordSearch.form.chip.groupName.aria":"Add Image Group Number (DGS) to the search form.","recordSearch.form.chip.place":"Place","recordSearch.form.chip.place.aria":"Add Place to the search form.","recordSearch.form.chip.surnames":"Surnames","recordSearch.form.chip.surname.aria":"Add a Surname to the search form.","recordSearch.form.title.chip.":"Titles","recordSearch.form.chip.title.aria":"Add a title to the search form.","recordSearch.form.author.chip.":"Author","recordSearch.form.chip.author.aria":"Add an Author to the search form.","recordSearch.form.subject.chip.":"Subjects","recordSearch.form.chip.subject.aria":"Add a Subject to the search form.","recordSearch.form.keywords.chip.":"Keywords","recordSearch.form.chip.keywords.aria":"Add KeyWords to the search form.","recordSearch.form.group.catalog.searchBy":"Search By","recordSearch.form.chip.callNumber":"Call Number","recordSearch.form.chip.callNumber.aria":"Add a Call Number to the search form.","recordSearch.form.group.catalog.searchFor":"Search For","recordSearch.form.label.author":"Author","recordSearch.form.label.callNumber":"Call Number","recordSearch.form.label.groupName":"Image Group Number (DGS)","recordSearch.form.label.keywords":"Keywords","recordSearch.form.label.place":"Place","recordSearch.form.label.subject":"Subjects","recordSearch.form.label.title":"Title","recordSearch.form.group.catalog.availability":"Availability","recordSearch.form.group.catalog.availability.online":"Online","recordSearch.form.group.catalog.familySearchCenter":"FamilySearch Center","recordSearch.results.mobileCatalogHead":"Subject, Search Terms","recordSearch.form.validation.yearRangeLimit500":"The range should be less than 500 years.","recordSearch.results.links":"Links","recordSearch.form.chip.year.aria":"Add Year to the search form.","recordSearch.form.label.fullName":"Name","recordSearch.form.validation.eventType.any":"Any","recordSearch.form.validation.eventType.birth":"Birth","recordSearch.form.validation.eventType.death":"Death","recordSearch.form.validation.eventType.marriage":"Marriage","recordSearch.form.validation.eventType.other":"Other","recordSearch.form.validation.eventType.residence":"Residence","recordSearch.form.label.text":"Keywords","recordSearch.results.keywordMatch":"Matches ({matchCount})","recordSearch.results.imageThumbnail":"Image Thumbnail","recordSearch.fullText.startYourSearch.title":"Start your search","recordSearch.form.label.plainTextPlace":"Place","recordSearch.fullText.startYourSearch.placeholder":"Ex: \\"Jane Lee\\" or Car*","recordSearch.fullText.startYourSearch.warning":"US Land and Probate Records and Mexico Notary Records are currently the only available collections to browse.","recordSearch.form.chip.year":"Year Range","recordSearch.error.sorryWeEncounteredAProblem":"Sorry, we encountered a problem.","recordSearch.results.fullTextWildcardYouCannotStartAValueOrWordWithAWildcard.body":"The question mark and asterisk are wildcard symbols and cannot be used as the first letter of a search term. Please modify your search and try again.","recordSearch.results.fullTextTermModifiersMustBeConnectedToAValue.body":"The plus and minus symbols are for including and excluding search terms. Please add a word you would like to include or exclude and try your search again.","recordSearch.results.fullTextWildcardYouCannotAddAWildcardInsideOfQuotes.body":"The question mark and asterisk are wildcard symbols and cannot be used within quotations. Please modify your search and try again.","recordSearch.results.fullTextWildcardTooManyWildcardsInQuery.body":"Invalid use of wildcard. Too many wildcards in query.","recordSearch.results.fullTextInvalidQueryTooManySearchTerms.body":"You have too many search terms for an effective search. Please try your search with fewer words.","recordSearch.fullText.searchTips.title":"Search Tips","recordSearch.fullText.searchTips.description":"To reduce the number of search results, use the filters in the upper left under the Results number. You can also include the following in your searches:","recordSearch.fullText.searchTips.example":"Example","recordSearch.fullText.searchTips.list.findExactWordOrPhrase":"Find an exact word or phrase","recordSearch.fullText.searchTips.list.findExactWordOrPhrase.hint":"Use quotation marks","recordSearch.fullText.searchTips.list.findExactWordOrPhrase.example":"\\"Henry Jones\\"","recordSearch,fullText.searchTips.list.includeSpecificWordOrPhrase":"Include a specific word or phrase","recordSearch,fullText.searchTips.list.includeSpecificWordOrPhrase.hint":"Use the + symbol","recordSearch,fullText.searchTips.list.includeSpecificWordOrPhrase.example":"+Judith","recordSearch.fullText.searchTips.list.excludeSpecificWordOrPhrase":"Exclude a specific word or phrase","recordSearch.fullText.searchTips.list.excludeSpecificWordOrPhrase.hint,":"Use the - symbol","recordSearch.fullText.searchTips.list.excludeSpecificWordOrPhrase.example":"-John","recordSearch.fullText.searchTips.list.findDifferentSpellings":"Find different spellings","recordSearch.fullText.searchTips.list.findDifferentSpellings.hint":"Use the ? symbol","recordSearch.fullText.searchTips.list.findDifferentSpellings.example":"Jens?n will return Jensen and Jenson","recordSearch.fullText.searchTips.list.findDifferentFormsOfWord":"Find different forms of a root word","recordSearch.fullText.searchTips.list.findDifferentFormsOfWord.hint":"Use the * symbol","recordSearch.fullText.searchTips.list.findDifferentFormsOfWord.example":"Car* will match car, cars, carriage, carpenter, etc.","recordSearch.form.label.thisYear":"this year","recordSearch.form.label.plusMinus1":"+/- 1 year","recordSearch.form.label.plusMinus2":"+/- 2 years","recordSearch.form.label.plusMinus5":"+/- 5 years","recordSearch.form.label.plusMinus10":"+/- 10 years","recordSearch.form.label.qYearToFrom":"Any Year","recordSearch.form.label.exactPlusMinus":"Exact +/-","recordSearch.form.label.exactTo":"Exact to","recordSearch.form.label.memKeywords":"Keywords","recordSearch.results.view.genealogyDetails":"View genealogy details.","recordSearch.form.label.fromYear":"From Year","recordSearch.form.label.toYear":"To Year","recordSearch.results.searchTermsHead":"Search Terms","recordSearch.results.subjectHead":"Subject","recordSearch.results.authorHead":"Author","recordSearch.results.titleHead":"Title","recordSearch.results.error":"Error","recordSearch.results.catalogTableExpander.error":"We are unable to display search results due to a technical error. Please refresh the page or try again later","recordSearch.form.applyFilters":"Apply","recordSearch.form.editYourSearch":"Edit Your Search","recordSearch.form.editSearch":"Edit Search","recordSearch.results.persons":"Persons","recordSearch.results.places.label":"Places","recordSearch.results.years.label":"Years","recordSearch.results.noPersons.label":"No persons found","recordSearch.results.noPlaces.label":"No places found","recordSearch.results.noYears.label":"No years found","recordSearch.results.fact-view.toggle.label":"Fact View","recordSearch.form.side.filterAdd":"Add More","recordSearch.form.side.filterClear":"Clear Filters","recordSearch.filters":"Filters","recordSearch.filters.showLessNum":"Show Less","recordSearch.results.fact-view.toggle.tooltipLabel":"Toggle view to show facts for each record","search.catalog.autosuggest.placeholder":"Search for a specific center","search.catalog.autosuggest.label":"Select a Center","recordSearch.form.allCollections":"View all tree collections","recordSearch.results.fullTextMismatchedQuotes.body":"Your query contains mismatched quotes. Please make sure quotations include an opening and closing mark and try your search again.","recordSearch.form.simple.label.surnames":"Surnames","recordSearch.form.validation.maxCharLimit":"Input must be less than 128 characters","relationship-viewer.error-getting-relationship-description":"We encountered an error trying to calculate this relationship. Please try again later.","relationship-viewer.user-has-not-opted-in-description":"This person does not have his or her Relationship Viewing turned on under the Permissions Settings to allow you to see if you are related. You may be able to contact the person through email.","relationship-viewer.error-getting-relationship-title":"Error","relationship-viewer.no-relationship-found-description":"We were unable to find a relationship at the moment. <0>Learn more</0>","relationship-viewer.no-spouse-placeholder-label":"No Spouse","relationship-viewer.relationship-loading-title":"Calculating Relationship","relationship-viewer.relationship-title":"Relationship to {toPersonName}","relationship-viewer.relationship-to-previous-person.CHILD.label":"Child","relationship-viewer.relationship-to-previous-person.CLOSE_RELATIONSHIP.label":"Close relative","relationship-viewer.relationship-to-previous-person.DAUGHTER.label":"Daughter","relationship-viewer.relationship-to-previous-person.FATHER.label":"Father","relationship-viewer.relationship-to-previous-person.HUSBAND.label":"Husband","relationship-viewer.relationship-to-previous-person.ME.label":"Me","relationship-viewer.relationship-to-previous-person.MOTHER.label":"Mother","relationship-viewer.relationship-to-previous-person.PARENT.label":"Parent","relationship-viewer.relationship-to-previous-person.SON.label":"Son","relationship-viewer.relationship-to-previous-person.WIFE.label":"Wife","relationship-viewer.relationship-to-previous-person.common.ancestor":"Common Ancestor","relationship-viewer.relationship-to-previous-person.CHILD-of.label":"Child of {previousName}","relationship-viewer.relationship-to-previous-person.CLOSE_RELATIONSHIP-of.label":"Close relative of {previousName}","relationship-viewer.relationship-to-previous-person.DAUGHTER-of.label":"Daughter of {previousName}","relationship-viewer.relationship-to-previous-person.FATHER-of.label":"Father of {previousName}","relationship-viewer.relationship-to-previous-person.HUSBAND-of.label":"Husband of {previousName}","relationship-viewer.relationship-to-previous-person.MOTHER-of.label":"Mother of {previousName}","relationship-viewer.relationship-to-previous-person.PARENT-of.label":"Parent of {previousName}","relationship-viewer.relationship-to-previous-person.SON-of.label":"Son of {previousName}","relationship-viewer.relationship-to-previous-person.WIFE-of.label":"Wife of {previousName}","relationship-viewer.relationship-to-previous-person.SPOUSE-of.label":"Spouse of {previousName}","relationship-viewer.show-spouses-button.label":"Show Spouses","relationship-viewer.hide-spouses-button.label":"Hide Spouses","relationship-viewer.view-relationship-action":"View Relationship","relationship-viewer.relationship-unknown":"Relationship Unknown","relationship-viewer.you":"You","relationship-viewer.shared-relative":"Shared Relative","relationship-viewer.add-to-family-tree":"Add To Your Family Tree","report-abuse-overlay.creation.success":"Thank you for reporting this abuse. Incident number {caseNumber} was created and sent to FamilySearch Support for review. If needed, you will be contacted by email or phone.","report-abuse-overlay.creation.error":"Unable to create report of abuse, please try again later.","report-abuse-overlay.email.required":"Valid Email or Phone Number required.","report-abuse-overlay.type-of-abuse.label":"Type of Abuse","report-abuse-overlay.report.label":"Report","report-abuse-overlay.report.placeholder":"Please explain your concern.","report-abuse-overlay.email.label":"Email","report-abuse-overlay.email.placeholder":"Enter an email.","report-abuse-overlay.phone-number.label":"Phone Number","report-abuse-overlay.phone-number.placeholder":"Enter your phone number","report-abuse-overlay.email-phone-number.required":"An email or a phone number is required.","report-abuse-overlay.dialog.body":"You are about to report abuse of our Code of Conduct, found in the <0>Terms of Use</0> or <1>Memories Upload Guidelines and Policies</1>. All reports are confidential. After this report has been reviewed, you may be contacted.","report-abuse-overlay.spam-advertising.option.label":"Spam or Advertising","report-abuse-overlay.political.option.label":"Political Statement","report-abuse-overlay.harassment.option.label":"Harassment","report-abuse-overlay.copyright.option.label":"Copyright Infringement","report-abuse-overlay.other.option.label":"Other","report-abuse-overlay.offensive.option.label":"Offensive","report-abuse-overlay.error-reportAbuse-send":"Unable to send abuse report.","report-abuse-overlay.description-required":"Description of abuse required.","research-help.BORN_AFTER_DIED.description":"The death date is earlier than the birthdate.","research-help.BORN_AFTER_DIED.title":"Death before Birthdate","research-help.BORN_AFTER_FATHER_DIED.description":"The child\'s birth year is later than the father\'s death year.","research-help.BORN_AFTER_FATHER_DIED.title":"Birth after Father\'s Death","research-help.BORN_AFTER_MARRIED.description":"The birth year is after the marriage year.","research-help.BORN_AFTER_MARRIED.title":"Born after Married","research-help.BORN_AFTER_MOTHER_COULD_BEAR_CHILDREN.description":"The child\'s birth year is listed as occurring after the mother turned 52 (which is normally after child-bearing years).","research-help.BORN_AFTER_MOTHER_COULD_BEAR_CHILDREN.title":"Birth after Mother\'s Child-Bearing Years","research-help.BORN_AFTER_MOTHER_DIED.description":"The child\'s birth year is later than the mother\'s death year.","research-help.BORN_AFTER_MOTHER_DIED.title":"Birth after Mother\'s Death","research-help.BORN_AFTER_SPOUSE_DIED.description":"The birth year is after the spouse\'s death year.","research-help.BORN_AFTER_SPOUSE_DIED.title":"Born after Spouse\'s Death","research-help.BORN_BEFORE_FATHER.description":"The child\'s birth year is listed before the father\'s birth year.","research-help.BORN_BEFORE_FATHER.title":"Child Born before Father","research-help.BORN_BEFORE_FATHER_COULD_FATHER_CHILDREN.description":"The child\'s birth year is listed as occurring before the father was at least 10.","research-help.BORN_BEFORE_FATHER_COULD_FATHER_CHILDREN.title":"Birth before Father Could Have Children","research-help.BORN_BEFORE_MOTHER.description":"The child\'s birth year is listed before the mother\'s birth year.","research-help.BORN_BEFORE_MOTHER.title":"Child Born before Mother","research-help.BORN_BEFORE_MOTHER_COULD_BEAR_CHILDREN.description":"The child\'s birth year is listed as occurring before the mother was at least 10.","research-help.BORN_BEFORE_MOTHER_COULD_BEAR_CHILDREN.title":"Birth before Mother Could Have Children","research-help.CHRISTENED_AFTER_DIED.description":"The death date is earlier than the christening date.","research-help.CHRISTENED_AFTER_DIED.title":"Death before Christening Date","research-help.CHRISTENED_BEFORE_FATHER_BORN.description":"The child\'s christening year is listed before the father\'s birth year.","research-help.CHRISTENED_BEFORE_FATHER_BORN.title":"Child Christened before Father","research-help.CHRISTENED_BEFORE_FATHER_COULD_FATHER_CHILDREN.description":"The child\'s christening year is listed as occurring before the father was at least 10.","research-help.CHRISTENED_BEFORE_FATHER_COULD_FATHER_CHILDREN.title":"Christening before Father Could Have Children","research-help.CHRISTENED_BEFORE_MOTHER_BORN.description":"The child\'s christening year is listed before the mother\'s birth year.","research-help.CHRISTENED_BEFORE_MOTHER_BORN.title":"Child Christening before Mother","research-help.CHRISTENED_BEFORE_MOTHER_COULD_BEAR_CHILDREN.description":"The child\'s christening year is listed as occurring before the mother was at least 10.","research-help.CHRISTENED_BEFORE_MOTHER_COULD_BEAR_CHILDREN.title":"Christened before Mother Could Have Children","research-help.COUPLE_MAY_HAVE_CHILDREN.description":"There is evidence of the marriage but no children are listed.","research-help.COUPLE_MAY_HAVE_CHILDREN.title":"Couple May Have Children","research-help.COUPLE_NEVER_HAD_CHILDREN_FACT_YET_HAS_CHILDREN.description":"This couple has children but has a fact listed as \\"No Children.\\"","research-help.COUPLE_NEVER_HAD_CHILDREN_FACT_YET_HAS_CHILDREN.title":"Children Mismatch","research-help.DIED_BEFORE_FATHER_BORN.description":"The child\'s death year is before the father\'s birth year.","research-help.DIED_BEFORE_FATHER_BORN.title":"Child Death before Father","research-help.DIED_BEFORE_MARRIED.description":"The death year is earlier than the marriage year.","research-help.DIED_BEFORE_MARRIED.title":"Death Year before Marriage","research-help.DIED_BEFORE_MOTHER_BORN.description":"The child\'s death year is before the mother\'s birth year.","research-help.DIED_BEFORE_MOTHER_BORN.title":"Child Death before Mother","research-help.DIED_BEFORE_SPOUSE_BORN.description":"The death year is earlier than the birth year.","research-help.DIED_BEFORE_SPOUSE_BORN.title":"Death before Spouse Was Born","research-help.DIED_TOO_YOUNG_TO_BE_MARRIED_OR_HAVE_CHILDREN.description":"The person has marriage or children information, but the death year shows the person as 8 or less.","research-help.DIED_TOO_YOUNG_TO_BE_MARRIED_OR_HAVE_CHILDREN.title":"Died Too Young for Marriage or Children","research-help.INVALID_CHARACTERS_IN_NAME.description":"The Vital name contains invalid characters.","research-help.INVALID_CHARACTERS_IN_NAME.title":"Invalid Characters","research-help.INVALID_REPEATING_CHARACTERS_IN_NAME.description":"The Vital name contains invalid repeating characters.","research-help.INVALID_REPEATING_CHARACTERS_IN_NAME.title":"Invalid Characters","research-help.LIVED_TOO_LONG.description":"The death year is over 120 years after the birth year.","research-help.LIVED_TOO_LONG.title":"Person over 120 Years Old","research-help.MARRIED_TOO_YOUNG.description":"The marriage year for one spouse shows the person as less than 12 years of age.","research-help.MARRIED_TOO_YOUNG.title":"Married before 12","research-help.MISMATCHING_NAME_LANG.title":"Problem with Name Language","research-help.MISMATCHING_NAME_LANG.description":"The characters in the name field do not match the language template.","research-help.MULTIPLE_SCRIPTS_IN_NAME.title":"Character Mismatch in Name Fields","research-help.MULTIPLE_SCRIPTS_IN_NAME.description":"Not all characters are the same script.","research-help.MISSING_ANNULMENT_DATE_STANDARD.description":"This couple does not have a standardized annulment date.","research-help.MISSING_ANNULMENT_DATE_STANDARD.title":"Missing Standardized Annulment Date","research-help.MISSING_ANNULMENT_PLACE_STANDARD.description":"This couple does not have a standardized annulment place.","research-help.MISSING_ANNULMENT_PLACE_STANDARD.title":"Missing Standardized Annulment Place","research-help.MISSING_BIRTH_DATE_STANDARD.description":"This person does not have a standardized birth date.","research-help.MISSING_BIRTH_DATE_STANDARD.title":"Missing Standardized Birth Date","research-help.MISSING_BIRTH_PLACE_STANDARD.description":"This person does not have a standardized birthplace.","research-help.MISSING_BIRTH_PLACE_STANDARD.title":"Missing Standardized Birthplace","research-help.MISSING_BURIAL_DATE_STANDARD.description":"This person does not have a standardized burial date.","research-help.MISSING_BURIAL_DATE_STANDARD.title":"Missing Standardized Burial Date","research-help.MISSING_BURIAL_PLACE_STANDARD.description":"This person does not have a standardized burial place.","research-help.MISSING_BURIAL_PLACE_STANDARD.title":"Missing Standardized Burial Place","research-help.MISSING_CHRISTENING_DATE_STANDARD.description":"This person does not have a standardized christening date.","research-help.MISSING_CHRISTENING_DATE_STANDARD.title":"Missing Standardized Christening Date","research-help.MISSING_CHRISTENING_PLACE_STANDARD.description":"This person does not have a standardized christening place.","research-help.MISSING_CHRISTENING_PLACE_STANDARD.title":"Missing Standardized Christening Place","research-help.MISSING_COMMON_LAW_MARRIAGE_DATE_STANDARD.description":"This couple does not have a standardized common-law marriage date.","research-help.MISSING_COMMON_LAW_MARRIAGE_DATE_STANDARD.title":"Missing Standardized Common-Law Marriage Date","research-help.MISSING_COMMON_LAW_MARRIAGE_PLACE_STANDARD.description":"This couple does not have a standardized common-law marriage place.","research-help.MISSING_COMMON_LAW_MARRIAGE_PLACE_STANDARD.title":"Missing Standardized Common-Law Marriage Place","research-help.MISSING_DEATH_DATE_STANDARD.description":"This person does not have a standardized death date.","research-help.MISSING_DEATH_DATE_STANDARD.title":"Missing Standardized Death Date","research-help.MISSING_DEATH_PLACE_STANDARD.description":"This person does not have a standardized death place.","research-help.MISSING_DEATH_PLACE_STANDARD.title":"Missing Standardized Death Place","research-help.MISSING_DIVORCE_DATE_STANDARD.description":"This couple does not have a standardized divorce date.","research-help.MISSING_DIVORCE_DATE_STANDARD.title":"Missing Standardized Divorce Date","research-help.MISSING_DIVORCE_PLACE_STANDARD.description":"This couple does not have a standardized divorce place.","research-help.MISSING_DIVORCE_PLACE_STANDARD.title":"Missing Standardized Divorce Place","research-help.MISSING_LIVED_TOGETHER_DATE_STANDARD.description":"This couple does not have a standardized date when they lived together.","research-help.MISSING_LIVED_TOGETHER_DATE_STANDARD.title":"Missing Standardized Date When Couple Lived Together","research-help.MISSING_LIVED_TOGETHER_PLACE_STANDARD.description":"This couple does not have a standardized place when they lived together.","research-help.MISSING_LIVED_TOGETHER_PLACE_STANDARD.title":"Missing Standardized Place When Couple Lived Together","research-help.MISSING_MARRIAGE_DATE_STANDARD.description":"This couple does not have a standardized marriage date.","research-help.MISSING_MARRIAGE_DATE_STANDARD.title":"Missing Standardized Marriage Date","research-help.MISSING_MARRIAGE_PLACE_STANDARD.description":"This couple does not have a standardized marriage place.","research-help.MISSING_MARRIAGE_PLACE_STANDARD.title":"Missing Standardized Marriage Place","research-help.MISSING_VITAL_EVENT_YEAR.description":"This person does not have at least one vital event that contains a year.","research-help.MISSING_VITAL_EVENT_YEAR.title":"Missing Vital Event","research-help.NO_CHILDREN_FACT_YET_HAS_CHILDREN.description":"This person has children but has a fact listed as \\"No Children.\\"","research-help.NO_CHILDREN_FACT_YET_HAS_CHILDREN.title":"Children Mismatch","research-help.NO_COUPLE_RELATIONSHIPS_CONTRADICTION.description":"This person has a couple relationship but has a fact listed as \\"No Couple Relationships.\\"","research-help.NO_COUPLE_RELATIONSHIPS_CONTRADICTION.title":"Couple Relationships Mismatch","research-help.NO_SOURCES_ATTACHED.description":"This person has no sources attached to his or her information.","research-help.NO_SOURCES_ATTACHED.title":"No Sources Attached","research-help.PERSON_MAY_HAVE_ANOTHER_SPOUSE.description":"There is no evidence of another marriage, but this person lived long enough after the last spouse passed away to marry again.","research-help.PERSON_MAY_HAVE_ANOTHER_SPOUSE.title":"Person May Have Another Spouse","research-help.PERSON_MAY_HAVE_CHILDREN.description":"The person is 15 or older but has no spouse or children listed.","research-help.PERSON_MAY_HAVE_CHILDREN.title":"Person May Have Children","research-help.POSSIBLE_CHILD_GAP_AT_END.description":"The last child was born 3 or more years before the mother turned 40.","research-help.POSSIBLE_CHILD_GAP_AT_END.title":"Possible Missing Child","research-help.POSSIBLE_CHILD_GAP_IN_MIDDLE.description":"There is a gap of 3 or more years between the birth of one child and the next sibling.","research-help.POSSIBLE_CHILD_GAP_IN_MIDDLE.title":"Possible Missing Child","research-help.POSSIBLE_DUPLICATE_CHILD.title":"Possible Duplicate Child","research-help.POSSIBLE_DUPLICATE_PERSON.title":"Possible Duplicate","research-help.POSSIBLE_DUPLICATE_SPOUSE.title":"Possible Duplicate Spouse","research-help.STILLBORN_YET_LIVED.description":"This person is marked as stillborn but lived for more than 1 year.","research-help.STILLBORN_YET_LIVED.title":"Stillborn Problem","research-help.TOO_OLD_TO_BE_LIVING.description":"The birthdate is over 120 years ago.","research-help.TOO_OLD_TO_BE_LIVING.title":"Person Is Too Old to Be Living","research-help.UNKNOWN_GENDER.description":"Male or female must be specified","research-help.UNKNOWN_GENDER.title":"Male or Female Is Required","research-help.dismiss-data-problem.field.placeholder":"Explain why you want to dismiss this data problem.","research-help.dismiss-data-problem.field.title":"Reason to Dismiss This Problem","research-help.dismiss-research-suggestion.field.placeholder":"Explain why you want to dismiss this suggestion.","research-help.dismiss-research-suggestion.field.title":"Reason to Dismiss This Suggestion","research-help.dismiss.button":"Dismiss","research-help.display-reason-statement.label":"Reason this was dismissed:","research-help.general-error.description":"Something went wrong. Please try again later.","research-help.not-a-match.header":"Not a Match","research-help.may-be-a-match.header":"May Be a Match","research-help.not-a-match.reason.title":"Reason These People Are Not a Match","research-help.not-a-match.reason.placeholder":"Explain why these people are not a match.","research-help.may-be-a-match.reason.title":"Reason This Information is Correct","research-help.may-be-a-match.reason.placeholder":"Enter the reason you believe these people may be a match.","research-help.data-problems.header":"Data Problems","research-help.data-problem.header":"Data Problem","research-help.record-hint.header":"Record Hint","research-help.record-hints.header":"Record Hints","research-help.indicators.show-all-amt":"Show All ({amt})","research-help.research-suggestions.header":"Research Suggestions","research-help.research-suggestion.header":"Research Suggestion","research-help.review-merge.action":"Review Merge","research-help.go-to-person.action":"Go to Person","research-help.go-to-child.action":"Go to Child","research-help.go-to-spouse.action":"Go to Spouse","research-help.add-sex.action":"Add Sex","research-help.standardize-date.action":"Standardize Date","research-help.standardize-place.action":"Standardize Place","research-help.edit-name.action":"Edit Name","research-help.search-records.action":"Search Records","research-help.dismiss.action":"Dismiss","research-help.undo.action":"Undo","research-help.dismiss.data-problem.header":"Dismiss Data Problem","research-help.dismiss.research-suggestion.header":"Dismiss Research Suggestion","research-help.parents.label":"Parents","research-help.open-item.aria-label":"Open the {type, select, DATA_QUALITY {data problem} RESEARCH_SUGGESTION {research suggestion} RECORD_HINT {record hint} other {}} {title}.","research-help.father.label":"Father:","research-help.mother.label":"Mother:","research-help.child.label":"Child:","research-help.spouse.label":"Spouse:","research-help.parent.label":"Parent:","research-help.birth.label":"Birth:","research-help.christening.label":"Christening:","research-help.death.label":"Death:","research-help.burial.label":"Burial:","research-help.marriage.label":"Marriage:","research-help.other.label":"Other:","research-help.view-marriage-events.action":"View Marriage Events","research-help.child.heading":"Child","research-help.father.heading":"Father","research-help.mother.heading":"Mother","research-help.spouse.heading":"Spouse","research-help.reoccurring-person.title":"Reoccurring Person","research-help.reoccurring-person.description":"This person appears in this pedigree in more than one location.","research-help.looping-pedigree.title":"Looping Pedigree","research-help.looping-pedigree.description":"This person has a child that is also his or her parent.","research-help.learn-more.link":"Learn More","research-help.weak-hint.label":"Weaker Hint","research-help.weak-hint-tool-tip.label":"This record is a weaker match and may not be about your ancestor. To remove these types of hints, turn off expanded hints in your account settings.","research-help.quality-score-improvement.header":"Quality Score Improvement","globalAlert":"We are currently experiencing technical difficulties. We\u2019re working on the problem and hope to have it fixed soon. We apologize for the inconvenience.","globalPartialAlert":"Some features on FamilySearch may be unavailable as we make improvements to the site starting {weekday}, {month} {ordinalDayOfMonth} at {time} (UTC{utcPlusMinus}{utcOffset}) and lasting about {duration}.  We apologize for the inconvenience.","globalUnavailableAlert":"FamilySearch will be unavailable as we make improvements to the site starting {weekday}, {month} {ordinalDayOfMonth} at {time} (UTC{utcPlusMinus}{utcOffset}) and lasting about {duration}.  We apologize for the inconvenience.","root.main.content":"Main Content","skip.to.content":"Skip to Main Content","error-page.body":"We are sorry, but the page you are trying to access has an error.","error-page.option-home":"Return to the home page","error-page.title":"Internal Server Error","not-found.body":"We can help you search literally billions of records, but we can\'t seem to find the page you\'re looking for.","not-found.header":"Well, this is unexpected...","not-found.option-help-center":"Visit the Help Center","not-found.option-other":"Or choose a new activity from the main site menu.","not-found.option-records":"Find Historical Records","not-found.option-reload":"Reload the Page","not-found.option-site-map":"View the Site Map","not-found.title":"Page Not Found","not-found.whats-next":"What\'s Next","personal-data.option-blog":"Visit FamilySearch Blog","personal-data.page-title":"Feature Unavailable","personal-data.title":"This feature is not available in your location.","social.linkedin.label":"Linkedin","social.facebook.label":"Facebook","social.instagram.label":"Instagram","social.x.label":"X","social.youtube.label":"YouTube","social.facebook-messenger.label":"Messenger","social.whatsapp.label":"WhatsApp","social.wechat.label":"WeChat","social.line.label":"Line","social.kakao-talk.label":"Kakao Talk","social.kakao-story.label":"Kakao Story","social.download.action":"Download","social.copy-link.action":"Copy Link","social.share.action":"Share","social.share.qrCodeLabel":"QR code of the link to this page","social.copy-confirmation":"Link copied to clipboard","social.share-menu":"Share Menu","social.whatsApp.label":"WhatsApp","attached-to.heading.table.reason-attached":"Reason Attached","attached-to":"Attached To","button.restore":"Restore","change.heading.created":"Created","change.heading.date":"Date","change.heading.title":"Title","conclusion-type.affiliation":"Affiliation","conclusion-type.alternatename":"Alternate Name","conclusion-type.annulment":"Annulment","conclusion-type.apprenticeship":"Apprenticeship","conclusion-type.barmitzvah":"Bar Mitzvah","conclusion-type.basmitzvah":"Bat Mitzvah","conclusion-type.batmitzvah":"Bat Mitzvah","conclusion-type.birth":"Birth","conclusion-type.burial":"Burial","conclusion-type.castename":"Caste Name","conclusion-type.christening":"Christening","conclusion-type.clanname":"Clan Name","conclusion-type.commonlawmarriage":"Common Law Marriage","conclusion-type.cremation":"Cremation","conclusion-type.death":"Death","conclusion-type.divorce":"Divorce","conclusion-type.emancipation":"Emancipation","conclusion-type.employment":"Employment","conclusion-type.enslavement":"Enslavement","conclusion-type.generation":"Lineage Gap","conclusion-type.godparenthood":"Godparent","conclusion-type.gender":"Sex","conclusion-type.household":"Household","conclusion-type.immigration":"Immigration","conclusion-type.lifesketch":"Life Sketch","conclusion-type.livedtogether":"Lived Together","conclusion-type.marriage":"Marriage","conclusion-type.militaryservice":"Military Service","conclusion-type.name":"Name","conclusion-type.nationalid":"National ID","conclusion-type.nationality":"Nationality","conclusion-type.naturalization":"Naturalization","conclusion-type.neighborhood":"Neighbor","conclusion-type.nobilitytitle":"Title of Nobility","conclusion-type.nochildren":"No Children","conclusion-type.nocouplerelationships":"No Couple Relationships","conclusion-type.occupation":"Occupation","conclusion-type.otherevent":"Custom Event","conclusion-type.otherfact":"Custom Fact","conclusion-type.physicaldescription":"Physical Description","conclusion-type.race":"Race","conclusion-type.relation":"Relative","conclusion-type.religiousaffiliation":"Religious Affiliation","conclusion-type.residence":"Residence","conclusion-type.stillbirth":"Stillborn","conclusion-type.tribename":"Tribe Name","filters-drawer.choice-chip.custom":"Custom","filters-drawer.choice-chip.date":"Date","filters-drawer.choice-chip.family-search":"FamilySearch","filters-drawer.choice-chip.memory":"Memory","filters-drawer.choice-chip.user-created":"User Created","filters-drawer.heading.options":"Options","filters-drawer.info.support.drag":"Custom supports drag and drop","filters-drawer.label.ascending":"Ascending","filters-drawer.label.descending":"Descending","filters-drawer.label.filter":"Filter","filters-drawer.label.hide":"Hide","filters-drawer.label.show":"Show","filters-drawer.label.sort":"Sort","filters-drawer.label.source-types":"Source Types","heading.date":"Date","heading.describe.record":"Describe The Record (Notes)","heading.id-number":"ID Number","heading.indexed-information":"Indexed Information","heading.reason-source-attached":"Reason This Source Is Attached:","heading.source-title":"Source Title","heading.source-type":"Source Type","heading.tag":"Tag","heading.tag-events":"Select the Information or Events in this Source","heading.title":"Title","heading.web-page-link":"Web Page (Link to the Record)","heading.where-record-found":"Where The Record Is Found (Citation)","label.attached":"Attached","label.child":"Child","label.couple":"Couple","label.current":"Current","label.home":"Home","label.no-entities-attached":"This source is not attached to a Person or Relationship.","label.parent-child":"Parent-Child Relationship","label.parent-female":"Mother","label.parent-male":"Father","label.parents":"Parents","label.person":"Person","label.spouse-female":"Wife","label.spouse-male":"Husband","reason-to-attach.label.explain":"Explain why you attached this source","reason-to-attach.label.reason":"Reason This Source Was Attached","reason-to-detach.label.reason":"Reason to Detach Source","reason-to-detach.explain":"Explain why you detached this source","source-attach.limit.reached.heading":"Source Limit Reached","source-attach.limit.reached":"A person can only have 200 sources attached to them. You will need to detach a source to attach a new one.","source-box.action.create-source":"Create Source","source-button.copy-to-sourcebox":"Copy To Source Box","source-button.detach":"Detach","source-button.edit-tags":"Edit Tags","source-button.edit":"Edit","source-button.go-to-sourcebox":"Go To My Source Box","source-button.remove":"Remove","source-button.report-abuse":"Report Abuse","source-button.review-attachments":"Review Attachments","source-button.see-changes":"See Changes","source-button.tag-sources":"Tag Sources","source-button.tag":"Tag","source-button.tags":"Tags","source-button.view":"View","source-edit-overlay.button.remove-memory-status":"Remove","source-edit-overlay.button.remove-memory":"Remove Memory","source-edit-overlay.button.restore-memory":"Restore Memory","source-edit-overlay.button.select-from-gallery":"Select From Gallery","source-edit-overlay.button.upload-memory":"Upload Memory","source-edit-overlay.example.title":"Example: England, Death Certificate of Hugh S. Smith - (1832-1912)","source-edit-overlay.heading.add.source":"Add Source","source-edit-overlay.heading.add-to-sourcebox":"Add Source to My Source Box","source-edit-overlay.heading.citation":"Citation","source-edit-overlay.heading.event.date":"Event Date","source-edit-overlay.heading.reason-attach-source":"Reason to Attach Source","source-edit-overlay.heading.reason-change-source":"Reason to Change Source","source-edit-overlay.selection.add-memory":"Add a Memory","source-edit-overlay.selection.web-page-url":"Web Page URL","source-edit-overlay.validate.citation-length":"The Citation cannot be more than {maxCitationLength} characters in length.","source-edit-overlay.validate.invalid-url":"The web page url is not valid.","source-edit-overlay.validate.notes-length":"Record notes cannot be more than {maxNoteLength} characters in length.","source-edit-overlay.validate.reason-length":"The reason cannot be more than {maxReasonLength} characters in length.","source-edit-overlay.validate.title-angle-brackets":"Invalid character. Angle brackets are not allowed in the source title.","source-edit-overlay.validate.title-length":"The required source title must contain between {minTitleLength} and {maxTitleLength} characters.","source-edit-overlay.validate.title-required":"A source title is required.","source-edit-overlay.validate.url-length":"The URL can have up to {maxUrlLength} characters.","source-list-customizable.tag":"Tag","source-list.add-from-source-box":"Attach From Source Box","source-list.add-new-memory-source":"Add New Memory Source","source-list.add-new-source":"Add New Source","source-list.add-source":"+ Add Source","source-list.add-tag.button":"+ Add Tag","source-list.detail-view":"Detail View","source-list.has-no-indexed-info":"Sorry, no indexed information for this source is currently available.","source-list.not-indexed-yet":"This record has not yet been indexed.","source-list.sources":"Sources","source-list.view-original-document":"View the original document.","source-memory.deleted-by-owner":"This memory was deleted by its owner. You should remove it from this source.","source-memory.duplicate":"This file was previously uploaded. Click the SELECT FROM GALLERY button to attach uploaded memories.","source-memory.marked-private":"Marked as private.","source-memory.status-restricted":"Restricted","source-memory.status-screening":"Screening","source-memory.upload-error":"Memory Upload Failed.","source-other-relationship.relationship":"Relationship","source-other-relationship.apprenticeship":"Apprenticeship","source-other-relationship.master":"Master","source-other-relationship.apprentice":"Apprentice","source-other-relationship.employment":"Employment","source-other-relationship.employer":"Employer","source-other-relationship.employee":"Employee","source-other-relationship.godparent":"Godparent","source-other-relationship.godchild":"Godchild","source-other-relationship.household":"Household","source-other-relationship.head-household":"Head of Household","source-other-relationship.occupant":"Occupant","source-other-relationship.lineage-gap":"Lineage Gap","source-other-relationship.ancestor":"Ancestor","source-other-relationship.neighbor":"Neighbor","source-other-relationship.relative":"Relative","source-other-relationship.slavery":"Slavery","source-other-relationship.slaveholder":"Slaveholder","source-other-relationship.enslaved-person":"Enslaved Person","source-table-row.tooltip.source-attached":"Source attached. Review attachments.","source-select-tag-overlay.all-tagged":"All Events and Facts have been tagged.","source-tag-overlay.add-tag":"Add Tag","source-tag-overlay.alternate-name-type.aka":"Also Known As","source-tag-overlay.alternate-name-type.birth":"Birth Name","source-tag-overlay.alternate-name-type.married":"Married Name","source-tag-overlay.alternate-name-type.nick":"Nickname","source-tag-overlay.delete-tag":"Delete Tag","source-tag-overlay.no-sources-to-tag":"There are no sources available to be tagged.","source-tag-overlay.select-source-to-tag":"Select a Source to Tag","source-tag-overlay.select-tag":"Select Tag","source-tag-overlay.select-button":"Select","source-tag-overlay.select-source-button":"Select Source","source-tag-overlay.source-tagged":"Source Tagged","source-tag-overlay.source-not-tagged":"Source Not Tagged","source-tag-overlay.tag-birth":"Tag Birth","source-tag-overlay.tag-burial":"Tag Burial","source-tag-overlay.tag-christening":"Tag Christening","source-tag-overlay.tag-death":"Tag Death","source-tag-overlay.tag-gender":"Tag Sex","source-tag-overlay.tag-name":"Tag Name","source-tag-overlay.tag-source-for-affiliation":"Tag Source For Affiliation","source-tag-overlay.tag-source-for-alternatename":"Tag Source For Alternate Name","source-tag-overlay.tag-source-for-apprenticeship":"Tag Source For Apprenticeship","source-tag-overlay.tag-source-for-annulment":"Tag Source For Annulment","source-tag-overlay.tag-source-for-barmitzvah":"Tag Source For Bar Mitzvah","source-tag-overlay.tag-source-for-basmitzvah":"Tag Source For Bat Mitzvah","source-tag-overlay.tag-source-for-batmitzvah":"Tag Source For Bat Mitzvah","source-tag-overlay.tag-source-for-birth":"Tag Source For Birth","source-tag-overlay.tag-source-for-burial":"Tag Source For Burial","source-tag-overlay.tag-source-for-castename":"Tag Source For Caste Name","source-tag-overlay.tag-source-for-christening":"Tag Source For Christening","source-tag-overlay.tag-source-for-clanname":"Tag Source For Clan Name","source-tag-overlay.tag-source-for-commonlawmarriage":"Tag Source For Common Law Marriage","source-tag-overlay.tag-source-for-cremation":"Tag Source For Cremation","source-tag-overlay.tag-source-for-death":"Tag Source For Death","source-tag-overlay.tag-source-for-divorce":"Tag Source For Divorce","source-tag-overlay.tag-source-for-emancipation":"Tag Source For Emancipation","source-tag-overlay.tag-source-for-employment":"Tag Source For Employment","source-tag-overlay.tag-source-for-enslavement":"Tag Source For Enslavement","source-tag-overlay.tag-source-for-gender":"Tag Source For Sex","source-tag-overlay.tag-source-for-immigration":"Tag Source For Immigration","source-tag-overlay.tag-source-for-generation":"Tag Source For Lineage Gap","source-tag-overlay.tag-source-for-godparenthood":"Tag Source For Godparent","source-tag-overlay.tag-source-for-household":"Tag Source For Household","source-tag-overlay.tag-source-for-lifesketch":"Tag Source For Life Sketch","source-tag-overlay.tag-source-for-livedtogether":"Tag Source For Lived Together","source-tag-overlay.tag-source-for-marriage":"Tag Source For Marriage","source-tag-overlay.tag-source-for-militaryservice":"Tag Source For Military Service","source-tag-overlay.tag-source-for-name":"Tag Source For Name","source-tag-overlay.tag-source-for-nationalid":"Tag Source For National Id","source-tag-overlay.tag-source-for-nationality":"Tag Source For Nationality","source-tag-overlay.tag-source-for-naturalization":"Tag Source For Naturalization","source-tag-overlay.tag-source-for-neighborhood":"Tag Source For Neighbor","source-tag-overlay.tag-source-for-nobilitytitle":"Tag Source For Title of Nobility","source-tag-overlay.tag-source-for-nochildren":"Tag Source For No Children","source-tag-overlay.tag-source-for-nocouplerelationships":"Tag Source For No Couple Relationships","source-tag-overlay.tag-source-for-occupation":"Tag Source For Occupation","source-tag-overlay.tag-source-for-otherevent":"Tag Source For Custom Event","source-tag-overlay.tag-source-for-otherfact":"Tag Source For Custom Fact","source-tag-overlay.tag-source-for-physicaldescription":"Tag Source For Physical Description","source-tag-overlay.tag-source-for-race":"Tag Source For Race","source-tag-overlay.tag-source-for-relation":"Tag Source For Relative","source-tag-overlay.tag-source-for-religiousaffiliation":"Tag Source For Religious Affiliation","source-tag-overlay.tag-source-for-residence":"Tag Source For Residence","source-tag-overlay.tag-source-for-stillbirth":"Tag Source For Stillborn","source-tag-overlay.tag-source-for-tribename":"Tag Source For Tribe Name","source-tag-overlay.tag-to-affiliation":"Tag To Affiliation","source-tag-overlay.tag-to-alternatename":"Tag To Alternate Name","source-tag-overlay.tag-to-apprenticeship":"Tag To Apprenticeship","source-tag-overlay.tag-to-annulment":"Tag To Annulment","source-tag-overlay.tag-to-barmitzvah":"Tag To Bar Mitzvah","source-tag-overlay.tag-to-basmitzvah":"Tag To Bat Mitzvah","source-tag-overlay.tag-to-batmitzvah":"Tag To Bat Mitzvah","source-tag-overlay.tag-to-birth":"Tag To Birth","source-tag-overlay.tag-to-burial":"Tag To Burial","source-tag-overlay.tag-to-castename":"Tag To Caste Name","source-tag-overlay.tag-to-christening":"Tag To Christening","source-tag-overlay.tag-to-clanname":"Tag To Clan Name","source-tag-overlay.tag-to-commonlawmarriage":"Tag To Common Law Marriage","source-tag-overlay.tag-to-cremation":"Tag To Cremation","source-tag-overlay.tag-to-death":"Tag To Death","source-tag-overlay.tag-to-divorce":"Tag To Divorce","source-tag-overlay.tag-to-emancipation":"Tag To Emancipation","source-tag-overlay.tag-to-employment":"Tag To Employment","source-tag-overlay.tag-to-enslavement":"Tag To Enslavement","source-tag-overlay.tag-to-gender":"Tag To Sex","source-tag-overlay.tag-to-immigration":"Tag To Immigration","source-tag-overlay.tag-to-generation":"Tag To Lineage Gap","source-tag-overlay.tag-to-godparenthood":"Tag To Godparent","source-tag-overlay.tag-to-household":"Tag To Household","source-tag-overlay.tag-to-lifesketch":"Tag To Life Sketch","source-tag-overlay.tag-to-livedtogether":"Tag To Lived Together","source-tag-overlay.tag-to-marriage":"Tag To Marriage","source-tag-overlay.tag-to-militaryservice":"Tag To Military Service","source-tag-overlay.tag-to-name":"Tag To Name","source-tag-overlay.tag-to-nationalid":"Tag To National Id","source-tag-overlay.tag-to-nationality":"Tag To Nationality","source-tag-overlay.tag-to-naturalization":"Tag To Naturalization","source-tag-overlay.tag-to-neighborhood":"Tag To Neighbor","source-tag-overlay.tag-to-nobilitytitle":"Tag To Title of Nobility","source-tag-overlay.tag-to-nochildren":"Tag To No Children","source-tag-overlay.tag-to-nocouplerelationships":"Tag To No Couple Relationships","source-tag-overlay.tag-to-occupation":"Tag To Occupation","source-tag-overlay.tag-to-otherevent":"Tag To Custom Event","source-tag-overlay.tag-to-otherfact":"Tag To Custom Fact","source-tag-overlay.tag-to-physicaldescription":"Tag To Physical Description","source-tag-overlay.tag-to-race":"Tag To Race","source-tag-overlay.tag-to-relation":"Tag To Relative","source-tag-overlay.tag-to-religiousaffiliation":"Tag To Religious Affiliation","source-tag-overlay.tag-to-residence":"Tag To Residence","source-tag-overlay.tag-to-stillbirth":"Tag To Stillborn","source-tag-overlay.tag-to-tribename":"Tag To Tribe Name","source-tag-overlay.remove-tag-to-affiliation":"Remove Tag To Affiliation","source-tag-overlay.remove-tag-to-alternatename":"Remove Tag To Alternate Name","source-tag-overlay.remove-tag-to-apprenticeship":"Remove Tag To Apprenticeship","source-tag-overlay.remove-tag-to-annulment":"Remove Tag To Annulment","source-tag-overlay.remove-tag-to-barmitzvah":"Remove Tag To Bar Mitzvah","source-tag-overlay.remove-tag-to-basmitzvah":"Remove Tag To Bat Mitzvah","source-tag-overlay.remove-tag-to-batmitzvah":"Remove Tag To Bat Mitzvah","source-tag-overlay.remove-tag-to-birth":"Remove Tag To Birth","source-tag-overlay.remove-tag-to-burial":"Remove Tag To Burial","source-tag-overlay.remove-tag-to-castename":"Remove Tag To Caste Name","source-tag-overlay.remove-tag-to-christening":"Remove Tag To Christening","source-tag-overlay.remove-tag-to-clanname":"Remove Tag To Clan Name","source-tag-overlay.remove-tag-to-commonlawmarriage":"Remove Tag To Common Law Marriage","source-tag-overlay.remove-tag-to-cremation":"Remove Tag To Cremation","source-tag-overlay.remove-tag-to-death":"Remove Tag To Death","source-tag-overlay.remove-tag-to-divorce":"Remove Tag To Divorce","source-tag-overlay.remove-tag-to-emancipation":"Remove Tag To Emancipation","source-tag-overlay.remove-tag-to-employment":"Remove Tag To Employment","source-tag-overlay.remove-tag-to-enslavement":"Remove Tag To Enslavement","source-tag-overlay.remove-tag-to-gender":"Remove Tag To Sex","source-tag-overlay.remove-tag-to-immigration":"Remove Tag To Immigration","source-tag-overlay.remove-tag-to-generation":"Remove Tag To Lineage Gap","source-tag-overlay.remove-tag-to-godparenthood":"Remove Tag To Godparent","source-tag-overlay.remove-tag-to-household":"Remove Tag To Household","source-tag-overlay.remove-tag-to-lifesketch":"Remove Tag To Life Sketch","source-tag-overlay.remove-tag-to-livedtogether":"Remove Tag To Lived Together","source-tag-overlay.remove-tag-to-marriage":"Remove Tag To Marriage","source-tag-overlay.remove-tag-to-militaryservice":"Remove Tag To Military Service","source-tag-overlay.remove-tag-to-name":"Remove Tag To Name","source-tag-overlay.remove-tag-to-nationalid":"Remove Tag To National Id","source-tag-overlay.remove-tag-to-nationality":"Remove Tag To Nationality","source-tag-overlay.remove-tag-to-naturalization":"Remove Tag To Naturalization","source-tag-overlay.remove-tag-to-neighborhood":"Remove Tag To Neighbor","source-tag-overlay.remove-tag-to-nobilitytitle":"Remove Tag To Title of Nobility","source-tag-overlay.remove-tag-to-nochildren":"Remove Tag To No Children","source-tag-overlay.remove-tag-to-nocouplerelationships":"Remove Tag To No Couple Relationships","source-tag-overlay.remove-tag-to-occupation":"Remove Tag To Occupation","source-tag-overlay.remove-tag-to-otherevent":"Remove Tag To Custom Event","source-tag-overlay.remove-tag-to-otherfact":"Remove Tag To Custom Fact","source-tag-overlay.remove-tag-to-physicaldescription":"Remove Tag To Physical Description","source-tag-overlay.remove-tag-to-race":"Remove Tag To Race","source-tag-overlay.remove-tag-to-relation":"Remove Tag To Relative","source-tag-overlay.remove-tag-to-religiousaffiliation":"Remove Tag To Religious Affiliation","source-tag-overlay.remove-tag-to-residence":"Remove Tag To Residence","source-tag-overlay.remove-tag-to-stillbirth":"Remove Tag To Stillborn","source-tag-overlay.remove-tag-to-tribename":"Remove Tag To Tribe Name","source-tag-overlay.vital-tag":"Vital Tags","source.tag-gender.male":"Male","source.tag-gender.female":"Female","source.tag-gender.unknown":"Unknown","source-unfinished.attachments":"Unfinished Attachments","source-unfinished.dismiss-confirm-heading":"Dismiss Unfinished Attachment","source-unfinished.dismiss-confirm-text":"If you dismiss the unfinished attachment, it is removed for all users. However, you can review the attachments for all sources attached to a person by clicking the source\'s title, and then clicking <strong>Review Attachments</strong>.","source-unfinished.dismiss":"Dismiss","source-unfinished.info-text":"This source has not been attached to all people found in the record.","source-unfinished.learn-more":"Learn More","source-ve.button.add":"+ Add","source-ve.format.copy-to-sourcebox":"Copy of {sourceTitle}","source-ve.heading.photo-document":"Attached Photo or Document","source-ve.heading.source-modified":"Source Modified:","source-ve.heading.source.date":"Source Date","source-ve.source-was-copied":"The source was copied into \\"{newSourceTitle}\\" and added to your source box.","detach-overlay.heading.detach-source":"Detach Source","source-tag-overlay.other-information-tags":"Other Information Tags","source-tag-overlay.events-to-tag":"Events to Tag","date-suggest.date.dynasty.heading":"Dynasty: {dynasty}","date-suggest.date.label":"Date","event-type.birth.name":"Birth","event-type.census.name":"Census","event-type.date.label":"{eventName} Date","event-type.death.name":"Death","event-type.marriage.name":"Marriage","event-type.place.label":"{eventName} Place","language-suggest.aa-language.text":"Afar","language-suggest.ab-language.text":"Abkhazian","language-suggest.abq-language.text":"Abaza","language-suggest.ae-language.text":"Avestan","language-suggest.af-language.text":"Afrikaans","language-suggest.ak-language.text":"Akan","language-suggest.am-language.text":"Amharic","language-suggest.an-language.text":"Aragonese","language-suggest.ar-language.text":"Arabic","language-suggest.as-language.text":"Assamese","language-suggest.av-language.text":"Avaric","language-suggest.ay-language.text":"Aymara","language-suggest.az-language.text":"Azerbaijani","language-suggest.ba-language.text":"Bashkir","language-suggest.be-language.text":"Belarusian","language-suggest.bg-language.text":"Bulgarian","language-suggest.bh-language.text":"Bihari languages","language-suggest.bi-language.text":"Bislama","language-suggest.bik-language.text":"Bikol","language-suggest.bm-language.text":"Bambara","language-suggest.bn-language.text":"Bengali","language-suggest.bo-language.text":"Tibetan","language-suggest.br-language.text":"Breton","language-suggest.bs-language.text":"Bosnian","language-suggest.ca-language.text":"Catalan; Valencian","language-suggest.cau-language.text":"Caucasian languages","language-suggest.ce-language.text":"Chechen","language-suggest.ceb-language.text":"Cebuano","language-suggest.ch-language.text":"Chamorro","language-suggest.co-language.text":"Corsican","language-suggest.cr-language.text":"Cree","language-suggest.cs-language.text":"Czech","language-suggest.csb-language.text":"Kashubian","language-suggest.cu-language.text":"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic","language-suggest.cv-language.text":"Chuvash","language-suggest.cy-language.text":"Welsh","language-suggest.da-language.text":"Danish","language-suggest.de-language.text":"German","language-suggest.dv-language.text":"Divehi; Dhivehi; Maldivian","language-suggest.dz-language.text":"Dzongkha","language-suggest.ee-language.text":"Ewe","language-suggest.el-language.text":"Greek, Modern (1453-)","language-suggest.en-language.text":"English","language-suggest.eo-language.text":"Esperanto","language-suggest.es-language.text":"Spanish; Castilian","language-suggest.et-language.text":"Estonian","language-suggest.eu-language.text":"Basque","language-suggest.fa-language.text":"Persian","language-suggest.ff-language.text":"Fulah","language-suggest.fi-language.text":"Finnish","language-suggest.fil-language.text":"Filipino","language-suggest.fj-language.text":"Fijian","language-suggest.fo-language.text":"Faroese","language-suggest.fr-language.text":"French","language-suggest.fy-language.text":"Western Frisian","language-suggest.ga-language.text":"Irish","language-suggest.gd-language.text":"Gaelic; Scottish Gaelic","language-suggest.gl-language.text":"Galician","language-suggest.gn-language.text":"Guarani","language-suggest.gu-language.text":"Gujarati","language-suggest.gv-language.text":"Manx","language-suggest.ha-language.text":"Hausa","language-suggest.he-language.text":"Hebrew","language-suggest.hi-language.text":"Hindi","language-suggest.hil-language.text":"Hiligaynon","language-suggest.ho-language.text":"Hiri Motu","language-suggest.hr-language.text":"Croatian","language-suggest.ht-language.text":"Haitian; Haitian Creole","language-suggest.hu-language.text":"Hungarian","language-suggest.hy-language.text":"Armenian","language-suggest.hz-language.text":"Herero","language-suggest.ia-language.text":"Interlingua (International Auxiliary Language Association)","language-suggest.id-language.text":"Indonesian","language-suggest.ie-language.text":"Interlingue; Occidental","language-suggest.ig-language.text":"Igbo","language-suggest.ii-language.text":"Sichuan Yi; Nuosu; (Chinese - Yi Ethnic)","language-suggest.ik-language.text":"Inupiaq","language-suggest.ilo-language.text":"Ilocano","language-suggest.io-language.text":"Ido","language-suggest.is-language.text":"Icelandic","language-suggest.it-language.text":"Italian","language-suggest.iu-language.text":"Inuktitut","language-suggest.ja-language.text":"Japanese","language-suggest.ja-kana-language.text":"Japanese(Katakana)","language-suggest.jv-language.text":"Javanese","language-suggest.ka-language.text":"Georgian","language-suggest.kaa-language.text":"Kara-Kalpak","language-suggest.kbd-language.text":"Kabardian","language-suggest.kg-language.text":"Kongo","language-suggest.ki-language.text":"Kikuyu; Gikuyu","language-suggest.kj-language.text":"Kuanyama; Kwanyama","language-suggest.kjh-language.text":"Khakas","language-suggest.kk-language.text":"Kazakh","language-suggest.kl-language.text":"Kalaallisut; Greenlandic","language-suggest.km-language.text":"Central Khmer","language-suggest.kn-language.text":"Kannada","language-suggest.ko-language.text":"Korean","language-suggest.ko-Latn-language.text":"Korean(Romanization)","language-suggest.ko-Hang-language.text":"Korean(Hangeul)","language-suggest.ko-Hani-language.text":"Korean(Hanja)","language-suggest.kr-language.text":"Kanuri","language-suggest.krc-language.text":"Karachay-Balkar","language-suggest.krl-language.text":"Karelian","language-suggest.ks-language.text":"Kashmiri","language-suggest.ku-language.text":"Kurdish","language-suggest.kum-language.text":"Kumyk","language-suggest.kv-language.text":"Komi","language-suggest.kw-language.text":"Cornish","language-suggest.ky-language.text":"Kirghiz; Kyrgyz","language-suggest.la-language.text":"Latin","language-suggest.lap-language.text":"Laka (Chad)","language-suggest.lb-language.text":"Luxembourgish; Letzeburgesch","language-suggest.lg-language.text":"Ganda","language-suggest.li-language.text":"Limburgan; Limburger; Limburgish","language-suggest.lld-language.text":"Ladin","language-suggest.ln-language.text":"Lingala","language-suggest.lo-language.text":"Lao","language-suggest.lt-language.text":"Lithuanian","language-suggest.lu-language.text":"Luba-Katanga","language-suggest.lv-language.text":"Latvian","language-suggest.mg-language.text":"Malagasy","language-suggest.mh-language.text":"Marshallese","language-suggest.mi-language.text":"Maori","language-suggest.mk-language.text":"Macedonian","language-suggest.ml-language.text":"Malayalam","language-suggest.mn-language.text":"Mongolian","language-suggest.mr-language.text":"Marathi","language-suggest.ms-language.text":"Malay","language-suggest.mt-language.text":"Maltese","language-suggest.my-language.text":"Burmese","language-suggest.na-language.text":"Nauru","language-suggest.nb-language.text":"Bokm\xe5l, Norwegian; Norwegian Bokm\xe5l","language-suggest.nd-language.text":"Ndebele, North; North Ndebele","language-suggest.nds-language.text":"Low German, Low Saxon","language-suggest.ne-language.text":"Nepali","language-suggest.ng-language.text":"Ndonga","language-suggest.nl-language.text":"Dutch; Flemish","language-suggest.nn-language.text":"Norwegian Nynorsk; Nynorsk, Norwegian","language-suggest.no-language.text":"Norwegian","language-suggest.nr-language.text":"Ndebele, South; South Ndebele","language-suggest.nv-language.text":"Navajo; Navaho","language-suggest.ny-language.text":"Chichewa; Chewa; Nyanja","language-suggest.oc-language.text":"Occitan (post 1500)","language-suggest.oj-language.text":"Ojibwa","language-suggest.om-language.text":"Oromo","language-suggest.or-language.text":"Oriya","language-suggest.os-language.text":"Ossetian; Ossetic","language-suggest.pa-language.text":"Panjabi; Punjabi","language-suggest.pag-language.text":"Pangasinan","language-suggest.pam-language.text":"Kapampangan, Pampanga","language-suggest.pi-language.text":"Pali","language-suggest.pl-language.text":"Polish","language-suggest.ps-language.text":"Pushto; Pashto","language-suggest.pt-language.text":"Portuguese","language-suggest.qu-language.text":"Quechua","language-suggest.rm-language.text":"Romansh","language-suggest.rn-language.text":"Rundi","language-suggest.ro-language.text":"Romanian; Moldavian; Moldovan","language-suggest.ru-language.text":"Russian","language-suggest.rw-language.text":"Kinyarwanda","language-suggest.sa-language.text":"Sanskrit","language-suggest.sc-language.text":"Sardinian","language-suggest.scn-language.text":"Sicilian","language-suggest.sd-language.text":"Sindhi","language-suggest.se-language.text":"Northern Sami","language-suggest.sg-language.text":"Sango","language-suggest.si-language.text":"Sinhala; Sinhalese","language-suggest.sk-language.text":"Slovak","language-suggest.sl-language.text":"Slovenian","language-suggest.sm-language.text":"Samoan","language-suggest.smi-language.text":"Sami Languages","language-suggest.sn-language.text":"Shona","language-suggest.so-language.text":"Somali","language-suggest.sq-language.text":"Albanian","language-suggest.sqj-language.text":"Albanian languages","language-suggest.sr-language.text":"Serbian","language-suggest.ss-language.text":"Swati","language-suggest.st-language.text":"Sotho, Southern","language-suggest.su-language.text":"Sundanese","language-suggest.sv-language.text":"Swedish","language-suggest.sw-language.text":"Swahili","language-suggest.ta-language.text":"Tamil","language-suggest.te-language.text":"Telugu","language-suggest.tg-language.text":"Tajik","language-suggest.th-language.text":"Thai","language-suggest.ti-language.text":"Tigrinya","language-suggest.tk-language.text":"Turkmen","language-suggest.tl-language.text":"Tagalog","language-suggest.tn-language.text":"Tswana","language-suggest.to-language.text":"Tonga (Tonga Islands)","language-suggest.tr-language.text":"Turkish","language-suggest.ts-language.text":"Tsonga","language-suggest.tt-language.text":"Tatar","language-suggest.tut-language.text":"Altaic languages","language-suggest.tw-language.text":"Twi","language-suggest.ty-language.text":"Tahitian","language-suggest.tyv-language.text":"Tuvinian","language-suggest.ug-language.text":"Uighur; Uyghur","language-suggest.uk-language.text":"Ukrainian","language-suggest.ur-language.text":"Urdu","language-suggest.uz-language.text":"Uzbek","language-suggest.ve-language.text":"Venda","language-suggest.vi-language.text":"Vietnamese","language-suggest.vo-language.text":"Volap\xfck","language-suggest.wa-language.text":"Walloon","language-suggest.war-language.text":"Waray (Philippines)","language-suggest.wo-language.text":"Wolof","language-suggest.xh-language.text":"Xhosa","language-suggest.yi-language.text":"Yiddish","language-suggest.yo-language.text":"Yoruba","language-suggest.za-language.text":"Zhuang; Chuang","language-suggest.zh-language.text":"Chinese","language-suggest.zh-Latn-x-jyutping-language.text":"Jyutping","language-suggest.zh-Latn-x-pinyin-language.text":"Pinyin","language-suggest.zh-hans-language.text":"Chinese(Simplified)","language-suggest.zh-hant-language.text":"Chinese(Traditional)","language-suggest.zh-yue-language.text":"Cantonese Chinese","language-suggest.zu-language.text":"Zulu","language-suggest.zza-language.text":"Zaza, Dimili, Dimli (macrolanguage), Kirdki, Kirmanjki (macrolanguage), Zazaki","language-suggest.language.label":"Language","language-suggest.select-language.place-holder":"e.g. English","place-suggest.alternate-name.label":"Alternate Name: {alternateName}","place-suggest.date-present.label":"Present","place-suggest.date-unknown.label":"Unknown","place-suggest.duplicate-place.message":"{duplicatePlace} is a duplicate and has been forwarded to {forwardedPlace}.","place-suggest.map.label":"Map","place-suggest.place.label":"Place","place-suggest.new-place.label":"Suggest New Place","place-suggest.searchable-place.message":"{displayName} is no longer a proposed place and is now searchable.","place-suggest.standardized-places.label":"Standardized Places","place-suggest.suggested-places.label":"Places You Suggested","standard-suggest.non-standardized-date.warning":"Non-standardized Date","standard-suggest.none-standardized.warning":"No Standard Selected","standard-suggest.standardized-date.label":"Standardized Date","standard-suggest.standardized-place.label":"Standardized Place","standard-suggest.non-standardized-place.warning":"Non-standardized Place","standard-suggest.none-available.option":"None of the above","standard-suggest.standard-date.label":"Standard Date","standard-suggest.standard-place.label":"Standard Place","standard-suggest.what-is-this.link":"What\'s this?","search-filter.place-type.label":"Place Type","search-filter.place-type.place-holder":"e.g. \'City\'","suggested-reasons.suggested-reason-statement-heading":"Suggested Reason Statement","suggested-reasons.add-or-change-couple-event.1":"The information entered matches all or most sources, photos, stories, or documents.","suggested-reasons.add-or-change-couple-event.2":"The information entered matches some sources, photos, stories, or documents.","suggested-reasons.add-or-change-couple-event.3":"The information was updated to match a source, photo, story, or document that was recently attached.","suggested-reasons.add-or-change-couple-fact.1":"Many sources, photos, stories, or documents that are attached to this couple provide evidence that this information should be changed.","suggested-reasons.add-or-change-couple-fact.2":"Some sources, photos, stories, or documents that are attached to this couple provide evidence that this information should be changed.","suggested-reasons.add-or-change-couple-fact.3":"A source, photo, story, or document that are attached to this couple provides evidence that this information should be changed.","suggested-reasons.add-or-change-parent-child-event.1":"Many sources, photos, stories, or documents provide evidence that this relationship should be changed.","suggested-reasons.add-or-change-parent-child-event.2":"Some sources, photos, stories, or documents provide evidence that this relationship should be changed.","suggested-reasons.add-or-change-parent-child-event.3":"A source, photo, story, or document provides evidence that this relationship should be changed.","suggested-reasons.add-or-change-person-conclusion.1":"The information entered matches all or most sources, photos, stories, or documents. Person: {personId}","suggested-reasons.add-or-change-person-conclusion.2":"The information entered matches some sources, photos, stories, or documents. Person: {personId}","suggested-reasons.add-or-change-person-conclusion.3":"The information was updated to match a source, photo, story, or document that was recently attached. Person: {personId}","suggested-reasons.add-or-change-sex.4":"The sex was set to unknown because no sources, photos, stories, or documents provide evidence about the sex.","suggested-reasons.attach-a-source-to-a-new-person-being-added-using-source-linker.1":"This source provides evidence that this person exists and belongs in this family. Person: {personId}","suggested-reasons.attach-a-source-to-a-new-person-being-added-using-source-linker.2":"This source provides evidence that this person exists. Person: {personId}","suggested-reasons.attach-a-source-to-someone-already-in-family-tree.1":"This source matches all of the person\'s information. It also provides additional details or helps confirm its accuracy. Person: {personId}","suggested-reasons.attach-a-source-to-someone-already-in-family-tree.2":"This source matches most of the person\'s information. It also provides additional details or helps confirm its accuracy. Person: {personId}","suggested-reasons.attach-a-source-to-someone-already-in-family-tree.3":"This source matches some of the person\'s information. It also provides additional details or helps confirm its accuracy. Person: {personId}","suggested-reasons.attach-source.1":"This source matches all of the information in Family Tree and helps confirm its accuracy. Person: {personId}","suggested-reasons.attach-source.2":"This source matches some of the information in Family Tree and helps confirm its accuracy. Person: {personId}","suggested-reasons.attach-source.3":"This source matches some of the information in Family Tree, provides additional details, and helps confirm its accuracy. Person: {personId}","suggested-reasons.attach-source.4":"This source provided the information used to add this person: {personId}","suggested-reasons.delete-couple-event.1":"No sources, photos, stories, or documents provide evidence about this marriage event. It probably did not occur.","suggested-reasons.delete-couple-event.2":"Sources, photos, stories, documents provide evidence that this information is not accurate.","suggested-reasons.delete-couple-event.3":"Sources, photos, stories, or documents provide evidence that this marriage event did not occur.","suggested-reasons.delete-couple-event.4":"This is duplicate information.","suggested-reasons.delete-non-vital.1":"No sources, photos, stories, or documents provide evidence about this information. Person: {personId}","suggested-reasons.delete-non-vital.2":"This is duplicate information.","suggested-reasons.delete-non-vital.3":"Sources, photos, stories, documents provide evidence that this information is not accurate. Person: {personId}","suggested-reasons.delete-person.1":"No sources exist about this person. He or she probably did not exist: {personId}","suggested-reasons.delete-person.2":"This person is a duplicate: {personId}","suggested-reasons.delete-person.3":"I want to remove this person from my private space: {personId}","suggested-reasons.delete-vital.1":"No sources, photos, stories, or documents provide evidence about this information. Person: {personId}","suggested-reasons.delete-vital.2":"Sources, photos, stories, documents provide evidence that this information is not accurate. Person: {personId}","suggested-reasons.delete-vital.3":"This information was deleted because it is about a different person. Person: {personId}","suggested-reasons.detach-source.1":"This source contains information about a different person. It is not about this person: {personId}","suggested-reasons.detach-source.2":"This source was attached by mistake. It does not contain information about this person: {personId}","suggested-reasons.dismiss-data-problem.1":"All available sources provide evidence that the information is correct as documented in Family Tree. This data problem is invalid. Person: {personId}","suggested-reasons.dismiss-data-problem.2":"Some available sources provide evidence that the information is correct as documented in Family Tree. This data problem is invalid. Person: {personId}","suggested-reasons.dismiss-record-hint.1":"Even though much of the information on this record matches, it is almost certainly about someone else.","suggested-reasons.dismiss-record-hint.2":"Even though some of the information on this record matches, it is probably about someone else.","suggested-reasons.dismiss-record-hint.3":"None of the information on this record matches. It is definitely about someone else.","suggested-reasons.dismiss-research-help.1":"The available sources provide convincing evidence that this research suggestion is invalid.","suggested-reasons.dismiss-research-help.2":"The available sources provide good evidence that this research suggestion is invalid.","suggested-reasons.merge.1":"All vital information and relationships match. ID numbers: {duplicatePersonId} and {survivorPersonId}.","suggested-reasons.merge.2":"Most vital information and relationships match. Some details contain minor conflicts. ID numbers: {duplicatePersonId} and {survivorPersonId}.","suggested-reasons.merge.3":"Most vital information and relationships match. No details conflict. ID numbers: {duplicatePersonId} and {survivorPersonId}.","suggested-reasons.merge.4":"This record contains little information: {duplicatePersonId}. There is enough evidence to believe it is the same person as {survivorPersonId}.","suggested-reasons.remove-replace.delete-couple-relationship.1":"Many sources, photos, stories, or documents that are attached to this couple provide evidence that this relationship should be changed. Person: {spouse1Id} Person: {spouse2Id}","suggested-reasons.remove-replace.delete-couple-relationship.2":"Some sources, photos, stories, or documents that are attached to this couple provide evidence that this relationship should be changed. Person: {spouse1Id} Person: {spouse2Id}","suggested-reasons.remove-replace.delete-couple-relationship.3":"A source, photo, story, or document that are attached to this couple provides evidence that this relationship should be changed. Person: {spouse1Id} Person: {spouse2Id}","suggested-reasons.remove-replace.delete-parent-child-relationship.1":"The dates and places of birth, marriage, or death make it impossible for this relationship to be correct.","suggested-reasons.remove-replace.delete-parent-child-relationship.2":"A source, photo, story, or document provides evidence that this relationship did not exist.","suggested-reasons.remove-replace.delete-parent-child-relationship.3":"No sources, photos, stories, or documents provide evidence that this relationship existed.","suggested-reasons.remove-replace.remove-replace-child.1":"Many sources, photos, stories, or documents provide evidence that this information should be changed.","suggested-reasons.remove-replace.remove-replace-child.2":"Some sources, photos, stories, or documents provide evidence that this information should be changed.","suggested-reasons.remove-replace.remove-replace-child.3":"A source, photo, story, or document provides evidence that this information should be changed.","suggested-reasons.remove-replace.remove-replace-parent.1":"Many sources, photos, stories, or documents provide evidence that this information should be changed. Parent: {parentId} Child: {childId}","suggested-reasons.remove-replace.remove-replace-parent.2":"Some sources, photos, stories, or documents provide evidence that this information should be changed. Parent: {parentId} Child: {childId}","suggested-reasons.remove-replace.remove-replace-parent.3":"A source, photo, story, or document provides evidence that this information should be changed. Parent: {parentId} Child: {childId}","suggested-reasons.remove-replace.remove-replace-spouse.1":"Many sources, photos, stories, or documents that are attached to this couple provide evidence that this relationship should be changed. Person: {spouse1Id} Person: {spouse2Id}","suggested-reasons.remove-replace.remove-replace-spouse.2":"Some sources, photos, stories, or documents that are attached to this couple provide evidence that this relationship should be changed. Person: {spouse1Id} Person: {spouse2Id}","suggested-reasons.remove-replace.remove-replace-spouse.3":"A source, photo, story, or document that are attached to this couple provides evidence that this relationship should be changed. Person: {spouse1Id} Person: {spouse2Id}","suggested-reasons.restore-person.1":"This person exists and is not a duplicate: {personId}","suggested-reasons.restore-person.2":"This person was deleted during an incorrect merge and needs to be restored: {personId}","suggested-reasons.restore-person.3":"I did not intend to delete this person: {personId}","suggested-reasons.delete-other-relationship.1":"Many sources, photos, stories, or documents that are attached to these people provide evidence that this relationship should be deleted. Person: {person1Id} Person: {person2Id}","suggested-reasons.delete-other-relationship.2":"Some sources, photos, stories, or documents that are attached to these people provide evidence that this relationship should be deleted. Person: {person1Id} Person: {person2Id}","suggested-reasons.delete-other-relationship.3":"A source, photo, story, or document that is attached to these people provides evidence that this relationship should be deleted. Person: {person1Id} Person: {person2Id}","suggested-reasons.change-other-relationship.1":"Many sources, photos, stories, or documents that are attached to these people provide evidence that this relationship should be changed. Person: {person1Id} Person: {person2Id}","suggested-reasons.change-other-relationship.2":"Some sources, photos, stories, or documents that are attached to these people provide evidence that this relationship should be changed. Person: {person1Id} Person: {person2Id}","suggested-reasons.change-other-relationship.3":"A source, photo, story, or document that is attached to these people provides evidence that this relationship should be changed. Person: {person1Id} Person: {person2Id}","suggested-reasons.add-other-relationship.1":"Many sources, photos, stories, or documents that are attached to these people provide evidence that this relationship should be changed. Person: {person1Id} Person: {person2Id}","suggested-reasons.add-other-relationship.2":"Some sources, photos, stories, or documents that are attached to these people provide evidence that this relationship should be changed. Person: {person1Id} Person: {person2Id}","suggested-reasons.add-other-relationship.3":"A source, photo, story, or document that is attached to these people provides evidence that this relationship should be changed. Person: {person1Id} Person: {person2Id}","to-do-list.add-item":"+ Add an item...","to-do-list.add-item.aria-label":"Add an item","to-do-list.empty-list-placeholder":"Tip: You can paste or enter URLs (https://www.familysearch.org) or person IDs (G7T1-3MF).","to-do-list.collapse-card":"Click to collapse To-Do List","to-do-list.expand-card":"Click to expand To-Do List","to-do-list.completed-items":"Completed Items","to-do-list.error-message":"Try re-loading the page to display your To-Do List","to-do-list.header":"To-Do List","to-do-list.how-to-use":"How to use the To-Do List","to-do-list.item-check-aria-label":"Complete \\"{item}\\"","to-do-list.item-delete-aria-label":"Delete \\"{item}\\"","to-do-list.item-menu":"Item Menu","to-do-list.list-arial-label":"To-Do List Items","to-do-list.save-item.action":"Click to save","to-do-list.show-item-menu":"Show Item Menu","to-do-list.status-overlay.adding-item-error-message":"Sorry. There was a problem adding this To-Do. You may need to try again later.","to-do-list.status-overlay.deleted-item-success":"Your To-Do item was successfully deleted.","to-do-list.status-overlay.editing-item-error-message":"Sorry. There was a problem editing this To-Do. You may need to try again later.","to-do-list.status-overlay.loading-error-message":"Sorry. There was a problem loading your To-Do List. You may need to try again later.","to-do-list.status-overlay.undo-delete":"Undo","to-do-list.heading":"To-Do List","private-person-options.choice-chip.all":"All","private-person-options.choice-chip.possible-duplicate":"Possible Duplicates","private-person-options.action.ascending":"Ascending","private-person-options.action.descending":"Descending","private-person-options.choice-chip.birth-date":"Date of Birth","private-person-options.choice-chip.date-created":"Date Created","private-person-options.choice-chip.date-modified":"Date Modified","private-person-options.choice-chip.name":"Name","private-person-options.choice-chip.sex":"Sex","private-person-options.choice-chip.first-name":"First Name","private-person-options.choice-chip.last-name":"Last Name","private-person-options.heading.sort-by":"Sort By","private-person-options.heading.show":"Show","private-person-options.options":"Options","private-person-search.aria-label.search-field":"Private person search field","private-person-search.placeholder.search-by-name":"Search by Name","groups.continue-to-pedigree.action":"Continue to Pedigree","groups.copied-yourself.description":"You have copied yourself to the {groupName} Group Tree. You may need to resolve any duplicates that this has created.","groups.copied-yourself.heading":"Copied Yourself","groups.copy-all-private-people.action":"All My Private People","groups.copy-error.description":"There was an error while trying to copy persons into this private tree. Please try again later.","groups.copy-just-yourself.action":"Copy Myself","groups.private-people-copied.description":"Your private people have been copied to the {groupName} Group Tree. You may need to resolve any duplicates that this has created.","groups.private-people-copied.heading":"Private People Copied","groups.copy-select-people.action":"Copy from FamilySearch Tree","groups.invite-someone-to.heading":"Invite: {groupName}","groups.already-selected.label":"Already Selected","groups.group-member.label":"Group Member","groups.already-invited.label":"Invited","groups.set-starting-person.heading":"Set Starting Person","groups.select-the-starting-person-for.description":"Select the starting person for {groupName}.","groups.go-to-tree.action":"Go to Tree","groups.non-admin-invite-dialog.description":"At this time, only the administrator can invite others to the group.","groups.invite.heading":"Invite","groups.invite.action":"Invite","groups.starting-person.heading":"Starting Person","groups.spouses.label":"{count, plural, one {Spouse} other {Spouses}}","groups.parents.label":"Parents","groups.over-limit-error.heading":"Too Many People in Your Private List","groups.over-limit-error.description":"Because your private list has more than 300 people, you will need to copy one person in at a time. Start by copying just yourself for now.","groups.selected-starting-persons.label":"Selected starting person:","groups.success.heading":"Success!","groups.replace-me-person.description":"You have copied your information from your private tree to {personName} in the {groupName}.","groups.view-person.action":"View Person","groups.view-tree.action":"View Tree","groups.replace-dialog.description":"Copy your tree information to this group tree.","groups.copy-from-private-tree-general.error":"There was an error copying your data. Please try again later.","groups.copy-from-private-tree-already-copied.error":"This specific person already copied into the group tree. Cannot copy again.","groups.copy-from-private-tree-success.description":"You have copied your private people from your private tree to the {groupName}.","groups.add-group-members-to-tree.description":"Add group members to the tree before sending the invite.","groups.create-group-tree.action":"Create Group Tree","groups.group-tree-needed.heading":"Group Tree Needed","groups.group-tree-required.description":"Please create a group tree before inviting others to the group.","groups.copy-all-private-people.heading":"Copy All Private People {count, select, 0 {} other {({count})}}","groups.copy-all.action":"Copy All","groups.copy-all-private-people.alert":"<strong>Important:</strong> Consider copying only persons that are needed for sharing and collaborating with close family members.","groups.copy-all-private-people.description":"You have {count} private people in Family Tree. You may not want to copy all of them into your group tree.","groups.see-private-people.link":"See all my private people ({count})","groups.early-access.description":"Welcome to the early access for family group trees. Please tell us about your experience so we can make it better.","groups.early-access-researcher.description":"Welcome to the early access for CETs. Please tell us about your experience so we can make it better.","groups.give-feedback.link":"Give feedback.","groups.allow-shared-tree.description":"You will be able to send messages to group members and work together in a shared private pedigree.","groups.accept-group-privacy":"By accepting and sharing personal information from your Family Tree within that group, you confirm that you have the right and permission to share any personal information that you provide access to within the group, including the personal information of other living individuals. You also agree to the terms and conditions in the <0>Content Submission Agreement</0>, <1>Terms of Use</1>, and <2>Privacy Notice</2>.","groups.join.terms-check":"I have read and agree to the FamilySearch <0>Content Submission Agreement</0>, <1>Terms of Use</1>, and <2>Privacy Notice</2>.","groups.join.right-check":"I confirm that I have the right and permission to share any personal information that I provide access to within this group.","groups.welcome.heading":"Welcome","groups.is-this-you.heading":"Before you can view the tree, we need to connect you to the right starting person. Is this you?","groups.change-starting-person.action":"No. Change starting person","groups.yes-continue.action":"Yes, Continue","group.shared-group-tree.heading":"Shared Group Tree","groups.setting-me-person-error.description":"You can set the starting person manually on the Group Details page.","groups.go-to-group-details.action":"Go to Group Details","groups.leave-group.action":"Leave Group","groups.accept.action":"Accept","groups.select-me-person.heading":"Select Me in This Tree","groups.suggest-me-person.error":"There was an error selecting this starting person.","groups.suggest-me-person.title":"Select Who {name} Is in This Tree","groups.suggest-me-person.subtitle":"If {name} is not in this list, add {name} to the group tree, and come back to this list to select a starting person.","groups.admin-help.action":"Administrator Help","groups.select-me-person.help.description":"Can\'t find yourself? Ask the administrator for help.","groups.setting-me-person-error.heading":"Error Setting the Starting Person","groups.select.action":"Select","groups.general-error.error":"An error occurred. Please try again later.","groups.not-all-info-displayed.error":"Not all information could be displayed.","groups.ask-admin-suggestion-text.description":"I do not see myself in the family group tree. Would you please add me so I can set my starting person?","groups.fgt-invite.subtitle":"Select who you are inviting. If the person is not on this list, go add him or her to the tree, and then come back here to send the invitation.","groups.select-people-to-copy.heading":"Select People to Copy","groups.people-will-be-copied.subtitle":"These people will be copied from your private tree into the group tree.","groups.no-match-found.title":"No Match Found","groups.open-menu.action":"Open Menu","groups.resend-invite.action":"Resend Invite","groups.remove-invite.action":"Remove Invite","groups.delete-invitation-confirm.description":"Confirm to delete invitation.","groups.delete-invitation.heading":"Delete Invitation","groups.delete-invite.error":"There was an error deleting this invite. Please try again later.","groups.other-copy-options.description":"Other Copy Options","groups.select-who-to-copy.heading":"Select Who to Copy into the Group","groups.researcher-tree-invited.description":"Please invite only those you trust. A contributor will be able to see and edit all information in the tree, including living people\'s information.","groups.invite-name.heading":"Invite {name}?","groups.done-inviting.action":"Done Inviting","groups.unable-to-send-invite":"We were unable to send an invite.","groups.no-starting-person-non-admin.description":"The starting person for this tree must be set by the owner before it can be viewed.","groups.go-to-tree-details.action":"Go to Tree Details","groups.admin-onboarding.heading":"Welcome to Family Groups","groups.admin-onboarding.description":"Click to learn more about Family Groups","groups.connect-your-family.heading":"Connect your living family. Foster unity.","groups.gather-your-family.description":"Gather your family into a group, and see the same living tree. Involve your family in navigating their family history as a team. Enrich your history with photos, stories, and sources.","groups.share-and-protect.heading":"Share and protect.","groups.share-memories.description":"Share memories and milestones while they are still fresh, and protect everyone\u2019s online privacy.","groups.leave-a-legacy.heading":"Leave a legacy.","groups.ensure-that-future.description":"Ensure that future generations of your family can access this information to learn about your life.","groups.admin-onboarding.researcher.heading":"Welcome to CETs","groups.admin-onboarding.researcher.description":"Click to learn more about CETs","groups.admin-onboarding.researcher.slide1.heading":"Build your tree together with those you trust","groups.admin-onboarding.researcher.slide1.description":"Bring your tree to FamilySearch, and invite those whose skills you trust to help you research your family. Other users can see the data but not edit it.","groups.admin-onboarding.researcher.slide2.heading":"Your data where you need it","groups.admin-onboarding.researcher.slide2.description":"Data that you have is copied between FamilySearch and your desktop genealogy software, so you always have the most up-to-date data, regardless of where you need to search.","groups.admin-onboarding.researcher.slide3.heading":"FamilySearch tools and data at your fingertips","groups.admin-onboarding.researcher.slide3.description":"Billions of top-tier historical documents, rich conclusions from others\u2019 trees, collaboration tools, tree analysis tools, and much more all help you efficiently and accurately document your ancestors\u2019 lives.","groups.navigation.family-search-tree.label":"FamilySearch Tree","groups.navigation.family-search-tree.description":"Your private tree connected to the public tree.","groups.navigation.family-group-trees":"Family Group Trees","groups.navigation.researcher-trees":"CETs","groups.navigation.invite-group-member":"Invite Family Member","groups.invite-instructions.description":"Send the invitation by copying the link and pasting it into a message or email that you can send to the invitee.","groups.copy-link.action":"Copy Link","groups.copy-confirmation.label":"Invite link copied.","groups.create-invite.action":"Create Invite","groups.preferred-tree-overlay.description":"The {preferredTreeName} is your preferred tree currently. Would you like to set {currentTreeName} as your new preferred tree?","groups.preferred-tree-overlay.group-details-link":"You can always change this in the tree settings on the tree or the <0>group details page</0>.","groups.my-private-tree-overlay.action":"Dismiss","groups.my-private-tree-overlay.heading":"Preferred Tree","groups.invite-created.heading":"Invite Created","group.create-invite.heading":"Invite: {groupName} Family Tree","groups.copy-to-group.action":"Copy to Group","groups.your-preferred-tree.label":"Your preferred tree.","groups.set-preferred-tree.action":"Set as Preferred Tree","groups.your-preferred-tree.description":"This tree opens first when you go to Family Tree or other tree-related activities.","groups.set-preferred-tree.success":"{groupName} has been set as your preferred tree.","groups.needs-attention.heading":"Needs Attention ({count})","groups.needs-attention.body":"By selecting these people they will be copied into the group tree possibly creating duplicates.","groups.group-tree.heading":"Group Tree","groups.your-tree.heading":"Your Tree","groups.matches.heading":"Matches","groups.matching-people.heading":"Matching People","groups.matches.body":"These people have matches in the group tree. Only the memories and sources will be added to the matching people.","groups.no-match.heading":"People to Be Added ({count})","groups.no-match.body":"These people are not in the group tree. They will be added, including vital information, memories, and sources.","groups.matches-alert":"The memories and sources of all selected matches will be added to the matching record in the group tree.","groups.matches-found.heading":"Matches Found","groups.retry.action":"Retry","groups.copy-success.body":"Successfully added from your tree.","groups.view-person-list.action":"View Person List","groups.invite-copy.error":"There was a problem copying the invite link. Please try again.","groups.invite.add-person-to-tree.heading":"Attention","groups.invite.add-person-to-tree.description":"Please make sure those you invite have a person added in the tree to represent them.","groups.invite.add-person-to-tree.do-not-show.label":"Don\'t show again","groups.invite.instructions.anyone-can-join.description":"Anyone with this link can request to join the group. They will need to be approved before they join the group.","groups.no-matches.description":"We couldn\'t find you in the tree. This may be because no one has added you. Ask the administrator to help add you to the tree.","groups.need-help.heading":"Need Help","groups.need-help.action":"Need Help","groups.yes-this-is-me.action":"Yes, this is me","groups.groups-release.description":"Family group trees are now available to all FamilySearch users. Features for creating and managing groups have also changed.","groups.tree-release.description":"Family group trees are now available to all FamilySearch users.","groups.learn-whats-new.link":"Learn what\u2019s new.","groups.update-tree-person.error":"We confirmed who you are in this tree but were not able to copy over your memories, sources, and notes to the starting person. Please try again later to copy them from the FamilySearch Tree.","groups.copying-all.1.description":"We are copying all the private people from your FamilySearch Tree. This could take several minutes.","groups.copying-all.2.description":"Please do not close this page.","groups.copy-all-done.description":"You have already copied all private people from the FamilySearch tree into the group tree. You will have to copy them manually if you want to copy them again.","groups.block.view-group":"View Group","groups.no-pref-tree.description":"You no longer have a preferred tree selected. FamilySearch Tree will be used as your preferred tree.","groups.no-pref-tree-note.description":"The preferred tree opens by default when you start Family Tree. It is also used for calculating relationships. Because a family group tree is not selected as your preferred tree, we will use FamilySearch Tree instead.","groups.group-chat.action":"Group Chat","groups.send-invitation.description":"Send the invitation:","groups.send-invitation-steps-1.description":"Click <strong>Copy Link</strong>, below.","groups.send-invitation-steps-2.description":"Paste the link into an email or other message.","groups.send-invitation-steps-3.description":"Send the email or message to the recipients.","groups.send-invitation-steps-4.description":"Check the group details to approve each join request.","groups.need-help.label":"Need help with family group trees?","groups.show-person-count.description":"Showing {personCount, plural, one {# person} other {# persons}} in list.","groups.loading-persons.description":"Loading persons in list.","groups.currently-preferred-tree.label":"Currently Preferred Tree","groups.memories-privacy.heading":"Memories Privacy.","groups.memories-privacy.description":"Memories marked as private will not be visible within the family group tree. If you want to share them, go to your Memories gallery, and select which groups can see this memory.","groups.gedcom-fail-warning.description":"Some of the data in this GEDCOM file was not uploaded correctly.","groups.gedcom-fail-warning.action":"View imported tree differences.","groups.cet-latest-changes.action":"Latest Changes in Tree","groups.need-help-cet.label":"Need help with CETs?","groups.navigation.invite-group-member-cet":"Invite Member","groups.block.view-cet":"View CET Details","groups.memories-privacy.description-short":"Memories marked as private will not be visible within the family group tree.","tw.pedigree-unknown-spouse.label":"[UNKNOWN SPOUSE]","tw.pedigree.add-child-button.1":"Add child to {person1}","tw.pedigree.add-child-button.2":"Add child to {person1} and {person2}","tw.pedigree.add-child.action":"Add Child","tw.pedigree.add-father.label":"Add Father to {child}","tw.pedigree.add-mother.label":"Add Mother to {child}","tw.pedigree.add-relationship":"Add Person","tw.pedigree.add-sibling.action":"Add Sibling","tw.pedigree.add-spouse.action":"Add Spouse","tw.pedigree.add-spouse.label":"Add Spouse to {spouse}","tw.pedigree.alt-parents.heading":"Parents for {name}","tw.pedigree.alt-spouses.heading":"Spouses for {name}","tw.pedigree.alternate-parents":"Alternative parents for {parent}","tw.pedigree.alternate-parents.count":"{count, plural,  =0 {No parents.} one {# parent.} other {# parents.}}","tw.pedigree.alternate-parents.loading":"Loading parents.","tw.pedigree.alternate-parents.select":"Select the preferred parents for {name}","tw.pedigree.alternate-spouses":"Alternative spouses for {spouse}","tw.pedigree.alternate-spouses.count":"{count, plural,  =0 {No spouses.} one {# spouse.} other {# spouses.}}","tw.pedigree.alternate-spouses.loading":"Loading spouses.","tw.pedigree.alternate-spouses.select":"Select the preferred spouse for {name}","tw.pedigree.ancestors.1":"Ancestors of {person1}","tw.pedigree.ancestors.2":"Ancestors of {person1} and {person2}","tw.pedigree.children-button.1":"Children of {person1}","tw.pedigree.children-button.2":"Children of {person1} and {person2}","tw.pedigree.children.button":"Children","tw.pedigree.children.count":"{count, plural,  =0 {No children.} one {# child.} other {# children.}}","tw.pedigree.children.loading":"Loading children.","tw.pedigree.collapse-children-of-parent.label":"Collapse Children of {parent}","tw.pedigree.collapse-children-of-parents.label":"Collapse Children of {parent1} and {parent2}","tw.pedigree.collapse-children.1":"Collapse Descendants of {parent1}","tw.pedigree.collapse-children.2":"Collapse Descendants of {parent1} and {parent2}","tw.pedigree.collapse-parents.1":"Collapse Ancestors of {parent1}","tw.pedigree.collapse-parents.2":"Collapse Ancestors of {parent1} and {parent2}","tw.pedigree.collapse-siblings.label":"Collapse Siblings of {name}","tw.pedigree.confidential.label":"Confidential","tw.pedigree.copy-to-group.button":"Copy to Group","tw.pedigree.copy.heading":"People to copy ({count})","tw.pedigree.copy.instructions":"Select who you want to copy from the tree. When you are done, click <0>Copy to Group</0> above.","tw.pedigree.deleted-person.error":"This person was deleted.","tw.pedigree.descendant-generation":"Descendant Generation {count}","tw.pedigree.descendants.1":"Descendants of {person1}","tw.pedigree.descendants.2":"Descendants of {person1} and {person2}","tw.pedigree.divorce":"Divorce: {date}","tw.pedigree.error":"An error occurred.","tw.pedigree.error.not-found":"This person (PID) cannot be found.","tw.pedigree.error.refreshing":"An error occurred. Refreshing pedigree.","tw.pedigree.expand-children-of-parent.label":"Expand Children of {parent}","tw.pedigree.expand-children-of-parents.label":"Expand Children of {parent1} and {parent2}","tw.pedigree.expand-children.1":"Expand Descendants of {parent1}","tw.pedigree.expand-children.2":"Expand Descendants of {parent1} and {parent2}","tw.pedigree.expand-duplicate-info.label":"This line is already expanded. This person may be connected into the tree as his or her own ancestor.","tw.pedigree.expand-parents.1":"Expand Ancestors of {parent1}","tw.pedigree.expand-parents.2":"Expand Ancestors of {parent1} and {parent2}","tw.pedigree.expand-siblings.label":"Expand Siblings of {name}","tw.pedigree.family-tree":"Family Tree","tw.pedigree.fanchart":"Fanchart View","tw.pedigree.fanchart-legend-tooltip":"Select an item in the legend to highlight it everywhere it appears on the fan chart. Select the same item again to turn off the highlight.","tw.pedigree.fanchart-release-message":"Thanks for trying the new Fan Chart pedigree. The old version will be available through {month}. Please tell us what you think.","tw.pedigree.fanchart-unknown":"Unknown","tw.pedigree.fanchart-view-options.pref-label.showBirthPlace":"Birth Place","tw.pedigree.fanchart-view-options.pref-label.showFamilyLines":"Family Lines","tw.pedigree.fanchart-view-options.pref-label.showOrdinances":"Ordinances","tw.pedigree.fanchart-view-options.pref-label.showPhotos":"Photos","tw.pedigree.fanchart-view-options.pref-label.showResearchHelps":"Research Helps","tw.pedigree.fanchart-view-options.pref-label.showSources":"Sources","tw.pedigree.fanchart-view-options.pref-label.showStories":"Stories","tw.pedigree.fanchart-view-options.pref-label.showSpouses":"Spouses","tw.pedigree.fanchart-view.cannot-request":"Cannot Request","tw.pedigree.fanchart-view.data-problems":"Data Problems","tw.pedigree.fanchart-view.in-progress":"In Progress","tw.pedigree.fanchart-view.record-hints":"Record Hints","tw.pedigree.fanchart-view.request":"Request","tw.pedigree.fanchart-view.research-suggestions":"Research Suggestions","tw.pedigree.fanchart-view.sets.1":"0","tw.pedigree.fanchart-view.sets.2":"1-4","tw.pedigree.fanchart-view.sets.3":"5-9","tw.pedigree.fanchart-view.sets.4":"10+","tw.pedigree.generation":"Generation {count}","tw.pedigree.go-to-landscape":"Go to Landscape Pedigree","tw.pedigree.home.button":"Home","tw.pedigree.landscape":"Landscape View","tw.pedigree.load-spouse.error":"Failed to load spouse and children.","tw.pedigree.marriage":"Marriage: {date}","tw.pedigree.more-accessible-pedigree":"For a more accessible experience, please use the landscape pedigree.","tw.pedigree.onboarding.add-info":"Tell Us a Little About Yourself","tw.pedigree.onboarding.begin-tree":"Begin Your Family Tree","tw.pedigree.onboarding.edit-your-name":"Edit Your Name","tw.pedigree.onboarding.get-started":"Get started by entering your name and birth date into the community Family Tree. As you enter information, we\'ll help you find more records and information about your family.","tw.pedigree.onboarding.get-started-note":"Important: Anything you add about yourself or any living person is kept private.","tw.pedigree.onboarding.get-started-yourself":"Your information is secure. Only you will be able to see the information you enter about living people. <0>Learn More</0>","tw.pedigree.onboarding.more-info":"When you add the date and place, we can provide better records and information about your family.","tw.pedigree.onboarding.save-failed":"Save failed","tw.pedigree.onboarding.select-sex":"Select Sex (Required)","tw.pedigree.onboarding.sex-required":"Male or female is required to add a spouse or children.","tw.pedigree.options.button":"Options","tw.pedigree.options.cet-header":"CET","tw.pedigree.options.cet-num-persons":"Persons in Tree","tw.pedigree.options.fgt-header":"Group","tw.pedigree.options.fullscreen":"Toggle fullscreen mode","tw.pedigree.options.generation1":"1","tw.pedigree.options.generation2":"2","tw.pedigree.options.generation3":"3","tw.pedigree.options.generation4":"4","tw.pedigree.options.generation5":"5","tw.pedigree.options.generation6":"6","tw.pedigree.options.generation7":"7","tw.pedigree.options.generations":"Generations","tw.pedigree.options.group-change-dialog-content":"Your starting person has been set by the administrator. You may be able to change it after the pilot.","tw.pedigree.options.group-change-dialog-title":"Starting Person","tw.pedigree.options.group-details":"Tree Details","tw.pedigree.options.group-header":"Group Options","tw.pedigree.options.group-start-change":"Change","tw.pedigree.options.group-start-label":"Starting person in this tree:","tw.pedigree.options.public-tree-header":"Tree Options","tw.pedigree.options.view-details":"View tree details","tw.pedigree.pedigree-heading.1":"Pedigree of {person1}","tw.pedigree.pedigree-heading.2":"Pedigree of {person1} and {person2}","tw.pedigree.pedigree-view-options.caveat-in-progress":"(In Progress)","tw.pedigree.pedigree-view-options.pref-label.darkMode":"Dark Mode","tw.pedigree.pedigree-view-options.pref-label.showAltRelationships":"Alternate Parents and Spouses","tw.pedigree.pedigree-view-options.pref-label.showChildren":"Children","tw.pedigree.pedigree-view-options.pref-label.showDataQualityIssues":"Data Problems","tw.pedigree.pedigree-view-options.pref-label.showMarriages":"Marriages","tw.pedigree.pedigree-view-options.pref-label.showPortraits":"Portraits","tw.pedigree.pedigree-view-options.pref-label.showRecordHints":"Record Hints","tw.pedigree.pedigree-view-options.pref-label.showResearchSuggestions":"Research Suggestions","tw.pedigree.pedigree-view-options.pref-label.showTempleOpportunities":"Temple Ordinances","tw.pedigree.pedigree-view-options.show.label":"Show","tw.pedigree.pedigree-view-options.temple.available":"Available","tw.pedigree.pedigree-view-options.temple.in-progress":"In Progress","tw.pedigree.pedigree-view-options.temple.needs-information":"Needs Information","tw.pedigree.portrait":"Portrait View","tw.pedigree.preferred-parents.error":"An error occurred setting preferred parents.","tw.pedigree.preferred-parents.success":"The preferred parents were successfully saved.","tw.pedigree.preferred-spouse.error":"An error occurred setting preferred spouse.","tw.pedigree.preferred-spouse.success":"The preferred spouse was successfully saved.","tw.pedigree.print":"Print","tw.pedigree.relationship-changed.action":"Refresh Pedigree","tw.pedigree.relationship-changed.body":"A relationship change was detected, refresh pedigree to get the latest changes.","tw.pedigree.relationship-changed.dismiss":"Dismiss","tw.pedigree.relationship-changed.title":"Relationship Change","tw.pedigree.remove-from-list.description":"By removing {name}, the following people will also be removed:","tw.pedigree.remove-from-list.heading":"Remove From List","tw.pedigree.remove.action":"Remove","tw.pedigree.retry":"Retry","tw.pedigree.set-alt-parents.heading":"Set Preferred Parents for {name}","tw.pedigree.set-alt-spouse.heading":"Set Preferred Spouse for {name}","tw.pedigree.sex.FEMALE.label":"Female","tw.pedigree.sex.MALE.label":"Male","tw.pedigree.sex.UNSPECIFIED.label":"Unspecified","tw.pedigree.sibling":"Sibling View","tw.pedigree.sibling-alt-spouses-and-children":"Spouses and Children","tw.pedigree.sibling-alt-spouses-and-children-expand-heading":"{name}: Spouses and Children","tw.pedigree.sibling-alt-spouses-children-count":"Children ({count})","tw.pedigree.sibling-select-person.label":"Select {name}","tw.pedigree.review-record":"Review","tw.pedigree.remove-person-to-copy.label":"Remove {personName} from copy list.","tw.pedigree.remove-person-from-copy.label":"Remove from copy list.","tw.pedigree.add-person-to-copy.label":"Add {personName} to copy list.","tw.pedigree.add-person-copy.label":"Select and add to copy list.","tw.pedigree.descendancy":"Descendancy View","tw.pedigree.descendancy-expand.action":"Expand","tw.pedigree.descendancy-select-ancestor.heading":"Select an Ancestor","tw.pedigree.descendancy-select-ancestor.description":"Select an ancestor to view their tree","tw.pedigree.descendancy-spouse.label":"Spouse","tw.pedigree.descendancy.incomplete-title":"More Than 700 Descendants","tw.pedigree.descendancy.incomplete-message":"This person has too many descendants to load. We can only show up to 3 generations at a time.","tw.pedigree.descendancy.error-expanding":"An error occurred expanding the children of {name}.","tw.pedigree.descendancy.spouses-and-children":"Spouses and children of {name}","tw.pedigree.descendancy.children-of-spouses":"Children of {name} and {spouseName}","tw.pedigree.sibling-select.action":"Select","info-cards.activities.header":"Activities","info-cards.activities.heritage.description":"Learn about {shortName}\'s homeland.","info-cards.activities.heritage.header":"Heritage","info-cards.activities.traditional-dress.description":"Put your face in a costume from {shortName}\'s homelands.","info-cards.activities.traditional-dress.header":"Traditional Dress","info-cards.additional-children.label":"+{count, plural, =0 {No More Children} one {# More Child} other {# More Children}}","info-cards.couple.header":"Spouse and Children","info-cards.create-account-img.alt":"Create a free account to view more about your family.","info-cards.create-account.action":"Create account","info-cards.create-account.description":"As a nonprofit, we offer free help to those looking to learn the details of their family story.","info-cards.create-account.header":"Discover Even More","info-cards.create-free-account.action":"Create a FREE Account","info-cards.family-members.header":"Family Members","info-cards.family-timeline.header":"Family Time Line","info-cards.info.label":"Info","info-cards.label.children":"Children","info-cards.label.parents":"Parents","info-cards.label.siblings":"Siblings","info-cards.label.spouse":"Spouse","info-cards.life-of.header":"Brief Life History of {shortName}","info-cards.memories.header":"Photos and Memories","info-cards.name-meaning.header":"Name Meaning","info-cards.name-meaning.no-info":"We don\u2019t have any information about this name.","info-cards.no-memories.do-you-have-a-story":"Do you have a story about {gender, select, male {him} female {her} other {them}} that you would like to share?","info-cards.no-memories.do-you-know.subheader":"Do you know {shortName}?","info-cards.no-memories.or.text":"or","info-cards.no-sources.description":"There are no historical documents attached to {shortName}.","info-cards.parents.header":"Parents and Siblings","info-cards.share.action":"Share","info-cards.sources.header":"Sources","info-cards.sources.image.description":"Image Not Available","info-cards.sources.source-requires-login":"To see this source, please sign in or create a free FamilySearch Account.","info-cards.sources.view-all-sources-this-person":"<0>Sign In</0> or <1>Create a FREE Account</1> to view more sources for {shortName}.","info-cards.sources.view-all-sources":"<0>Sign In</0> or <1>Create a FREE Account</1> to view more sources for this person.","info-cards.story-card.header":"Story Highlight","info-cards.timeline.age.label":"Age","info-cards.timeline.aria.timeline-event-info":"Time Line Event Information","info-cards.timeline.event-image.alt":"Event Image","info-cards.timeline.filters.children.action":"Children","info-cards.timeline.filters.custom-events.action":"Custom Events","info-cards.timeline.filters.events.subheading":"Events","info-cards.timeline.filters.historic-events.action":"Historic Events","info-cards.timeline.filters.other-events.action":"Other Events","info-cards.timeline.filters.parents.action":"Parents","info-cards.timeline.filters.relationships.subheading":"Relationships","info-cards.timeline.filters.residence.action":"Residence","info-cards.timeline.filters.siblings.action":"Siblings","info-cards.timeline.filters.spouse.action":"Spouses","info-cards.timeline.filters.vital-events.action":"Vital Events","info-cards.timeline.header":"Time Line","info-cards.timeline.hide-route.action":"Hide Route","info-cards.timeline.label.map":"Map","info-cards.timeline.leaving-fs.heading":"Leaving FamilySearch","info-cards.timeline.leaving-fs.description":"This link will take you to a different website. It will open as a new tab or window on your browser.","info-cards.timeline.marriage.label":"Marriage: {date}","info-cards.timeline.no-events-to-display":"There are no events to display on the time line. Either add an event or include more events using Show.","info-cards.timeline.parents-and-siblings.label":"Parents and Siblings","info-cards.timeline.show-route.action":"Show Route","info-cards.timeline.show.action":"Show","info-cards.timeline.spouse-and-children.label":"Spouse and Children","info-cards.timeline.view-event.action":"View Event","info-cards.timeline.view-list.action":"View List","info-cards.timeline.view-map.action":"View Map","info-cards.timeline.view-record.action":"View Record","info-cards.timeline.view-with-map.action":"View With Map","info-cards.view-all.action":"View All","info-cards.view-source-image.aria-label":"View Source Image","info-cards.world-events.age":"Age {age}","info-cards.world-events.header":"World Events","info-cards.write-a-story.action":"Write a story","info-cards.more.label":"More","info-cards.computer-generated-info.description":"This life history was computer-generated. It is based on the information on the Details tab. To change it, edit the data on the <0>Details</0> tab. <1>Learn more</1>","info-cards.user-generated-info.description":"This life history was written by a FamilySearch user. To edit it, go to the Details tab and edit the Brief Life History field. <0>Learn more</0>","info-cards.info-deleted.description":"This information has been deleted from this person by the original owner.","info-cards.possible-related-names.label":"Possible Related Names","avatar.online.aria-label":"User is online","avatar.offline.aria-label":"User is offline","carousel.backward.slider-button":"Slide backward","carousel.forward.slider-button":"Slide forward","nonstandardized.dateandplace":"Non-standardized Date and Place","nonstandardized.date":"Non-standardized Date","nonstandardized.place":"Non-standardized Place","scroll.left":"Scroll left","scroll.right":"Scroll right","select.item.action":"Select Item","select.all.action":"Select All","zion.paginator.count":"Results per page:","zion.paginator.prevPage":"Go to previous {label}. Currently on {label} {displayIndex} of {length}","zion.paginator.page":"Page","zion.paginator.changePage":"Enter {label} number","zion.paginator.pageInfo":"of {pages, number}","zion.paginator.nextPage":"Go to next {label}. Currently on {label} {displayIndex} of {length}","status.overlay.dismiss.action":"Dismiss","textfield.clear.text.action":"Clear text entered in this field","textfield.reset.text.action":"Undo my recent edits","textfield.password.text.action":"Show/Hide the password","textfield.characters-remaining.aria-label":"{count, plural, one {# character} other {# characters}} remaining","combo-menu.no-option":"Please select an option","alertBanner.notice":"Important Notice","audio-player.error-playing":"Error playing audio","audio-player.playback-position":"Playback position","audio-player.playback-position-description":"{elapsedMinutes} minutes {elapsedSeconds} seconds of {totalMinutes} minutes {totalSeconds} seconds","audio-player.generic-caption-track":"User-contributed content. No captions are available.","audio-player.play":"Play","audio-player.pause":"Pause","audio-recorder.low-input-level":"Try speaking a little louder","audio-recorder.recording-error":"There was a recording error. Please try again.","audio-recorder.cant-access-mic":"To record audio, please allow access to your microphone.","audio-recorder.no-mic-found":"No microphone found. Please try again.","audio-recorder.time-limit-reached":"Sorry\u2026 Recording limit reached.","audio-recorder.start-recording":"Start Recording","audio-recorder.pause-recording":"Pause Recording","audio-recorder.saving-audio":"Saving","dismiss-input-chip.selectable.with-description.aria-label":"Remove {chipName} {ariaChipDescription}","dismiss-input-chip.selectable.aria-label":"Remove {chipName} checkbox","dismiss-input-chip.not-selectable.with-description.aria-label":"Dismiss {chipName} {ariaChipDescription}","dismiss-input-chip.not-selectable.aria-label":"Dismiss {chipName}","infosheet.dock-to-right":"Dock to Right","infosheet.dock-to-bottom":"Dock to Bottom","progress-overlay.cancel":"Click to cancel","progress-overlay.header":"{totalItemCount, plural, =1 { {status, select, stillProcessing {Processing 1 item} allCompleted {1 item successful} allFailed {Can\'t process item} other {Processing 1 item} } } other { {status, select, stillProcessing {Processing {inProgressItemCount} of {totalItemCount} items} allCompleted {{successfulItemCount} of {totalItemCount} items successful} allFailed {Can\'t process items} other {Processing {inProgressItemCount} of {totalItemCount} items}} } }","progress-overlay.dismiss-all":"Click to dismiss all","progress-overlay.collapse":"Click to collapse","progress-overlay.expand":"Click to expand","zoom-pan.controls.zoom-in.button":"Zoom In","zoom-pan.controls.zoom-out.button":"Zoom Out","zoom-pan.controls.pan-up.button":"Pan Up","zoom-pan.controls.pan-down.button":"Pan Down","zoom-pan.controls.pan-left.button":"Pan Left","zoom-pan.controls.pan-right.button":"Pan Right","zoom-pan.adjustments.rotate-right.button":"Rotate Right","zoom-pan.adjustments.rotate-left.button":"Rotate Left","zoom-pan.controls.reset-view.button":"Reset View","responsive-table.column.sorted-aria-label":"{combinedColumn}, sorted by {column}","table.sortable-caption":"Column headers with buttons are sortable.","zion.paginator.all":"All","usabilla.fallback.error":"An error has prevented the requested action. If you have a popup blocker enabled, it might be causing this error. Please disable the popup blocker for this site to proceed.","usabilla.fallback.visit-community":"Additionally, you can visit the <0>FamilySearch Community</0> for help or to report an issue.","upload-progress.header":"{totalFileCount, plural, =1 { {status, select, stillProcessing {Uploading 1 file} allCompleted {1 file uploaded} allFailed {Upload failed} other {Uploading 1 file} } } other { {status, select, stillProcessing {Uploading {inProgressFileCount} of {totalFileCount} files} allCompleted {{successfulFileCount} of {totalFileCount} files uploaded} allFailed {Upload failed} other {Uploading {inProgressFileCount} of {totalFileCount} files} } } }","upload-progress.message.success":"Successfully uploaded {fileName}","upload-progress.message.failed":"Failed to upload {fileName}","upload-progress.message.uploading":"Uploading {fileName}","COF.metadataIssues.avoidCombiningMultiple":"Avoid combining multiple non-consecutive dates on the cover","COF.metadataIssues.combineConsecutiveDates":"Combine multiple consecutive dates on the cover","COF.metadataIssues.useListingDate":"Use the listing date when no date is on the cover and records are alphabetical or non-chronological","COF.metadataIssues.useTheDateOnTheCover":"Use the date on the cover","COF.metadataIssues.whenNoDateOnCover":"When no date on the cover, use the record creation date","ChangeHistory.LastChangedBy":"Last Changed: {date} by {user}","ChangeHistory.ShowHistoryButtonText":"Show Change History","ChangeHistory.archivalReferenceNumber":"Archival Reference Number","ChangeHistory.archivalReferenceNumberRemoved":"The Archival Reference Number was removed.","ChangeHistory.backButtonText":"Back","ChangeHistory.by":"by","ChangeHistory.cancel":"Cancel","ChangeHistory.changeHistorySub":"Changes to Image Group Data","ChangeHistory.changeHistoryTitle":"Change History","ChangeHistory.changedAt":"Changed at {time} by {user}","ChangeHistory.creator":"Creator","ChangeHistory.creatorRemoved":"Creator Removed","ChangeHistory.currentVersion":"Current Version","ChangeHistory.currentVersionDescription":"This is the latest metadata so the Restore button is not available.","ChangeHistory.dateAndTimeSelect":"Date and Time of Change","ChangeHistory.errorRestoreMessage":"Error restoring changes","ChangeHistory.failureRestoreMessage":"Some fields may not have restored properly. Please double check.","ChangeHistory.languagesRemoved":"The language was removed.","ChangeHistory.loadChangeHistory":"Load Change History","ChangeHistory.next":"Next","ChangeHistory.none":"none","ChangeHistory.previous":"Previous","ChangeHistory.removeVolume":"Remove Volume","ChangeHistory.restore":"Restore","ChangeHistory.restoreDialogContent":"This will change the information to what it was on <br /> {date}","ChangeHistory.restoreDialogHeader":"Restore a previous version","ChangeHistory.restoreVolume":"Restore Volume","ChangeHistory.selectLabel":"Change date and time","ChangeHistory.successRestoreMessage":"Successfully restored changes","ChangeHistory.titleRemoved":"The title was removed.","ChangeHistory.unknown":"Unknown","ChangeHistory.volume":"Volume","ChangeHistory.volumeRemoved":"The volume was removed.","Copy Image Group Number":"","CorrectMetadataFinishedDialog.SkippedMultipleItemsText":"{number} items were skipped.","CorrectMetadataFinishedDialog.continueEditing":"Continue Editing","CorrectMetadataFinishedDialog.finish":"Finish","CorrectMetadataFinishedDialog.finishError":"Error returning skipped and unreviewed items.","CorrectMetadataFinishedDialog.inProgressByOthersSubtext":"You can still submit your changes.","CorrectMetadataFinishedDialog.numInProgressByOthersSingleText":"{number} items are in progress by other users.","CorrectMetadataFinishedDialog.numMarkedCorrectMultipleText":"{number} items were marked correct.","CorrectMetadataFinishedDialog.numMarkedCorrectSingleText":"1 item was marked correct.","CorrectMetadataFinishedDialog.numRemainingMultipleText":"{number} items still need to be reviewed.","CorrectMetadataFinishedDialog.numRemainingSingleText":"1 item still needs to be reviewed.","CorrectMetadataFinishedDialog.oneInProgressByOthersSingleText":"1 item is in progress by another user.","CorrectMetadataFinishedDialog.onlySkippedSingleText":"1 item was skipped.","CorrectMetadataFinishedDialog.statusError":"Error retrieving item statuses.","CorrectMetadataFinishedDialog.subHeading":"Here\'s a summary of the {number} items in this group:","CorrectMetadataFinishedDialog.summary":"Summary","CorrectMetadataFinishedDialog.workSummaryMessage":"You can continue making changes, or click <strong>Finish</strong> to return skipped and unreviewed items. Corrected items were submitted when you marked the metadata correct.","DraggableCheckboxList.button.resetOrder":"Reset Order","DraggableCheckboxList.checkbox.selectAll":"Select All","EditableCoverage.recordNotStandardized":"This place is not standardized. You can still save your changes.","EditableCoverage.recordType":"Record Type","EditableCoverage.toggle.applyToAllVolumes":"Apply to all volumes","EditableCoverages.closeAll":"Close All","EditableCoverages.coverageDataIsComplete":"Coverages are complete","EditableCoverages.editAndSaveChanges":"Please review and correct these errors, then save your changes","EditableCoverages.errorsHeader":"This group has the following errors:","EditableCoverages.missingDate":"One or more coverages are missing a date","EditableCoverages.missingPlace":"One or more coverages are missing a place","EditableCoverages.missingRecordType":"One or more coverages are missing a record type","EditableCoverages.noErrorsHeader":"Please review this group data for incomplete coverages. If there are no errors mark the coverages as complete.","EditableCoverages.openAll":"Open All","EditableCoverages.placeAll":"Place","EditableCoverages.placeHelperText":"This place applies to all the record types and dates below.","EditableCoverages.placeOrigTooLong":"A place of origin in one or more coverages is greater than 75 characters in length","EditableCoverages.selectAll":"Select All","EditableCoverages.tooManyCoverages":"10 or more coverages","EditableCoverages.unacceptableDateRange":"One or more coverages have an unacceptable date range","EditableCoverages.unacceptableFutureDate":"One or more coverages have a date that is at least a year in the future","EditableCoverages.unstandardizedDate":"One or more coverages have an unstandardized date","EditableCoverages.unstandardizedPlace":"One or more coverages have an unstandardized place","EditableCoverages.unstandardizedRecordType":"One or more coverages have an unstandardized record type","EditingNotAvailableDialog.contentText":"Another user is editing this item. You may try to edit this item again later.","EditingNotAvailableDialog.headingText":"Editing Not Available.","FormValidation.notEmpty":"Field cannot be empty.","GroupDataHeader.editButtonText":"Edit","GroupDataHeader.errorMessage":"We encountered an unexpected error. Please try again later.","GroupDataHeader.finishEditRecordMetadataReviewDialogBody":"You can continue making changes, or click <strong>Yes, Save and Submit Review</strong> to save your changes and complete the Record Metadata Review for this image group. This will return the image group for reprocessing.","GroupDataHeader.finishEditRecordMetadataReviewTitle":"Is everything correct?","GroupDataHeader.finishEditReviewButton":"Yes, Save and Submit Review","GroupDataHeader.finishRecordMetadataReviewBackButton":"Back","GroupDataHeader.finishRecordMetadataReviewDialogBody":"You can go back to make changes, or click <strong>Yes, Submit Review</strong> to complete the Record Metadata Review for this image group. The records will be published and made searchable for users.","GroupDataHeader.finishRecordMetadataReviewTitle":"Do you want to submit the review?","GroupDataHeader.finishReviewButton":"Yes, Submit Review","GroupDataHeader.heading":"Image Group Data","GroupDataHeader.metadataItemOfGroupTotal":"Metadata describing Item {x} of {y}","GroupDataHeader.nextButton":"Next","GroupDataHeader.prevButton":"Previous","GroupDataHeader.tooltipAria":"More item information","GroupDataHeader.tooltipDescription":"Item {itemNumber} is a group containing images {startIndex}\u2013{endIndex} of an image group that originally had {initialImages} images.","GroupDataHeader.tooltipLabel":"Item {index} of {total}","GroupDataHeader.viewAnotherButton":"View another item","GroupDataHeader.wholeGroup":"Metadata describing the entire group of images","GroupHeader.okayButton":"Okay","GroupHeader.recordMetadataReviewBackToDashboardButton":"Back to Dashboard","GroupHeader.recordMetadataReviewCheckboxInstructions":"This image group needs to be divided and reviewed.","GroupHeader.recordMetadataReviewDialogBody":"This image group has been indexed by a computer, but the metadata must be reviewed for accuracy before the new records are published. Please carefully confirm or correct the metadata so that the records will be searchable for users.","GroupHeader.recordMetadataReviewDialogDoNotShowAgainCheckboxLabel":"Don\'t show this again","GroupHeader.recordMetadataReviewEditMetadataButton":"Edit Metadata","GroupHeader.recordMetadataReviewModalTitle":"Please Review for Accuracy","GroupHeader.recordMetadataReviewTitle":"Record Metadata Review","GroupSelector.label":"View Information for:","GroupSelector.optionLabel":"Volume {volumeNumber}","Image Group Details":"","Image group number copied to clipboard.":"","ImageBrowserViewer.hoverButtonText":"End Item","ImageBrowserViewer.removeDivider":"Remove Divider","ImageGroupError.backToSearch":"Back To Search","ImageGroupError.goToExplore":"Go To Explore Images","ImageGroupError.jiapuUnauthorizedBody":"FamilySearch International has recently suspended access to certain Chinese family records as it reviews developments with respect to privacy laws, contractual agreements and technology requirements. Thank you for your understanding and continued support.","ImageGroupError.notFoundBody":"We are unable to find this image group.","ImageGroupError.notFoundHeader":"Image Group Not Found","ImageGroupError.tryInOldViewer":"View in old image viewer","ImageGroupError.unauthorizedBody":"We don\'t have permission to share this image group. Access is usually determined by the records\' creator or custodian or by data privacy laws.","ImageGroupError.unauthorizedHeaderLocal":"Unable to Display Image Group","ImageGroupError.unavailableBody":"Try refreshing the page, or come back later.","ImageGroupError.unavailableHeader":"Cannot Display Image Group","ImageOrgainize.resetToEdit":"Reset Status to Edit","ImageOrganise.taskNotAvailable":"Task Not Available","ImageOrganize.resetItemCorrectStatusMessage":"This item is marked correct. To enable editing, reset the status in the bottom-right corner of the screen.","ImageOrganize.resetItemSkipStatusMessage":"You skipped this item. To enable editing, reset the status in the bottom-right corner of the screen.","ImageOrganizeFooter.dialogClose":"Close","ImageOrganizeFooter.dialogCompleteWithoutDivision":"Would you like to correct the metadata for this group or exit the Image Organize tool?","ImageOrganizeFooter.dialogCompletedHeading":"Division complete","ImageOrganizeFooter.dialogCompletedMetadatContentText":"The image group was successfully divided into {count} items. Would you like to correct the metadata for this group or exit the Image Organize tool?","ImageOrganizeFooter.dialogCompletedMetadatContentText_plural":"The image group was successfully divided into {count} items. Would you like to correct the metadata for this group or exit the Image Organize tool?","ImageOrganizeFooter.dialogCorrectMetadata":"Correct Metadata","ImageOrganizeFooter.dialogInProgressContent":"Please wait while the images are divided into groups. This should only take a few moments.","ImageOrganizeFooter.dialogLoadingMessage":"{percentComplete}% complete","ImageOrganizeFooter.dialogProgressHeading":"Image group division in progress","ImageOrganizeFooter.dialogStatusErrorHeading":"Error retrieving division progress.","ImageOrganizeFooter.dialogUpdateErrorHeading":"Error dividing image group.","ImageOrganizeFooter.errorMarkingItem":"Error marking metadata as correct","ImageOrganizeFooter.exitDivideDialogMessage":"Exit","ImageOrganizeFooter.noDivisionsDialog.body1":"During this step, image groups can be divided into smaller subgroups of related images.","ImageOrganizeFooter.noDivisionsDialog.body2":"If all thumbnails have been reviewed and this group does not need to be divided, please continue.","ImageOrganizeFooter.noDivisionsDialog.title":"No divisions were added","ImageOrganizeFooter.statusErrorMessage":"","ImageOrganizeFooter.updateErrorMessage":"We were unable to submit your image group divisions. Please try again later.","ImageOrganizeHeader.edit":"Edit","ImageOrganizeHeader.editDisabledBoydy":"You only reserved the Correct Metadata task for Item {initialItemNumber}.","ImageOrganizeHeader.editDisabledHeader":"Task Not Available","ImageOrganizeHeader.heading":"Item {itemNumber}","ImageOrganizeHeader.subHeading":"Metadata describing Item {itemNumber} of {itemCount}","ImageOrganizeHeader.viewAnotherItem":"View Another Item","ImageOrganizeHeader.wholeGroup":"Metadata describing the entire group of images","ImageViewerHeader.itemNumber":"Item {itemNumber}","ImageViewerHeader.unknown":"Unknown Image Group","IndexExploreHeader.Citation.Overlay.GroupNumberExplanation.data":"Film numbers were used for microfilms, but with immediate digitalization of records, FamilySearch now uses Group Numbers","IndexExploreHeader.Citation.Overlay.GroupNumberExplanation.filmNumber":"Film Number","IndexExploreHeader.Citation.Overlay.GroupNumberExplanation.heading":"Film and Image Group Number","IndexExploreHeader.Citation.Overlay.GroupNumberExplanation.learnMore":"Learn More","IndexExploreHeader.Citation.Overlay.Title":"Citation","IndexExploreHeader.SourceBox.DefaultSourceTitle":"(image {imageNumber})","IndexExploreHeader.SourceBox.MenuListItem.AddPersonToMySourceBox":"Add {personName} to Source Box","IndexExploreHeader.SourceBox.MenuListItem.AddToMySourceBox":"Add Image to Source Box","IndexExploreHeader.SourceBox.MenuListItem.GoToSourceBox":"Go to My Source Box","IndexExploreHeader.SourceBox.OpenMenuButton":"Source Box","IndexExploreHeader.attachToTree":"Attach to Tree","IndexExploreHeader.finishCorrecting":"Finish Correcting","IndexExploreHeader.viewRecordNames":"View record names","Internal.Crop":"Crop","Internal.Deskew":"Deskew","Internal.FolderRework":"Folder Rework","Internal.ReprocessFolder":"Reprocess Folder","Internal.ReprocessOperations":"Image operations to apply","Internal.RequestSubmitted":"Request submitted","Internal.ReworkButtons.RequestRework":"Request Rework","Internal.Sharpen":"Sharpen","Internal.approveFailed":"Approval failed","Internal.approveRework":"Approve Rework","Internal.approveSuccess":"Approval succeeded","Internal.approved":"Approved","Internal.by":"By:","Internal.cancelFailed":"Cancel failed","Internal.cancelRework":"Cancel Rework","Internal.cancelReworkRequest":"Cancel Rework Request","Internal.cancelReworkRequestFailed":"Cancel failed","Internal.cancelReworkRequestSuccess":"Cancel succeeded","Internal.cancelSuccess":"Cancel succeeded","Internal.changeHistoryDuplicate":"Reprocessing has already been requested for this folder.","Internal.changeHistoryInfo":"Please wait up to 60 minutes for reprocessing to complete","Internal.changeHistoryReprocessed":"Status: Reprocessed","Internal.changeHistoryRequested":"Status: Requested","Internal.changeHistoryTitle":"Change History","Internal.denyFailed":"Deny failed","Internal.denyNote":"Why is this request for rework being canceled?","Internal.denyRework":"Deny Rework","Internal.denySuccess":"Deny succeeded","Internal.manageJiapuGroup":"Manage Jiapu Group","Internal.note":"Notes:","Internal.requestFailed":"Rework request failed","Internal.requestSuccess":"Rework has been requested","Internal.requested":"Requested","Internal.reworkNote":"Why does this folder require rework?","Internal.status":"Status:","Internal.submit":"Submit","ItemInProgressByAnotherUser.editingUnavailable":"Editing Unavailable","ItemInProgressByAnotherUser.subtitle":"Another user is correcting this item.","LanguagePicker,errorMessage":"This field did not save correctly.","LanguagePicker.auotsuggestFieldPlaceholder":"Add a language","ManageVolumeSetInfoSheet.button.deleteSelected":"Delete Selected","ManageVolumeSetInfoSheet.button.deleteThisJiapuGroup":"Delete this Jiapu Group","ManageVolumeSetInfoSheet.button.volumes":"Volumes","ManageVolumeSetInfoSheet.label.addImageGroupNumbers":"Add Image Group Numbers (DGS)","ManageVolumeSetInfoSheet.label.selectToDelete":"Select to delete this jiapu group","ManageVolumeSetInfoSheet.overlay.saveSuccessful":"Save successful","ManageVolumeSetInfoSheet.overlay.volumeSetDeleted":"Jiapu group deleted, redirecting to jiapu search...","ManageVolumeSetInfoSheet.overlay.volumesUpdated":"Volumes have been updated","ManageVolumeSetInfoSheet.paragraph.noVolumes":"No image group IDs in this jiapu group. You can either add volumes or check \\"Select to delete this jiapu group\\" to completely remove this jiapu group.","ManageVolumeSetInfoSheet.placeholder.imageGroupNumbers":"Enter image group numbers (DGS) in multiple lines or separated by commas","ManageVolumeSetInfoSheet.subheader.editImageGroupData":"Edit Image Group Data","ManageVolumeSetInfoSheet.subheader.organizeVolumes":"Organize Volumes","ManageVolumeSetInfoSheet.subheaderSubheading":"Add more volumes, click the checkbox to delete volumes, or drag and drop the item in the list to re-arrange the order.","ManageVolumeSetInfoSheet.subtitle.jiapuGroupId":"Jiapu Group ID: {groupId}","ManageVolumeSetInfoSheet.tabTitle.correctMetadata":"Correct Metadata","ManageVolumeSetInfoSheet.tabTitle.organizeVolumes":"Organize Volumes","ManageVolumeSetInfoSheet.title.manageJiapuGroup":"Manage Jiapu Group","NotAuthorized.heading":"Not Authorized","NotAuthorized.title":"Not Authorized","RecordType.noDate":"No Date","RecordType.noRecordType":"No Record Type","RestoreButton.currentVersion":"Current Version","RestoreButton.removeVolume":"Remove Volume","RestoreButton.restore":"Restore","Search Image Group Number":"","StatusAlreadySet.resetItemMessageHeader":"Reset item\'s status","StatusAlreadySet.resetMessageBody":"Are you sure you want to reset this item\'s status? This item will no longer be {status}.","StatusAlreadySetView.completedTitle":"Metadata marked as correct","StatusAlreadySetView.nextItem":"Next Item","StatusAlreadySetView.resetStatus":"Reset status","StatusAlreadySetView.skippedTitle":"Item skipped","StatusAlreadySetView.subtitle":"to make changes","The instructions in the sidebar will guide you through the review. The following is an overview of the entire activity.":"","TheaterOverlayHeader.divideInstructions":"Instructions: Divide Image Group","TheaterOverlayHeader.metadataInstructions":"Instructions: Correct Metadata","TheaterOverlayHeader.metadataStandards":"Metadata Standards","There was an error copying the image group number to the clipboard.":"","ViewAnotherItemDialog.autoSuggestLabel":"Item Number","ViewAnotherItemDialog.autoSuggestPlaceholder":"Type or choose from list","ViewAnotherItemDialog.browseImagesButtonText":"Browse Images","ViewAnotherItemDialog.cancelButtonText":"Cancel","ViewAnotherItemDialog.helpNavigateMessage":"The original image group has been divided into {number} groups of images called \\"items.\\"","ViewAnotherItemDialog.itemText":"Item {itemNumber}","ViewAnotherItemDialog.navigateHeading":"Navigate between items","ViewAnotherItemDialog.skippedText":"Skipped","ViewAnotherItemDialog.subHeaderTest":"View other items within \\"{place}\\"","VolumeSetMetadata.ancestralHall":"Ancestral Hall","VolumeSetMetadata.author":"Author","VolumeSetMetadata.checkbox.applyToAllVolumes":"Apply this change to all child volumes","VolumeSetMetadata.checkbox.thisIsMyJiapu":"This is my jiapu","VolumeSetMetadata.clan":"Clan","VolumeSetMetadata.clanBranches":"Clan Branches","VolumeSetMetadata.firstAncestor":"First Ancestor","VolumeSetMetadata.generationPoem":"Generation Poem","VolumeSetMetadata.jiapu":"jiapu","VolumeSetMetadata.jiapuHeading":"Jiapu Information","VolumeSetMetadata.jokbo":"jokbo","VolumeSetMetadata.jokboHeading":"Jokbo Information","VolumeSetMetadata.keizu":"keizu","VolumeSetMetadata.keizuHeading":"Keizu Information","VolumeSetMetadata.migrantAncestor":"Migrant Ancestor","VolumeSetMetadata.notes":"Notes","VolumeSetMetadata.subHeading":"Information about all {volumeCount} volumes","VolumeSetMetadata.surnames":"Surnames","VolumeSetMetadata.title":"Title","VolumeSetMetadata.toast":"If you do not see the {volumeSetSearch} you are looking for, you may need to look through the images using the View Information drop-down list to find the correct {volumeSetSearch}.","VolumeSetMetadata.volumes":"Volumes","add-highlight-linked-fields.choose-others-on-image.heading":"Select every name that should continue to link to the {fieldType}.","add-highlight-linked-fields.choose-others-on-image.more-than-thirty-heading":"All names selected will continue to link to the {fieldType} because the field is linked to too many names.","add-highlight-linked-fields.heading":"{fieldType}: {fieldValue}","add-highlight-linked-fields.instructions.heading":"Fix any mistakes that you see.","add-highlight-linked-fields.names-on-page-n.label":"Names on Page {pageNumber}","add-highlight-linked-fields.new-person":"New person","add-highlight-linked-fields.no-relationship":"No relationship","add-highlight-linked-fields.view-image-in-context.close.button":"View in Context","add-highlight.infosheet.title":"Add {name} Highlight","add-person.add-given-name":"Add given name","add-person.add-sex":"Add Sex","add-person.add-surname":"Add surname","add-person.body-text":"Must have at least one name part and a highlight.","add-person.caption":"Select a name part to continue.","add-person.dropdown-label-one":"Who was the principal person for {personName}?","add-person.dropdown-label-two":"Who is {personName} a principal person with?","add-person.error-overlay.content":"An error occurred. Please wait a few minutes and try again. Push cancel to go back, or try to refresh.","add-person.form-error-one":"Must have a name type","add-person.form-error-three":"Must have a given name or a surname","add-person.form-error-two":"Must either add a highlight or select No Highlight Possible","add-person.heading":"Add Person","add-person.highlight-button":"Add Highlight","add-person.highlight-prompt-name_gn":"Highlight the Given Name","add-person.highlight-prompt-name_sn":"Highlight the Surname","add-person.in-surrounding-records":"In surrounding records","add-person.info-button":"What is a principal person?","add-person.learn-more":"Learn More","add-person.name-type-select":"Name Type","add-person.new-record-help-message":"If the record doesn\'t exist, select New Record","add-person.new-record-prompt":"New Record","add-person.new-record-type-prompt":"Record Type","add-person.page-2-caption":"Select a record type for the new name.","add-person.page-2-subtitle":"We\'re creating a new record for {name}. What is the record type? If you are unsure of what to enter, leave it blank.","add-person.panel-back":"Back","add-person.panel-heading":"Add Name","add-person.radio-prompt":"Is this a person the record is primarily about?","add-person.record-types":"Record types","add-person.remove-given-name":"Remove given name","add-person.remove-sex":"Remove Sex","add-person.remove-surname":"Remove surname","add-person.subheading.principal-person":"3. Principal Person","add-person.subtext":"Fill in the given name and surname, then highlight the name in the record.","add-person.subtitle":"Select and fill out a name part to continue.","add-person.types-not-implemented":"Types Not Implemented","add-person.what-are-record-types":"What are record types? ","advanced-record-detection.body-1":"This record spans over <1>more than one page</1>. We recommend <3>some indexing or genealogy</3> experience to fix these families.","advanced-record-detection.body-2":"Proceed with this record?","advanced-record-detection.proceed-button":"Proceed","advanced-record-detection.skip-button":"Skip This Record","advanced-record-detection.title":"Advanced Record Detection","attach.header":"Attach To Tree","attach.hideButton":"Hide","attach.showButton":"Show","attach.viewMetaData":"View image group metadata","attach.viewMetadataSubheaderMessage":"This metadata will not be included in the source. Copy any important data into the Notes field.","cameraOperatorFeedback.CameraOperatorFeedback":"Camera Operator Feedback","cameraOperatorFeedback.additionalFeedback":"Additional Feedback","cameraOperatorFeedback.avoidUsingUnnecessary":"Avoid using unnecessary and misleading record types","cameraOperatorFeedback.createLocality":"Create locality when the locality is not available in the selection list","cameraOperatorFeedback.dateIssue":"Date issue","cameraOperatorFeedback.defective":"Defective","cameraOperatorFeedback.dontShowThisAgain":"Don\'t show this again","cameraOperatorFeedback.duplicate":"Duplicate","cameraOperatorFeedback.extraMaterialInFrame":"Extra Material in Frame","cameraOperatorFeedback.imageGroupMetadata":"Image Group Metadata","cameraOperatorFeedback.imageIndex":"Image {imageNumber}","cameraOperatorFeedback.imageNumber":"Image Number","cameraOperatorFeedback.imageQualityIssue":"Image Quality Issue","cameraOperatorFeedback.imageQualityIssues":"Image Quality Issues","cameraOperatorFeedback.improperlyCropped":"Improperly Cropped","cameraOperatorFeedback.informationObscured":"Information Obscured","cameraOperatorFeedback.meetsQualityStandards":"Meets Quality Standards","cameraOperatorFeedback.metadataTab.changedTo":"Changed To","cameraOperatorFeedback.metadataTab.issueSelection":"Issue Selection","cameraOperatorFeedback.metadataTab.latestChange":"Latest Change","cameraOperatorFeedback.metadataTab.metadataIssue":"Metadata Issue","cameraOperatorFeedback.metadataTab.operatorEntered":"Operator Entered","cameraOperatorFeedback.missingPages":"Missing Pages","cameraOperatorFeedback.motionBlurOrOutOfFocus":"Motion Blur or Out of Focus","cameraOperatorFeedback.multiple":"Multiple","cameraOperatorFeedback.noFeedback":"There is no feedback yet for this image group.","cameraOperatorFeedback.other":"Other","cameraOperatorFeedback.otherReason":"Other: {reason}","cameraOperatorFeedback.overUnderExposed":"Overexposed/Underexposed","cameraOperatorFeedback.placeIssue":"Place issue","cameraOperatorFeedback.recordTypeIssue":"Record Type issue","cameraOperatorFeedback.reflections":"Reflections","cameraOperatorFeedback.retakeRequired":"Retake Required","cameraOperatorFeedback.reviewAllImages":"Review All Images","cameraOperatorFeedback.reviewAllImagesBody":"The issue that your images were flagged for may apply to more than just those images. Please carefully check all images to identify any additional images needing rework.","cameraOperatorFeedback.selectMostAccurate":"Select the most accurate locality when the cover does not match the records","cameraOperatorFeedback.selectMostSpecific":"Select most specific locality when the cover matches the records","cameraOperatorFeedback.selectMostSpecificForMultiple":"Select the most specific locality when the records were created in multiple localities","cameraOperatorFeedback.skewed":"Skewed","cameraOperatorFeedback.unableToShow":"Unable to show camera operator feedback. Please try again later.","cameraOperatorFeedback.useMatchingRecordsMultiple":"Use the record type that matches the records (multiple record types)","cameraOperatorFeedback.useMatchingRecordsSingle":"Use the record type that matches the records (single record type)","cameraOperatorFeedback.visibleOnlyToYou":"Visible only to you and the people you report to.","cameraOperatorFeedback.wrongCaptureMode":"Wrong Capture Mode","cameraOperatorFeedback.wrongImageOrientation":"Wrong Image Orientation","changes.created":"Created","changes.not-formatted":"Change not formatted","changes.person.primary":"PRIMARY","changes.person.secondary":"SECONDARY","common-ui.back.action":"","completion-dialog.bold-text":"You\'re helping others find their family!","completion-dialog.description":"Because of your work, relatives can now find these {totalFinished} people from {placeName} and attach them to the Family Tree.","completion-dialog.description2":"Because of your work, relatives can now find {name} from {placeName} and attach them to the Family Tree.","completion-dialog.thank-you":"Thank you!","component-highlight-tips.header":"Highlight Tips","component-highlight-tips.item1":"Select and deselect highlights as needed.","component-highlight-tips.item2":"The selected highlight will turn yellow with a checkmark.","component-highlight-tips.item3":"The deselected highlight will turn blue.","component-highlight-tips.item4":"<0>Create a New Highlight</0> if no highlight","confirm-remove-event-overlay.content":"Once the event is removed, you will not be able to restore the information.","confirm-remove-event-overlay.content-2":"Please confirm this change.","confirm-remove-event-overlay.remove-button":"Remove Event","confirm-remove-overlay.as-other-button":"Relationship as other","confirm-remove-overlay.no-direct-relation-button":"Relationship as No Direct Relation","confirm-remove-overlay.not-a-person-button":"Not a person","confirm-remove-overlay.remove-button":"Remove from record","confirm-remove-overlay.title":"Are you sure?","continue.action":"Continue","coverage.addRecordTypeButton":"Add Record Type","coverage.recordTypeLabel":"Record Type","coverage.undefinedPlace":"undefined","coverageList.ariaControls":"Date ranges for {place}","coverageList.missingPlace":"Missing place","coverageList.missingRecordType":"Missing record type","coverages.image-group-contents.title":"Image Group Contents","creatorInput.placeholder":"Add a creator","dangling-field.title":"Edit {fieldName}","debug-viewer.not-authorized":"Not authorized","delete-overlay.delete-all.button":"Delete All","delete-overlay.delete-all.button_plural":"Delete ({count})","delete-overlay.delete-all.button_plural_plural":"Delete ({count})","delete-overlay.delete.button":"Delete","delete-person.table.date.label":"Date","delete-person.table.deleted-names.header":"Deleted Names","delete-person.table.header":"Deleted Persons","delete-person.table.name.label":"Name","delete-person.table.person.label":"Person","delete-person.table.restore-button":"Restore","descriptionKey":"<0>A record is a document that certifies a life event. It can be as large as a few images or as small as a line or two on a ledger or register.</0><1><0></0></1>","drag-names.button.dragToCreateRecord":"Drag name to create a new record group.","drag-names.button.newRecord":"New Record Group","drag-names.heading":"Drag Names","drag-names.instructions":"Drag names to the correct record group or create a new record. All previous relationships will be deleted once a change is saved.","drag-names.toggle.multiple":"Move multiple names","drag=names.heading":"Drag Names","draw-highlight.body":"Click anywhere and drag to create a highlight","draw-highlight.create.button":"Create highlights","edit-age.heading":"Age","edit-age.instructions":"Fix any fields that are incorrect including their highlights. Add or remove fields as necessary.","edit-dangling-field-footer.cancel":"Cancel","edit-dangling-field-footer.save":"Save","edit-dangling-field.different-page.help-tooltip-label":"Someone found this information on page {currentPage}. You came from page {previousPage}.","edit-dangling-field.different-page.info-button":"Why is this page different?","edit-dangling-field.edit-field.heading":"1. Edit the {fieldName} field.","edit-dangling-field.edit-highlight.heading":"2. Edit the highlight.","edit-dangling-field.edit-highlight.sub-heading":"Match the highlight to the transcription.","edit-dangling-field.edit-highlight.tips.body":"\u2022 Select and deselect highlights as needed.\\n\u2022 The selected highlight will turn yellow with a checkmark.\\n\u2022 The deselected highlight will turn blue.\\n\u2022 Create a New Highlight if no highlight","edit-dangling-field.edit-highlight.tips.heading":"Highlight Tips","edit-dangling-field.heading":"{fieldName}: {fieldValue}","edit-dangling-field.instructions.heading":"Fix any mistakes that you see.","edit-essential-info.add-name.button":"Add Name","edit-essential-info.add-race":"Add Race","edit-essential-info.add-race-or-color":"Add Race Or Color","edit-essential-info.add-sex":"Add Sex","edit-essential-info.delete-race.button":"Delete race","edit-essential-info.delete-sex.button":"Delete sex","edit-essential-info.instructions":"Fix any fields that are incorrect including their highlights. Add or remove fields as necessary.","edit-essential-info.must-select-name-type.error":"Must select a name type","edit-essential-info.race-or-color":"Race Or Color","edit-essential-info.sex-code":"Sex","edit-essential-info.shared-surname.caption":"This information is connected to many names. Edit linked surname.","edit-essential-info.title":"Name","edit-event.heading":"{eventType} Event","edit-event.heading-generic":"Event","edit-event.shared-house-number.caption":"Information is highlighted on a different page. Edit in context.","edit-events.delete-impedance.are-you-sure":"Are you sure?","edit-events.delete-impedance.cancel.btn":"Cancel","edit-events.delete-impedance.no-restore":"Once the event is removed, you will not be able to restore the information.","edit-events.delete-impedance.please-confirm":"Please confirm this change.","edit-events.delete-impedance.remove.btn":"Remove {eventType}","edit-events.fields.add-date":"Date","edit-events.fields.add-other":"Other","edit-events.fields.add-place":"Place","edit-events.fields.date-heading":"Date","edit-events.fields.date-overlay-title":"Add Date Fields","edit-events.fields.event-type":"Event Type","edit-events.fields.event-type-required":"Event Type is required","edit-events.fields.name-type":"Name Type","edit-events.fields.new-event-heading":"Event","edit-events.fields.other-heading":"Other","edit-events.fields.other-name-singular":"+ 1 Other Name","edit-events.fields.other-names-plural":"+ {total} Other Names","edit-events.fields.other-overlay-title":"Add Other Fields","edit-events.fields.others-heading":"Others","edit-events.fields.place-heading":"Place","edit-events.fields.place-overlay-title":"Add Place Fields","edit-events.heading":"Events","edit-events.instructions":"Fix any fields that are incorrect including their highlights. Add or remove fields as necessary.","edit-events.link-event":"Link Event to Other Names","edit-events.link-event-description":"Add or remove names linked to this event.","edit-events.relationship.data":"Select the couple in the {eventType}.","edit-events.relationship.heading":"Relationship","edit-highlight.done.button":"Done","edit-highlight.header":"Edit Highlight","edit-highlight.highlight-tips.header":"Highlight Tips","edit-highlight.highlight-tips.item1":"Hover over the text and select the blue highlight(s). When selected, the highlight will turn yellow.","edit-highlight.highlight-tips.item2":"Deselect any yellow highlights that don\'t match {fieldLabel} field above.","edit-highlight.infosheet.title":"Edit {name} Highlight","edit-highlight.text-one":"Select Highlight: toggle checkmark to add and remove highlights.","edit-highlight.text-two":"Create Highlights: click the create highlight button on top of the image.","edit-highlight.used-by-other-field.message":"This highlight is used by another name. Do you wish to review the fields using this highlight and then add?","edit-highlight.used-by-other-field.title":"Review then add","edit-hightlight.used-by-other-field.pick-another-highlight":"Pick another highlight","edit-hightlight.used-by-other-field.review":"Review","edit-index.add-custom.button":"Add or Remove {field}","edit-index.add-event.button":"Add Event","edit-index.add-fields.button":"Add or Remove Fields","edit-index.add-fields.title":"Add or Remove Fields","edit-index.add-highlight.button":"Add Highlight","edit-index.add-more-info.button":"Add More Information","edit-index.add-new-person-button":"+ Add new person","edit-index.add-note.label":"Add Note","edit-index.add-note.placeholder":"Add note here","edit-index.add-person.heading":"Add Person","edit-index.add-person.subtext":"Index and highlight the information for the person","edit-index.add.button":"Add or Remove","edit-index.cancel.button":"Cancel","edit-index.chip.event-person":"Event Person","edit-index.chips.additional-fields.title":"Additional Fields","edit-index.chips.age-fields.title":"Age Fields","edit-index.chips.event-fields.title":"Event Fields","edit-index.chips.most-common-name.title":"Most Common Name","edit-index.chips.name-fields.title":"Name","edit-index.chips.person-details.title":"Person Details","edit-index.chips.prefix-suffix.title":"Prefix and Suffix","edit-index.chips.relationships.title":"Relationships","edit-index.delete-event.button":"Delete {event}","edit-index.delete-overlay.content-text":"Deleting {fullName} will remove this person and all of the content. This action cannot be undone.","edit-index.delete-overlay.heading-text":"Delete {fullName}","edit-index.delete-person.button":"Delete Person","edit-index.edit-highlight.button":"Edit Highlight","edit-index.edit-person.button":"Edit Person","edit-index.edit-person.heading":"Edit {personName}","edit-index.edit-person.subtext":"Correct the computer\'s mistakes, highlight the information, and link the correct relationships.","edit-index.event-input-error.message":"Choose from selection","edit-index.event.label":"Event ","edit-index.person-details.help-tooltip-label":"Who the record is about. Example: In a baptismal record, the primary name would be the person who was baptized.","edit-index.person-details.primary-check":"Review record, too many principal people","edit-index.person-details.primary-label":"Primary Name","edit-index.person-details.primary-no":"No","edit-index.person-details.primary-yes":"Yes","edit-index.person-details.principal-name-tip-text-1":"The Primary Name is who the record is about.","edit-index.person-details.principal-name-tip-text-2":"Usually there\'s 1 per record, unless it is a record such as marriage or divorce, then there are 2.","edit-index.person-details.principal-name-tip-title":"Who is a primary name?","edit-index.person-details.title":"Person Details","edit-index.relationship-input-error.message":"Choose from selected people, or add a new person","edit-index.relationships.title":"Relationships","edit-index.remove-event.button":"Remove Event","edit-index.remove-field.button":"Remove Field","edit-index.remove-name.button":"Remove Name","edit-index.remove-person.button":"Remove {name}","edit-index.remove-person.cancel.button":"Cancel","edit-index.remove-person.delete.button":"Delete","edit-index.save-changes-overlay.content":"You have unsaved changes that will be lost if you exit.","edit-index.save-changes-overlay.continue.button":"Continue Editing","edit-index.save-changes-overlay.discard.button":"discard","edit-index.save-changes-overlay.header":"Unsaved Changes","edit-index.save-changes-overlay.save.button":"save","edit-index.save-changes.button":"Save","edit-index.save-error.bad-request.message":"Sorry, we couldn\'t save your changes. We are working on a solution. Please wait a few minutes and try again.","edit-index.save-error.server-error.message":"Sorry, we couldn\'t complete the request. We are working on a solution. Please try again later.","edit-index.save-error.server-unavailable.message":"This service is currently unavailable. Please wait a few minutes and try again.","edit-index.save-error.unknown":"Sorry, an unknown error has occured. This incident has been reported. Please try again later.","edit-index.save.button":"Save","edit-index.select.select-sex.female.label":"Female","edit-index.select.select-sex.male.label":"Male","edit-index.select.select-sex.unknown.label":"Unknown","edit-index.title":"Edit","edit-index.update.button":"Update","edit-other-fields.heading":"Additional Fields","edit-other-fields.instructions":"Fix any fields that are incorrect including their highlights. Add or remove fields as necessary.","edit-person.add-field-category.button":"Add Field Category","edit-person.add-field-category.category.age":"Age","edit-person.add-field-category.category.events":"Events","edit-person.add-field-category.category.other-fields":"Other Fields","edit-person.add-field-category.category.relationships":"Relationships","edit-person.essential-info.title":"Edit {name}","edit-person.generic-edit.title":"Edit","edit-person.other.title":"Edit","edit-relationships.autosuggest.image-group.next":"IN NEXT IMAGE","edit-relationships.autosuggest.image-group.previous":"IN PREVIOUS IMAGE","edit-relationships.autosuggest.image-group.split-screen":"NAMES ON SPLIT SCREEN (PAGE {page})","edit-relationships.autosuggest.image-group.split-screen.simple":"NAMES ON SPLIT SCREEN","edit-relationships.autosuggest.image-group.this":"IN THIS IMAGE","edit-relationships.autosuggest.invalid-relationship-warning":"Name can\'t be both a child and a spouse. Remove field or change the name.","edit-relationships.autosuggest.pageNumber":"(page {pageNumber})","edit-relationships.autosuggest.primary":"(Principal)","edit-relationships.autosuggest.record-group":"IN THIS RECORD","edit-relationships.autosuggest.unique-type-value-warning":"This relation already exist.","edit-relationships.chips.other":"Other","edit-relationships.choose-record-overlay.approve-change":"Approve the change","edit-relationships.choose-record-overlay.approve-instructions":"The old relationships of <i>{{name}}</i> will need to be removed.<strong> Approve</strong> removal of relationships below.","edit-relationships.choose-record-overlay.approve.button":"Approve","edit-relationships.choose-record-overlay.back.button":"Back","edit-relationships.choose-record-overlay.before-adding":"Before adding this relationship","edit-relationships.choose-record-overlay.cancel.button":"Cancel","edit-relationships.choose-record-overlay.drag-instructions":"<strong>Drag</strong><i> {{name}}</i> and<i> {{otherName}}</i> to the correct record. Record names have to be in the same record to have relationships.","edit-relationships.choose-record-overlay.learn-more":"Learn more","edit-relationships.choose-record-overlay.move-here":"Move Relationship Here","edit-relationships.choose-record-overlay.move-person":"Move <i>{{name}}</i> to<strong> Record {{recordNum}}</strong>","edit-relationships.choose-record-overlay.next.button":"Next","edit-relationships.choose-record-overlay.principal":"Principal","edit-relationships.choose-record-overlay.recordX":"Record {number}","edit-relationships.choose-record-overlay.relationships-of":"Relationships of {name}:","edit-relationships.choose-record-overlay.remove.button":"Approve Removal","edit-relationships.choose-record-overlay.see-less.button":"See Less","edit-relationships.choose-record-overlay.see-more.button":"See More","edit-relationships.choose-record-overlay.stepXof2":"Step {step} of 2","edit-relationships.choose-record-overlay.view-relationships":"The following relationships will be removed:","edit-relationships.close-split-screen":"Close Split-Screen mode","edit-relationships.cross-record-warning-overlay.are-you-sure":"Are you sure?","edit-relationships.cross-record-warning-overlay.cancel.button":"Cancel","edit-relationships.cross-record-warning-overlay.content.generic-text":"{name} is in another record with existing relationships. To move {name}, old relationships will need to be removed. ","edit-relationships.cross-record-warning-overlay.content.text":"{name} is in another record with existing relationships. To create this relationship, old relationships will need to be removed. ","edit-relationships.cross-record-warning-overlay.heading":"Before Adding this Relationship","edit-relationships.cross-record-warning-overlay.learn-more":"Learn more","edit-relationships.cross-record-warning-overlay.multiple.content":"If you dont move all persons on the relationship the relationship would be lost","edit-relationships.cross-record-warning-overlay.principal":"Principal","edit-relationships.cross-record-warning-overlay.remove.button":"Remove Relationships","edit-relationships.cross-record-warning-overlay.view-all":"View All","edit-relationships.cross-record-warning-overlay.view-relationships":"The following relationships will be removed:","edit-relationships.drag-names":"Drag Names","edit-relationships.edit.button":"Edit","edit-relationships.family-relationships":"Family Relationships","edit-relationships.heading":"Relationships","edit-relationships.instructions":"Fix any relationships that are incorrect. Add or remove fields as necessary.","edit-relationships.most-common-relationships":"Most Common Relationships","edit-relationships.open-split-screen":"Open split-screen mode","edit-relationships.other-relationships":"Other Relationships","edit-relationships.others-on-this-record":"Others on This Record","edit-relationships.relationships-removed":"Relationship removed on save","edit-relationships.tip":"Help with Relationships","edit-relationships.tip-1-button":"DRAG NAMES","edit-relationships.tip-1-overline":"1. How to move names to the correct record group.","edit-relationships.tip-1-primary":"Use the Drag Names tool to move names that belong in other records.","edit-relationships.tip-2-overline":"2. How to change the spelling of a name.","edit-relationships.tip-2-step-1":"Find the name you would like to correct.","edit-relationships.tip-2-step-2":"Below the name, click the Edit button.","edit-relationships.tip-2-step-3":"Go to the Essential Information section and edit the name.","edit-relationships.tip-3-overline":"3. Is the information on another page?","edit-relationships.tip-3-primary":"If the information is on another page, try entering split-screen mode.","edit-relationships.tip-4-overline":"4. How to add a new name","edit-relationships.tip-4-step-1":"Create a new relationship.","edit-relationships.tip-4-step-2":"Start typing in a name. If the name doesn\u2019t exist in the surrounding pages, select Name Not Indexed.","edit-relationships.tip-4-step-3":"Create the new person and save.","edit-relationships.tip-content":"1. Find the name you would like to correct. 2. Below the name, click the Edit button. 3. Go to the Essential Information section and edit the name.","edit-relationships.tip-extra":"Use the Drag Names tool to move names that belong in other records.","edit-relationships.tip-extra-overline":"Additional Tips","edit-relationships.tip-title":"How to change the spelling of a name.","edit-relationships.tip2-content":"If the information is on another page, try entering split-screen mode.","edit-relationships.tip2-title":"Is the information on another page?","edit-relationships.tip3-title":"How to move names to the correct record group.","edit-relationships.view-name-other-image.button":"View Name","edit-relationships.view-name.button":"View on page {pageNumber}","edit-shared-field-footer.back":"Back","edit-shared-field-footer.cancel":"Cancel","edit-shared-field-footer.next":"Next","edit-shared-field-footer.save":"Save","edit-shared-field.choose-others-on-image.heading":"3. These names are linked to this {fieldType}. Change them to \\"{newValue}\\"?","edit-shared-field.edit-field.heading":"1. Edit the {fieldType} field.","edit-shared-field.edit-highlight.heading":"2. Edit the highlight.","edit-shared-field.edit-highlight.tips.body":"\u2022 Select and deselect highlights as needed.\\n\u2022 The selected highlight will turn yellow with a checkmark.\\n\u2022 The deselected highlight will turn blue.\\n\u2022 Create a New Highlight if no highlight","edit-shared-field.edit-highlight.tips.heading":"Highlight Tips","edit-shared-field.heading":"{fieldType}: {fieldValue}","edit-shared-field.instructions.heading":"Fix any mistakes that you see.","edit-shared-field.locked-others-on-image.heading":"3. These names are linked to this {fieldType}. They will be changed to \\"{newValue}\\".","edit-shared-field.names-on-page-n.label":"Names on Page {pageNumber}","edit-shared-field.view-image-in-context.close.button":"View in Context","edit-shared-field.view-image-in-context.title":"Page {pageNumber}","edit-shared-surname-footer.back":"Back","edit-shared-surname-footer.cancel":"Cancel","edit-shared-surname-footer.next":"Next","edit-shared-surname-footer.save":"Save","edit-shared-surname.choose-others-on-image.heading":"3. These names are linked to this surname. Change them to \\"{newSurname}\\"?","edit-shared-surname.edit-field.heading":"1. Edit the surname field.","edit-shared-surname.edit-highlight.heading":"2. Edit the highlight.","edit-shared-surname.edit-highlight.tips.body":"\u2022 Select and deselect highlights as needed.\\n\u2022 The selected highlight will turn yellow with a checkmark.\\n\u2022 The deselected highlight will turn blue.\\n\u2022 Create a New Highlight if no highlight","edit-shared-surname.edit-highlight.tips.heading":"Highlight Tips","edit-shared-surname.heading":"Surname: {surname}","edit-shared-surname.instructions.heading":"Fix any mistakes that you see.","edit-shared-surname.names-on-page-n.label":"Names on Page {pageNumber}","edit-shared-surname.view-image-in-context.close.button":"View in Context","edit-shared-surname.view-image-in-context.title":"Page {pageNumber}","edit.shared-field.caption":"This information is connected to many names. Edit linked {fieldName}.","edit.shared-field.readonly-caption":"This information is connected to many names.","edit.shared-field.tooltip-description":"This field is temporarily disabled since the information connects many names together.","edit.shared-field.tooltip-label":"Linked Field","editEssentialInfo.heading":"Essential Information","editHighlight.highlightTips.item1Content":"To add a highlight, hover over the correct name on the image. If a blue highlight appears, select it and then attach.","editHighlight.highlightTips.item1Content2":"To remove a highlight, hover over an existing yellow highlight and select it and then detach.","editHighlight.highlightTips.item1Overline":"Instructions","editHighlight.highlightTips.item1PrimaryText":"Adding and removing highlights","editHighlight.highlightTips.item2Content":"If no blue highlight appears, you will create a new one.","editHighlight.highlightTips.item2Overline":"Tip","editHighlight.highlightTips.item2PrimaryText":"Don\u2019t see a blue highlight?","editHighlight.highlightTips.item3Content":"If the information to highlight is on another page, try entering split-screen mode.","editHighlight.highlightTips.item3Overline":"Tip","editHighlight.highlightTips.item3PrimaryText":"Is the highlight on another page?","editHighlight.highlightTips.newHighlight":"New highlight","editHighlight.highlightTips.openSplitScreen":"Open Split-Screen","editHighlight.highlightTips.toggleSplitScreen":"Close Split-Screen","editHighlight.instructions":"Select the {fieldType} \\"{fieldValue}\\".","editHighlight.panelHeader.caption":"Fix any mistakes that you see","editHighlight.panelHeader.heading":"Add Highlight in Document","editHighlight.panelHeader.panelCaption":"Select the blue highlights or create your own","editHighlight.panelHeader.panelHeadingAdd":"Add Highlight","editHighlight.panelHeader.panelHeadingEdit":"Edit Highlight","editableCoverage.aboutMessage":"This field does not currently support \'about\' functionality.","editableCoverage.approximateMessage":"This field does not currently support approximate dates. Please use an exact date range.","editableCoverage.dividerSubtitle":"Suggested Date Ranges","editableCoverageDate.addAnotherDatePlaceHolder":"Add another date","editableCoverageDate.addDatePlaceHolder":"Add a date","editableCoverageDate.datePlaceholder":"Date","editableCoverageRecordType.duplicateRecordTypeError":"Record type already exists","editableFieldError":"This Field did not save correctly","error-overlay-boundary.content":"Try again or refresh the page if the problem persists.","error-overlay-boundary.heading":"Something unexpected happened.","error-overlay-boundary.submit":"Refresh","error-overlay.content":"An error occurred on this page. Please wait a few minutes and try again.","error-overlay.heading":"Something went wrong on this page","error-overlay.submit":"Refresh","family-review.addEvent.chip.person":"Event Person ({personName})","family-review.addEvent.content":"Select a person from the dropdown, select an event type, and add any new fields.","family-review.addEvent.expanderHeader":"+ {totalOtherPersons} Other People","family-review.addEvent.expanderHeader-singular":"+ {otherPerson} Other Person","family-review.addEvent.formLabel.date":"Event Date","family-review.addEvent.formLabel.person":"Event Person","family-review.addEvent.formLabel.place":"Event Place","family-review.addEvent.formLabel.type":"Event Type","family-review.addEvent.heading":"Add New Event","family-review.addEvent.tip.content":"Try this.....","family-review.addEvent.tip.heading":"Don\'t see the event you\'re looking for?","family-review.addFloatingEvent.button":"Event not on list","family-review.addFloatingEvent.content":"Select an event from the dropdown to add an existing event to the record.","family-review.addFloatingEvent.heading":"Add an Event","family-review.addFloatingEvent.tip.content":"Events include births, deaths, marriages, burials, etc.","family-review.addFloatingEvent.tip.heading":"What is an event?","family-review.addPerson.add-new":"Add New Person","family-review.addPerson.add-new-primary":"Add New Primary Person","family-review.addPerson.content":"Fill out the following information to add a person to the record.","family-review.addPerson.heading":"Add a Person","family-review.addPerson.list-primary-text":"<0>Looks like our computer left someone out! <strong>Select</strong> the \\"Name Not In This List\\" option in the menu to add a new person.</0>","family-review.addPerson.name-not-indexed":"Name Not indexed","family-review.addPerson.name-not-on-list":"Name Not In This List","family-review.addPerson.relationship-to-person":"Relationship To {primaryPersonName}","family-review.addPerson.select-instructions":"Select the sex of {newPersonName} and the relationship to {primaryPersonName}.","family-review.addPerson.select-person":"Select Person","family-review.addPerson.select-sex-only":"Select the sex of {newPersonName}.","family-review.addPerson.sex-select":"Sex","family-review.addPerson.tip-primary-text":"Don\'t see the name you are looking for?","family-review.edit-event.fieldSelector.common-fields":"Most Common Fields","family-review.edit-relationships.autosuggest.split-screen":"(Split Screen)","family-review.editEntity.and-more":" and more","family-review.editEntity.changes-to-field":"Changes to this {fieldType} will also change the {fieldType} for:","family-review.editEntity.changes-to-unlinked-field":"Changes to this {fieldType} NO LONGER change the {fieldType} for:","family-review.editEntity.linked-field":"Linked {fieldType}","family-review.editEntity.linked-field-tip-instructions":"<0><strong>Select</strong> the Unlink {{fieldType}} button to remove the link.</0>","family-review.editEntity.locked-description":"To keep records searchable on Family Search, this field will not accept any changes.","family-review.editEntity.primary-text":"A linked {fieldType} is a {fieldType} that is shared with other record names.","family-review.editEntity.relink-field":"Relink {fieldType}","family-review.editEntity.unlink-field":"Unlink {fieldType}","family-review.editEntity.unlinked-field":"{fieldType} unlinked on save.","family-review.editEntity.unlinked-name":"{fieldType} unlinked on save.","family-review.editEntity.what-is-a-linked-field":"What is a linked {fieldType}?","family-review.editEvent.change-primary":"<0>This is the </0><strong>Primary Event</strong><2> for the </2> <strong>Primary Person.</strong> <4>To change </4><5>Go back to step 1</5>","family-review.editEvent.content":"Fix any incorrect fields or highlights. Add or remove fields as necessary.","family-review.editEvent.dialog.changePrimaryEventText":"<0>The computer identified this as a <strong>{{cD}} Record. </strong></0>","family-review.editEvent.dialog.changePrimaryEventText2":"<0>By changing the<i> Primary Eventy Type,</i> you are indicating that it is a <strong>{{td}} Record</strong>.</0>","family-review.editEvent.dialog.changeTo":"Change to","family-review.editEvent.dialog.confirmChange":"Please confirm this change.","family-review.editEvent.dialog.keepAs":"Keep as","family-review.editEvent.heading":"Edit Event","family-review.editEventForm.warningDialog.title":"Are you sure?","family-review.editEvents.heading":"Edit Events","family-review.editPerson.and-more":" and more","family-review.editPerson.change-primary":"<0>This is the </0><strong>Primary Person.</strong><2> To change </2><3>Go back to step 1</3>.","family-review.editPerson.changes-to-name":"Changes to this {nameType} will also change the {nameType} for:","family-review.editPerson.changes-to-surname":"Changes to this {nameType} will also change the surname for:","family-review.editPerson.changes-to-unlinked-name":"Changes to this {nameType} NO LONGER change the {nameType} for:","family-review.editPerson.content":"Add or remove any information needed to correct the entries below.","family-review.editPerson.heading":"Edit Name and Relationship","family-review.editPerson.linked-name":"Linked {nameType}","family-review.editPerson.relationship-to-person":"Relationship To {primaryPersonName}","family-review.editPerson.relink-name":"Relink {nameType}","family-review.editPerson.subHeading":"Fix any incorrect fields or highlights. Add or remove fields as necessary.","family-review.editPerson.unlink-name":"Unlink {nameType}","family-review.editPerson.unlinked-name":"{nameType} unlinked on save.","family-review.editPerson.what-is-a-linked-name":"What is a linked {nameType}?","family-review.editPrimaryEvent.heading":"Edit Primary Event","family-review.faq.answer0":"A record is a document that certifies a life event. It can be as large as a few images or as small as a line or two on a ledger or register.","family-review.faq.answer1":"If the part of the name you see belongs to the primary person in the record, go ahead and mark \u201cYes.\u201d You can change highlights in a later step.","family-review.faq.answer2":"Go ahead and select \u201cYes.\u201d You will have a chance to change spellings in a later step.","family-review.faq.answer3":"If you want to correct the problem, go to the Record Details page, click edit, and make the correction.","family-review.faq.learn-more":"Learn More","family-review.faq.question0":"What is a record?","family-review.faq.question1":"What if there is just part of a name selected?","family-review.faq.question2":"What if the primary person is right but the name is misspelled?","family-review.faq.question3":"What should I do if I see a problem with the record?","family-review.faq.title":"Frequently Asked Questions","family-review.field.display.toggleInfo.less":"See Less","family-review.field.display.toggleInfo.more":"See More","family-review.finished-overlay.question.heading":"Do you want to explore this record in more detail?","family-review.finishedOverlay.content":"You just helped the {surname} Family from {placeName}!","family-review.finishedOverlay.content2":"Do you want to continue with Family Review?","family-review.finishedOverlay.contentA":"You just helped a family from {placeName}!","family-review.finishedOverlay.contentB":"You just helped the {surname} Family!","family-review.finishedOverlay.contentC":"You just helped a family!","family-review.hint.title":"Helpful Hint","family-review.infoSheetTitle":"Identify Primary Person","family-review.mainImageTitle":"Original: Image {currentIndex}","family-review.no-records-on-task-overlay.content":"<strong>Get another image</strong> or <strong>go back</strong> to Get Involved.","family-review.no-records-on-task-overlay.go-back-button":"Go Back","family-review.no-records-on-task-overlay.new-image-button":"Get Another Image","family-review.no-records-on-task-overlay.title":"Whoops! There is nothing left to review","family-review.others-missing-overlay.add-another-person":"Add another person","family-review.others-missing-overlay.always-next-step":"Always go to the next step","family-review.others-missing-overlay.body-1":"Take a look at the names on the image. Is anyone in this family missing from the list of family relationships?","family-review.others-missing-overlay.body-2":"If No or Unsure, <strong>Select</strong> the <strong>Next Step</strong> button.","family-review.others-missing-overlay.body-3":"If Yes, <strong>Select</strong> the <strong>Add Another Person</strong> button.","family-review.others-missing-overlay.next-step":"Next step","family-review.others-missing-overlay.title":"Anyone else missing?","family-review.record-tool-tip.description":"A record is a document that certifies a life event. It can be as large as a few images or as small as a line or two on a ledger or register.","family-review.record-tool-tip.link-text":"Learn More","family-review.record-tool-tip.record":"record","family-review.record-tool-tip.title":"What is a record?","family-review.reviewPersonEventsPanel.content":"Review the information below. Select the pencil icon to edit the information.","family-review.simple-mainImageTitle":"Main Image","family-review.splitScreenTitle":"View Only: Image {currentIndex}","family-review.step1.content":"Is this <2><0><0>record</0></0></2><3>\xa0primarily about <1>{{primaryPerson}}</1>?</3><4>You can correct any highlight or spelling mistakes in the next step.</4>","family-review.step1.heading":"Identify Primary Person","family-review.step1.help-with-this-step":"Help with this step","family-review.step1.in-most-cases":"In most cases, we recommend going to the next record and continuing with Family Review","family-review.step1.learn-more":"Learn more","family-review.step1.part2.content":"Who is this <2><0><0>record</0></0></2><3>\xa0primarily about?</3><4>The primary person is who this record was created about.</4>","family-review.step1.part2.hintHeading":"What is a primary person?","family-review.step1.part2.select-primary-person":"Select primary person","family-review.step1.part2.subheading":"Who is this {record} primarily about?","family-review.step1.subheading":"Is this {record} primarily about {name}?","family-review.step2.add-new-person-button":"Add new person","family-review.step2.click-record-details":"Click the Record Details button below and select Edit.","family-review.step2.content":"By knowing what type of record you are looking at you can better understand how to connect the family.","family-review.step2.correct-button":"correct","family-review.step2.edit-button":"edit","family-review.step2.everyone-is-here":"Everyone is here","family-review.step2.family-relationships-prompt":"Review each person on this <1><2><0><0>record</0></0></2></1> and their relationship to {{person}}.","family-review.step2.frequent-questions":"Frequently asked questions","family-review.step2.go-to-next-record":"Go To Next Record","family-review.step2.heading":"Verify the Record Type","family-review.step2.help-with-this-step":"Help with this step","family-review.step2.hintContent":"The record type references the event in the record. Some examples include birth certificates, death certificates, Censuses, and marriage records.","family-review.step2.hintHeading":"What is a record type?","family-review.step2.is-everyone-here":"Is everyone in this <1>record</1> accounted for?","family-review.step2.must-review-everyone-message":"You cannot move on until each person has been reviewed.","family-review.step2.name-not-on-list":"NAME NOT ON LIST","family-review.step2.part2.hintContent":"A principal person is the person who the record is mainly about. The main event in the record should be about this person.","family-review.step2.part2.hintHeading":"What is a principal person?","family-review.step2.part2.subheading":"What kind of record is this?","family-review.step2.record-tooltip-title":"What is a record?","family-review.step2.relationship-label.no-direction-relation":"No Direct Relation","family-review.step2.relationship-label.no-relation":"No Relation","family-review.step2.relationship-label.principal":"Principal","family-review.step2.select-next-record":"Select Go To Next Record.","family-review.step2.subheading":"Click the Edit button to correct any highlight or spelling mistakes.","family-review.step2.tip-review-problem":"I see a problem with this record.","family-review.step3.add-new-event-button":"Add new event","family-review.step3.heading":"Family Relationships","family-review.step3.inferred-text":"Inferred events from the record","family-review.step3.is-everything-accounted-for":"Is everything in this <1>record</1> accounted for?","family-review.step3.must-review-all-events-message":"You cannot move on until each event has been reviewed.","family-review.step3.subheading":"Are these family relationships correct for {name}?","family-review.step3.subheading-short":"Are these events correct for each person?","family-review.step3.yes":"Yes","family-review.step4.heading":"Life Events","family-review.step4.subheading":"Are these events correct? Do any events need to be added?","family-review.step5.content":"If you need to make an edit, select the pencil icon.","family-review.step5.heading":"Final Review","family-review.step5.subheading":"Is this review ready to submit?","family-review.stepXof4":"Step {step} of 4","family-review.stepXof5":"Step {step} of 5","family-review.tip.problem-description":"If you find a problem that cannot be solved in Family Review, review below:","family-review.title":"Family Review","family-review.welcome-overlay.ai-generated-transcription":"The transcription you will review for this activity was generated by AI. Your task is to compare the transcription with the image and correct any errors you find.","family-review.welcome-overlay.done.btn":"Done","family-review.welcome-overlay.faq-answer1":"It would take human volunteers many years to transcribe the historical records FamilySearch currently has access to. We are using artificial intelligence to accelerate this process and make more records available to more people.","family-review.welcome-overlay.faq-answer2":"Artificial intelligence can transcribe much faster than a human, but it still makes mistakes and needs a human to review the information before it becomes searchable. This is what you do in Family Review.","family-review.welcome-overlay.faq-answer2-p2":"The activity is called Family Review because you are paying close attention to all of the family members mentioned in the record and trying to document their relationships.","family-review.welcome-overlay.faq-answer3":"No, it just makes the name on the record easier to find. But the person who searches for and finds the record could then add the name to Family Tree.","family-review.welcome-overlay.faq-answer4":"Some images contain more than one historical record. The white lines show the portion of the image that the artificial intelligence identified and transcribed as a single record.","family-review.welcome-overlay.faq-answer5":"The information that you review for this activity comes from historical records that were transcribed by artificial intelligence. The artificial intelligence can transcribe much faster than human volunteers, but it still makes mistakes. Your review makes the names on the record easier for other people to find.","family-review.welcome-overlay.faq-answer6":"As with most of the activities on Get Involved, you can choose the general location for where the records come from. Once the location is selected, however, the records are randomly assigned to you.","family-review.welcome-overlay.faq-answer7":"This is an option in traditional indexing, but it is not currently available on Get Involved. If you do not finish a review assignment, it is assigned to another volunteer.","family-review.welcome-overlay.faq-answer8":"By participating in Family Review, you are making it easier for people who visit the FamilySearch website to find their relatives, learn their family story, and connect their families.","family-review.welcome-overlay.faq-answer8-p2":"In addition, any corrections or edits you make to the transcription help to improve the artificial intelligence so that future transcriptions are more accurate.","family-review.welcome-overlay.faq-answer9":"It is possible but not guaranteed. It just depends on what\'s available and how many people are volunteering on Get Involved at any given moment.","family-review.welcome-overlay.faq-answer9-p2":"If you\u2019re interested in viewing the record that comes before or after, go to the Record Details page, and select the option for viewing the record.","family-review.welcome-overlay.faq-content":"Here are some of the more common questions we receive about Family Review. For more personalized help, please contact <2>FamilySearch Support</2>.","family-review.welcome-overlay.faq-question1":"Why does FamilySearch use artificial intelligence to transcribe records?","family-review.welcome-overlay.faq-question2":"How does Family Review help?","family-review.welcome-overlay.faq-question3":"Does Family Review attach the historical records to the FamilySearch Family Tree?","family-review.welcome-overlay.faq-question4":"What\'s the white line on images?","family-review.welcome-overlay.faq-question5":"Where does all of the information for this activity come from?","family-review.welcome-overlay.faq-question6":"Can I choose the historical records that I want to review?","family-review.welcome-overlay.faq-question7":"Can I save a record and work on it later?","family-review.welcome-overlay.faq-question8":"Why should I participate in Family Review? What is my impact?","family-review.welcome-overlay.faq-question9":"After I review one family, will I get the next record in the record collection?","family-review.welcome-overlay.faq-tab":"FAQ","family-review.welcome-overlay.instructions-tab":"Instructions","family-review.welcome-overlay.share-faq.btn":"Share FAQ","family-review.welcome-overlay.share-instructions.btn":"Share Instructions","family-review.welcome-overlay.step1":"Step 1: Find the Primary Person","family-review.welcome-overlay.step1-content":"Identify the primary person in the record. This is the individual (or individuals, depending on the record type) at the center of the event\u2014the person who was born, for example, or the couple who was married.","family-review.welcome-overlay.step2":"Step 2: Review the Name, Sex, and Relationship","family-review.welcome-overlay.step2-content":"Verify that the primary person\'s name, sex, and relationships have been correctly documented in the transcription. If you see a mistake, you can fix it.","family-review.welcome-overlay.step2-content2":"Verify that the names of the other people mentioned in the record have also been transcribed correctly.","family-review.welcome-overlay.step2-item":"Choose the relationship that connects them to the primary person.","family-review.welcome-overlay.step2-item2":"If you cannot see the correct relationship type, select <strong>Other</strong>.","family-review.welcome-overlay.step3":"Step 3: Verify Events","family-review.welcome-overlay.step3-content":"Identify the primary event being documented, and verify that the place and date have been transcribed correctly.","family-review.welcome-overlay.step3-content2":"Historical records often contain information about other life events, and depending on the type of record, you may be asked to verify these as well. These are called inferred events. An example of an inferred event might be a birth date listed on a marriage certificate.","family-review.welcome-overlay.step3-item":"The primary event is the reason the record was created.","family-review.welcome-overlay.step3-item2":"In a birth certificate, for example, the primary event is the birth.","family-review.welcome-overlay.step4":"Step 4: Review and Submit","family-review.welcome-overlay.step4-content":"Before clicking <strong>Submit</strong>, take a moment to review your work. Double-check your corrections and look for any errors you may have missed. This is one final opportunity to ensure the accuracy of the transcription.","family-review.welcome-overlay.title":"Welcome to Family Review","feedbackOverlay.button":"Close Feedback Popup","feedbackOverlay.content":"Let us know what you think of this page.","feedbackOverlay.header":"Share Your Feedback!","field-chip-selector.added-fields.title":"Added","field-chip-selector.addional-fields.added-label":"Added!","field-chip-selector.disabled-chip.shared-field":"Disabled Linked Field","field-chip-selector.find-a-field.no-matches":"Hmm, no matches. To find a field, try different keywords or search through the list without the search","field-chip-selector.locked-fields.title":"Locked Fields","field-chip-selector.search-field.placeholder":"Search Fields","field-selector-overlay.save.button":"Update","field-selector-require-name":"You must select a given name or a surname","field-selector-require-one-field":"You must select at least one field to continue","finished-overlay.content":"Now {name} from {placeName} can be found by their family.","finished-overlay.content-no-name":"Now people from {placeName} can be found by their family.","finished-overlay.continue-btn":"Continue","finished-overlay.keep-reviewing":"Want to keep reviewing names?","finished-overlay.later-btn":"Maybe later","finished-overlay.title":"Thank you!","full-name-correct.step2.tips":"Tips:","full-name-correction.infosheet-header":"Full Name Review","full-name-correction.name-input.placeholder-text":"Name","full-name-correction.step-one-next":"Next","full-name-correction.step-one-no":"No","full-name-correction.step-one-unsure":"Unsure","full-name-correction.step-one-yes":"Yes","full-name-correction.step1.heading":"Is this person\'s full name highlighted?","full-name-correction.step1.restore-person-text":"This person was marked \\"Not a Person\\". Restore using the button above to work on the full name.","full-name-correction.step1.subHeading":"Check for prefixes, suffixes, maiden names, and married names. You\'ll be able to add or remove highlights in the next step.","full-name-correction.step2.heading":"Add or remove highlights to complete this person\'s full name.","full-name-correction.step2.tips-content":"Remember to include any maiden names, married names, and prefixes or suffixes, such as \\"Mrs.\\", \\"Mr.\\", and \\"Jr.\\"\\n\\n(Note: if you see a name more than once, you don\'t need to select it here.)","full-name-correction.step2.tips-content-1":"Remember to include any maiden names, married names, and prefixes or suffixes, such as \\"Mrs.\\", \\"Mr.\\", and \\"Jr.\\"","full-name-correction.step2.tips-content-2":"(Note: if you see a name more than once, you don\'t need to select it here.)","full-name-correction.step3.add-info-below":"(Add information below.)","full-name-correction.step3.drop-spot-text":"DRAG NAME FIELDS HERE.","full-name-correction.step3.field-select-instructions":"Select each field to see which highlight connects with it.","full-name-correction.step3.heading":"Drag the name parts below via the blue drag icon to the correct label and order.","full-name-correction.step3.must-have-name-part":"Must have a name part in Given Name or Surname.","full-name-correction.step3.tip.heading":"Why is there an empty text box?","full-name-correction.step3.tip2.heading":"Do I have to fill every text box?","full-name-correction.step3.tip2.main":"No, the text boxes are there to help you move the highlights to the right sections. As long as the text is in the right order and location, it will be combined in step four.","full-name-correction.step4.add-info-below":"(Add information below.)","full-name-correction.step4.drop-spot-text":"DRAG NAME FIELDS HERE.","full-name-correction.step4.field-select-instructions":"Select each field to see which highlight connects with it.","full-name-correction.step4.heading":"Correct the spelling of each part of this person\'s name.","full-name-correction.step4.must-have-name-value":"Given Name or Surname must not be empty.","full-name-correction.stepXof4":"Step {step} of 4","full-name-correction.tip.main":"Each text box is connected to a single highlight. Click on the box to see which higlight is connected to what.","full-name-correction.verify-step-three-overlay.body":"Are you sure those fields should be blank? Highlights associated with blank fields will be removed.","full-name-correction.verify-step-three-overlay.dont-ask-again":"Don\'t ask again","full-name-correction.verify-step-three-overlay.go-back-button":"GO BACK","full-name-correction.verify-step-three-overlay.im-sure-button":"I\'M SURE","full-name-correction.verify-step-three-overlay.title":"There are Blank Fields","full-name-corrections.question":"QUESTION","full-name-corrections.tip":"Tip","full-name-viewer.title":"Full Name Review ({currentCount})","full-name-viewer.title-with-max-tasks":"Full Name Review ({currentCount} of {maxTasks})","full-name-welcome-overlay.content":"A computer indexed this image, and we need your help to make sure the full name is highlighted, spelled correctly, and in the right order.","full-name-welcome-overlay.content2":"Reviewing names makes research easier and helps people find their ancestors every day!","full-name-welcome-overlay.go-back.btn":"Go Back","full-name-welcome-overlay.start.btn":"Start","full-name-welcome-overlay.title":"Welcome to Full Name Review","full-text.ai-generated":"AI-generated from the transcription below.","full-text.ai-summarization":"Ai Summarization","full-text.ai-summarization-header":"Summarize the document","full-text.attach":"Attach","full-text.cancel":"Cancel","full-text.citation":"Citation","full-text.citation-text":"Citation","full-text.click-to-edit":"Click on a word to edit.","full-text.close-button":"Close","full-text.copy-error":"Error copying full transcript","full-text.copy-icon-text":"Copy Transcription","full-text.copy-success":"Full transcript copied to clipboard","full-text.dates":"Dates","full-text.download":"Download","full-text.download-icon-text":"Download Image and Transcription","full-text.edit":"Edit Transcription","full-text.failed-download":"Error downloading pdf","full-text.heading":"Full Transcript","full-text.hide-translation":"Hide Translation","full-text.image.downloaded":"Image Downloaded. Want to attach this image to the Tree?","full-text.include":"Include:","full-text.include-citation":"Include Citation","full-text.include-image-and-highlights":"Include Record Image with Highlights","full-text.include-image-no-highlights":"Include Record Image with No Highlights","full-text.include-transcript":"Include Transcript","full-text.jpg-only":"JPG Only","full-text.names-and-relationships":"Names and Relationships","full-text.no-image":"Don\'t Include Record Image","full-text.no-record-image":"No Record Image","full-text.pdf-record-image-with-highlights":"PDF Record Image with Highlights","full-text.pdf-record-image-with-no-highlights":"PDF Record Image with No Highlights","full-text.prompt-title":"Prompt sent to ChatGPT","full-text.record-image":"Record Image","full-text.select-image-or-transcript":"Please select either the transcript or record image for download.","full-text.show-keywords":"Show Keywords","full-text.show-translation":"Show Translation","full-text.subheading":"Customize your download option","full-text.submit.button":"Submit","full-text.transcript":"Transcript","full-text.transcription-image-permission-false":"Transcript is not available, image restricted","full-text.transcription-not-available":"Transcript is not available.","full-text.transcription-text":"Transcription","full-text.translation-ai-generated":"AI-generated from the transcription below.","full-text.translation-error":"Unable to translate transcript. Reload page.","full-text.translation-tip":"Translation is in site language","full-text.unavailable-for-jpg-text":"Unavailable for JPG downloads.","fullText-sex":"Sex","fullText.add-event":"Add Event","fullText.add-or-remove-name-parts":"Add or Remove Name Parts","fullText.add-or-remove-name-parts-text":"Add or Remove Name Parts","fullText.attach-to-tree":"Attach to Tree","fullText.attach-to-tree-help":"What is FamilySearch\'s Family Tree?","fullText.attach-to-tree-names-need-verification":"Some selected names need to be verified before attaching.","fullText.back":"Back","fullText.cancel":"Cancel","fullText.edit-errors-text":"Edit any misspellings or errors below","fullText.fix-add-details-text":"Fix or add details of the name below.","fullText.focus-person-description":"This will be the person of focus on the next screen. You will also be able to drag and drop any other names from the record into the appropriate spot to indicate family relationships.","fullText.learn-more":"Learn more","fullText.life-events":"Life Events","fullText.name":"Name","fullText.names-generated-from-text":"These names were generated from the text of the record","fullText.next":"Next","fullText.record-name":"RECORD NAME","fullText.save-continue-button":"Save and Continue","fullText.search-record-names-placeholder":"Select Record Names","fullText.select-focus-person":"Select Focus Person","fullText.select-focus-person-overlay.heading":"Select One Name","fullText.select-focus-person-overlay.heading-single":"Focus Person","fullText.select-focus-person-overlay.help-text":"Next, you will match your selected name to a person in the tree.","fullText.select-focus-person-overlay.help-text-multiple":"Next, you will match your selected name to a person in the tree.","fullText.select-focus-person-overlay.help-text-single":"Next, you will match this name to a person in the tree.","fullText.select-focus-person-overlay.learn-more":"LEARN MORE","fullText.select-focus-person-overlay.subheading":"Select one name to attach to someone in Family Tree.","fullText.select-focus-person-overlay.subheading-multiple":"If you verified more than one name, you can drag and drop them into their correct place into the family on the next page.","fullText.select-focus-person-overlay.subheading-single":"You will attach this name to someone in Family Tree in the next step.","fullText.select-focus-person-overlay.title":"Select One Name","fullText.select-people-to-attach":"Select the people you want to attach this record to in the Family Tree","fullText.select-record-names":"Select Record Names","fullText.select-record-type-text":"Select the type of record from the dropdown below.","fullText.tutorial.description":"Attaching these sources to Family Tree creates accuracy and leads to more discoveries.","fullText.tutorial.endSlide1.description":"This video shows you how to use full-text search.","fullText.tutorial.endSlide1.title":"Unlock the Power of Full-Text Searching for Historical Records","fullText.tutorial.endSlide2.description":"Source Linker uses a purple Compare icon to notify you that the left column (the source...","fullText.tutorial.endSlide2.title":"Using Source Linker to attach sources","fullText.tutorial.endSlide3.description":"The focus person is the central figure in Source Linker. All other individuals are...","fullText.tutorial.endSlide3.title":"Understanding the focus person in Source Linker","fullText.tutorial.slide1.description":"When you find names in the record you want to attach, click <strong>Attach to Tree</strong>. Then select the names from the list.","fullText.tutorial.slide1.title":"Click and Attach to tree","fullText.tutorial.slide2.description":"Edit any misspelling and add any record details or life events to help make the ancestor profiles more accurate and complete","fullText.tutorial.slide2.title":"Verify the names","fullText.tutorial.slide3.description":"If you verified more than one name, those names will also be on the next page.","fullText.tutorial.slide3.title":"Select One Name to Attach to a Person in Family Tree.","fullText.tutorial.slide4.description.p1":"Match your selected name to a person in the tree. Notice that the left side of the screen is the record, and the right side is the Family Tree.","fullText.tutorial.slide4.description.p2":"After matching the name to a tree person, you can drag and drop other names from the record into the tree.","fullText.tutorial.slide4.description.p3":"This Source Linker tool gives you the ability to add new tree names, attach multiple sources, and make the tree more accurate.","fullText.tutorial.slide4.title":"Attach Your Record Details","fullText.tutorial.title":"Attach to Family Tree","fullText.url":"URL","fullText.verify-and-edit":"Verify and Edit","fullText.verify-name":"Verify Name","fullText.verify-record-type":"Verify Record Type","fullText.view-all-attachments":"view all attachments","fullText.what-are-record-types":"What are record types?","fulltext.attach-to-tree-overlay-redirect.body.description":"You can view or make changes to the names by going to the index tab in the top right. You can finish indexing the whole family here:","fulltext.attach-to-tree-overlay-redirect.body.title":"View the Names","fulltext.attach-to-tree-overlay-redirect.button.redirect":"CONTINUE INDEXING","fulltext.attach-to-tree-overlay-redirect.done.button":"Done","fulltext.attach-to-tree-overlay-redirect.title":"You Attached to the Tree","fulltext.attach-to-tree-overlay.add-name-not-listed":"Add name not listed","fulltext.attach-to-tree-overlay.attach-to-tree-heading":"Attach to Tree","fulltext.attach-to-tree-overlay.back":"Back","fulltext.attach-to-tree-overlay.cancel":"Cancel","fulltext.attach-to-tree-overlay.checkbox.subheading":"These names are computer-generated from the image. Select related family members to attach to your tree","fulltext.attach-to-tree-overlay.learn-more":"Learn more","fulltext.attach-to-tree-overlay.name-not-listed":"Name not listed","fulltext.attach-to-tree-overlay.names-need-verification-text":"You will next be asked to validate information for the selected names.","fulltext.attach-to-tree-overlay.next":"Next","fulltext.attach-to-tree-overlay.search-record-names-placeholder":"Select Record Names","fulltext.attach-to-tree-overlay.select-record-names-label":"Select Record Names","fulltext.attach-to-tree-overlay.subheading":"Select the people you want to attach this record to in the Family Tree","fulltext.attach-to-tree-overlay.view-all-attachments":"view all attachments","fulltext.attach-to-tree-overlay.what-is-family-search-family-tree":"What is FamilySearch\'s Family Tree?","fulltext.save-error-overlay.content-generic":"Your changes were not saved.  Please try again later.","fulltext.save-error-overlay.heading":"Unable to Save Changes","fulltext.select-focus-person-overlay.focus-person-single":"Focus Person","fulltext.select-focus-person-overlay.learn-more":"LEARN MORE","fulltext.select-focus-person-overlay.select-focus-person-multiple":"Select One Name","fulltext.select-focus-person-overlay.unnamed-person":"Unnamed Person","fulltext.verify-and-edit.VerifyAndEditOverlay.sex-field":"Sex","fulltext.verify-and-edit.add-more-details":"Add More Details","fulltext.verify-and-edit.add-or-remove-name-parts":"Add or Remove Name Parts","fulltext.verify-and-edit.add-or-remove-name-parts-text":"Add or Remove Name Parts","fulltext.verify-and-edit.back":"Back","fulltext.verify-and-edit.edit-errors-text":"Edit any misspellings or errors below","fulltext.verify-and-edit.name":"Name","fulltext.verify-and-edit.next":"Next","fulltext.verify-and-edit.record-name":"RECORD NAME","fulltext.verify-and-edit.save-and-continue":"Save and Continue","fulltext.verify-and-edit.title":"Verify and Edit","fulltext.verify-and-edit.verify-name":"Verify Name","fulltext.verify-record-type-overlay.back":"Back","fulltext.verify-record-type-overlay.learn-more":"Learn more","fulltext.verify-record-type-overlay.record-type":"Record Type","fulltext.verify-record-type-overlay.record-types-group":"Record Types","fulltext.verify-record-type-overlay.save-continue-button":"Save and Continue","fulltext.verify-record-type-overlay.select-record-type-text":"Select the type of record from the dropdown below.","fulltext.verify-record-type-overlay.verify-record-type":"Verify Record Type","fulltext.verify-record-type-overlay.what-are-record-types":"What are record types?","generateCitation.familySearch":"FamilySearch","generateCitation.image-number":"image {number} of {totalNumber}","generateCitation.images":"images","generateCitation.records":"records","get-person-full-name.unknown":"<Unknown>","grid-mode.infosheet-content":"Select an image to view the index","grid-mode.infosheet-heading":"Indexed Data","groupData.cancelButtonText":"Cancel","groupData.changesSavedSuccessMessage":"Changes saved successfully","groupData.coveragesErrorMessage":"There is an error with one or more of the place, date, or record type fields.","groupData.doneDividing":"Done Dividing","groupData.errorSaveMessage":"Oops! There was an error saving... Please try again","groupData.invalidCoverage":"A place, record type, and date are required to complete the audit.","groupData.markMetadataComplete.doMark":"Mark Complete","groupData.markMetadataComplete.doNotMark":"Do Not Mark Complete","groupData.metadataIsCorrect":"Metadata Is Correct","groupData.partialFailureSaveMessage":"Some fields did not save correctly. Make sure you entered valid input. Use the Feedback button if the error continues.","groupData.removeSelected":"Remove Selected","groupData.saveAndSubmitButtonText":"Save and Submit","groupData.saveButtonText":"Save","groupData.saveCheckbox":"I described the image group, not just one image.","groupData.skip":"Skip","groupData.submitAuditButtonText":"Submit Audit","groupData.submitForOrganizingButton":"Submit for Organizing","groupData.successfulSaveMessage":"Successfully saved","groupData.verifiedAllMetadataCaption":"I have verified <strong>all</strong> of the metadata fields for this folder.","groupdata.markMetadataComplete.body":"Would you like to mark the Correct Metadata task complete for Item {itemNumber}? Your metadata changes will be saved no matter which option you select.","groupdata.markMetadataComplete.title":"Mark complete?","headerNavigation.attachToTree":"Attach to person in Family Tree","headerNavigation.goBack":"Go back","headerNavigation.information":"Information","headerNavigation.names":"Names","headerNavigation.saveRecord":"Save Record","headerNavigation.saveToSourceBox":"Save to source box","headerNavigation.transcript":"Transcript","highlight-required-checkbox-label":"No highlight possible","highlight-required-field-help-message":"Must add a highlight first","highlights-base.button.attach":"Attach","highlights-base.button.attach-to-tree":"Attach to Tree","highlights-base.button.detach":"Detach","history-viewer.autosuggest.image-group":"IN THIS IMAGE","history-viewer.autosuggest.label":"People in Image","history-viewer.autosuggest.placeholder":"Filter by Name","history-viewer.autosuggest.record-group":"IN THIS RECORD","history-viewer.back.button":"Back to Record","history-viewer.changes-table.change.label":"Change","history-viewer.changes-table.date.label":"Date","history-viewer.changes-table.value.label":"Value","history-viewer.collapse.button":"Collapse All","history-viewer.expand.button":"Expand All","history-viewer.filter.all-changes":"All Changes","history-viewer.filter.button":"Filter","history-viewer.filter.no-results":"No changes exist for the selected filter.","history-viewer.filter.person-details":"Person Details","history-viewer.filter.relationships":"Relationships","history-viewer.filter.seeAll":"See All","history-viewer.group.title":"{slsType} History","history-viewer.heading":"All Changes for Image","history-viewer.hide-deleted-names.button":"HIDE DELETED NAMES","history-viewer.image-name":"Image {imageName}","history-viewer.list.title":"{fieldType} changes for {personName}","history-viewer.preferences-panel.options.as-group":"Display as Group","history-viewer.preferences-panel.options.as-list":"Display as List","history-viewer.preferences-panel.options.title":"Format","history-viewer.preferences.button":"Preferences","history-viewer.principal-person.label":"(Principal)","history-viewer.show-deleted-names.button":"SHOW DELETED NAMES","history-viewer.view-all-changes.button":"View All Changes","history-viewer.view-all-names.button":"View All Names","history-viewer.view-delete-names.button":"SEE DELETED NAMES","horizontal-select-person.add-event.label":"Event","horizontal-select-person.date.label":"Date","horizontal-select-person.delete-overlay.content-text":"Deleting {fullName} will remove this person and all of the content. This action cannot be undone.","horizontal-select-person.delete-overlay.heading-text":"Delete {fullName}","horizontal-select-person.event.label":"Event {number} ","horizontal-select-person.no-data-for-field.add-field.button":"add {label}","horizontal-select-person.no-data-for-field.add-given-name.button":"Add Given Name","horizontal-select-person.overlay.redirect-text":"Redirect to...","horizontal-select-person.person-details.link.tool-tip":"View Record Details Page","horizontal-select-person.place.label":"Place","horizontal-select-person.record-details.redirect.button":"Record Details Page","horizontal-select-person.relationships.label":"Relationships","horizontal-select-person.unknown-relative.row-data":"Unknown Name","imageQualityAudit.ImageQualityIssue":"Image Quality Issue","imageQualityAudit.additionalNotes":"Additional notes (optional)","imageQualityAudit.backToAuditList":"Back to Audit List","imageQualityAudit.decreasePercentage":"Decrease Percentage","imageQualityAudit.defective":"Defective","imageQualityAudit.describeTheIssue":"Please describe the issue","imageQualityAudit.duplicate":"Duplicate","imageQualityAudit.extraMaterialInFrame":"Extra Material in Frame","imageQualityAudit.imageGroupNumber":"Image Group Number","imageQualityAudit.imageNumber":"Image {number}","imageQualityAudit.imageQualityAudit":"Image Quality Audit","imageQualityAudit.imageQualityIssueForItem":"Image Quality issue for {itemNumber}","imageQualityAudit.imageQualityStandards":"Image Quality Standards","imageQualityAudit.improperlyCropped":"Improperly Cropped","imageQualityAudit.increasePercentage":"Increase Percentage","imageQualityAudit.informationObscured":"Information Obscured","imageQualityAudit.knownIssueHeader":"Known Folder Quality Issues","imageQualityAudit.missingPages":"Missing Pages, Documents, or Attachments","imageQualityAudit.motionBlurOrOutOfFocus":"Motion Blur or Out of Focus","imageQualityAudit.multipleNaturalGroups":"Multiple Natural Groups","imageQualityAudit.nextImage":"Next Image","imageQualityAudit.optional":"optional","imageQualityAudit.other":"Other Reason for Retake","imageQualityAudit.overUnderExposed":"Overexposed/Underexposed","imageQualityAudit.previousImage":"Previous Image","imageQualityAudit.reflections":"Reflections","imageQualityAudit.reviewTheseImages":"Please review the {number} randomly selected images required for audit:","imageQualityAudit.submit":"Submit","imageQualityAudit.submitAudit":"Submit Audit","imageQualityAudit.suggestAChange":"Suggest a Change","imageQualityAudit.suggestNewAuditPercentage":"Suggest New Audit Percentage","imageQualityAudit.userEnteredIssue":"User-entered Issue","imageQualityAudit.wrongCaptureMode":"Wrong Capture Mode","imageQualityAudit.wrongImageOrientation":"Wrong Image Orientation","imageViewer.noDownloadButton":"Due to contract restrictions, this feature is disabled.","index.1931.Census.alert.banner-message":"In order to keep records searchable on FamilySearch, only some fields are available to edit in the 1931 Canada Census.","index.1931.Census.alert.confirm-button":"Confirm","index.1931.Census.alert.dismiss-button":"Dismiss","index.alert.banner-message":"Due to some issues, this record collection is unavailable for edits.","index.alert.banner.image.permission":"This image and the information that was indexed is only available in a <FSLink>FamilySearch center</FSLink> or <AffLink>affiliated library</AffLink>.","index.transitional.dialog.citation_header":"Copying the citation","index.transitional.dialog.citation_text":"<0>To copy the citation, click <1>Information</1>, and then scroll down. The copy icon is located next to the citation.</0>","index.transitional.dialog.img_alt_citation":"Citation","index.transitional.dialog.img_alt_nav":"Navigation","index.transitional.dialog.img_alt_save_record":"Save Record","index.transitional.dialog.nav_header":"New location and label for the Index and Group Data tabs","index.transitional.dialog.nav_text":"Instead of tabs on the side sheet, you\'ll now use the names and information buttons in the header to switch between the indexed data and group data. Same details, just easier to find.","index.transitional.dialog.save_record_header":"One button for attaching to Family Tree and saving to source box","index.transitional.dialog.save_record_text":"<0>Instead of separate buttons, click <1>Save Record</1> to attach the record to a person in Family Tree or save it in your source box.</0>","index.transitional.dialog.title":"Updates to How You Use Records","indexExploreHeader.areYouSure":"Are you sure you want to leave this page? If you leave now, the divisions you created will not be saved.","indexExploreHeader.areYouSure.metadata":"Are you sure you want to leave this page? The changes you made will not be saved.","indexExploreHeader.attachToTree":"Attach to Tree","indexExploreHeader.goBackToImageSearch":"Go back to image search","indexExploreHeader.leave":"Leave","indexExploreHeader.stayOnPage":"Stay on this page","indexExploreHeader.unsavedChanges":"You have unsaved changes","indexedExploreHeader.imagesIndexed":"View Indexed Records","indexing-error-overlay.generic.message":"Click Retry to have the computer run it again. This report will be automatically sent to FamilySearch.","indexing-error-overlay.generic.title":"An Error Has Occurred","indexing-error-overlay.permission.message":"You don\'t currently have permission to perform this action. You may need to refresh or login.","indexing-error-overlay.permission.title":"Permission Issue","indexing-error-overlay.poor.quality.message":"The computer can\'t read this image because of it\'s poor quality. Please try a different image.","indexing-error-overlay.poor.quality.title":"Poor Image Quality","indexing-error-overlay.retry.button":"Retry","infoSheetWrapper.copyImageLinkToClipboard.tooltip":"Copy Image Group Number","infoSheetWrapper.copyImageLinkToClipboardError":"There was an error copying the image group number to the clipboard.","infoSheetWrapper.copyImageLinkToClipboardSuccess":"Image group number copied to clipboard.","infoSheetWrapper.searchImageLink.tooltip":"Image Group Details","infoSheetWrapper.unauthorizedImageAudit":"You do not have permission to audit this image group.","infoSheetWrapper.unauthorizedImageOrganizeMessage":"You do not have permission to edit this image group.","internal.cameraOperator":"Camera Operator","internal.heading":"Internal Staff Options","internal.imageApid":"Image APID","internal.imageArk":"Image ARK","internal.mediaNumber":"Media Number","internal.naturalGroupIds":"Natural Group ID","internal.openFullHistory":"Open Full Change History","internal.projectId":"Project ID","internal.subheading":"Visible only to employees and missionaries","internal.updateDividers.divideImageGroup":"Divide Image Group","internal.updateDividers.dividedSubHeading":"Adjust the divisions that separate the image group into items.","internal.updateDividers.heading":"Image Group Dividers","internal.updateDividers.undividedSubheading":"Create the divisions that will separate the image group into items.","internal.updateDividers.updateDividers":"Update Dividers","metaDataOverlay.continueEditingButton":"Continue Editing","metaDataOverlay.leaveButton":"Leave","metaDataOverlay.unsavedChangesBody":"Are you sure you want to leave edit mode? The changes you made will not be saved.","metaDataOverlay.unsavedChangesHeader":"You have unsaved changes","metadata,creatorPlaceholder":"Add a creator","metadata-audit.back-to-audit-list-button":"Back to Audit List","metadata-audit.heading":"Metadata Audit","metadata-audit.imageGroupNumber":"Image Group Number","metadata-audit.metadata-quality-standards.link":"Metadata Quality Standards","metadata.archivalReferenceNumber":"Archival Reference Number","metadata.citation":"Citation","metadata.citationText_ImageNumber":"image {number} of {totalNumber}","metadata.citationText_Images":"images","metadata.copyAll":"Copy All","metadata.copyFailure":"Failed to copy text to clipboard.","metadata.copySuccess":"{text} copied to clipboard.","metadata.copyToClipboard":"Copy {fieldName} to clipboard","metadata.creator":"Creator","metadata.custodian":"Custodian","metadata.everything":"Everything","metadata.filmItemNotes":"Film Item Notes","metadata.glossary.archivalReferenceNumber":"An identifier a custodian or archive uses to keep track of the record.","metadata.glossary.citation":"A summary of the record\'s metadata to be used for referencing the image group.","metadata.glossary.creator":"The organization, government, or other entity that created the record.","metadata.glossary.custodian":"The organization, government, or other entity that currently owns the record.","metadata.glossary.date":"The year or date range from when the record or records were created.","metadata.glossary.filmItemNotes":"Additional information about the film item.","metadata.glossary.imageGroupNumber":"The image group\'s unique identification number, also known as a Digital Genealogical Society (DGS) number.","metadata.glossary.imagesIndexed":"The number of images in the image group that have been indexed.","metadata.glossary.language":"The language the record is written in.","metadata.glossary.title":"Contains the place, record type, and date of the records in the image group.","metadata.glossary.volume":"Typically, the book number within a larger set of books.","metadata.imageGroupNumber":"Image Group Number","metadata.imagesIndexed":"Images Indexed","metadata.imagesIndexedTotal":"{icon} {indexed} of {total} images ({percent}%)","metadata.indexedRecords":"View Indexed Records","metadata.itemNumberTextForGroupID":"Item {idx} of {total}","metadata.itemNumberTextForGroupIDLabel":"(Item {idx} of {total})","metadata.language":"Language","metadata.multiValueHelpText":"If multiple values exist, list each value on its own line.","metadata.parentGroups":"Parent Groups","metadata.section.title":"Details","metadata.selectAllCreators":"Select all Creators","metadata.title":"Title","metadata.volume":"Volume","metadatafooter.skipAndIsCorrectBody":"You only reserved the Correct Metadata task for Item {initialItemNumber}.","metadatafooter.skipAndIsCorrectBody_plural":"You only reserved the Correct Metadata task for Item {initialItemNumber}.","metadatafooter.skipAndIsCorrectMessage":"Task Not Available","metadatafooter.skipMessageBody":"The Correct Metadata task will be need to be completed later by you or another user. Other items can still be submitted.","metadatafooter.skipMessageHeader":"Skip Item {itemNumber}","metisProjects.groupNameWithItem":"{dgs} (Item {item})","navigation.back-button":"Back","navigation.back-button.label.no-previous-name":"No Previous Name","navigation.cancel-button":"Cancel","navigation.details-button":"RECORD DETAILS","navigation.done-button":"Done","navigation.edit-button":"Edit","navigation.finalPage.details-button":"GO TO RECORD DETAILS","navigation.instructions-button":"Instructions","navigation.match-button":"Match","navigation.menu-button":"More Tools","navigation.next-button":"Next","navigation.not-a-person-button":"Not A Person","navigation.not-a-person-tooltip":"Sometimes the computer identifies text as a name but it may actually be a note from the census taker. Hint: Common text such as \'Vacant\', \'No One Home\', etc.","navigation.restore-nap-button":"Restore Person","navigation.save-button":"Save","navigation.submit-button":"Submit","navigation.unsure-button":"Unsure","navigation.update-button":"Update","new-record-dialog.and":"","new-record-dialog.common.and":"and","new-record-dialog.content":"What is the record type? If you are unsure of what to enter, leave it blank.","new-record-dialog.help-message":"What are record types?","new-record-dialog.learn-more":"Learn More","new-record-dialog.otherCount":"","new-record-dialog.otherCount_plural":"","new-record-dialog.record-types":"Record Types","new-record-dialog.save.btn":"Save","new-record-dialog.title":"New Record","new-record-dialog.undo.btn":"Undo","olibnotes.filmItemNotes":"Film Item Notes","open-infosheet.button":"Open Panel","other-persons-mentioned.mentioned.heading":"Others mentioned in this record","other-persons-mentioned.these-are-referenced.sub-heading":"These are referenced in relation to {givenName} on other pages","person-display.record-linker-button.description":"Compare everyone on this record to your ancestors in Family Tree. This is where you can attach the record to your Family Tree ancestors.","person-display.record-linker-button.description-generic":"View in Source Linker and compare everyone on this record to your ancestors in the tree. If the information matches, you can attach the record to their profiles.","person-display.record-linker-button.label":"View in Source Linker","qualityTags.qualityTags101":"Tight Binding","qualityTags.qualityTags102":"Faded or Damaged Documents","qualityTags.qualityTags103":"Poor Copy of Original","qualityTags.qualityTags104":"Plastic Covered or Shiny Paper","qualityTags.qualityTags105":"Sequence Error","qualityTags.qualityTags106":"Glued or Covered Information","qualityTags.qualityTags107":"Cover Unavailable or Missing","qualityTags.qualityTags108":"Cover Will Not Be Captured","qualityTags.qualityTags201":"Image may have Publishing Restrictions","qualityTags.qualityTags202":"Imported Images","qualityTags.qualityTagsHeader":"Comments and Quality Tags","record-image-checkboxes.in-image":"In this Image","record-image-checkboxes.in-record":"In this Record","record-image-checkboxes.names-on-page-n.label":"Names on Page {pageNumber}","record-image-checkboxes.view-image-in-context.close.button":"View in Context","recordMetadataReviewCheckboxLabel":"Needs Organizing","recordMetadataReviewIsCorrectButton":"Metadata is Correct","recordMetadataReviewIsCorrectHeading":"Confirm Metadata","recordMetadataReviewIsCorrectSubHeading":"Indexed records from this image group will be published and searchable when its metadata review is complete.","recordMetadataReviewModifyHeading":"Modify Metadata","recordMetadataReviewModifySubHeading":"Carefully correct any metadata errors so that records will be categorized properly.","references.catalog-collection.subTitle":"Catalog Collection","references.collections.title":"Collections","references.error-getting-collection-title.message":"There was an error getting the collection title.","references.error-getting-parent-collection.message":"There was an error getting the collection this group belongs to.","references.error-getting-wikis.message":"There was an error getting the wikis for this group.","references.historical-record-collection.subTitle":"Historical Record Collection","references.image-group-belongs-to-the-following-collections.description":"This image group is part of the following collections:","references.image-group-belongs-to-the-following-research-articles.description":"These research articles may provide additional context for your search:","references.image-group-does-not-belong-to-any-wikis.description":"There are no wiki pages that returned for this image group.","references.image-group-does-not-belong-to-the-any-collections.description":"This image group does not belong to any collections.","references.references.title":"References","references.research-wiki.subTitle":"Wiki Page","references.research-wiki.title":"Research Wiki","references.searh-indexed-records.secondaryText":"Search indexed records","references.view-notes-and-image-groups.secondaryText":"View notes and image groups","relationships.names-on-page-n.label":"Names on Page {pageNumber}","relationships.view-in-context":"View in Context","remove-person.delete-individual-button.text":"Delete {name}","remove-person.delete-individual-overlay.content-text":"Deleting {name} will remove this person and all of their content. Undo this action through this individual\'s Change History in the record.","remove-person.delete-individual-overlay.heading-text":"Delete {name}","remove-person.delete-overlay.content-text":"Deleting them will remove this person and all of their content. This action cannot be undone.","remove-person.delete-overlay.content-text_plural":"Delete the following {count} names from the document? This cannot be undone.","remove-person.delete-overlay.content-text_singular":"Delete the following name from the document? This cannot be undone.","remove-person.delete-overlay.heading-text":"Delete All Selected","remove-person.delete-person.button":"Delete","remove-person.delete-person.cancel-button":"Cancel","remove-person.delete-person.content":"Deleting will remove the name and all of their content. This action can be undone in the Change History.","remove-person.delete-person.delete-button":"Delete","remove-person.delete-person.heading":"Delete Names","report-error-overlay.advanced-button":"Switch To Advanced Edit Mode","report-error-overlay.cancel-button":"Cancel","report-error-overlay.describe":"Describe the issue...","report-error-overlay.error-button":"Transcription Error","report-error-overlay.error-type-blank":"Blank","report-error-overlay.error-type-crossed-out":"Crossed Out","report-error-overlay.error-type-incomplete":"Incomplete","report-error-overlay.error-type-not-a-name":"Not a Name","report-error-overlay.error-type-not-readable":"Not Readable","report-error-overlay.error-type-other":"Other","report-error-overlay.error-type-segmentation":"Segmentation Error","report-error-overlay.heading":"Report Transcription Error","report-error-overlay.not-a-person-button":"Not a Person","report-error-overlay.submit-button":"Submit","report-error-overlay.success-message":"Error Reported","report-error-overlay.text-auth":"Note: This flags the error in the FamilySearch internal system. If you\'d like to fix it yourself, switch to Advanced Edit Mode.","report-error-overlay.text-no-auth":"Note: This flags the error in the FamilySearch internal system.","review-highlight-linked-fields.correct-text-instructions.text":"Write in the correct text for the highlighted field.","review-highlight-linked-fields.infosheet.title":"Add Linked Field","review-highlight-linked-fields.new-field.no-data":"No data","review-highlight-linked-fields.panel-header.caption":"Creating linked fields via highlights","review-highlight-linked-fields.panel-header.heading":"Review Linked Fields","review-highlight-linked-fields.select-field-instructions.header-plural":"Highlights for {fieldType} fields.","review-highlight-linked-fields.select-field-instructions.header-singular":"Highlight for {fieldType} field.","review-highlight-linked-fields.select-field-instructions.text-plural":"The selected highlights are linked with the fields below. Pick the transcription to use.","review-highlight-linked-fields.select-field-instructions.text-singular":"The selected highlight is linked with the fields below. Pick the transcription to use.","save-error-overlay.content":"Everything up to this point has been saved. Try refreshing or go back to Get Involved and run the search again.","save-error-overlay.content-generic":"Your changes were not saved.  Please try again later.","save-error-overlay.heading":"Unable to Save Changes","sections.itemNumber":"Item {idx}","select-person.add-person.button":"Add","select-person.add-person.button.v1":"Add Person","select-person.button.addRecord":"Add Record","select-person.delete.button":"Delete","select-person.delete.button.v1":"Delete Person","select-person.done.button":"Done","select-person.edit-records":"Edit Records","select-person.list-item.text":"<Unknown>","select-person.normal.heading":"Indexed Data","select-person.normal.subheading":"Select a name to continue","select-person.primary":"Primary","select-person.principal":"Principal","select-person.recent-changes.add-highlight":"Added Highlight","select-person.recent-changes.create-element":"Created {type}","select-person.recent-changes.remove-element":"Removed {type}","select-person.recent-changes.remove-highlight":"Removed Highlight","select-person.recent-changes.unknown-change":"Made a change","select-person.recent-changes.update-field":"Updated Field","select-person.recent-changes.update-primary":"Updated Primary Person","select-person.subheading.add-name":"Select the Add button below to transcribe the first name on this image.","select-person.subheading.not-indexed":"This image has not been indexed.","select-person.title.heading":"Names not in records","select-person.title.primary":"Primary","select-person.title.subheading":"Add relationships to connect a name to the correct record.","select-persons-checkbox.no-relationship":"No relationship","select-persons-checkbox.tooltip-desc":"To see in context, find name at the bottom.","select-persons-checkbox.tooltip-label":"Name on another image","shared-event.cancel.btn":"Cancel","shared-event.panel-caption":"Names associated with this event","shared-event.panel-description":"Do more names need to be linked to this {eventType}?","shared-event.panel-heading":"Link {eventType} to Other Names","shared-event.title":"Review {personName}","shared-event.update.btn":"Update","shared-field-via-highlight.title":"Add Linked Field","shared-field.title":"Edit Linked {fieldType}","shared-image-viewer.hide.button-label":"Hide Highlights","shared-image-viewer.open-split-screen.button":"Split Screen","shared-image-viewer.original":"Original: Image {index}","shared-image-viewer.show.button-label":"Show Highlights","shared-image-viewer.toggle-fullscreen":"Toggle fullscreen mode","shared-image-viewer.view-only":"View Only: Image {index}","shared-surname.title":"Edit Linked Surname","sharedViewer.viewIndividualImage":"View item {itemNumber} by itself","sharedViewer.viewWholeGroup":"View image group","show-all-highlights.button":"Show All Highlights","ssl-loading-error.content":"Loading record data is taking longer than expected.  Please try again later.","ssl-loading-error.heading":"Unable to load the data","standardizedSexField.validation.success":"Standard Sex","standardizedSexField.validation.warning":"No Standard Selected","task-viewer.confirm-not-a-person-overlay.heading":"Are you sure?","task-viewer.counter-with-total":"{counter} of {total}","task-viewer.error.illegal-characters":"You can only enter \' - , . diacritic, and alphanumeric characters.","task-viewer.finished-modal.cancel-btn":"Maybe Later","task-viewer.finished-modal.continue-btn":"continue","task-viewer.finished-modal.continue-reviewing-prompt":"Want to make more names available?","task-viewer.finished-modal.description":"Thanks to you, {totalFinished} people from {placeName} can now be found by their families.","task-viewer.finished-modal.heading":"Way to go!","task-viewer.finished-modal.option.10names":"10 Names","task-viewer.finished-modal.option.20names":"20 Names","task-viewer.finished-modal.option.30names":"30 Names","task-viewer.finished-modal.option.50names":"50 Names","task-viewer.finished-modal.option.5names":"5 Names","task-viewer.finished-modal.option.nolimit":"No limit","task-viewer.finished-modal.prompt":"Want to keep reviewing names?","task-viewer.full-name-review-title":"Full Name Review","task-viewer.get-involved-link":"Back to Get Involved","task-viewer.given-name":"Given Name(s)","task-viewer.handwriting-alt-text":"Table of handwriting examples for each letter","task-viewer.handwriting-tooltip":"Handwriting Examples","task-viewer.header":"Quick Name Review","task-viewer.name-correction-selected-content.name-field-label":"Name","task-viewer.quick-name-review-title":"Quick Name Review","task-viewer.save-btn":"Submit","task-viewer.skip-image-overlay.heading":"Do you want to skip the image?","task-viewer.social-media-message":"Volunteering my time to help others find their ancestors.","task-viewer.status-overlay-message-changed":"Field changed.","task-viewer.status-overlay-message-saved":"Field saved.","task-viewer.surname":"Surname","task-viewer.surnames":"surnames","task-viewer.title":"Quick Name Review","tasks-done-overlay.confirm-not-a-person-overlay.cancel-button":"Cancel","tasks-done-overlay.confirm-not-a-person-overlay.confirm-button":"Not A Person","tasks-done-overlay.confirm-not-a-person-overlay.message":"<0><0>Not a Person</0> means that the highlighted word(s) don\'t belong to a name.</0><1>Please confirm.</1>","tasks-done-overlay.go-back.button":"Go Back","tasks-done-overlay.no-more-tasks.error.title":"No more tasks","tasks-done-overlay.skip-image-overlay.message":"Looks like you skipped a lot of names in a row. Would you like to try a new image?","tasks-done-overlay.skip-image-overlay.new-image-button":"NEW IMAGE","tasks-done-overlay.skip-image-overlay.stay-button":"STAY HERE","tasks-done-overlay.surnames-done.message":"All the surnames are completed in this area. Go back to Get Involved to do another search.","tasks-done-overlay.tasks-done.error.message":"Go back to Get Involved to do another search.","tasks-done-overlay.tasks-done.error.title":"Task has expired","tasks-done-overlay.tasks-done.message":"All the names are completed for your search. Go back to Get Involved to do another search.","toggle-infosheet.button":"Toggle Panel","total-corrected.body":"Names Corrected","tree-attachment.attach":"Attach","tree-attachment.prompt":"Would you like to attach this image to your tree?","tutorial.description":"We need someone to review the computer\'s work. Learn how you can help.","tutorial.endSlide1.description":"Correcting indexing errors is a simple process that helps other people find their ancestors.","tutorial.endSlide1.title":"How do I edit a record that was indexed by the computer?","tutorial.endSlide2.description":"Names, dates, places, and event types are examples of the information fields. These can be added or removed as needed.","tutorial.endSlide2.title":"How do I add or remove information fields on a record indexed by a computer?","tutorial.endSlide3.description":"You may need to delete the entire entry if the computer indexed a word or phrase that isn\'t a name.","tutorial.endSlide3.title":"How do I delete a name incorrectly indexed by a computer?","tutorial.endSlide4.description":"The blue highlight identifies the word that was indexed. You can correct both the word and the highlight.","tutorial.endSlide4.title":"How do I add or remove highlights on a historical record?","tutorial.slide1.description":"When you index, you type out the hand-written information that you see in a historical record. This is a valuable act of service because it enables other people to find that information when they search our records.","tutorial.slide1.title":"Indexing makes documents searchable.","tutorial.slide2.description":"Up until now, indexing was done entirely by volunteers. Today, computers join with volunteers to speed up the process, resulting in more records for people to search and attach to their family trees.","tutorial.slide2.title":"Computers index very quickly.","tutorial.slide3.description":"Sometimes the computer misspells names or misses information that should have been indexed. As a volunteer, you can correct these mistakes. In doing so, you make it easier for other people to find their ancestors.","tutorial.slide3.title":"A volunteer reviews and corrects the computer\'s work.","tutorial.title":"A Computer Indexed This Record","type-unknown.label":"<Unknown Type>","use-person-fields.relationship.unknown":"Unknown","useCoverages.coveragesMarkedCompleteFailedMessage":"Error marking coverages as complete.","useCoverages.coveragesMarkedCompleteSuccessMessage":"Coverages marked as complete.","useCoverages.dateRequiredMessage":"Each record type requires a date","useCoverages.dateTooFarFutureMessage":"Dates cannot be after current year","useCoverages.duplicatePlaceError":"Place must be unique","useCoverages.missingPlaceMessage":"Place must not be empty","useCoverages.placeRequiredMessage":"At least one place is required","useCoverages.recordTypeRequiredMessage":"Each place requires a record type.","verify-and-edit.add-event":"Add Event","verify-and-edit.life-events":"Life Events","view-history-by":"by","view-history-latest-changes":"Latest Changes","view-history-other-change-plural":"other changes","view-history-other-change-singular":"other change","view-history-show-change-history-button":"Show Change History","view-index.add-event":"Add new event","view-index.add-to-field.button":"Add","view-index.additional-fields.title":"Additional Fields","view-index.age.title":"Age","view-index.edit.button":"Edit","view-index.edit.button.aria-label":"Edit {elementType}","view-index.essential.title":"Essential Information","view-index.event":"Event","view-index.event.label":"Event {number} ","view-index.event.title":"Event","view-index.events":"Events","view-index.events.title":"Event","view-index.given-name.link.tool-tip":"View Record Details Page","view-index.instructions":"Click any edit button to fix the text or highlights.","view-index.more-info.title":"More Information","view-index.no-data-added":"None added yet","view-index.other-details.title":"Other Details","view-index.others-on-this-record":"Others on This Record","view-index.principal.title":"Primary Name","view-index.relationships":"Relationships","view-index.relationships.title":"Relationships","view-index.title":"View {name}","view-manager.correct-metadata":"Correct Metadata","view-manager.divide-image-group":"Divide Image Group","view-manager.edit-mode":"Edit Item {itemNumber}","view-manager.edit-mode-single-item":"Edit Image Group","view-manager.full-text":"Full Text","view-manager.group-data":"Group Data","view-manager.image-index":"Index","viewer-overlay.done.button":"Done Highlighting","viewer-overlay.text":"Click anywhere to highlight.","gen-details.button.attach":"Attach to Family Tree","gen-details.button.citation.copy":"Copy Citation","gen-details.datablock.sex":"Sex","gen-details.dataHeading.afNumber":"Ancestral File Number","gen-details.dataHeading.microfilmNumber":"Microfilm: Submission","gen-details.subheader.ancestralFile":"Ancestral File","gen-details.datablock.name":"Name","gen-details.gender.female":"Female","gen-details.gender.male":"Male","gen-details.gender.unknown":"Unknown","gen-details.subheader.citation":"Citation","gen-details.subheader.events":"Events","gen-details.subheader.family.children":"Children","gen-details.subheader.family.childrenListShow":"Show Children of {spouseName}","gen-details.subheader.family.childrenListHide":"Hide Children of {spouseName}","gen-details.subheader.family.members":"Family Members","gen-details.subheader.family.parents":"Parents","gen-details.subheader.family.spouse":"Spouse","gen-details.subheader.family.spouses":"Spouses","gen-details.subheader.other.facts":"Other Facts","gen-details.subheader.other.alternateNames":"Alternate Names","gen-details.subheader.sources.show":"{count, plural, =0 {No Sources (0)} one {Show source (#)} other {Show sources (#)}}","gen-details.subheader.sources.hide":"{count, plural, =0 {No Sources (0)} one {Hide source (#)} other {Hide sources (#)}}","gen-details.subheader.notes":"Notes ({notesCount, number})","gen-details.subheader.vitals":"Vitals","gen-details.title.person.details":"Person Details","search.record.successMessage":"Copied Citation to Clipboard","search.record.copyRecordError":"Something went wrong. Try again later.","gen-details.unauthorized.header":"We\'re unable to show this person to you.","gen-details.personRemoved.header":"This person has been removed.","gen-details.unauthorized.body":"This person can only be displayed on certain accounts. FamilySearch must honor the agreements we have with our partners, record owners, and internal policies.","gen-details.personRemoved.body":"Unfortunately, the person that you requested is no longer available. If you arrived here from a bookmark, please delete your bookmark.","gen-details.error.goBack":"Go Back","gen-details.error.returnToHomePage":"FamilySearch Home Page","gen-details.datablock.sources":"{count, plural, one {{count} Source} other {{count} Sources}}","gen-details.fact.overlay.sources":"Sources","gen-details.error.imageAlt":"Something Went Wrong","gen-details.error.header":"Something Went Wrong","gen-details.error.body":"Unfortunately, something went wrong and we are unable to display the person. Try refreshing the page, or come back later.","gen-details.not-found.option-reload":"Reload the Page","gen-details.subheader.sourcesSingular":"Source (1)","gen-details.subheader.sourcesPlural":"Sources ({sourcesCount, number})","gen-details.nonStandardized-data.label":"Non-Standardized Data","gen-details.subheader.viewSources":"View Sources","gen-details.subheader.sources":"Sources","gen-details.submittedBy":"Submitted by: <contributorWrapper>{contributorName}</contributorWrapper>","gen-details.subheader.sourcesPluralWithoutNumber":"Sources"}')},27363:(e,t,a)=>{var i={"./ar/common-ui.json":[14084,79523],"./ar/common.json":[52427,38587],"./ar/translation.json":[70825,26272],"./bg/common-ui.json":[13224,28616],"./bg/translation.json":[82309,45718],"./ceb/common-ui.json":[38693,97861],"./ceb/translation.json":[41476,55791],"./cs/common-ui.json":[25749,20381],"./cs/translation.json":[69332,19535],"./da/common-ui.json":[2484,8610],"./da/translation.json":[26521,9953],"./de/common-ui.json":[76080,15907],"./de/translation.json":[83533,13319],"./el/common-ui.json":[24486,76803],"./el/translation.json":[72551,22147],"./en/common-ui.json":[12628],"./en/common.json":[20315,84047],"./en/translation.json":[26297],"./eo/common-ui.json":[58835,923],"./eo/common.json":[61310,91635],"./eo/translation.json":[65934,49505],"./es/common-ui.json":[92423,38699],"./es/translation.json":[94570,58447],"./et/common-ui.json":[74270,72042],"./et/common.json":[88281,52550],"./et/translation.json":[86911,75095],"./fa/common-ui.json":[77250,61087],"./fa/common.json":[6645,16373],"./fa/translation.json":[44491,10298],"./fi/common-ui.json":[29642,48384],"./fi/translation.json":[56083,95557],"./fj/common-ui.json":[30551,46552],"./fj/translation.json":[98522,8204],"./fr/common-ui.json":[99391,40498],"./fr/translation.json":[81570,53570],"./gn/common-ui.json":[82846,14575],"./gn/translation.json":[35647,97135],"./hr/common-ui.json":[72417,82308],"./hr/common.json":[89136,28322],"./hr/translation.json":[82808,933],"./ht/common-ui.json":[37771,54172],"./ht/common.json":[10790,42432],"./ht/translation.json":[80230,87325],"./hu/common-ui.json":[33004,97742],"./hu/translation.json":[36049,85862],"./hy/common-ui.json":[80307,684],"./hy/common.json":[91007,11088],"./hy/translation.json":[61469,9001],"./id/common-ui.json":[5338,77579],"./id/translation.json":[24067,19629],"./is/common-ui.json":[96795,28959],"./is/translation.json":[1878,45957],"./it/common-ui.json":[4170,21002],"./it/translation.json":[45683,20012],"./ja/common-ui.json":[59926,50908],"./ja/translation.json":[5751,92506],"./ka/common-ui.json":[80819,56069],"./ka/common.json":[22462,38397],"./ka/translation.json":[4718,55568],"./km/common-ui.json":[31639,80710],"./km/translation.json":[65146,44533],"./ko/common-ui.json":[43729,17265],"./ko/translation.json":[68296,33669],"./lt/common-ui.json":[68887,12197],"./lt/common.json":[19722,34627],"./lt/translation.json":[37306,33924],"./lv/common-ui.json":[91089,68258],"./lv/common.json":[95008,84670],"./lv/translation.json":[46600,2067],"./mg/common-ui.json":[13843,75083],"./mg/common.json":[48990,20752],"./mg/translation.json":[57518,11163],"./mk/common-ui.json":[83287,61427],"./mk/translation.json":[41722,47933],"./mn/common-ui.json":[28,53632],"./mn/translation.json":[21249,76298],"./ms/common-ui.json":[7199,68671],"./ms/common.json":[74978,7651],"./ms/translation.json":[86658,67526],"./nl/common-ui.json":[90413,59854],"./nl/translation.json":[81036,46645],"./no/common-ui.json":[65412,67452],"./no/translation.json":[88393,59736],"./pl/common-ui.json":[19643,10275],"./pl/translation.json":[19222,61871],"./pt/common-ui.json":[80099,83405],"./pt/translation.json":[33470,54869],"./ro/common-ui.json":[19728,95574],"./ro/translation.json":[88045,25566],"./ru/common-ui.json":[54682,76482],"./ru/translation.json":[77123,59127],"./sk/common-ui.json":[18093,81560],"./sk/translation.json":[28268,19384],"./sl/common-ui.json":[93696,55685],"./sl/translation.json":[95965,18869],"./sm/common-ui.json":[29183,44038],"./sm/translation.json":[25442,73774],"./sq/common-ui.json":[1275,1456],"./sq/translation.json":[85718,31164],"./sr/common-ui.json":[12174,48469],"./sr/translation.json":[42287,61769],"./sv/common-ui.json":[90602,56921],"./sv/translation.json":[46771,89103],"./sw/common-ui.json":[33745,48756],"./sw/translation.json":[43176,51558],"./th/common-ui.json":[81739,96676],"./th/translation.json":[74150,18086],"./tl/common-ui.json":[65991,75330],"./tl/translation.json":[33770,78516],"./to/common-ui.json":[90970,1901],"./to/translation.json":[56931,96758],"./tr/common-ui.json":[39965,64845],"./tr/common.json":[15540,3369],"./tr/translation.json":[79452,31254],"./uk/common-ui.json":[85023,10022],"./uk/translation.json":[14434,56874],"./vi/common-ui.json":[38957,78317],"./vi/translation.json":[84067,46669],"./zh-hans/common-ui.json":[67922,12745],"./zh-hans/translation.json":[57435,10429],"./zh/common-ui.json":[16421,26553],"./zh/translation.json":[67172,80657]};function r(e){if(!a.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],r=t[0];return Promise.all(t.slice(1).map(a.e)).then((()=>a.t(r,19)))}r.keys=()=>Object.keys(i),r.id=27363,e.exports=r},31767:(e,t,a)=>{"use strict";a.d(t,{A:()=>s,y:()=>o});var i=a(74914),r=a(33082),n=a(34435);const o=i.createContext({});function s(e){let{children:t,parentGroup:a}=e;const[s,l]=(0,i.useState)([]),[d,c]=(0,i.useState)(null),[u,h]=(0,i.useState)({}),[p,m]=(0,r.usePermission)("LightyearImageOrganizePermission","LightyearContext"),[g]=(0,r.usePermission)("RMSGroupWritePermission","RMSContext"),[v]=(0,r.usePermission)("RMSAdminPermission","RMSContext"),y=p&&(g||v),f=(0,i.useCallback)((e=>{(null===s||void 0===s?void 0:s.length)<1?l([]):l(s.reduce(((t,a)=>a!==e?[...t,a]:t),[]))}),[s]),b=(0,i.useCallback)((e=>{const t=null!==a&&void 0!==a&&a.siblingIdsWithChildren?a.siblingIdsWithChildren.flatMap((e=>e.childIds)):a.imageApids;l((a=>{const i=null===t||void 0===t?void 0:t.findIndex((t=>t===e));if(i===t.length)return a;const r=new Set([...a,i+1]);return Array.from(r).sort(((e,t)=>e-t))}))}),[a]);(0,i.useEffect)((()=>{if(a&&null===d){const e=function(e){const t=null!==e&&void 0!==e&&e.siblingIdsWithChildren?"siblingIdsWithChildren":"childGroups",a=null!==e&&void 0!==e&&e.siblingIdsWithChildren?"childIds":"imageApids",i=e[t];if(!Array.isArray(i)||0===(null===i||void 0===i?void 0:i.length))return[0];const r=[];let n=0;return i.forEach((e=>{var t,i;r.push(n),n+=null!==(t=null===(i=e[a])||void 0===i?void 0:i.length)&&void 0!==t?t:0})),r}(a);l(e),null===d&&c(e)}}),[a,d]);const A={dividersAltered:(0,i.useMemo)((()=>{if((null===d||void 0===d?void 0:d.length)!==(null===s||void 0===s?void 0:s.length))return!0;for(let e=0;e<s.length;e++)if(d[e]!==s[e])return!0;return!1}),[s,d]),dividerOffsets:s,addNewDivider:b,removeDivider:f,skippedItemsMap:u,setSkippedItemsMap:h,hasImageOrganizePermissions:p,imageOrganizePermissionsLoaded:"loaded"===m,hasEditPermissions:y};return(0,n.Y)(o.Provider,{value:A},t)}},37655:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var i=a(77595);const r={updateCameraReworkStatus:()=>i.J1`
    mutation UpdateCameraReworkStatus($updateParams: UpdateCameraReworkStatusInput) {
      updateCameraReworkStatus(params: $updateParams) {
        code
        message
        newStatus
      }
    }
  `,updateGroupData:()=>i.J1`
    mutation UpdateGroupData($updateParams: UpdateGroupDataInput!) {
      updateGroupData(params: $updateParams) {
        code
        success
        message
        errorFields
        group {
          volumes
          changeHistory {
            user {
              contactName
            }
            type
            opCode
            date {
              gedcomX
              fromTimestamp
            }
            coverages {
              place {
                fullName
                id
              }
              recordTypes {
                apolloId
                id
                name
                date {
                  fromTimestamp
                  toTimestamp
                  gedcomX
                }
              }
            }
            metadata {
              title
              volume
              languages
              archivalReferenceNumber
              creator
            }
          }
          id
          imageViewerCoverages {
            place {
              fullName
              id
            }
            recordTypes {
              apolloId
              id
              name
              date {
                fromTimestamp
                toTimestamp
                gedcomX
              }
            }
          }
          imageApids
          internalData {
            cameraOperator
            cameraOperatorNumber
            id
            originalMediaNumber
            phoenixAcquisitionIds
          }
          metadata {
            title
            volumes
            languages
            createdDate {
              fromTimestamp
              gedcomX
            }
            creator
            currentDate {
              fromTimestamp
              gedcomX
            }
            custodian
            archivalReferenceNumber
            imageGroupNumber
            place
          }
        }
      }
    }
  `,updateNaturalGroups:()=>i.J1`
    mutation UpdateNaturalGroups($parentGroupId: ID!, $newNaturalGroups: [NaturalGroupUpdateInput]!) {
      updateNaturalGroups(parentGroupId: $parentGroupId, newNaturalGroups: $newNaturalGroups)
    }
  `,updateWorkflowActionStatus:()=>i.J1`
    mutation UpdateWorkflowActionStatus($params: UpdateWorkflowActionStatusInput) {
      updateWorkflowActionStatus(params: $params) {
        code
        success
        newStatus
        message
      }
    }
  `,updateWorkflowActionStatusList:()=>i.J1`
    mutation UpdateWorkflowActionStatusList($actionStatusList: [UpdateWorkflowActionStatusInput]) {
      updateWorkflowActionStatusList(actionStatusList: $actionStatusList) {
        code
        success
        message
      }
    }
  `,resolveCAIReview:()=>i.J1`
    mutation ResolveCAIReview($resolution: String!, $groupId: ID!) {
      resolveCAIReview(resolution: $resolution, groupId: $groupId) {
        code
      }
    }
  `,updateMetisProjectStatus:()=>i.J1`
    mutation UpdateMetisProjectStatus($updateParams: UpdateMetisProjectInput) {
      updateMetisProjectStatus(params: $updateParams) {
        code
        success
        message
        metisProject {
          id
          workflowActions {
            name
            status
          }
        }
      }
    }
  `,suggestNewAuditPercentage:()=>i.J1`
    mutation SuggestNewImageAudit($auditPercentageSuggestion: auditPercentageSuggestionInput) {
      suggestNewImageAudit(auditPercentageSuggestion: $auditPercentageSuggestion) {
        code
        success
        message
      }
    }
  `,reserveAuditCoverages:()=>i.J1`
    mutation ReserveAuditCoverages($parentGroupId: ID!) {
      reserveAuditCoverages(parentGroupId: $parentGroupId) {
        code
        success
        message
      }
    }
  `}},40087:(e,t,a)=>{"use strict";function i(e,t){const{message:a,config:i}=e;return e.message=`${t}. Url: '${i&&i.url||"Unknown"}'. Message: ${a}`,e}function r(e,t){if(!e)return;Object.keys(e).forEach((e=>{if(!t.includes(e))throw new Error(`Unexpected key in object: ${e}, valid keys are: (${t})`)}))}a.d(t,{A:()=>i,d:()=>r})},40247:(e,t,a)=>{"use strict";a.d(t,{gq:()=>u,YZ:()=>b,XA:()=>w,Tf:()=>O,Yj:()=>E,hK:()=>S,WG:()=>l,hV:()=>f,dJ:()=>P,WH:()=>c,X$:()=>k,v_:()=>Y,sA:()=>N,d9:()=>R});var i=a(74914),r=a(48451),n=a(95476),o=a(81683),s=a(99445);function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const{viewMode:t}=(0,s.A)(),{isDivideMode:a}=(0,n.Oq)(),{dividerOffsets:l,removeDivider:d}=(0,n.Lw)(),c=(0,o.rE)({dividerOffsets:l,removeDivider:d}),u=(0,o.rE)({dividerOffsets:l});return(0,i.useMemo)((()=>{var i;if(null!==e&&void 0!==e&&e.childGroups){let t=0;return e.childGroups.map(((e,a)=>{var i;const n=t;return t+=(null===e||void 0===e||null===(i=e.childIds)||void 0===i?void 0:i.length)||0,{id:n,offset:n,title:r.i18n.t("sections.itemNumber","Item {idx}",{idx:a+1})}}))}let n=[];return a?n=c:"group"===t&&(n=u),(null===(i=n)||void 0===i?void 0:i.length)>0?n:[{offset:0}]}),[u,a,c,t,e])}var d=a(64591);function c(){const e=(0,d.vl)();return(0,i.useCallback)((t=>{e({type:"SET_REFERENCE_FOCUSED_INDEX",value:t})}),[e])}function u(){const{viewMode:e}=(0,s.A)(),{isDivideMode:t}=(0,n.Oq)(),{initialGroup:a,group:r}=(0,n.P2)();return(0,i.useMemo)((()=>t||"group"===e?a:r),[a,r,t,e])}var h=a(97454),p=a(24520),m=a(87046),g=a(32833);var v=a(40773);var y=a(52875);function f(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const{query:t}=(0,h.A)({replaceState:!0}),{view:a}=t,r=(0,p.A)(),l=function(){const e=(0,d.mS)(),t=(0,d.vl)(),a=(0,m.A)(),r=(0,g.l)(),{currentImageArk:s}=a,l=u(),c=(0,n.gw)();return(0,i.useCallback)(((a,i,n)=>{s&&i&&a&&a&&s!==a&&(r({type:"SET_DATA",value:{currentImageArk:a}}),e.dontResetState&&!n||t({type:"NAVIGATE_IMAGE_RESET"}),(0,o.s3)(i,a,l,c))}),[s,c,l,t,e.dontResetState,r])}(),c=(0,v.HQ)(),{switchImageCheck:f}=c,b=(0,y.kT)(),A=(0,y.XQ)(),w=(0,m.A)(),T=function(){const{isDivideMode:e}=(0,n.Oq)(),{viewMode:t}=(0,s.A)(),{initialGroup:a}=(0,n.P2)(),r=null===a||void 0===a?void 0:a.imageApids,l=(0,m.A)(),{dividerOffsets:d}=(0,n.Rb)();return(0,i.useCallback)(((i,n)=>{var s,c,u;if((null===a||void 0===a||null===(s=a.childGroups)||void 0===s?void 0:s.length)>0&&"single"===t&&!e&&"number"===typeof n&&n>=0){const e=(0,o.bz)(r),t=i+d[n];return Array.isArray(e)&&e[t]?e[t]:{}}return null!==l&&void 0!==l&&null!==(c=l.thumbnails)&&void 0!==c&&null!==(u=c[i])&&void 0!==u&&u.ark?l.thumbnails[i]:{}}),[d,a,r,t,l,e])}(),I=(0,i.useCallback)((t=>!(e&&!f())&&(b({type:"SET_FOCUSED_INDEX",value:t}),!0)),[b,f,e]),S=(0,i.useCallback)((e=>{const t=window.location.search,i=null===t||void 0===t?void 0:t.split("&").filter((e=>!e.includes("personArk"))).join("&");"explore"===a?r.replace({pathname:`/ark:/61903/${e}`,search:i}):r.push({pathname:`/ark:/61903/${e}`,search:i})}),[r,a]);return(0,i.useCallback)(((e,t,a)=>{if(e===A.focusedIndex&&"number"!==typeof a)return;const{ark:i,id:r}=T(e,a);if(i&&(i!==w.currentImageArk||A.focusedIndex<0)){I(e)&&(S(i),l(i,r,t))}}),[S,I,l,A.focusedIndex,T,w.currentImageArk])}function b(){const{query:e}=(0,h.A)(),{view:t="explore"}=e,a=(0,y.XQ)(),r=(0,y.kT)(),o=(0,p.A)(),s=(0,m.A)(),{currentImageArk:l}=s,d=(0,g.l)(),{itemNumber:c}=(0,n.P2)(),{isDivideMode:u}=(0,n.Oq)(),{isImageOrganizeMode:v}=(0,n.Oq)(),{dividerOffsets:b}=(0,n.Lw)(),A=f(),w=(0,i.useRef)(!1),T=(0,i.useCallback)((()=>{const e=o.location.pathname.split("/").pop();if(l||d({type:"SET_DATA",value:{currentImageArk:e}}),s.thumbnails&&s.thumbnails.length){const t=s.thumbnails.findIndex((t=>t.ark===e));-1===a.focusedIndex&&t>-1&&(r({type:"SET_FOCUSED_INDEX",value:t}),w.current=!0)}}),[l,o.location.pathname,a.focusedIndex,d,s.thumbnails,r]),I=(0,i.useCallback)((()=>{if(-1===a.focusedIndex)T();else{var e;(a.focusedIndex>=(null===(e=s.thumbnails)||void 0===e?void 0:e.length)?0:a.focusedIndex)!==a.focusedIndex&&A(0)}}),[a.focusedIndex,s.thumbnails,A,T]),S=(0,i.useCallback)((()=>{s.thumbnails&&s.thumbnails.length&&I()}),[I,s.thumbnails]),E=(0,i.useCallback)((()=>{!u&&!v||"number"===typeof a.focusedIndex&&-1!==a.focusedIndex||(c>0&&(null===b||void 0===b?void 0:b.length)>0&&u&&w.current?A(b[c-1]):I())}),[b,u,v,c,a.focusedIndex,A,I]);(0,i.useEffect)((()=>{"organize"===t&&E()}),[E,t]),(0,i.useEffect)((()=>{"index"!==t&&"fullText"!==t||T()}),[t,T]),(0,i.useEffect)((()=>{"explore"===t&&S()}),[t,S])}var A=a(51689);function w(){const{currentImageArk:e}=(0,m.A)(),t=(0,y.XQ)(),a=(0,d.mS)(),r=(0,d.vl)(),n=(0,m.A)(),o=n.images,{query:s}=(0,h.A)();(0,i.useEffect)((()=>{const a=(e,t)=>e.find((e=>t.fieldId===e.fieldId&&t.position.x===e.position.x&&t.position.y===e.position.y&&t.position.width===e.position.width&&t.position.height===e.position.height&&(null===t||void 0===t?void 0:t.imageId)===(null===e||void 0===e?void 0:e.imageId)));if(e&&t.focusedIndex>=0){let i=(0,A.mV)({element:o.find((t=>t.partitionKey===e))});const s=(0,A.mV)({element:o.find((e=>{var a;return e.partitionKey===(null===(a=n.thumbnails[t.focusedIndex-1])||void 0===a?void 0:a.ark)}))}),l=(0,A.mV)({element:o.find((e=>{var a;return e.partitionKey===(null===(a=n.thumbnails[t.focusedIndex+1])||void 0===a?void 0:a.ark)}))});i=[...i,...null===s||void 0===s?void 0:s.filter((t=>(null===t||void 0===t?void 0:t.imageId)===e)).filter((e=>!a(i,e)&&!a(l,e))),...null===l||void 0===l?void 0:l.filter((t=>(null===t||void 0===t?void 0:t.imageId)===e)).filter((e=>!a(i,e)&&!a(s,e)))];const d=(0,A.L2)(o.find((t=>t.partitionKey===e)));r({type:"SET_STATE",value:{recordHighlights:d,recordEditHighlights:d}}),r({type:"SET_HIGHLIGHTS",value:i}),r({type:"SET_EDIT_HIGHLIGHTS",value:i})}}),[e,o,r,t.focusedIndex,s.view]),(0,i.useEffect)((()=>{if(a.splitScreen){const t=o.find((e=>{var t,i;return e.partitionKey===(null===n||void 0===n||null===(t=n.thumbnails)||void 0===t||null===(i=t[a.referenceFocusedIndex])||void 0===i?void 0:i.ark)})),i=(0,A.mV)({element:t}).concat((0,A.mV)({element:o.find((t=>t.partitionKey===e))}));r({type:"SET_REFERENCE_HIGHLIGHTS",value:i}),r({type:"SET_REFERENCE_EDIT_HIGHLIGHTS",value:i});const s=(0,A.L2)(t);r({type:"SET_STATE",value:{referenceRecordHighlights:s,referenceRecordEditHighlights:s}})}}),[e,o,r,a.referenceFocusedIndex,a.splitScreen,null===n||void 0===n?void 0:n.thumbnails])}var T=a(21928),I=a(72416);function S(){const{currentImageArk:e,images:t}=(0,m.A)(),a=(0,d.mS)(),r=(0,d.vl)(),{displayHighlightsApi:n}=(0,d.Z0)(),{activeFieldInfo:o,setCreatingRects:s}=(0,T.Y)(),{query:{view:l}}=(0,h.A)();return(0,i.useCallback)((i=>{(0,I.pH)(i,t,e,a,n,r,o,["fullText","index"].includes(l)),s(!1)}),[o,e,n,t,r,a,s,l])}function E(){const e=(0,d.mS)(),t=(0,d.vl)(),{query:a}=(0,h.A)(),r=(0,v.HQ)();(0,i.useEffect)((()=>{e.resetState&&("explore"!==a.view&&r.switchImageCheck(),e.resetState&&t({type:"SET_STATE",value:{resetState:!1}}))}),[t,r,a.mode])}function k(){const e=(0,d.vl)();return(0,i.useCallback)((t=>{e({type:"SET_SPLIT_SCREEN_IMAGE_GRID",value:t})}),[e])}var C=a(26774),x=a(88789);function Y(){const[e]=(0,C.B)(),{addNewDivider:t}=(0,n.Lw)(),{isDivideMode:a}=(0,n.Oq)();return a?{Icon:x.A,text:e("ImageBrowserViewer.hoverButtonText","End Item"),onClick:t,linkName:"add-new-divider-button"}:void 0}function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const{imageApids:t}=u(),a=(0,g.l)(),r=(0,i.useRef)([]),n=(0,i.useMemo)((()=>e?null===e||void 0===e?void 0:e.imageApids:t),[e,t]);(0,i.useEffect)((()=>{const e=null===n||void 0===n?void 0:n.reduce(((e,t,a)=>t===r.current[a]&&e),n.length===r.current.length);n&&n.length&&!e&&(a({type:"SET_DATA",value:{thumbnails:(0,o.bz)(n)}}),r.current=n)}),[n,a])}function R(e){let{ribbonImages:t,overrideSections:a=null}=e;const[r,o]=(0,i.useState)(-1),{viewMode:l}=(0,s.A)(),{dividerOffsets:d}=(0,n.Rb)(),{itemNumber:c}=(0,n.P2)(),u=(0,y.XQ)(),h=(0,y.kT)(),p=(0,i.useCallback)((e=>h({type:"SET_FOCUSED_INDEX",value:e})),[h]),m=a?a.map((e=>null===e||void 0===e?void 0:e.offset)):d,g="group"===l,v=r>-1,f=(null===m||void 0===m?void 0:m.length)>0,b=null===u||void 0===u?void 0:u.focusedIndex,A=null===m||void 0===m?void 0:m[c-1],w=null===t||void 0===t?void 0:t.length;(0,i.useEffect)((()=>{g&&!v&&f&&A>-1&&b+A>-1&&w>b+A?(p(b+A),o(A)):!g&&v&&(p(b-r>0?b-r:0),o(-1))}),[w,r,p,g,v,f,A,b])}function P(){const e=(0,p.A)();return(0,i.useCallback)((t=>{t?e.replace({pathname:window.location.pathname,search:`${window.location.search}&grid=on`}):e.replace({pathname:window.location.pathname,search:window.location.search.replace("&grid=on","")})}),[e])}function O(){const e=(0,p.A)(),{viewMode:t}=(0,s.A)(),{dividerOffsets:a}=(0,n.Rb)(),{isDivideMode:r}=(0,n.Oq)(),{groupIndex:o,setGroupIndex:l,initialGroup:d}=(0,n.P2)(),{query:c}=(0,h.A)();return(0,i.useCallback)((i=>{if(("group"===t||r)&&a.length>0&&o>-1&&i>-1){var n,s;const t=(u=i)<=(h=a)[0]?0:u>=h[h.length-1]?h.length-1:h.findIndex(((e,t)=>u>=e&&u<h[t+1]));if(-1===t||t===o)return;l(t);const r=null===d||void 0===d||null===(n=d.childGroups)||void 0===n||null===(s=n[t])||void 0===s?void 0:s.id;if(r&&r!==c.groupId){const t=window.location.search.replace(/&groupId=[^&]*/,`&groupId=${r}`);e.replace({pathname:window.location.pathname,search:t})}}var u,h}),[a,e,d,r,o,c.groupId,l,t])}},40773:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>d,HQ:()=>c,eV:()=>s});var i=a(74914),r=a(86347),n=a(34435);function o(){return"editMetadataOpen"}const s=(0,i.createContext)("OverlayContext"),l=(0,r.Ay)("siv:OverlayContext");function d(e){let{infoSheetOverlay:t,editIndexOverlay:a,viewIndexOverlay:r,addPersonOverlay:d,addPersonGenericOverlay:c,addPersonPage2Overlay:u,addPersonPage2GenericOverlay:h,dragNamesOverlay:p,removePersonOverlay:m,editSharedHighlightPage1Overlay:g,editSharedHighlightPage2Overlay:v,editHighlightsOverlay:y,editSharedFieldPage1Overlay:f,editSharedFieldPage2Overlay:b,editDanglingFieldOverlay:A,editOtherFieldsOverlay:w,editRelationshipsOverlay:T,editAgeOverlay:I,editEventsOverlay:S,editEssentialInfoOverlay:E,eventPanelOverlay:k,sharedEventOverlay:C,highlightsPanelOverlay:x,attachToTreeOverlay:Y,fullTextCreateRecordsAndAttachOverlay:N,editMetadataOverlay:R,viewAnotherItemOverlay:P,finishedCorrectingMetadataOverlay:O,groupHistoryOverlay:_,children:F}=e;const[D,M]=(0,i.useState)([]),[H,L]=(0,i.useState)([]),[z,V]=(0,i.useState)([]);(0,i.useEffect)((()=>{V([{overlay:t,id:"mainInfosheet"},{overlay:a,id:"editIndex"},{overlay:r,id:"viewIndex"},{overlay:d,id:"addPersonPage1"},{overlay:c,id:"addPersonPage1Generic"},{overlay:u,id:"addPersonPage2"},{overlay:h,id:"addPersonPage2Generic"},{overlay:p,id:"dragNames"},{overlay:m,id:"removePerson"},{overlay:g,id:"editSharedHighlightPage1"},{overlay:v,id:"editSharedHighlightPage2"},{overlay:y,id:"editHighlights"},{overlay:f,id:"editSharedFieldPage1"},{overlay:b,id:"editSharedFieldPage2"},{overlay:A,id:"editDanglingField"},{overlay:w,id:"editOtherFields"},{overlay:T,id:"editRelationships"},{overlay:I,id:"editAge"},{overlay:S,id:"editEvents"},{overlay:E,id:"editEssentialInfo"},{overlay:k,id:"eventPanel"},{overlay:C,id:"sharedEvent"},{overlay:x,id:"highlightsPanel"},{overlay:Y,id:"attachToTreeOverlay"},{overlay:N,id:"fullTextCreateRecordsAndAttachOverlay"},{overlay:R,id:"editMetadataOverlay"},{overlay:_,id:"groupHistoryOverlay"}])}),[]);const B=(0,i.useCallback)((e=>{M((t=>(null===t||void 0===t?void 0:t.filter((t=>t!==e)))||[]))}),[]),G=(0,i.useCallback)((e=>{L((t=>[...t,e]))}),[L]),U=(0,i.useCallback)((e=>{L((t=>{const a=[...t],i=t.indexOf(e);return a.splice(i,1),a}))}),[L]),K=(0,i.useCallback)((e=>{B(e),M((t=>[...t,e]));const t=z.find((t=>t.id===e));t&&(t.overlay.open(),"editMetadataOverlay"===e&&G(o))}),[z,B,G]),q=(0,i.useCallback)((e=>{B(e);const t=z.find((t=>t.id===e));t&&(t.overlay.close(),"editMetadataOverlay"===e&&U(o))}),[z,B,U]);r&&(r.onClose=()=>B("viewIndex"));const j=(0,i.useCallback)((()=>{z.forEach((e=>{"mainInfosheet"!==e.id&&null!==e&&void 0!==e&&e.overlay&&(e.overlay.close(),B(e.id))}))}),[z,B]),$=(0,i.useCallback)((e=>{var t;return null===z||void 0===z||null===(t=z.find((t=>t.id===e)))||void 0===t?void 0:t.overlay}),[z]),W=(0,i.useCallback)((()=>Boolean(!(null!==a&&void 0!==a&&a.isOpen)&&!(null!==r&&void 0!==r&&r.isOpen)&&!(null!==d&&void 0!==d&&d.isOpen)&&!(null!==c&&void 0!==c&&c.isOpen)&&!(null!==u&&void 0!==u&&u.isOpen)&&!(null!==h&&void 0!==h&&h.isOpen)&&!(null!==p&&void 0!==p&&p.isOpen)&&!(null!==m&&void 0!==m&&m.isOpen)&&!(null!==g&&void 0!==g&&g.isOpen)&&!(null!==v&&void 0!==v&&v.isOpen)&&!(null!==y&&void 0!==y&&y.isOpen)&&!(null!==f&&void 0!==f&&f.isOpen)&&!(null!==b&&void 0!==b&&b.isOpen)&&!(null!==A&&void 0!==A&&A.isOpen)&&!(null!==w&&void 0!==w&&w.isOpen)&&!(null!==T&&void 0!==T&&T.isOpen)&&!(null!==R&&void 0!==R&&R.isOpen)&&!(null!==I&&void 0!==I&&I.isOpen)&&!(null!==S&&void 0!==S&&S.isOpen)&&!(null!==E&&void 0!==E&&E.isOpen)&&!(null!==k&&void 0!==k&&k.isOpen)&&!(null!==C&&void 0!==C&&C.isOpen)&&!(null!==_&&void 0!==_&&_.isOpen)&&!(null!==x&&void 0!==x&&x.isOpen)&&!(null!==Y&&void 0!==Y&&Y.isOpen)&&!(null!==N&&void 0!==N&&N.isOpen))),[null===a||void 0===a?void 0:a.isOpen,null===r||void 0===r?void 0:r.isOpen,null===d||void 0===d?void 0:d.isOpen,null===c||void 0===c?void 0:c.isOpen,null===u||void 0===u?void 0:u.isOpen,null===h||void 0===h?void 0:h.isOpen,null===p||void 0===p?void 0:p.isOpen,null===m||void 0===m?void 0:m.isOpen,null===g||void 0===g?void 0:g.isOpen,null===v||void 0===v?void 0:v.isOpen,null===y||void 0===y?void 0:y.isOpen,null===f||void 0===f?void 0:f.isOpen,null===b||void 0===b?void 0:b.isOpen,null===A||void 0===A?void 0:A.isOpen,null===w||void 0===w?void 0:w.isOpen,null===T||void 0===T?void 0:T.isOpen,null===R||void 0===R?void 0:R.isOpen,null===I||void 0===I?void 0:I.isOpen,null===S||void 0===S?void 0:S.isOpen,null===E||void 0===E?void 0:E.isOpen,null===k||void 0===k?void 0:k.isOpen,null===C||void 0===C?void 0:C.isOpen,null===x||void 0===x?void 0:x.isOpen,null===Y||void 0===Y?void 0:Y.isOpen,null===N||void 0===N?void 0:N.isOpen,null===_||void 0===_?void 0:_.isOpen]),X=(0,i.useCallback)((()=>{var e;return null===(e=D.slice(-1))||void 0===e?void 0:e[0]}),[D]),Q=(0,i.useCallback)((e=>D.find((t=>t===e))),[D]),J=(0,i.useCallback)((()=>{let e=!0,t=!1;return H.forEach((a=>{const i=a(X());"editMetadataOpen"===i&&(t=!0),i||(e=!1)})),H.length>0&&e&&!t?(j(),M([]),!0):e||t}),[j,H,X]);return l({panelStack:D,subscribers:H,topMostPanel:X()}),(0,n.Y)(s.Provider,{value:{infoSheetOverlay:t,editIndexOverlay:a,viewIndexOverlay:r,addPersonOverlay:d,addPersonGenericOverlay:c,addPersonPage2Overlay:u,addPersonPage2GenericOverlay:h,dragNamesOverlay:p,removePersonOverlay:m,editSharedHighlightPage1Overlay:g,editSharedHighlightPage2Overlay:v,editHighlightsOverlay:y,editSharedFieldPage1Overlay:f,editSharedFieldPage2Overlay:b,editDanglingFieldOverlay:A,editOtherFieldsOverlay:w,editRelationshipsOverlay:T,editAgeOverlay:I,editEventsOverlay:S,editEssentialInfoOverlay:E,eventPanelOverlay:k,sharedEventOverlay:C,highlightsPanelOverlay:x,fullTextCreateRecordsAndAttachOverlay:N,attachToTreeOverlay:Y,editMetadataOverlay:R,viewAnotherItemOverlay:P,finishedCorrectingMetadataOverlay:O,groupHistoryOverlay:_,topMostPanel:X,closeAll:j,allPanelsClosed:W,switchImageCheck:J,subscribe:G,unsubscribe:U,openOverlay:K,closeOverlay:q,getOverlay:$,inPanelStack:Q}},F)}const c=()=>{const e=(0,i.useContext)(s);if(void 0===e)throw new Error("useOverlayContext must be used within a OverlayContextProvider. If writing a test, use <StateProvider> from testUtils.js");return e}},42634:()=>{},43494:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});const i={AVAILABLE:"Available",NOT_YET_AVAILABLE:"Not Yet Available",IN_PROGRESS:"In Progress",FAILURE:"Failure",HALTED:"Halted",PENDING:"Pending",COMPLETED:"Completed",CANCELLED:"Cancelled",ERROR:"Error",NOT_REQUIRED:"Not Required",DIVIDE:"AuditBoundaries",METADATA_AUDIT:"AuditCoverages",IMAGE_METADATA_AUDIT:"ImageMetadataAudit",IMAGE_QUALITY_AUDIT:"ImageQualityAudit"}},45905:()=>{},49388:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>u,Vr:()=>l,YJ:()=>d});var i=a(74914),r=a(17731),n=a(97454),o=a(94066),s=a(34435);const l=(0,i.createContext)({}),d=(0,i.createContext)((()=>{}));function c(e,t){switch(t.type){case"HANDLE_NEW_SERVER_DATA":return h(t.value.data,t.value.initialChildIndex);case"RESET":return{...e,group:{...v(e.initialGroup,t),coverages:[...e.currentCoverages||[]]}};case"SET_COVERAGES":return t.forVolumeSet?{...e,initialGroup:{...e.initialGroup,coverages:t.value},volumeSetCoverageCheckboxes:p(t.value,!1)}:{...e,group:{...e.group,coverages:t.value},groupCoverageCheckboxes:p(t.value,!1)};case"SET_COVERAGE_CHECKBOXES":{const a=t.forVolumeSet?"volumeSetCoverageCheckboxes":"groupCoverageCheckboxes";return{...e,[a]:t.value}}case"UPDATE_ALL_COVERAGE_CHECKBOXES":{const a=t.forVolumeSet?"volumeSetCoverageCheckboxes":"groupCoverageCheckboxes",i=t.forVolumeSet?e.initialGroup.coverages:e.group.coverages;return{...e,[a]:p(i,t.value)}}case"SET_EDITED":return{...e,edited:t.value};case"SET_GROUP_TO_CHILD":{var a,i,r;const n=null===e||void 0===e||null===(a=e.initialGroup)||void 0===a||null===(i=a.childGroups)||void 0===i?void 0:i[t.value],o=g(n);return n?{...e,itemNumber:t.value+1,itemCount:e.initialGroup.childGroups.length,group:{id:n.id,...o},groupCoverageCheckboxes:p((null===n||void 0===n?void 0:n.imageViewerCoverages)||[],!1),currentCoverages:o.coverages}:{...e,itemNumber:t.value+1,groupCoverageCheckboxes:p((null===e||void 0===e||null===(r=e.group)||void 0===r?void 0:r.coverages)||[],!1)}}case"SET_INTERNAL_FIELDS":return{...e,group:{...e.group,internalFields:t.value}};case"SET_METADATA":return{...e,group:{...e.group,metadata:t.value}};case"UPDATE_GROUP_DATA":{const a=t.value.group,i=g(a);return{...e,group:{...e.initialData,...i,id:a.id},initialGroup:{...e.initialData,...i,id:a.id},updating:!0}}case"UPDATE_INITIAL_COVERAGES":return{...e,initialGroupCoverages:[...e.initialGroup.coverages]};case"SET_WORKFLOW_STATUS":return{...e,group:{...e.group,workflowActions:t.value}};default:throw new Error(`Unhandled type in groupDataReducer: ${t.type}`)}}function u(e){let{children:t,initialData:a,loading:r}=e;const[u,p]=(0,i.useState)(0),{query:m}=(0,n.A)(),g=(0,o.A)(m),v=null===g||void 0===g?void 0:g.view,y=null===g||void 0===g?void 0:g.mode,f=null===g||void 0===g?void 0:g.groupId,[b,A]=(0,i.useReducer)(c,h(a,u)),w=(0,i.useRef)(!1),T=(0,i.useMemo)((()=>{if(f&&null!==a&&void 0!==a&&a.group){var e,t,i;const r=null===a||void 0===a||null===(e=a.group)||void 0===e||null===(t=e.childGroups)||void 0===t||null===(i=t.filter(Boolean))||void 0===i?void 0:i.findIndex((e=>e.id===f));return r<0?0:r}return null}),[f,a]);(0,i.useEffect)((()=>{"number"===typeof T&&T>-1&&!w.current&&(p(T),w.current=!0)}),[f,a,T]),(0,i.useEffect)((()=>{(w.current&&"number"===typeof T&&T>-1||"index"===v)&&A({type:"HANDLE_NEW_SERVER_DATA",value:{data:a,initialChildIndex:T}})}),[a,T,v]);const I=(0,i.useCallback)((e=>{var t,i;p(e);Boolean(null===a||void 0===a||null===(t=a.group)||void 0===t||null===(i=t.childGroups)||void 0===i?void 0:i.length)&&(g.volumeSetSearch||e!==b.group.id&&"organize"===v&&"DIVIDE"===y)&&A({type:"SET_GROUP_TO_CHILD",value:e})}),[a,y,g.volumeSetSearch,b.group.id,v]);return(0,s.Y)(d.Provider,{value:A},(0,s.Y)(l.Provider,{value:{initialChildId:f,groupIndex:u,setGroupIndex:I,loading:r,...b}},t))}function h(e){var t,a,i,r,n,o,s;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const d=Boolean(null===e||void 0===e||null===(t=e.group)||void 0===t||null===(a=t.childGroups)||void 0===a?void 0:a.length),c=d?e.group.childGroups[l]:null===e||void 0===e?void 0:e.group,u=null===c||void 0===c?void 0:c.imageViewerCoverages,h=e?g(e.group):{};let v=d?e.group.childGroups.length:null===c||void 0===c?void 0:c.siblingCount;v||(v=1);let y=d?l+1:null===c||void 0===c?void 0:c.childNumber;y||(y=1);let f={...c};return null!==c&&void 0!==c&&null!==(i=c.metadata)&&void 0!==i&&i.volumes?f={...c,volumes:c.metadata.volumes}:null!==h&&void 0!==h&&null!==(r=h.metadata)&&void 0!==r&&r.volumes&&!f.volumes?f.volumes=h.metadata.volumes:null!==h&&void 0!==h&&null!==(n=h.metadata)&&void 0!==n&&n.volumes||f.volumes||(f.volumes=[]),{allRecordTypes:null===e||void 0===e?void 0:e.recordTypes,auditFeedback:m(null===e||void 0===e||null===(o=e.group)||void 0===o?void 0:o.properties),coverageErrors:{},group:c?g(f):{},groupCoverageCheckboxes:p(u,!1),currentCoverages:(null===u||void 0===u?void 0:u.length)>0?u:[],initialGroup:h,initialGroupWorkflowActions:Array.isArray(h.currentWorkflowActions)?[...h.currentWorkflowActions]:[],initialGroupCoverages:Array.isArray(h.coverages)?[...h.coverages]:[],itemCount:v,itemNumber:y,updating:!1,imageAttribution:null===e||void 0===e?void 0:e.imageAttribution,volumeSetCoverageCheckboxes:p(null!==(s=h.types)&&void 0!==s&&s.includes("VOLUME_SET")?h.coverages:[],!1)}}function p(e,t){const a=[];return e&&e.forEach((e=>{let{recordTypes:i}=e;const r=i.map((e=>{const a={recordTypeChecked:t,datesChecked:[]};return e.date.forEach((()=>{a.datesChecked.push(t)})),a}));a.push(r)})),a}function m(e){var t;if(!e)return[];const a=null===(t=e.find((e=>"auditFeedback"===(null===e||void 0===e?void 0:e.name))))||void 0===t?void 0:t.values;if(!a)return[];return a.filter((e=>e.includes(":ADDITIONAL_FEEDBACK:"))).map((e=>{const t=new RegExp(`^(${["DATES","RECORD_TYPES","PLACES"].join("|")}):`),i=e.match(t),r=e.match(/:ADDITIONAL_FEEDBACK:(\d+):/);if(!i||!r)return null;const n=r[1],o=a.find((e=>e.includes(`ISSUE:${n}:`))).match(/:METADATA_ISSUE:\d+:(.*)/),s=e.match(/:ADDITIONAL_FEEDBACK:\d+:(.*)/);return{metadataType:i[1],feedbackMessage:s?s[1]:"",issueType:o[1],id:n}})).filter(Boolean)}function g(e){var t,a,i;const n=null===e||void 0===e?void 0:e.imageViewerCoverages;let o={...e};if(null!==e&&void 0!==e&&null!==(t=e.metadata)&&void 0!==t&&t.volumes&&(o={...e,volumes:e.metadata.volumes}),null!==e&&void 0!==e&&null!==(a=e.metadata)&&void 0!==a&&a.creator){const e=function(e){const t={};e&&e.forEach((e=>{const a=(0,r.A)();t[a]=e}));return t}(o.metadata.creator);o={...o,metadata:{...o.metadata,creator:e}}}const s=[...Array.isArray(n)?n:[]];return{...e,coverages:s,metadata:o.metadata?{...o.metadata,volumes:o.volumes?o.volumes:[]}:null,internalFields:{internalData:null===e||void 0===e?void 0:e.internalData,apid:null===e||void 0===e||null===(i=e.imageApids)||void 0===i?void 0:i[0],properties:null===e||void 0===e?void 0:e.properties}}}function v(e,t){var a;let i={...e};return Boolean(null===(a=e.childGroups)||void 0===a?void 0:a.length)&&(i={...e.childGroups.find((e=>e.id===t.value))}),i}},52875:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>u,kT:()=>c,XQ:()=>l});var i=a(74914);const r={focusedIndex:-1};function n(e,t){if(!e)throw new Error("state is required");if(!t)throw new Error("action is required");if("SET_FOCUSED_INDEX"===t.type)return{...e,focusedIndex:t.value};throw new Error(`Unhandled action type to ImageBrowsersReducer: ${t.type} in action: `,t)}var o=a(34435);const s=i.createContext(null),l=()=>{const e=i.useContext(s);if(!e)throw new Error("useSharedBrowserState must be used within a SharedBrowserStateProvider");return e},d=i.createContext(null),c=()=>{const e=i.useContext(d);if(!e)throw new Error("useSharedBrowserDispatch must be used within a SharedBrowserStateProvider");return e};function u(e){let{children:t}=e;const[a,l]=i.useReducer(n,r);return(0,o.Y)(s.Provider,{value:a},(0,o.Y)(d.Provider,{value:l},t))}},57475:(e,t,a)=>{"use strict";a.d(t,{A:()=>s,C:()=>o});var i=a(74914),r=a(58429),n=a(34435);const o=i.createContext({});function s(e){let{errorStatusCode:t,isGroupError:a,children:s}=e;const[l,d]=(0,i.useState)(),c=(0,i.useCallback)((e=>{if(!Object.values(r.r).includes(e))throw new Error(`Invalid error status ${e} provided.`);d(e)}),[]);return(0,i.useEffect)((()=>{d(t?(0,r.A)(t):null)}),[t]),(0,n.Y)(o.Provider,{value:{errorStatus:l,setErrorStatus:c,isGroupError:a}},s)}},58429:(e,t,a)=>{"use strict";a.d(t,{A:()=>r,r:()=>i});const i={AVAILABLE:"AVAILABLE",UNAUTHORIZED:"UNAUTHORIZED",NOT_FOUND:"NOT_FOUND",UNAVAILABLE:"UNAVAILABLE"};function r(e){return e<300?i.AVAILABLE:401===e||403===e?i.UNAUTHORIZED:404===e?i.NOT_FOUND:i.UNAVAILABLE}},59881:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var i=a(74914),r=a(49388);function n(){return(0,i.useContext)(r.YJ)}},61321:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var i=a(77595);const r={workflowActions:()=>i.J1`
    query GetGroupWorkflowActions($groupIdOrArkId: String!) {
      group(groupIdOrArkId: $groupIdOrArkId) {
        currentWorkflowActions {
          name
          status
          parameters {
            name
            value
          }
          properties {
            name
            value
          }
        }
      }
    }
  `,recordMetadataReviewStatus:()=>i.J1`
    query($rmsId: ID!) {
      recordMetadataReviewStatus(rmsId: $rmsId) {
        status
      }
    }
  `}},61821:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>h,Tw:()=>c,Xx:()=>l,YU:()=>m,b3:()=>u,du:()=>d,uO:()=>g,zM:()=>s,zQ:()=>p});var i=a(59903),r=a(92384);const n=i.pc||"https://integration.familysearch.org",o={"https://beta.familysearch.org":"https://sg31b0.familysearch.org","https://integration.familysearch.org":"https://sg32i0.familysearch.org","https://www.familysearch.org":"https://sg30p0.familysearch.org","https://familysearch.org":"https://sg30p0.familysearch.org"};o[""]="";const s=`${o[n]}`,l=`${o[n]}/service/records/volunteer/orchestration`,d=(o[n],`${o[n]}/service/records/rms`),c="cis.wkca.MMMM-M932",u={accept:"application/json",Authorization:`Bearer ${(0,r.u0)()}`,"FS-User-Agent-Chain":"RIP-shared-image-viewer"},h={"User-Agent":"fs-internal-RIP"},p="RII",m="FULL_NAME_WEB",g="FAMILY_REVIEW"},64465:(e,t,a)=>{"use strict";a.d(t,{P:()=>d,z:()=>l});var i=a(74914),r=a(71499),n=a(59903),o=a(25155),s=a(34435);const l=(0,i.createContext)({}),d=e=>{let{children:t}=e;const[a,d]=(0,i.useState)(null),[c,u]=(0,i.useState)(!1),[h,p]=(0,i.useState)(!1),[m,g]=(0,i.useState)(!1),{signedIn:v,userLoading:y}=(0,r.useUser)();(0,i.useEffect)((()=>{y||(v&&!h?(async()=>{try{const e=await o.Ay.get("/service/volunteer/edge/profile/users/facility");d((null===e||void 0===e?void 0:e.data)||{}),u(200===(null===e||void 0===e?void 0:e.status))}catch(e){console.error(e)}finally{p(!0),g(!0)}})():(g(!0),p(!0)))}),[v,y,h]);const f="string"===typeof n.M9&&n.M9.length>0;return(0,s.Y)(l.Provider,{value:{accessFromPrison:f,facility:a,isInmate:c,isReady:m}},t)}},64591:(e,t,a)=>{"use strict";a.d(t,{v5:()=>y,Ay:()=>v,vl:()=>b,Z0:()=>A,mS:()=>f});var i=a(74914),r=a(77627),n=a(31547),o=a.n(n),s=a(86347),l=a(9705);const d=(0,s.Ay)("rip:R2:reducer"),c={addedSexId:null,changes:[],highlights:[],editHighlights:[],recordHighlights:[],recordEditHighlights:[],editDispatches:[],referenceHighlights:[],referenceEditHighlights:[],referenceRecordHighlights:[],referenceRecordEditHighlights:[],selectedPersonId:"",selectedRecordId:"",createdPersonId:"",createdPersonNoRecord:!1,highlightedPersonId:"",highlightedRecordId:"",editingSharedFieldId:"",activeFieldId:"",activeElementId:"",imagePermission:"",shouldLoadIndexedData:!1,highlightsFieldInfo:{},creatingRect:!1,updateZoom:null,splitScreenImageGrid:!0,loading:!0,customPropChanges:!1,previousIndex:0,referenceFocusedIndex:0,splitScreen:!1,resetState:!1,dontResetState:!1,tabIndex:0,moveGroupSelectorToTop:!1,showItemBreadcrumbs:!0,historyFormat:localStorage.getItem("rip_preferences_format")||"group",selectedHighlights:{main:[],splitScreen:[]}};function u(e,t){switch(d("reducer called: ",e,t.type,t),t.type){case"BATCH_DISPATCHES":return t.value.reduce(u,e);case"SET_STATE":return{...e,...t.value};case"SET_USER_ID":return{...e,userId:t.value};case"SET_TAB_INDEX":return{...e,tabIndex:t.value};case"SET_IMAGE_PERMISSION":return{...e,imagePermission:t.value};case"SET_LOAD_INDEXED_DATA":return{...e,shouldLoadIndexedData:t.value};case"NAVIGATE_IMAGE_RESET":return{...e,loading:c.loading,mode:c.mode,selectedPersonId:c.selectedPersonId,activeFieldId:c.activeFieldId,creatingRect:c.creatingRect,highlights:c.highlights,editHighlights:c.editHighlights,resetState:!0};case"LOADING":return{...e,loading:t.value};case"SET_SPLIT_SCREEN_IMAGE_GRID":return{...e,splitScreenImageGrid:t.value};case"SET_CREATING_RECT":return{...e,creatingRect:t.value};case"SET_REFERENCE_FOCUSED_INDEX":return{...e,referenceFocusedIndex:t.value};case"SET_SPLIT_SCREEN":return{...e,splitScreen:t.value};case"SET_SELECTED_PERSON_ID":return{...e,selectedPersonId:t.value};case"SET_CREATED_PERSON_ID":return{...e,createdPersonId:t.value};case"SET_CREATED_PERSON_NO_RECORD":return{...e,createdPersonNoRecord:t.value};case"SET_HIGHLIGHTED_PERSON_ID":return{...e,highlightedPersonId:t.value};case"ADD_CUSTOM_PROPERTY":{const{elementType:a,id:i,propertyKey:r,propertyValue:n,override:o=!1}=t.value,s=e[a],d=s.findIndex((e=>e.id===i)),c=s[d];if(d<0)return e;const u=c[`customProperty${r}`];let h;return h=u&&"object"===typeof u&&"object"===typeof n&&!o?(0,l.hM)(s,d,{...c,[`customProperty${r}`]:Object.assign(u,n)}):u&&Array.isArray(u)&&Array.isArray(n)&&!o?(0,l.hM)(s,d,{...c,[`customProperty${r}`]:u.concat(n)}):(0,l.hM)(s,d,{...c,[`customProperty${r}`]:n}),{...e,[a]:h,customPropChanges:!0}}case"CLEAR_CUSTOM_PROPS":{var a;const t=t=>[...e[t].map((e=>(Object.keys(e).forEach((t=>{t.startsWith("customProperty")&&delete e[t]})),e)))];return e.customPropChanges&&null!==(a=e.fields)&&void 0!==a&&a.length?{...e,customPropChanges:!1,records:t("records"),fields:t("fields"),relationships:t("relationships"),highlights:t("highlights"),persons:t("persons"),events:t("events")}:e}case"SET_ACTIVE_FIELD_ID":return{...e,activeFieldId:t.value};case"SET_ACTIVE_ELEMENT_ID":return{...e,activeElementId:t.value};case"SET_EDITING_SHARED_FIELD_ID":return{...e,editingSharedFieldId:t.value};case"SET_HIGHLIGHTS_FIELD_INFO":return{...e,highlightsFieldInfo:t.value};case"SET_HIGHLIGHTS":return{...e,highlights:o()(t.value)};case"SET_REFERENCE_HIGHLIGHTS":return{...e,referenceHighlights:o()(t.value)};case"SET_REFERENCE_EDIT_HIGHLIGHTS":return{...e,referenceEditHighlights:o()(t.value)};case"SET_PREVIOUS_FOCUSED_INDEX":return{...e,previousIndex:t.value};case"SET_EDIT_HIGHLIGHTS":return{...e,editHighlights:o()(t.value)};case"SET_EDIT_DISPATCHES":return{...e,editDispatches:t.value};case"REVERT_HIGHLIGHTS":return{...e,editHighlights:o()(e.highlights),referenceEditHighlights:o()(e.referenceHighlights)};case"NAV_SELECT_TO_VIEW":{const{personId:a,recordId:i}=t.value;return{...e,selectedPersonId:a,selectedRecordId:i,mode:"viewIndex"}}case"NAV_VIEW_TO_EDIT":{const{personId:a,activeFieldId:i}=t.value;return{...e,selectedPersonId:a,activeFieldId:i,changes:[],mode:"editIndex"}}case"DISABLE_AUTOSCROLL":return{...e,autoscroll:!1};case"ENABLE_AUTOSCROLL":return{...e,autoscroll:!0};case"NAV_VIEW_TO_SELECT":return{...e,mode:"selectPerson",updateZoom:{panX:.5,panY:.5,zoom:1}};case"NAV_EDIT_TO_VIEW":{const{personId:e,savedState:a}=t.value;return{...a,mode:"viewIndex",selectedPersonId:e,changes:[]}}case"NAV_EDIT_TO_EDIT":{const{personId:a}=t.value;return{...e,selectedPersonId:a,changes:[]}}case"NAV_ADD_TO_VIEW":{const{personId:a}=t.value;return{...e,selectedPersonId:a,mode:"viewIndex"}}case"NAV_SELECT_TO_EDIT":{const{personId:a}=t.value;return{...e,mode:"editIndex",selectedPersonId:a}}case"SET_SHOW_ITEM_BREADCRUMBS":return{...e,showItemBreadcrumbs:t.value};case"SET_MOVE_GROUP_SELECTOR_TO_TOP":return{...e,moveGroupSelectorToTop:t.value};case"SET_HISTORY_FORMAT":return localStorage.setItem("rip_preferences_format",t.value),{...e,historyFormat:t.value};case"SET_SELECTED_HIGHLIGHTS":return{...e,selectedHighlights:t.value};case"OPEN_SPLIT_SCREEN_TO_PAGE":return{...e,splitScreen:!0,referenceFocusedIndex:t.value-1,splitScreenImageGrid:!1};default:throw new Error(`Unhandled type in R2 reducer: ${t.type}`)}}var h=a(34435);const p=(0,i.createContext)({}),m=(0,i.createContext)({}),g=(0,i.createContext)({});function v(e){let{children:t,initialState:a}=e;const[r,n]=(0,i.useReducer)(u,a||c);return(0,h.Y)(p.Provider,{value:r},(0,h.Y)(m.Provider,{value:n},t))}const y=e=>{let{children:t}=e;const[a,i]=(0,r.A)(),[n,o]=(0,r.A)(),[s,l]=(0,r.A)(),[d,c]=(0,r.A)();return(0,h.Y)(g.Provider,{value:{displayHighlights:a,displayHighlightsApi:i,splitScreenDisplayHighlights:n,splitScreenDisplayHighlightsApi:o,recordDisplayHighlights:s,recordDisplayHighlightsApi:l,splitScreenRecordDisplayHighlights:d,splitScreenRecordDisplayHighlightsApi:c}},t)},f=()=>{const e=(0,i.useContext)(p);if(void 0===e)throw new Error("useR2StateContext must be used within a R2ContextProvider. If writing a test, use <StateProvider> from testUtils.js");return e},b=()=>{const e=(0,i.useContext)(m);if(void 0===e)throw new Error("useR2DispatchContext must be used within a R2ContextProvider. If writing a test, use <StateProvider> from testUtils.js");return e},A=()=>{const e=(0,i.useContext)(g);if(void 0===e)throw new Error("useR2Highlights must be used within a R2HighlightsProvider. If writing a test, use <StateProvider> from testUtils.js");return e}},69227:(e,t,a)=>{"use strict";a.d(t,{A:()=>o,G:()=>n});var i=a(74914),r=a(34435);const n=(0,i.createContext)();function o(e){let{children:t}=e;const[a,o]=(0,i.useState)("single");return(0,r.Y)(n.Provider,{value:{viewMode:a,setViewMode:o}},t)}},69279:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var i=a(74914),r=a(64465);function n(){return(0,i.useContext)(r.z)}},72416:(e,t,a)=>{"use strict";a.d(t,{D9:()=>u,bZ:()=>l,eP:()=>d,gd:()=>s,pH:()=>c});var i=a(53738),r=a(91079),n=a(51689);const o=.01;function s(e,t){const a=null===e||void 0===e?void 0:e.findIndex((e=>t.id===e.id)),i=[...e];return a>-1?i[a]=t:i.push(t),[...i]}function l(e,t){let a=[...e];return t.forEach((e=>{a=s(a,e)})),[...a]}const d=(e,t)=>{try{if(t.clear(),!e||0===e.length)return;const a=e.map((e=>[e.id,e]));t.addMany(a)}catch(a){console.error("ERROR: setDisplayHighlights",a)}},c=function(e,t,a,s,l,d,c){var u;let h=arguments.length>7&&void 0!==arguments[7]&&arguments[7],p={position:{...e}};const m=(null===t||void 0===t?void 0:t.find((e=>e.partitionKey===a)))||[];(0,i.sx)({event_name:"click_action",link_name:"Highlight: Create"});const g=h?c:(0,r.rr)([m],s.activeFieldId);p=function(e){const t=e.position.width<o?o:e.position.width,a=e.position.height<o?o:e.position.height;return{...e,position:{...e.position,width:t,height:a}}}(p),p.imageId=a,p.fieldId=(null===g||void 0===g?void 0:g.id)||s.activeFieldId,p.personIds=[s.selectedPersonId],p.fieldType=null!==g&&void 0!==g&&g.fieldType?g.fieldType:null===(u=s.highlightsFieldInfo)||void 0===u?void 0:u.fieldType,p.elementType=null===g||void 0===g?void 0:g.elementType,p.recordId=null===g||void 0===g?void 0:g.recordId,p.id=`highlight-0-${(0,r.Vs)()}`,p.change="add",p.attached=!0,p.originalHighlight={...(0,n.eS)(p),...p},delete p.originalHighlight.position,l.add(p.id,p),d({type:"SET_CREATING_RECT",value:!1})},u=(e,t,a,i)=>{let n=null;const o=e.map((e=>{if(e.change&&e.fieldId===t&&e.originalHighlight.fieldId&&e.fieldId!==e.originalHighlight.fieldId){const t=(0,r.rr)(i,e.originalHighlight.fieldId);if((0,r.OV)(t)===a){n=t;const a={...e,fieldId:n.id};return delete a.change,a}}return e}));return{sharedField:n,updatedHighlights:o}}},75100:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var i=a(74914),r=a(49388);function n(){return(0,i.useContext)(r.Vr)}},75619:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var i=a(77595);const r={getArtifactParent:()=>i.J1`
    query GetRmsId($ark: ID!) {
      getArtifactParent(ark: $ark)
    }
  `,getArtifactParentWithInactive:()=>i.J1`
    query GetRmsId($ark: ID!) {
      getArtifactParentWithInactive(ark: $ark)
    }
  `,getSimpleGroupDetails:()=>i.J1`
    fragment ImageViewerCoverageFields on ImageViewerCoverage {
      place {
        fullName
        id
        name
        published
      }
      recordTypes {
        apolloId
        date {
          fromTimestamp
          toTimestamp
          gedcomX
        }
        id
        name
      }
    }
    query SimpleGroupDetails($groupIdOrArkId: String!) {
      group(groupIdOrArkId: $groupIdOrArkId) {
        ancestralHall
        childCount
        childGroups(changeHistoryForFirstChildOnly: true) {
          childCount
          id
          imageViewerCoverages {
            ...ImageViewerCoverageFields
          }
          imageApids
          indexedChildCount
          internalData {
            cameraOperator
            cameraOperatorNumber
            id
            originalMediaNumber
            phoenixAcquisitionIds
          }
          metadata {
            archivalReferenceNumber
            createdDate {
              fromTimestamp
              gedcomX
            }
            creator
            custodian
            imageGroupNumber
            languages
            place
            title
            volume
            volumes
          }
          naturalGroupId
        }
        currentWorkflowActions {
          name
          status
          parameters {
            name
            value
          }
        }
        firstAncestor
        id
        languages
        imageApids
        imageGroupNumber
        imageRework {
          cameraOperator {
            id
            name
          }
          status {
            status
            type
          }
          history {
            action
            date {
              fromTimestamp
            }
            state
            username
            notes
          }
        }
        imageReprocessing {
          action
          date {
            fromTimestamp
          }
        }
        imageViewerCoverages {
          ...ImageViewerCoverageFields
        }
        indexedChildCount
        internalData {
          cameraOperator
          cameraOperatorNumber
          originalMediaNumber
          phoenixAcquisitionIds
        }
        metadata {
          archivalReferenceNumber
          creator
          custodian
          imageGroupNumber
          languages
          place
          title
          volume
          volumes
        }
        migrantAncestor
        naturalGroupId
        parentGroupId
        properties {
          name
          values
          type
        }
        siblingIdsWithChildren {
          parentId
          childIds
        }
        title
        types
        volumes
        volumeSetTitle
        volumeSetTotalVolumes
      }
    }
  `,imageOrganizeStatus:()=>i.J1`
    query ImageOrganizeStatus($rmsId: ID!) {
      imageOrganizeStatus(rmsId: $rmsId) {
        id
        divide {
          status
          userId
        }
        correctMetadata {
          status
          userId
        }
      }
    }
  `,imageOrganizeStatusList:()=>i.J1`
    query ImageOrganizeStatusList($rmsIdList: [ID]!) {
      imageOrganizeStatusList(rmsIdList: $rmsIdList) {
        id
        divide {
          name
          status
          userId
          date {
            fromTimestamp
            toTimestamp
          }
        }
        correctMetadata {
          name
          status
          userId
          date {
            fromTimestamp
            toTimestamp
          }
        }
      }
    }
  `,naturalGroupAsyncStatus:()=>i.J1`
    query naturalGroupAsyncStatus($location: String!) {
      naturalGroupAsyncStatus(location: $location) {
        percentComplete
      }
    }
  `,naturalGroupParentId:()=>i.J1`
    query GetParentGroupId($childGroupIdOrArkId: String!) {
      naturalGroupParentId(childGroupIdOrArkId: $childGroupIdOrArkId)
    }
  `,parentGroups:i.J1`
    query ParentGroups($parentGroupType: GroupType, $rmsId: ID!) {
      groupParents(parentGroupType: $parentGroupType, rmsId: $rmsId) {
        id
        imageApids(limit: 1)
      }
    }
  `,reprocessData:()=>i.J1`
    query GetGroup($groupIdOrArkId: String!) {
      group(groupIdOrArkId: $groupIdOrArkId) {
        imageReprocessing {
          action
          date {
            fromTimestamp
          }
        }
      }
    }
  `,reprocessRequest:()=>i.J1`
    query ReprocessRequest($imageGroupNumber: [String!]!, $crop: Boolean!, $deskew: Boolean!, $sharpen: Boolean!) {
      reprocess(imageGroupNumber: $imageGroupNumber, crop: $crop, deskew: $deskew, sharpen: $sharpen) {
        status
      }
    }
  `,reworkData:()=>i.J1`
    query ReworkData($actionName: String!, $notes: String, $groupId: String!) {
      rework(actionName: $actionName, notes: $notes, groupId: $groupId) {
        status
      }
    }
  `,standardsLanguages:()=>i.J1`
    query Languages {
      standardsLanguages {
        id
        code
        language
      }
    }
  `,getGroupChangeHistory:()=>i.J1`
    query GetGroupChangeHistory($groupId: String!) {
      getGroupHistory(groupIdOrArk: $groupId) {
        user {
          contactName
        }
        type
        opCode
        date {
          gedcomX
          fromTimestamp
        }
        coverages {
          place {
            fullName
            name
            id
          }
          recordTypes {
            apolloId
            id
            name
            date {
              fromTimestamp
              toTimestamp
              gedcomX
            }
          }
        }
        metadata {
          archivalReferenceNumber
          languages
          title
          volumes
          creator
        }
      }
    }
  `}},79810:(e,t,a)=>{"use strict";var i=a(74914),r=a(92291),n=(a(54139),a(12680)),o=a(48451),s=a(46100),l=a(85652),d=a(44006),c=a(37537),u=a(87059),h=a(59903),p=a(58955),m=a(92384),g=a(30236),v=a(3455),y=a(86347);(0,y.Ay)("rip:serviceWorker"),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var f=a(64465),b=a(87046),A=a(91079);const w="5000196",T="4496121",I={ADD_REMOVE_FIELDS:"ADD_REMOVE_FIELDS",ADD_REMOVE_PERSON:"ADD_REMOVE_PERSON",AGE:"AGE",EVENTS:"EVENTS",HIGHLIGHTS:"HIGHLIGHTS",NAME:"NAME",OTHER:"OTHER",RACE:"RACE",RELATIONSHIPS:"RELATIONSHIPS",SEX:"SEX"},S=Object.values(I),E={[w]:{flag:"rip_sharedImageViewer_1931CensusEdit",alertMessageKey:"index.1931.Census.alert.banner-message",alertMessageValue:"In order to keep records searchable on FamilySearch, only some fields are available to edit in the 1931 Canada Census.",restrictedFields:[I.EVENTS,I.RELATIONSHIPS,I.HIGHLIGHTS]},[T]:{flag:"rip_sharedImageViewer_OttomanCensusEdit",restrictedFields:S}};var k=a(34435);const C=(0,i.createContext)({});function x(e){var t;let{children:a}=e;const r=(0,b.A)(),n=(0,i.useMemo)((()=>{var e;return null===r||void 0===r||null===(e=r.images)||void 0===e?void 0:e.find((e=>e.partitionKey===r.currentImageArk))}),[r]),o=(0,i.useMemo)((()=>n&&(0,A.EG)(n)),[n]),s=(null!==n&&void 0!==n&&n.deprecatedImage?S:null)||(null===(t=E[o])||void 0===t?void 0:t.restrictedFields)||[];return(0,k.Y)(C.Provider,{value:{collectionId:o,restrictedFields:s}},a)}const Y=()=>(0,i.useContext)(C);var N=a(33082),R=a(7414),P=a(26774),O=a(32156),_=a(28740),F=a(56078),D=a(87029),M=a(45657),H=a(58038),L=a(74741),z=a(74196),V=a(97394),B=a(94217),G=a(97454),U=a(24520),K=a(61030),q=a(3131),j=a(58168),$=a(49128),W=a(40830),X=a(36286),Q=a(91378),J=a(30233),Z=a(55189),ee=a(8814),te=a(18428),ae=a(47591),ie=a(4920),re=a(55907),ne=a(47600),oe=a(93441),se=a(38327),le=a(50387),de=a(74775),ce=a(58934),ue=a(71819),he=a(53445),pe=a(76070),me=a(52895),ge=a(39503),ve=a(53389),ye=a(83376),fe=a(65569),be=a.n(fe),Ae=a(32833),we=a(7346),Te=a(65560),Ie=a(44529),Se=a(85506),Ee=a(67540),ke=a(44289);function Ce(e){var t,a,r;let{images:n,currentImageArk:o,thumbnails:s}=e;const l=null===n||void 0===n?void 0:n.find((e=>e.partitionKey===o)),d=(0,L.u)("rip_sharedImageViewer_showJiapu"),c=(0,y.Ay)("rip:R2:SelectPerson"),u=(null===n||void 0===n?void 0:n.length)>0&&(null===n||void 0===n?void 0:n.every((e=>e.updated))),h=(0,i.useMemo)((()=>{if(u&&(null===n||void 0===n?void 0:n.length)>1&&o&&s){const e=(0,A.Oe)(n,o,s);return e&&e.forEach((e=>{null!==e&&void 0!==e&&e.subElements&&e.subElements.forEach((e=>{(0,Ee.qz)(e)}))})),e}return[]}),[n,o,s,u]),p=(0,i.useMemo)((()=>u&&(null===n||void 0===n?void 0:n.length)>1&&o&&s?(0,A.w1)(n,o,s):[]),[u,n,o,s]),m=(null===l||void 0===l?void 0:l.subElements)||[],g=(0,i.useMemo)((()=>{if(0===h.length){return(0,A.F5)(l).map((e=>({id:e.id,subElements:e.persons,elementType:"RECORD"})))}return[]}),[l,h]),v=(null===l||void 0===l||null===(t=l.floatingElements)||void 0===t?void 0:t.filter((e=>{var t;return"PERSON"===(null===e||void 0===e?void 0:e.elementType)&&(!e.superElements||(null===(t=e.superElements)||void 0===t?void 0:t.every((e=>e.id.startsWith("2:4:2")))))})))||[],f=[...g,...h,...m.filter((e=>null===e||void 0===e?void 0:e.subElements)),...p],b=0===(null===f||void 0===f?void 0:f.length)&&0===(null===v||void 0===v?void 0:v.length),w=(0,i.useMemo)((()=>l?(0,A.j8)(l):null),[l]),T=!d.isOn&&Boolean((null===l||void 0===l||null===(a=l.subElements)||void 0===a?void 0:a.find((e=>null===e||void 0===e?void 0:e.id.startsWith("2:4:"))))||(null===l||void 0===l||null===(r=l.floatingElements)||void 0===r?void 0:r.find((e=>null===e||void 0===e?void 0:e.id.startsWith("2:4:")))));return c({floatingElements:null===l||void 0===l?void 0:l.floatingElements,jiapuFlag:d,currentImage:l,floatingPersons:v,allRecords:f,noPeople:b,imageHasData:w,isJiapu:T,currentDanglingRecords:g}),{floatingPersons:v,allRecords:f,noPeople:b,imageHasData:w,isJiapu:T}}var xe=a(4629),Ye=a(38051),Ne=a(67069),Re=a(65232),Pe=a(73968),Oe=a(73092),_e=a(13666),Fe=a(19512),De=a(23830),Me=a(11515);function He(e){var t,a;let i,{action:r,slsTypes:n}=e;switch(r.opCode){case Me.P6.ADD_FV:return null!==(t=r.fieldValueArg)&&void 0!==t&&t.normalizedValues&&(i=r.fieldValueArg.normalizedValues[0].text),null!==(a=r.fieldValueArg)&&void 0!==a&&a.origValue&&(i=r.fieldValueArg.origValue.text),i;case Me.P6.CREATE_ELEMENT:return"RELATIONSHIP"===r.elementType?i=(0,Me.Dj)(r.elementArg.relType,n):"FIELD"===r.elementType?i=(0,ke.GI)(r):"NAME"===r.elementType?i=(0,Me.xk)(r.elementArg.nameType,n):"EVENT"===r.elementType?i=(0,Me.iR)(r.elementArg.eventType,n):"PERSON"===r.elementType&&(i=r.elementArg.primary?o.i18n.t("changes.person.primary","PRIMARY"):o.i18n.t("changes.person.secondary","SECONDARY")),i||`${(0,Me.AE)(r.elementType,n)}`;default:return r.opCode}}function Le(e){let{actions:t=[],person:a}=e;const i=(0,A.vA)(t),r=null===i||void 0===i?void 0:i.filter((e=>{return t=e,Boolean(t.actionId)&&Boolean(t.displayLabel)&&((e,t)=>{var a;return null===(a=e.personIds)||void 0===a?void 0:a.includes(null===t||void 0===t?void 0:t.id)})(e,a)&&(e=>!["ADD_RECT","REM_RECT"].includes(null===e||void 0===e?void 0:e.opCode))(e)&&(e=>"ADD_SUB"!==e.opCode)(e)&&(e=>{var t,a;return!!("CREATE_ELEMENT"!==(null===e||void 0===e?void 0:e.opCode)||null!==e&&void 0!==e&&null!==(t=e.elementArg)&&void 0!==t&&null!==(a=t.fieldValues)&&void 0!==a&&a.length)})(e);var t}));return r}const ze=(e,t,a)=>{const i=He({action:e,slsTypes:t});return a?(0,k.Y)("span",null,i):(0,k.Y)(_e.A,{heading:`${null===e||void 0===e?void 0:e.displayLabel}:`,data:i})},Ve=e=>{var t;return null!==(t=e)&&void 0!==t&&t.startsWith("fs:")&&(e="cis.wkca.MMMM-M932"),(0,k.Y)(De.A,{contact:{cisId:e}})},Be=(0,k.AH)("color:",W.A.gray70,";"),Ge=e=>{var t,a;let{change:r,noHeadingOnValue:n=!1,...s}=e;const l=(0,b.A)(),d=(0,A.Qp)(null===l||void 0===l?void 0:l.images,null===l||void 0===l?void 0:l.currentImageArk)||{};return(0,k.Y)(Fe.lT,(0,j.A)({},s,{column1:(0,k.Y)("span",{css:Be},(0,Me.xW)(r,null===d||void 0===d?void 0:d.actions,l.types)),column2:ze(r,l.types,n),column3:(0,k.Y)(i.Fragment,null,(c=null===r||void 0===r||null===(t=r.journalAttribution)||void 0===t?void 0:t.timestamp,new Date(c).toLocaleString(o.i18n.language,{year:"numeric",month:"long",day:"numeric"})),(0,k.Y)(ae.A,{size:"xxs"}),Ve(null===r||void 0===r||null===(a=r.journalAttribution)||void 0===a?void 0:a.userId))}));var c};function Ue(e){let{person:t,expanded:a,selectPerson:r,personChanges:n}=e;const o=(0,b.A)(),[s,l]=(0,i.useState)(!1),[d]=(0,P.B)(),c=(0,A.Qp)(null===o||void 0===o?void 0:o.images,null===o||void 0===o?void 0:o.currentImageArk)||{},{setQuery:u}=(0,G.A)(),h=(0,i.useMemo)((()=>Le({actions:null===c||void 0===c?void 0:c.actions,person:t})),[null===c||void 0===c?void 0:c.actions,t]);(0,i.useEffect)((()=>{l(a)}),[a]);const p=(0,i.useCallback)((()=>{r(t),u({personArk:t.id}),n.current=h}),[h,t,r,n,u]);return(0,k.Y)(i.Fragment,null,(0,k.Y)(Ye.A,null,(0,k.Y)(Ne.A,{open:s,setOpen:()=>l(!s)},(0,k.Y)(Re.A,null,(0,k.Y)(re.H5,{supplementary:!0},`${(0,Ee.hA)({person:t})}${t.primary?` ${d("history-viewer.principal-person.label","(Principal)")}`:""}`)),(0,k.Y)(Pe.A,null,(0,k.Y)(Oe.Ay,{totalColumnCount:3,atSizeColumns:{default:{labels:[d("history-viewer.changes-table.change.label","Change"),d("history-viewer.changes-table.value.label","Value"),d("history-viewer.changes-table.date.label","Date")]}}},h.slice(0,3).map((e=>(0,k.Y)(Ge,{key:`${e.actionId}_${e.sequenceNumber}`,change:e})))))),(0,k.Y)(Z.A,{"data-testid":"view-all-changes-button",onClick:p},d("history-viewer.view-all-changes.button","View All Changes"))))}function Ke(e){let{expanded:t,field:a}=e;const r=(0,b.A)(),[n,o]=(0,i.useState)(!1),[s,l]=(0,i.useState)([]),[d]=(0,P.B)(),c=(0,A.Qp)(null===r||void 0===r?void 0:r.images,null===r||void 0===r?void 0:r.currentImageArk)||{};return(0,i.useEffect)((()=>{var e;const t=(null===c||void 0===c||null===(e=c.actions)||void 0===e?void 0:e.filter((e=>"ADD_SUB"!==e.opCode&&e.id===a.id)).sort(((e,t)=>{var a,i;return(null===t||void 0===t||null===(a=t.journalAttribution)||void 0===a?void 0:a.timestamp)-(null===e||void 0===e||null===(i=e.journalAttribution)||void 0===i?void 0:i.timestamp)})))||[];l(t)}),[c.actions,a.id]),(0,i.useEffect)((()=>{o(t)}),[t]),(0,k.Y)(i.Fragment,null,(0,k.Y)(Ye.A,null,(0,k.Y)(Ne.A,{open:n,setOpen:()=>o(!n)},a.label&&(0,k.Y)(Re.A,null,(0,k.Y)(re.H5,{supplementary:!0},`${a.label} History`)),(0,k.Y)(Pe.A,null,(0,k.Y)(Oe.Ay,{totalColumnCount:3,atSizeColumns:{default:{labels:[d("history-viewer.changes-table.change.label","Change"),d("history-viewer.changes-table.value.label","Value"),d("history-viewer.changes-table.date.label","Date")]}}},s.length>0&&s.map((e=>(0,k.Y)(Ge,{key:`${e.commandUuid}_${e.sequenceNumber}`,change:e}))),0===s.length&&(0,k.Y)(Fe.lT,{column1:d("history-viewer.filter.no-results","No changes exist for the selected filter."),column2:"",column3:""}))))))}var qe=a(61821),je=a(64591),$e=a(9705);const We=[{label:"Alternate Name",value:"NAME_ALT"},{label:"Given Name",value:"NAME_GN"},{label:"Surname",value:"NAME_SURN"},{label:"Event",value:"EVENT"},{label:"Nationality",value:"NATIONALITY"},{label:"Marital Status",value:"MARITAL_STATUS"},{label:"Race",value:"RACE_OR_COLOR"},{label:"Note",value:"NOTE_MISC"},{label:"Sex",value:"SEX_CODE"}];function Xe(e,t){var a;return null===e||void 0===e||null===(a=e.relationships)||void 0===a?void 0:a.reduce(((e,a)=>{const i=e=>t(`temp.relationship.${e}`,e);return e.push({value:`${a.relType}_FIRST`,order:"FIRST",relType:a.relType,label:i(a.firstDisplayLabel)}),a.firstDisplayLabel!==a.secondDisplayLabel&&e.push({value:`${a.relType}_SECOND`,order:"SECOND",relType:a.relType,label:i(a.secondDisplayLabel)}),e}),[])}function Qe(e){var t;return(null===e||void 0===e||null===(t=e.fields)||void 0===t?void 0:t.reduce(((e,t)=>{var a,i,r;return(null!==(a=t.elementTypes)&&void 0!==a&&a.includes("DATE")||null!==(i=t.elementTypes)&&void 0!==i&&i.includes("PLACE")||null!==(r=t.elementTypes)&&void 0!==r&&r.includes("EVENT"))&&e.push({value:t.fieldType,label:t.displayLabel,elementTypes:t.elementTypes}),e}),[]))||[]}var Je=a(69923),Ze=a(98512),et=a(88141),tt=a(90827),at=a(57818);function it(e){let{error:t,setError:a,title:r,message:n,label:o,callback:s,useDangerButton:l=!1,onCancel:d=()=>{}}=e;const c=(0,$.Ay)(),{isOpen:u,open:h,transitioning:p}=c,[m]=(0,P.B)(),g=m("error-overlay.heading","Something went wrong on this page"),v=m("error-overlay.content","An error occurred on this page. Please wait a few minutes and try again."),y=o||m("error-overlay.submit","Refresh"),f=()=>{s?(c.close(),s()):window.location.reload()};return(0,i.useEffect)((()=>{u||(p?a(!1):t&&h())}),[t,h,u,p,a]),(0,k.Y)(i.Fragment,null,(0,k.Y)(Ze.A,(0,j.A)({},c,{close:()=>{c.close(),d()},title:r||g}),(0,k.Y)(te.A,{size:"sm"},n||v),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{"data-testid":"cancel-button",onClick:()=>{c.close(),d()}},m("common-ui:cancel.action","Cancel")),l?(0,k.Y)(at.A,{"data-testid":"refresh-button",linkName:"Error overlay dismiss",onClick:f},y):(0,k.Y)(Z.A,{"data-testid":"refresh-button",linkName:"Error overlay dismiss",onClick:f,emphasis:"high"},y)))))}const rt=(e,t)=>new Date(e).toLocaleString(t.language,{year:"numeric",month:"long",day:"numeric"}),nt=e=>{var t;return null!==(t=e)&&void 0!==t&&t.startsWith("fs:")&&(e="cis.wkca.MMMM-M932"),(0,k.Y)(De.A,{contact:{cisId:e}})};function ot(e){let{deletedPersonActions:t,expanded:a}=e;const{t:r,i18n:n}=(0,P.B)(),o=(0,je.mS)(),{rip_sharedImageViewer_sls_actions_splunk_debugger:s,rip_sharedImageViewer_saveChanges:l}=(0,L.h)(["rip_sharedImageViewer_sls_actions_splunk_debugger","rip_sharedImageViewer_saveChanges"]),[d,c]=(0,i.useState)(),[u,h]=(0,i.useState)([]),[p,m]=(0,i.useState)(!0);(0,i.useEffect)((()=>{m(a)}),[a]);const g=(0,i.useCallback)((e=>{l.isOn&&(0,Se.Nn)({actions:e,userId:o.userId,appName:qe.zQ,fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],splunkDebugModeArguments:s.isOn?{theFileFromWhichSaveWasCalled:"DeletedPersons"}:void 0}).then((()=>{window.location.assign(`${window.location.origin}${window.location.pathname}?view=index`)})).catch((t=>{var a,i;c(t),(0,$e.Yt)(t,null,{codeId:73,slsActions:e,status:null===t||void 0===t||null===(a=t.response)||void 0===a?void 0:a.status,responseBody:null===t||void 0===t||null===(i=t.response)||void 0===i?void 0:i.data})}))}),[o.userId,l.isOn,s.isOn]),v=(0,i.useCallback)((()=>{const e=[];u.forEach((a=>{const i=t.find((e=>e.id===a));e.push((0,Je.jg)({id:i.actionId,partitionKey:i.partitionKey}))})),g(e)}),[t,g,u]);return(0,k.Y)(i.Fragment,null,(0,k.Y)(Ye.A,{backgroundColor:W.A.red02},(0,k.Y)(Ne.A,{open:p,setOpen:e=>{m(e)}},(0,k.Y)(Re.A,null,(0,k.Y)(re.H5,{supplementary:!0},r("delete-person.table.deleted-names.header","Deleted Names"))),(0,k.Y)(Pe.A,null,(0,k.Y)(Oe.UY,{totalColumnCount:3,onSelectionChange:h,atSizeColumns:{default:{labels:[r("delete-person.table.name.label","Name"),r("delete-person.table.date.label","Date")]}},backgroundColor:W.A.red02},t.length>0&&t.map((e=>{var t,a;return(0,k.Y)(Fe.lT,{key:e.id,name:e.id,column1:(0,k.Y)("div",{"data-testid":`delete-${e.name}column1-deleter`},e.name),column2:(0,k.Y)(i.Fragment,null,rt(null===e||void 0===e||null===(t=e.journalAttribution)||void 0===t?void 0:t.timestamp,n),(0,k.Y)(ae.A,{size:"xxs"}),nt(null===e||void 0===e||null===(a=e.journalAttribution)||void 0===a?void 0:a.userId))})}))),(0,k.Y)(Z.A,{emphasis:"high","data-testid":"restore-button",onClick:()=>v(),disabled:0===u.length},r("delete-person.table.restore-button","Restore"))))),(0,k.Y)(it,{error:d,setError:c,title:r("save-error-overlay.heading","Unable to Save Changes"),message:r("save-error-overlay.content-generic","Your changes were not saved.  Please try again later.")}))}var st=a(15848),lt=a(48344),dt=a.n(lt);const ct={primary:"ALL_CHANGES"},ut=[{primary:"AGE"},{primary:"EVENT"},{primary:"EVENT",secondary:"BIRTH",tertiary:"PLACE",label:"Birthplace"},{primary:"NAME_GN"},{primary:"MARITAL_STATUS"},{primary:"RACE_OR_COLOR"},{primary:"SEX_CODE"},{primary:"NAME_SURN"}],ht=(0,i.memo)((e=>{let{chips:t,onChange:a,selectedValue:i,title:r,name:n}=e;return(0,k.Y)(st.N6,{gutters:"xxs",orientation:"vertical",columnCount:1},r&&(0,k.Y)(re.H6,null,r),t.length>0&&(0,k.Y)(ue.A,{chips:t.map((e=>({...e,selected:dt()(e.value,i)}))),name:n,onSelectionChange:a}))})),pt=e=>{let{slsTypes:t,filterSheetOverlay:a,onChange:r}=e;const{t:n}=(0,P.B)(),{allChanges:o,personDetails:s,relationships:l}=(0,i.useMemo)((()=>((e,t)=>be()(e)?{allChanges:[],relationships:[],personDetails:[]}:{allChanges:[{label:t("history-viewer.filter.all-changes","All Changes"),value:ct}],relationships:Xe(e,t).map((e=>({label:e.label,value:{primary:e.value}}))),personDetails:ut.map((t=>{var a;return{label:null!==t&&void 0!==t&&t.label?t.label:null===(a=(0,Me.QH)(t.primary,e))||void 0===a?void 0:a.displayLabel,value:t}}))})(t,n)),[t,n]),[d,c]=(0,i.useState)(ct),u=(0,i.useCallback)((e=>{c(e.value),r(e)}),[r]);return(0,k.Y)(ce.A,(0,j.A)({size:"md",title:n("history-viewer.filter.button","Filter")},a),(0,k.Y)(ht,{chips:o,name:"allChanges",selectedValue:d,onChange:u}),(0,k.Y)(ht,{title:n("history-viewer.filter.person-details","Person Details"),chips:s,name:"details",selectedValue:d,onChange:u}),(0,k.Y)(ht,{title:n("history-viewer.filter.relationships","Relationships"),name:"relationsships",chips:l,selectedValue:d,onChange:u}))};var mt=a(50217),gt=a(53064);const vt=a.p+"static/media/List.fca3d0ba51630a7690ea3cda89851e66.svg";const yt=a.p+"static/media/Group.66cdf9ec547179fc4df2ad130ad93e15.svg",ft="group",bt="list",At=(0,i.memo)((e=>{let{currentValue:t,value:a,label:i,onChange:r,imageSrc:n}=e;return(0,k.Y)(J.Ay,{alignY:"middle"},(0,k.Y)(mt.A,{checked:t===a,label:i,name:"format",value:a,onChange:r,growX:!0}),(0,k.Y)("img",{src:n,height:45,alt:`${i} icon`}))})),wt=e=>{let{overlayProps:t}=e;const a=(0,je.vl)(),{historyFormat:r}=(0,je.mS)(),{t:n}=(0,P.B)(),[o,s]=(0,i.useState)(r),l=(0,i.useCallback)((e=>{let{target:{value:t}}=e;s(t),a({type:"SET_HISTORY_FORMAT",value:t})}),[a]);return(0,k.Y)(ce.A,(0,j.A)({size:"md",title:n("history-viewer.preferences.button","Preferences")},t),(0,k.Y)(st.N6,{gutters:"xs",orientation:"vertical",columnCount:1},(0,k.Y)(re.H6,null,n("history-viewer.preferences-panel.options.title","Format")),(0,k.Y)(gt.A,{orientation:"vertical"},(0,k.Y)(At,{currentValue:o,value:bt,label:n("history-viewer.preferences-panel.options.as-list","Display as List"),imageSrc:vt,onChange:l}),(0,k.Y)(At,{currentValue:o,value:ft,label:n("history-viewer.preferences-panel.options.as-group","Display as Group"),imageSrc:yt,onChange:l}))))};var Tt=a(38779),It=a(82437),St=a(31543);const Et=e=>{let{label:t,change:a,expanded:r=!0}=e;const{t:n}=(0,P.B)(),[o,s]=(0,i.useState)(r);return(0,i.useEffect)((()=>{s(r)}),[r]),(0,k.Y)(Tt.A,{title:(0,k.Y)(re.H6,null,n("history-viewer.group.title","{slsType} History",{slsType:t})),open:o,setOpen:()=>s((e=>!e))},(0,k.Y)(It.A,{top:!0},(0,k.Y)(St.A,{marginX:"sm"},(0,k.Y)(Oe.Ay,{totalColumnCount:3,atSizeColumns:{default:{labels:[n("history-viewer.changes-table.change.label","Change"),n("history-viewer.changes-table.value.label","Value"),n("history-viewer.changes-table.date.label","Date")]}}},null!==a&&void 0!==a&&a.items&&a.items.length>0?a.items.map((e=>(0,k.Y)(Ge,{key:`${e.actionId}_${e.sequenceNumber}`,change:e,noHeadingOnValue:!0}))):(0,k.Y)(Fe.lT,{column1:n("history-viewer.filter.no-results","No changes exist for the selected filter."),column1span:3})),(0,k.Y)(ae.A,{size:"sm"}))))},kt={name:"8xpy1z",styles:"margin-top:1.875rem;"},Ct=e=>{let{changes:t,title:a}=e;const{t:r}=(0,P.B)();return(0,k.Y)("div",{css:kt},a&&(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H6,null,a),(0,k.Y)(ae.A,{size:"nano"})),(0,k.Y)(Oe.Ay,{totalColumnCount:3,atSizeColumns:{default:{labels:[r("history-viewer.changes-table.change.label","Change"),r("history-viewer.changes-table.value.label","Value"),r("history-viewer.changes-table.date.label","Date")]}}},t.length>0&&t.map((e=>(0,k.Y)(Ge,{key:`${e.actionId}_${e.sequenceNumber}`,change:e}))),0===t.length&&(0,k.Y)(Fe.lT,{column1:r("history-viewer.filter.no-results","No changes exist for the selected filter."),column1span:3})))},xt={name:"8xpy1z",styles:"margin-top:1.875rem;"},Yt=e=>{let{filter:t,historyChanges:a,title:r,expanded:n}=e;const{historyFormat:o}=(0,je.mS)(),s=(0,i.useMemo)((()=>Array.from(new Map(a.map((e=>{var t,a,i,r,n;const o=(null===e||void 0===e||null===(t=e.typeData)||void 0===t?void 0:t.fieldType)||(null===e||void 0===e||null===(a=e.typeData)||void 0===a?void 0:a.eventType)||(null===e||void 0===e||null===(i=e.typeData)||void 0===i?void 0:i.relType)||(null===e||void 0===e||null===(r=e.typeData)||void 0===r?void 0:r.recordType)||(null===e||void 0===e||null===(n=e.typeData)||void 0===n?void 0:n.elementType);return[o,{type:o,label:e.displayLabel}]}))).values())),[a]),l=(0,i.useMemo)((()=>{if(!Array.isArray(a)||null===s)return{};const e={};return s.forEach((t=>{const i=a.filter((e=>{var a,i,r,n,o;return((null===e||void 0===e||null===(a=e.typeData)||void 0===a?void 0:a.fieldType)||(null===e||void 0===e||null===(i=e.typeData)||void 0===i?void 0:i.eventType)||(null===e||void 0===e||null===(r=e.typeData)||void 0===r?void 0:r.relType)||(null===e||void 0===e||null===(n=e.typeData)||void 0===n?void 0:n.recordType)||(null===e||void 0===e||null===(o=e.typeData)||void 0===o?void 0:o.elementType))===t.type}));e[t.type]={label:t.label,items:i}})),e}),[a,s]),d=Object.keys(l).length>0;return(0,k.Y)(i.Fragment,null,o===ft?(0,k.Y)("div",{css:xt},(0,k.Y)(st.N6,{orientation:"vertical"},d?Object.keys(l).map((e=>(0,k.Y)(Et,{key:e,label:l[e].label,change:l[e],expanded:n}))):(0,k.Y)(Et,{label:t.label,change:{items:[]},expanded:n}))):(0,k.Y)(Ct,{changes:a,title:r}))};var Nt={name:"k008qs",styles:"display:flex;"},Rt={name:"258ja4",styles:"display:flex;gap:10px;align-items:center;height:60px;margin-bottom:10px;img{height:100%;}"};function Pt(){var e,t,a,r,n,o,s;const{t:l,i18n:d}=(0,P.B)(),c=(0,$.Ay)(),u=(0,$.Ay)(),{query:h,removeQuery:p}=(0,G.A)(),m=(0,D.zy)(),g=(0,b.A)(),{currentImageArk:v}=g,y=(0,Ae.l)(),f=(0,je.mS)(),w=(0,je.vl)(),{shared_dasProxy:T,rip_sharedImageViewer_history_NewLook:I}=(0,L.h)(["shared_dasProxy","rip_sharedImageViewer_history_NewLook"]),{personArk:S}=(0,$e.Tk)(m.search),E=(0,i.useRef)(),C=null===(e=g.personOrder)||void 0===e?void 0:e.find((e=>e.partitionKey===v)),{allRecords:x}=Ce({images:null===g||void 0===g?void 0:g.images,currentImageArk:null===g||void 0===g?void 0:g.currentImageArk,personIdsOrder:null===C||void 0===C?void 0:C.personIds,thumbnails:null===g||void 0===g?void 0:g.thumbnails}),Y=m.pathname.split("/").pop(),{loading:N,data:R}=(0,we.e)({imageArks:[Y],fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],dispatch:!0}),{types:O}=R;(0,Te.J)({imageArks:N?[]:[Y],fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],dispatch:!0});const _=(0,A.Qp)(null===g||void 0===g?void 0:g.images,null===g||void 0===g?void 0:g.currentImageArk)||{},F=(0,A.rr)([_],null===f||void 0===f?void 0:f.selectedPersonId),M=(0,Ie.FA)(F,g.images),H=(null===F||void 0===F?void 0:F.subElements.filter((e=>"EVENT"===e.elementType)))||[],z=(0,A.q5)(F,"FIELD"),[V,B]=(0,i.useState)(),[U,K]=(0,i.useState)(""),[q,fe]=(0,i.useState)(l("history-viewer.heading","All Changes for Image")),[Ye,Ne]=(0,i.useState)(""),[Re,Pe]=(0,i.useState)(),[Oe,_e]=(0,i.useState)(),[Fe,De]=(0,i.useState)(!0),[Me,He]=(0,i.useState)(I.isOn?{value:ct,label:l("history-viewer.filter.all-changes","All Changes")}:""),[ze,Ve]=(0,i.useState)([]),[Be,Ge]=(0,i.useState)([]),[Qe,Je]=(0,i.useState)([]),[Ze,et]=(0,i.useState)([]),[tt,at]=(0,i.useState)([]),[it,rt]=(0,i.useState)(!1),[nt,st]=(0,i.useState)(""),[lt,dt]=(0,i.useState)(!1),ut=(0,i.useRef)([]);(0,i.useEffect)((()=>{const e=[{label:l("history-viewer.filter.all-changes","All Changes"),value:""}],[t,a]=O.relationships?function(e,t){return[We.map((e=>{return{...e,label:(a=e.label,t(`temp.person.details.${a}`,a))};var a})),Xe(e,t)]}(O,l):[[],[]];et(e.concat(t.concat(a).sort(((e,t)=>e.label>t.label?1:-1))))}),[O,l]);const ht=()=>{var e;const t=null===Oe||void 0===Oe||null===(e=Oe.name)||void 0===e?void 0:e.split("_");return t&&t[1]?parseInt(t[1],10):"?"},mt=(0,i.useCallback)((e=>{x&&x.forEach((t=>{if(null!==t&&void 0!==t&&t.subElements){t.subElements.filter((e=>"PERSON"===(null===e||void 0===e?void 0:e.elementType)&&(null===e||void 0===e?void 0:e.partitionKey)===v));const a=(0,Ie.RV)(e,g.types,t);""!==a&&K(a)}}))}),[x,v,g.types]);(0,i.useEffect)((()=>{y({type:"SET_DATA",value:{currentImageArk:Y}})}),[y,Y]),(0,i.useEffect)((()=>{N||((0,Se.ci)(Y).then((e=>{_e(e)})),(0,Se.dd)(g).then((e=>{Pe(e)})))}),[Y,N,g]),(0,i.useEffect)((()=>{if(!N){let i=[{key:"seeAll",primaryText:l("history-viewer.filter.seeAll","See All"),group:""}];if(f.selectedPersonId){var e,t;const r=null===(e=g.images)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.subElements.find((e=>{var t;return null===(t=e.subElements)||void 0===t?void 0:t.includes(F)}));let n=null===r||void 0===r?void 0:r.subElements.filter((e=>"PERSON"===e.elementType)).sort(((e,t)=>e.primary>t.primary?-1:1)).map((e=>({key:e.id,primaryText:`${(0,Ee.hA)({person:e})}${e.primary?` ${l("history-viewer.principal-person.label","(Principal)")}`:""}`,group:l("history-viewer.autosuggest.record-group","IN THIS RECORD")})));const o=g.images[0].subElements.filter((e=>e.subElements&&!e.subElements.includes(F))).map((e=>e.subElements.filter((e=>"PERSON"===e.elementType)).sort(((e,t)=>e.primary>t.primary?-1:1)).map((e=>({key:e.id,primaryText:`${(0,Ee.hA)({person:e})}${e.primary?` ${l("history-viewer.principal-person.label","(Principal)")}`:""}`,group:l("history-viewer.autosuggest.image-group","IN THIS IMAGE")})))));for(let e=0;e<o.length;e++){var a;if(n)n=null===(a=n)||void 0===a?void 0:a.concat(o[e]);else n=o[e]}i=[...i,...n]}else Qe.map((e=>i.push({key:e.id,primaryText:`${(0,Ee.hA)({person:e})}${e.primary?` ${l("history-viewer.principal-person.label","(Principal)")}`:""}`,group:l("history-viewer.autosuggest.image-group","IN THIS IMAGE")})));Ve(i)}}),[l,N,g,Qe,f.selectedPersonId,F]);const gt=e=>{var t;const a=null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t.find((e=>"SEX_CODE"===e.fieldType)),i=a?(0,A.Ut)(a):"unknown";B(i)},vt=(0,i.useCallback)((()=>{p("personArk"),rt(!1),B(""),w({type:"SET_SELECTED_PERSON_ID",value:""}),Ge([]),fe(l("history-viewer.heading","All Changes for Image")),K("Record"),c.isOpen&&c.close();[c,u].forEach((e=>{e.isOpen&&e.close()}))}),[c,u,w,p,l]),yt=(0,i.useCallback)((e=>{gt(e),K("");let t=null===e||void 0===e?void 0:e.id;rt(!0),t&&(t.key&&(t=t.key),"seeAll"===t?vt():(w({type:"SET_SELECTED_PERSON_ID",value:t}),st((0,Ee.hA)({person:e})),fe(`${(0,Ee.hA)({person:e})}${e.primary?` ${l("history-viewer.principal-person.label","(Principal)")}`:""}`),Ne(`${(0,Ee.hA)({person:e})}`),e.primary?K("Primary"):mt(e)))}),[mt,w,vt,l]);(0,i.useEffect)((()=>{if(h.personArk&&g.images.length>0&&!f.selectedPersonId){const e=(0,A.rr)(g.images,h.personArk);yt(e)}}),[ze,h.personArk,yt,g.images,f.selectedPersonId]);const bt=(0,i.useCallback)((e=>{var t,a,i;if(N||!f.selectedPersonId||be()(e))return!1;const r=[],n=ut.current||[],o=null===(t=e.value)||void 0===t?void 0:t.primary;if("ALL_CHANGES"===o)return Ge(n),!0;n.forEach((e=>{e.typeData.fieldType===o&&r.push(e)})),n.forEach((e=>{e.typeData.relKey===o&&r.push(e)}));const s=null===(a=e.value)||void 0===a?void 0:a.secondary,d=null===(i=e.value)||void 0===i?void 0:i.tertiary;return"EVENT"===o&&n.filter((e=>!s||e.eventType===s)).forEach((e=>{((e,t)=>{var a;null===e||void 0===e||null===(a=e.subElements)||void 0===a||a.filter((e=>!t||e.elementType===t)).forEach((()=>{r.push(e)}))})(e,d)})),fe(l("history-viewer.list.title","{fieldType} changes for {personName}",{fieldType:e.label,personName:nt})),Ge(r),!0}),[N,f.selectedPersonId]);(0,i.useEffect)((()=>{if(I.isOn)0===ut.current.length&&yt&&(ut.current=Le({actions:null===_||void 0===_?void 0:_.actions,person:F}),Ne(`${(0,Ee.hA)({selectedPerson:F})}`)),bt(Me);else if(!N&&f.selectedPersonId){const e=[];z.forEach((t=>{Me&&t.fieldType!==Me||e.push({id:t.id,label:t.label})})),Me&&"EVENT"!==Me||H.forEach((t=>t.subElements.forEach((t=>{e.push({id:t.id,label:t.label})})))),M.forEach((t=>{Me&&t.relKey!==Me||e.push({id:t.id,label:t.label})})),Ge(e)}}),[Me,bt,N,f.selectedPersonId,null===_||void 0===_?void 0:_.actions]),(0,i.useEffect)((()=>{var e,t;const a=null===(e=g.images)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.subElements,i=null===a||void 0===a?void 0:a.reduce(((e,t)=>{const a=(0,A.q5)(t,"PERSON").filter((e=>!e.isDangling)).sort(((e,t)=>e.primary>t.primary?-1:1));return e.concat(a)}),[]);i&&Je(i)}),[N,g]),(0,i.useEffect)((()=>{if(S){const e=Qe.find((e=>e.id===S));e&&(st((0,Ee.hA)({person:e})),fe(`${(0,Ee.hA)({person:e})}${e.primary?` ${l("history-viewer.principal-person.label","(Principal)")}`:""}`),Ne(`${(0,Ee.hA)({person:e})}`),e.primary?K("Primary"):mt(e),gt(e),rt(!0))}}),[N,S,w,Qe,l,mt]),(0,i.useEffect)((()=>{if(!N){var e,t;const a=null===_||void 0===_||null===(e=_.actions)||void 0===e?void 0:e.filter((e=>"OP_UNDO"===e.opCode)),i=null===_||void 0===_||null===(t=_.actions)||void 0===t?void 0:t.filter((e=>"REMOVE_ELEMENT"===e.opCode&&"PERSON"===e.elementType&&!a.find((t=>t.stringArg===e.actionId))));(0,A.vA)(i),i&&i.forEach((e=>{e.name=(0,ke.vI)(_.actions,e.id,d),e.subElements=(0,ke.GU)(_.actions,e.id,d)})),at(i||[]),"All Changes for Image"===q&&K("Record")}}),[null===_||void 0===_?void 0:_.actions,d,N,q]);const At="All Changes for Image"===q?l("history-viewer.image-name","Image {imageName}",{imageName:ht()}):Ye,Tt=(0,k.AH)("border-bottom:5px solid ","male"===V?W.A.blue80:"female"===V?W.A.red80:W.A.gray10,";"),It=(0,k.AH)("border-bottom:5px solid ",W.A.yellow10,";"),St=Nt,Et=Rt,kt=I.isOn&&f.historyFormat===ft||!I.isOn;return(0,k.Y)(i.Fragment,null,(0,k.Y)(X.A,{theme:"day"},I.isOn&&(0,k.Y)(Q.Ay,{css:Tt},(0,k.Y)(J.Ay,{gutters:"nano",alignY:"middle"},(0,k.Y)(Z.A,{"data-testid":"back-to-record-button",Icon:he.A,iconDirection:"backward",to:`${m.pathname}?view=index`},l("history-viewer.back.button","Back to Record")),(0,k.Y)(ee.A,{Icon:pe.A,size:"md",disabled:!0}),it?(0,k.Y)(Z.A,{"data-testid":"view-all-name-button",onClick:vt},l("history-viewer.view-all-names.button","View All Names")):(0,k.Y)(te.A,{size:"sm"},l("history-viewer.view-all-names.button","View All Names")),it&&!N?(0,k.Y)(ee.A,{Icon:pe.A,size:"md",disabled:!0}):(0,k.Y)(i.Fragment,null),it&&!N?(0,k.Y)(te.A,{size:"sm"},Ye):(0,k.Y)(i.Fragment,null)),(0,k.Y)(ae.A,null),(0,k.Y)(J.Ay,{alignY:"bottom"},Re&&(null===(t=Re.collections)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.title)&&(0,k.Y)(ie.A,{name:At,personRole:U,details:Re&&(null===(r=Re.collections)||void 0===r||null===(n=r[0])||void 0===n?void 0:n.title),thumbnail:(0,xe.Td)(Y,T.isOn),size:"lg",growX:!0}),it&&I.isOn?(0,k.Y)(Z.A,{"data-testid":"history-preferences-button",Icon:me.A,disabled:!f.selectedPersonId||u.isOpen,onClick:u.handleClick},l("history-viewer.preferences.button","Preferences")):(0,k.Y)(i.Fragment,null),it?(0,k.Y)(Z.A,{"data-testid":"filter-history-button",Icon:ge.A,disabled:!f.selectedPersonId||c.isOpen,onClick:c.handleClick},l("history-viewer.filter.button","Filter")):(0,k.Y)(i.Fragment,null)),it?(0,k.Y)(i.Fragment,null):(0,k.Y)(ae.A,null),it?(0,k.Y)(i.Fragment,null):(0,k.Y)(Z.A,{onClick:()=>dt(!lt),Icon:lt?ve.A:ye.A},lt?l("history-viewer.hide-deleted-names.button","HIDE DELETED NAMES"):l("history-viewer.show-deleted-names.button","SHOW DELETED NAMES")),(0,k.Y)(ae.A,null)),!I.isOn&&(0,k.Y)(Q.Ay,{color:W.A.yellow03,css:It},(0,k.Y)(Z.A,{"data-testid":"back-to-record-button",Icon:he.A,iconDirection:"backward",to:`${m.pathname}?view=index`},l("history-viewer.back.button","Back to Record")),(0,k.Y)("div",{css:Et},(0,k.Y)("img",{alt:"",src:(0,xe.Td)(Y,T.isOn)}),(0,k.Y)(re.H5,{supplementary:!0},l("history-viewer.image-name","Image {imageName}",{imageName:ht()}),(0,k.Y)(ne.A,null,Re&&(null===(o=Re.collections)||void 0===o||null===(s=o[0])||void 0===s?void 0:s.title)))))),(0,k.Y)(oe.A,null),(0,k.Y)(Q.Ay,{marginY:"sm",color:I.isOn?void 0:"#F7F8F8"},(0,k.Y)(se.Ay,null,(0,k.Y)(le.A,{columns:6,alignY:"middle"},!I.isOn&&(0,k.Y)("div",{css:St},f.selectedPersonId&&(0,k.Y)(ee.A,{Icon:pe.A,title:"See All",size:"md",onClick:()=>vt(),iconDirection:"backward","data-testid":"see-all-changes-button"}),(0,k.Y)(re.H5,null,q)),(0,k.Y)(J.Ay,null,kt&&(0,k.Y)(Z.A,{"data-testid":"expand-history-button",onClick:()=>De((e=>!e))},Fe?l("history-viewer.collapse.button","Collapse All"):l("history-viewer.expand.button","Expand All")))),!I.isOn&&(0,k.Y)(le.A,{columns:3,alignY:"middle"},(0,k.Y)(de.Ay,{label:l("history-viewer.autosuggest.label","People in Image"),placeholder:l("history-viewer.autosuggest.placeholder","Filter by Name"),suggestions:ze,onSuggestionSelected:yt,selectedItem:ze.find((e=>e.key===f.selectedPersonId))||{primaryText:"",key:""}}))),!N&&!f.selectedPersonId&&lt&&(0,k.Y)("div",{ref:E},(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)(ot,{deletedPersonActions:tt,backgroundColor:W.A.red02,expanded:Fe,onToggle:De}),(0,k.Y)(ae.A,{size:"sm"})),!N&&!f.selectedPersonId&&Qe.map((e=>(0,k.Y)("div",{key:e.id},(0,k.Y)(Ue,{expanded:Fe,person:e,selectPerson:yt,setHistoryFields:Ge,personChanges:ut}),(0,k.Y)(ae.A,{size:"sm"})))),!N&&f.selectedPersonId&&(0,k.Y)(i.Fragment,null,I.isOn?(0,k.Y)(Yt,{filter:Me,historyChanges:Be,expanded:Fe,title:q,person:F}):Be.length>0&&(0,k.Y)(i.Fragment,null,Be.map((e=>(0,k.Y)("div",{key:e.id},(0,k.Y)(Ke,{expanded:Fe,field:e}),(0,k.Y)(ae.A,{size:"sm"})))))),!N&&f.selectedPersonId&&0===Be.length&&!I&&(0,k.Y)("div",null,(0,k.Y)(Ke,{expanded:!0,field:{}}),(0,k.Y)(ae.A,{size:"sm"})),I.isOn?(0,k.Y)(i.Fragment,null,(0,k.Y)(pt,{slsTypes:O,filterSheetOverlay:c,onChange:He}),(0,k.Y)(wt,{overlayProps:u})):(0,k.Y)(ce.A,(0,j.A)({title:l("history-viewer.filter.button","Filter")},c),(0,k.Y)(ue.A,{chips:Ze,name:"PersonFilters",onSelectionChange:e=>{He(e.value)}}))))}var Ot=a(40288),_t=a(9599),Ft=a(37734),Dt=a(73184),Mt=a(73440),Ht=a(30187),Lt=a(97917),zt=a(47511),Vt=a(54184),Bt=a(20468),Gt=a(93342),Ut=a(68841),Kt=a(84107),qt=a(70816),jt=a(77627),$t=a(37235),Wt=a(4842),Xt=a(8132),Qt=a(95366),Jt=a(95616),Zt=a(97438),ea=a(35267),ta=a(24208),aa=a(80165),ia=a(51689),ra=a(25155),na=a(6703);async function oa(e,t){const a=`${qe.zM}/service/standards/place/ws/places/reps/${e}/names/${t}`;return ra.Ay.get(a,{headers:qe.b3}).then((e=>{let{data:t}=e;return t})).catch((e=>{var t,i;throw(0,$e.Yt)(e,null,{codeId:88,url:a,status:null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status,responseBody:null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.data}),new Error(e)}))}async function sa(e,t){const a=`${qe.zM}/service/standards/cv/ws/cv/concepts/${e}?termType=OFFICIAL_PLURAL&accept-language=${t}`;return ra.Ay.get(a,{headers:qe.b3}).then((e=>{let{data:t}=e;const{concept:{terms:[{translations:[a]}]}}=t;return a})).catch((e=>{var t,a;throw(0,$e.Yt)(e,null,{codeId:55,status:null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status,responseBody:null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data}),new Error(e)}))}var la=a(12477);async function da(e){const t=await(0,xe.eN)(e),a=`${qe.du}/artifact/${t}/parent/grouptype/NATURAL?allowInactive=true`;return ra.Ay.get(a,{headers:qe.b3}).then((async e=>{const{data:t}=e;return t}))}async function ca(e){const t=`${qe.du}/group-service/group/${e}/natural/children`;return ra.Ay.get(t,{headers:qe.b3}).then((async e=>{const{data:t}=e;return t}))}async function ua(e){var t;const a=`${qe.du}/group-service/group/${e}`,{data:i}=await ra.Ay.get(a,{headers:qe.b3}),{groupName:r}=i;let n,s;if(r){const e=r.split("_");s=e[0],n=e[1],n&&(n=parseInt(n,10))}const l=await async function(e){const t={};for await(const a of e){const e=a.placeRepId,{displayName:{name:i}}=await oa(e,o.i18n.language);t[e]||(t[e]={place:{id:e,name:i},recordTypes:{}});const r=t[e].recordTypes,n=a.recordTypeConceptId;if(!r[n]){const{translation:e}=await sa(a.recordTypeConceptId,o.i18n.language);r[n]={name:e,id:a.recordTypeConceptId,date:[]}}(a.fromDate||a.toDate)&&r[n].date.push({formatted:(0,la.Zy)({fromISOString:a.fromdateString,toISOString:a.todateString,locale:o.i18n.language})})}return Object.values(t).map((e=>(e.recordTypes=Object.values(e.recordTypes),e)))}(i.coverages),d=(null===(t=i.parentIds.filter((e=>/^(th)-/i.test(e))))||void 0===t?void 0:t[0])||null;return{imageViewerCoverages:l,title:null===i||void 0===i?void 0:i.title,dgsNumber:s,itemNumber:n,creators:null===i||void 0===i?void 0:i.creators,custodians:null===i||void 0===i?void 0:i.custodians,coverages:null===i||void 0===i?void 0:i.coverages,parentId:d}}var ha=a(72416),pa=a(11338),ma=a(35887),ga=a(92083),va=a(84070),ya=a(46698),fa=a(32517),ba=a(88729),Aa=a(89719),wa=(a(65236),a(74773));function Ta(e){var t,a;let{userId:i,fallBackToFs:r=!1}=e;return(null!==(t=i)&&void 0!==t&&t.startsWith("fs:")||null!==(a=i)&&void 0!==a&&a.startsWith("cis.proc.")||!i&&r)&&(i=qe.Tw),(0,k.Y)(De.A,{contact:{cisId:i}})}const Ia={SET_PERMISSION_INFO:"Permission",CREATE_ELEMENT:"Create"},Sa={name:"mgghq7",styles:"display:inline-flex;justify-content:space-between;width:calc(100% - 2ch);"};function Ea(e){var t,a,r,n;let{selectedActions:o,rawData:s,groupedActions:l,fsUserAgentChain:d}=e;const c=(0,i.useMemo)((()=>{if(!o)return[];const e=new Set(o.map((e=>{var t;return null===e||void 0===e||null===(t=e.journalAttribution)||void 0===t?void 0:t.userId})).filter(Boolean));return Array.from(e)}),[o]),u=(0,$.Ay)(),h=(0,L.u)("rip_sharedImageViewer_sls_actions_splunk_debugger"),[p,m]=(0,i.useState)([]);function g(e){m(e),u.open()}const v=(0,_t.mb)(),[y,f]=(0,i.useState)();function b(e){const t=parseInt(null===e||void 0===e?void 0:e.status,10);v({message:`Response code ${null===e||void 0===e?void 0:e.status}`,type:t>=200&&t<300?"success":"error"})}return(0,k.Y)(i.Fragment,null,(0,k.Y)("details",{open:!0},(0,k.Y)("summary",null,"Actions"),o&&(0,k.Y)(i.Fragment,null,(0,k.Y)("details",{style:{paddingInlineStart:12}},(0,k.Y)("summary",{title:"May Exclude FamilySearch"},"Contributors to this element (",null===c||void 0===c?void 0:c.length,")"),(0,k.Y)("div",{style:{display:"flex",flexWrap:"wrap"}},c.map((e=>(0,k.Y)(Ta,{key:e,userId:e})))),!(null!==c&&void 0!==c&&c.length)&&(0,k.Y)(Ta,{fallBackToFs:!0})),(0,k.Y)("details",null,(0,k.Y)("summary",{style:{paddingInlineStart:12}},"Raw Actions (",(0,k.Y)("span",{title:"Number of actions for this element only"},(null===o||void 0===o?void 0:o.length)||0),")"),null===o||void 0===o?void 0:o.map((e=>{var t,a,i;return(0,k.Y)("details",{key:e.actionId},(0,k.Y)("summary",{style:{paddingInlineStart:24},title:new Date(null===e||void 0===e||null===(t=e.journalAttribution)||void 0===t?void 0:t.timestamp).toString().substring(0,21)},(0,k.Y)("span",{css:Sa}," ",(0,k.Y)("span",null,new Date(null===e||void 0===e||null===(a=e.journalAttribution)||void 0===a?void 0:a.timestamp).toString().substring(4,15)," ",(0,k.Y)("small",null,Ia[null===e||void 0===e?void 0:e.opCode]||(null===e||void 0===e?void 0:e.opCode.replace(/_/g," ").toLowerCase().replace(/\b\w/g,(e=>e.toUpperCase()))))),(0,k.Y)(Ta,{userId:null===e||void 0===e||null===(i=e.journalAttribution)||void 0===i?void 0:i.userId,fallBackToFs:!0}))),(0,k.Y)("div",{style:{background:"whitesmoke"}},(0,k.Y)(ka,{json:e}),(0,k.Y)(at.A,{onClick:()=>g([(0,Je.jg)({id:e.actionId,partitionKey:e.partitionKey})]),title:"With great power comes great responsibility"},"Undo Action")))}))),(0,k.Y)("details",null,(0,k.Y)("summary",{style:{paddingInlineStart:12}},"Transactions (",(0,k.Y)("span",{title:"Number of grouped transactions (groups of action payloads)"},(null===(t=Object.values(l))||void 0===t?void 0:t.length)||0," Groups"),"\u2013",(0,k.Y)("span",{title:"Number of actions across all grouped transactions (total of all actions across all payloads containing an action for this element)"},(null===(a=Object.values(l))||void 0===a||null===(r=a.flat())||void 0===r?void 0:r.length)||0," Actions"),")"),null===(n=Object.entries(l))||void 0===n?void 0:n.map(((e,t)=>{var a,i,r,n,o,s;let[l,d]=e;return(0,k.Y)("details",{key:l},(0,k.Y)("summary",{style:{paddingInlineStart:24}},(0,k.Y)("span",{css:Sa,title:`Group ${t+1}\u2013${new Date(null===d||void 0===d||null===(a=d[0])||void 0===a||null===(i=a.journalAttribution)||void 0===i?void 0:i.timestamp).toString().substring(0,21)}`}," ",(0,k.Y)("span",null,new Date(null===d||void 0===d||null===(r=d[0])||void 0===r||null===(n=r.journalAttribution)||void 0===n?void 0:n.timestamp).toString().substring(4,15)," ",(0,k.Y)("small",null,"(",null===d||void 0===d?void 0:d.length,")")),(0,k.Y)(Ta,{userId:null===d||void 0===d||null===(o=d[0])||void 0===o||null===(s=o.journalAttribution)||void 0===s?void 0:s.userId,fallBackToFs:!0}))),(0,k.Y)("div",{style:{background:"whitesmoke"}},(0,k.Y)(ka,{json:d}),(0,k.Y)(at.A,{onClick:()=>g(d.map((e=>{var t;return{id:e.actionId,partitionKey:e.partitionKey,subPartitionKey:null===e||void 0===e||null===(t=e.referenceArg)||void 0===t?void 0:t.partitionKey}})).map(Je.jg))},"Undo Transaction")))})))),!o&&(0,k.Y)(ka,null)),(0,k.Y)("details",{open:!0},(0,k.Y)("summary",null,"Element"),(0,k.Y)(ka,{json:s}),s&&(0,k.Y)(at.A,{onClick:()=>{g([(0,Je.K5)({id:s.id,partitionKey:s.partitionKey,elementType:s.elementType})])}},"Remove Element")),(0,k.Y)(Ze.A,(0,j.A)({},u,{title:"Are You Sure?",footer:(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{onClick:u.close},"Cancel"),(0,k.Y)(at.A,{onClick:()=>{f(!0),(0,Se.Nn)({actions:p,appName:"ELITE_DATUM",fsUserAgentChain:d,splunkDebugModeArguments:h.isOn?{theFileFromWhichSaveWasCalled:"ActionAndElementDetails"}:void 0}).then(b).catch((e=>b(e.response))).finally((()=>{f(!1),u.close()}))},disabled:y},"Do It"))}),(0,k.Y)(te.A,{size:"sm"},'"When you look at the dark side, careful you must be. For the dark side looks back." - Yoda')))}function ka(e){let{json:t,name:a="element"}=e;return(0,k.Y)(i.Fragment,null,t&&(0,k.Y)("pre",{style:{fontSize:12,lineHeight:1.33}},JSON.stringify(t,null,2)),!t&&(0,k.Y)(te.A,{secondary:!0,size:"sm"},"Select a",/^[aeiou]/.test(a)?"n":""," ",a," to view its raw data"))}const Ca={name:"yql55k",styles:".rc-tree-iconEle rc-tree-icon__customize{width:18px;}"},xa={name:"bh7rwz",styles:"height:200px;& > div{height:200px;}"},Ya=(0,y.Ay)("rip:debug:ElementTreeView"),Na="||";function Ra(e){let{fsUserAgentChain:t}=e;const a=(0,b.A)(),r=(0,ma.A)(),[n,o]=(0,i.useState)({}),[s,l]=(0,i.useState)(!1),[d,c]=(0,i.useState)([]),[u,h]=(0,i.useState)([]),[p,m]=(0,i.useState)(),[v,y]=(0,jt.A)(),[f,w]=(0,i.useState)(),[T,I]=(0,i.useState)(),S=(0,L.u)("shared_dasProxy"),[E,{set:C}]=(0,ga.Ay)();(0,i.useEffect)((()=>{a.images&&a.currentImageArk&&I((0,A.Qp)(a.images,a.currentImageArk))}),[a.currentImageArk,a.images]);const x=(0,i.useMemo)((()=>{const e=T?(0,A.x5)([T]):[];return null===e||void 0===e?void 0:e.map((e=>({key:e.id,primaryText:e.id})))}),[T]),Y=(0,i.useMemo)((()=>{const e=T?(0,A.x5)([T]):[],t=[];return e.forEach((e=>{const a=(0,A.OV)(e);"FIELD"===e.elementType&&""!==(null===a||void 0===a?void 0:a.trim())&&t.push({key:e.id,primaryText:(0,A.OV)(e)||""})})),t}),[T]),[N,R]=(0,i.useState)(null);function P(e){const t=(0,A.rr)(T.subElements,e)||(0,A.rr)(T.floatingElements,e);if(!t)return void m(null);const a=(0,A.Tc)(t,null===T||void 0===T?void 0:T.template,null===T||void 0===T?void 0:T.templateToImageMapping),{subElements:i}=t;m({...t,subElements:`${(null===i||void 0===i?void 0:i.length)||0} truncated`,template:a});const r=(0,A.QE)(null===T||void 0===T?void 0:T.actions,e),n=r.reduce(((e,t)=>{const a=[...null===T||void 0===T?void 0:T.actions.filter((e=>e.transactionId===t.transactionId))];return e[t.transactionId]||(e[t.transactionId]=a),e}),{});o(n),R(r)}(0,i.useEffect)((()=>{if(T){const e=(0,ia.mV)({element:T});w(e),(0,ha.eP)(e,y)}}),[T,y]);const O=e=>{if(null===e||void 0===e||!e.key)return;const t=e.key,i=(e=>{let t=(0,A.rr)([T],e);t||console.warn("Could not find element in current image",e);const i=[e];for(;null!==(r=t)&&void 0!==r&&r.superElements&&null!==(n=t)&&void 0!==n&&null!==(o=n.superElements)&&void 0!==o&&o.find((e=>e.partitionKey===a.currentImageArk));){var r,n,o,s,l;const e=null===(s=t)||void 0===s||null===(l=s.superElements)||void 0===l?void 0:l.find((e=>e.partitionKey===a.currentImageArk));i.push(e.id),t=(0,A.rr)([T,{}],e.id)}return i})(t),r=[];for(;i.length>0;)r.push(i.join(Na)),i.shift();c([]),h([]),c(r),h([r[0]]),P(t)},_=(0,i.useCallback)((e=>(null===e||void 0===e?void 0:e.partitionKey)!==a.currentImageArk||(null===e||void 0===e?void 0:e.isDangling)),[a.currentImageArk]),F=(0,i.useCallback)((e=>{let t="";return"PERSON"===e.elementType&&(t=`${(0,Ee.hA)({person:e})} ${e.primary?"(Principal})":""}`),"RELATIONSHIP"===e.elementType&&(t=e.relType),"NAME"===e.elementType&&(t=e.nameType),"EVENT"===e.elementType&&(t=e.eventType),"FIELD"===e.elementType&&(t=(e=>{var t,a,i;let r=e.fieldType;const n=(0,A.SF)(e),o=null===n||void 0===n||null===(t=n.normalizedValues)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.text,s=null===n||void 0===n||null===(i=n.origValue)||void 0===i?void 0:i.text;return o?r=`${r} \u2014 Normalized: "${o}"`:s&&(r=`${r} \u2014 Orig: "${s}"`),r})(e)),"RECORD"===e.elementType&&(t=e.recordType),t?`${e.elementType||""} ${t}`:(null===e||void 0===e?void 0:e.elementType)||(null===e||void 0===e?void 0:e.fieldType)||"NO-TYPE"}),[]),D=(0,i.useCallback)(((e,t)=>{var a;return null===e||void 0===e||null===(a=e.subElements)||void 0===a?void 0:a.map((e=>{var a,i,r;const n=F(e),o=(null===e||void 0===e||null===(a=e.superElements)||void 0===a?void 0:a.length)>1,s=(null===e||void 0===e||null===(i=e.subElements)||void 0===i?void 0:i.length)>0,l=o?` [${null===e||void 0===e||null===(r=e.superElements)||void 0===r?void 0:r.length}x]`:"",d=o&&(0,k.Y)(Oa,{Icon:va.A,background:s?W.A.yellow03:W.A.blue03})||_(e)&&(0,k.Y)(Oa,{Icon:ya.A,background:W.A.blue03});return{key:[e.id,...t].join(Na),title:`${n}${l}`,children:D(e,[e.id,...t]),icon:d}}))}),[F,_]),M=(0,i.useMemo)((()=>{if(!a.images||!T)return[];const e=T.subElements,t=null===e||void 0===e?void 0:e.map((e=>({key:e.id,title:`${F(e)}`,children:D(e,[e.id])}))),i=T.floatingElements.filter((e=>"RECORD"!==e.elementType)).map((e=>({key:e.id,title:`${F(e)}${_(e)?" (DANGLING)":""}`,children:D(e,[e.id]),icon:(0,k.Y)(Oa,{Icon:_(e)?fa.A:ya.A,background:_(e)?W.A.green05:W.A.blue03})})));return t.concat(i)}),[T,D,F,_,a.images]),H=e=>[e.key,...e.children.flatMap(H)];return Ya("ElementTreeView Render: ",{state:a,arkUrl:(0,xe.F)(a.currentImageArk,null===S||void 0===S?void 0:S.isOn),currentImageArk:a.currentImageArk,currentImage:T,autosuggestElements:x,autosuggestValues:Y,expandedKeys:d,rawData:p,rawDataInfoSheet:r}),(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(re.H5,null,"Element Tree"),(0,k.Y)(te.A,{size:"sm"},"This is the list of sls elements put together in a format that is easily understood. You may filter this list of subelements by the id or the value of the field. You may need to scroll to see the highlighted field. The format follows this general structure: Image ",">"," Record ",">"," Person ",">"," Field/Event/Relationship."),(0,k.Y)(ae.A,null),(0,k.Y)(_e.A,{heading:"Floating Elements:",data:"elements that are not directly connected to a record and appear below without a folder.",inline:!0}),(0,k.Y)(_e.A,{heading:"Dangling Elements:",data:"elements that are not connected to the current image, but do have a record.",inline:!0}),(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)(J.Ay,{wrap:!0},(0,k.Y)(de.Ay,{Icon:ba.A,"data-testid":"tree-view-field-value-search",suggestions:Y,onSuggestionSelected:O,label:"Search for element by field value",placeholder:"i.e. Braulia Ramonas or 13 de junio",virtualize:!0,growX:!0}),(0,k.Y)(de.Ay,{Icon:ba.A,"data-testid":"tree-view-id-search",suggestions:x,onSuggestionSelected:O,label:"Search for element by ID",placeholder:"i.e. a0de4529-82b1-4dcf-b06e-4e32b8b0d7a4",virtualize:!0,growX:!0})),(0,k.Y)(Z.A,{"data-testid":"tree-view-expand-collapse",onClick:()=>{l(!0),setTimeout((()=>{if(d.length>0)c([]);else{c(H({children:M}))}l(!1)}),0)},Icon:s?g.A:void 0},d.length>0?"Collapse All":"Expand All"),(0,k.Y)("div",{css:Ca},(0,k.Y)(pa.Ay,{treeData:M,expandedKeys:d,selectedKeys:u,onSelect:e=>{h(e);const t=e[0].includes("|")?e[0].split("|")[0]:e[0],a=(0,A.Qe)(T,t);var i;((e=>{if("FIELD"===(null===e||void 0===e?void 0:e.elementType)){const t=f.filter((t=>t.fieldId===e.id));t&&((0,ha.eP)(t,y),(0,wa.lc)(t,C))}if("PERSON"===(null===e||void 0===e?void 0:e.elementType)){const t=f.filter((t=>t.personIds.includes(e.personId)));t&&((0,ha.eP)(t,y),(0,wa.lc)(t,C))}if("RECORD"===(null===e||void 0===e?void 0:e.elementType)){const t=f.filter((t=>t.recordId===e.recordId));t&&((0,ha.eP)(t,y),(0,wa.lc)(t,C))}})(null===a||void 0===a?void 0:a[0]),e[0])?P(null===(i=e[0].split(Na))||void 0===i?void 0:i[0]):m()},onExpand:c})),(0,k.Y)(ce.A,(0,j.A)({title:(0,k.Y)("div",{css:xa},(0,k.Y)(Aa.A,(0,j.A)({},E,{src:(0,xe.F)(a.currentImageArk,null===S||void 0===S?void 0:S.isOn),alt:"highlights preview for selected item"}),(0,k.Y)(Xt.A,{state:v,api:y,Component:Qt.A})))},r,{nonClosable:!0,size:"lg"}),(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H5,null,"Raw Data"),(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)(Ea,{groupedActions:n,rawData:p,fsUserAgentChain:t,selectedActions:N}))))}const Pa={name:"hlh8nz",styles:"span{position:relative;top:-3px;inset-inline-start:-4px;transform:scale(0.75);width:23px !important;}"},Oa=e=>{let{Icon:t,...a}=e;return(0,k.Y)("span",{css:Pa},(0,k.Y)(t,(0,j.A)({size:"xs"},a)))};var _a=a(81649),Fa=a(98969),Da=a(30664),Ma=a(28430),Ha=a(2409),La=a(61763),za=a(86225);const Va={controlsRow:{name:"oy7yky",styles:"display:flex;justify-content:space-between;flex-wrap:wrap-reverse;margin-bottom:-12px;"},rawData:{name:"17af1kx",styles:"padding:0 12px;overflow-x:auto;"}};var Ba=a(33046),Ga=a(67623);const Ua={paginator:{name:"1tcky99",styles:"padding:0 24px 24px;"},tableWrapper:{name:"8atqhb",styles:"width:100%;"}},Ka=(0,y.Ay)("rip:debug:historyTable");function qa(e){var t;let{activeHistory:a}=e;const r=(0,je.mS)(),n=(0,b.A)(),[o,s]=(0,i.useState)(0),[l,d]=(0,i.useState)(20),[c,u]=(0,i.useState)(a);(0,i.useEffect)((()=>{const e=l*o,t=l*(o+1);u((null===a||void 0===a?void 0:a.slice(e,t))||[])}),[a,o,l]);const h=(null===a||void 0===a?void 0:a.length)||1;(0,i.useEffect)((()=>{h&&s(0)}),[h]),Ka("history data",a),Ka("history elements",r.elements),Ka("Element finder",null===(t=r.elements)||void 0===t?void 0:t.find((e=>"274925af-f018-463a-b0e0-c69cad04ce02"===e.id)));const p=e=>{const t=He({action:e,slsTypes:n.types});return(0,k.Y)(_e.A,{inline:!0,data:t.join(" "),heading:""})};return(0,k.Y)("div",{css:Ua.tableWrapper},(0,k.Y)(Ba.bQ,{columns:[{label:"Time",size:"md"},{label:"User",size:"md"},{label:"Person",size:"md"},{label:"Change",size:"md"},{label:"Value",size:"md"}]},null===c||void 0===c?void 0:c.map((e=>{var t,a,i,n;return(0,k.Y)(Ba.J2,{onClick:()=>{},key:e.actionId+e.sequenceNumber,column1:(n=null===e||void 0===e||null===(t=e.journalAttribution)||void 0===t?void 0:t.timestamp,new Date(n).toLocaleString()),column2:(0,k.Y)(Ta,{userId:null===e||void 0===e||null===(a=e.journalAttribution)||void 0===a?void 0:a.userId,fallBackToFs:!0}),column3:(0,$e.sz)(null===e||void 0===e||null===(i=e.personId)||void 0===i?void 0:i[0],r)||"<Unknown>",column4:(0,Me.xW)(e,r.history,r.slsTypes),column5:p(e)},JSON.stringify(e))}))),!(null!==c&&void 0!==c&&c.length)&&(0,k.Y)(te.A,{centered:!0},"No Results"),(0,k.Y)("div",{css:Ua.paginator},(0,k.Y)(Ga.A,{index:o,setIndex:s,pageCount:l,setPageCount:d,length:h})))}function ja(e){var t,a,r;let{actions:n,arkPath:o,title:s,changeTitle:l}=e;const d=(0,b.A)(),[c,u]=(0,i.useState)(),[h,p]=(0,i.useState)(!1),[m,g]=(0,i.useState)(!1);(0,i.useEffect)((()=>{u(null===n||void 0===n?void 0:n.sort(((e,t)=>{var a,i;return(null===t||void 0===t||null===(a=t.journalAttribution)||void 0===a?void 0:a.timestamp)-(null===e||void 0===e||null===(i=e.journalAttribution)||void 0===i?void 0:i.timestamp)})))}),[n]);const v=(e,t)=>e<t?-1:e>t?1:0,y=(e,t)=>{if(l(t),g(!1),e===o)u(null===n||void 0===n?void 0:n.sort(((e,t)=>{var a,i;return(null===t||void 0===t||null===(a=t.journalAttribution)||void 0===a?void 0:a.timestamp)-(null===e||void 0===e||null===(i=e.journalAttribution)||void 0===i?void 0:i.timestamp)})));else{const t=null===n||void 0===n?void 0:n.filter((t=>t.personId[0]===e||t.recordId[0]===e||t.id===e));u(t)}};return(0,k.Y)("div",null,(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(re.H5,null,"History Table"),(0,k.Y)(te.A,{size:"sm"},"This is the history of changes that have been made to this image. Click a row to see the request that made the change. Or view in the raw list format."),(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)("div",{css:Va.controlsRow},(0,k.Y)(gt.A,{orientation:"horizontal"},(0,k.Y)(mt.A,{checked:!h,name:"summaryRadio",value:"false",label:"Summary",onChange:()=>p(!1)}),(0,k.Y)(mt.A,{checked:h,name:"rawRadio",value:"true",label:"Raw",onChange:()=>p(!0)}),(0,k.Y)(_a.A,{label:"User Changes Only",name:"userOnly",checked:m,onChange:e=>{let{target:t}=e;g(t.checked),t.checked?u(c.filter((e=>{var t,a;return(null===e||void 0===e||null===(t=e.journalAttribution)||void 0===t?void 0:t.userId)&&"fs:AutomatedContentExtraction"!==(null===e||void 0===e||null===(a=e.journalAttribution)||void 0===a?void 0:a.userId)})).sort(((e,t)=>{var a;return(null===t||void 0===t?void 0:t.journalAttribution.timestamp)-(null===e||void 0===e||null===(a=e.journalAttribution)||void 0===a?void 0:a.timestamp)}))):u(null===n||void 0===n?void 0:n.sort(((e,t)=>{var a,i;return(null===t||void 0===t||null===(a=t.journalAttribution)||void 0===a?void 0:a.timestamp)-(null===e||void 0===e||null===(i=e.journalAttribution)||void 0===i?void 0:i.timestamp)})))}})),(0,k.Y)(J.Ay,{guttersY:"none"},s!==o&&(0,k.Y)($a,{groupItems:[{id:o}],buttonText:"Image",changeHistory:y,Icon:Ma.A}),!(null===(t=d.records)||void 0===t||!t.length)&&(0,k.Y)($a,{groupItems:d.records.sort(((e,t)=>v(e.id,t.id))),buttonText:"Records",changeHistory:y,state:d,Icon:Ha.A}),!(null===(a=d.persons)||void 0===a||!a.length)&&(0,k.Y)($a,{groupItems:d.persons.sort(((e,t)=>v(e.id,t.id))),buttonText:"Persons",changeHistory:y,state:d,Icon:La.A}),!(null===(r=d.fields)||void 0===r||!r.length)&&(0,k.Y)($a,{groupItems:d.fields.sort(((e,t)=>v(e.id,t.id))),buttonText:"Fields",changeHistory:y,state:d}))),h&&(0,k.Y)("pre",{css:Va.rawData},JSON.stringify(c,null,2)),!h&&(0,k.Y)(qa,{activeHistory:c}))}function $a(e){let{groupItems:t,buttonText:a,changeHistory:i,state:r,Icon:n}=e;return(0,k.Y)(Fa.A,{menuButton:(0,k.Y)(Z.A,{Icon:n||za.A},a," (",(null===t||void 0===t?void 0:t.length)||0,")")},!(null===t||void 0===t||!t.length)&&t.map((e=>{let t=e.id;return e.id.startsWith("1:1")&&(t=`${(0,$e.sz)(e.id,r)} (${e.id})`),e.id.startsWith("1:2")&&(t=`${e.id} (Principal: ${(e=>{const t=r.records.find((t=>t.id===e));if(t.personIds.length>0)for(let a=0;a<t.personIds.length;a++)if(r.persons.find((e=>e.id===t.personIds[a])).primary)return(0,$e.sz)(t.personIds[a],r);return"<Unknown>"})(e.id)})`),"FIELD"===e.type&&(t=`${e.label} - ${e.value} (${e.id})`),(0,k.Y)(Da.A,{key:e.id,dense:!0,primaryText:t,onClick:()=>i(e.id,t)})})))}const Wa=a.p+"static/media/eliteDatumLogo.fca3fb67a54297014f99.png",Xa=k.i7`
    100%, 0% {
		  transform: translateX(-200%) translateY(100vh) rotateZ(0deg)
	  }

	15% {
		transform: translateX(100vw) translateY(-100%) rotateZ(180deg)
	}

	15.001%, 18% {
		transform: translateX(100vw) translateY(-30%) rotateZ(0deg)
	}

	40% {
		transform: translateX(-200%) translateY(3vh) rotateZ(-180deg)
	}

	40.001%, 43% {
		transform: translateX(-200%) translateY(-100%) rotateZ(-180deg)
	}

	65% {
		transform: translateX(100vw) translateY(50vh) rotateZ(0deg)
	}

	65.001%, 68% {
		transform: translateX(20vw) translateY(-200%) rotateZ(180deg)
	}

	95% {
		transform: translateX(10vw) translateY(100vh) rotateZ(0deg)
	}
`,Qa=k.i7`
    50% {
      -webkit-transform: translateY(25px);
      transform: translateY(25px);
    }
`,Ja=k.i7`
    0% {
    transform: rotate(10deg);
    }
    50% {
      -webkit-transform: rotate(-10deg);
      transform: rotate(-10deg);
    }
    100% {
    transform: rotate(10deg);
    }  
`,Za={name:"lqxbar",styles:"height:48px;width:35px;position:absolute;top:0%;inset-inline-start:0%;z-index:2;& svg{position:absolute;top:0;inset-inline-start:0;}& .plane{position:relative;}& .hand{transform-origin:center;}& a{color:#f40009;font-family:'Poppins',sans-serif;position:absolute;inset-inline-end:20px;top:20px;border:2px solid #f40009;text-decoration:none;}"};function ei(){return(0,k.Y)("div",{css:Za},(0,k.Y)("svg",{"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",width:"350",height:"400",css:(0,k.AH)("animation:",Xa," 40s ease infinite;")},(0,k.Y)("path",{fill:"transparent",d:"M0 0h350v400H0z"}),(0,k.Y)("g",{className:"plane",css:(0,k.AH)("animation:",Qa," 1s ease infinite;")},(0,k.Y)("rect",{x:"215.747",y:"157.738",width:"25.511",height:"43.645",rx:"12.755",ry:"12.755",fill:"#711723"}),(0,k.Y)("path",{fill:"#f40009",d:"M166.263 185.401h74.995v31.965h-74.995zM166.263 217.366h74.995a31.965 31.965 0 01-31.965 31.965h-43.03v-31.965z"}),(0,k.Y)("g",{className:"hand",css:(0,k.AH)("animation:",Ja," 1s ease infinite;")},(0,k.Y)("rect",{x:"136.437",y:"152.836",width:"26.365",height:"9.113",rx:"4.557",ry:"4.557",transform:"rotate(-120 149.62 157.393)",fill:"#f6bfb1"}),(0,k.Y)("path",{fill:"#f40009",d:"M144.906 163.746l11.978-6.916 20.407 35.346-11.978 6.916z"}),(0,k.Y)("rect",{x:"139.226",y:"154.214",width:"20.172",height:"6.973",rx:"3.486",ry:"3.486",transform:"rotate(-30 149.312 157.7)",fill:"#e6e6e6"})),(0,k.Y)("path",{fill:"#f6bfb1",d:"M171.488 155.28h37.805v23.974h-37.805z"}),(0,k.Y)("path",{d:"M165.956 185.093v64.545h-12.602v-.024c-.406.015-.818.024-1.23.024a32.272 32.272 0 110-64.545c.412 0 .824.01 1.23.025v-.025z",fill:"#711723"}),(0,k.Y)("path",{fill:"#300403",d:"M161.345 185.093h4.918v64.545h-4.918z"}),(0,k.Y)("path",{d:"M113.376 210.296v11.987h-2.34v-.004a6.053 6.053 0 01-.23.004 5.993 5.993 0 110-11.987c.077 0 .154.002.23.005v-.005z",fill:"#f40009"}),(0,k.Y)("g",{fill:"#300403"},(0,k.Y)("circle",{cx:"155.505",cy:"244.106",r:"2.459"}),(0,k.Y)("circle",{cx:"155.505",cy:"190.933",r:"2.459"}),(0,k.Y)("circle",{cx:"155.505",cy:"208.452",r:"2.459"}),(0,k.Y)("circle",{cx:"155.505",cy:"226.586",r:"2.459"})),(0,k.Y)("rect",{className:"blade",x:"113.244",y:"167.266",width:"6.762",height:"98.354",rx:"3.381",ry:"3.381",fill:"#300403"}),(0,k.Y)("path",{d:"M195.154 211.526h34.732a4.918 4.918 0 014.917 4.918 4.918 4.918 0 01-4.917 4.917h-34.732a4.918 4.918 0 01-4.917-4.917 4.918 4.918 0 014.917-4.918z",fill:"#711723"}),(0,k.Y)("g",{fill:"#fff"},(0,k.Y)("rect",{x:"174.148",y:"171.282",width:"15.925",height:"40.192",rx:"7.963",ry:"7.963"}),(0,k.Y)("rect",{x:"188.824",y:"171.282",width:"15.925",height:"40.192",rx:"7.963",ry:"7.963"}),(0,k.Y)("rect",{x:"180.862",y:"167.691",width:"15.925",height:"51.21",rx:"7.963",ry:"7.963",transform:"rotate(-90 188.824 193.296)"}),(0,k.Y)("path",{d:"M161.55 180.896a7.963 7.963 0 016.42-9.252l20.066-3.625a7.963 7.963 0 019.251 6.42 7.963 7.963 0 01-6.42 9.251l-20.066 3.626a7.963 7.963 0 01-9.251-6.42z"}),(0,k.Y)("path",{d:"M183.122 174.543a7.963 7.963 0 019.251-6.42l19.491 3.521a7.963 7.963 0 016.42 9.252 7.963 7.963 0 01-9.251 6.42l-19.491-3.522a7.963 7.963 0 01-6.42-9.25z"})),(0,k.Y)("rect",{x:"167.185",y:"151.899",width:"6.455",height:"27.355",rx:"3.227",ry:"3.227",fill:"#711723"}),(0,k.Y)("rect",{x:"207.449",y:"151.899",width:"6.455",height:"27.355",rx:"3.227",ry:"3.227",fill:"#711723"}),(0,k.Y)("circle",{cx:"190.083",cy:"165.883",r:"3.842",fill:"#e76160"}),(0,k.Y)("circle",{cx:"190.083",cy:"179.868",r:"6.454"}),(0,k.Y)("path",{fill:"#f40009",d:"M167.185 148.21h46.718v7.069h-46.718zM213.903 145.137h-46.718a10.757 10.757 0 0110.757-10.758h25.204a10.757 10.757 0 0110.757 10.758z"}),(0,k.Y)("path",{fill:"#711723",d:"M167.185 143.907h46.718v4.303h-46.718z"}),(0,k.Y)("circle",{cx:"181.016",cy:"146.059",r:"7.377",fill:"#711723"}),(0,k.Y)("circle",{cx:"181.016",cy:"146.059",r:"5.62",fill:"#300403"}),(0,k.Y)("circle",{cx:"200.072",cy:"146.059",r:"7.377",fill:"#711723"}),(0,k.Y)("circle",{cx:"200.072",cy:"146.059",r:"5.62",fill:"#300403"}),(0,k.Y)("path",{d:"M176.713 165.422s2.459-3.995 6.454 0M197.306 165.422s2.459-3.995 6.454 0",fill:"none",stroke:"#000",strokeMiterlimit:"10",strokeWidth:"1.844"}))))}const ti=(0,y.Ay)("rip:debug:DebugViewer"),ai="Elite Datum";function ii(e,t){const a=document.createElement("a");a.setAttribute("href",`data:text/plain;charset=utf-8,${encodeURIComponent(`\ufeff${t}`)}`),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}const ri={name:"17p5hjv",styles:"padding:80px 20px;"},ni={name:"12ej32n",styles:"&,[data-reach-tabs],[data-reach-tab-panels],[data-reach-tab-panel]:not([hidden]){flex-grow:1;display:flex;flex-direction:column;}"},oi={name:"1pfpksj",styles:"display:flex;flex-direction:column;position:relative;flex-grow:1;height:100%;"},si={name:"1ylu0bo",styles:"display:flex;flex-direction:column;flex-grow:1;"};function li(){var e,t,a,r,n;const[o,s]=(0,jt.A)(),l=(0,L.u)("shared_dasProxy"),[d]=(0,P.B)();(0,i.useLayoutEffect)((()=>{const e=document.querySelector("main");e&&!e.style.height&&(e.style.height="calc(100vh - 64px)")}),[]);const{query:c}=(0,G.A)(),u=(0,D.zy)(),{lang:h}=c,p=u.pathname.lastIndexOf("/"),v=decodeURIComponent(u.pathname.substring(p+1)),[y,f]=(0,i.useState)([]),[w,T]=(0,i.useState)([]),{data:I}=(0,aa.Zm)({fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],dispatchTypes:!0,lang:"en"}),{loading:S,error:E,data:C}=(0,we.e)({imageArks:y,fsUserAgentChain:ai,lang:h,dispatch:!0,sort:!0,enableHook:!0,types:I}),{loading:x,error:Y,data:R}=(0,Te.J)({imageArks:[v],fsUserAgentChain:ai}),[O,_]=(0,i.useState)(null),[F,H]=(0,i.useState)(!0),[z,V]=(0,i.useState)(!1),[B,U]=(0,i.useState)(!0),{columnCount:K,images:q}={columnCount:6,images:null!==w&&void 0!==w&&w.length?null===w||void 0===w?void 0:w.map((e=>({id:`image-${e}`,alt:`Image ${e+1}`,src:(0,xe.F)(e,l.isOn),ribbonSrc:(0,xe.Td)(e,l.isOn),ark:e}))):[{id:`image-${v}`,alt:`Image ${v+1}`,src:(0,xe.F)(v,l.isOn),ribbonSrc:(0,xe.Td)(v,l.isOn),ark:v}]},[j,$]=(0,i.useState)(v),[X,ae]=(0,i.useState)(),[ie,oe]=(0,i.useState)(),[se,le]=(0,i.useState)(0),[de,ce]=(0,i.useState)(),[ue,he]=(0,i.useState)(K),[me,ge]=(0,i.useState)(!1),[ve,ye]=(0,i.useState)(!1),fe=null===q||void 0===q?void 0:q.map((e=>({id:e.id,alt:e.alt,src:e.ribbonSrc}))),be=(0,Ae.l)(),Ie=(0,b.A)();(0,i.useEffect)((()=>{if(de){const e=(0,ia.mV)({element:de});(0,ha.eP)(e,s)}}),[de,s]),(0,i.useEffect)((()=>{(async()=>{const{authorized:e}=await(0,N.default)("Elite_Datum","CDSClient_GeneralContext");V(e),U(!1)})()}),[]);const Ee={integ:"integration",prod:"www",beta:"beta"}[null===(e=(0,m.u0)())||void 0===e?void 0:e.split("-")[(null===(t=(0,m.u0)())||void 0===t?void 0:t.split("-").length)-1]];(0,i.useEffect)((()=>{S||x||E||be({type:"BATCH_DISPATCHES",value:[{type:"SET_DATA",value:{currentImageArk:v}},{type:"SET_ACTIONS",value:R}]})}),[be,S,E,null===(a=C.slsData)||void 0===a?void 0:a.imageDatums,null===(r=C.slsData)||void 0===r?void 0:r.elements,C.types,x,R,v]),(0,i.useEffect)((()=>{E&&_(E),Y&&_(Y)}),[Y,E]),(0,i.useEffect)((()=>{(!S&&!x||O)&&H(!1)}),[O,x,S]),(0,i.useEffect)((()=>{f([v]),async function(e){const t=await da(e),a=`${qe.du}/artifact/group/${t}/children`;return ra.Ay.get(a,{headers:qe.b3}).then((async e=>{const{data:t}=e;return t.map((e=>(0,na.XJ)(e)))}))}(v).then((e=>{if(!e)throw new Error("Image Arks Are Null");const t=null===e||void 0===e?void 0:e.findIndex((e=>e===v));t&&le(t);const a=t-1>=0?e[t-1]:null,i=t+1<=(null===e||void 0===e?void 0:e.length)-1?e[t+1]:null;ae(a),oe(i),T(e)})).catch((e=>{_(new Error(`Unable to load group image data. ${e.message}`))}))}),[v]),(0,i.useEffect)((()=>{if(!F&&de&&null!==Ie&&void 0!==Ie&&Ie.images){const e=(0,A.Th)(de,y);e.length&&e.every((e=>!y.includes(e)))&&f([...y,...e])}}),[de,F,y,null===Ie||void 0===Ie?void 0:Ie.images]),(0,i.useEffect)((()=>{Ie.images&&ce((0,A.Qp)(Ie.images,Ie.currentImageArk))}),[Ie.currentImageArk,Ie.images]);const ke=(0,_t.mb)();return ti("Render: ",{zionSlsState:Ie,loading:F,loadingSls:S,loadingActions:x,error:O,errorSls:E,errorActions:Y,data:C,actionDatums:R,imageArks:y,focusedIndex:se,images:q}),z||B?(0,k.Y)(Zt.Ay,{css:ni},(0,k.Y)(Ot.A,{breadcrumbs:j},"Elite Datums"),O&&(0,k.Y)(Q.Ay,{marginY:"nano"},(0,k.Y)(Ft.A,{primaryColor:W.A.danger60},(0,k.Y)(J.Ay,{alignY:"middle",gutters:"nano"},(0,k.Y)(Gt.A,{background:W.A.danger60,color:W.A.gray00,size:"xs"}),(0,k.Y)(te.A,{size:"sm"},"Error loading image data: ",null===O||void 0===O?void 0:O.message)))),(0,k.Y)(Q.Ay,{color:W.A.green30,marginY:"nano",marginX:"nano",maxWidth:"xxl"},ve&&(0,k.Y)("div",{style:{backgroundColor:"red",backgroundImage:"linear-gradient(45deg, white 25%, transparent 25.5%, transparent 50%, white 50.5%, white 75%, transparent 75.5%, transparent)",backgroundSize:"20px 20px",padding:"20px"}},(0,k.Y)("div",{style:{backgroundColor:"white"}},(0,k.Y)(J.Ay,{alignY:"middle",alignX:"start",wrap:!0},(0,k.Y)(Dt.A,{src:Wa,alt:"Elite Datum Logo",maxWidth:"175px",title:"Elite Datum was forged as a name to command respect, embodying the formidable power of this product. It signals not only the unparalleled precision and unique capabilities of the system but also its vast capacity to process and dominate data at scale."}),(0,k.Y)(re.H3,{growX:!0},j,(0,k.Y)(Mt.A,null,"Elite Datum: SLS Debugger"),(0,k.Y)(ne.A,null,(0,k.Y)(M.Ay,{external:!0,wayfinding:!0,to:`/ark:/61903/${v}?view=index`,onClick:e=>{e.preventDefault(),window.open(`/ark:/61903/${v}?view=index`,"_blank")}},`/ark:/61903/${v}?view=index`)))))),!ve&&(0,k.Y)(J.Ay,{alignY:"middle",alignX:"start",wrap:!0},(0,k.Y)(Dt.A,{src:Wa,alt:"Elite Datum Logo",maxWidth:"175px",title:"Elite Datum was forged as a name to command respect, embodying the formidable power of this product. It signals not only the unparalleled precision and unique capabilities of the system but also its vast capacity to process and dominate data at scale."}),(0,k.Y)(re.H3,{growX:!0},j,(0,k.Y)(Mt.A,null,"Elite Datum: SLS Debugger"),(0,k.Y)(ne.A,null,(0,k.Y)(M.Ay,{external:!0,wayfinding:!0,to:`/ark:/61903/${v}?view=index`,onClick:e=>{e.preventDefault(),window.open(`/ark:/61903/${v}?view=index`,"_blank")}},`/ark:/61903/${v}?view=index`))))),(0,k.Y)(Q.Ay,{marginY:"nano",color:W.A.gray03,marginX:"nano",maxWidth:"xxl"},(0,k.Y)(J.Ay,{alignX:"center",gutters:"sm"},(0,k.Y)(J.Ay,{alignX:"start",gutters:"sm"},(0,k.Y)(Z.A,{"data-testid":"debug-viewer-previous-image",disabled:!X,external:!0,to:X&&`/ark:/61903/${X}?view=debug`,Icon:pe.A,iconDirection:"backward",title:X},"Previous Image"),(0,k.Y)(Z.A,{"data-testid":"debug-viewer-next-image",disabled:!ie,external:!0,to:ie&&`/ark:/61903/${ie}?view=debug`,Icon:pe.A,iconAtEnd:!0,title:ie},"Next Image")),(0,k.Y)(ta.default,{growX:!0}),(0,k.Y)(J.Ay,{alignX:"end",gutters:"sm"},(0,k.Y)(ee.A,{Icon:Ut.A,title:"Download Actions JSON",onClick:()=>async function(e){const t=await(0,Se.RS)({partitionKey:e,fsUserAgentChain:ai}),a=JSON.stringify(t,null,2);ii(`${e.replace(/:/g,"_")||"unknown-ark"}-actions.json`,a)}(v)}),(0,k.Y)(ee.A,{Icon:Ut.A,title:"Download Elements JSON",onClick:()=>async function(e){const t=await(0,Se.pr)({partitionKey:e,fsUserAgentChain:ai}),a=JSON.stringify(t,null,2);ii(`${e.replace(/:/g,"_")||"unknown-ark"}.json`,a)}(v)}),(0,k.Y)(ee.A,{Icon:Kt.A,title:"Image ARK Search Results",target:"_blank",external:!0,to:`https://${Ee}.familysearch.org/records/images/search-results?ark=${j}`}),(0,k.Y)(Ht.A,{title:"Holiday Overlay",name:"holiday",checked:ve,onChange:e=>{let{target:t}=e;return ye(t.checked)}})))),(0,k.Y)(Lt.A.Provider,{loading:F,delay:100},(0,k.Y)(Lt.A.Loading,null,(0,k.Y)(J.Ay,{alignX:"center"},(0,k.Y)(g.A,{size:"lg"}))),(0,k.Y)(Lt.A.Ready,{style:{flexGrow:1,display:"flex",flexDirection:"column"}},(0,k.Y)(zt.A,{defaultIndex:"table"===c.mode?2:0},(0,k.Y)(Vt.A,{title:"Element Tree","data-testid":"debug-viewer-tree-tab"},(0,k.Y)(Q.Ay,{marginY:"nano"},(0,k.Y)(Ra,{elements:Ie.elements,actions:null===de||void 0===de?void 0:de.actions,imageArk:v,imageDatums:null===C||void 0===C||null===(n=C.slsData)||void 0===n?void 0:n.imageDatums,fsUserAgentChain:ai}))),(0,k.Y)(Vt.A,{title:"Image Viewer","data-testid":"debug-viewer-image-viewer-tab"},(0,k.Y)(ea.A,{style:{maxWidth:1920,margin:"0 auto",flexGrow:1,width:"100%",display:"flex",flexDirection:"column"}},(0,k.Y)("div",{css:oi},(0,k.Y)("div",{css:si},(0,k.Y)($t.A,{showImageGrid:me,setShowImageGrid:ge,columnCount:ue,setColumnCount:he,focusedIndex:se,setFocusedIndex:le,ImageComponent:Wt.A,images:q,thinganated:!0,controls:(0,k.Y)(i.Fragment,null,(0,k.Y)(Bt.A,{Icon:qt.A,onClick:()=>{var e;navigator.clipboard.writeText(null===q||void 0===q||null===(e=q[se])||void 0===e?void 0:e.ark).then((()=>ke({message:"Copied image ARK to clipboard",type:"success"})),(()=>ke({message:"Failed to copy image ARK to clipboard",type:"error"})))},label:"Copy ARK to clipboard",expanded:!0}))},(0,k.Y)(Xt.N,{state:o,Component:Qt.A})))),!me&&(0,k.Y)(Jt.A,{focusedIndex:se,setFocusedIndex:le,images:fe}))),(0,k.Y)(Vt.A,{title:"History Table","data-testid":"debug-viewer-history-tab"},(0,k.Y)(Q.Ay,{marginY:"nano"},(0,k.Y)(ja,{actions:null===de||void 0===de?void 0:de.actions,arkPath:v,title:j,changeTitle:$})))))),ve&&(0,k.Y)(ei,null)):(0,k.Y)("div",{css:ri},(0,k.Y)(re.H1,{centered:!0,size:"H3"},d("debug-viewer.not-authorized","Not authorized"),(0,k.Y)(ne.A,null,"Please contact the RIP (Patrick Liechty or Larissa Armacost) team via #rip-users channel on Slack to request access.")))}var di=a(71048),ci=a(6085),ui=a(81689),hi=a(99590),pi=a(80902),mi=a(50172),gi=a(4331),vi=a(53738),yi=a(78787),fi=a(29046),bi=a(21928),Ai=a(24009),wi=a(53581),Ti=a(40773),Ii=a(95217),Si=a(14172),Ei=a(81213),ki=a(88789),Ci=a(54518),xi=a(63490),Yi=a(21042),Ni=a(61441);async function Ri(e){const t=await async function(e){var t;const a=null===(t=e.subElements)||void 0===t?void 0:t.find((e=>"NAME"===e.elementType));if(a){const e=new URLSearchParams;if(a.subElements&&a.subElements.forEach((t=>{t.subElements&&t.subElements.forEach((t=>{const a=(0,A.OV)(t);if(a)switch(t.fieldType){case"NAME_GN":e.set("given",a);break;case"NAME_SURN":e.set("surname",a);break;case"NAME_SUF":e.set("suffix",a);break;case"NAME_PRE":e.set("prefix",a)}}))})),e.has("given")||e.has("surname")||e.has("suffix")||e.has("prefix")){const t=o.i18n.language;return e.set("lang",t),e.set("targetLang",t),(await ra.Ay.get(`${qe.zM}/service/standards/name-seg/ws/names?${e.toString()}`,{headers:qe.b3})).data.names[0].fullname}}return null}(e);return{id:e.id,localizedName:t}}var Pi=a(64758);function Oi(e){let{size:t="sm"}=e;const[a]=(0,P.B)();return(0,k.Y)(Ii.A,{label:a("edit-index.person-details.help-tooltip-label","Who the record is about. Example: In a baptismal record, the primary name would be the person who was baptized."),target:(0,k.Y)(Pi.A,{size:t,label:"helpToolTip",name:"helpToolTip"})})}const _i=(0,y.Ay)("rip:R2:LatestChanges");function Fi(e){var t,a,r,n,o;let{change:s,actions:l,t:d,i18n:c}=e;const u=(0,b.A)(),h=d("view-history-other-change-plural","other changes"),p=d("view-history-other-change-singular","other change");return(0,k.Y)(i.Fragment,null,(0,k.Y)(te.A,{size:"sm"},`${(0,Me.xW)(s,l,u.types)}${s.count>0?` + ${s.count} ${s.count>1?h:p}`:""}`),(0,k.Y)(te.A,{size:"xs",secondary:!0},`${null===(t=new Date(null===s||void 0===s||null===(a=s.journalAttribution)||void 0===a?void 0:a.timestamp))||void 0===t?void 0:t.toLocaleDateString(c.language,{year:"numeric",month:"long",day:"numeric"})}${null!==s&&void 0!==s&&null!==(r=s.journalAttribution)&&void 0!==r&&r.userId?` ${d("view-history-by","by")}`:""}`),null!==s&&void 0!==s&&null!==(n=s.journalAttribution)&&void 0!==n&&n.userId?((m=null===s||void 0===s||null===(o=s.journalAttribution)||void 0===o?void 0:o.userId).startsWith("cis.user.")||(m="cis.wkca.MMMM-M932"),(0,k.Y)(De.A,{contact:{cisId:m}})):"");var m}function Di(e){let{count:t}=e;const a=(0,b.A)(),r=(0,je.mS)(),n=(0,A.Qp)(null===a||void 0===a?void 0:a.images,null===a||void 0===a?void 0:a.currentImageArk)||{},o=(0,A.rr)([n],r.selectedPersonId),[s,l]=(0,i.useState)([]),[d,c]=(0,P.B)();return(0,i.useEffect)((()=>{if(0===(null===s||void 0===s?void 0:s.length)&&null!==n&&void 0!==n&&n.actions){const e=(o?(0,$e.QP)(null===n||void 0===n?void 0:n.actions,"personIds",o.id,t):null===n||void 0===n?void 0:n.actions.slice(0,3)).sort(((e,t)=>{var a,i,r,n,o,s,l,d;let c;return c=(null===e||void 0===e||null===(a=e.journalAttribution)||void 0===a?void 0:a.timestamp)>(null===t||void 0===t||null===(i=t.journalAttribution)||void 0===i?void 0:i.timestamp)?1:(null===e||void 0===e||null===(r=e.journalAttribution)||void 0===r?void 0:r.timestamp)<(null===t||void 0===t||null===(n=t.journalAttribution)||void 0===n?void 0:n.timestamp)?-1:(null===e||void 0===e||null===(o=e.journalAttribution)||void 0===o?void 0:o.timestamp)===(null===t||void 0===t||null===(s=t.journalAttribution)||void 0===s?void 0:s.timestamp)&&(null===e||void 0===e?void 0:e.sequenceNumber)>t.sequenceNumber?1:(null===e||void 0===e||null===(l=e.journalAttribution)||void 0===l?void 0:l.timestamp)===(null===t||void 0===t||null===(d=t.journalAttribution)||void 0===d?void 0:d.timestamp)&&e.sequenceNumber<t.sequenceNumber?-1:0,c})).filter((e=>"ADD_SUB"!==e.opCode)).map((e=>({...e,count:0}))).reduce(((e,t)=>{var a,i,r;return(null===(a=e[e.length-1])||void 0===a||null===(i=a.journalAttribution)||void 0===i?void 0:i.timestamp)===(null===t||void 0===t||null===(r=t.journalAttribution)||void 0===r?void 0:r.timestamp)?e[e.length-1].count++:e.push(t),e}),[]),a=e.length>t?e.slice(e.length-t).reverse():e.reverse();a.length>0&&(_i("setChanges: ",a),l(a))}}),[o,t,null===s||void 0===s?void 0:s.length,s,null===n||void 0===n?void 0:n.actions]),_i({count:t,changes:s,currentImage:n,actions:null===n||void 0===n?void 0:n.actions,selectedPerson:o}),0!==s.length&&null!==n&&void 0!==n&&n.actions?(0,k.Y)(i.Fragment,null,(0,k.Y)(oe.A,{marginY:"nano",fullWidth:!0}),(0,k.Y)(re.H3,{size:"H5",supplementary:!0},d("view-history-latest-changes","Latest Changes")),(0,k.Y)(J.Ay,{gutters:"xxl",guttersY:"sm",wrap:!0},s.map((e=>(0,k.Y)(Fi,{noShrinkX:!0,change:e,key:e.id,actions:null===n||void 0===n?void 0:n.actions,t:d,i18n:c}))))):null}function Mi(e){let{children:t,alignY:a}=e;return(0,k.Y)(J.Ay,{gutters:"sm",guttersY:"none",wrap:!0,alignX:"start",alignY:a},t)}const Hi="300PX",Li="10PX";function zi(e){let{children:t,size:a=Hi,indent:i=Li,...r}=e;return(0,k.Y)("div",(0,j.A)({style:{width:a,paddingInlineStart:i,paddingTop:"10PX"}},r),t)}function Vi(e){let{overlay:t,headingText:a,children:r,handleDelete:n,deleteMultipleView:o=!1,count:s=0}=e;const l=e=>{"delete"===e?((0,vi.sx)({event_name:"delete_persons_edit",link_name:"Delete: Delete"}),n()):(0,vi.sx)({event_name:"click_action",link_name:"Delete: Cancel"}),t.close()},[d]=(0,P.B)();return(0,k.Y)(i.Fragment,null,(0,k.Y)(Ze.A,(0,j.A)({},t,{title:a}),r,(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{"data-testid":"delete-overlay-cancel-btton",onClick:()=>l("cancel")},d("common-ui:cancel.action","Cancel")),o&&(0,k.Y)(at.A,{"data-testid":"delete-all",onClick:()=>l("delete"),Icon:xi.A,linkName:"Delete Persons Confirmation"},d("delete-overlay.delete-all.button_plural","Delete ({count})",{count:s})),!o&&(0,k.Y)(at.A,{"data-testid":"delete",onClick:()=>l("delete")},d("delete-overlay.delete.button","Delete"))))))}function Bi(e,t){switch(t.type){case"INIT":return{...e,...t.value};case"PERMISSION":return{...e,header:e.errorHeaders.permission,message:e.errorMessages.permission,retry:!1};case"POOR-QUALITY":return{...e,header:e.errorHeaders.poorQuality,message:e.errorMessages.poorQuality,retry:!1};default:throw new Error(`Unhandled type in ErrorOverlay reducer: ${t.type}`)}}function Gi(e){let{error:t}=e;const[a,r]=(0,i.useReducer)(Bi,{}),n=(0,$.Ay)(),[s]=(0,P.B)();(0,i.useEffect)((()=>{if(!a.errorMessages){const{errorHeaders:e,errorMessages:t}={errorHeaders:{generic:o.i18n.t("indexing-error-overlay.generic.title","An Error Has Occurred"),permission:o.i18n.t("indexing-error-overlay.permission.title","Permission Issue"),poorQuality:o.i18n.t("indexing-error-overlay.poor.quality.title","Poor Image Quality")},errorMessages:{permission:o.i18n.t("indexing-error-overlay.permission.message","You don't currently have permission to perform this action. You may need to refresh or login."),generic:o.i18n.t("indexing-error-overlay.generic.message","Click Retry to have the computer run it again. This report will be automatically sent to FamilySearch."),poorQuality:o.i18n.t("indexing-error-overlay.poor.quality.message","The computer can't read this image because of it's poor quality. Please try a different image.")}};r({type:"INIT",value:{errorHeaders:e,errorMessages:t,message:t.generic,header:e.generic,retry:!0}})}}),[a.errorMessages]),(0,i.useEffect)((()=>{if(t){const{response:e,config:a}=t;a&&a.url.includes("cogsworth")&&r({type:"POOR-QUALITY"}),e&&404===e.status&&r({type:"PERMISSION"}),e&&403===e.status&&r({type:"PERMISSION"}),n.open()}}),[t]);const l=(0,i.useCallback)((e=>{e.currentTarget.disabled=!0,location.reload()}),[]),d=(0,i.useCallback)((e=>{e.currentTarget.disabled=!0,window.history.back()}),[]);return(0,k.Y)(i.Fragment,null,(0,k.Y)(Ze.A,(0,j.A)({title:a.header},n),(0,k.Y)(te.A,null,a.message),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,a.retry&&(0,k.Y)(Z.A,{"data-testid":"cancel-button",onClick:n.close},s("common-ui:cancel.action","Cancel")," "),a.retry&&(0,k.Y)(Z.A,{"data-testid":"retry-button",onClick:e=>l(e),emphasis:"high"},s("indexing-error-overlay.retry.button","Retry")),!a.retry&&(0,k.Y)(Z.A,{"data-testid":"continue-button",onClick:e=>d(e),emphasis:"high"},s("continue.action","Continue"))))))}function Ui(e){let{overlay:t,onDiscard:a,onSave:i,formId:r,disableSave:n}=e;const[o]=(0,P.B)(),s=o("edit-index.save-changes-overlay.header","Unsaved Changes"),l=o("edit-index.save-changes-overlay.content","Save your information before leaving?");return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:s}),l,(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(at.A,{"data-testid":"save-changes-overlay-cancel-button",onClick:a},o("edit-index.save-changes-overlay.discard.button","discard")),(0,k.Y)(Z.A,{"data-testid":"save-changes-overlay-save-button",onClick:i,emphasis:"high",type:"submit",form:r,disabled:n},o("edit-index.save-changes-overlay.save.button","save")))))}function Ki(e,t,a,r,n){const o=(0,i.useCallback)((e=>{const t=[];return e.forEach((e=>{const a=t.find((t=>t.partitionKey===e.partitionKey));a?a.persons.push(e):t.push({partitionKey:e.partitionKey,pageNumber:(null===r||void 0===r?void 0:r.findIndex((t=>t.ark===e.partitionKey)))+1,persons:[e]})})),t}),[r]);return(0,i.useMemo)((()=>{var i;const r=(null===e||void 0===e||null===(i=e.subElements)||void 0===i?void 0:i.filter((e=>"PERSON"===e.elementType&&!t.find((t=>t.otherPersonId===e.id))&&e.id!==n)))||[],s=o(r),l=s.findIndex((e=>e.partitionKey===a));let d;return-1!==l&&(d=s[l]),s.splice(l,1),s.sort(((e,t)=>e.partitionKey===a?1:e.pageNumber-t.pageNumber)),d&&s.unshift(d),s}),[null===e||void 0===e?void 0:e.subElements,o,t,n,a])}var qi=a(39138);const ji={};async function $i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e&&!t)return!1;const a=`${qe.zM}/platform/artifacts/images/permissions`,i={...qe.b3,accept:"application/x-gedcomx-v1+json","content-type":"application/x-gedcomx-v1+json"},r=e?`${h.pc}/pal:/MM9.3.1/${e}`:`${h.pc}/ark:/61903/${t}`,n={sourceDescriptions:[{id:r}]};try{const e=await ra.Ay.post(a,n,{headers:i}),t=null===e||void 0===e?void 0:e.data.sourceDescriptions.find((e=>e.id===r)),o=null===t||void 0===t?void 0:t.rights.find((e=>"http://familysearch.org/v1/Allowed"===e));return Boolean(o)}catch(o){return!1}}function Wi(e,t){const a=(0,qi.R$)(e,t);let i=a?a.id:null;if(!i){const t=e.find((e=>"RECORD"===e.elementType&&/1:2/.test(e.id)));if(t)i=t.id;else{const t=e.find((e=>"PERSON"===e.elementType&&/1:1/.test(e.id)));i=t?t.id:""}}return i}async function Xi(e,t){let a=t;if(/1:[12]/.test(t)||(a=Wi(e,t)),!a)return!1;const i=ji[a];if(i)return i;const r=await(0,Se.GM)(a);return ji[a]=r,r}var Qi=a(71113);function Ji(){const e=(0,b.A)(),t=(0,je.mS)(),[a]=(0,P.B)();return(0,k.Y)(i.Fragment,null,(0,k.Y)(oe.A,{marginY:"nano",fullWidth:!0}),(0,k.Y)(Z.A,{Icon:Qi.A,to:`/ark:/61903/${e.currentImageArk}?view=history${t.selectedPersonId?`&personArk=${t.selectedPersonId}`:""}`},a("view-history-show-change-history-button","Show Change History")))}const Zi=(0,y.Ay)("rip:R2:ViewIndex"),er={name:"i5js84",styles:"padding-inline-start:10px;"};function tr(){return(0,k.Y)(oe.A,{marginY:"nano"})}function ar(e){let{children:t,noPadding:a=!1}=e;return(0,k.Y)("div",{style:{paddingInlineStart:a?"0":"10px"}},t)}function ir(){const[e]=(0,P.B)();return(0,k.Y)("div",{style:{fontStyle:"italic"}},(0,k.Y)(_e.A,{inline:!0,data:e("view-index.no-data-added","None added yet"),heading:""}))}function rr(e){var t,a;let{field:i,value:r}=e;return null===i||void 0===i||!i.typeData||null!==i&&void 0!==i&&null!==(t=i.typeData)&&void 0!==t&&t.displayable||null!==i&&void 0!==i&&null!==(a=i.typeData)&&void 0!==a&&a.editable?(0,k.Y)(zi,null,(0,k.Y)(_e.A,{inline:!0,key:null===i||void 0===i?void 0:i.id,data:`${i.label}: ${r||""}`,heading:""})):null}const nr=(e,t)=>{var a,i;return 1===(null===e||void 0===e||null===(a=e.subElements)||void 0===a?void 0:a.length)&&(null===e||void 0===e?void 0:e.elementType)===(null===t||void 0===t?void 0:t.fieldType)||(null===e||void 0===e||null===(i=e.elementType)||void 0===i?void 0:i.startsWith("NAME_"))};function or(e){let{element:t,onEditClick:a,slsTypes:r,indented:n,disabled:o=!1}=e;const[s]=(0,P.B)();let l="";l="EVENT"===t.elementType?(0,Ni.hW)(t,r):t.label;const d="NAME"===(null===t||void 0===t?void 0:t.elementType)?"edit-essential-information-icon":`edit-${(null===t||void 0===t?void 0:t.eventType)||(null===t||void 0===t?void 0:t.nameType)||(null===t||void 0===t?void 0:t.fieldType)||(null===t||void 0===t?void 0:t.elementType)||"unknown"}-icon`;return(0,k.Y)(i.Fragment,null,(0,k.Y)(J.Ay,{wrap:!1},(0,k.Y)(zi,{indent:"0"},!n&&(0,k.Y)(re.H5,null,l),n&&(0,k.Y)(re.H6,null,l)),(0,k.Y)(ee.A,{disabled:o,Icon:Ei.A,onClick:e=>{a(e)},size:"md","data-testid":d,"aria-label":s("view-index.edit.button.aria-label","Edit {elementType}",{elementType:t.label})})))}function sr(e){var t,a,r,n;let{element:o,onEditClick:s,slsTypes:l,isBottomSheet:d,showPrincipalName:c,hideHeader:u,children:h,disableEditButton:p,indented:m}=e;const[g]=(0,P.B)(),v=(null===o||void 0===o||null===(t=o.subElements)||void 0===t?void 0:t.filter((e=>{var t;return!nr(e,null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t[0])&&(e=>{var t;return null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t.length})(e)})))||[],y=(null===o||void 0===o||null===(a=o.subElements)||void 0===a?void 0:a.filter((e=>{var t;return e.subElements&&nr(e,null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t[0])||"FIELD"===e.elementType})).reduce(((e,t)=>(t.subElements?e=e.concat([...t.subElements]):e.push(t),e)),[]))||[],f=i.useMemo((()=>{var e;return null===l||void 0===l||null===(e=l.names)||void 0===e?void 0:e.map((e=>({value:e.nameType,label:e.displayLabel})))}),[null===l||void 0===l?void 0:l.names]),b="AGE"===(null===o||void 0===o?void 0:o.elementType)||"AGE"===o.fieldType,w="AGE"===(null===o||void 0===o?void 0:o.elementType)&&(null===o||void 0===o||null===(r=o.subElements)||void 0===r?void 0:r[0])||o;return(0,k.Y)(i.Fragment,null,!u&&(0,k.Y)(or,{element:"NAME"!==(null===o||void 0===o?void 0:o.elementType)?o:{...o,label:g("view-index.essential.title","Essential Information")},onEditClick:s,disabled:p,slsTypes:l,isBottomSheet:d,indented:m,growX:!0}),(0,k.Y)(i.Fragment,null,b&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ar,null,(0,k.Y)(Mi,null,(0,k.Y)(rr,{field:w,value:(0,A.OV)(w)})))),!b&&(0,k.Y)(i.Fragment,null,c&&(0,k.Y)(Mi,null,(0,k.Y)(zi,null,(0,k.Y)("div",{style:{display:"flex"}},(0,k.Y)(_e.A,{inline:!0,heading:g("view-index.principal.title","Primary Name")}),(0,k.Y)(Oi,null)))),"NAME"===(null===o||void 0===o?void 0:o.elementType)&&(0,k.Y)(zi,null,(0,k.Y)(re.H6,null,null===(n=(0,A.aw)(f,o))||void 0===n?void 0:n.label)),y&&(0,k.Y)(ar,{noPadding:!0},(0,k.Y)(Mi,null,y.map((e=>"Event Type"===e.label||"NAME"===e.fieldType?null:(0,k.Y)(rr,{field:e,value:(0,A.OV)(e),key:e.id}))),h)),v.map((e=>{var t;return(0,k.Y)("div",{key:e.id},(0,k.Y)(zi,null,"Event Type"!==e.label&&"NAME"!==e.fieldType&&(0,k.Y)(re.H6,{supplementary:!0},`${e.label}`)),(0,k.Y)(ar,null,(0,k.Y)(Mi,null,null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t.map((e=>(0,k.Y)(rr,{key:e.id,field:e,value:(0,A.OV)(e)}))))))})),o.connectedRelationships&&o.connectedRelationships.length>0&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ar,null,(0,k.Y)(zi,{indent:"0"},(0,k.Y)(re.H6,{supplementary:!0},g("view-index.relationships","Relationships"))),(0,k.Y)(Mi,null,o.connectedRelationships.map((e=>(0,k.Y)(rr,{key:e.id,field:{label:e.label},value:e.value})))))),d&&"NAME"!==(null===o||void 0===o?void 0:o.elementType)&&(0,k.Y)(tr,null))))}function lr(e){let{ark:t}=e;return(0,k.Y)(i.Fragment,null,(0,k.Y)(Yi.W1,{ark:t}),(0,k.Y)(oe.A,{marginY:"xs"}))}var dr={name:"h47ual",styles:"position:relative;top:2px;inset-inline-start:2px;"};function cr(e){var t,a,r,n,o,s,l;let{handleDeletePerson:d}=e;const{rip_sharedImageViewer_history_NewLook:c,rip_sharedImageViewer_showEventsTiedToRelationships:u}=(0,L.h)(["rip_sharedImageViewer_history_NewLook","rip_sharedImageViewer_showEventsTiedToRelationships"]),[h]=(0,P.B)(),p=(0,b.A)(),m=(0,Ae.l)(),g=(0,je.mS)(),v=(0,je.vl)(),y=(0,$.Ay)(),{viewIndexOverlay:f,closeAll:w,topMostPanel:T,openOverlay:S,infoSheetOverlay:E,closeOverlay:C}=(0,Ti.HQ)(),x=(0,i.useMemo)((()=>(0,A.Qp)(p.images,p.currentImageArk)),[p.images,p.currentImageArk]),[N,R]=(0,i.useState)(!1),O=(0,A.rr)([x],g.selectedPersonId),_=(0,A.rr)(p.images,null===O||void 0===O?void 0:O.recordId),{removeQuery:F}=(0,G.A)(),D=(null===O||void 0===O||null===(t=O.subElements)||void 0===t?void 0:t.filter((e=>"NAME"===e.elementType)))||[],H=null===(a=(0,A.q5)(O,"RACE_OR_COLOR"))||void 0===a?void 0:a[0],z=null===(r=(0,A.q5)(O,"SEX_CODE"))||void 0===r?void 0:r[0],V=null===O||void 0===O||null===(n=O.subElements)||void 0===n?void 0:n.find((e=>"AGE"===e.elementType)),B=(0,Ie.FA)(O,p.images),U=Ki(_,B,p.currentImageArk,p.thumbnails,g.selectedPersonId),K=(0,i.useMemo)((()=>{var e;return(null===O||void 0===O||null===(e=O.subElements)||void 0===e?void 0:e.filter((e=>"EVENT"===e.elementType)))||[]}),[O]),q=(null===O||void 0===O||null===(o=O.subElements)||void 0===o?void 0:o.filter((e=>(!e.subElements||"FIELD"===e.elementType)&&"SEX_CODE"!==e.fieldType&&"RACE_OR_COLOR"!==e.fieldType&&"AGE"!==e.elementType)))||[],W=(0,Ee.hA)({person:O}),X=(0,Ee.hA)({person:O,oneName:!0}),Q=h("view-index.instructions","Click any edit button to fix the text or highlights."),ie=(0,bi.Y)();(0,i.useEffect)((()=>{let e=!0;return async function(){if(null===O||void 0===O||!O.recordId)return!1;const t=await Xi(x.elements,null===O||void 0===O?void 0:O.recordId);e&&R(t)}(),()=>{e=!1}}),[x,null===O||void 0===O?void 0:O.recordId]),(0,i.useEffect)((()=>{if(O&&!O.localizedName){(async()=>{const e=await Ri(O);m({type:"SET_PERSON_LOCALIZED_NAME",value:{personId:e.id,localizedName:e.localizedName,partitionKey:p.currentImageArk}})})()}}),[O,m,p.currentImageArk]),(0,i.useEffect)((()=>{if(f.isOpen&&"viewIndex"===T()){var e,t;const a=[g.selectedPersonId],i=null===p||void 0===p||null===(e=p.thumbnails)||void 0===e||null===(t=e[g.referenceFocusedIndex])||void 0===t?void 0:t.ark;ie.setDisplayHighlights({mainPartitionKey:p.currentImageArk,elementIds:a}),g.splitScreen&&i&&ie.setDisplayHighlights({splitScreenPartitionKey:i,elementIds:a})}}),[g.referenceFocusedIndex,g.selectedPersonId,g.splitScreen,T,f.isOpen,p.currentImageArk,null===p||void 0===p?void 0:p.thumbnails]);const{restrictedFields:ne}=Y(),oe=null===ne||void 0===ne?void 0:ne.includes(I.NAME),se=null===ne||void 0===ne?void 0:ne.includes(I.RACE),le=null===ne||void 0===ne?void 0:ne.includes(I.SEX),de=oe&&se&&le,ce=null===ne||void 0===ne?void 0:ne.includes(I.RELATIONSHIPS),ue=null===ne||void 0===ne?void 0:ne.includes(I.EVENTS),he=null===ne||void 0===ne?void 0:ne.includes(I.AGE),pe=null===ne||void 0===ne?void 0:ne.includes(I.OTHER),me=null===ne||void 0===ne?void 0:ne.includes(I.ADD_REMOVE_PERSON),ge=(0,Ie.XE)(O),ve=(0,i.useMemo)((()=>(0,Ie.FA)(O,p.images,!1)),[O,p.images]),ye=(0,i.useMemo)((()=>{const e=[...K,...ge];return u.isOn?e.map((e=>{const t=ve.filter((t=>{var a;return null===(a=e.superElements)||void 0===a?void 0:a.some((e=>e.id===t.id))}));return{...e,connectedRelationships:t}})):K}),[K,ge,ve,u]);return Zi("ViewIndex Render: ",{recordPermissions:N,eventFields:K,types:p.types,otherFields:q,selectedPerson:O,nameElements:D,raceOrColor:H,age:V,sexCode:z,relationshipFields:B,nonDisplayableFields:q.filter((e=>{var t;return!(null!==e&&void 0!==e&&null!==(t=e.typeData)&&void 0!==t&&t.displayable)})),selectedPerson_subElements:null===O||void 0===O?void 0:O.subElements,zionSlsState:p,r2State:g}),(0,k.Y)(hi.A,(0,j.A)({title:h("view-index.title","View {name}",{name:W}),headingColor:"blue"},f,{close:()=>{C("viewIndex"),F("personArk"),v({type:"SET_SELECTED_PERSON_ID",value:null})}}),(0,k.Y)(St.A,null,(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(J.Ay,{wrap:!1},(0,k.Y)(re.H5,null,(0,k.Y)(i.Fragment,null,!N&&(0,k.Y)(i.Fragment,null,W),N&&(0,k.Y)(Ii.A,{label:h("view-index.given-name.link.tool-tip","View Record Details Page"),target:(0,k.Y)(M.Ay,{external:!0,wayfinding:!0,to:`/ark:/61903/${null===O||void 0===O?void 0:O.id}`,onClick:e=>{e.preventDefault(),window.open(`/ark:/61903/${null===O||void 0===O?void 0:O.id}`,"_blank")}},W,(0,k.Y)(Kt.A,{size:"xs",css:dr}))})))),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(te.A,{size:"xs"},Q),(0,k.Y)(ae.A,{size:"xxs"})),(0,k.Y)(ae.A,{size:"xs"}),(null===O||void 0===O?void 0:O.superElements)&&(0,k.Y)(lr,{ark:`/ark:/61903/${null===O||void 0===O?void 0:O.id}`}),(null===O||void 0===O?void 0:O.id)&&(0,k.Y)(i.Fragment,null,D&&(0,k.Y)(i.Fragment,null,D.map(((e,t)=>(0,k.Y)(sr,{element:e,key:e.id,onEditClick:()=>{S("editEssentialInfo"),(0,vi.sx)({event_name:"click_action",link_name:"Edit: Essential Info: Open"});const e=(0,$e.Vs)();v({type:"SET_STATE",value:{addedSexId:e}})},disableEditButton:de,slsTypes:p.types,isBottomSheet:null===E||void 0===E?void 0:E.isBottomSheet,showPrincipalName:0===t&&O.primary,hideHeader:0!==t,growX:!0})))),(!D||0===D.length)&&(0,k.Y)(or,{element:{label:h("view-index.essential.title","Essential Information"),elementType:"NAME"},disabled:de,onEditClick:()=>{S("editEssentialInfo"),(0,vi.sx)({event_name:"click_action",link_name:"Edit: Essential Info: Open"})},isBottomSheet:null===E||void 0===E?void 0:E.isBottomSheet}),(H||z)&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(zi,null,(0,k.Y)(re.H6,null,`${h("view-index.more-info.title","More Information")}`)),(0,k.Y)(ar,null,(0,k.Y)(Mi,null,H&&(0,k.Y)(rr,{field:H,value:(0,A.OV)(H)}),z&&(0,k.Y)(rr,{field:z,value:(0,A.J1)(z,h)})))),(null===E||void 0===E?void 0:E.isBottomSheet)&&(0,k.Y)(tr,null),V&&(null===(s=V.subElements)||void 0===s?void 0:s.length)>0&&(0,k.Y)(sr,{element:V,onEditClick:()=>{S("editAge"),(0,vi.sx)({event_name:"click_action",link_name:"Edit: Age: Open"})},disableEditButton:he,isBottomSheet:null===E||void 0===E?void 0:E.isBottomSheet,growX:!0}),(!V||!(null!==(l=V.subElements)&&void 0!==l&&l.length))&&(0,k.Y)(i.Fragment,null,(0,k.Y)(or,{element:{label:h("view-index.age.title","Age"),elementType:"age"},disabled:he,onEditClick:()=>{S("editAge"),(0,vi.sx)({event_name:"click_action",link_name:"Edit: Age: Open"})}}),(0,k.Y)(ar,null,(0,k.Y)(zi,null,(0,k.Y)(ir,null)))),(0,k.Y)(or,{element:{label:h("view-index.relationships.title","Relationships"),elementType:"relationships"},disabled:ce,onEditClick:()=>{S("editRelationships"),(0,vi.sx)({event_name:"click_action",link_name:"Edit: Relationships: Open"})}}),(null===B||void 0===B?void 0:B.length)>0&&(0,k.Y)(ar,null,(0,k.Y)(Mi,null,B.map((e=>e&&(0,k.Y)(rr,{key:e.id,field:e,value:e.value}))))),0===(null===B||void 0===B?void 0:B.length)&&(0,k.Y)(ar,null,(0,k.Y)(zi,null,(0,k.Y)(ir,null))),U.length>0&&(0,k.Y)(i.Fragment,null,(0,k.Y)(zi,null,(0,k.Y)(re.H6,null,h("view-index.others-on-this-record","Others on This Record"))),U.map((e=>(0,k.Y)(ar,{key:e.pageNumber},e.partitionKey!==p.currentImageArk&&(0,k.Y)(i.Fragment,null,(0,k.Y)(te.A,{size:"xs"},h("relationships.names-on-page-n.label","Names on Page {pageNumber}",{pageNumber:e.pageNumber})),(0,k.Y)(Z.A,{Icon:ki.A,emphasis:"medium",onClick:()=>v({type:"OPEN_SPLIT_SCREEN_TO_PAGE",value:e.pageNumber})},h("relationships.view-in-context","View in Context"))),(0,k.Y)(Mi,{style:{paddingInlineStart:"10PX"}},e.persons.map((e=>(0,k.Y)(zi,{key:e.id},(0,k.Y)(_e.A,{inline:!0,data:(0,Ee.hA)({person:e}),heading:""}))))))))),(null===E||void 0===E?void 0:E.isBottomSheet)&&(0,k.Y)(tr,null),(0,k.Y)(i.Fragment,null,ye.length>0&&(0,k.Y)(i.Fragment,null,(0,k.Y)(zi,{indent:"0"},(0,k.Y)(re.H5,null,h("view-index.events","Events"))),(0,k.Y)("div",{css:er},ye.map(((e,t)=>(0,k.Y)(sr,{element:e,onEditClick:()=>{S("eventPanel"),(0,vi.sx)({event_name:"click_action",link_name:"Edit: Events: Open"}),v({type:"SET_ACTIVE_ELEMENT_ID",value:e.id})},disableEditButton:ue,slsTypes:p.types,isBottomSheet:null===E||void 0===E?void 0:E.isBottomSheet,growX:!0,key:e.id,"data-testid":`edit-event-${t}`,indented:!0}))),(0,k.Y)(J.Ay,null,(0,k.Y)(zi,{indent:"0"},(0,k.Y)(re.H6,null,h("view-index.event","Event"))),(0,k.Y)(ee.A,{"data-testid":"add-event-button",disabled:ue,onClick:()=>{v({type:"SET_ACTIVE_ELEMENT_ID",value:"addingEvent"}),S("eventPanel")},Icon:Ci.A})),(0,k.Y)(ar,null,(0,k.Y)(zi,null,(0,k.Y)(_e.A,{inline:!0,data:h("view-index.add-event","Add new event"),heading:""}))))),0===ye.length&&(0,k.Y)(i.Fragment,null,(0,k.Y)(sr,{element:{label:h("view-index.events","Events"),elementType:"events"},onEditClick:()=>{S("eventPanel"),(0,vi.sx)({event_name:"click_action",link_name:"Edit: Events: Open"}),v({type:"SET_ACTIVE_ELEMENT_ID",value:"addingEvent"})},disableEditButton:ue||ce,slsTypes:p.types,isBottomSheet:null===E||void 0===E?void 0:E.isBottomSheet,growX:!0,"data-testid":"add-event"}),(0,k.Y)(ar,null,(0,k.Y)(zi,null,(0,k.Y)(ir,null))))),(0,k.Y)(or,{element:{label:h("view-index.additional-fields.title","Additional Fields"),elementType:"other-fields"},disabled:pe,onEditClick:()=>{S("editOtherFields"),(0,vi.sx)({event_name:"click_action",link_name:"Edit: Other Fields: Open"})}}),q.length>0&&(0,k.Y)(Mi,null,q.filter((e=>"MISC_IMAGE_FOLDER_1950_CENSUS"!==(null===e||void 0===e?void 0:e.fieldType)&&"IMAGE_DIMENSIONS"!==(null===e||void 0===e?void 0:e.fieldType))).map((e=>{var t;return e&&(null===e||void 0===e||null===(t=e.typeData)||void 0===t?void 0:t.displayable)&&(0,k.Y)(rr,{key:e.id,field:e,value:(0,A.OV)(e)})}))),0===q.length&&(0,k.Y)(ar,null,(0,k.Y)(zi,null,(0,k.Y)(ir,null))),!c.isOn&&(0,k.Y)(Di,{count:3}),(0,k.Y)(Ji,null),(0,k.Y)(J.Ay,null,(0,k.Y)(Si.A,{disabled:me,"data-testid":"delete-individual-person-button",emphasis:"low",color:"red",Icon:xi.A,onClick:()=>{y.handleClick()}},h("remove-person.delete-individual-button.text","Delete {name}",{name:X}))),(0,k.Y)(Vi,{overlay:y,headingText:h("remove-person.delete-individual-overlay.heading-text","Delete {name}",{name:W}),handleDelete:()=>{const e=function(){var e;const t=(0,A.rr)(p.images,O.recordId),a=null===t||void 0===t||null===(e=t.subElements)||void 0===e?void 0:e.filter((e=>"PERSON"===(null===e||void 0===e?void 0:e.elementType)&&!e.isDangling));return 1===(null===a||void 0===a?void 0:a.length)&&a[0].id===O.id?[t.id]:[]}();d(g.selectedPersonId,e),w()}},(0,k.Y)(i.Fragment,null,h("remove-person.delete-individual-overlay.content-text","Deleting {name} will remove this person and all of their content. Undo this action through this individual's Change History in the record.",{name:W})))))}var ur=a(59794),hr=a(19806),pr=a(6706),mr=a(70829),gr=a(70596),vr=a(30182);const yr="H5";function fr(e){let{heading:t,caption:a,headingSize:i=yr}=e;return(0,k.Y)(It.A,{top:!0},(0,k.Y)("div",{style:{transform:"scaleY(-1)"}},(0,k.Y)(oe.A,{fullWidth:!0})),(0,k.Y)(Q.Ay,{color:W.A.gray02,marginX:"xs",maxWidth:"xxl"},(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(re.H5,{size:i},t),(0,k.Y)(ae.A,{size:i!==yr?"xxs":"xs"}),(0,k.Y)(te.A,{size:"xs"},a),(0,k.Y)(ae.A,{size:"xxs"})))}function br(e){var t,a;let{fieldName:r="",addedSexCode:n={},person:o={},handleOnFocus:s=()=>{},handleOnBlur:l=()=>{},handleOnChange:d=()=>{}}=e;if((null===o||void 0===o||!o.id)&&(null===n||void 0===n||!n.id))throw Error("FormStandardizedSexField requires a person or addedSexCode");const[c]=(0,P.B)(),u=Boolean(null===n||void 0===n?void 0:n.id),h=null!==n&&void 0!==n&&n.id?n:null===(t=(0,A.q5)(o,"SEX_CODE"))||void 0===t?void 0:t[0];if(!h)throw Error("FormStandardizedSexField requires a sexField. You probably forgot to pass in an addedSexCode if the person has no sex field.");const p=u||(null===h||void 0===h||null===(a=h.typeData)||void 0===a?void 0:a.editable),m=(e=>{const t=(0,A.El)(e);return[{key:A.HV,primaryText:t.unknown},{key:A.K6,primaryText:t.male},{key:A.Vk,primaryText:t.female}]})(c),g=c("edit-essential-info.sex-code","Sex");return(0,k.Y)(i.Fragment,null,h&&(0,k.Y)(mr.eP,{name:r,"data-testid":"sex-field",label:(null===h||void 0===h?void 0:h.displayLabel)||g,suggestions:m,onFocus:s,onBlur:l,onChange:d,disabled:!p,warningValidate:e=>e&&null!==e&&void 0!==e&&e.key?null:c("standardizedSexField.validation.warning","No Standard Selected"),validMessage:c("standardizedSexField.validation.success","Standard Sex")}))}var Ar=a(37593);const wr={name:"tyatln",styles:"margin-top:-0.5rem;margin-inline-end:0;margin-bottom:0.5rem;margin-inline-start:0.5rem;"},Tr=e=>{var t;let{field:a,editingSharedFieldHighlights:r,onClick:n=()=>{},disabled:o,buttonProps:s}=e;const[l]=(0,P.B)(),{restrictedFields:d}=Y(),c=null===d||void 0===d?void 0:d.includes(I.HIGHLIGHTS),{openOverlay:u}=(0,Ti.HQ)(),h=(0,ur.Hj)(),{setActiveFieldInfo:p,getHighlights:m}=(0,bi.Y)(),g=(0,i.useMemo)((()=>m().mainEditHighlights.find((e=>e.fieldId===(null===a||void 0===a?void 0:a.id)))),[m,null===a||void 0===a?void 0:a.id]),v=(null===a||void 0===a||null===(t=a.subElements)||void 0===t?void 0:t[0])||a,y=(0,i.useCallback)((()=>{const{getValues:e}=h||{},{id:t,name:a,value:i}=v;if(e){const i=e(),r=i[t]||i[a];if(null!==r&&void 0!==r&&r.originalText||null!==r&&void 0!==r&&r.standard||"string"===typeof r||null!==r&&void 0!==r&&r.primaryText&&"SEX_CODE"===v.fieldType)return r}return i||""}),[v,h]);return(0,k.Y)("div",{css:wr},(0,k.Y)(Z.A,(0,j.A)({"data-testid":"edit-highlight-button",disabled:r||c||o,Icon:Ar.A,iconSize:"lg",linkName:g?"Edit Highlight":"Add Highlight",onClick:e=>{(0,vi.sx)({event_name:"click_action",link_name:"Highlight: Open"}),n(a,e),p({...v,value:y()}),u("highlightsPanel")}},s),g?l("edit-index.edit-highlight.button","Edit Highlight"):l("edit-index.add-highlight.button","Add Highlight")))},Ir=(0,y.Ay)("rip:R2:AddPerson");function Sr(e){var t;let{handleSubmit:a,saving:r}=e;const{addPersonOverlay:n,editHighlightsOverlay:o,topMostPanel:s,closeOverlay:l}=(0,Ti.HQ)(),d=(0,b.A)(),c=(0,je.mS)(),u=(0,je.vl)(),[h]=(0,P.B)(),[p,m]=(0,i.useState)(),[g,v]=(0,i.useState)(),[y,f]=(0,i.useState)(),{displayHighlightsApi:A}=(0,je.Z0)(),w=(0,Me.ti)({elementType:"FIELD",fieldType:"NAME_GN"},null===d||void 0===d?void 0:d.types,h("type-unknown.label","<Unknown Type>")),T=(0,Me.ti)({elementType:"FIELD",fieldType:"NAME_SURN"},null===d||void 0===d?void 0:d.types,h("type-unknown.label","<Unknown Type>")),I=h("edit-essential-info.sex-code","Sex"),S=vr.Ik().shape({}),E=(0,ur.SV)({mode:"all",resolver:(0,gr.t)(S),defaultValues:{givenCheckbox:!1,givenField:"",surnameCheckbox:!1,surnameField:"",sexField:"",givenNameFieldId:null,surnameFieldId:null,sexFieldId:null,nameType:"BIRTH_NAME"}}),[C,x,Y,N,R,O,_,F]=(0,hr.FH)({name:["givenCheckbox","givenField","surnameCheckbox","surnameField","givenNameFieldId","surnameFieldId","sexFieldId","nameType"],control:E.control}),{reset:D,setValue:M}=E,H=(0,i.useMemo)((()=>{var e,t;return null===(e=d.types)||void 0===e||null===(t=e.names)||void 0===t?void 0:t.map((e=>({value:e.nameType,label:e.displayLabel})))}),[null===(t=d.types)||void 0===t?void 0:t.names]);(0,i.useEffect)((()=>{n.isOpen&&(D(),M("givenNameFieldId",(0,$e.Vs)()),M("surnameFieldId",(0,$e.Vs)()),M("sexFieldId",(0,$e.Vs)()))}),[n.isOpen,D,M]);const L=(0,i.useCallback)((e=>c.editHighlights.find((t=>t.fieldId===e))||c.referenceEditHighlights.find((t=>t.fieldId===e))),[c.editHighlights,c.referenceEditHighlights]);(0,i.useEffect)((()=>{null!==n&&void 0!==n&&n.isOpen&&"addPersonPage1"===s()&&!o.isOpen&&((0,ha.eP)(c.editHighlights.filter((e=>["NAME_SURN","NAME_SUF","NAME_GN","SEX_CODE"].includes(e.fieldType))).filter((e=>e.personIds.length>0)).filter((e=>(null===e||void 0===e?void 0:e.imageId)===d.currentImageArk)),A),c.splitScreen&&(0,ha.eP)(c.referenceEditHighlights.filter((e=>["NAME_SURN","NAME_SUF","NAME_GN","SEX_CODE"].includes(e.fieldType))).filter((e=>e.personIds.length>0)).filter((e=>{var t;return(null===e||void 0===e?void 0:e.imageId)===(null===(t=d.images[c.referenceImageIndex])||void 0===t?void 0:t.ark)})),A))}),[null===n||void 0===n?void 0:n.isOpen,A,o.isOpen,u,c.activeFieldId,c.editHighlights,c.referenceEditHighlights,c.referenceImageIndex,c.splitScreen,d.currentImageArk,d.images,s]);const z=F&&(x||N);return Ir("Render: ",{state:d,enableSave:z}),(0,k.Y)(hi.A,(0,j.A)({},n,{close:()=>{l("addPersonPage1"),u({type:"REVERT_HIGHLIGHTS",value:{}})},headingColor:"purple",title:h("add-person.panel-back","Back"),footer:(0,k.Y)(J.Ay,{alignX:"end",gutters:"md"},(0,k.Y)(Z.A,{linkName:"Add Person Cancel","data-testid":"panel-cancel-button",emphasis:"low",disabled:r,onClick:()=>{l("addPersonPage1")}},h("edit-shared-surname-footer.cancel","Cancel")),(0,k.Y)(Z.A,{linkName:"Add Person Next","data-testid":"panel-forward-button",emphasis:"high",disabled:r||!z,form:"add-person-form",type:"submit"},h("edit-shared-surname-footer.next","Next")))}),(0,k.Y)(pr.Ay,{id:"add-person-form",methods:E,onSubmit:a},(0,k.Y)(fr,{heading:h("add-person.panel-heading","Add Name"),caption:h("add-person.caption","Select a name part to continue.")}),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(_e.A,{heading:h("add-person.subtitle","Select and fill out a name part to continue."),data:h("add-person.body-text","Must have at least one name part and a highlight.")}),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(mr.FX,{label:h("add-person.name-type-select","Name Type"),placeholder:h("add-person.name-type-select","Name Type"),name:"nameType",options:H}),!p&&(0,k.Y)(J.Ay,null,(0,k.Y)(Si.A,{"data-testid":"add-given-name",Icon:Ci.A,color:"blue",emphasis:"low",onClick:()=>m({id:R,label:w,fieldType:"NAME_GN",name:"givenField"})},h("add-person.add-given-name","Add given name"))),p&&(0,k.Y)(Ne.A,{initiallyOpen:!0},(0,k.Y)(Re.A,null,w),(0,k.Y)(Pe.A,null,(0,k.Y)(mr.YJ,{"data-testid":"addPersonNameField0",name:"givenField",label:w,placeholder:w,maxLength:256}),(0,k.Y)(Tr,{field:p,disabled:C},h("add-person.highlight-button","Add Highlight")),(0,k.Y)(mr.cG,{"data-testid":"addPersonNoHighlightPossible0",label:h("highlight-required-checkbox-label","No highlight possible"),name:"givenCheckbox",disabled:L(R)}),(0,k.Y)(Si.A,{"data-testid":"delete-given-name",color:"red",Icon:xi.A,emphasis:"low",onClick:()=>{m(null),E.setValue("givenField","")}},h("add-person.remove-given-name","Remove given name")))),!g&&(0,k.Y)(J.Ay,null,(0,k.Y)(Si.A,{"data-testid":"add-surname",Icon:Ci.A,color:"blue",emphasis:"low",onClick:()=>v({id:O,label:T,fieldType:"NAME_SURN",newPersonId:"",name:"surnameField"})},h("add-person.add-surname","Add surname"))),g&&(0,k.Y)(Ne.A,{initiallyOpen:!0},(0,k.Y)(Re.A,null,T),(0,k.Y)(Pe.A,null,(0,k.Y)(mr.YJ,{"data-testid":"addPersonNameField1",name:"surnameField",label:T,placeholder:T,maxLength:256}),(0,k.Y)(Tr,{field:g,disabled:Y},h("add-person.highlight-button","Add Highlight")),(0,k.Y)(mr.cG,{"data-testid":"addPersonNoHighlightPossible1",label:h("highlight-required-checkbox-label","No highlight possible"),name:"surnameCheckbox",disabled:L(O)}),(0,k.Y)(Si.A,{"data-testid":"delete-surname",color:"red",Icon:xi.A,emphasis:"low",onClick:()=>{v(null),E.setValue("surnameField","")}},h("add-person.remove-surname","Remove surname")))),!y&&(0,k.Y)(J.Ay,null,(0,k.Y)(Si.A,{"data-testid":"add-sex",Icon:Ci.A,color:"blue",emphasis:"low",onClick:()=>f({id:_,label:I,fieldType:"SEX_CODE",elementType:"FIELD",name:"sexField"})},h("add-person.add-sex","Add Sex"))),y&&(0,k.Y)(Ne.A,{initiallyOpen:!0},(0,k.Y)(Re.A,null,I),(0,k.Y)(Pe.A,null,(0,k.Y)(br,{fieldName:y.name,person:c.selectedPerson,addedSexCode:y,key:y.id}),(0,k.Y)(Si.A,{"data-testid":"delete-sex",color:"red",Icon:xi.A,emphasis:"low",onClick:()=>{f(null),E.setValue("sexField","")}},h("add-person.remove-sex","Remove Sex"))))))}var Er=a(29762);const kr=(0,y.Ay)("rip:R2:AddPerson");function Cr(e){let{handleSubmit:t,saving:a,givenFieldValue:r,surnameFieldValue:n}=e;const{addPersonPage2Overlay:o,editHighlightsOverlay:s,topMostPanel:l,closeOverlay:d}=(0,Ti.HQ)(),c=(0,Er.pm)("https://www.familysearch.org/en/help/helpcenter/article/what-is-a-record-type"),u=(0,b.A)(),h=(0,je.mS)(),p=(0,je.vl)(),[m]=(0,P.B)(),{displayHighlightsApi:g}=(0,je.Z0)(),v=vr.Ik().shape({}),y=(0,ur.SV)({mode:"all",resolver:(0,gr.t)(v),defaultValues:{recordType:null}}),[f]=(0,hr.FH)({name:["recordType"],control:y.control});(0,i.useEffect)((()=>{null!==o&&void 0!==o&&o.isOpen&&"addPersonPage2"===l()&&!s.isOpen&&(0,ha.eP)(h.editHighlights.filter((e=>["NAME_SURN","NAME_SUF","NAME_GN"].includes(e.fieldType))).filter((e=>e.personIds.length>0)).filter((e=>(null===e||void 0===e?void 0:e.imageId)===u.currentImageArk)).filter((e=>null===e||void 0===e?void 0:e.personIds.includes(h.selectedPersonId))),g)}),[null===o||void 0===o?void 0:o.isOpen,g,s.isOpen,p,h.activeFieldId,h.editHighlights,h.selectedPersonId,u.currentImageArk,l]);const A=(0,i.useMemo)((()=>(0,$e.Zw)(u.types,null===u||void 0===u?void 0:u.images,null===u||void 0===u?void 0:u.currentImageArk,m)),[null===u||void 0===u?void 0:u.currentImageArk,null===u||void 0===u?void 0:u.images,u.types,m]),w=null===f||void 0===f?void 0:f.key,T=`${r} ${n}`.trim()||m("get-person-full-name.unknown","<Unknown>");return kr("Render: ",{state:u,enableSave:w}),(0,k.Y)(i.Fragment,null,(0,k.Y)(hi.A,(0,j.A)({},o,{headingColor:"purple",title:m("add-person.panel-back","Back"),footer:(0,k.Y)(J.Ay,{alignX:"end",gutters:"md"},(0,k.Y)(Z.A,{linkName:"Add Person Back","data-testid":"panel-back-button",emphasis:"low",type:"submit",form:"",onClick:()=>{d("addPersonPage2")},disabled:a},m("edit-shared-surname-footer.back","Back")),(0,k.Y)(Z.A,{linkName:"Add Person Save","data-testid":"panel-forward-button",emphasis:"high",disabled:a||!w,form:"add-person-form-page-2",type:"submit"},m("edit-shared-surname-footer.save","Save")))}),(0,k.Y)(pr.Ay,{id:"add-person-form-page-2",methods:y,onSubmit:t},(0,k.Y)(fr,{heading:m("add-person.panel-heading","Add Name"),caption:m("add-person.page-2-caption","Select a record type for the new name.")}),(0,k.Y)(_e.A,{heading:"",data:m("add-person.page-2-subtitle","We're creating a new record for {name}. What is the record type?",{name:T})}),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(mr.eP,{"data-testid":"recordTypeAutosuggest",name:"recordType",label:m("add-person.new-record-type-prompt","Record Type"),placeholder:m("add-person.new-record-type-prompt","Record Type"),clearOnClickAway:!0,suggestions:A,helpMessage:(0,k.Y)(i.Fragment,null,m("add-person.what-are-record-types","What are record types? "),(0,k.Y)(Z.A,{ref:c.targetRef,onClick:e=>{e.stopPropagation(),c.handleClick()}},m("add-person.learn-more","Learn More"))),sortFunction:$e.mo}))))}const xr=(0,y.Ay)("rip:R2:AddPerson");function Yr(){const{rip_sharedImageViewer_saveChanges:e,rip_sharedImageViewer_sls_actions_splunk_debugger:t}=(0,L.h)(["rip_sharedImageViewer_saveChanges","rip_sharedImageViewer_sls_actions_splunk_debugger"]),{closeOverlay:a,openOverlay:r,addPersonOverlay:n}=(0,Ti.HQ)(),o=(0,b.A)(),s=(0,je.mS)(),l=(0,je.vl)(),d=(0,Ae.l)(),[c]=(0,P.B)(),[u,h]=(0,i.useState)([]),[p,m]=(0,i.useState)(null),[g,v]=(0,i.useState)(),[y,f]=(0,i.useState)(),[w,T]=(0,i.useState)(),[I,S]=(0,i.useState)(),[E,C]=(0,i.useState)(),[x,Y]=(0,i.useState)(),[N,R]=(0,i.useState)(),[O,_]=(0,i.useState)(),[F,D]=(0,i.useState)(),[M,H]=(0,i.useState)();(0,i.useEffect)((()=>{if((null===u||void 0===u?void 0:u.length)>0){const e=u.find((e=>{var t;return"RECORD"===(null===(t=e.value)||void 0===t?void 0:t.elementType)})),t=e.value.id||e.value.superId,i=o.images.reduce(((e,t)=>(t.subElements&&t.subElements.forEach((t=>e.push({type:"SET_RECORD_PERSON_IDS",value:null===t||void 0===t?void 0:t.id}))),e)),[]);i.push({type:"SET_RECORD_PERSON_IDS",value:t}),d({type:"BATCH_DISPATCHES",value:t?u.concat(i):u}),l({type:"NAV_SELECT_TO_VIEW",value:{personId:p,recordId:t}}),a("addPersonPage1"),a("addPersonPage2"),r("viewIndex"),h([])}}),[d,u,p,a,r,l,o.images]);return(0,i.useEffect)((()=>{let e=!0;return(0,Se.XM)("person").then((t=>{e&&(m(t),l({type:"SET_SELECTED_PERSON_ID",value:t}))})).catch((e=>{v(e)})),()=>{e=!1}}),[l,null===n||void 0===n?void 0:n.isOpen]),xr("Render: ",{state:o}),(0,k.Y)(i.Fragment,null,(0,k.Y)(Sr,{handleSubmit:e=>{S(e.givenField),C(e.surnameField),R(e.givenNameFieldId),Y(e.sexField),_(e.surnameFieldId),D(e.sexFieldId),H(e.nameType),r("addPersonPage2"),(0,vi.sx)({event_name:"click_action",link_name:"Add: Next"})},saving:w}),(0,k.Y)(Cr,{handleSubmit:a=>{(0,vi.sx)({event_name:"add_person_edit",link_name:"Add: Save"}),T(!0);const i={comment:"",reasonId:"",app:qe.zQ},r=o.currentImageArk,n={partitionKey:r,givenNameFieldId:N,surnameFieldId:O,nameType:M,sexFieldId:F};I&&(n.givenNameFieldValue=(0,Je.cN)(I,i)),E&&(n.surnameFieldValue=(0,Je.cN)(E,i)),x&&(n.sexFieldValue=(0,Je.cN)(x.primaryText,i)),n.primaryPerson=!1,(0,Se.XM)("record").then((i=>{var l,d,c,u,m,g;n.recordId=i,n.personId=p;let v=[{type:"CREATE_ELEMENT",value:{elementType:"RECORD",partitionKey:r,id:i,extraArgs:{recordType:a.recordType.key}}},{type:"ADD_SUB",value:{superPartitionKey:r,subPartitionKey:r,superId:r,subId:i,elementType:"IMAGE"}},...(0,Ai.e9)(n)];v=v.concat((0,Ai.Aq)(o.images,o.currentImageArk,s.editHighlights)),v=v.concat((0,Ai.Aq)(o.images,o.currentImageArk,s.referenceEditHighlights));const y=null===(l=v.find((e=>{var t;return"CREATE_ELEMENT"===e.type&&"NAME_GIVEN"===(null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.elementType)})))||void 0===l||null===(d=l.value)||void 0===d?void 0:d.id,b=null===(c=v.find((e=>{var t;return"CREATE_ELEMENT"===e.type&&"NAME_SURNAME"===(null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.elementType)})))||void 0===c||null===(u=c.value)||void 0===u?void 0:u.id,w=null===(m=v.find((e=>{var t;return"CREATE_ELEMENT"===e.type&&"SEX_CODE"===(null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.elementType)})))||void 0===m||null===(g=m.value)||void 0===g?void 0:g.id;v=v.concat(((e,t,a)=>{const i=[];return s.editHighlights.filter((e=>"edit"===e.change)).forEach((r=>{var n;const s=o.types.fields.find((e=>e.fieldType===r.fieldType)),l=!(null!==s&&void 0!==s&&s.singleSuper),d=!(null!==(n=o.types.elements.find((e=>e.elementType===s.elementTypes[0])))&&void 0!==n&&n.singleSuper);if(l||d){var c,u,h;const n=(0,A.rr)(o.images,r.originalHighlight.fieldId);let s=n;null!==(c=s.typeData)&&void 0!==c&&c.singleSuper&&null!==n&&void 0!==n&&n.superElements&&(s=(0,A.rr)(o.images,null===n||void 0===n||null===(u=n.superElements[0])||void 0===u?void 0:u.id)),null!==(h=s)&&void 0!==h&&h.superElements&&s.superElements.forEach((n=>{var l;const d=(0,A.rr)(o.images,n.id);let c;switch(s.elementType){case"NAME_SURNAME":c=t;break;case"NAME_GIVEN":c=e;break;case"SEX_CODE":c=a;break;default:c=null}null!==(l=r.personIds)&&void 0!==l&&l.includes(d.personId)&&(i.push({type:"REM_SUB",value:{superPartitionKey:d.partitionKey,subPartitionKey:s.partitionKey,superId:d.id,subId:s.id,elementType:d.elementType}}),i.push({type:"ADD_SUB",value:{superPartitionKey:d.partitionKey,subPartitionKey:o.currentImageArk,superId:d.id,subId:c,elementType:d.elementType}}))}))}})),i})(y,b,w)),function(a,i){let r;try{r=(0,wi.q)(a),e.isOn?(0,Se.Nn)({actions:r,userId:s.userId,appName:qe.zQ,fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],splunkDebugModeArguments:t.isOn?{theFileFromWhichSaveWasCalled:"AddPerson",formValues:i}:{}}).then((()=>{h(a)})).catch((e=>{var t,a;f(e),(0,$e.Yt)(e,null,{codeId:72,slsActions:r,status:null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status,responseBody:null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data})})).finally((()=>{T(!1)})):(xr("Saving changes to SLS is disabled",o.changes),T(!1))}catch(n){T(!1),f(n),(0,$e.Yt)(n,null,{codeId:72,sls:null===n||void 0===n?void 0:n.sls,dispatches:null===n||void 0===n?void 0:n.dispatches})}}(v,a)}))},saving:w,givenFieldValue:I,surnameFieldValue:E}),(0,k.Y)(it,{error:y,setError:f,title:c("save-error-overlay.heading","Unable to Save Changes"),message:c("save-error-overlay.content-generic","Your changes were not saved.  Please try again later.")}),(0,k.Y)(it,{error:g,setError:v,onCancel:()=>a("addPersonPage1"),message:c("add-person.error-overlay.content","An error occurred. Please wait a few minutes and try again. Push cancel to go back, or try to refresh.")}))}const Nr="H5",Rr=e=>{let{heading:t,caption:a,headingSize:i=Nr,children:r}=e;return(0,k.Y)(It.A,{top:!0},(0,k.Y)(oe.A,{fullWidth:!0}),(0,k.Y)(Q.Ay,{color:W.A.gray02},(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(re.H5,{size:i},t),(0,k.Y)(ae.A,{size:i!==Nr?"xxs":"xs"}),(0,k.Y)(te.A,{size:"xs"},a),(0,k.Y)(ae.A,{size:"xxs"})),r&&(0,k.Y)(Q.Ay,{color:W.A.white100,marginY:"xs"},r))};var Pr=a(52875);const Or=e=>{let{field:t,onClick:a}=e;const[r]=(0,P.B)(),n=(0,b.A)(),o=(0,je.mS)(),s=(0,je.vl)(),l=(0,Pr.kT)(),{openOverlay:d}=(0,Ti.HQ)(),c=(0,i.useCallback)((()=>{const e=n.thumbnails.findIndex((e=>e.ark===t.partitionKey));l({type:"SET_FOCUSED_INDEX",value:e}),s({type:"BATCH_DISPATCHES",value:[{type:"SET_ACTIVE_FIELD_ID",value:t.id},{type:"SET_PREVIOUS_FOCUSED_INDEX",value:o.focusedIndex},{type:"SET_STATE",value:{dontResetState:!0}}]}),d("editDanglingField")}),[s,l,t.id,t.partitionKey,d,o.focusedIndex,n.thumbnails]);return(0,k.Y)(i.Fragment,null,(0,k.Y)(Da.A,{"data-testid":(null===t||void 0===t?void 0:t.fieldType)||(null===t||void 0===t?void 0:t.elementType),overline:t.displayLabel,primaryText:(0,A.OV)(t)||"",secondaryText:r("edit-event.shared-house-number.caption","Information is highlighted on a different page. Edit in context."),endElement:(0,k.Y)(Da.A.Icon,{Icon:Ei.A}),onClick:a||c}))};var _r=a(75545),Fr=a(13522);const Dr=e=>{var t,a;let{field:r,onClick:n,readonly:o=!0}=e;const[s]=(0,P.B)(),{restrictedFields:l}=Y(),d=null===l||void 0===l?void 0:l.includes(I.NAME),c=(0,je.vl)(),{openOverlay:u}=(0,Ti.HQ)(),h=s("edit.shared-field.tooltip-label","Linked Field"),p=s("edit.shared-field.tooltip-description","This field is temporarily disabled since the information connects many names together."),m=null===r||void 0===r||null===(t=r.label)||void 0===t?void 0:t.toLowerCase(),g=(0,i.useCallback)((()=>{c({type:"SET_ACTIVE_FIELD_ID",value:null===r||void 0===r?void 0:r.id}),c({type:"SET_EDITING_SHARED_FIELD_ID",value:null===r||void 0===r?void 0:r.id}),u("editSharedFieldPage1")}),[c,null===r||void 0===r?void 0:r.id,u]);return(0,k.Y)(Da.A,{"data-testid":(null===r||void 0===r?void 0:r.fieldType)||(null===r||void 0===r?void 0:r.elementType),overline:r.label,primaryText:o?(0,A.OV)(r)||"":(0,A.OV)((v=r,y=null===r||void 0===r||null===(a=r.subElements)||void 0===a?void 0:a[0],v&&!y?v:y))||"",secondaryText:o?s("edit.shared-field.readonly-caption","This information is connected to many names."):s("edit.shared-field.caption","This information is connected to many names. Edit linked {fieldName}.",{fieldName:m}),endElement:o?(0,k.Y)(_r.A,{label:h,description:p,onClick:()=>{},target:(0,k.Y)(Fr.A,null)}):(0,k.Y)(Da.A.Icon,{Icon:Ei.A}),onClick:o?()=>{}:n||g,disabled:o||d});var v,y},Mr=e=>{let{field:t,onFocus:a,onBlur:r,onDelete:n,danglingButtonProps:o,sharedFieldButtonProps:s,showEditHighlight:l=!0,enableLockSharedField:d=!0,maxLength:c=256}=e;const u=(0,b.A)(),[h]=(0,P.B)(),p=(0,A._Y)(t,u.images),m=d&&p>1,g=t.isDangling,v=(0,A.Qp)(u.images,null===u||void 0===u?void 0:u.currentImageArk),y=(0,A.Tc)(t,null===v||void 0===v?void 0:v.template,null===v||void 0===v?void 0:v.templateToImageMapping),f=(0,A.Pe)(t,y),w=(0,i.useMemo)((()=>(0,Ni.YL)(t)||(0,Ni.vE)(t)),[t]),T={"data-testid":(null===t||void 0===t?void 0:t.fieldType)||(null===t||void 0===t?void 0:t.elementType),name:t.name||t.id,key:t.id,label:t.label,placeholder:t.label,onFocus:a,onBlur:r};return(0,k.Y)(i.Fragment,null,!m&&g&&(0,k.Y)(Or,(0,j.A)({field:t},o)),m&&(0,k.Y)(Dr,(0,j.A)({field:t,readonly:(0,A.mk)(t,u.images)||!f},s)),!m&&!g&&(0,k.Y)(i.Fragment,null,(0,Ni.YL)(t)&&(0,k.Y)(mr.kV,(0,j.A)({},T,{standardize:!0,clearOnClickAway:!0})),(0,Ni.vE)(t)&&(0,k.Y)(mr.nW,(0,j.A)({},T,{standardize:!0,clearOnClickAway:!0})),!(0,Ni.YL)(t)&&!(0,Ni.vE)(t)&&(0,k.Y)(mr.YJ,(0,j.A)({},T,{maxLength:c})),w&&(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(J.Ay,null,l&&(0,k.Y)(Tr,{field:t,onDelete:n,growX:!0}),n&&(0,k.Y)(ee.A,{Icon:xi.A,color:"red",onClick:n,title:h("edit-index.remove-field.button","Remove Field"),"data-testid":`remove-${(null===t||void 0===t?void 0:t.fieldType).toLowerCase()}-field`,linkName:"Remove Field",dense:!0}))))};function Hr(e){let{setter:t,fieldId:a,testId:i,label:r,fieldType:n,name:o,buttonText:s}=e;return(0,k.Y)(J.Ay,null,(0,k.Y)(Si.A,{"data-testid":`add-${i}`,Icon:Ci.A,color:"blue",emphasis:"low",onClick:()=>t({id:a,label:r,fieldType:n,name:o,elementType:"FIELD"})},s))}function Lr(e){let{fieldEl:t,displayLabel:a,checkboxEl:i,onDelete:r,removeText:n,testId:o}=e;return(0,k.Y)(Ne.A,{initiallyOpen:!0},(0,k.Y)(Re.A,null,a),(0,k.Y)(Pe.A,null,t,i,(0,k.Y)(Si.A,{"data-testid":`delete-${o}`,color:"red",Icon:xi.A,emphasis:"low",onClick:r},n)))}function zr(e){let{fieldId:t,fieldName:a,fieldType:r,testId:n,displayLabel:o,addText:s,removeText:l,setValue:d,checkboxName:c,checkboxValue:u,hasSelectedHighlights:h}=e;const[p]=(0,P.B)(),[m,g]=(0,i.useState)();return(0,k.Y)(i.Fragment,null,!m&&(0,k.Y)(Hr,{setter:g,fieldId:t,testId:n,label:o,fieldType:r,name:a,buttonText:s}),m&&(0,k.Y)(Lr,{fieldEl:"SEX_CODE"===r?(0,k.Y)(br,{fieldName:a,addedSexCode:m,key:m.id}):(0,k.Y)(Mr,{field:m,showEditHighlight:!u}),displayLabel:m.label,checkboxEl:c?(0,k.Y)(mr.cG,{"data-testid":`no-highlight-possible-${n}`,label:p("highlight-required-checkbox-label","No highlight possible"),name:c,disabled:h(t)}):null,onDelete:()=>{g(null),d(a,"")},removeText:l,testId:n})," ")}const Vr=(0,y.Ay)("rip:R2:AddPerson");function Br(e){var t;let{saving:a,hasSelectedHighlights:r,useSexField:n=!1}=e;const{addPersonGenericOverlay:o,editHighlightsOverlay:s,topMostPanel:l,closeOverlay:d}=(0,Ti.HQ)(),c=(0,b.A)(),u=(0,bi.Y)(),[h]=(0,P.B)(),{formState:p,getValues:m,reset:g,setValue:v,control:y,trigger:f}=(0,ur.Hj)(),[A,w,T]=m(["givenNameFieldId","surnameFieldId","sexFieldId"]),[I,S]=(0,hr.FH)({name:["givenCheckbox","surnameCheckbox"],control:y}),E=(0,Me.ti)({elementType:"FIELD",fieldType:"NAME_GN"},null===c||void 0===c?void 0:c.types,h("type-unknown.label","<Unknown Type>")),C=(0,Me.ti)({elementType:"FIELD",fieldType:"NAME_SURN"},null===c||void 0===c?void 0:c.types,h("type-unknown.label","<Unknown Type>")),x=h("edit-essential-info.sex-code","Sex"),{isValid:Y}=p,N=(0,i.useMemo)((()=>{var e,t;return null===(e=c.types)||void 0===e||null===(t=e.names)||void 0===t?void 0:t.map((e=>({value:e.nameType,label:e.displayLabel})))}),[null===(t=c.types)||void 0===t?void 0:t.names]);return(0,i.useEffect)((()=>{o.isOpen&&(g(),v("givenNameFieldId",(0,$e.Vs)()),v("surnameFieldId",(0,$e.Vs)()),v("sexFieldId",(0,$e.Vs)()))}),[]),(0,i.useEffect)((()=>{null!==o&&void 0!==o&&o.isOpen&&"addPersonPage1Generic"===l()&&!s.isOpen&&u.setDisplayHighlights({mainPartitionKey:c.currentImageArk,customFilter:e=>e.personIds.length>0,fieldTypes:["NAME_SURN","NAME_SUF","NAME_GN","SEX_CODE"],elementIds:[A,w,T]}),f()}),[null===o||void 0===o?void 0:o.isOpen,s.isOpen,c.currentImageArk,c.images,l,A,w,T]),Vr("Render: ",{state:c,isValid:Y}),(0,k.Y)(hi.A,(0,j.A)({},o,{close:()=>{d("addPersonPage1Generic"),u.clearEdits()},headingColor:"purple",title:h("add-person.panel-back","Back"),footer:(0,k.Y)(J.Ay,{alignX:"end",gutters:"md"},(0,k.Y)(Z.A,{linkName:"Add Person Cancel","data-testid":"panel-cancel-button",emphasis:"low",disabled:a,onClick:()=>{u.clearEdits(),d("addPersonPage1Generic")}},h("edit-shared-surname-footer.cancel","Cancel")),(0,k.Y)(Z.A,{linkName:"Add Person Next","data-testid":"panel-forward-button",emphasis:"high",disabled:a||!Y,form:"add-person-form",type:"submit"},h("edit-shared-surname-footer.next","Next")))}),(0,k.Y)(Rr,{heading:h("add-person.panel-heading","Add Name"),caption:h("add-person.caption","Select a name part to continue.")}),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(_e.A,{heading:h("add-person.subtitle","Select and fill out a name part to continue."),data:h("add-person.body-text","Must have at least one name part and a highlight.")}),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(mr.FX,{label:h("add-person.name-type-select","Name Type"),placeholder:h("add-person.name-type-select","Name Type"),name:"nameType",options:N}),(0,k.Y)(zr,{fieldId:A,fieldType:"NAME_GN",fieldName:"givenField",checkboxValue:I,checkboxName:"givenCheckbox",testId:"given-name",displayLabel:E,addText:h("add-person.add-given-name","Add given name"),removeText:h("add-person.remove-given-name","Remove given name"),setValue:v,hasSelectedHighlights:r}),(0,k.Y)(zr,{fieldId:w,fieldType:"NAME_SURN",fieldName:"surnameField",checkboxValue:S,checkboxName:"surnameCheckbox",testId:"surname",displayLabel:C,addText:h("add-person.add-surname","Add surname"),removeText:h("add-person.remove-surname","Remove surname"),setValue:v,hasSelectedHighlights:r}),n&&(0,k.Y)(zr,{fieldId:T,fieldType:"SEX_CODE",fieldName:"sexField",checkboxValue:!1,testId:"sex",displayLabel:x,addText:h("add-person.add-sex","Add Sex"),removeText:h("add-person.remove-sex","Remove Sex"),setValue:v,hasSelectedHighlights:r}))}const Gr=(0,y.Ay)("rip:R2:AddPerson");function Ur(e){let{selectedPersonId:t,saving:a,handleBack:r,submitFunc:n}=e;const{addPersonPage2GenericOverlay:o,editHighlightsOverlay:s,topMostPanel:l,closeOverlay:d}=(0,Ti.HQ)(),c=(0,Er.pm)("https://www.familysearch.org/en/help/helpcenter/article/what-is-a-record-type"),u=(0,b.A)(),h=(0,bi.Y)(),[p]=(0,P.B)(),{getValues:m,handleSubmit:g}=(0,ur.Hj)(),[v,y]=m(["givenField","surnameField"]),f=`${v||""} ${y||""}`.trim()||p("get-person-full-name.unknown","<Unknown>");(0,i.useEffect)((()=>{null!==o&&void 0!==o&&o.isOpen&&"addPersonPage2Generic"===l()&&!s.isOpen&&h.setDisplayHighlights({mainPartitionKey:u.currentImageArk,highlights:h.getHighlights().mainEditHighlights.filter((e=>["NAME_SURN","NAME_SUF","NAME_GN"].includes(e.fieldType))).filter((e=>e.personIds.length>0)).filter((e=>(null===e||void 0===e?void 0:e.imageId)===u.currentImageArk)).filter((e=>null===e||void 0===e?void 0:e.personIds.includes(t)))})}),[null===o||void 0===o?void 0:o.isOpen,s.isOpen,t,u.currentImageArk,l]);const A=(0,i.useMemo)((()=>(0,$e.Zw)(u.types,null===u||void 0===u?void 0:u.images,null===u||void 0===u?void 0:u.currentImageArk,p)),[null===u||void 0===u?void 0:u.currentImageArk,null===u||void 0===u?void 0:u.images,u.types,p]);return Gr("Render: ",{state:u}),(0,k.Y)(i.Fragment,null,(0,k.Y)(hi.A,(0,j.A)({},o,{close:()=>{d("addPersonPage2Generic"),r()},headingColor:"purple",title:p("add-person.panel-back","Back"),footer:(0,k.Y)(J.Ay,{alignX:"end",gutters:"md"},(0,k.Y)(Z.A,{linkName:"Add Person Back","data-testid":"panel-back-button",emphasis:"low",type:"submit",form:"",onClick:()=>{d("addPersonPage2Generic"),r()},disabled:a},p("edit-shared-surname-footer.back","Back")),(0,k.Y)(Z.A,{linkName:"Add Person Save","data-testid":"panel-forward-button",emphasis:"high",disabled:a,form:"add-person-form-page-2",onClick:()=>{g(n)()}},p("edit-shared-surname-footer.save","Save")))}),(0,k.Y)(Rr,{heading:p("add-person.panel-heading","Add Name"),caption:p("add-person.page-2-caption","Select a record type for the new name.")}),(0,k.Y)(_e.A,{heading:"",data:p("add-person.page-2-subtitle","What is the record type? If you are unsure of what to enter, leave it blank.",{name:f})}),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(mr.eP,{"data-testid":"recordTypeAutosuggest",name:"recordType",label:p("add-person.new-record-type-prompt","Record Type"),placeholder:p("add-person.new-record-type-prompt","Record Type"),clearOnClickAway:!0,suggestions:A,helpMessage:(0,k.Y)(i.Fragment,null,p("add-person.what-are-record-types","What are record types? "),(0,k.Y)(Z.A,{ref:c.targetRef,onClick:e=>{e.stopPropagation(),c.handleClick()}},p("add-person.learn-more","Learn More"))),sortFunction:(e,t,a)=>{const i=e.toLowerCase().trim();return t.primaryText.toLowerCase().startsWith(i)?-1:a.primaryText.toLowerCase().startsWith(i)?1:t.primaryText-a.primaryText}})))}const Kr=(e,t,a,i)=>!(null===e||void 0===e||!e.trim())||!!i(t)||a,qr=e=>vr.Ik().shape({nameType:vr.Yj().required("Name type is required"),givenField:vr.Yj().test("has-highlight-or-checkbox","Given name requires a highlight or checkbox selection.",((t,a)=>{const{givenNameFieldId:i,givenCheckbox:r,surnameField:n,surnameFieldId:o,surnameCheckbox:s}=a.parent;return!!Kr(n,o,s,e)||Kr(t,i,r,e)})).nullable(),surnameField:vr.Yj().test("has-highlight-or-checkbox","Surname requires a highlight or checkbox selection.",((t,a)=>{const{surnameFieldId:i,surnameCheckbox:r,givenField:n,givenNameFieldId:o,givenCheckbox:s}=a.parent;return!!Kr(n,o,s,e)||Kr(t,i,r,e)})).nullable()}).test("at-least-one-field",'At least one of "givenField" (with highlight/checkbox) or "surnameField" (with highlight/checkbox) must be provided.',(t=>{const{givenField:a,surnameField:i,givenNameFieldId:r,surnameFieldId:n,givenCheckbox:o,surnameCheckbox:s}=t||{};return!!(a&&(o||e(r))||i&&(s||e(n)))}));function jr(e){var t,a,i,r,n,o;let{batchPersonParams:s,images:l,currentImageArk:d,recordType:c,types:u,highlights:h}=e;const p=[{type:"CREATE_ELEMENT",value:{elementType:"RECORD",partitionKey:s.partitionKey,id:s.recordId,extraArgs:{recordType:null===c||void 0===c?void 0:c.key}}},{type:"ADD_SUB",value:{superPartitionKey:s.partitionKey,subPartitionKey:s.partitionKey,superId:s.partitionKey,subId:s.recordId,elementType:"IMAGE"}}];let m=(0,Ai.e9)(s);m=m.concat((0,Ai.Aq)(l,d,h.mainEditHighlights)),m=m.concat((0,Ai.Aq)(l,d,h.splitScreenHighlights));const g=null===(t=m.find((e=>{var t,a;return"CREATE_ELEMENT"===e.type&&"NAME_GN"===(null===e||void 0===e||null===(t=e.value)||void 0===t||null===(a=t.extraArgs)||void 0===a?void 0:a.fieldType)})))||void 0===t||null===(a=t.value)||void 0===a?void 0:a.id,v=null===(i=m.find((e=>{var t,a;return"CREATE_ELEMENT"===e.type&&"NAME_SURN"===(null===e||void 0===e||null===(t=e.value)||void 0===t||null===(a=t.extraArgs)||void 0===a?void 0:a.fieldType)})))||void 0===i||null===(r=i.value)||void 0===r?void 0:r.id,y=null===(n=m.find((e=>{var t,a;return"CREATE_ELEMENT"===e.type&&"SEX_CODE"===(null===e||void 0===e||null===(t=e.value)||void 0===t||null===(a=t.extraArgs)||void 0===a?void 0:a.fieldType)})))||void 0===n||null===(o=n.value)||void 0===o?void 0:o.id;m=m.concat(function(e){let{images:t,types:a,currentImageArk:i,highlights:r,newGivenNameId:n,newSurnameId:o,newSexFieldId:s}=e;const l=[];return r.mainEditHighlights.filter((e=>"edit"===e.change)).forEach((e=>{var r;const d=a.fields.find((t=>t.fieldType===e.fieldType)),c=!(null!==d&&void 0!==d&&d.singleSuper),u=!(null!==(r=a.elements.find((e=>e.elementType===d.elementTypes[0])))&&void 0!==r&&r.singleSuper);if(c||u){var h,p,m;const a=(0,A.rr)(t,e.originalHighlight.fieldId);let r=a;null!==(h=r.typeData)&&void 0!==h&&h.singleSuper&&null!==a&&void 0!==a&&a.superElements&&(r=(0,A.rr)(t,null===a||void 0===a||null===(p=a.superElements[0])||void 0===p?void 0:p.id)),null!==(m=r)&&void 0!==m&&m.superElements&&r.superElements.forEach((a=>{var d;const c=(0,A.rr)(t,a.id);let u;switch(r.fieldType){case"NAME_SURN":u=o;break;case"NAME_GN":u=n;break;case"SEX_CODE":u=s;break;default:u=null}null!==(d=e.personIds)&&void 0!==d&&d.includes(c.personId)&&(l.push({type:"REM_SUB",value:{superPartitionKey:c.partitionKey,subPartitionKey:r.partitionKey,superId:c.id,subId:r.id,elementType:c.elementType}}),l.push({type:"ADD_SUB",value:{superPartitionKey:c.partitionKey,subPartitionKey:i,superId:c.id,subId:u,elementType:c.elementType}}))}))}})),l}({images:l,types:u,currentImageArk:d,highlights:h,newGivenNameId:g,newSurnameId:v,newSexFieldId:y}));const f=m.findIndex((e=>{var t;return"CREATE_ELEMENT"===(null===e||void 0===e?void 0:e.type)&&"PERSON"===(null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.elementType)})),b=m.splice(f,1),w=m.findIndex((e=>{var t;return"ADD_SUB"===(null===e||void 0===e?void 0:e.type)&&"RECORD"===(null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.elementType)}));b.push(...m.splice(w,1));const T=l.reduce(((e,t)=>(t.subElements&&t.subElements.forEach((t=>e.push({type:"SET_RECORD_PERSON_IDS",value:null===t||void 0===t?void 0:t.id}))),e)),[]);return T.push({type:"SET_RECORD_PERSON_IDS",value:s.recordId}),{fullArray:[...p,...b,...m,...T],recordDispatches:p,personDispatches:b,nameDispatches:m,setIdsDispatches:T}}const $r=(0,y.Ay)("rip:AddPerson");function Wr(e){let{userId:t,useSexField:a=!0,noRecord:r=!1,shouldSaveToSls:n=!0,onSave:o=()=>{},onGetPerson:s=()=>{}}=e;const{rip_sharedImageViewer_saveChanges:l,rip_sharedImageViewer_sls_actions_splunk_debugger:d}=(0,L.h)(["rip_sharedImageViewer_saveChanges","rip_sharedImageViewer_sls_actions_splunk_debugger"]),{closeOverlay:c,openOverlay:u,addPersonGenericOverlay:h}=(0,Ti.HQ)(),p=(0,b.A)(),m=(0,Ae.l)(),g=(0,bi.Y)(),[v]=(0,P.B)(),[y,f]=(0,i.useState)(null),[A,w]=(0,i.useState)(),[T,I]=(0,i.useState)(),S=(0,i.useRef)(1),E=(0,i.useCallback)((e=>g.getHighlights().mainEditHighlights.find((t=>t.fieldId===e))||g.getHighlights().splitScreenHighlights.find((t=>t.fieldId===e))),[g.getHighlights().mainEditHighlights,g.getHighlights().splitScreenHighlights]),C=qr(E),x=(0,ur.SV)({mode:"all",resolver:(0,gr.t)(C),defaultValues:{givenCheckbox:!1,givenField:"",surnameCheckbox:!1,surnameField:"",sexField:"",givenNameFieldId:null,surnameFieldId:null,sexFieldId:null,nameType:"BIRTH_NAME",recordType:null}});const Y=e=>{const{givenField:i,surnameField:s,sexField:h,givenNameFieldId:v,surnameFieldId:f,sexFieldId:b,nameType:A}=e;if(1!==S.current||r){(0,vi.sx)({event_name:"add_person_edit",link_name:"Add: Save"}),I(!0);const r={comment:"",reasonId:"",app:qe.zQ},u={partitionKey:p.currentImageArk,givenNameFieldId:v,surnameFieldId:f,nameType:A,sexFieldId:b};i&&(u.givenNameFieldValue=(0,Je.cN)(i,r)),s&&(u.surnameFieldValue=(0,Je.cN)(s,r)),a&&h&&(u.sexFieldValue=(0,Je.cN)(h.primaryText,r)),u.primaryPerson=!1,(0,Se.XM)("record").then((a=>{u.recordId=a,u.personId=y;const i=jr({batchPersonParams:u,images:p.images,currentImageArk:p.currentImageArk,recordType:e.recordType,types:p.types,highlights:g.getHighlights()});if(n){!function(e,a,i,r){(0,Se.fD)({sls:e,dispatches:a.fullArray,saveChangesFlag:l,slsActionsSplunkDebugger:d,userId:t,dispatch:m,appName:qe.zQ,fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],successHandler:()=>{c("addPersonPage1Generic"),c("addPersonPage2Generic"),o&&o({personId:y,recordId:r,dispatches:a,formValues:i})},errorHandler:t=>{var a,i;w(t),(0,$e.Yt)(t,null,{codeId:69,sls:e,status:null===t||void 0===t||null===(a=t.response)||void 0===a?void 0:a.status,responseBody:null===t||void 0===t||null===(i=t.response)||void 0===i?void 0:i.data})},finalHandler:()=>{I(!1)}})}((0,wi.q)(i.fullArray),i,e,a)}else o&&(o({personId:y,recordId:a,dispatches:i,formValues:e}),c("addPersonPage1Generic"),c("addPersonPage2Generic"))}))}else u("addPersonPage2Generic"),(0,vi.sx)({event_name:"click_action",link_name:"Add: Next"}),S.current=2,I(!1)};return(0,i.useEffect)((()=>{let e=!0;return(0,Se.XM)("person").then((t=>{e&&(f(t),s&&s(t))})),()=>{e=!1}}),[null===h||void 0===h?void 0:h.isOpen]),$r("Render: ",{state:p}),(0,k.Y)(pr.Ay,{id:"add-person-form",methods:x,onSubmit:Y},(0,k.Y)(Br,{useSexField:a,saving:T,hasSelectedHighlights:E}),(0,k.Y)(Ur,{saving:T,selectedPersonId:y,handleBack:()=>{S.current=1},submitFunc:Y}),(0,k.Y)(it,{error:A,setError:w,title:v("save-error-overlay.heading","Unable to Save Changes"),message:v("save-error-overlay.content-generic","Your changes were not saved.  Please try again later.")}))}var Xr=a(98002);const Qr={name:"7esdwp",styles:"margin-top:1rem;> div > div{margin-bottom:1rem;}svg,span{pointer-events:none;}"},Jr=e=>{let{record:t,onSelectionChange:a,onInfoIconClick:r,setPersonData:n,floatingRecords:o=!1,showSeparator:s=!1}=e;const l=(0,b.A)(),[d]=(0,P.B)(),c=(0,i.useMemo)((()=>{var e,a;return o?null!==t&&void 0!==t?t:[]:null!==(e=(null===t||void 0===t||null===(a=t.subElements)||void 0===a?void 0:a.filter((e=>"PERSON"===(null===e||void 0===e?void 0:e.elementType)&&!e.isDangling)))||(null===t||void 0===t?void 0:t.persons))&&void 0!==e?e:[]}),[t,o]),u=(0,i.useMemo)((()=>(null===c||void 0===c?void 0:c.length)>0?c.map((e=>{const a=(0,Ee.hA)({person:e}),i=(0,Ie.RV)(e,l.types,t),r=(0,Ie.UR)(e,l.types,t,d);return{overline:(0,Ie.ON)(i,r),fullName:a,...e}})):[]),[c,t,l.types,d]),h=(0,i.useCallback)((e=>{a({[t.id||"floating"]:e})}),[a,t.id]);return u&&0===u.length?null:(0,k.Y)("section",{css:Qr},o&&(0,k.Y)(oe.A,{fullWidth:!0}),u&&u.length>0&&(0,k.Y)(Xr.A,{onSelectionChange:h},u.map((e=>e&&(0,k.Y)(Da.A,{"data-testid":`delete-${e.fullName}-list-item`,key:e.id,name:e.id,overline:e.overline,primaryText:e.fullName,emphasized:!(null===e||void 0===e||!e.primary),endElement:(0,k.Y)(Da.A.IconButton,{"data-testid":"removeItemInfoButton",Icon:Pi.A,color:"gray",onClick:t=>((e,t)=>{let{target:a}=e;n(t),r({target:a})})(t,e)})})))),s&&(0,k.Y)(oe.A,{fullWidth:!0}))};var Zr=a(60148),en=a(75216);const tn=e=>{let{person:t,overlayProps:a}=e;const{images:r}=(0,b.A)(),[n]=(0,P.B)(),o=(0,i.useMemo)((()=>(0,Ie.FA)(t,r)),[t,r]),s=(0,i.useMemo)((()=>(0,Ee.lE)(t)),[t]);return(0,k.Y)(Zr.A,(0,j.A)({},a,{footer:(0,k.Y)(en.A,null,(0,k.Y)(Z.A,{onClick:a.close,emphasis:"high",dense:!0,linkName:"Close Person Quick Info Overlay"},n("navigation.done-button","Done"))),title:t.fullName,placement:["bottom-end","top-end"]}),(0,k.Y)("div",{style:{minWidth:"18rem"}},(0,k.Y)(_e.A,{heading:n("view-index.age.title","Age"),data:s}),(0,k.Y)("br",null),(0,k.Y)(_e.A,{heading:n("view-index.relationships.title","Relationships"),data:(null===o||void 0===o?void 0:o.length)>0&&(null===o||void 0===o?void 0:o.map((e=>(0,k.Y)(i.Fragment,null,`${null===e||void 0===e?void 0:e.value} (${null===e||void 0===e?void 0:e.label})`," ",(0,k.Y)("br",null)))))})),(0,k.Y)("br",null))};function an(e){var t,a,r;let{hidden:n,handleDeletePerson:o}=e;const[s]=(0,P.B)(),l=(0,b.A)(),d=(0,je.mS)(),{displayHighlightsApi:c,splitScreenDisplayHighlightsApi:u}=(0,je.Z0)(),{removePersonOverlay:h,closeAll:p}=(0,Ti.HQ)(),[m,g]=(0,i.useState)([]),[,v]=(0,i.useState)({}),y=(0,$.Ay)(),f=(0,$.Ay)(),w=(0,A.Qp)(null===l||void 0===l?void 0:l.images,null===l||void 0===l?void 0:l.currentImageArk),T=(null===w||void 0===w?void 0:w.subElements)||[],I=(0,A.F5)(w),[S,E]=(0,i.useState)({}),C=[...T.filter((e=>null===e||void 0===e?void 0:e.subElements)),...I.filter((e=>null===e||void 0===e?void 0:e.persons))],x=(null===w||void 0===w||null===(t=w.floatingElements)||void 0===t?void 0:t.filter((e=>"PERSON"===(null===e||void 0===e?void 0:e.elementType)&&!e.superElements)))||[],Y=s("remove-person.delete-person.heading","Delete Names"),N=s("remove-person.delete-person.content","Deleting will remove the name and all of their content. This action can be undone in the Change History."),R=(0,ur.SV)({mode:"all",defaultValues:{recordPerson:void 0}});const O=(0,i.useCallback)((e=>{const t=(e,t,a)=>{const i=d.editHighlights.filter((t=>t.personIds.some((t=>-1!==e.indexOf(t))))).filter((e=>["NAME_SURN","NAME_SUF","NAME_GN","NAME_PRE"].includes(e.fieldType))).filter((e=>(null===e||void 0===e?void 0:e.imageId)===t));(0,ia.eP)(i,a)};if(t(e,l.currentImageArk,c),d.splitScreen){var a,i;t(e,null===l||void 0===l||null===(a=l.thumbnails)||void 0===a||null===(i=a[d.referenceFocusedIndex])||void 0===i?void 0:i.ark,u)}}),[d.editHighlights,d.referenceFocusedIndex,d.splitScreen,l.currentImageArk]),_=(0,i.useCallback)((e=>{v((t=>{const a=Object.values({...t,...e}).flat();return g(a),O(a),{...t,...e}}))}),[d.referenceFocusedIndex]);return(0,i.useEffect)((()=>{(0,ia.eP)([],c)}),[]),n?(0,k.Y)(i.Fragment,null):(0,k.Y)(i.Fragment,null,(0,k.Y)(pr.Ay,{onSubmit:()=>{y.handleClick(),(0,vi.sx)({event_name:"click_action",link_name:"Delete: Open Overlay"})},methods:R,id:"removePersonForm"},(0,k.Y)(hi.A,(0,j.A)({},h,{close:()=>{p()},title:s("navigation.back-button","Back"),headingColor:"red",footer:(0,k.Y)(J.Ay,{gutters:"sm",alignX:"end"},(0,k.Y)(Z.A,{onClick:()=>{p()}},s("edit-index.remove-person.cancel.button","Cancel")),(0,k.Y)(at.A,{disabled:m.length<1,type:"submit",form:"removePersonForm",linkName:"Delete Persons"},s("edit-index.remove-person.delete.button","Delete")))}),(0,k.Y)(i.Fragment,null,(0,k.Y)(fr,{heading:Y,caption:N}),null===C||void 0===C?void 0:C.map(((e,t)=>(0,k.Y)(Jr,{record:e,key:e.id,showSeparator:t<((null===C||void 0===C?void 0:C.length)-1||0),onSelectionChange:_,onInfoIconClick:f.open,setPersonData:E}))),x&&x.length>0&&(0,k.Y)(Jr,{record:x,key:"floating-records",onSelectionChange:_,onInfoIconClick:f.open,setPersonData:E,floatingRecords:!0})))),(0,k.Y)(Vi,{overlay:y,headingText:s("remove-person.delete-overlay.heading-text","Delete All Selected"),handleDelete:()=>{const e=function(){const e=[];return C.forEach((t=>{let a;if(t.persons){var i;const e=(0,A.rr)(l.images,t.id);a=null===e||void 0===e||null===(i=e.subElements)||void 0===i?void 0:i.filter((e=>"PERSON"===(null===e||void 0===e?void 0:e.elementType)))}else{var r;a=null===t||void 0===t||null===(r=t.subElements)||void 0===r?void 0:r.filter((e=>"PERSON"===(null===e||void 0===e?void 0:e.elementType)))}let n=!0;a&&a.forEach((e=>{m.includes(e.id)||(n=!1)})),n&&e.push(t.id)})),e}();o(m,e),p()},deleteMultipleView:!0,count:null!==(a=null===m||void 0===m?void 0:m.length)&&void 0!==a?a:0},(0,k.Y)("div",null,(0,k.Y)("div",null,1===m.length?s("remove-person.delete-overlay.content-text_singular","Delete the following name from the document? This cannot be undone."):s("remove-person.delete-overlay.content-text_plural","Delete the following {count} names from the document? This cannot be undone.",{count:null!==(r=null===m||void 0===m?void 0:m.length)&&void 0!==r?r:0})),(0,k.Y)("br",null),(0,k.Y)("ul",null,m.map((e=>{const t=(0,A.rr)(l.images,e),a=(0,Ee.hA)({person:t});return t&&(0,k.Y)("li",{"data-testid":`delete-person-${e}`,key:t.id},(0,k.Y)("strong",null,a))}))))),(0,k.Y)(tn,{overlayProps:f,person:S}))}var rn=a(34326),nn=a(31547),on=a.n(nn);function sn(e){let{saving:t=!1,goBackToEditEventsPanel:a}=e;const[r]=(0,P.B)();return(0,k.Y)(i.Fragment,null,(0,k.Y)(J.Ay,{alignX:"end",gutters:"md"},(0,k.Y)(Z.A,{"data-testid":"edit-dangling-field-back-button",emphasis:"low",disabled:t,onClick:()=>{a()}},r("edit-dangling-field-footer.cancel","Cancel")),(0,k.Y)(Z.A,{"data-testid":"edit-dangling-field-save-button",emphasis:"high",disabled:t,form:"edit-dangling-field",type:"submit"},r("edit-dangling-field-footer.save","Save"))))}var ln=a(40247);const dn=(0,y.Ay)("rip:R2:EditDanglingField");function cn(){var e;const t=(0,b.A)(),a=(0,je.mS)(),r=(0,Pr.XQ)(),[n]=(0,P.B)(),[o,s]=(0,i.useState)(),{rip_sharedImageViewer_saveChanges:l,rip_sharedImageViewer_sls_actions_splunk_debugger:d}=(0,L.h)(["rip_sharedImageViewer_saveChanges","rip_sharedImageViewer_sls_actions_splunk_debugger"]),[c,u]=(0,i.useState)([]),[h,p]=(0,i.useState)(),m=(0,Ae.l)(),g=(0,je.vl)(),v=(0,ln.hV)(),{closeOverlay:y,editDanglingFieldOverlay:f}=(0,Ti.HQ)(),w=vr.Ik().shape({}),T=(0,ur.SV)({mode:"all",resolver:(0,gr.t)(w),defaultValues:{}}),I=(0,A.rr)(t.images,null===a||void 0===a?void 0:a.activeFieldId),S=(0,A.OV)(I),E=null===I||void 0===I||null===(e=I.typeData)||void 0===e?void 0:e.displayLabel,C=E?n("edit-dangling-field.heading","{fieldName}: {fieldValue}",{fieldName:E,fieldValue:S}):"",{handleFieldChange:x,handleOnFocus:Y}={handleFieldChange:()=>{},handleOnFocus:()=>{}},{reset:N}=T;(0,i.useEffect)((()=>{const e={};I&&(e[I.id]=S),N(e)}),[I,S,N]);const R=n("edit-dangling-field.instructions.heading","Fix any mistakes that you see."),O=(0,i.useCallback)((()=>{f.handleClick(),v(a.previousIndex,!0),y("editDanglingField")}),[f,a.previousIndex,y,v]);(0,i.useEffect)((()=>{if((null===c||void 0===c?void 0:c.length)>0){const e=c[0],a=[];t.images.forEach((t=>{const i=on()(e);i.value.partitionKey=t.partitionKey,a.push(i)})),m({type:"BATCH_DISPATCHES",value:a}),u([]),O()}}),[c,m,f,a.previousIndex,g,O,t.images]);const _=(0,i.useCallback)(((e,i)=>{l.isOn?(0,Se.Nn)({actions:e,userId:a.userId,appName:qe.zQ,fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],splunkDebugModeArguments:d.isOn?{theFileFromWhichSaveWasCalled:"EditDanglingField"}:{}}).then((()=>{u(i)})).catch((a=>{var i,r;p(a),(0,$e.Yt)(a,t.currentImageArk,{codeId:75,slsActions:e,status:null===a||void 0===a||null===(i=a.response)||void 0===i?void 0:i.status,responseBody:null===a||void 0===a||null===(r=a.response)||void 0===r?void 0:r.data})})).finally((()=>{s(!1)})):(dn("Saving changes to SLS is disabled",i,e),s(!1))}),[l.isOn,d.isOn,a.userId,t.currentImageArk]),F=(0,i.useCallback)((e=>{(0,vi.sx)({event_name:"dangling_field_edit",link_name:"Edit: Dangling Field: Save"});const i={comment:"",reasonId:"",app:qe.zQ};let r=[{type:"ADD_FV",value:{partitionKey:I.partitionKey,id:I.id,fieldValue:(0,Je.cN)(e[I.id],i)}}];r=r.concat((0,Ai.Aq)(t.images,t.currentImageArk,a.editHighlights)).concat((0,Ai.Aq)(t.images,t.currentImageArk,a.referenceEditHighlights)),s(!0);const n=(0,wi.q)(r);dn("Save data: ",{dispatches:r,slsActions:n}),_(n,r)}),[null===I||void 0===I?void 0:I.id,null===I||void 0===I?void 0:I.partitionKey,a.editHighlights,_,a.referenceEditHighlights,t.images,t.currentImageArk]);return dn("Render",{field:I,r2State:a}),(0,k.Y)(i.Fragment,null,(0,k.Y)(hi.A,(0,j.A)({title:n("dangling-field.title","Edit {fieldName}",{fieldName:E}),headingColor:"red",onClose:O},f,{footer:(0,k.Y)(sn,{saving:o,goBackToEditEventsPanel:O})}),(0,k.Y)(pr.Ay,{onSubmit:F,methods:T,id:"edit-dangling-field"},(0,k.Y)(fr,{heading:C,caption:R}),(0,k.Y)(re.H6,null,n("edit-dangling-field.edit-field.heading","1. Edit the {fieldName} field.",{fieldName:E})),I&&(0,k.Y)(mr.YJ,{"data-testid":(null===I||void 0===I?void 0:I.fieldType)||(null===I||void 0===I?void 0:I.elementType),name:I.id,key:I.id,label:I.label,placeholder:I.label,maxLength:256,onFocus:()=>{Y({element:I,r2Dispatch:g})},onBlur:()=>x(g)}),(0,k.Y)(Ii.A,{label:n("edit-dangling-field.different-page.help-tooltip-label","Someone found this information on page {currentPage}. You came from page {previousPage}.",{currentPage:r.focusedIndex+1,previousPage:a.previousIndex+1}),target:(0,k.Y)(rn.A,null,n("edit-dangling-field.different-page.info-button","Why is this page different?"))}),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(re.H6,null,n("edit-dangling-field.edit-highlight.heading","2. Edit the highlight."),(0,k.Y)(ne.A,null,n("edit-dangling-field.edit-highlight.sub-heading","Match the highlight to the transcription."))),(0,k.Y)(Ne.A,null,(0,k.Y)(Re.A,null,(0,k.Y)(te.A,{size:"sm"},n("edit-dangling-field.edit-highlight.tips.heading","Highlight Tips"))),(0,k.Y)(Pe.A,null,(0,k.Y)(te.A,{size:"sm"},(0,k.Y)("span",{style:{whiteSpace:"pre-wrap"}},n("edit-dangling-field.edit-highlight.tips.body","\u2022 Select and deselect highlights as needed.\n\u2022 The selected highlight will turn yellow with a checkmark.\n\u2022 The deselected highlight will turn blue.\n\u2022 Create a New Highlight if no highlight"))))),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(Tr,{field:{highlightIds:[]}}))),(0,k.Y)(it,{error:h,setError:p,title:n("save-error-overlay.heading","Unable to Save Changes"),message:n("save-error-overlay.content-generic","Your changes were not saved.  Please try again later.")}))}var un=a(25212),hn=a(94620),pn=a(10396),mn=a(78075),gn=a(27397),vn=a(10601);function yn(e){let{chipData:t=[],fieldData:a=[],handleSelection:r=()=>{},allowSelectingMultiple:n=!0,lockSharedFields:o=!0,unlinkingStates:s,showSearch:l=!0}=e;const d=(0,b.A)(),[c,u]=(0,i.useState)(""),[h]=(0,P.B)(),p=h("field-chip-selector.added-fields.title","Added Fields"),m=h("field-chip-selector.locked-fields.title","Locked Fields"),g=h("field-chip-selector.search-field.placeholder","Search Fields"),v=(e,t)=>e.label<t.label?-1:e.label>t.label?1:0,y=a.map((e=>{var t;let a=(0,A.OV)(e)||e.value||"";var i,r,n;"object"===typeof a&&(a=(null===(i=a.normalizedValues)||void 0===i||null===(r=i[0])||void 0===r?void 0:r.text)||(null===(n=a.origValue)||void 0===n?void 0:n.text));const l=`${e.label} ${a&&!["NAME_PRE","NAME_GN","NAME_SURN","NAME_SUF"].includes(a)?`(${a})`:""}`,c={label:a?l:e.label,id:e.id};return c.label||(e.label=e.name,c.label=e.name),c.value=`${e.fieldType}:${Math.random()}`,c.disabled=(0,A._Y)(e,d.images)>1&&!(null!==s&&void 0!==s&&null!==(t=s[e.id])&&void 0!==t&&t.state)&&!(null!==s&&void 0!==s&&s[e.fieldType])&&o,c.emphasized=!c.disabled,c.selected=!c.disabled,c.disabled&&(c.description=h("field-chip-selector.disabled-chip.shared-field","Disabled Linked Field")),c})),f=(0,hn.Ay)(y.filter((e=>!e.disabled)).sort(v)),{addChip:w,chips:T}=f,I=(0,hn.Ay)(y.filter((e=>e.disabled)).sort(v).map((e=>({...e,Icon:Fr.A}))));(0,i.useEffect)((()=>{r(T,I.chips)}),[f,r,T,I.chips]);const S=t.map((e=>{var t;return{...e,data:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.filter((e=>{return t=e.label,!c||t.toLowerCase()[0]===c.toLowerCase()[0]&&t.toLowerCase().includes(c.toLowerCase())||t.toLowerCase().includes(` ${c.toLowerCase()}`);var t}))}})),E=null===S||void 0===S?void 0:S.every((e=>{var t;return 0===(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.length)}));return(0,k.Y)(i.Fragment,null,l&&(0,k.Y)(i.Fragment,null,(0,k.Y)(pn.A,{placeholder:g,Icon:ba.A,value:c,onChange:e=>u(e.target.value),clearable:!0,onClear:()=>u("")}),(0,k.Y)(ae.A,null)),!c&&T.length>0&&(0,k.Y)(Ne.A,{initiallyOpen:!0},(0,k.Y)(Re.A,null,p),(0,k.Y)(ae.A,null),(0,k.Y)(Pe.A,null,(0,k.Y)(mn.g,{chipCollection:f,isSelectable:!0})),(0,k.Y)(ae.A,null)),(0,k.Y)(ae.A,null),!c&&I.chips.length>0&&(0,k.Y)(Ne.A,{initiallyOpen:!0},(0,k.Y)(Re.A,null,m),(0,k.Y)(ae.A,null),(0,k.Y)(Pe.A,null,(0,k.Y)(mn.g,{chipCollection:I,isSelectable:!0})),(0,k.Y)(ae.A,null)),E?(0,k.Y)("p",null,h("field-chip-selector.find-a-field.no-matches","Hmm, no matches. To find a field, try different keywords or search through the list without the search")):null===S||void 0===S?void 0:S.map((e=>{var t;return(0,k.Y)(i.Fragment,{key:e.key},(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.length)>0&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,null),(0,k.Y)(Ne.A,{initiallyOpen:!0},(0,k.Y)(Re.A,null,e.title),(0,k.Y)(ae.A,null),(0,k.Y)(Pe.A,null,(0,k.Y)(J.Ay,{wrap:!0,gutters:"xxs"},e.data.map((t=>(0,k.Y)(bn,{item:t,allowSelectingMultiple:n,addChip:w,key:`${e.key}-${t.value}`}))))))))})))}const fn=["avatarProps","centered","color","debounce","description","disabled","emphasis","external","icon","inline","label","selected","key","linkName","onClick","target","to","value"];function bn(e){let{item:t,allowSelectingMultiple:a,addChip:r}=e;const[n]=(0,P.B)(),[o,s]=(0,i.useState)(!1),[l,d]=(0,i.useState)(t.label),c=n("field-chip-selector.addional-fields.added-label","Added!"),u=i.useRef([]),h=()=>u.current.forEach((e=>clearTimeout(e)));(0,i.useEffect)((()=>h),[]);const p=Object.fromEntries(Object.entries(t).filter((e=>{let[t]=e;return fn.includes(t)})));return(0,k.Y)(gn.A,(0,j.A)({},p,{selected:o,label:l,Icon:o?vn.A:void 0,onClick:()=>{r({...t,emphasized:!0,selected:!0,value:a?`${t.value||""}:${Math.random()}`:t.value||""}),s(!0),d(c),u.current.push(setTimeout((()=>{s(!1),d(t.label)}),2e3))}}))}function An(e){let{overlay:t,title:a,chipData:r,handleSelection:n,handleSelectionChange:o=()=>{},fieldData:s,allowSelectingMultiple:l=!0,lockSharedFields:d=!0,disabledFunc:c,unlinkingStates:u,showSearch:h=!0}=e;const[p]=(0,P.B)(),[m,g]=(0,i.useState)((()=>[])),[v,y]=(0,i.useState)((()=>[])),{disabled:f,message:b}=c?c(m.concat(v),p):{};return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:a,footer:(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{"data-testid":"field-selector-cancel-save-fields",onClick:()=>t.close()},p("common-ui:cancel.action","Cancel")),(0,k.Y)(Z.A,{"data-testid":"field-selector-save-fields",onClick:()=>{n(m,v),t.close()},emphasis:"high",disabled:f},p("field-selector-overlay.save.button","Save Fields")))}),(0,k.Y)(yn,{allowSelectingMultiple:l,handleSelection:(e,t)=>{g(e),y(t),o(e,t)},chipData:r,fieldData:s,lockSharedFields:d,unlinkingStates:u,showSearch:h}),f&&(0,k.Y)("p",null,(0,k.Y)(un.A,{color:W.A.yellow10}),b))}function wn(e){var t,a;let{field:r,readonly:n=!0}=e;const[o]=(0,P.B)(),s=(0,je.vl)(),{openOverlay:l}=(0,Ti.HQ)(),{restrictedFields:d}=Y(),c=null===d||void 0===d?void 0:d.includes(I.NAME),u=o("edit.shared-field.tooltip-label","Linked Field"),h=o("edit.shared-field.tooltip-description","This field is temporarily disabled since the information connects many names together."),p=null===r||void 0===r||null===(t=r.label)||void 0===t?void 0:t.toLowerCase();return(0,k.Y)(i.Fragment,null,n?(0,k.Y)(Da.A,{"data-testid":(null===r||void 0===r?void 0:r.fieldType)||(null===r||void 0===r?void 0:r.elementType),overline:r.label,primaryText:(0,A.OV)(r)||"",secondaryText:o("edit.shared-field.readonly-caption","This information is connected to many names."),endElement:(0,k.Y)(_r.A,{label:u,description:h,onClick:()=>{},target:(0,k.Y)(Fr.A,null)}),onClick:()=>{}}):(0,k.Y)(Da.A,{"data-testid":(null===r||void 0===r?void 0:r.fieldType)||(null===r||void 0===r?void 0:r.elementType),overline:r.label,primaryText:(0,A.OV)((m=r,g=null===r||void 0===r||null===(a=r.subElements)||void 0===a?void 0:a[0],m&&!g?m:g))||"",secondaryText:o("edit.shared-field.caption","This information is connected to many names. Edit linked {fieldName}.",{fieldName:p}),disabled:c,endElement:(0,k.Y)(Da.A.Icon,{Icon:Ei.A}),onClick:()=>{s({type:"SET_ACTIVE_FIELD_ID",value:null===r||void 0===r?void 0:r.id}),s({type:"SET_EDITING_SHARED_FIELD_ID",value:null===r||void 0===r?void 0:r.id}),l("editSharedFieldPage1")}}));var m,g}function Tn(e){let{field:t}=e;const[a]=(0,P.B)(),i=(0,b.A)(),r=(0,Pr.XQ)(),n=(0,je.vl)(),{openOverlay:o}=(0,Ti.HQ)(),s=(0,ln.hV)();return(0,k.Y)(Da.A,{"data-testid":(null===t||void 0===t?void 0:t.fieldType)||(null===t||void 0===t?void 0:t.elementType),overline:t.displayLabel,primaryText:(0,A.OV)(t)||"",secondaryText:a("edit-event.shared-house-number.caption","Information is highlighted on a different page. Edit in context."),endElement:(0,k.Y)(Da.A.Icon,{Icon:Ei.A}),onClick:()=>{const e=i.thumbnails.findIndex((e=>e.ark===t.partitionKey));n({type:"BATCH_DISPATCHES",value:[{type:"SET_ACTIVE_FIELD_ID",value:t.id},{type:"SET_PREVIOUS_FOCUSED_INDEX",value:r.focusedIndex}]}),s(e,!0),o("editDanglingField")}})}var In=a(54677);const Sn=e=>{const t=[];return e.forEach((e=>{t.find((t=>dt()(t,e)))||t.push(e)})),t},En=(e,t,a,i,r)=>{let n=[];return i.recordId!==t.recordId&&(n=a?(0,Ai.fN)({mainPerson:t,otherPerson:i,images:e,movingMainPersonToOtherRecord:a,keepThisRelationshipId:r}):n.concat((0,Ai.fN)({mainPerson:t,otherPerson:i,images:e,movingMainPersonToOtherRecord:a,keepThisRelationshipId:r}))),n},kn=(e,t,a,i,r)=>{var n;const o=null===(n=e.superElements)||void 0===n?void 0:n.filter((e=>e.id!==a));return null!==o&&void 0!==o&&o.length&&o[0].id!==i.key?(0,Ai.Yd)({newSuperPartitionKey:t.partitionKey,oldSuperPartitionKey:o[0].partitionKey,subPartitionKey:e.partitionKey,oldSuperId:o[0].id,newSuperId:t.id,subId:e.id,oldElementType:"PERSON",newElementType:"PERSON",extraArgs:{order:r}}):[]},Cn=e=>{var t,a;let i,{el:r,value:n,attribution:o}=e;i="FIELD"===r.elementType?r:null!==r&&void 0!==r&&null!==(t=r.subElements)&&void 0!==t&&t.length?null===r||void 0===r||null===(a=r.subElements)||void 0===a?void 0:a[0]:r;let s=(0,Je.cN)("string"===typeof n?n:n.originalText,o);return n.standard&&(s=(0,Je.nu)(n,i.fieldType,o)),"SEX_CODE"===i.fieldType&&(s=(0,Je.cN)(n.primaryText,o,`http://gedcomx.org/${n.key}`)),{id:i.id,value:s}},xn=(e,t,a,i,r)=>{let n=[];if("NAME_SURN"===e.fieldType){var o;const s=(0,A.rr)([i],null===(o=e.superElements.find((e=>(0,A.rr)([i],e.id))))||void 0===o?void 0:o.id);a?e.superElements.length>1?n.push({type:"REM_SUB",value:{superPartitionKey:s.partitionKey,subPartitionKey:e.partitionKey,superId:s.id,subId:t,elementType:e.elementType}}):n.push({type:"REMOVE_ELEMENT",value:{id:t,partitionKey:e.partitionKey,elementType:e.elementType}}):n=Sn(n.concat((0,Ai.oQ)({nameSurnameElement:s,person:i,images:r})))}else n="NAME_SPRE"===e.fieldType||"NAME_PATR"===e.fieldType||"NAME_MATR"===e.fieldType?Sn(n.concat((0,Ai.td)({extensionField:e,person:i,images:r}))):Sn(n.concat((0,Ai.Uk)({element:e})));return n},Yn=(e,t)=>{let a=!1,i="",r="";return Object.entries(e).forEach((e=>{let[n,o]=e;"NAME_SPRE"!==o&&"NAME_PATR"!==o&&"NAME_MATR"!==o||(a=!0),"NAME_SURN"===o&&(i=(0,$e.Vs)(),r=t.partitionKey);const s=(0,A.rr)([t],n);s&&("REMOVED"===o||"NAME_SPRE"!==s.fieldType&&"NAME_PATR"!==s.fieldType&&"NAME_MATR"!==s.fieldType?"NAME_SURN"===s.fieldType&&s.superElements.forEach((e=>{(0,A.rr)([t],e.id)&&(i=e.id,r=e.partitionKey)})):a=!0)})),{hasSecondarySurnameEl:a,surnameElId:i,surnamePartitionKey:r}},Nn=e=>{let{values:t,images:a,selectedPersonId:i,inPanelStack:r,formState:n,currentImageArk:o}=e,s=[];const l=(0,A.Qp)(a,o),d=(0,A.rr)([l],i);let c="";const{hasSecondarySurnameEl:u,surnameElId:h,surnamePartitionKey:p}=Yn(t,d);return Object.entries(t).forEach((e=>{let[o,l]=e;const m={comment:"",reasonId:In.LX,app:qe.zQ},g=(0,A.rr)([d],o);if(g){if("REMOVED"===l||"REMOVED"===(null===l||void 0===l?void 0:l.key))s=s.concat(xn(g,o,u,d,a));else if(n.dirtyFields[o])if("NAME"===g.elementType)s.push({type:"SET_NAME_TYPE",value:{id:o,partitionKey:d.partitionKey,nameType:l}});else{const{id:e,value:t}=Cn({el:g,value:l,attribution:m});s.push({type:"ADD_FV",value:{partitionKey:g.partitionKey,id:e,fieldValue:t}})}}else if("primaryRadio"===o)n.dirtyFields[o]&&s.push({type:"SET_PRIMARY",value:{id:i,partitionKey:d.partitionKey,primary:"yes"===l}});else if(o.includes("fieldType")||o.includes("nameField")||o.includes("nameSuper")||o.includes("newNameElement")||Object.keys(t).includes(`${o}_nameField`)||Object.keys(t).includes(`${o}_newNameElement`))if(o.includes("nameField")||o.includes("nameSuper")||!Object.keys(t).includes(`${o}_nameField`)||"REMOVED"===l)!o.includes("newNameElement")&&Object.keys(t).includes(`${o}_newNameElement`)&&(s=s.concat((0,Ai.vc)({partitionKey:d.partitionKey,nameElementId:o,nameType:l,personId:d.id})));else{const e=t[`${o}_nameField`],a=A.u0[e],i=t[`${o}_nameSuper`],r=(0,Je.cN)(l,m);if("NAME_SPRE"===e||"NAME_PATR"===e||"NAME_MATR"===e)if(h){var v;if((0,A.Qv)(h,[d])){const e=(0,A.rr)([d],h);s=s.concat((0,Ai.qq)(e))}const t=d.subElements.find((e=>"NAME"===e.elementType)),a=null===(v=s.find((e=>"ADD_SUB"===e.type&&e.value.superId===t.id)))||void 0===v?void 0:v.value.subId;s=s.concat((0,Ai.h8)({partitionKey:p,superId:a||h,fieldType:e,fieldValue:r,superElementType:"NAME_SURNAME"}))}else s=s.concat((0,Ai.iu)({partitionKey:d.partitionKey,nameSuperId:i,fieldValue:r,fieldType:e,elementType:a,nameFieldId:o}));else s=s.concat((0,Ai.iu)({partitionKey:d.partitionKey,nameSuperId:i,fieldValue:r,fieldType:e,elementType:a,nameFieldId:o,nameElementId:"NAME_SURNAME"===a?h:(0,$e.Vs)()}))}else if("REMOVED"!==l){var y;let e=(0,Je.cN)(l,m);A.AZ.includes(null===l||void 0===l?void 0:l.key)&&(e=(0,Je.cN)(l.primaryText,m,`http://gedcomx.org/${l.key}`));const a=r("editAge")?(null===(y=d.subElements.find((e=>"AGE"===e.elementType)))||void 0===y?void 0:y.id)||c:d.id,i=r("editAge")?"AGE":"PERSON";if(a||"AGE"!==i){if("string"===typeof t[o]&&t||"object"===typeof t[o]&&t[o].key){const r={partitionKey:d.partitionKey,superId:a,id:o,fieldType:t[`${o}_fieldType`],fieldValue:e,superElementType:i};s=s.concat((0,Ai.h8)(r))}}else{const a={partitionKey:d.partitionKey,personId:d.id,id:o,fieldType:t[`${o}_fieldType`],fieldValue:e};s=s.concat((0,Ai.Uy)(a));const i=s.find((e=>"CREATE_ELEMENT"===e.type&&"AGE"===e.value.elementType));c=i.value.id}}})),a.forEach((e=>{e.subElements.forEach((e=>{s.push({type:"SET_RECORD_PERSON_IDS",value:e.id})}))})),s},Rn=e=>{let{values:t,images:a,selectedPersonId:i,highlightsFieldInfo:r,inPanelStack:n,formState:o,currentImageArk:s}=e;const l=Nn({values:t,images:a,selectedPersonId:i,inPanelStack:n,formState:o,currentImageArk:s}),d=l.find((e=>e.value.subId===r.id));return l.filter((e=>e.value.id===r.id||e===d||e.value.id===d.value.superId||e.value.subId===d.value.superId))};function Pn(e){e({type:"SET_ACTIVE_FIELD_ID",value:""})}function On(e){var t,a;let{element:i,r2Dispatch:r}=e;r({type:"SET_ACTIVE_FIELD_ID",value:null!==i&&void 0!==i&&i.subElements?null===i||void 0===i||null===(t=i.subElements)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.id:i.id})}function _n(e,t){if("undefined"!==typeof t.formState.defaultValues[e.id])t.setValue(e.id,"REMOVED");else{const a=t.getValues();Object.keys(a).forEach((t=>{t.includes(e.id)&&delete a[t]})),t.reset(a)}}const Fn=(0,y.Ay)("rip:EditPersonFormElement");function Dn(e){let{field:t,showEditHighlight:a=!0,enableLockSharedField:r=!0}=e;const n=(0,je.vl)(),o=(0,b.A)(),{restrictedFields:s}=Y(),l=null===s||void 0===s?void 0:s.includes(I.NAME),d=null===s||void 0===s?void 0:s.includes(I.RACE),c=(0,A._Y)(t,o.images),u=r&&c>1,h=t.isDangling,p=(0,A.Qp)(o.images,null===o||void 0===o?void 0:o.currentImageArk),m=(0,A.Tc)(t,null===p||void 0===p?void 0:p.template,null===p||void 0===p?void 0:p.templateToImageMapping),g=(0,A.Pe)(t,m);Fn({field:t,fieldType:null===t||void 0===t?void 0:t.fieldType,isEditable:g,numberOfSharedSupers:c,template:null===p||void 0===p?void 0:p.template,fieldTemplateMapping:m});return(0,k.Y)(i.Fragment,null,!u&&h&&(0,k.Y)(Tn,{field:t}),u&&(0,k.Y)(wn,{field:t,readonly:(0,A.mk)(t,o.images)||!g}),!u&&!h&&(0,k.Y)(i.Fragment,null,(0,Ni.YL)(t)&&(0,k.Y)(mr.kV,{"data-testid":(null===t||void 0===t?void 0:t.fieldType)||(null===t||void 0===t?void 0:t.elementType),name:t.id,key:t.id,label:t.label,placeholder:t.label,standardize:!0,onFocus:()=>{On({element:t,r2Dispatch:n})},onBlur:()=>Pn(n),clearOnClickAway:!0}),(0,Ni.vE)(t)&&(0,k.Y)(mr.nW,{"data-testid":(null===t||void 0===t?void 0:t.fieldType)||(null===t||void 0===t?void 0:t.elementType),name:t.id,key:t.id,label:t.label,placeholder:t.label,standardize:!0,onFocus:()=>{On({element:t,r2Dispatch:n})},onBlur:()=>Pn(n),clearOnClickAway:!0}),!(0,Ni.YL)(t)&&!(0,Ni.vE)(t)&&(0,k.Y)(mr.YJ,{"data-testid":(null===t||void 0===t?void 0:t.fieldType)||(null===t||void 0===t?void 0:t.elementType),name:t.id,key:t.id,label:t.label,placeholder:t.label,maxLength:256,disabled:t.fieldType.includes("NAME")?l:!!t.fieldType.includes("RACE")&&d,onFocus:()=>{On({element:t,r2Dispatch:n})},onBlur:()=>Pn(n)}),a&&(0,k.Y)(Tr,{field:t})))}function Mn(e){let{finished:t=()=>{},successHandler:a=()=>{},saveChangesOverlay:r,formName:n,handleSubmit:o,disableSave:s}=e;const{rip_sharedImageViewer_saveChanges:l,rip_sharedImageViewer_sls_actions_splunk_debugger:d}=(0,L.h)(["rip_sharedImageViewer_saveChanges","rip_sharedImageViewer_sls_actions_splunk_debugger"]),c=(0,Ae.l)(),u=(0,je.mS)(),h=(0,je.vl)(),[p]=(0,P.B)(),m=(0,i.useRef)(null),{formState:v,getValues:y}=(0,ur.Hj)(),{isValid:f}=v,[b,A]=(0,i.useState)(),[w,T]=(0,i.useState)();return(0,k.Y)(i.Fragment,null,(0,k.Y)(J.Ay,{alignX:"end",gutters:"md"},(0,k.Y)(Z.A,{form:n,onClick:()=>{null!==v&&void 0!==v&&v.isDirty?r.open():(r.close(),h({type:"REVERT_HIGHLIGHTS",value:{}}),a())}},p("edit-index.cancel.button","Cancel")),(0,k.Y)(Z.A,{disabled:w||s,emphasis:"high",Icon:w&&g.A,form:n,type:"submit",onClick:async()=>{if(!f)return;let e;n&&(0,vi.sx)({event_name:`${n.replaceAll("-","_").replace("edit_","")}_edit`,link_name:`Edit: ${n.replace("edit-","").split("-").map((e=>e.replace(e[0],e[0].toUpperCase()))).join(" ")}: Save`}),T(!0);try{e=o(y());const{sls:i,dispatches:n}=e;await(0,Se.fD)({sls:i,dispatches:n,saveChangesFlag:l,slsActionsSplunkDebugger:d,userId:u.userId,appName:qe.zQ,fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],dispatch:c,successHandler:a,finalHandler:()=>r.close(),errorHandler:e=>{var t,a;A(e),(0,$e.Yt)(e,null,{codeId:99,sls:i,status:null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status,responseBody:null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data})}}),T(!1),t()}catch(i){A(i),(0,$e.Yt)(i,null,{codeId:99,sls:null===i||void 0===i?void 0:i.sls,dispatches:null===i||void 0===i?void 0:i.dispatches})}},ref:m},p("edit-index.save-changes.button","Save Changes"))),(0,k.Y)(Ui,{disabled:w,overlay:r,onDiscard:()=>{r.close(),h({type:"REVERT_HIGHLIGHTS",value:{}}),a()},onSave:()=>{m.current.click()},formId:"edit-person-form"}),(0,k.Y)(it,{error:b,setError:A,title:p("save-error-overlay.heading","Unable to Save Changes"),message:p("save-error-overlay.content-generic","Your changes were not saved.  Please try again later.")}))}const Hn=()=>{const{recordEditHighlights:e,selectedRecordId:t,referenceRecordHighlights:a,splitScreen:r}=(0,je.mS)(),{recordDisplayHighlightsApi:n,splitScreenRecordDisplayHighlightsApi:o}=(0,je.Z0)();return(0,i.useCallback)((()=>{(0,ha.eP)(null===e||void 0===e?void 0:e.filter((e=>e.id===t)),n),r&&(0,ha.eP)(null===a||void 0===a?void 0:a.filter((e=>e.id===t)),o)}),[n,e,a,t,r,o])},Ln=e=>{var t;let{debug:a,debugMessage:r="Unsaved changes overlay called: ",methods:n,overlay:o,forceWarning:s=!n,panelId:l}=e;const{subscribe:d,unsubscribe:c}=(0,Ti.HQ)(),u=(0,i.useCallback)((e=>{var t;let i=(null===n||void 0===n||null===(t=n.formState)||void 0===t?void 0:t.isDirty)||s;return l&&(i=e===l&&i),a&&a(r,i),i&&o.open(),!i}),[null===n||void 0===n||null===(t=n.formState)||void 0===t?void 0:t.isDirty,o,a,r,s,l]);return(0,i.useEffect)((()=>(d(u),()=>{c(u)})),[]),{subscriber:u}},zn=(0,y.Ay)("rip:R2:EditOtherFields");const Vn=function(){const e=(0,b.A)(),t=(0,je.mS)(),a=(0,je.vl)(),[r]=(0,P.B)(),n=function(e){var t;return null===e||void 0===e||null===(t=e.fields)||void 0===t?void 0:t.reduce(((e,t)=>{var a;return null!==(a=t.elementTypes)&&void 0!==a&&a.includes("PERSON")&&"RACE_OR_COLOR"!==t.fieldType&&e.push({value:t.fieldType,label:t.displayLabel}),e}),[])}(e.types),o=(0,$.Ay)(),[s,l]=(0,i.useState)([]),d=Hn(),{editOtherFieldsOverlay:c,editHighlightsOverlay:u,closeOverlay:h,topMostPanel:p,inPanelStack:m}=(0,Ti.HQ)(),g=(0,$.Ay)(),{displayHighlightsApi:v,splitScreenDisplayHighlightsApi:y}=(0,je.Z0)(),f=vr.Ik().shape({}),w=(0,ur.SV)({mode:"all",resolver:(0,gr.t)(f),defaultValues:{}}),{restrictedFields:T}=Y(),S=null===T||void 0===T?void 0:T.includes(I.OTHER),E=(0,A.Qp)(null===e||void 0===e?void 0:e.images,e.currentImageArk),C=(0,A.rr)([E],null===t||void 0===t?void 0:t.selectedPersonId),x=(0,i.useMemo)((()=>{var e;return null===C||void 0===C||null===(e=C.subElements)||void 0===e?void 0:e.filter((e=>{var t,a;return(!e.subElements||"FIELD"===e.elementType)&&"SEX_CODE"!==e.fieldType&&"RACE_OR_COLOR"!==e.fieldType&&"AGE"!==e.elementType&&(null===(t=e.typeData)||void 0===t?void 0:t.displayable)&&(null===(a=e.typeData)||void 0===a?void 0:a.editable)}))}),[C]),{setValue:N,reset:R}=w,O=r("edit-other-fields.heading","Additional Fields"),_=r("edit-other-fields.instructions","Fix any fields that are incorrect including their highlights. Add or remove fields as necessary."),F=r("edit-index.add-custom.button","Add or Remove {field}",{field:O});c.onClose=()=>{w.formState.isDirty&&(w.reset(),l(on()(x)))},(0,i.useEffect)((()=>{const e={};x&&(0,$e._A)(e,x),R(e)}),[x,R]),(0,i.useEffect)((()=>{if(c.isOpen&&"editOtherFields"===p()&&!u.isOpen){const r=e.types.fields.filter((e=>{var t;return(null===(t=e.elementTypes)||void 0===t?void 0:t.includes("PERSON"))&&"RACE_OR_COLOR"!==e.fieldType})).map((e=>e.fieldType)),n=(e,a)=>a.filter((e=>e.personIds.includes(t.selectedPersonId))).filter((e=>r.includes(e.fieldType))).filter((t=>(null===t||void 0===t?void 0:t.imageId)===e));var a,i;if((0,ha.eP)(n(e.currentImageArk,t.editHighlights),v),t.splitScreen)(0,ha.eP)(n(null===e||void 0===e||null===(a=e.thumbnails)||void 0===a||null===(i=a[t.referenceFocusedIndex])||void 0===i?void 0:i.ark,t.referenceEditHighlights),y);d()}}),[v,u.isOpen,c.isOpen,t.editHighlights,t.referenceEditHighlights,t.referenceFocusedIndex,t.selectedPersonId,t.splitScreen,d,y,e.currentImageArk,null===e||void 0===e?void 0:e.thumbnails,e.types.fields,p]),Ln({debug:zn,debugMessage:"Unsaved changes overlay called: ",methods:w,overlay:g}),(0,i.useEffect)((()=>{l(on()(x))}),[x]);const D=a=>{const i=Nn({...e,...t,values:a,formState:w.formState,inPanelStack:m,currentImageArk:e.currentImageArk}).concat((0,Ai.Aq)(e.images,e.currentImageArk,t.editHighlights)).concat((0,Ai.Aq)(e.images,e.currentImageArk,t.referenceEditHighlights));return{sls:(0,wi.q)(i),dispatches:i}};return(0,i.useEffect)((()=>{const i=(0,A.rr)(e.images,t.highlightsFieldInfo.id);if("editSharedHighlightPage2"===p()&&0===t.editDispatches.length&&!i){const i=Rn({...e,...t,inPanelStack:m,values:w.getValues(),formState:w.formState,currentImageArk:e.currentImageArk});a({type:"SET_EDIT_DISPATCHES",value:i})}}),[m,w,a,t,e,p]),zn("Render: ",{otherFields:s,otherFieldData:x,selectedPerson:C,isDirty:w.formState.isDirty,values:w.getValues()}),(0,k.Y)(i.Fragment,null,(0,k.Y)(pr.Ay,{onSubmit:D,methods:w,id:"edit-other-fields"},(0,k.Y)(hi.A,(0,j.A)({},c,{close:()=>{w.formState.isDirty?g.open():(a({type:"REVERT_HIGHLIGHTS",value:{}}),h("editOtherFields"))},headingColor:"green",title:r("edit-index.edit-person.heading","Edit {personName}",{personName:(0,Ee.hA)({person:C})}),footer:(0,k.Y)(Mn,{saveChangesOverlay:g,handleSubmit:D,successHandler:()=>{h("editOtherFields")},formName:"edit-other-fields"})}),(0,k.Y)(fr,{heading:O,caption:_}),(0,k.Y)(Mi,null,null===s||void 0===s?void 0:s.filter((e=>"MISC_IMAGE_FOLDER_1950_CENSUS"!==(null===e||void 0===e?void 0:e.fieldType)&&"IMAGE_DIMENSIONS"!==(null===e||void 0===e?void 0:e.fieldType))).map((e=>(0,k.Y)(zi,{key:e.id},(0,k.Y)(Dn,{field:e,handleOnFocus:()=>On({r2Dispatch:a,element:e}),handleFieldChange:()=>a({type:"SET_ACTIVE_FIELD_ID",value:""})})))),(0,k.Y)(Si.A,{"data-testid":"add-or-remove-fields",Icon:Ci.A,color:"yellow",emphasis:"low",disabled:S,onClick:o.handleClick},F)),(0,k.Y)(An,{title:F,disabled:S,chipData:[{title:r("edit-index.chips.additional-fields.title","Additional Fields"),data:n,key:"additionalFields"}],fieldData:s,handleSelection:(e,t)=>{const a=[...s];s.filter((a=>!e.map((e=>{let{id:t}=e;return t})).includes(a.id)&&!t.map((e=>{let{id:t}=e;return t})).includes(a.id))).forEach((e=>{_n(e,w);const t=a.findIndex((t=>t.id===e.id));a.splice(t,1)}));const i=e.filter((e=>!e.id));i&&(i.reverse(),i.forEach((e=>{const t={label:e.label,fieldType:e.value.split(":")[0],id:(0,$e.Vs)(),added:!0};a.push(t),N(t.id,""),N(`${t.id}_fieldType`,e.value.split(":")[0])}))),l(a)},overlay:o}))))};var Bn=a(52939),Gn=a(56284),Un=a.n(Gn);function Kn(e){let{currentPersonRecord:t,selectedPerson:a,leaveOutCurrentRecordResults:r,referenceFocusedIndex:n,splitScreen:o}=e;const[s]=(0,P.B)(),[l,d]=(0,i.useState)([]),c=(0,b.A)();return(0,i.useEffect)((()=>{if(null!==c&&void 0!==c&&c.thumbnails&&null!==c&&void 0!==c&&c.currentImageArk&&null!==c&&void 0!==c&&c.images){var e,i,l,u,h;const p=null===c||void 0===c||null===(e=c.thumbnails)||void 0===e?void 0:e.findIndex((e=>e.ark===c.currentImageArk)),m=p+1<(null===c||void 0===c||null===(i=c.thumbnails)||void 0===i?void 0:i.length)?p+1:null,g=0!==p?p-1:null,v=(0,A.Qp)(null===c||void 0===c?void 0:c.images,null===c||void 0===c?void 0:c.currentImageArk),y=m?(0,A.Qp)(null===c||void 0===c?void 0:c.images,null===c||void 0===c?void 0:c.thumbnails[m].ark):null,f=g?(0,A.Qp)(null===c||void 0===c?void 0:c.images,null===c||void 0===c||null===(l=c.thumbnails[g])||void 0===l?void 0:l.ark):null,b=o&&n!==p?(0,A.Qp)(null===c||void 0===c?void 0:c.images,null===c||void 0===c||null===(u=c.thumbnails[n])||void 0===u?void 0:u.ark):null,w=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.sort(((e,t)=>(null===e||void 0===e?void 0:e.primary)>(null===t||void 0===t?void 0:t.primary)?-1:1)).map((e=>{const i={key:e.id,primaryText:(0,Ee.hA)({person:e,justOneName:!0}),group:t};if(e.primary&&(i.secondaryText=s("edit-relationships.autosuggest.primary","(Principal)")),a&&e.partitionKey!==(null===c||void 0===c?void 0:c.currentImageArk)){let t;e.partitionKey===(null===f||void 0===f?void 0:f.partitionKey)&&(t=g+1),e.partitionKey===(null===y||void 0===y?void 0:y.partitionKey)&&(t=m+1),t&&e.primary?i.secondaryText=`${i.secondaryText} ${s("edit-relationships.autosuggest.pageNumber","(page {pageNumber})",{pageNumber:t})}`:t&&(i.secondaryText=s("edit-relationships.autosuggest.pageNumber","(page {pageNumber})",{pageNumber:t}))}return i})).filter((e=>(0,Ee.cP)(e.primaryText.trim())))},T=r?(0,A.q5)(t,"PERSON").map((e=>e.id)):[];let I=[...null!==v&&void 0!==v&&v.subElements?v.subElements.flatMap((e=>w((0,A.q5)(e,"PERSON").filter((e=>e!==a&&!T.includes(e.id))),s("edit-relationships.autosuggest.image-group.this","IN THIS IMAGE")))):[],...null!==v&&void 0!==v&&v.floatingElements?w((0,A.q5)({subElements:v.floatingElements},"PERSON").filter((e=>e!==a)),s("edit-relationships.autosuggest.image-group.this","IN THIS IMAGE")):[]];if(I=I.concat(null!==b&&void 0!==b&&b.subElements?null===(h=b.subElements)||void 0===h?void 0:h.flatMap((e=>w((0,A.q5)(e,"PERSON"),s("edit-relationships.autosuggest.image-group.split-screen","NAMES ON SPLIT SCREEN (PAGE {page})",{page:n+1})))):[]).concat(null!==b&&void 0!==b&&b.floatingElements?w((0,A.q5)({subElements:b.floatingElements},"PERSON"),s("edit-relationships.autosuggest.image-group.split-screen","NAMES ON SPLIT SCREEN (PAGE {page})",{page:n+1})):[]),t&&!r){const e=(0,A.q5)(t,"PERSON").filter((e=>e!==a));I=[...w(e,s("edit-relationships.autosuggest.record-group","IN THIS RECORD"),!0),...I]}d(I)}}),[c,a,s,t,n,o,r]),l}var qn=a(19117),jn=a(22283),$n=a(62347),Wn=a(62506);const Xn="url(\"data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' stroke='%23333' stroke-width='3' stroke-dasharray='6%2c 14' stroke-dashoffset='0' stroke-linecap='square'/%3e%3c/svg%3e\")",Qn={backgroundImage:Xn};const Jn=function(e){let{id:t,children:a,style:i,dragHandle:r,childrenStyle:n,dragHandleStyle:o={},disabled:s=!1,data:l,testId:d}=e;const{attributes:c,listeners:u,setNodeRef:h}=(0,Wn.PM)({id:t,disabled:s,data:l}),p=r?{}:u;return(0,k.Y)("div",(0,j.A)({ref:h,style:i},p,c,{"data-testid":d}),(0,k.Y)("div",{style:n},a),r&&(0,k.Y)("div",(0,j.A)({},u,{style:o}),r))};const Zn=function(e){let{id:t,children:a,data:i,setOverStyle:r=()=>{}}=e;const{setNodeRef:n,isOver:o,over:s}=(0,Wn.zM)({id:t,data:i});return(0,k.Y)("div",{ref:n,css:r(o,s)},a)},eo={name:"jcpz51",styles:"padding:12px 8px;cursor:grab;align-self:center;"},to={display:"flex",backgroundColor:W.A.gray00,borderRadius:"6px"},ao={display:"flex",backgroundColor:W.A.blue30,marginInlineStart:"12px",borderStartEndRadius:"6px",borderEndEndRadius:"6px"},io={flexGrow:1},ro={name:"1q3bvk4",styles:"min-height:120px;padding:10px;"};function no(e){let{name:t,otherName:a}=e;return(0,k.Y)(Jn,{id:"relationship",style:to,dragHandleStyle:ao,childrenStyle:io,dragHandle:(0,k.Y)("div",{css:eo},(0,k.Y)($n.A,null))},(0,k.Y)(Bn.A,null,(0,k.Y)(Da.A,{primaryText:t,startElement:(0,k.Y)(Da.A.Icon,{Icon:Ha.A})}),(0,k.Y)(Da.A,{primaryText:a,startElement:(0,k.Y)(Da.A.Icon,{Icon:Ha.A})})))}function oo(e){let{id:t,relationships:a,selectedRecord:r,name:n,otherName:o}=e;const[s]=(0,P.B)(),l=(0,b.A)(),[d,c]=(0,i.useState)(!1),u=(0,k.AH)("max-height:140px;overflow-x:hidden;overflow-y:",d?"scroll":"hidden",";background-color:",W.A.gray00,";");return(0,k.Y)(Zn,{id:t},(0,k.Y)("div",{style:Qn,css:ro},(0,k.Y)(re.H3,{size:"H6"},s("edit-relationships.choose-record-overlay.recordX","Record {number}",{number:"current"===t?"1":"2"}),(0,k.Y)(ne.A,null,s("edit-relationships.choose-record-overlay.move-here","Move Relationship Here"))),(0,k.Y)(ae.A,{size:"xs"}),r===t&&(0,k.Y)(no,{name:n,otherName:o}),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)("div",{css:u},(0,k.Y)(Bn.A,null,a.map((e=>{const t=(0,A.rr)(l.images,e.otherPersonId);return(0,k.Y)(Da.A,{key:e.id,overline:`${null!==t&&void 0!==t&&t.primary?`${s("edit-relationships.choose-record-overlay.principal","Principal")} | `:""}${e.label}`,primaryText:e.value,startElement:(0,k.Y)(Da.A.Icon,{Icon:Ha.A})})})))),a.length>2&&(0,k.Y)(J.Ay,{alignX:"center"},(0,k.Y)(Z.A,{onClick:()=>{c(!d)}},s("edit-relationships.choose-record-overlay.see-more.button","See More")))))}function so(e){let{person:t,otherPerson:a,record1Relationships:n,record2Relationships:o,selectedRecord:s,setSelectedRecord:l}=e;const[d,c]=(0,i.useState)(!1),u=(0,Ee.hA)({person:t}),h=(0,Ee.hA)({person:a}),p=(0,jn.Ay)();return(0,k.Y)(i.Fragment,null,(0,k.Y)(O.x,{i18nKey:"edit-relationships.choose-record-overlay.drag-instructions"},(0,k.Y)("strong",null,"Drag"),(0,k.Y)("i",null," ",{name:u})," and",(0,k.Y)("i",null," ",{otherName:h})," to the correct record. Record names have to be in the same record to have relationships."),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(Wn.Mp,{onDragStart:()=>{c(!0)},onDragEnd:e=>{c(!1),l(e.over.id)}},(0,k.Y)(Ye.A,{backgroundColor:W.A.blue03},(0,k.Y)(J.Ay,{wrap:p({default:!0,sm:!1})},(0,k.Y)(oo,{growX:!0,relationships:n,id:"current",selectedRecord:s,name:u,otherName:h}),(0,k.Y)(oo,{growX:!0,relationships:o,id:"other",selectedRecord:s,name:u,otherName:h}))),(0,r.createPortal)((0,k.Y)(Wn.Hd,{modifiers:[qn.Q_],dropAnimation:null,style:{borderInlineStart:`4px solid${W.A.blue10}`,boxShadow:"0 0 5px rgb(68 68 68 / 0.6)",background:"white"}},d&&(0,k.Y)(no,{name:u,otherName:h})),document.body)))}function lo(e){let{personBeingMoved:t,personStaying:a,record1Relationships:r,record2Relationships:n,selectedRecord:o}=e;const[s]=(0,P.B)(),l=(0,b.A)(),[d,c]=(0,i.useState)(!1),u=(0,Ee.hA)({person:t}),h=(0,Ee.hA)({person:a}),p="current"===o?n:r,m="current"===o?r:n,g=(0,k.AH)("max-height:140px;overflow-x:hidden;overflow-y:",d?"scroll":"hidden",";");return(0,k.Y)(i.Fragment,null,0===p.length&&(0,k.Y)("div",null,(0,k.Y)(O.x,{i18nKey:"edit-relationships.choose-record-overlay.move-person"},"Move ",(0,k.Y)("i",null,{name:u})," to",(0,k.Y)("strong",null," Record ",{recordNum:"current"===o?"1":"2"})),(0,k.Y)(Bn.A,null,(0,k.Y)(Da.A,{primaryText:u,startElement:(0,k.Y)(Da.A.Icon,{Icon:Ha.A})}),(0,k.Y)(Da.A,{primaryText:h,startElement:(0,k.Y)(Da.A.Icon,{Icon:Ha.A})})),m.length>0&&(0,k.Y)(i.Fragment,null,s("edit-relationships.choose-record-overlay.relationships-of","Relationships of {name}:",{name:h})),(0,k.Y)(Bn.A,null,m.map((e=>{const t=(0,A.rr)(l.images,e.otherPersonId);return(0,k.Y)(Da.A,{key:e.id,overline:`${null!==t&&void 0!==t&&t.primary?`${s("edit-relationships.choose-record-overlay.principal","Principal")} | `:""}${e.label}`,primaryText:e.value,startElement:(0,k.Y)(Da.A.Icon,{Icon:Ha.A}),endElement:(0,k.Y)(Da.A.Icon,{Icon:Kt.A,onClick:()=>{(0,A.tG)(t,e,l.currentImageArk)}})})})))),p.length>0&&(0,k.Y)("div",null,(0,k.Y)(O.x,{i18nKey:"edit-relationships.choose-record-overlay.approve-instructions"},"The old relationships of ",(0,k.Y)("i",null,{name:u})," will need to be removed.",(0,k.Y)("strong",null," Approve")," removal of relationships below."),"\xa0",(0,k.Y)(rn.A,{to:"https://www.familysearch.org/en/help/helpcenter/article/how-do-i-add-a-name-to-a-relationship-in-historical-records-when-the-name-is-currently-connected-to-the-wrong-record"},s("edit-relationships.choose-record-overlay.learn-more","Learn more")),(0,k.Y)(Bn.A,null,(0,k.Y)(Da.A,{primaryText:u,overline:null!==t&&void 0!==t&&t.primary?s("edit-relationships.choose-record-overlay.principal","Principal"):"",startElement:(0,k.Y)(Da.A.Icon,{Icon:Ha.A})})),s("edit-relationships.choose-record-overlay.view-relationships","The following relationships will be removed:"),(0,k.Y)("div",{css:g},(0,k.Y)(Bn.A,null,p.map((e=>{const t=(0,A.rr)(l.images,e.otherPersonId);return(0,k.Y)(Da.A,{key:e.id,overline:`${null!==t&&void 0!==t&&t.primary?`${s("edit-relationships.choose-record-overlay.principal","Principal")} | `:""}${e.label}`,primaryText:e.value,startElement:(0,k.Y)(Da.A.Icon,{Icon:Ha.A}),endElement:(0,k.Y)(Da.A.Icon,{Icon:Kt.A,onClick:()=>{(0,A.tG)(t,e,l.currentImageArk)}})})}))))),p.length>2?(0,k.Y)(Z.A,{onClick:()=>c(!d)},s("edit-relationships.choose-record-overlay.see-more.button","See More")):null)}const co={name:"hoe9xz",styles:"align-self:center;"};function uo(e){let{overlay:t,onCancel:a,person:r,otherPerson:n,record1Relationships:o,record2Relationships:s,setMovingPersonToOtherRecord:l}=e;const[d]=(0,P.B)(),[c,u]=(0,i.useState)(1),[h,p]=(0,i.useState)("current"),m="current"===h?s:o,g=1===c||m.length>0?d("edit-relationships.choose-record-overlay.before-adding","Before adding this relationship"):d("edit-relationships.choose-record-overlay.approve-change","Approve the change");return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:g}),1===c&&(0,k.Y)(so,{record1Relationships:o,record2Relationships:s,person:r,otherPerson:n,selectedRecord:h,setSelectedRecord:p}),2===c&&(0,k.Y)(lo,{personStaying:"current"===h?r:n,personBeingMoved:"current"===h?n:r,record1Relationships:o,record2Relationships:s,selectedRecord:h}),(0,k.Y)(et.Ay,null,1===c&&(0,k.Y)(tt.A,{alignY:"middle"},(0,k.Y)(Z.A,{onClick:()=>{t.close(),p("current"),a&&a()},"data-testid":"choose-record-overlay-cancel"},d("edit-relationships.choose-record-overlay.cancel.button","Cancel")),(0,k.Y)("span",{css:co},d("edit-relationships.choose-record-overlay.stepXof2","Step {step} of 2",{step:"1"})),(0,k.Y)(Z.A,{onClick:()=>{u(2)},disabled:!h,emphasis:"high","data-testid":"choose-record-overlay-next"},d("edit-relationships.choose-record-overlay.next.button","Next"))),2===c&&(0,k.Y)(tt.A,{alignY:"middle"},(0,k.Y)(Z.A,{onClick:()=>{u(1)},"data-testid":"choose-record-overlay-back"},d("edit-relationships.choose-record-overlay.back.button","Back")),(0,k.Y)("span",{css:co},d("edit-relationships.choose-record-overlay.stepXof2","Step {step} of 2",{step:"2"})),m.length>0&&(0,k.Y)(at.A,{onClick:()=>{t.close(),u(1),l("other"===h),p("current")},Icon:gi.A,"data-testid":"choose-record-overlay-approve-removal"},d("edit-relationships.choose-record-overlay.remove.button","Approve Removal")),0===m.length&&(0,k.Y)(Z.A,{emphasis:"high",Icon:pi.A,onClick:()=>{t.close(),l("other"===h),p("current")},"data-testid":"choose-record-overlay-approve"},d("edit-relationships.choose-record-overlay.approve.button","Approve")))))}function ho(){const e=(0,je.mS)(),t=(0,Pr.XQ)(),a=(0,je.vl)(),[i]=(0,P.B)();return(0,k.Y)(Z.A,{Icon:ki.A,onClick:()=>{e.splitScreen?a({type:"SET_SPLIT_SCREEN",value:!1}):(a({type:"SET_SPLIT_SCREEN",value:!0}),a({type:"SET_REFERENCE_FOCUSED_INDEX",value:t.focusedIndex}),a({type:"SET_SPLIT_SCREEN_IMAGE_GRID",value:!0}))},"data-testid":"splitScreenToggle"},e.splitScreen?i("edit-relationships.close-split-screen","Close split-screen"):i("edit-relationships.open-split-screen","Open split-screen"))}var po=a(56552),mo=a(15732);function go(e){let{overline:t,primaryText:a,initiallyOpen:i,listOverline:r,listPrimaryText:n,listSecondaryText:o}=e;const[s]=(0,P.B)();return(0,k.Y)(Bn.A,null,(0,k.Y)(po.A,{overline:t||s("full-name-corrections.question","QUESTION"),primaryText:(0,k.Y)(Ft.A,null,a),initiallyOpen:i,startElement:(0,k.Y)(Da.A.Icon,{Icon:mo.A,color:W.A.blue70})},(0,k.Y)(Da.A,{overline:r,primaryText:n,secondaryText:o})))}const vo={name:"1vaun1v",styles:"list-style-type:disc;"},yo=(0,y.Ay)("rip:R2:EditRelationships"),fo=["PARENT_CHILD","DIVORCED_COUPLE","DOMESTIC_PARTNERSHIP","FIANCE","COUPLE","SIBLING"],bo=["ADOPTIVE_PARENT","AUNT_OR_UNCLE","PARENT_CHILD_IN_LAW","COUSIN","FOSTER_PARENT","GOD_PARENT","GRAND_PARENT","GUARDIAN_PARENT","RELATIVE","SIBLING_IN_LAW","STEP_PARENT","STEP_SIBLING","SURROGATE_PARENT"];const Ao=function(e){let{personIdOverlay:t,setPersonIdOverlay:a}=e;const r=(0,b.A)(),n=(0,je.mS)(),o=(0,je.vl)(),[s,l]=(0,i.useState)([]),[d,c]=(0,i.useState)([]),[u,h]=(0,i.useState)([]),[p,m]=(0,i.useState)([]),[g,v]=(0,i.useState)([]),[y,f]=(0,i.useState)(!1),w=(0,Er.pm)("https://www.familysearch.org/en/help/helpcenter/article/what-is-the-difference-between-a-record-and-an-image"),T=(0,i.useRef)(null),[I]=(0,P.B)(),S=(0,$.Ay)(),E=(0,$.Ay)(),C=Hn(),{editRelationshipsOverlay:x,editHighlightsOverlay:Y,closeOverlay:N,openOverlay:R,topMostPanel:O,addPersonPage2GenericOverlay:_}=(0,Ti.HQ)(),F=(0,$.Ay)(),[D,M]=(0,i.useState)(!1),H=(0,A.Qp)(null===r||void 0===r?void 0:r.images,null===r||void 0===r?void 0:r.currentImageArk),L=(0,A.rr)([H],n.selectedPersonId),{displayHighlightsApi:z,splitScreenDisplayHighlightsApi:V}=(0,je.Z0)(),B=Object.fromEntries(s.length?s.map((e=>[e.id,vr.gl().nullable().test("is-invalid-relationship",I("edit-relationships.autosuggest.invalid-relationship-warning","Name can't be both a child and a spouse. Remove field or change the name."),((e,t)=>{if("REMOVED"===e)return!0;let a=!0;return"PARENT_CHILD"===t.parent[`${t.path}_type`]?Object.keys(t.parent).forEach((i=>{var r;i===t.path||i.includes("_")||(null===(r=t.parent[i])||void 0===r?void 0:r.key)!==(null===e||void 0===e?void 0:e.key)||"COUPLE"!==t.parent[`${i}_type`]||(a=!1)})):"COUPLE"===t.parent[`${t.path}_type`]&&Object.keys(t.parent).forEach((i=>{var r;i===t.path||i.includes("_")||(null===(r=t.parent[i])||void 0===r?void 0:r.key)!==(null===e||void 0===e?void 0:e.key)||"PARENT_CHILD"!==t.parent[`${i}_type`]||(a=!1)})),a})).test("is-unique-type-value",I("edit-relationships.autosuggest.unique-type-value-warning","This relation already exist."),((e,t)=>{if("REMOVED"===e)return!0;let a=!0;const i=t.parent[`${t.path}_type`];return Object.keys(t.parent).forEach((r=>{var n;r===t.path||r.includes("_")||(null===(n=t.parent[r])||void 0===n?void 0:n.key)!==(null===e||void 0===e?void 0:e.key)||t.parent[`${r}_type`]!==i||(a=!1)})),a})).test("is-empty",I("FormValidation.notEmpty","Field cannot be empty."),(e=>"REMOVED"===e||(null===e||void 0===e?void 0:e.primaryText)))])):[["defaultEmptyCheck",vr.gl().notRequired()]]),G=vr.Ik().shape(B),U=(0,ur.SV)({mode:"all",resolver:(0,gr.t)(G),defaultValues:{}}),[K,q]=(0,i.useState)(null),X=Ki(K,s,r.currentImageArk,r.thumbnails,n.selectedPersonId);(0,i.useEffect)((()=>{L&&q((0,A.rr)(null===r||void 0===r?void 0:r.images,null===L||void 0===L?void 0:L.recordId))}),[L,r.images]);const Q=(e,t)=>e.label<t.label?-1:e.label>t.label?1:0,ee=Xe(r.types,I).map((e=>{const t=e.relType;return delete e.relType,{...e,reltype:t}})),ie=[{title:I("edit-relationships.most-common-relationships","Most Common Relationships"),key:"common-relationships",data:null===ee||void 0===ee?void 0:ee.filter((e=>fo.includes(e.reltype))).sort(Q)},{title:I("edit-relationships.family-relationships","Family Relationships"),key:"family-relationships",data:null===ee||void 0===ee?void 0:ee.filter((e=>bo.includes(e.reltype))).sort(Q)},{title:I("edit-relationships.other-relationships","Other Relationships"),key:"other-relationships",data:null===ee||void 0===ee?void 0:ee.filter((e=>!fo.includes(e.reltype)&&!bo.includes(e.reltype))).sort(Q)}];"object"===typeof ie[2].data&&ie[2].data.push({label:I("edit-relationships.chips.other","Other"),reltype:"OTHER",value:"Other"});const[ne,oe]=(0,i.useState)(),[se,le]=(0,i.useState)(),[de,ce]=(0,i.useState)(""),[ue,he]=(0,i.useState)([]),[pe,me]=(0,i.useState)([]),{reset:ge}=U,ve=Kn({selectedPerson:L,currentPersonRecord:K,referenceFocusedIndex:n.referenceFocusedIndex,splitScreen:n.splitScreen});Ln({debug:yo,debugMessage:"Relationships subscriber called: ",methods:U,overlay:F});const ye=e=>{let t=(e=>{let{values:t,images:a,selectedPersonId:i,thumbnails:r,currentImageArk:n,movingPersonToOtherRecord:o}=e;const s=(0,A.rr)(a,i),l=(0,A.q5)(s,"RELATIONSHIP");let d=[];Object.entries(t).forEach((e=>{let[c,u]=e;if("REMOVED"!==u&&u){if(!c.includes("_type")&&!c.includes("_order")){const e=l.find((e=>e.id===c)),h=(0,A.rr)(a,u.key);if(d=d.concat(En(a,s,o,h,null===e||void 0===e?void 0:e.id)),e)d=d.concat(kn(e,h,i,u,t[`${c}_order`]));else if("OTHER"!==t[`${c}_type`]){const e=(0,A.H$)({currentImageArk:n,thumbnails:r}),a=o?e:n;d=d.concat((0,Ai.vP)({partitionKey:a,person1ID:"FIRST"===t[`${c}_order`]?u.key:i,person2ID:"FIRST"===t[`${c}_order`]?i:u.key,person1PartitionKey:"FIRST"===t[`${c}_order`]?h.partitionKey:s.partitionKey,person2PartitionKey:"FIRST"===t[`${c}_order`]?s.partitionKey:h.partitionKey,relType:t[`${c}_type`],id:c}))}}}else{const e=l.find((e=>e.id===c));e&&(d=d.concat((0,Ai.Uk)({element:e})))}}));const c=Sn(d);return c.push(c.splice(c.findIndex((e=>"SET_RECORD_PERSON_IDS"===e.type)),1)[0]),c})({...r,...n,values:e,formState:U.formState,movingPersonToOtherRecord:y});return t=t.concat((0,Ai.Aq)(r.images,r.currentImageArk,n.editHighlights).concat((0,Ai.Aq)(r.images,r.currentImageArk,n.referenceEditHighlights))),{sls:(0,wi.q)(t),dispatches:t}},fe=(0,i.useCallback)((()=>{const e=(0,Ie.FA)(L,r.images);p.forEach((t=>{const a=e.findIndex((e=>e.id===t));e.splice(a,1)}));const t=e.concat(u);g.forEach((e=>{const a=t.findIndex((t=>t.id===e.id));var i;-1!==a&&(t[a].value=null===(i=e.value)||void 0===i?void 0:i.primaryText,t[a].label=e.label)})),l(t),U.trigger()}),[L,r.images,u,p,g,U]),be=(0,i.useMemo)((()=>{const e={},t=(0,Ie.FA)(L,r.images);return t&&t.forEach((t=>{e[t.id]=ve.find((e=>e.key===t.otherPersonId))||{key:"",primaryText:""};const a=t.relKey.split("_");e[`${t.id}_type`]=a.slice(0,-1).join("_"),e[`${t.id}_order`]=a[a.length-1]})),e}),[r.images,ve,L]);(0,i.useEffect)((()=>{t||ge(be)}),[be,ge]),(0,i.useEffect)((()=>{u.forEach((e=>{U.setValue(`${e.id}_type`,e.reltype),U.setValue(`${e.id}_order`,e.order)})),g.forEach((e=>{U.setValue(e.id,e.value)})),p.forEach((e=>{U.setValue(e,"REMOVED")}))}),[U.formState.defaultValues,g,u,p,U]),x.onClose=()=>{U.formState.isDirty&&(U.reset(),h([]),m([]),v([]),fe())},(0,i.useEffect)((()=>{fe()}),[fe]);const Ae=(0,i.useCallback)((()=>{const e=U.getValues(),t=Object.keys(e).reduce(((t,a)=>{var i;return null!==(i=e[a])&&void 0!==i&&i.key&&t.push(e[a].key),t}),[]),a=t.concat(null===L||void 0===L?void 0:L.id),i=Un()(null===a||void 0===a?void 0:a.flatMap((e=>n.editHighlights.filter((t=>t.personIds.includes(e))))),"id"),o=Un()(null===a||void 0===a?void 0:a.flatMap((e=>n.referenceEditHighlights.filter((t=>t.personIds.includes(e))))),"id"),s=(e,t)=>null===t||void 0===t?void 0:t.filter((e=>["NAME_SURN","NAME_SUF","NAME_GN"].includes(e.fieldType))).filter((e=>e.personIds.length>0)).filter((t=>(null===t||void 0===t?void 0:t.imageId)===e));var l,d,c,u;((0,ha.eP)(s(r.currentImageArk,i),z),n.splitScreen)&&(0,ha.eP)(Sn(s(null===r||void 0===r||null===(l=r.thumbnails)||void 0===l||null===(d=l[n.referenceFocusedIndex])||void 0===d?void 0:d.ark,i).concat(s(null===r||void 0===r||null===(c=r.thumbnails)||void 0===c||null===(u=c[n.referenceFocusedIndex])||void 0===u?void 0:u.ark,o))),V);C()}),[z,U,n.editHighlights,n.referenceEditHighlights,n.referenceFocusedIndex,n.splitScreen,null===L||void 0===L?void 0:L.id,C,V,r.currentImageArk,null===r||void 0===r?void 0:r.thumbnails]);(0,i.useEffect)((()=>{x.isOpen&&"editRelationships"===O()&&!Y.isOpen&&Ae()}),[Y.isOpen,x.isOpen,d,O,be,Ae]);const we=(e,t)=>{var a,i;const n=(0,A.rr)(r.images,e.otherPersonId),o=null===n||void 0===n||null===(a=n.subElements)||void 0===a||null===(i=a.find((e=>{var t;return"RELATIONSHIP"===e.elementType&&(null===(t=e.superElements)||void 0===t?void 0:t.find((e=>e.id===(null===L||void 0===L?void 0:L.id))))})))||void 0===i?void 0:i.typeData;if(o){var s,l;const a=(null===(s=e.relKey)||void 0===s||null===(l=s.split("_"))||void 0===l?void 0:l.pop())||e.order;if(a)return(0,Ie.p)({otherPerson:t,order:a,typeData:o})}return null},Te=e=>{var t;const a=U.getValues()[e.id],i=(0,A.rr)(r.images,null===a||void 0===a?void 0:a.key);if(null!==a&&void 0!==a&&a.key){const t=i.recordId;if(t&&L.recordId!==t){const t=(0,Ie.FA)(L,r.images),a=(0,Ie.FA)(i,r.images);oe(L),le(i),he(t),me(a),ce(e.id),E.handleClick()}}const n={...e,value:null===(t=U.getValues()[e.id])||void 0===t?void 0:t.primaryText,label:we(e,se)||e.label},o=s.findIndex((t=>t.id===e.id)),d=s.filter((t=>t.id!==e.id));d.splice(o,0,n),l(d);const c=[...g],u=c.findIndex((t=>t.id===e.id));-1!==u?(c[u].value=U.getValues()[e.id],c[u].label=n.label):c.push({id:e.id,value:U.getValues()[e.id],label:n.label}),v(c)};(0,i.useEffect)((()=>{var e;const i=ve.find((e=>e.key===t));if(!1===(null===_||void 0===_?void 0:_.isOpen)&&null!==(e=T.current)&&void 0!==e&&e.id&&null!==i&&void 0!==i&&i.key){const e=s.map((e=>{var t;if(e.id===(null===(t=T.current)||void 0===t?void 0:t.id)){const t={...e,value:null===i||void 0===i?void 0:i.primaryText};return U.setValue(e.id,{key:i.key,primaryText:i.primaryText}),Te(e),U.trigger(),M(!0),t}return e}));l(e),T.current=null,a(null)}}),[L,null===_||void 0===_?void 0:_.isOpen,r.images,ve]);const Se=I("edit-relationships.heading","Relationships"),ke=I("edit-relationships.instructions","Fix any relationships that are incorrect. Add or remove fields as necessary."),Ce=I("edit-index.add-more-info.button","Add More Information",{field:Se});return yo("Render: ",{selectedPerson:L,relationships:s}),(0,k.Y)(i.Fragment,null,(0,k.Y)(pr.Ay,{onSubmit:ye,methods:U,id:"edit-relationships"},(0,k.Y)(hi.A,(0,j.A)({},x,{close:()=>{U.formState.isDirty?F.open():(o({type:"REVERT_HIGHLIGHTS",value:{}}),N("editRelationships"))},headingColor:"green",title:I("edit-index.edit-person.heading","Edit {personName}",{personName:(0,Ee.hA)({person:L})}),footer:(0,k.Y)(Mn,{saveChangesOverlay:F,handleSubmit:ye,successHandler:()=>{N("editRelationships")},formName:"edit-relationships",disableSave:!D})}),(0,k.Y)(fr,{heading:Se,caption:ke}),(0,k.Y)(ae.A,null),(0,k.Y)(go,{primaryText:I("edit-relationships.tip","Help with Relationships"),listPrimaryText:(0,k.Y)(i.Fragment,null,(0,k.Y)("span",null,(0,k.Y)("b",null,I("edit-relationships.tip-1-overline","1. How to move names to the correct record group."))),(0,k.Y)(te.A,{size:"sm"},I("edit-relationships.tip-1-primary","Use the Drag Names tool to move names that belong in other records.")),(0,k.Y)(Z.A,{ref:w.targetRef,onClick:e=>{e.stopPropagation(),w.handleClick()}},I("add-person.learn-more","Learn More")),(0,k.Y)(Z.A,{onClick:()=>R("dragNames")},I("edit-relationships.drag-names","Drag Names")),(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)("span",null,(0,k.Y)("b",null,I("edit-relationships.tip-2-overline","2. How to change the spelling of a name."))),(0,k.Y)("ul",{css:vo},(0,k.Y)("li",null,I("edit-relationships.tip-2-step-1","Find the name you would like to correct.")),(0,k.Y)("li",null,I("edit-relationships.tip-2-step-2","Below the name, click the Edit button.")),(0,k.Y)("li",null,I("edit-relationships.tip-2-step-3","Go to the Essential Information section and edit the name."))),(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)("span",null,(0,k.Y)("b",null,I("edit-relationships.tip-3-overline","3. Is the information on another page?"))),(0,k.Y)(te.A,{size:"sm"},I("edit-relationships.tip-3-primary","If the information is on another page, try entering split-screen mode.")),(0,k.Y)(ho,null),(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)("span",null,(0,k.Y)("b",null,I("edit-relationships.tip-4-overline","4. How to add a new name"))),(0,k.Y)("ul",{css:vo},(0,k.Y)("li",null,I("edit-relationships.tip-4-step-1","Create a new relationship.")),(0,k.Y)("li",null,I("edit-relationships.tip-4-step-2","Start typing in a name. If the name doesn\u2019t exist in the surrounding pages, select Name Not Indexed.")),(0,k.Y)("li",null,I("edit-relationships.tip-4-step-3","Create the new person and save."))))}),(0,k.Y)("div",null,null===s||void 0===s?void 0:s.map((e=>{var t;let a,i,n,s,l=null===(t=U.getValues()[e.id])||void 0===t?void 0:t.key;var d,u,h,p,m;l||(l=null===(d=g.find((t=>t.id===e.id)))||void 0===d||null===(u=d.value)||void 0===u?void 0:u.key);e.value&&(a=(0,A.rr)(r.images,l),i=(null===(h=a)||void 0===h?void 0:h.partitionKey)!==r.currentImageArk,i&&(n=(null===r||void 0===r||null===(p=r.thumbnails)||void 0===p?void 0:p.findIndex((e=>{var t;return e.ark===(null===(t=a)||void 0===t?void 0:t.partitionKey)})))+1,s=null===(m=a)||void 0===m?void 0:m.partitionKey));return(0,k.Y)(zi,{indent:"0",key:e.id},(0,k.Y)(mr.eP,{"data-testid":(null===e||void 0===e?void 0:e.relKey)||(null===e||void 0===e?void 0:e.fieldType),clearOnClickAway:!0,clearable:!0,id:e.id,name:e.id,label:e.label,onFocus:()=>(e=>{var t,a;const i=e.subElements?null===e||void 0===e||null===(t=e.subElements)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.id:e.id,n=e.otherPersonId,s=(0,A.rr)(r.images,n),l=(0,A.q5)(s,"NAME_GN"),d=(0,A.q5)(s,"NAME_SURN"),u=l.map((e=>e.id)).concat(d.map((e=>e.id)));c(u),o({type:"SET_ACTIVE_FIELD_ID",value:i})})(e),disabled:y&&l!==(null===se||void 0===se?void 0:se.id),onSuggestionSelected:()=>{Te(e),U.trigger(),M(!0),Ae()},suggestions:ve,showLastResortOnFocus:!0,lastResort:{key:"LAST-RESORT-KEY",primaryText:I("family-review.addPerson.name-not-indexed","Name Not indexed"),onClick:()=>{R("addPersonPage1Generic"),T.current=e}}}),y&&l!==(null===se||void 0===se?void 0:se.id)&&(0,k.Y)(Bn.A,null,(0,k.Y)(Da.A,{dense:!0,primaryText:I("edit-relationships.relationships-removed","Relationship removed on save"),startElement:(0,k.Y)(Da.A.Icon,{Icon:un.A,color:W.A.red50})})),(0,k.Y)(J.Ay,{guttersY:"xxs"},!e.value&&(0,k.Y)(ae.A,{size:"xxs"}),e.value&&(0,k.Y)(Z.A,{Icon:Kt.A,onClick:()=>{var t,a;window.open(`${null!==(t=s)&&void 0!==t?t:r.currentImageArk}?view=index&personArk=/ark:/61903/${null===(a=U.getValues()[e.id])||void 0===a?void 0:a.key}&action=view`)}},I("edit-relationships.edit.button","Edit")),e.value&&i&&(0,k.Y)(Z.A,{Icon:ki.A,onClick:()=>o({type:"OPEN_SPLIT_SCREEN_TO_PAGE",value:n})},I("edit-relationships.view-name.button","View on page {pageNumber}",{pageNumber:n}))))})),(0,k.Y)(Si.A,{"data-testid":"add-or-remove-fields",Icon:Ci.A,color:"yellow",emphasis:"low",disabled:y,onClick:S.handleClick},Ce)),X.length>0&&(0,k.Y)(Ye.A,{edges:"border",margins:"dense"},(0,k.Y)(Ne.A,{initiallyOpen:!0},(0,k.Y)(Re.A,null,(0,k.Y)(re.H5,null,I("edit-relationships.others-on-this-record","Others on This Record"))),(0,k.Y)(Pe.A,null,X.map((e=>(0,k.Y)("span",{key:e.partitionKey},e.partitionKey!==r.currentImageArk&&(0,k.Y)(i.Fragment,null,(0,k.Y)(te.A,{size:"xs"},I("relationships.names-on-page-n.label","Names on Page {pageNumber}",{pageNumber:e.pageNumber})),(0,k.Y)(Z.A,{Icon:ki.A,emphasis:"medium",onClick:()=>o({type:"OPEN_SPLIT_SCREEN_TO_PAGE",value:e.pageNumber})},I("relationships.view-in-context","View in Context")),(0,k.Y)(ae.A,{size:"xs"})),e.persons.map((e=>(0,k.Y)(te.A,{size:"sm",key:e.id},(0,Ee.hA)({person:e})))))))))),(0,k.Y)(An,{title:Ce,lockSharedFields:!1,chipData:ie,fieldData:s,handleSelection:e=>{const t=[...u],a=[...p];s.filter((t=>!e.map((e=>{let{id:t}=e;return t})).includes(t.id))).forEach((e=>{_n(e,U);const i=t.findIndex((t=>t.id===e.id));-1!==i?t.splice(i,1):a.push(e.id),M(!0)}));const i=e.filter((e=>!e.id));i&&(i.reverse(),i.forEach((e=>{const a={label:e.label,id:(0,$e.Vs)(),reltype:e.reltype,order:e.order,added:!0};t.push(a),U.setValue(a.id,{key:"",primaryText:""}),U.setValue(`${a.id}_type`,e.reltype),U.setValue(`${a.id}_order`,e.order)}))),h(t),m(a)},overlay:S}),ne&&(0,k.Y)(uo,{overlay:E,person:ne,otherPerson:se,record1Relationships:ue,record2Relationships:pe,setMovingPersonToOtherRecord:f,onCancel:()=>{U.resetField(de),Ae()}}))))},wo=(0,y.Ay)("rip:R2:EditAge");function To(){const[e]=(0,P.B)(),t=(0,b.A)(),a=(0,je.mS)(),r=function(e){var t;return null===e||void 0===e||null===(t=e.fields)||void 0===t?void 0:t.reduce(((e,t)=>{var a;return null!==(a=t.elementTypes)&&void 0!==a&&a.includes("AGE")&&e.push({value:t.fieldType,label:t.displayLabel}),e}),[])}(t.types),n=(0,$.Ay)(),[o,s]=(0,i.useState)([]),l=(0,je.vl)(),d=Hn(),c=(0,A.Qp)(null===t||void 0===t?void 0:t.images,null===t||void 0===t?void 0:t.currentImageArk)||{},u=(0,A.rr)([c],a.selectedPersonId),{displayHighlightsApi:h,splitScreenDisplayHighlightsApi:p}=(0,je.Z0)(),{restrictedFields:m}=Y(),g=null===m||void 0===m?void 0:m.includes(I.AGE),v=(0,i.useMemo)((()=>{var e,t;const a=null===u||void 0===u||null===(e=u.subElements)||void 0===e?void 0:e.find((e=>"AGE"===e.elementType));return null===a||void 0===a||null===(t=a.subElements)||void 0===t?void 0:t.filter((e=>{var t;return null===e||void 0===e||null===(t=e.typeData)||void 0===t?void 0:t.editable}))}),[u]),y=e("edit-age.heading","Age"),f=e("edit-age.instructions","Fix any fields that are incorrect including their highlights. Add or remove fields as necessary."),w=e("edit-index.add-custom.button","Add or Remove {field}",{field:y}),{editAgeOverlay:T,closeOverlay:S,editHighlightsOverlay:E,topMostPanel:C,inPanelStack:x}=(0,Ti.HQ)(),N=(0,$.Ay)(),R=vr.Ik().shape({}),O=(0,ur.SV)({mode:"all",resolver:(0,gr.t)(R),defaultValues:{}});Ln({methods:O,overlay:N,debug:wo,debugMessage:"age subscriber called: "});const _=(0,i.useCallback)((()=>{const e=null===v||void 0===v?void 0:v.map((e=>{var t;return{id:e.id,label:e.label,rects:e.rects,fieldType:e.fieldType,typeData:{editable:(null===e||void 0===e||null===(t=e.typeData)||void 0===t?void 0:t.editable)||(null===e||void 0===e?void 0:e.editable)}}}));s(e)}),[v]);(0,i.useEffect)((()=>{_()}),[v,_]);const F=e=>{const i=Nn({...t,...a,inPanelStack:x,values:e,formState:O.formState,currentImageArk:t.currentImageArk}).concat((0,Ai.Aq)(t.images,t.currentImageArk,a.editHighlights).concat((0,Ai.Aq)(t.images,t.currentImageArk,a.referenceEditHighlights)));return{sls:(0,wi.q)(i),dispatches:i}};(0,i.useEffect)((()=>{const e=(0,A.rr)(t.images,a.highlightsFieldInfo.id);if("editSharedHighlightPage2"===C()&&0===a.editDispatches.length&&!e){const e=Rn({...t,...a,inPanelStack:x,values:O.getValues(),formState:O.formState,currentImageArk:t.currentImageArk});l({type:"SET_EDIT_DISPATCHES",value:e})}}),[x,O,l,a,t,C]);T.onClose=()=>{O.formState.isDirty&&(O.reset(),_())};const{reset:D,setValue:M}=O;(0,i.useEffect)((()=>{const e={};Array.isArray(v)&&v.forEach((t=>{e[t.id]=(0,A.OV)(t)||""})),D(e)}),[v,D]),(0,i.useEffect)((()=>{if(T.isOpen&&"editAge"===C()&&!E.isOpen){const r=t.types.fields.filter((e=>{var t;return null===(t=e.elementTypes)||void 0===t?void 0:t.includes("AGE")})).map((e=>e.fieldType)),n=(e,t)=>t.filter((e=>e.personIds.includes(a.selectedPersonId))).filter((e=>r.includes(e.fieldType))).filter((t=>(null===t||void 0===t?void 0:t.imageId)===e));var e,i;if((0,ha.eP)(n(t.currentImageArk,a.editHighlights),h),a.splitScreen)(0,ha.eP)(n(null===t||void 0===t||null===(e=t.thumbnails)||void 0===e||null===(i=e[a.referenceFocusedIndex])||void 0===i?void 0:i.ark,a.referenceEditHighlights),p);d()}}),[h,T.isOpen,E.isOpen,a.editHighlights,a.referenceEditHighlights,a.referenceFocusedIndex,a.selectedPersonId,a.splitScreen,d,p,t.currentImageArk,null===t||void 0===t?void 0:t.thumbnails,t.types.fields,C]);const{handleFieldChange:H,handleOnFocus:L}={handleFieldChange:()=>{l({type:"SET_ACTIVE_FIELD_ID",value:""})},handleOnFocus:e=>{var t,a;const i=e.subElements?null===e||void 0===e||null===(t=e.subElements)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.id:e.id;l({type:"SET_ACTIVE_FIELD_ID",value:i})}};return(0,k.Y)(i.Fragment,null,(0,k.Y)(pr.Ay,{onSubmit:F,methods:O,id:"edit-age"},(0,k.Y)(hi.A,(0,j.A)({},T,{close:()=>{O.formState.isDirty?N.open():(l({type:"REVERT_HIGHLIGHTS",value:{}}),S("editAge"),_())},headingColor:"green",title:e("edit-index.edit-person.heading","Edit {personName}",{personName:(0,Ee.hA)({person:u})}),footer:(0,k.Y)(Mn,{saveChangesOverlay:N,handleSubmit:F,successHandler:()=>{S("editAge"),_()},formName:"edit-age"})}),(0,k.Y)(fr,{heading:y,caption:f}),(0,k.Y)(Mi,null,null===o||void 0===o?void 0:o.map((e=>(0,k.Y)(zi,{key:e.id},(0,k.Y)(Dn,{field:e,handleOnFocus:L,handleFieldChange:H,key:e.id})))),(0,k.Y)(zi,null,(0,k.Y)(Si.A,{"data-testid":"add-or-remove-age",Icon:Ci.A,color:"yellow",emphasis:"low",disabled:g,onClick:n.handleClick,aligny:"nextToInput"},w))),(0,k.Y)(An,{title:w,disabled:g,chipData:[{title:e("edit-index.chips.age-fields.title","Age Fields"),data:r,key:"additionalFields"}],fieldData:o,handleSelection:(e,t)=>{const a=a=>!e.map((e=>{let{id:t}=e;return t})).includes(a.id)&&!t.map((e=>{let{id:t}=e;return t})).includes(a.id),i=o?[...o]:[];if(o){const e=e=>{_n(e,O);const t=i.findIndex((t=>t.id===e.id));i.splice(t,1)};o.filter(a).forEach(e)}const r=e.filter((e=>!e.id));r&&(r.reverse(),r.forEach((e=>{const t={label:e.label,fieldType:e.value.split(":")[0],id:(0,$e.Vs)(),added:!0};i.push(t),M(t.id,""),M(`${t.id}_fieldType`,e.value.split(":")[0])}))),s(i)},overlay:n}))))}var Io=a(10883);function So(e,t,a,r,n){const o=(0,i.useMemo)((()=>function(e){const t=Ee.kV.map((e=>e.fieldType)).reduce(((t,a)=>{var i;const r=null===e||void 0===e||null===(i=e.fields)||void 0===i?void 0:i.find((e=>(null===e||void 0===e?void 0:e.fieldType)===a));return t.push({value:(null===r||void 0===r?void 0:r.fieldType)||a,label:(null===r||void 0===r?void 0:r.displayLabel)||a}),t}),[]);return t}(t)),[t]),s=(0,i.useMemo)((()=>((e,t)=>{let a=[];return e&&e.subElements&&e.subElements.forEach((e=>{const i=t.flatMap((e=>e.value));null!==e&&void 0!==e&&e.subElements&&e.subElements.forEach((r=>{if(i.includes(null===r||void 0===r?void 0:r.fieldType)){const i=t.filter((t=>t.value===e.subElements[0].fieldType))[0];a.push({...i,...r})}}))})),a=Sn(a),a})(e,((e,t)=>null===t||void 0===t?void 0:t.filter((t=>{var a;const i=null===e||void 0===e||null===(a=e.subElements)||void 0===a?void 0:a.find((e=>{var a;return null===e||void 0===e||null===(a=e.subElements)||void 0===a?void 0:a.find((e=>t.value===e.fieldType))}));return i})))(e,o))),[e,o]),l=(0,i.useMemo)((()=>{const e=r.concat(n),t=e.map((e=>null===e||void 0===e?void 0:e.value)),i=e.map((e=>{var t;return{...e,fieldType:null===(t=s.find((t=>(null===t||void 0===t?void 0:t.id)===(null===e||void 0===e?void 0:e.id))))||void 0===t?void 0:t.fieldType}})),l=a.filter((e=>e.added)).map((e=>e.fieldType)),d=["NAME_SURN","NAME_SUF","NAME_GN","NAME_PRE","NAME_SPRE","NAME_PATR","NAME_MATR"];return null===o||void 0===o?void 0:o.map((e=>{var a;const r=t.includes(e.value)?e.value:null===(a=i.find((t=>(null===t||void 0===t?void 0:t.fieldType)===(null===e||void 0===e?void 0:e.value))))||void 0===a?void 0:a.fieldType;return{...e,disabled:d.includes(r)||l.includes(e.value)}}))}),[a,o,s,r,n]);return{treatedNameFieldChipData:l,selectedFieldData:s}}function Eo(e,t){return{disabled:!e.find((e=>{var t,a;return"NAME_GN"===(null===(t=e.value.split(":"))||void 0===t?void 0:t[0])||"NAME_SURN"===(null===(a=e.value.split(":"))||void 0===a?void 0:a[0])})),message:t("field-selector-require-name","You must select a given name or a surname")}}function ko(e,t){return{disabled:!e.length,message:t("field-selector-require-one-field","You must select at least one field to continue")}}const Co=()=>{const{t:e}=(0,P.B)();return{ADD_MORE_INFO:e("edit-index.add-more-info.button","Add More Information"),REMOVE_FIELD:e("edit-index.remove-field.button","Remove Field")}},xo=(0,y.Ay)("rip:R2:EditEssentialInfo"),Yo={name:"alqhth",styles:"margin-top:-10px;margin-inline-end:0;margin-bottom:10px;margin-inline-start:10px;display:flex;flex-flow:column;"},No={name:"s6q9tg",styles:"& div{margin-bottom:0px;}"};function Ro(e){let{element:t,methods:a,setNameElements:r,nameElements:n}=e;const[o]=(0,P.B)(),s=(0,b.A)(),l=(0,je.mS)(),d=(0,je.vl)(),c=(0,$.Ay)(),[u,h]=(0,i.useState)([]),[p,m]=(0,i.useState)([]),[g,v]=(0,i.useState)([]),{restrictedFields:y}=Y(),f=null===y||void 0===y?void 0:y.includes("ADD_REMOVE_FIELDS"),{selectedFieldData:A,treatedNameFieldChipData:w}=So(t,s.types,u,p,g),T=`${o("edit-index.add.button","Add or Remove Fields")} ${o("edit-index.chips.name-fields.title","Name")}`,{ADD_MORE_INFO:I}=Co();(0,i.useEffect)((()=>{h(on()(A).filter((e=>{var t;return null===e||void 0===e||null===(t=e.typeData)||void 0===t?void 0:t.editable})))}),[A]);return(0,k.Y)(Mi,null,u.map((e=>{var t;const{fieldType:a}=e;return(0,k.Y)(zi,{key:e.id,indent:"0"},"NAME_SURN"!==a&&((null===e||void 0===e?void 0:e.added)||((e,t)=>{var a,i;return 1===(null===e||void 0===e||null===(a=e.subElements)||void 0===a?void 0:a.length)&&(null===e||void 0===e?void 0:e.elementType)===(null===t||void 0===t?void 0:t.fieldType)||(null===e||void 0===e||null===(i=e.fieldType)||void 0===i?void 0:i.startsWith("NAME_"))})(e,null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t[0])||!e.subElements)&&(0,k.Y)(Dn,{field:e}),"NAME_SURN"===a&&(0,k.Y)(i.Fragment,null,(0,k.Y)(Dn,{field:e,handleOnFocus:()=>On({...l,...s,r2dispatch:d,element:e}),handleFieldChange:()=>Pn(d)})))})),(0,k.Y)(Si.A,{"data-testid":"add-or-remove-fields-button",color:"yellow",emphasis:"low",disabled:f,Icon:Ci.A,onClick:c.handleClick,alignY:"nextToInput"},I),(null===n||void 0===n?void 0:n.length)>1&&(0,k.Y)(Si.A,{"data-testid":"remove-name-button",color:"red",emphasis:"low",Icon:xi.A,onClick:()=>{if(t.pseudoName){a.unregister(t.id),a.unregister(`${t.id}_newNameElement`);const e=a.getValues(),i=Object.entries(e).filter((e=>{let[,a]=e;return a===t.id})).map((e=>{let[t]=e;return t.split("_")[0]})),r=Object.keys(e).filter((e=>i.some((t=>e.startsWith(t)))));r.forEach((e=>a.unregister(e)))}else a.setValue(t.id,"REMOVED");t.removed=!0,r(n.filter((e=>!e.removed)))},alignY:"nextToInput"},o("edit-index.remove-name.button","Remove Name")),(0,k.Y)(An,{allowSelectingMultiple:!1,title:T,chipData:[{title:o("edit-index.chips.most-common-name.title","Most Common Name"),data:w.filter((e=>["NAME_GN","NAME_SURN","NAME_PATR","NAME_MATR"].includes(e.value))),key:`commonNameFields-${t.id}`},{title:o("edit-index.chips.prefix-suffix.title","Prefix and Suffix"),data:w.filter((e=>["NAME_PRE","NAME_SUF","NAME_SPRE"].includes(e.value))),key:`prefixSuffixFields-${t.id}`}],fieldData:u,handleSelection:(e,i)=>{const r=[...u];u.filter((t=>!e.map((e=>{let{id:t}=e;return t})).includes(t.id)&&!i.map((e=>{let{id:t}=e;return t})).includes(t.id))).forEach((e=>{_n(e,a);const t=r.findIndex((t=>t.id===e.id));r.splice(t,1)}));const n=e.filter((e=>!e.id));n&&n.forEach((e=>{const i={label:e.label,fieldType:e.value.split(":")[0],id:(0,$e.Vs)(),added:!0};r.push(i),a.setValue(i.id,""),a.setValue(`${i.id}_nameField`,e.value.split(":")[0]),a.setValue(`${i.id}_nameSuper`,t.id)}));const o={subElements:[{elementType:"NAME",subElements:r}]};(0,Ee.qz)(o),h(r)},handleSelectionChange:(e,t)=>{m(e),v(t)},overlay:c,disabledFunc:ko}))}function Po(){var e,t,a,r,n;const[o]=(0,P.B)(),s=(0,b.A)(),l=(0,je.mS)(),d=(0,je.vl)(),c=(0,bi.Y)(),u=(0,A.Qp)(null===s||void 0===s?void 0:s.images,null===s||void 0===s?void 0:s.currentImageArk),h=(0,A.rr)([u],l.selectedPersonId),[p,m]=(0,i.useState)([]),[g,v]=(0,i.useState)((()=>[])),[y,f]=(0,i.useState)((()=>[])),[w,T]=(0,i.useState)(!1),[I,S]=(0,i.useState)(!1),{restrictedFields:E}=Y(),C=null===E||void 0===E?void 0:E.includes("NAME"),x=null===E||void 0===E?void 0:E.includes("SEX"),N=(0,i.useCallback)((()=>{var e;v([]);const t=(null===h||void 0===h||null===(e=h.subElements)||void 0===e?void 0:e.filter((e=>"NAME"===e.elementType)))||[];m(on()(t))}),[null===h||void 0===h?void 0:h.subElements]);(0,i.useEffect)((()=>{N()}),[N]),(0,i.useEffect)((()=>{f([...p,...g].filter((e=>!e.removed)))}),[g,p]);const R=e=>{var t;return null!==e&&void 0!==e&&null!==(t=e.typeData)&&void 0!==t&&t.editable?e:void 0},[O,_]=(0,i.useState)({}),[F,D]=(0,i.useState)(),M=R(null===(e=(0,A.q5)(h,"SEX_CODE"))||void 0===e?void 0:e[0]),H=R(null===(t=(0,A.q5)(h,"RACE_OR_COLOR"))||void 0===t?void 0:t[0]),L=(0,i.useMemo)((()=>M||O),[M,O]),z=(0,i.useMemo)((()=>H||F),[H,F]),{editEssentialInfoOverlay:V,highlightsPanelOverlay:B,closeOverlay:G,topMostPanel:U,inPanelStack:K}=(0,Ti.HQ)(),q=(0,$.Ay)(),W=(0,i.useMemo)((()=>{var e,t;return null===(e=s.types)||void 0===e||null===(t=e.names)||void 0===t?void 0:t.map((e=>({value:e.nameType,label:e.displayLabel})))}),[null===(a=s.types)||void 0===a?void 0:a.names]),X=(0,i.useCallback)((()=>{var e;const t={},a=null===h||void 0===h||null===(e=h.subElements)||void 0===e?void 0:e.filter((e=>"NAME"===e.elementType));return a&&a.forEach((e=>{const a=(0,A.aw)(W,e);t[e.id]=a?null===a||void 0===a?void 0:a.value:"",e&&e.subElements&&e.subElements.forEach((e=>{e&&e.subElements&&e.subElements.forEach((e=>{t[e.id]=(0,A.OV)(e)||""}))}))})),t.primaryRadio=null!==h&&void 0!==h&&h.primary?"yes":"no",H&&(t[H.id]=(0,A.OV)(H)||""),null!==M&&void 0!==M&&M.id&&(t[null===M||void 0===M?void 0:M.id]={primaryText:(0,A.J1)(M,o)||"",key:(0,A.Ut)(M)||""}),t[l.addedSexId]={primaryText:"",key:""},t}),[W,l.addedSexId,H,null===h||void 0===h?void 0:h.primary,null===h||void 0===h?void 0:h.subElements,M,o]),Q=(0,i.useMemo)(X,[X,W,l.addedSexId,H,null===h||void 0===h?void 0:h.primary,null===h||void 0===h?void 0:h.subElements,M,o]),ee=(0,ur.SV)({mode:"all",resolver:e=>{const t={};return Object.entries(e).forEach((a=>{let[i,r]=a;Object.keys(e).includes(`${i}_newNameElement`)&&!r&&(t[i]={message:o("edit-essential-info.must-select-name-type.error","Must select a name type")})})),{values:e,errors:t}},defaultValues:Q}),{reset:ie,setValue:ne,formState:{defaultValues:se}}=ee;Ln({debug:xo,debugMessage:"essential info subscriber called: ",methods:ee,overlay:q}),(0,i.useEffect)((()=>{const e=Object.keys(Q),t=Object.keys(se);dt()(e,t)||ie(Q)}),[Q]);const le=e=>{const t=Nn({...s,...l,values:e,inPanelStack:K,formState:ee.formState,currentImageArk:s.currentImageArk}).concat((0,Ai.Aq)(s.images,s.currentImageArk,l.editHighlights)).concat((0,Ai.Aq)(s.images,s.currentImageArk,l.referenceEditHighlights));return t.push({type:"SET_PERSON_LOCALIZED_NAME",value:{personId:l.selectedPersonId,localizedName:"",partitionKey:s.currentImageArk}}),{sls:(0,wi.q)(t),dispatches:t}};(0,i.useEffect)((()=>{const e=(0,A.rr)(s.images,l.highlightsFieldInfo.id);if("editSharedHighlightPage2"===U()&&0===l.editDispatches.length&&!e){const e=Rn({...s,...l,inPanelStack:K,values:ee.getValues(),formState:ee.formState,currentImageArk:s.currentImageArk});d({type:"SET_EDIT_DISPATCHES",value:e})}}),[K,ee,d,l,s,U]);V.onClose=()=>{N(),ee.reset()};const de=o("editEssentialInfo.heading","Essential Information"),ce=o("edit-essential-info.instructions","Fix any fields that are incorrect including their highlights. Add or remove fields as necessary.");return(0,i.useEffect)((()=>{null!==O&&void 0!==O&&O.id&&(ne(O.id,O.value),ne(`${O.id}_fieldType`,"SEX_CODE"))}),[O,ne,l.addedSexId]),(0,i.useEffect)((()=>{F&&(ne(F.id,""),ne(`${F.id}_fieldType`,"RACE_OR_COLOR"))}),[F,ne]),(0,i.useEffect)((()=>{if(V.isOpen&&"editEssentialInfo"===U()&&!B.isOpen){var e,t;const a=[l.selectedPersonId],i=null===s||void 0===s||null===(e=s.thumbnails)||void 0===e||null===(t=e[l.referenceFocusedIndex])||void 0===t?void 0:t.ark,r=["NAME_SURN","NAME_SUF","NAME_GN","NAME_PRE","SEX_CODE","RACE_OR_COLOR"];c.setDisplayHighlights({mainPartitionKey:s.currentImageArk,fieldTypes:r,elementIds:a}),l.splitScreen&&i&&c.setDisplayHighlights({splitScreenPartitionKey:i,fieldTypes:r,elementIds:a})}}),[V.isOpen,B.isOpen,U,s.currentImageArk,l.selectedPersonId,l.referenceFocusedIndex,l.splitScreen,null===s||void 0===s?void 0:s.thumbnails]),(0,k.Y)(i.Fragment,null,(0,k.Y)(pr.Ay,{onSubmit:le,methods:ee,id:"edit-age"},(0,k.Y)(hi.A,(0,j.A)({},V,{close:()=>{ee.formState.isDirty?q.open():(d({type:"REVERT_HIGHLIGHTS",value:{}}),G("editEssentialInfo"))},headingColor:"green",title:o("edit-index.edit-person.heading","Edit {personName}",{personName:(0,Ee.hA)({person:h})}),footer:(0,k.Y)(Mn,{saveChangesOverlay:q,handleSubmit:le,successHandler:()=>{N(),G("editEssentialInfo")},formName:"edit-essential-info"})}),(0,k.Y)(fr,{heading:de,caption:ce,headingSize:"H5"}),(0,k.Y)(ae.A,null),(0,k.Y)("div",{css:No},(0,k.Y)(Io.JQ,{disabled:C,label:o("edit-index.person-details.primary-label","Primary Name"),orientation:"horizontal"},(0,k.Y)(mr.Mi,{"data-testid":"principal-name-yes",name:"primaryRadio",label:o("edit-index.person-details.primary-yes","Yes"),value:"yes"}),(0,k.Y)(mr.Mi,{"data-testid":"principal-name-no",name:"primaryRadio",label:o("edit-index.person-details.primary-no"),value:"no"}))),(0,k.Y)(go,{primaryText:o("edit-index.person-details.principal-name-tip-title","Who is a primary name?"),listPrimaryText:(0,k.Y)(i.Fragment,null,(0,k.Y)(te.A,{size:"sm"},o("edit-index.person-details.principal-name-tip-text-1","The Primary Name is who the record is about.")),(0,k.Y)(te.A,{size:"sm"},o("edit-index.person-details.principal-name-tip-text-2","Usually there's 1 per record, unless it is a record such as marriage or divorce, then there are 2.")))}),(0,k.Y)(ae.A,null),("editEssentialInfo"===U()||"highlightsPanel"===U())&&(0,k.Y)(i.Fragment,null,null===y||void 0===y?void 0:y.map((e=>{const t=(0,A.aw)(W,e);return(0,k.Y)(Ye.A,{edges:"border",margins:"dense",key:e.id},(0,k.Y)(Ne.A,{initiallyOpen:!0},(0,k.Y)(Re.A,null,(0,k.Y)(re.H3,{size:"H5"},t?t.label:o("edit-essential-info.title","Name"))),(0,k.Y)(Pe.A,null,(0,k.Y)(zi,{indent:"0"},(0,k.Y)(mr.FX,{name:e.id,label:o("edit-events.fields.name-type","Name Type"),disabled:!e.pseudoName,options:W})),(0,k.Y)(Ro,{key:e.id,element:e,handleFieldChange:Pn,methods:ee,setNameElements:f,nameElements:y}))))})),(0,k.Y)(oe.A,{marginY:"xs"}),(0,k.Y)(Z.A,{"data-testid":"add-name-button",color:"blue",disabled:C,emphasis:"low",Icon:Ci.A,onClick:()=>{const e=(0,$e.Vs)();ee.setValue(`${e}_newNameElement`,e),ee.setValue(e,"BIRTH_NAME"),v([...g,{id:e,subElements:[],partitionKey:h.partitionKey,pseudoName:!0}])}},o("edit-essential-info.add-name.button","Add Name")),(0,k.Y)(oe.A,{marginY:"xs"}),z&&!I&&(0,k.Y)(zi,{indent:"0"},(0,k.Y)(Dn,{field:z}),(0,k.Y)("div",{css:Yo},(0,k.Y)(Si.A,{"data-testid":"delete-race",Icon:xi.A,disabled:C,color:"red",emphasis:"low",iconSize:"lg",onClick:()=>{S(!0),ee.setValue(z.id,"REMOVED"),ee.setValue(`${z.id}_fieldType`,"RACE_OR_COLOR")}},o("edit-essential-info.delete-race.button","Delete Race")))),(!z||I)&&(0,k.Y)(J.Ay,null,(0,k.Y)(Z.A,{"data-testid":"add-race-or-color",Icon:Ci.A,onClick:()=>{const e=(null===z||void 0===z?void 0:z.id)||(0,$e.Vs)(),t={id:e,value:"",fieldType:"RACE_OR_COLOR",elementType:"FIELD",label:o("edit-essential-info.race-or-color","Race Or Color")};S(!1),D(t),ee.setValue(e,""),ee.setValue(`${e}_fieldType`,"RACE_OR_COLOR")}},o("edit-essential-info.add-race","Add Race"))),L&&(null===L||void 0===L?void 0:L.id)&&!w&&(0,k.Y)(i.Fragment,null,(0,k.Y)(oe.A,{marginY:"xs"}),(0,k.Y)(zi,{indent:"0"},(0,k.Y)(br,{fieldName:(null===(r=(0,A.q5)(h,"SEX_CODE"))||void 0===r||null===(n=r[0])||void 0===n?void 0:n.id)||(null===O||void 0===O?void 0:O.id),person:h,handleOnFocus:()=>On({r2Dispatch:d,element:L}),handleOnBlur:()=>Pn(d),key:L.id,addedSexCode:O}),(0,k.Y)(Tr,{field:L,emphasis:"low"}),(0,k.Y)("div",{css:Yo},(0,k.Y)(Si.A,{"data-testid":"delete-sex",Icon:xi.A,color:"red",emphasis:"low",disabled:x,iconSize:"lg",onClick:()=>{T(!0),_({}),ee.setValue(L.id,{primaryText:"REMOVED",key:"REMOVED"}),ee.trigger()}},o("edit-essential-info.delete-sex.button","Delete Sex"))))),(w||!(null!==L&&void 0!==L&&L.id))&&(0,k.Y)(i.Fragment,null,(0,k.Y)(oe.A,{marginY:"xs"}),(0,k.Y)(J.Ay,null,(0,k.Y)(Z.A,{"data-testid":"add-sex",Icon:Ci.A,onClick:()=>{T(!1),_({id:l.addedSexId,value:{primaryText:"",key:""},fieldType:"SEX_CODE",elementType:"FIELD",displayLabel:o("edit-essential-info.sex-code","Sex")})}},o("edit-essential-info.add-sex","Add Sex"))))))))}function Oo(){const[e]=(0,P.B)();return(0,k.Y)(i.Fragment,null,(0,k.Y)(go,{overline:e("editHighlight.highlightTips.item1Overline","Instructions"),primaryText:e("editHighlight.highlightTips.item1PrimaryText","Adding and removing highlights"),listPrimaryText:(0,k.Y)(i.Fragment,null,(0,k.Y)("p",null,e("editHighlight.highlightTips.item1Content","To add a highlight, hover over the correct name on the image. If a blue highlight appears, select it and then attach.")),(0,k.Y)("p",null,e("editHighlight.highlightTips.item1Content2","To remove a highlight, hover over an existing yellow highlight and select it and then detach.")))}),(0,k.Y)(go,{primaryText:e("editHighlight.highlightTips.item2PrimaryText","Don't see a blue highlight?"),listPrimaryText:e("editHighlight.highlightTips.item2Content","If no blue highlight appears, you will create a new one.")}))}const _o=e=>{let{activeFieldInfo:t,t:a}=e;const{fieldType:i,value:r,fieldValues:n}=t||{};if("SEX_CODE"===i){const e=(0,A.J1)(t,a);return e.primaryText||e}if("EVENT_TYPE"===i)return null===t||void 0===t?void 0:t.label;if(r){var o,s;if(r===i&&(null===n||void 0===n?void 0:n.length)>0&&null!==(o=n[0].origValue)&&void 0!==o&&o.text)return n[0].origValue.text;if(null!==(s=r.standard)&&void 0!==s&&s.standardizedText)return r.standard.standardizedText;if(r.originalText)return r.originalText;if(r!==i)return r}return null},Fo=e=>{let{splitScreenImageArk:t}=e;const[a]=(0,P.B)(),{highlightsPanelOverlay:r,closeOverlay:n,topMostPanel:o}=(0,Ti.HQ)(),{currentImageArk:s,types:l}=(0,b.A)(),{setCreatingRects:d,setEditMode:c,setDisplayHighlights:u,stageEdits:h,setActiveFieldInfo:p,activeFieldInfo:m,onSave:g,clearDisplay:v,getHighlights:y,clearEdits:f}=(0,bi.Y)(),A=(0,i.useMemo)((()=>y().mainEditHighlights.find((e=>e.fieldId===m.id))),[y,m.id]),w=(0,i.useCallback)((function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];d(!1),c(!1),e&&p({id:null,value:null})}),[d,c,p]);(0,i.useEffect)((()=>{r.isOpen&&"highlightsPanel"===o()&&(c(!0),u({mainPartitionKey:s,mainZoomFilter:e=>e.attached,attachFilter:e=>e.fieldId===m.id}),t&&u({splitScreenPartitionKey:t,splitScreenZoomFilter:e=>e.attached,attachFilter:e=>e.fieldId===m.id}))}),[r.isOpen,s,null===m||void 0===m?void 0:m.id,o,t]);const T=A?a("editHighlight.panelHeader.panelHeadingEdit","Edit Highlight"):a("editHighlight.panelHeader.panelHeadingAdd","Add Highlight"),I=(0,i.useCallback)((()=>{f(),v({all:!0}),w(),n("highlightsPanel")}),[w,n,v,f]),S=(0,i.useCallback)((()=>{const e=e=>null===e||void 0===e?void 0:e.filter((e=>!0===(null===e||void 0===e?void 0:e.attached))),{mainEditHighlights:t,splitScreenEditHighlights:a}=h(),i=e(t),r=e(a),o=null===l||void 0===l?void 0:l.fields.find((e=>e.fieldType===(null===m||void 0===m?void 0:m.fieldType)));g?(g({mainEditHighlights:t,splitScreenEditHighlights:a,mainSelectedHighlights:i,splitScreenSelectedHighlights:r,fieldType:o,activeFieldInfo:m}),w(!1)):(w(),n("highlightsPanel"))}),[h,l,g,n,m,w]),E=a("editHighlight.instructions",'Select the {fieldType} "{fieldValue}".',{fieldType:(null===m||void 0===m?void 0:m.label)||(null===m||void 0===m?void 0:m.displayLabel),fieldValue:"EVENT_TYPE"===(null===m||void 0===m?void 0:m.fieldType)?"":_o({activeFieldInfo:m,t:a})});return(0,k.Y)(hi.A,(0,j.A)({headingColor:"yellow",title:T},r,{close:I,footer:(0,k.Y)(J.Ay,{alignX:"end"},(0,k.Y)(Z.A,{onClick:I,linkName:"Edit Highlights Cancel","data-testid":"highlights-panel-cancel-button"},a("edit-index.cancel.button","Cancel")),(0,k.Y)(Z.A,{emphasis:"high",onClick:S,linkName:"Edit Highlights Save","data-testid":"highlights-panel-save-button"},a("edit-index.save.button","Save")))}),(0,k.Y)(Rr,{heading:T,caption:a("editHighlight.panelHeader.panelCaption","Select the blue highlights or create your own")}),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(te.A,{size:"sm"},(E||"").replace(' "".',".")),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(Z.A,{Icon:Ar.A,onClick:()=>d(!0),"data-testid":"highlights-panel-new-highlight",linkName:"Edit Highlights New Highlight"},a("editHighlight.highlightTips.newHighlight","New Highlight")),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(Oo,null))},Do=e=>{let{saving:t=!1,topMostPanel:a,saveButtonRef:r}=e;const[n]=(0,P.B)(),{closeOverlay:o}=(0,Ti.HQ)(),s=(0,je.vl)(),l=(0,bi.Y)(),d="editSharedFieldPage1"===a(),c=(0,i.useCallback)((()=>{s({type:"REVERT_HIGHLIGHTS",value:{}}),l.clearEdits(),o("editSharedFieldPage1")}),[s,o]);return(0,k.Y)(i.Fragment,null,d?(0,k.Y)(J.Ay,{alignX:"end",gutters:"md"},(0,k.Y)(Z.A,{"data-testid":"panel-back-button",emphasis:"low",disabled:t,onClick:c},n("edit-shared-field-footer.cancel","Cancel")),(0,k.Y)(Z.A,{"data-testid":"panel-forward-button",emphasis:"high",disabled:t,form:"edit-shared-field",type:"submit"},n("edit-shared-field-footer.next","Next"))):(0,k.Y)(J.Ay,{alignX:"end",gutters:"md"},(0,k.Y)(Z.A,{"data-testid":"panel-back-button",emphasis:"low",type:"submit",form:"",onClick:()=>{o("editSharedFieldPage2")},disabled:t},n("edit-shared-field-footer.back","Back")),(0,k.Y)(Z.A,{"data-testid":"panel-forward-button",emphasis:"high",disabled:t,Icon:t&&g.A,form:"edit-shared-field-page-2",type:"submit",ref:r},n("edit-shared-field-footer.save","Save"))))};function Mo(e){let{overlay:t,onDiscard:a,onSave:i,formId:r,headingText:n,contentText:o,saveButtonText:s,discardButtonText:l,disableSave:d=!1,alertMode:c=!1}=e;const[u]=(0,P.B)(),h=n||u("edit-index.save-changes-overlay.header","Unsaved Changes"),p=o||u("edit-index.save-changes-overlay.content","You have unsaved changes that will be lost if you exit."),m=s||c?u("edit-index.save-changes-overlay.continue.button","Continue Editing"):u("edit-index.save-changes-overlay.save.button","save"),g=l||u("edit-index.save-changes-overlay.discard.button","Discard Changes"),v=()=>null===t||void 0===t?void 0:t.close(),y=a||v;return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:h,nonClosable:!0}),p,(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(at.A,{"data-testid":"save-changes-overlay-cancel-button",onClick:y},g),(0,k.Y)(Z.A,{"data-testid":"save-changes-overlay-save-button",onClick:c?v:i,emphasis:"high",form:r,disabled:d},m))))}const Ho=e=>{var t,a;let{handleSubmit:r,onDiscard:n}=e;const o=(0,b.A)(),s=(0,je.mS)(),{editSharedFieldPage1Overlay:l,highlightsPanelOverlay:d,topMostPanel:c}=(0,Ti.HQ)(),[u]=(0,P.B)(),h=(0,bi.Y)(),p=(0,$.Ay)(),m=(0,A.rr)(o.images,s.editingSharedFieldId),g=(0,A.OV)(m),v=g?u("edit-shared-field.heading","{fieldType}: {fieldValue}",{fieldType:null===m||void 0===m||null===(t=m.typeData)||void 0===t?void 0:t.displayLabel,fieldValue:g}):"",y=(0,i.useMemo)((()=>{const e={};return m&&(0,$e._A)(e,[m]),e}),[m]),f=(0,ur.SV)({mode:"all",defaultValues:y});return(0,i.useEffect)((()=>{if(l.isOpen&&"editSharedFieldPage1"===c()&&!d.isOpen){var e,t;const a=null===o||void 0===o||null===(e=o.thumbnails)||void 0===e||null===(t=e[s.referenceFocusedIndex])||void 0===t?void 0:t.ark,i=[s.editingSharedFieldId];h.setDisplayHighlights({mainPartitionKey:o.currentImageArk,elementIds:i}),s.splitScreen&&a&&h.setDisplayHighlights({splitScreenPartitionKey:a,elementIds:i})}}),[l.isOpen,c,d.isOpen,s.editingSharedFieldId,s.referenceFocusedIndex,s.splitScreen,o.currentImageArk,null===o||void 0===o?void 0:o.thumbnails]),Ln({overlay:p,methods:f,panelId:"editSharedFieldPage1"}),(0,k.Y)(i.Fragment,null,(0,k.Y)(pr.Ay,{onSubmit:r,methods:f,id:"edit-shared-field"},(0,k.Y)(fr,{heading:v,caption:u("edit-shared-field.instructions.heading","Fix any mistakes that you see.")}),(0,k.Y)(ae.A,null),(0,k.Y)(re.H6,null,u("edit-shared-field.edit-field.heading","1. Edit the {fieldType} field.",{fieldType:null===m||void 0===m||null===(a=m.typeData)||void 0===a?void 0:a.displayLabel})),m&&(0,k.Y)(Dn,{field:m,r2State:s,showEditHighlight:!1,enableLockSharedField:!1}),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(re.H6,null,u("edit-shared-field.edit-highlight.heading","2. Edit the highlight."),(0,k.Y)(ne.A,null,u("","Match the highlight to the transcription."))),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(Tr,{field:m})),(0,k.Y)(Mo,{formId:"edit-shared-field",onDiscard:n,overlay:p,alertMode:!0}))};function Lo(e,t){if(t.superElements.find((t=>(null===t||void 0===t?void 0:t.id)===(null===e||void 0===e?void 0:e.id))))return e;let a=null;var i;"NAME_SURN"===t.fieldType?a=null===(i=(0,A.q5)(e,"NAME"))||void 0===i?void 0:i.find((e=>(0,A.q5)(e,"NAME_SURN").find((e=>e.id===t.id)))):t.superElements.forEach((t=>{const i=(0,A.$C)([e],t.id);(null===i||void 0===i?void 0:i.length)>0&&(a=i[0])}));return a}const zo=(e,t,a,i)=>({type:"ADD_SUB",value:{superPartitionKey:a,subPartitionKey:i,superId:null===e||void 0===e?void 0:e.id,subId:t,elementType:e.elementType}});const Vo="300PX",Bo="10PX",Go=e=>{let{children:t,size:a=Vo,indent:i=Bo,maxWidth:r=Vo}=e;return(0,k.Y)("div",{style:{width:a,paddingInlineStart:i,paddingTop:"10PX",maxWidth:r}},t)},Uo=e=>{var t;let{person:a,lockSharedSuperEl:r,sharedElement:n,record:o,newValue:s}=e;const l=(0,b.A)(),d=(0,je.mS)(),[c]=(0,P.B)(),u=d.selectedPersonId===a.id,h=null===(t=(0,A.q5)(a,"RELATIONSHIP_TO_HEAD"))||void 0===t?void 0:t[0],p=(0,A.OV)(h),m=(0,Ie.RV)(a,l.types,o)||"",g=(0,Ie.UR)(a,l.types,o,c)||"",v=(0,Ie.ON)(m,g),y=(0,L.u)("rip_sharedImageViewer_editSharedFieldAdditionalPersonsOptions"),f=(0,i.useMemo)((()=>u&&"NAME_SURN"===n.fieldType?`${(0,Ee.SG)(a)} ${s}`:(0,Ee.hA)({person:a})),[u,s,a,n.fieldType]);return(0,k.Y)(Go,null,y.isOn&&(0,k.Y)(re.H6,null,(0,k.Y)(Mt.A,null,v)),(0,k.Y)(mr.cG,{disabled:r||u,name:a.id,value:a.id,label:`${f} ${p?`(${p})`:""}`}))},Ko=e=>{let{personIds:t,sharedElement:a,fieldDisplayValue:i}=e;const r={};return a&&(r[a.id]=i),t&&t.forEach((e=>{r[e]=e})),r},qo=(e,t)=>{if(t.superElements.find((t=>t.id===e.id)))return e;let a=null;var i;"NAME_SURN"===t.fieldType?a=null===(i=(0,A.q5)(e,"NAME"))||void 0===i?void 0:i.find((e=>(0,A.q5)(e,"NAME_SURN").find((e=>e.id===t.id)))):t.superElements.forEach((t=>{const i=(0,A.$C)([e],t.id);(null===i||void 0===i?void 0:i.length)>0&&(a=i[0])}));return a},jo=e=>{var t,a,r,n,o,s,l,d,c;let{handleSave:u,sharedFieldValue:h,saveButtonRef:p,onDiscard:m}=e;const g=(0,b.A)(),v=(0,je.mS)(),y=(0,je.vl)(),[f]=(0,P.B)(),w=(0,$.Ay)(),T=null===(t=g.thumbnails)||void 0===t?void 0:t.findIndex((e=>e.ark===g.currentImageArk)),I=(0,L.u)("rip_sharedImageViewer_editSharedFieldAdditionalPersonsOptions"),S=(0,bi.Y)(),E=h,C=(0,A.Qp)(null===g||void 0===g?void 0:g.images,null===g||void 0===g?void 0:g.currentImageArk),x=(0,A.rr)([C],v.selectedPersonId),Y=(0,A.rr)(g.images,v.editingSharedFieldId),N=(0,A.OV)(((e,t)=>e&&!t?e:t)(Y,null===Y||void 0===Y||null===(a=Y.subElements)||void 0===a?void 0:a[0])),R=(0,i.useMemo)((()=>{var e;return"object"===typeof E?(null===(e=E.standard)||void 0===e?void 0:e.standardizedText)||E.originalText:E}),[E]),O=(0,i.useMemo)((()=>{var e;return N?f("edit-shared-field.heading","{fieldType}: {fieldValue}",{fieldValue:R,fieldType:null===Y||void 0===Y||null===(e=Y.typeData)||void 0===e?void 0:e.displayLabel}):""}),[N,R,null===Y||void 0===Y||null===(r=Y.typeData)||void 0===r?void 0:r.displayLabel,f]),_=(0,i.useMemo)((()=>!!I.isOn&&("NAME_SURN"===Y.fieldType||"NAME_SURNAME"===Y.elementType||Y.typeData.elementTypes.includes("PERSON"))),[I.isOn,Y]),F=(0,i.useMemo)((()=>Y?(0,Ee.lY)(Y,g.images):null),[Y,g.images]),D=(0,i.useMemo)((()=>((e,t)=>null===e||void 0===e?void 0:e.map((e=>(0,A.rr)(t,e))))(F,g.images)),[F,g.images]),M=(0,A.rr)(g.images,null===Y||void 0===Y||null===(n=Y.superElements)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.id),H=(0,i.useMemo)((()=>"PERSON"!==M.elementType&&"NAME_SURNAME"!==M.elementType),[M]),{allRecords:z}=Ce({images:null===g||void 0===g?void 0:g.images,currentImageArk:null===g||void 0===g?void 0:g.currentImageArk,personIdsOrder:null===g||void 0===g||null===(s=g.personOrder)||void 0===s||null===(l=s.find((e=>e.partitionKey===(null===g||void 0===g?void 0:g.currentImageArk))))||void 0===l?void 0:l.personIds,thumbnails:null===g||void 0===g?void 0:g.thumbnails}),V=(0,i.useMemo)((()=>null===z||void 0===z?void 0:z.find((e=>e.id===(null===Y||void 0===Y?void 0:Y.recordId)))),[z,null===Y||void 0===Y?void 0:Y.recordId]),B=(0,i.useMemo)((()=>V.subElements.filter((e=>"PERSON"===e.elementType))),[V]),G=(0,i.useMemo)((()=>Un()([...B,...D],"id")),[B,D]),U=(0,i.useMemo)((()=>null===z||void 0===z?void 0:z.flatMap((e=>e.subElements.filter((e=>"PERSON"===e.elementType))))),[z]),K=(0,i.useMemo)((()=>U.filter((e=>e.recordId!==V.recordId))),[U,V]),q=(0,i.useMemo)((()=>Un()(_?[...G,...K]:D,"id").sort(((e,t)=>F.includes(t.id)-F.includes(e.id)))),[_,G,K,D,F]),j=(0,i.useMemo)((()=>null===q||void 0===q?void 0:q.reduce(((e,t)=>(e[t.partitionKey]?e[t.partitionKey].push(t):e[t.partitionKey]=[t],e)),{})),[q]),W=(0,i.useMemo)((()=>{if(j){const e=on()(j);return delete e[g.currentImageArk],e}return{}}),[j,g.currentImageArk]),X=(0,ur.SV)({mode:"all",defaultValues:Ko({personIds:F,sharedElement:Y,fieldDisplayValue:N})});return Ln({overlay:w,panelId:"editSharedFieldPage2"}),(0,k.Y)(i.Fragment,null,(0,k.Y)(pr.Ay,{onSubmit:e=>{if(I.isOn){const{mainEditHighlights:t}=S.getHighlights(),a=t.find((e=>e.fieldId===Y.id));!function(e,t,a,i,r,n,o,s){let l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],d=arguments.length>9?arguments[9]:void 0;const c=[];let u,h=[];const p=Lo(t,a),m={comment:"",reasonId:In.LX,app:qe.zQ};let g=(0,Je.cN)("object"===typeof i?i.originalText:i,m);i.standard&&(g=(0,Je.nu)(i,a.fieldType,m));const v=Object.entries(e).filter((e=>{let[t]=e;return t.startsWith("1:1:")})).map((e=>{let[t,a]=e;return{id:t,isChecked:Boolean(a)}})).sort((e=>e.id===(null===t||void 0===t?void 0:t.id)?-1:1)),y=v.filter((e=>e.isChecked)).map((e=>e.id)),f=l.sort(),b=y.sort(),w=new Set(f),T=new Set(b),I=[...T].filter((e=>!w.has(e))),S=[...w].filter((e=>!T.has(e))),E=e=>[{type:"ADD_FV",value:{fieldValue:g,id:e||a.id,partitionKey:null===a||void 0===a?void 0:a.partitionKey}}].concat((0,Ai.Aq)(r.images,r.currentImageArk,n.editHighlights)).concat((0,Ai.Aq)(r.images,r.currentImageArk,n.referenceEditHighlights)),k=e=>{if(!e||0===e.length)return[];const t=[],i=(0,A.x5)(r.images);let n=a;return e.forEach((e=>{var r,o;const s=Lo(e,a);if("NAME_SURN"===a.fieldType){var l,d;const e=null===s||void 0===s||null===(l=s.subElements)||void 0===l||null===(d=l.find((e=>"NAME_SURNAME"===e.elementType)))||void 0===d?void 0:d.id,t=(0,A.km)(a,"NAME_SURNAME",i);n=e&&(null===t||void 0===t?void 0:t.find((t=>t.id===e)))||t[0]}t.push({type:"REM_SUB",value:{superPartitionKey:null===s||void 0===s?void 0:s.partitionKey,subPartitionKey:null===(r=n)||void 0===r?void 0:r.partitionKey,superId:null===s||void 0===s?void 0:s.id,subId:null===(o=n)||void 0===o?void 0:o.id,elementType:s.elementType}})})),t};if(0===I.length&&0===S.length)c.push(...E());else if(0===I.length&&S.length>0){const e=S.map((e=>o.find((t=>t.id===e))));c.push(...k(e),...E())}else{var C,x;const e=S.map((e=>o.find((t=>t.id===e))));var Y,N;c.push(...k(e)),"NAME_SURN"===a.fieldType?(h=(0,Ai.yQ)({partitionKey:null===t||void 0===t?void 0:t.partitionKey,nameSuperId:null===p||void 0===p?void 0:p.id,surnameFieldValue:g}),u=null===(Y=h.find((e=>{var t;return"CREATE_ELEMENT"===e.type&&"NAME_SURNAME"===(null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.elementType)})))||void 0===Y||null===(N=Y.value)||void 0===N?void 0:N.id):(u=(0,A.Vs)(),h=(0,Ai.h8)({partitionKey:null===t||void 0===t?void 0:t.partitionKey,superId:p.id,fieldType:a.fieldType,fieldValue:g,superElementType:p.elementType,id:u})),c.push(...h);const i=y.map((e=>o.find((t=>t.id===e)))),r=null===(C=h.find((e=>"ADD_FV"===e.type)))||void 0===C||null===(x=C.value)||void 0===x?void 0:x.id;if(d&&r){const e=(0,Ai.uS)({fieldId:r,oldFieldId:a.id,oldRect:d.originalHighlight,partitionKey:t.partitionKey,oldPartitionKey:a.partitionKey,rect:(0,ia.eS)(d)});c.push(...e)}i.forEach((e=>{let i=Lo(e,a);if(i){var r;e.id!==t.id&&c.push(zo(i,u,null===(r=i)||void 0===r?void 0:r.partitionKey,null===t||void 0===t?void 0:t.partitionKey)),c.push(...k([e]))}else{const r="NAME_SURN"===a.fieldType||"NAME_SURNAME"===a.elementType?"NAME_SURNAME":"FIELD",h=(0,A.q5)(e,"FIELD"===r?a.fieldType:r,"FIELD"===r);if(h.length>0){var n,o,s;const a=h[0].id;var l;i=null===(n=h[0])||void 0===n||null===(o=n.superElements)||void 0===o?void 0:o.find((t=>(0,A.rr)([e],t.id))),i=(0,A.rr)([e],i.id),e.id!==t.id&&c.push(zo(i,u,null===(l=i)||void 0===l?void 0:l.partitionKey,null===t||void 0===t?void 0:t.partitionKey)),c.push({type:"REM_SUB",value:{superPartitionKey:null===e||void 0===e?void 0:e.partitionKey,subPartitionKey:null===e||void 0===e?void 0:e.partitionKey,superId:null===(s=i)||void 0===s?void 0:s.id,subId:a,elementType:i.elementType}})}if("FIELD"===r)c.push(zo(e,u,null===e||void 0===e?void 0:e.partitionKey,null===t||void 0===t?void 0:t.partitionKey));else if("NAME_SURNAME"===r){var d;const a=null===(d=(0,A.q5)(e,"NAME").filter((e=>"NAME"!==e.fieldType)))||void 0===d?void 0:d[0],i=(null===a||void 0===a?void 0:a.id)||(0,A.Vs)();a||c.push(...(0,Ai.vc)({partitionKey:null===e||void 0===e?void 0:e.partitionKey,nameElementId:i,nameType:"BIRTH_NAME",personId:null===e||void 0===e?void 0:e.id})),be()(h)&&e.id!==t.id&&c.push(zo({id:i,elementType:"NAME"},u,null===e||void 0===e?void 0:e.partitionKey,null===t||void 0===t?void 0:t.partitionKey))}}}))}null!==t&&void 0!==t&&t.recordId&&c.push({type:"SET_RECORD_PERSON_IDS",value:t.recordId}),"NAME_SURN"===(null===a||void 0===a?void 0:a.fieldType)&&[...b,...S].map((e=>c.push({type:"SET_PERSON_LOCALIZED_NAME",value:{personId:e,localizedName:"",partitionKey:r.currentImageArk}})));s(c)}(e,x,Y,E,g,v,q,u,F,a)}else(e=>{let{values:t,selectedPerson:a,allPersonsSharingField:i,sharedElement:r,newValue:n,state:o,r2State:s,handleSave:l}=e;const d=qo(a,r),c={comment:"",reasonId:In.LX,app:qe.zQ};let u=(0,Je.cN)("object"===typeof n?n.originalText:n,c);n.standard&&(u=(0,Je.nu)(n,r.fieldType,c));const h=Object.entries(t).filter((e=>{let[t]=e;return t.startsWith("1:1:")})).map((e=>{let[t,a]=e;return{id:t,isChecked:Boolean(a)}})).sort((e=>e.id===a.id?-1:1)),p=h.every((e=>e.isChecked));let m,g;var v,y;p?m=[]:"NAME_SURN"===r.fieldType?(m=(0,Ai.yQ)({partitionKey:null===a||void 0===a?void 0:a.partitionKey,nameSuperId:null===d||void 0===d?void 0:d.id,surnameFieldValue:u}),g=null===(v=m.find((e=>{var t;return"CREATE_ELEMENT"===e.type&&"NAME_SURNAME"===(null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.elementType)})))||void 0===v||null===(y=v.value)||void 0===y?void 0:y.id):(g=(0,A.Vs)(),m=(0,Ai.h8)({partitionKey:a.partitionKey,superId:d.id,fieldType:r.fieldType,fieldValue:u,superElementType:d.elementType,id:g}));let f=[...m];if(p)f.push({type:"ADD_FV",value:{fieldValue:u,id:r.id,partitionKey:null===r||void 0===r?void 0:r.partitionKey}}),f=f.concat((0,Ai.Aq)(o.images,o.currentImageArk,s.editHighlights)).concat((0,Ai.Aq)(o.images,o.currentImageArk,s.referenceEditHighlights));else{h.filter((e=>e.isChecked)).map((e=>i.find((t=>t.id===e.id)))).forEach(((e,t)=>{var i;const n=qo(e,r);t>0&&f.push({type:"ADD_SUB",value:{superPartitionKey:n.partitionKey,subPartitionKey:null===a||void 0===a?void 0:a.partitionKey,superId:null===n||void 0===n?void 0:n.id,subId:g,elementType:n.elementType}});const s=(0,A.x5)(o.images);let l=r;if("NAME_SURN"===r.fieldType){var d,c;const e=null===n||void 0===n||null===(d=n.subElements)||void 0===d||null===(c=d.find((e=>"NAME_SURNAME"===e.elementType)))||void 0===c?void 0:c.id,t=(0,A.km)(r,"NAME_SURNAME",s);l=e&&(null===t||void 0===t?void 0:t.find((t=>t.id===e)))||t[0]}f.push({type:"REM_SUB",value:{superPartitionKey:n.partitionKey,subPartitionKey:l.partitionKey,superId:null===n||void 0===n?void 0:n.id,subId:null===(i=l)||void 0===i?void 0:i.id,elementType:n.elementType}})}));const e="NAME_SURN"!==r.fieldType?g:f.find((e=>{var t;return"CREATE_ELEMENT"===e.type&&"NAME_SURN"===(null===(t=e.value.extraArgs)||void 0===t?void 0:t.fieldType)})).value.id;f=f.concat((0,Ai.Aq)(o.images,o.currentImageArk,s.editHighlights,e,!1)).concat((0,Ai.Aq)(o.images,o.currentImageArk,s.referenceEditHighlights,e,!1))}a.recordId&&f.push({type:"SET_RECORD_PERSON_IDS",value:a.recordId}),f.push({type:"SET_PERSON_LOCALIZED_NAME",value:{personId:s.selectedPersonId,localizedName:"",partitionKey:o.currentImageArk}}),l(f)})({values:e,selectedPerson:x,allPersonsSharingField:D,sharedElement:Y,newValue:E,state:g,r2State:v,handleSave:u})},methods:X,id:"edit-shared-field-page-2"},(0,k.Y)(fr,{heading:O,caption:f("edit-shared-surname.instructions.heading","Fix any mistakes that you see.")}),(0,k.Y)(ae.A,null),(0,k.Y)(re.H6,null,H?f("edit-shared-field.locked-others-on-image.heading",'3. These names are linked to this {fieldType}. They will be changed to "{newValue}".',{newValue:R,fieldType:null===Y||void 0===Y||null===(d=Y.typeData)||void 0===d?void 0:d.displayLabel}):f("edit-shared-field.choose-others-on-image.heading",'3. These names are linked to this {fieldType}. Change them to "{newValue}"?',{newValue:R,fieldType:null===Y||void 0===Y||null===(c=Y.typeData)||void 0===c?void 0:c.displayLabel})),null===q||void 0===q?void 0:q.map((e=>(0,k.Y)(Uo,{key:e.id,person:e,lockSharedSuperEl:H,newValue:E,record:I.isOn?V:void 0,sharedElement:Y}))),W&&Object.entries(W).filter((e=>{var t;let[a]=e;const i=null===(t=g.thumbnails)||void 0===t?void 0:t.findIndex((e=>e.ark===a));return 1===Math.abs(T-i)})).map((e=>{var t;let[a,r]=e;const n=(null===(t=g.thumbnails)||void 0===t?void 0:t.findIndex((e=>e.ark===a)))+1;return(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(oe.A,{label:f("edit-shared-field.names-on-page-n.label","Names on Page {pageNumber}",{pageNumber:n})}),(0,k.Y)(Z.A,{Icon:ki.A,onClick:()=>y({type:"OPEN_SPLIT_SCREEN_TO_PAGE",value:n}),emphasis:"medium"},f("edit-shared-field.view-image-in-context.close.button","View in Context")),null===r||void 0===r?void 0:r.map((e=>(0,k.Y)(Uo,{key:`${a}-${e.id}`,person:e,lockSharedSuperEl:H,newValue:E,record:I.isOn?V:void 0,sharedElement:I.isOn?Y:void 0}))))}))),(0,k.Y)(Mo,{formId:"edit-shared-field",onDiscard:m,onSave:()=>p.current.click(),overlay:w}))},$o=(0,y.Ay)("rip:R2:EditSharedField"),Wo=()=>{var e,t;const{rip_sharedImageViewer_saveChanges:a,rip_sharedImageViewer_sls_actions_splunk_debugger:r}=(0,L.h)(["rip_sharedImageViewer_saveChanges","rip_sharedImageViewer_sls_actions_splunk_debugger"]),n=(0,je.mS)(),o=(0,b.A)(),[s]=(0,P.B)(),[l,d]=(0,i.useState)(),[c,u]=(0,i.useState)(),[h,p]=(0,i.useState)([]),m=(0,Ae.l)(),g=(0,je.vl)(),[v,y]=(0,i.useState)(),{topMostPanel:f,openOverlay:w,closeOverlay:T,editSharedFieldPage1Overlay:I,editSharedFieldPage2Overlay:S}=(0,Ti.HQ)(),E=(0,bi.Y)(),C=(0,i.useRef)(null),x=(0,A.rr)(o.images,n.editingSharedFieldId);(0,i.useEffect)((()=>{(null===h||void 0===h?void 0:h.length)>0&&(m({type:"BATCH_DISPATCHES",value:h}),p([]))}),[m,h]);const Y=(0,i.useCallback)(((e,t,i)=>{a.isOn?(0,Se.Nn)({actions:e,userId:n.userId,appName:qe.zQ,fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],splunkDebugModeArguments:r.isOn?{theFileFromWhichSaveWasCalled:"EditSharedField",formValues:i}:{}}).then((()=>{p(t),T("editSharedFieldPage1"),T("editSharedFieldPage2"),E.setActiveFieldInfo({id:null,value:null}),E.clearEdits()})).catch((t=>{var a,i;y(t),(0,$e.Yt)(t,null,{codeId:78,slsActions:e,status:null===t||void 0===t||null===(a=t.response)||void 0===a?void 0:a.status,responseBody:null===t||void 0===t||null===(i=t.response)||void 0===i?void 0:i.data})})).finally((()=>{u(!1)})):($o("Saving changes to SLS is disabled",t,e),u(!1))}),[a.isOn,T,r.isOn,null===n||void 0===n?void 0:n.userId]),N=(0,i.useCallback)((e=>{if("editSharedFieldPage1"===f())w("editSharedFieldPage2"),d(e[x.id]);else{(0,vi.sx)({event_name:"shared_field_edit",link_name:"Edit: Shared Field: Save"});const t=e;u(!0);const a=(0,wi.q)(t);Y(a,t,e)}}),[f,x,Y,w]),R=()=>{T("editSharedFieldPage2")},O=()=>{T("editSharedFieldPage1"),E.clearEdits(),g({type:"REVERT_HIGHLIGHTS",value:{}})};return(0,k.Y)(i.Fragment,null,(0,k.Y)(hi.A,(0,j.A)({title:s("shared-field.title","Edit Linked {fieldType}",{fieldType:null===x||void 0===x||null===(e=x.typeData)||void 0===e?void 0:e.displayLabel}),headingColor:"red"},I,{close:O,footer:(0,k.Y)(Do,{topMostPanel:f,saveButtonRef:C})}),(0,k.Y)(Ho,{handleSubmit:N,editSharedFieldPage1Overlay:I,onDiscard:O})),(0,k.Y)(hi.A,(0,j.A)({title:s("shared-field.title","Edit Linked {fieldType}",{fieldType:null===x||void 0===x||null===(t=x.typeData)||void 0===t?void 0:t.displayLabel}),headingColor:"red"},S,{close:R,footer:(0,k.Y)(Do,{topMostPanel:f,saving:c})}),(0,k.Y)(jo,{sharedFieldValue:l,handleSave:N,editSharedFieldPage2Overlay:S,saveButtonRef:C,saving:c,onDiscard:()=>{O(),R()}})),(0,k.Y)(it,{error:v,setError:y,title:s("save-error-overlay.heading","Unable to Save Changes"),message:s("save-error-overlay.content-generic","Your changes were not saved.  Please try again later.")}))},Xo=e=>{let{children:t,alignY:a="bottom"}=e;return(0,k.Y)(J.Ay,{gutters:"sm",guttersY:"none",wrap:!0,alignX:"start",alignY:a},t)},Qo=(0,vr.Ik)().shape({selectedFieldRadio:(0,vr.Yj)().required()}),Jo=e=>{var t;let{fieldValue:a,setFieldValue:r,saving:n=!1,onDiscard:o}=e;const[s]=(0,P.B)(),l=(0,je.vl)(),{editSharedHighlightPage1Overlay:d,openOverlay:c,closeOverlay:u}=(0,Ti.HQ)(),{activeFieldInfo:h,getHighlights:p}=(0,bi.Y)(),m=(0,b.A)(),g=(0,je.mS)(),v=(0,$.Ay)(),y=(0,i.useRef)(null),f=g.highlightsFieldInfo,w=s("review-highlight-linked-fields.new-field.no-data","No data"),T=(0,ur.SV)({mode:"all",resolver:(0,gr.t)(Qo),defaultValues:{selectedFieldRadio:a}});Ln({methods:T,overlay:v,forceWarning:!0});const I=(0,i.useCallback)(((e,t)=>t.filter((e=>e.personIds.includes(g.selectedPersonId))).filter((e=>h.fieldType===e.fieldType)).filter((t=>(null===t||void 0===t?void 0:t.imageId)===e))),[h.fieldType,g.selectedPersonId]),{highlightsOnSelectedField:S,splitScreenHighlightsOnSelectedField:E}=(0,i.useMemo)((()=>{var e,t;const{mainEditHighlights:a,splitScreenEditHighlights:i}=p();return{highlightsOnSelectedField:I(m.currentImageArk,a),splitScreenHighlightsOnSelectedField:I(null===m||void 0===m||null===(e=m.thumbnails)||void 0===e||null===(t=e[g.referenceFocusedIndex])||void 0===t?void 0:t.ark,i)}}),[I,m.currentImageArk,g.referenceFocusedIndex,null===m||void 0===m?void 0:m.thumbnails,p]),C=(0,i.useMemo)((()=>{const e=e=>{var t,a,i,r;return null!==e&&void 0!==e&&e.value?null!==(t=e.value)&&void 0!==t&&null!==(a=t.origValue)&&void 0!==a&&a.text?e.value.origValue.text:null!==(i=e.value)&&void 0!==i&&i.primaryText?e.value.primaryText:null!==(r=m.types)&&void 0!==r&&r.fields.find((t=>t.fieldType===e.value))?"":e.value:(0,A.OV)(e)||""},t=[{...f,value:e(f)}],a=a=>a.forEach((a=>{var i,r;if((null===a||void 0===a||null===(i=a.originalHighlight)||void 0===i||null===(r=i.personIds)||void 0===r?void 0:r.length)>0){var n;const i=(0,A.rr)(m.images,null===a||void 0===a||null===(n=a.originalHighlight)||void 0===n?void 0:n.fieldId),r=e(i);if(!t.find((e=>{var t,i;return e.id===(null===a||void 0===a||null===(t=a.originalHighlight)||void 0===t?void 0:t.fieldId)||e.fieldType===(null===(i=a.originalHighlight)||void 0===i?void 0:i.fieldType)&&e.value===r}))){var o,s,l;const e=i?{...i,value:r}:{id:null===a||void 0===a||null===(o=a.originalHighlight)||void 0===o?void 0:o.fieldId,elementType:"FIELD",fieldType:null===a||void 0===a||null===(s=a.originalHighlights)||void 0===s?void 0:s.fieldType,label:null===(l=m.types)||void 0===l?void 0:l.fields.find((e=>{var t;return e.fieldType===(null===a||void 0===a||null===(t=a.originalHighlight)||void 0===t?void 0:t.fieldType)})).displayLabel,value:r};t.push(e)}}}));return a(S),a(E),t}),[S,f,E,m.images,null===(t=m.types)||void 0===t?void 0:t.fields]),x=C.length>1?s("review-highlight-linked-fields.select-field-instructions.header-plural","Highlights for {fieldType} fields.",{fieldType:f.label}):s("review-highlight-linked-fields.select-field-instructions.header-singular","Highlight for {fieldType} field.",{fieldType:f.label}),Y=C.length>1?s("review-highlight-linked-fields.select-field-instructions.text-plural","The selected highlights are linked with the fields below. Pick the transcription to use."):s("review-highlight-linked-fields.select-field-instructions.text-singular","The selected highlight is linked with the fields below. Pick the transcription to use."),N=(0,i.useCallback)((()=>{l({type:"SET_EDIT_DISPATCHES",value:[]}),u("editSharedHighlightPage1"),T.reset()}),[u,T,l]);return Ln({methods:T,overlay:v,panelId:"editSharedHighlightPage1"}),(0,k.Y)(hi.A,(0,j.A)({title:s("review-highlight-linked-fields.infosheet.title","Add Linked Field"),headingColor:"yellow"},d,{close:N,footer:(0,k.Y)(J.Ay,{alignX:"end",gutters:"md"},(0,k.Y)(Z.A,{"data-testid":"panel-back-button",emphasis:"low",type:"submit",form:"",onClick:()=>{N()},disabled:n},s("navigation.back-button","Back")),(0,k.Y)(Z.A,{emphasis:"high",onClick:()=>c("editSharedHighlightPage2"),disabled:!T.formState.isValid,ref:y},s("navigation.next-button","Next")))}),(0,k.Y)(pr.Ay,{methods:T,id:"review-highlight-linked-fields"},(0,k.Y)(Rr,{heading:s("review-highlight-linked-fields.panel-header.heading","Review Linked Fields"),caption:s("review-highlight-linked-fields.panel-header.caption","Creating linked fields via highlights")}),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(Xo,null,(0,k.Y)(_e.A,{heading:x,data:Y})),(0,k.Y)(Xo,null,(0,k.Y)(Go,null,(0,k.Y)(Io.JQ,{orientation:"vertical"},C.map((e=>{var t;if(!e)return null;const a="object"===typeof e.value?(null===(t=e.value.standard)||void 0===t?void 0:t.standardizedText)||e.value.originalText:e.value;return(0,k.Y)(mr.Mi,{"data-testid":"current-highlight-field-radio",key:e.id,label:`${e.label}: ${a||w}`,name:"selectedFieldRadio",value:a,onClick:()=>{r(e.value)}})})))))),(0,k.Y)(Mo,{overlay:v,onDiscard:o,onSave:()=>y.current.click(),formId:"review-highlight-linked-fields",alertMode:!0}))},Zo=e=>{var t;let{person:a,fieldValue:i,disabled:r,isNewPerson:n}=e;const[o]=(0,P.B)(),s=(0,je.mS)(),l=o("add-highlight-linked-fields.new-person","New person"),d=o("add-highlight-linked-fields.no-relationship","No relationship"),c=s.selectedPersonId===a.id||l&&s.createdPersonId===a.id,u=null===(t=(0,A.q5)(a,"RELATIONSHIP_TO_HEAD"))||void 0===t?void 0:t[0],h=c&&"NAME_SURN"===s.highlightsFieldInfo.fieldType?`${(0,Ee.SG)(a)} ${i}`:(0,Ee.hA)({person:a});let p=(0,A.OV)(u);return p||(p=n&&c?l:d),(0,k.Y)(Go,{key:a.id},(0,k.Y)(mr.cG,{disabled:c||r,checked:c,name:a.id,value:a.id,label:`${h} ${p?`(${p})`:""}`}))},es=e=>{var t;let{fieldValue:a,handleSave:r,saving:n,onDiscard:o}=e;const{editSharedHighlightPage2Overlay:s,closeOverlay:l}=(0,Ti.HQ)(),[d]=(0,P.B)(),c=(0,bi.Y)(),u=(0,je.mS)(),h=(0,je.vl)(),p=(0,b.A)(),m=!(0,A.rr)(p.images,u.selectedPersonId),v=(0,A.rr)(p.images,null===(t=u.highlightsFieldInfo)||void 0===t?void 0:t.id),y=!v,f=(0,i.useCallback)((()=>l("editSharedHighlightPage2")),[l]),w=(0,$.Ay)(),T=(0,i.useRef)(null),I=(0,i.useMemo)((()=>[...null===u||void 0===u?void 0:u.selectedHighlights.main,...null===u||void 0===u?void 0:u.selectedHighlights.splitScreen]),[null===u||void 0===u?void 0:u.selectedHighlights]),S=(0,i.useMemo)((()=>{const e=(e=>{let{highlights:t,images:a,types:i}=e;return t.reduce(((e,t)=>{var r,n;if((null===t||void 0===t||null===(r=t.originalHighlight)||void 0===r||null===(n=r.personIds)||void 0===n?void 0:n.length)>0){var o,s,l,d,c,u,h;let r=(0,A.rr)(a,null===t||void 0===t||null===(o=t.originalHighlight)||void 0===o?void 0:o.fieldId);null!==(s=r)&&void 0!==s&&null!==(l=s.typeData)&&void 0!==l&&l.singleSuper&&(r=(0,A.rr)(a,null===(d=r)||void 0===d||null===(c=d.superElements[0])||void 0===c?void 0:c.id)),e.push(r||{id:null===t||void 0===t||null===(u=t.originalHighlight)||void 0===u?void 0:u.fieldId,elementType:"FIELD",fieldType:null===t||void 0===t||null===(h=t.originalHighlights)||void 0===h?void 0:h.fieldType,label:null===i||void 0===i?void 0:i.fields.find((e=>{var a;return e.fieldType===(null===t||void 0===t||null===(a=t.originalHighlight)||void 0===a?void 0:a.fieldType)})).displayLabel})}return e}),[])})({highlights:I,images:null===p||void 0===p?void 0:p.images,types:null===p||void 0===p?void 0:p.types});return e||[]}),[null===p||void 0===p?void 0:p.images,null===p||void 0===p?void 0:p.types,I]),E=(0,i.useMemo)((()=>(e=>{let{currentFieldsOnHighlights:t,selectedPersonId:a,images:i,activeField:r,isNewPerson:n,isNewField:o}=e;const s=[...t];if(!o){var l,d;const e=null!==r&&void 0!==r&&null!==(l=r.typeData)&&void 0!==l&&l.singleSuper?(0,A.rr)(i,null===r||void 0===r||null===(d=r.superElements[0])||void 0===d?void 0:d.id):r;s.unshift(e)}let c=null===s||void 0===s?void 0:s.reduce(((e,t)=>{const a=(0,Ee.lY)(t,i).map((e=>(0,A.rr)(i,e)));return e.concat(...a)}),[]);return o&&!n&&c.unshift((0,A.$C)(i,a)),c=Un()(c,"id"),c.sort(((e,t)=>e.id===a?-1:t.id===a?1:0)),c.flat()||[]})({activeField:v,isNewPerson:m,isNewField:y,currentFieldsOnHighlights:S,images:p.images,selectedPersonId:u.selectedPersonId})),[v,y,m,u.selectedPersonId,S,p.images]),C=(0,i.useMemo)((()=>(e=>{let{allPersonsSharingField:t,isNewPerson:a,selectedPersonId:i,currentImageArk:r}=e;return a&&t.unshift({id:i,partitionKey:r}),null===t||void 0===t?void 0:t.reduce(((e,t)=>(e[t.partitionKey]?e[t.partitionKey].push(t):e[t.partitionKey]=[t],e)),{})})({allPersonsSharingField:E,selectedPersonId:u.selectedPersonId||u.createdPersonId,currentImageArk:p.currentImageArk,isNewPerson:m})),[E,m,u.selectedPersonId,u.createdPersonId,p.currentImageArk]),x=(0,i.useMemo)((()=>C[p.currentImageArk]||[]),[C,p.currentImageArk]),Y=(0,i.useMemo)((()=>x.map((e=>e.id))),[x]),N=(0,i.useMemo)((()=>(null===Y||void 0===Y?void 0:Y.length)>30),[Y]),R=(0,i.useMemo)((()=>N?d("add-highlight-linked-fields.choose-others-on-image.more-than-thirty-heading","All names selected will continue to link to the {fieldType} because the field is linked to too many names.",{fieldType:u.highlightsFieldInfo.label}):d("add-highlight-linked-fields.choose-others-on-image.heading","Select every name that should continue to link to the {fieldType}.",{fieldType:u.highlightsFieldInfo.label})),[N,u.highlightsFieldInfo.label,d]),O=(0,i.useMemo)((()=>(e=>{let{personIds:t}=e;const a={};return t.forEach((e=>{a[e]=!0})),a})({personIds:Y,selectedPersonId:u.selectedPersonId})),[Y,u.selectedPersonId]),_=(0,ur.SV)({mode:"all",defaultValues:O});Ln({methods:_,overlay:w,forceWarning:!0});const F=(0,i.useMemo)((()=>(e=>{var t;return"object"===typeof e?(null===(t=e.standard)||void 0===t?void 0:t.standardizedText)||e.originalText:e})(a)),[a]);return Ln({methods:_,overlay:w,forceWarning:!0,panelId:"editSharedHighlightPage2"}),(0,k.Y)(hi.A,(0,j.A)({title:d("shared-field-via-highlight.title","Add Linked Field"),headingColor:"yellow"},s,{close:f,footer:(0,k.Y)(J.Ay,{alignX:"end",gutters:"md"},(0,k.Y)(Z.A,{"data-testid":"panel-back-button",emphasis:"low",type:"submit",form:"",onClick:f,disabled:n},d("edit-shared-field-footer.back","Back")),(0,k.Y)(Z.A,{"data-testid":"panel-forward-button",emphasis:"high",disabled:n,Icon:n&&g.A,form:"add-highlight-linked-fields",type:"submit",ref:T},m?d("edit-shared-field-footer.next","Next"):d("edit-shared-field-footer.save","Save")))}),(0,k.Y)(pr.Ay,{onSubmit:e=>{if(m)(e=>{const t=[];Object.entries(e).filter((e=>{let[t]=e;return t.startsWith("1:1:")})).map((e=>{let[a,i]=e;return i&&t.push(a),null}));let i=[...u.editHighlights];I.forEach((e=>{e.personIds=t,e.selected=!1,i=(0,ha.gd)(i,e)})),h({type:"SET_EDIT_HIGHLIGHTS",value:i});const r=u.highlightsFieldInfo;r.value=a,h({type:"SET_HIGHLIGHTS_FIELD_INFO",value:r}),l("highlightsPanel"),l("editSharedHighlightPage2"),l("editSharedHighlightPage1")})(e);else{const t=c.getDispatches({newFieldId:c.activeFieldInfo.id,mainImageArk:p.currentImageArk,disassociateRectangle:!1}),i=(e=>{let{values:t,linkedFieldValue:a,activeFieldInfo:i,isNewField:r,originalDispatches:n,originalHighlightDispatches:o,images:s,currentImageArk:l,fieldInEdit:d,sharedElements:c,selectedPersonId:u}=e,h=[],p={},m={};if(r){h=[...n];const e=h.find((e=>"ADD_FV"===e.type));a.standard?e.value.fieldValue=(0,Je.nu)(a,i.fieldType,e.value.fieldValue.attribution):e.value.fieldValue.origValue.text="object"===typeof a?a.originalText:a,p={id:null===i||void 0===i?void 0:i.id};const t=h.find((e=>{var t;return"FIELD"===(null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.elementType)}));if((0,Je.a$)(t)){const e=h.find((e=>"ADD_SUB"===e.type&&e.value.subId===p.id)),t=h.find((t=>"CREATE_ELEMENT"===t.type&&t.value.id===e.value.superId));m=t?t.value:(0,A.rr)(s,e.value.superId)}else m=t.value}else{var g;h.push((0,Ai.Ob)(d));const e=h[0].value,t={comment:"",reasonId:In.LX,app:qe.zQ};let r=(0,Je.cN)("object"===typeof a?a.originalText:a,t);if(a.standard&&(r=(0,Je.nu)(a,i.fieldType,t)),h.push({type:"ADD_FV",value:{fieldValue:r,id:e.id,partitionKey:e.partitionKey}}),m=e,null!==d&&void 0!==d&&null!==(g=d.typeData)&&void 0!==g&&g.singleSuper){var v;const t=(0,A.rr)(s,null===d||void 0===d||null===(v=d.superElements[0])||void 0===v?void 0:v.id);h.push((0,Ai.Ob)(t)),m=h[2].value,h.push({type:"ADD_SUB",value:{superPartitionKey:m.partitionKey,subPartitionKey:e.partitionKey,superId:m.id,subId:e.id,elementType:m.elementType}}),c.includes(t)||c.push(t)}else c.includes(d)||c.push(d);p=e}const y=o.findIndex((e=>"ADD_RECT"===e.type));if(y>-1){const e=o[y],t={...e,value:{...e.value,id:p.id}};o.splice(y,1,t)}const f=[...o];h=h.concat(f);const b=[];return Object.entries(t).filter((e=>{let[t]=e;return t.startsWith("1:1:")})).map((e=>{let[t,a]=e;return a&&b.push(t),null})),c.forEach((e=>{null!==e&&void 0!==e&&e.superElements&&e.superElements.forEach((t=>{const a=(0,A.rr)(s,t.id);a.superElements&&("NAME_SURNAME"===a.elementType&&a.superElements.length>1?a.superElements.forEach((e=>{h=h.concat((0,Ai.FJ)(e,a,m))})):b.includes(a.personId)&&(h.push({type:"REM_SUB",value:{superPartitionKey:a.partitionKey,subPartitionKey:e.partitionKey,superId:a.id,subId:e.id,elementType:a.elementType}}),h.push({type:"ADD_SUB",value:{superPartitionKey:a.partitionKey,subPartitionKey:m.partitionKey,superId:a.id,subId:m.id,elementType:a.elementType}})))}))})),h.push({type:"SET_PERSON_LOCALIZED_NAME",value:{personId:u,localizedName:"",partitionKey:l}}),h})({values:e,isNewField:y,linkedFieldValue:a,activeFieldInfo:u.highlightsFieldInfo,originalDispatches:[...u.editDispatches],originalHighlightDispatches:[...t],currentImageArk:p.currentImageArk,images:p.images,sharedElements:S,selectedHighlights:I,fieldInEdit:v,selectedPersonId:u.selectedPersonId});r(i)}},methods:_,id:"add-highlight-linked-fields"},(0,k.Y)(Rr,{heading:d("add-highlight-linked-fields.heading","{fieldType}: {fieldValue}",{fieldType:u.highlightsFieldInfo.label,fieldValue:F}),caption:d("add-highlight-linked-fields.instructions.heading","Fix any mistakes that you see.")}),(0,k.Y)(ae.A,null),(0,k.Y)(re.H6,null,R),x.map((e=>(0,k.Y)(Zo,{key:e.id,person:e,isNewPerson:m,fieldValue:a,disabled:N})))),(0,k.Y)(Mo,{overlay:w,onDiscard:o,onSave:()=>T.current.click(),formId:"review-highlight-linked-fields"}))},ts=()=>{const{topMostPanel:e,closeOverlay:t}=(0,Ti.HQ)(),a=(0,je.mS)(),r=(0,je.vl)(),{images:n}=(0,b.A)(),o=(0,Ae.l)(),[s]=(0,P.B)(),[l,d]=(0,i.useState)(),[c,u]=(0,i.useState)(!1),[h,p]=(0,i.useState)(!1),m=(0,bi.Y)(),{rip_sharedImageViewer_saveChanges:g,rip_sharedImageViewer_sls_actions_splunk_debugger:v}=(0,L.h)(["rip_sharedImageViewer_saveChanges","rip_sharedImageViewer_sls_actions_splunk_debugger"]),y=(0,i.useCallback)((e=>{if((null===e||void 0===e?void 0:e.length)>0){const t=n.reduce(((e,t)=>(t.subElements&&t.subElements.forEach((t=>e.push({type:"SET_RECORD_PERSON_IDS",value:null===t||void 0===t?void 0:t.id}))),e)),[]);o({type:"BATCH_DISPATCHES",value:e.concat(t)})}}),[n,o]),f=(0,i.useCallback)((async e=>{const i=(0,wi.q)(e);u(!0),(0,vi.sx)({event_name:"click_action",link_name:"Edit: Shared Field: Save"}),(0,Se.Nn)({actions:i,userId:a.userId,appName:qe.zQ,fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],splunkDebugModeArguments:v.isOn?{theFileFromWhichSaveWasCalled:"EditHighlights"}:{}}).then((()=>{y(e),t("highlightsPanel"),t("editSharedHighlightPage1"),t("editSharedHighlightPage2"),t("editSharedFieldPage1"),t("editSharedFieldPage2"),r({type:"SET_EDIT_DISPATCHES",value:[]}),m.setActiveFieldInfo({id:null,value:null}),m.clearEdits()})).catch((e=>{var t,a;p(e),(0,$e.Yt)(e,null,{codeId:79,slsActions:i,status:null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status,responseBody:null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data})})).finally((()=>{u(!1)}))}),[g,a.userId,t,r,v,o]),A=(0,i.useCallback)((()=>{t("editSharedHighlightPage2"),t("editSharedHighlightPage1"),r({type:"SET_EDIT_DISPATCHES",value:[]}),m.clearEdits(),m.clearDisplay({all:!0}),m.setCreatingRects(!1),m.setEditMode(!1),m.setActiveFieldInfo({id:null,value:null}),t("highlightsPanel")}),[t,r,m]);return(0,k.Y)(i.Fragment,null,"editSharedHighlightPage1"===e()&&(0,k.Y)(Jo,{fieldValue:l,setFieldValue:d,onDiscard:A}),"editSharedHighlightPage2"===e()&&(0,k.Y)(es,{fieldValue:l,handleSave:f,saving:c,onDiscard:A}),(0,k.Y)(it,{error:h,setError:p,title:s("save-error-overlay.heading","Unable to Save Changes"),message:s("save-error-overlay.content-generic","Your changes were not saved.  Please try again later.")}))},as=e=>{let{overlay:t}=e;const[a]=(0,P.B)(),{openOverlay:i}=(0,Ti.HQ)(),r=(0,bi.Y)(),n=e=>{let{action:a}=e;"review"===a?i("editSharedHighlightPage1"):r.setEditMode(!0),t.close()};return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:a("edit-highlight.used-by-other-field.title","Review then add")}),a("edit-highlight.used-by-other-field.message","This highlight is used by another name. Do you wish to review the fields using this highlight and then add?"),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{"data-testid":"pick-another-highlight",onClick:()=>n({action:"cancel"})},a("edit-hightlight.used-by-other-field.pick-another-highlight","Pick another highlight")),(0,k.Y)(Z.A,{"data-testid":"review-shared-highlight",onClick:()=>n({action:"review"}),emphasis:"high"},a("edit-hightlight.used-by-other-field.review","Review")))))},is=()=>{const e=(0,je.mS)(),t=(0,je.vl)(),a=(0,b.A)(),r=(0,bi.Y)(),{closeOverlay:n}=(0,Ti.HQ)(),{query:o}=(0,G.A)(),s=(0,$.Ay)(),l=(0,i.useMemo)((()=>{var t,i;return e.splitScreen?null===a||void 0===a||null===(t=a.thumbnails)||void 0===t||null===(i=t[e.referenceFocusedIndex])||void 0===i?void 0:i.ark:void 0}),[null===e||void 0===e?void 0:e.referenceFocusedIndex,null===a||void 0===a?void 0:a.thumbnails,e.splitScreen]),d=(0,i.useCallback)((i=>{let{mainEditHighlights:o,splitScreenEditHighlights:d,mainSelectedHighlights:c,splitScreenSelectedHighlights:u,fieldType:h,activeFieldInfo:p}=i;t({type:"SET_EDIT_HIGHLIGHTS",value:o}),t({type:"SET_REFERENCE_EDIT_HIGHLIGHTS",value:d});const m=(e=>{var t;let{mainSelectedHighlights:a,splitScreenSelectedHighlights:i,types:r,fieldType:n,personId:o}=e;const s=[...a,...i],l=r.fields.find((e=>e.fieldType===n)),d=!(null!==l&&void 0!==l&&l.singleSuper),c=!(null!==(t=r.elements.find((e=>e.elementType===l.elementTypes[0])))&&void 0!==t&&t.singleSuper);return!!(null===s||void 0===s?void 0:s.find((e=>{var t;const a=null===(t=e.originalHighlight)||void 0===t?void 0:t.personIds.filter((e=>e));return(null===a||void 0===a?void 0:a.length)>0&&!(null!==a&&void 0!==a&&a.includes(o))})))&&(d||c)})({mainSelectedHighlights:c,splitScreenSelectedHighlights:u,fieldType:null===h||void 0===h?void 0:h.fieldType,types:null===a||void 0===a?void 0:a.types,personId:e.selectedPersonId||(null===p||void 0===p?void 0:p.personId)});m?(r.setDisplayHighlights({mainPartitionKey:a.currentImageArk,elementIds:[null===p||void 0===p?void 0:p.id],highlights:o}),l&&r.setDisplayHighlights({splitScreenPartitionKey:l,elementIds:[null===p||void 0===p?void 0:p.id],highlights:d}),t({type:"SET_HIGHLIGHTS_FIELD_INFO",value:p}),t({type:"SET_SELECTED_HIGHLIGHTS",value:{main:c,splitScreen:u}}),s.open()):(n("highlightsPanel"),r.setActiveFieldInfo({id:null,value:null}))}),[a.currentImageArk,n,t,s,null===a||void 0===a?void 0:a.images,null===a||void 0===a?void 0:a.types,l,e.selectedPersonId]);return(0,i.useEffect)((()=>{"index"===(null===o||void 0===o?void 0:o.view)&&r.setOnSaveFunction(d)}),[a.currentImageArk,e.selectedPersonId,l,null===o||void 0===o?void 0:o.view]),{sharedHighlightOverlay:s,splitScreenImageArk:l}};var rs=a(7852);const ns={PLACE:"placeFields",DATE:"dateFields",EVENT:"otherFields"},os=e=>{var t;let{types:a,t:i,isPrimary:r=!1,showRelationshipEvents:n=!0}=e;const o=null===a||void 0===a||null===(t=a.events)||void 0===t?void 0:t.filter((e=>{const t=!!r||!e.primaryOnly,a=!!n||!e.elementTypes.includes("RELATIONSHIP");return t&&a})),s=null===o||void 0===o?void 0:o.map((e=>({...e,key:e.eventType,primaryText:e.displayLabel,group:i("edit-events.fields.event-type","Event type")})));return Un()(s,"key")||[{key:"notImplementd",primaryText:i("add-person.types-not-implemented","Types Not Implemented")}]},ss=e=>{var t,a,i,r,n,o,s;let{event:l,types:d,t:c,selectedRelationshipPerson:u,parentRelationship:h,showRelationshipEvents:p,shouldParseEventfromSls:m=!0}=e;if(!m&&l)return l;const g=(null===l||void 0===l?void 0:l.primary)||!1,v=(null===l||void 0===l?void 0:l.id)||(0,A.Vs)(),y=null===l||void 0===l||null===(t=l.subElements)||void 0===t?void 0:t.find((e=>"EVENT_TYPE"===e.fieldType)),f=null!==l&&void 0!==l&&l.eventType?os({types:d,t:c,isPrimary:g,showRelationshipEvents:p}).find((e=>{var t;return e.key===((null===l||void 0===l||null===(t=l.eventType)||void 0===t?void 0:t.key)||(null===l||void 0===l?void 0:l.eventType))})):null,b={id:v,newEvent:!(null!==l&&void 0!==l&&l.id),primary:g,eventType:f,eventTypeField:{...y,id:(null===y||void 0===y?void 0:y.id)||(0,A.Vs)(),label:(null===f||void 0===f?void 0:f.primaryText)||c("edit-events.fields.event-type","Event Type"),fieldType:"EVENT_TYPE"},dateFields:(null===l||void 0===l||null===(a=l.subElements)||void 0===a||null===(i=a.find((e=>"DATE"===e.elementType)))||void 0===i?void 0:i.subElements)||[],placeFields:(null===l||void 0===l||null===(r=l.subElements)||void 0===r||null===(n=r.find((e=>"PLACE"===e.elementType)))||void 0===n?void 0:n.subElements)||[],otherFields:(null===l||void 0===l||null===(o=l.subElements)||void 0===o?void 0:o.filter((e=>"FIELD"===e.elementType&&"EVENT_TYPE"!==e.fieldType)))||[],lockedChips:[],selectedChips:[],removedFields:[],[v]:null===f||void 0===f?void 0:f.key,relationshipPerson:u,parentRelationship:h,movingPersonToOtherRecord:!1},w=null===l||void 0===l||null===(s=l.subElements)||void 0===s?void 0:s.flatMap((e=>e.subElements)).filter(Boolean).filter((e=>{var t;return null===e||void 0===e||null===(t=e.typeData)||void 0===t?void 0:t.editable})).concat(null===l||void 0===l?void 0:l.subElements.filter((e=>"FIELD"===e.elementType&&"EVENT_TYPE"!==e.fieldType)));return(null===w||void 0===w?void 0:w.length)>0&&(0,$e._A)(b,w),b},ls=e=>{var t,a;let{attribution:i,el:r,value:n,eventTypeFieldId:o,types:s}=e;const l=null===r||void 0===r||null===(t=r.subElements)||void 0===t?void 0:t.find((e=>"EVENT_TYPE"===e.fieldType)),d=null===s||void 0===s||null===(a=s.events)||void 0===a?void 0:a.find((e=>e.eventType===n)),c=null===d||void 0===d?void 0:d.displayLabel,u=(0,Je.cN)(c,i,null===d||void 0===d?void 0:d.uri);return!be()(l)?(0,Ai.DF)({partitionKey:r.partitionKey,typeFieldValue:u,typeFieldId:l.id}):(0,Ai.Ns)({partitionKey:r.partitionKey,typeFieldId:o,typeFieldValue:u,elementId:r.id})},ds=e=>{let{key:t,el:a}=e;const i=[];if(i.push({type:"REMOVE_ELEMENT",value:{id:t,partitionKey:a.partitionKey,elementType:a.elementType}}),"EVENT"===a.elementType){var r;const e=null===a||void 0===a||null===(r=a.subElements)||void 0===r?void 0:r.find((e=>"EVENT_TYPE"===e.fieldType));e&&i.push({type:"REMOVE_ELEMENT",value:{id:e.id,partitionKey:a.partitionKey,elementType:e.elementType}})}return i},cs=e=>{let{images:t,selectedPerson:a,movingPersonToOtherRecord:i,otherPerson:r,keepThisRelationshipId:n}=e,o=[];return r.recordId!==a.recordId&&(o=i?(0,Ai.fN)({mainPerson:a,otherPerson:r,images:t,movingMainPersonToOtherRecord:i,keepThisRelationshipId:n}):o.concat((0,Ai.fN)({mainPerson:a,otherPerson:r,images:t,movingMainPersonToOtherRecord:i,keepThisRelationshipId:n}))),o},us=e=>{var t;let{relationshipField:a,otherPerson:i,selectedPersonId:r,value:n,order:o}=e;const s=null===(t=a.superElements)||void 0===t?void 0:t.filter((e=>e.id!==r));return null!==s&&void 0!==s&&s.length&&s[0].id!==n.key?(0,Ai.Yd)({newSuperPartitionKey:i.partitionKey,oldSuperPartitionKey:s[0].partitionKey,subPartitionKey:a.partitionKey,oldSuperId:s[0].id,newSuperId:i.id,subId:a.id,oldElementType:"PERSON",newElementType:"PERSON",extraArgs:{order:o}}):[]},hs=function(e,t,a,i,r){var n,o,s;const l=[...!(arguments.length>5&&void 0!==arguments[5])||arguments[5]?(0,Ie.XE)(e):[],...(null===e||void 0===e||null===(n=e.subElements)||void 0===n?void 0:n.filter((e=>"EVENT"===e.elementType)))||[]],d=t.eventTypeField.id,c=t.id,u={comment:"",reasonId:In.LX,app:qe.zQ},h=null===t||void 0===t?void 0:t.newEvent,p=h?{}:null,m=(0,A.rr)(r,null===t||void 0===t||null===(o=t.relationshipPerson)||void 0===o?void 0:o.key);let g=h?(e=>{var t,a,i;let{values:r,selectedPerson:n,otherPerson:o,newEvent:s,attribution:l,types:d,selectedPersonId:c,addedEventId:u,eventTypeFieldId:h}=e,p=[];const m=null===d||void 0===d||null===(t=d.events)||void 0===t?void 0:t.find((e=>e.eventType===r[u])),g=null===m||void 0===m?void 0:m.displayLabel,v=(0,Je.cN)(g,l,null===m||void 0===m?void 0:m.uri),y=r.dateFields.length>0,f=r.placeFields.length>0,b=m.elementTypes.includes("RELATIONSHIP");let w=c;if(b){w=(0,A.Vs)();const e=(0,Ai.vP)({partitionKey:n.partitionKey,person1ID:n.id,person2ID:o.id,person1PartitionKey:n.partitionKey,person2PartitionKey:o.partitionKey,relType:m.relType,id:w});p=[...p,...e]}const T=(0,Ai.bp)({partitionKey:n.partitionKey,eventType:null===m||void 0===m?void 0:m.eventType,personId:w,id:u,eventTypeFieldValue:v,createDate:y,createPlace:f,eventTypeId:h,personIdAsRelationshipId:b}),I=null===T||void 0===T||null===(a=T.find((e=>"CREATE_ELEMENT"===e.type&&"DATE"===e.value.elementType)))||void 0===a?void 0:a.value.id,S=null===T||void 0===T||null===(i=T.find((e=>"CREATE_ELEMENT"===e.type&&"PLACE"===e.value.elementType)))||void 0===i?void 0:i.value.id;return y&&(s.dateId=I),f&&(s.placeId=S),p=p.concat(T),p})({newEvent:p,selectedPersonId:null===e||void 0===e?void 0:e.personId,addedEventId:c,eventTypeFieldId:d,attribution:u,types:a,values:t,selectedPerson:e,otherPerson:m}):[];const{dateFields:v,placeFields:y,otherFields:f,removedFields:b,eventTypeField:w,id:T,parentRelationship:I,relationshipPerson:S,movingPersonToOtherRecord:E,eventType:k}=t,C=[...v,...y,...f,...b,{...w,id:T},I].filter(Boolean),x=b.map((e=>e.id));if(C.forEach((n=>{const o=n.id,s=t[o],h=(0,A.rr)([e],o);var v;if(h)if(x.includes(o))g=[...g,...ds({key:o,el:h})];else if("RELATIONSHIP"===(null===h||void 0===h?void 0:h.elementType)){if(S){var y;const t=cs({images:r,selectedPerson:e,otherPerson:m,movingPersonToOtherRecord:E,keepThisRelationshipId:h.id});g=[...g,...t];const a="FIRST"===(null===(y=I.superElements.find((t=>t.id===e.id)))||void 0===y?void 0:y.order)?"SECOND":"FIRST";g=h.superElements.length>1?[...g,...us({relationshipField:h,selectedPersonId:e.id,order:a,otherPerson:m,value:S})]:[...g,{type:"ADD_SUB",value:{superId:m.id,subId:h.id,superPartitionKey:m.partitionKey,subPartitionKey:h.partitionKey,elementType:"PERSON",extraArgs:{order:a}}}]}}else if("EVENT"!==(null===h||void 0===h?void 0:h.elementType)||!i.dirtyFields[o]&&null!==h&&void 0!==h&&null!==(v=h.subElements)&&void 0!==v&&v.find((e=>"EVENT_TYPE"===e.fieldType))){if(i.dirtyFields[o]){const{id:e,value:t}=(e=>{var t,a;let i,{el:r,value:n,attribution:o}=e;i="FIELD"===r.elementType?r:null!==r&&void 0!==r&&null!==(t=r.subElements)&&void 0!==t&&t.length?null===r||void 0===r||null===(a=r.subElements)||void 0===a?void 0:a[0]:r;let s=(0,Je.cN)("string"===typeof n?n:n.originalText,o);return n.standard&&(s=(0,Je.nu)(n,i.fieldType,o)),"SEX_CODE"===i.fieldType&&(s=(0,Je.cN)(n.primaryText,o,`http://gedcomx.org/${n.key}`)),{id:i.id,value:s}})({el:h,value:s,attribution:u});g.push({type:"ADD_FV",value:{partitionKey:h.partitionKey,id:e,fieldValue:t}})}}else g=[...g,...ls({attribution:u,el:h,value:s,eventTypeFieldId:d,types:a})];else if(c!==o){const{fieldType:t}=n,a=null!==s&&void 0!==s&&s.standard?(0,Je.nu)(s,t,u):(0,Je.cN)("string"===typeof s?s:(null===s||void 0===s?void 0:s.originalText)||"",u),{superId:i,superType:r,dispatches:d}=(e=>{let t,{field:a,newEvent:i,eventElements:r,selectedPerson:n}=e,o=[];const s=a.superType,l=a.super;if(i)t="DATE"===s?i.dateId:"PLACE"===s?i.placeId:l;else{var d;const e=r.find((e=>e.id===l)),a="EVENT"===s?e:null===e||void 0===e||null===(d=e.subElements)||void 0===d?void 0:d.find((e=>e.elementType===s));a?t=a.id:(t=(0,A.Vs)(),o=[...o,...(0,Ai.qJ)({partitionKey:null===n||void 0===n?void 0:n.partitionKey,intermediaryType:s,intermediaryId:t,superId:l,superType:"EVENT"})])}return{superId:t,superType:s,dispatches:o}})({field:n,newEvent:p,eventElements:l,selectedPerson:e}),c=(0,Ai.h8)({partitionKey:e.partitionKey,superId:i,fieldType:t,fieldValue:a,superElementType:r,id:o});g=[...g,...d,...c]}})),null!==k&&void 0!==k&&null!==(s=k.elementTypes)&&void 0!==s&&s.includes("RELATIONSHIP")){const t=cs({images:r,selectedPerson:e,otherPerson:m,movingPersonToOtherRecord:E,keepThisRelationshipId:c});g=[...t,...g]}return h&&g.push({type:"SET_RECORD_PERSON_IDS",value:e.recordId}),g},ps=e=>{let{uuid:t,chip:a,formValues:i,superType:r}=e;return{id:t||(0,A.Vs)(),label:a.label,fieldType:a.value.split(":")[0],added:!0,super:i.id,superType:r}},ms=e=>{var t;let{field:a,form:i,fieldTypeKey:r,removedFieldsArray:n}=e;const{formState:{defaultValues:o},unregister:s,setValue:l}=i;!(null===(t=o[ns[r]])||void 0===t||!t.find((e=>e.id===a.id)))&&(n.push({...a,superType:r}),l("removedFields",n)),s(a.id)},gs={name:"jcpz51",styles:"padding:12px 8px;cursor:grab;align-self:center;"},vs={display:"flex",backgroundColor:W.A.gray00,borderRadius:"6px"},ys={display:"flex",backgroundColor:W.A.blue30,marginLeft:"12px",borderTopRightRadius:"6px",borderBottomRightRadius:"6px"},fs={flexGrow:1},bs={name:"ue3an8",styles:"min-height:200px;padding:10px;"};function As(e){let{name:t,otherName:a}=e;return(0,k.Y)(Jn,{id:"relationship",style:vs,dragHandleStyle:ys,childrenStyle:fs,dragHandle:(0,k.Y)("div",{css:gs},(0,k.Y)($n.A,null))},(0,k.Y)(Bn.A,null,(0,k.Y)(Da.A,{primaryText:t,startElement:(0,k.Y)(Da.A.Icon,{Icon:Ha.A})}),(0,k.Y)(Da.A,{primaryText:a,startElement:(0,k.Y)(Da.A.Icon,{Icon:Ha.A})})))}function ws(e){let{id:t,relationships:a,selectedRecord:r,name:n,otherName:o}=e;const[s]=(0,P.B)(),l=(0,b.A)(),[d,c]=(0,i.useState)(!1),u=(0,k.AH)("background-color:",W.A.gray00,";border-radius:6px;overflow-y:scroll;overflow-x:hidden;"),h=d?a:a.slice(0,2);return(0,k.Y)(Zn,{id:t},(0,k.Y)("div",{style:Qn,css:bs},(0,k.Y)(re.H3,{size:"H6"},s("edit-relationships.choose-record-overlay.recordX","Record {number}",{number:"current"===t?"1":"2"}),(0,k.Y)(ne.A,null,s("edit-relationships.choose-record-overlay.move-here","Move Relationship Here"))),(0,k.Y)(ae.A,{size:"nano"}),r===t&&(0,k.Y)(As,{name:n,otherName:o}),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)("div",{css:u},(0,k.Y)(Bn.A,null,h.map((e=>{const t=(0,A.rr)(l.images,e.otherPersonId);return(0,k.Y)(Da.A,{key:e.id,overline:`${null!==t&&void 0!==t&&t.primary?`${s("edit-relationships.choose-record-overlay.principal","Principal")} | `:""}${e.label}`,primaryText:e.value,startElement:(0,k.Y)(Da.A.Icon,{Icon:Ha.A})})})))),a.length>2&&(0,k.Y)(J.Ay,{alignX:"center"},(0,k.Y)(Z.A,{onClick:()=>{c((e=>!e))}},d?s("edit-relationships.choose-record-overlay.see-less.button","See Less"):s("edit-relationships.choose-record-overlay.see-more.button","See More")))))}function Ts(e){let{person:t,otherPerson:a,record1Relationships:n,record2Relationships:o,selectedRecord:s,setSelectedRecord:l}=e;const[d,c]=(0,i.useState)(!1),u=(0,Ee.hA)({person:t}),h=(0,Ee.hA)({person:a}),p=(0,jn.Ay)();return(0,k.Y)(i.Fragment,null,(0,k.Y)(O.x,{i18nKey:"edit-relationships.choose-record-overlay.drag-instructions"},(0,k.Y)("strong",null,"Drag"),(0,k.Y)("i",null," ",{name:u})," and",(0,k.Y)("i",null," ",{otherName:h})," to the correct record. Record names have to be in the same record to have relationships."),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(Wn.Mp,{onDragStart:()=>{c(!0)},onDragEnd:e=>{c(!1),l(e.over.id)}},(0,k.Y)(Ye.A,{backgroundColor:W.A.blue03},(0,k.Y)(st.N6,{guttersX:"xs",columnCount:p({default:1,sm:2})},(0,k.Y)(ws,{relationships:n,id:"current",selectedRecord:s,name:u,otherName:h}),(0,k.Y)(ws,{relationships:o,id:"other",selectedRecord:s,name:u,otherName:h}))),(0,r.createPortal)((0,k.Y)(Wn.Hd,{modifiers:[qn.Q_],dropAnimation:null,style:{boxShadow:"0 0 5px rgb(68 68 68 / 0.6)",background:"white",borderRadius:"6px"}},d&&(0,k.Y)(As,{name:u,otherName:h})),document.body)))}function Is(e){let{personBeingMoved:t,personStaying:a,record1Relationships:r,record2Relationships:n,selectedRecord:o}=e;const[s]=(0,P.B)(),l=(0,b.A)(),[d,c]=(0,i.useState)(!1),u=(0,Ee.hA)({person:t}),h=(0,Ee.hA)({person:a}),p="current"===o?n:r,m="current"===o?r:n,g=d?p:p.slice(0,2);return(0,k.Y)(i.Fragment,null,0===p.length&&(0,k.Y)("div",null,(0,k.Y)(O.x,{i18nKey:"edit-relationships.choose-record-overlay.move-person"},"Move ",(0,k.Y)("i",null,{name:u})," to",(0,k.Y)("strong",null," Record ",{recordNum:"current"===o?"1":"2"})),(0,k.Y)(Bn.A,null,(0,k.Y)(Da.A,{primaryText:u,startElement:(0,k.Y)(Da.A.Icon,{Icon:Ha.A})}),(0,k.Y)(Da.A,{primaryText:h,startElement:(0,k.Y)(Da.A.Icon,{Icon:Ha.A})})),m.length>0&&(0,k.Y)(i.Fragment,null,s("edit-relationships.choose-record-overlay.relationships-of","Relationships of {name}:",{name:h})),(0,k.Y)(Bn.A,null,m.map((e=>{const t=(0,A.rr)(l.images,e.otherPersonId);return(0,k.Y)(Da.A,{key:e.id,overline:`${null!==t&&void 0!==t&&t.primary?`${s("edit-relationships.choose-record-overlay.principal","Principal")} | `:""}${e.label}`,primaryText:e.value,startElement:(0,k.Y)(Da.A.Icon,{Icon:Ha.A}),endElement:(0,k.Y)(Da.A.IconButton,{Icon:Kt.A,onClick:()=>{(0,A.tG)(t,e,l.currentImageArk)}})})})))),p.length>0&&(0,k.Y)("div",null,(0,k.Y)(O.x,{i18nKey:"edit-relationships.choose-record-overlay.approve-instructions"},"The old relationships of ",(0,k.Y)("i",null,{name:u})," will need to be removed.",(0,k.Y)("strong",null," Approve")," removal of relationships below."),"\xa0",(0,k.Y)(rn.A,{to:"https://www.familysearch.org/en/help/helpcenter/article/how-do-i-add-a-name-to-a-relationship-in-historical-records-when-the-name-is-currently-connected-to-the-wrong-record"},s("edit-relationships.choose-record-overlay.learn-more","Learn more")),(0,k.Y)(Bn.A,null,(0,k.Y)(Da.A,{primaryText:u,overline:null!==t&&void 0!==t&&t.primary?s("edit-relationships.choose-record-overlay.principal","Principal"):"",startElement:(0,k.Y)(Da.A.Icon,{Icon:Ha.A})})),(0,k.Y)(ae.A,{size:"xs"}),s("edit-relationships.choose-record-overlay.view-relationships","The following relationships will be removed:"),(0,k.Y)("div",null,(0,k.Y)(Bn.A,null,g.map((e=>{const t=(0,A.rr)(l.images,e.otherPersonId);return(0,k.Y)(Da.A,{key:e.id,overline:`${null!==t&&void 0!==t&&t.primary?`${s("edit-relationships.choose-record-overlay.principal","Principal")} | `:""}${e.label}`,primaryText:e.value,startElement:(0,k.Y)(Da.A.Icon,{Icon:Ha.A}),endElement:(0,k.Y)(Da.A.IconButton,{Icon:Kt.A,onClick:()=>{(0,A.tG)(t,e,l.currentImageArk)}})})}))))),p.length>2?(0,k.Y)(Z.A,{onClick:()=>c((e=>!e))},d?s("edit-relationships.choose-record-overlay.see-less.button","See Less"):s("edit-relationships.choose-record-overlay.see-more.button","See More")):null)}const Ss={name:"hoe9xz",styles:"align-self:center;"};function Es(e){let{overlay:t,onCancel:a,person:r,otherPerson:n,record1Relationships:o,record2Relationships:s,setMovingPersonToOtherRecord:l}=e;const[d]=(0,P.B)(),[c,u]=(0,i.useState)(1),[h,p]=(0,i.useState)("current"),m="current"===h?s:o,g=1===c||m.length>0?d("edit-relationships.choose-record-overlay.before-adding","Before adding this relationship"):d("edit-relationships.choose-record-overlay.approve-change","Approve the change"),v=(0,i.useCallback)((()=>{t.close(),l("other"===h),p("current"),u(1)}),[t,l,h]);return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:g,size:"lg",nonClosable:!0}),1===c&&(0,k.Y)(Ts,{record1Relationships:o,record2Relationships:s,person:r,otherPerson:n,selectedRecord:h,setSelectedRecord:p}),2===c&&(0,k.Y)(Is,{personStaying:"current"===h?r:n,personBeingMoved:"current"===h?n:r,record1Relationships:o,record2Relationships:s,selectedRecord:h}),(0,k.Y)(et.Ay,null,1===c&&(0,k.Y)(tt.A,{alignY:"middle"},(0,k.Y)(Z.A,{onClick:()=>{t.close(),p("current"),a&&a()},linkName:"cancel-move-person-to-other-record-dialog","data-testid":"choose-record-overlay-cancel"},d("edit-relationships.choose-record-overlay.cancel.button","Cancel")),(0,k.Y)("span",{css:Ss},d("edit-relationships.choose-record-overlay.stepXof2","Step {step} of 2",{step:"1"})),(0,k.Y)(Z.A,{onClick:()=>{u(2)},disabled:!h,emphasis:"high",linkName:"next-step-move-person-to-other-record-dialog","data-testid":"choose-record-overlay-next"},d("edit-relationships.choose-record-overlay.next.button","Next"))),2===c&&(0,k.Y)(tt.A,{alignY:"middle"},(0,k.Y)(Z.A,{onClick:()=>{u(1)},"data-testid":"choose-record-overlay-back",linkName:"back-button-move-person-to-other-record-dialog"},d("edit-relationships.choose-record-overlay.back.button","Back")),(0,k.Y)("span",{css:Ss},d("edit-relationships.choose-record-overlay.stepXof2","Step {step} of 2",{step:"2"})),m.length>0&&(0,k.Y)(at.A,{onClick:v,Icon:gi.A,"data-testid":"choose-record-overlay-approve-removal",linkName:"approve-relationship-removal-move-person-to-other-record-dialog"},d("edit-relationships.choose-record-overlay.remove.button","Approve Removal")),0===m.length&&(0,k.Y)(Z.A,{emphasis:"high",Icon:pi.A,onClick:v,"data-testid":"choose-record-overlay-approve",linkName:"approve-changes-move-person-to-other-record-dialog"},d("edit-relationships.choose-record-overlay.approve.button","Approve")))))}const ks=e=>{let{eventLabel:t,person:a,personName:r,relationshipOptions:n}=e;const[o]=(0,P.B)(),{getValues:s,setValue:l,trigger:d,watch:c,formState:u}=(0,ur.Hj)(),{images:h,currentImageArk:p,types:m}=(0,b.A)(),g=(0,$.Ay)(),[v,y]=(0,i.useState)([]),[f,w]=(0,i.useState)([]),T=c("relationshipPerson"),[I,S]=s(["parentRelationship","eventType"]),E=(0,i.useMemo)((()=>null===T||void 0===T?void 0:T.key),[T]),{setDisplayHighlights:C}=(0,bi.Y)(),x=(0,A.rr)(h,E),{mainPersonLabel:Y,secondaryPersonLabel:N}=(0,i.useMemo)((()=>(e=>{let{t:t,types:a,mainPerson:i,otherPerson:r,parentRelationship:n,eventType:o}=e,s=t("type-unknown.label","<Unknown Type>"),l=t("type-unknown.label","<Unknown Type>");if(n)s=(0,Ie.p)({otherPerson:i,order:null===n||void 0===n?void 0:n.order,typeData:null===n||void 0===n?void 0:n.typeData}),l=(0,Ie.p)({otherPerson:r,order:"FIRST"===(null===n||void 0===n?void 0:n.order)?"SECOND":"FIRST",typeData:null===n||void 0===n?void 0:n.typeData});else{const e=a.relationships.find((e=>e.relType===o.relType));s=null===e||void 0===e?void 0:e.firstDisplayLabel,l=null===e||void 0===e?void 0:e.secondDisplayLabel}return{mainPersonLabel:s,secondaryPersonLabel:l}})({t:o,types:m,mainPerson:a,otherPerson:x,parentRelationship:I,eventType:S})),[o,m,x,I,S,a]),R=(0,i.useCallback)((e=>{const t=e?(0,A.rr)(h,e.key):null;if(t){const e=t.recordId;if(e&&a.recordId!==e){const e=(0,Ie.FA)(a,h).filter((e=>(null===e||void 0===e?void 0:e.id)!==(null===I||void 0===I?void 0:I.id))),i=(0,Ie.FA)(t,h);y(e),w(i),g.open()}}d("relationshipPerson"),C({mainPartitionKey:p,mainZoomFilter:e=>e.attached,elementIds:[null===e||void 0===e?void 0:e.key],fieldTypes:["NAME_GN","NAME_SURN","NAME_SUF"]})}),[d,p,a,g,null===I||void 0===I?void 0:I.id,h,C]),O=(0,i.useCallback)((e=>{l("movingPersonToOtherRecord",e)}),[l]);return(0,k.Y)(i.Fragment,null,(0,k.Y)(Ye.A,{edges:"border"},(0,k.Y)(re.H6,null,o("edit-events.relationship.heading","Relationship")),(0,k.Y)(te.A,{size:"sm"},o("edit-events.relationship.data","Select the couple in the {eventType}.",{eventType:t})),(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(pn.A,{value:r,label:Y,disabled:!0}),(0,k.Y)(mr.eP,{name:"relationshipPerson",label:N,"data-testid":"relationship-person-autosuggest",placeholder:N,suggestions:n,clearOnClickAway:!0,clearable:!0,onSuggestionSelected:R})),(0,k.Y)(Es,{onCancel:()=>{l("relationshipPerson",u.relationshipPerson),d("relationshipPerson")},person:a,otherPerson:x,overlay:g,setMovingPersonToOtherRecord:O,record1Relationships:v,record2Relationships:f}),(0,k.Y)(ae.A,{size:"xs"}))};function Cs(e,t,a,r,n){const o=(0,i.useMemo)((()=>n(e)),[e,n]),s=(0,i.useMemo)((()=>{const e=a.concat(r),i=e.map((e=>null===e||void 0===e?void 0:e.value.split(":")[0])),n=e.map((e=>{var a;return{...e,fieldType:null===(a=t.find((t=>(null===t||void 0===t?void 0:t.id)===(null===e||void 0===e?void 0:e.id))))||void 0===a?void 0:a.fieldType}})),s=t.filter((e=>e.added)).map((e=>e.fieldType));return null===o||void 0===o?void 0:o.map((e=>{var t;const a=i.includes(e.value)?e.value:null===(t=n.find((t=>(null===t||void 0===t?void 0:t.fieldType)===(null===e||void 0===e?void 0:e.value))))||void 0===t?void 0:t.fieldType;return{...e,disabled:Boolean(a)||s.includes(e.value)}}))}),[t,o,a,r]);return{treatedFieldChipData:s}}const xs=(e,t)=>e.label<t.label?-1:e.label>t.label?1:0;function Ys(e){let{chipData:t=[],fieldData:a=[],handleSelection:r=()=>{},allowSelectingMultiple:n=!0,lockSharedFields:o=!0,unlinkingStates:s,showSearch:l=!0}=e;const d=(0,b.A)(),[c,u]=(0,i.useState)(""),[h]=(0,P.B)(),p=h("field-chip-selector.added-fields.title","Added Fields"),m=h("field-chip-selector.locked-fields.title","Locked Fields"),g=h("field-chip-selector.search-field.placeholder","Search Fields"),v=a.map((e=>{var t;let a=(0,A.OV)(e)||e.value||"";var i,r,n;"object"===typeof a&&(a=(null===(i=a.normalizedValues)||void 0===i||null===(r=i[0])||void 0===r?void 0:r.text)||(null===(n=a.origValue)||void 0===n?void 0:n.text));const l=`${e.label} ${a&&!["NAME_PRE","NAME_GN","NAME_SURN","NAME_SUF"].includes(a)?`(${a})`:""}`,c={label:a?l:e.label,id:e.id};return c.label||(e.label=e.name,c.label=e.name),c.value=`${e.fieldType}:${Math.random()}`,c.disabled=(0,A._Y)(e,d.images)>1&&!(null!==s&&void 0!==s&&null!==(t=s[e.id])&&void 0!==t&&t.state)&&!(null!==s&&void 0!==s&&s[e.fieldType])&&o,c.emphasized=!c.disabled,c.selected=!c.disabled,c.disabled&&(c.description=h("field-chip-selector.disabled-chip.shared-field","Disabled Linked Field")),c})),y=(0,hn.Ay)(v.filter((e=>!e.disabled)).sort(xs)),{addChip:f,chips:w}=y,T=(0,hn.Ay)(v.filter((e=>e.disabled)).sort(xs).map((e=>({...e,Icon:Fr.A}))));(0,i.useEffect)((()=>{r(w,T.chips)}),[w,T.chips]);const I=t.map((e=>{var t;return{...e,data:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.filter((e=>{return t=e.label,!c||t.toLowerCase()[0]===c.toLowerCase()[0]&&t.toLowerCase().includes(c.toLowerCase())||t.toLowerCase().includes(` ${c.toLowerCase()}`);var t}))}})),S=null===I||void 0===I?void 0:I.every((e=>{var t;return 0===(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.length)}));return(0,k.Y)(i.Fragment,null,l&&(0,k.Y)(i.Fragment,null,(0,k.Y)(pn.A,{placeholder:g,Icon:ba.A,value:c,onChange:e=>u(e.target.value),clearable:!0,onClear:()=>u("")}),(0,k.Y)(ae.A,null)),!c&&w.length>0&&(0,k.Y)(Ne.A,{initiallyOpen:!0},(0,k.Y)(Re.A,null,p),(0,k.Y)(ae.A,null),(0,k.Y)(Pe.A,null,(0,k.Y)(mn.g,{chipCollection:y,isSelectable:!0})),(0,k.Y)(ae.A,null)),(0,k.Y)(ae.A,null),!c&&T.chips.length>0&&(0,k.Y)(Ne.A,{initiallyOpen:!0},(0,k.Y)(Re.A,null,m),(0,k.Y)(ae.A,null),(0,k.Y)(Pe.A,null,(0,k.Y)(mn.g,{chipCollection:T,isSelectable:!0})),(0,k.Y)(ae.A,null)),S?(0,k.Y)("p",null,h("field-chip-selector.find-a-field.no-matches","Hmm, no matches. To find a field, try different keywords or search through the list without the search")):null===I||void 0===I?void 0:I.map((e=>{var t;return(0,k.Y)(i.Fragment,{key:e.key},(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.length)>0&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,null),(0,k.Y)(Ne.A,{initiallyOpen:!0},(0,k.Y)(Re.A,null,e.title),(0,k.Y)(ae.A,null),(0,k.Y)(Pe.A,null,(0,k.Y)(J.Ay,{wrap:!0,gutters:"xxs"},e.data.map((t=>(0,k.Y)(Rs,{item:t,allowSelectingMultiple:n,addChip:f,key:`${e.key}-${t.value}`}))))))))})))}const Ns=["avatarProps","centered","color","debounce","description","disabled","emphasis","external","icon","inline","label","selected","key","linkName","onClick","target","to","value"];function Rs(e){let{item:t,allowSelectingMultiple:a,addChip:r}=e;const[n]=(0,P.B)(),[o,s]=(0,i.useState)(!1),[l,d]=(0,i.useState)(t.label),c=n("field-chip-selector.addional-fields.added-label","Added!"),u=i.useRef([]);(0,i.useEffect)((()=>()=>u.current.forEach((e=>clearTimeout(e)))),[]);const h=Object.fromEntries(Object.entries(t).filter((e=>{let[t]=e;return Ns.includes(t)})));return(0,k.Y)(gn.A,(0,j.A)({},h,{selected:o,label:l,Icon:o?vn.A:void 0,onClick:()=>{r({...t,emphasized:!0,selected:!0,value:a?`${t.value||""}:${Math.random()}`:t.value||""}),s(!0),d(c),u.current.push(setTimeout((()=>{s(!1),d(t.label)}),2e3))}}))}const Ps=e=>{let{overlay:t,title:a,disabledFunc:r,unlinkingStates:n,fieldTypeKey:o}=e;const{types:s}=(0,b.A)(),[l]=(0,P.B)(),d=(0,ur.Hj)(),{getValues:c,setValue:u,trigger:h}=d,[p,m]=c(["lockedChips","selectedChips"]),[g,v]=(0,i.useState)(m),[y,f]=(0,i.useState)(p),A=ns[o],w=(0,i.useMemo)((()=>o.toLowerCase()),[o]),{disabled:T,message:I}=r?r(g.concat(y),l):{},S=c()[A]||[],{treatedFieldChipData:E}=Cs(s,S,g,y,Qe),C=(0,i.useMemo)((()=>o?E.filter((e=>e.elementTypes.includes(o))):E),[E,o]),x=(0,i.useCallback)(((e,t)=>{const a=c(),i=[...a.removedFields];let r=0;const n=on()(a[A])||[],s=e.map((e=>{let{id:t}=e;return t})),l=t.map((e=>{let{id:t}=e;return t}));n.filter((e=>!s.includes(e.id)&&!l.includes(e.id))).forEach((e=>{const t=n.findIndex((t=>t.id===e.id));-1!==t&&(ms({form:d,removedFieldsArray:i,field:e,fieldTypeKey:o}),n.splice(t,1),r++)}));const p=e.filter((e=>{var t,a,i;return(null!==(t=e.elementTypes)&&void 0!==t&&t.includes(o)||!("EVENT"!==o||null!==(a=e.elementTypes)&&void 0!==a&&a.includes("PLACE")||null!==(i=e.elementTypes)&&void 0!==i&&i.includes("DATE")))&&!e.id}));p&&(p.reverse(),p.forEach((e=>{const t=ps({formValues:a,chip:e,superType:o});n.push(t)}))),u(A,n,{shouldDirty:!0}),r>0&&h()}),[c,u,h,A,o,d]),Y=(0,i.useCallback)((()=>{x(g,y),t.close()}),[t,x,g,y]);return(0,k.Y)(i.Fragment,null,(0,k.Y)(Si.A,{"data-testid":`add-or-remove-${w}-fields`,Icon:Ci.A,color:"yellow",emphasis:"low",onClick:t.handleClick,linkName:`Edit event add or remove ${w} fields`},l("edit-index.add-fields.button","Add or Remove Fields")),(0,k.Y)(Ze.A,(0,j.A)({},t,{title:a,footer:(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{"data-testid":`${w}-fields-selector-cancel-save-fields`,linkName:`${w} fields selector cancel`,onClick:()=>t.close()},l("common-ui:cancel.action","Cancel")),(0,k.Y)(Z.A,{"data-testid":`${w}-fields-selector-save-fields`,linkName:`${w} fields selector save`,onClick:Y,emphasis:"high",disabled:T},l("field-selector-overlay.save.button","Save Fields")))}),(0,k.Y)(Ys,{handleSelection:(e,t)=>{v(e),f(t)},chipData:[{title:l("edit-index.chips.event-fields.title","Event Fields"),data:C,key:"eventFields"}],fieldData:S,unlinkingStates:n,allowSelectingMultiple:!0,showSearch:!0,lockSharedFields:!0}),T&&(0,k.Y)("p",null,(0,k.Y)(un.A,{color:W.A.yellow10}),I)))},Os=e=>{var t;let{heading:a,fieldType:r,fieldSelectorHeading:n}=e;const{types:o}=(0,b.A)(),[s]=(0,P.B)(),l=(0,$.Ay)(),{treatedFieldChipData:d}=Cs(o,[],[],[],Qe),c=(0,i.useMemo)((()=>Object.keys(ns).find((e=>ns[e]===r))),[r]),u=(0,i.useMemo)((()=>c.toLowerCase()),[c]),h=d.find((e=>e.value===c)),p=(0,ur.Hj)(),{getValues:m,watch:g,setValue:v,trigger:y}=p,f=g(r),w=(0,i.useCallback)((()=>{if(c===ns.EVENT)return;const e=m(),t=on()(e[r]),a=(0,A.Vs)(),i=ps({uuid:a,chip:h,formValues:e,superType:c});v(r,[...t,i],{shouldDirty:!0}),y(a)}),[m,v,h,r,c,y]),T=(0,i.useCallback)((e=>{const t=m(),a=(null===t||void 0===t?void 0:t.removedFields)||[],i=on()(t[r].filter((t=>t.id!==e.id)));ms({field:e,form:p,fieldTypeKey:c,removedFieldsArray:a}),v(r,i,{shouldDirty:!0}),y()}),[m,v,y,r,p,c]),I=(0,i.useMemo)((()=>null===f||void 0===f?void 0:f.some((e=>e.fieldType===c))),[f,c]);return(0,k.Y)(i.Fragment,null,(0,k.Y)(Ye.A,{edges:"border"},a&&(0,k.Y)(re.H6,null,a),null===f||void 0===f||null===(t=f.filter((e=>{var t;return!1!==(null===e||void 0===e||null===(t=e.typeData)||void 0===t?void 0:t.editable)})))||void 0===t?void 0:t.map((e=>(0,k.Y)(Mr,{key:e.id,field:e,onDelete:()=>T(e)}))),r!==ns.EVENT&&!I&&(0,k.Y)(Go,null,(0,k.Y)(Si.A,{Icon:Ci.A,emphasis:"low",onClick:w,"data-testid":`edit-event-add-${u}-field`,linkName:`Edit event add ${u} field`},null===h||void 0===h?void 0:h.label)),(0,k.Y)(Go,null,(0,k.Y)(Ps,{title:n||s("edit-index.add-more-info.button","Add More Information"),overlay:l,fieldTypeKey:c}))),(0,k.Y)(ae.A,{size:"xs"}))},_s=e=>{let{person:t,personName:a,relationshipOptions:r,showRelationshipEvents:n}=e;const{types:o}=(0,b.A)(),{openOverlay:s}=(0,Ti.HQ)(),{getValues:l,watch:d,setValue:c}=(0,ur.Hj)(),[u]=(0,P.B)(),h=(0,L.u)("rip_sharedImageViewer_sharedEventPanel"),[p,m,g,v]=l(["id","eventTypeField","primary","newEvent"]),y=d("eventType"),f=(0,i.useMemo)((()=>os({t:u,types:o,isPrimary:g,showRelationshipEvents:n}).reverse()),[o,u,g,n]),A=(0,i.useMemo)((()=>{var e;return null===y||void 0===y||null===(e=y.elementTypes)||void 0===e?void 0:e.includes("RELATIONSHIP")}),[y]),w=(0,i.useMemo)((()=>!v&&A),[v,A]),T=(0,i.useMemo)((()=>[{fieldType:ns.DATE,heading:u("edit-events.fields.date-heading","Date"),fieldSelectorHeading:u("edit-events.fields.date-overlay-title","Add Date Fields")},{fieldType:ns.PLACE,heading:u("edit-events.fields.place-heading","Place"),fieldSelectorHeading:u("edit-events.fields.place-overlay-title","Add Place Fields")},{fieldType:ns.EVENT,heading:u("edit-events.fields.others-heading","Others"),fieldSelectorHeading:u("edit-events.fields.other-overlay-title","Add Other Fields")}]),[u]);return(0,k.Y)(i.Fragment,null,(0,k.Y)(Xo,null,(0,k.Y)(Go,{alignY:"bottom",indent:0,size:"100%",maxWidth:"325px",growX:!0},(0,k.Y)(mr.eP,{name:"eventType",label:u("edit-events.fields.event-type","Event Type"),"data-testid":"event-type-autosuggest",placeholder:u("edit-events.fields.event-type","Event Type"),suggestions:f,onSuggestionSelected:e=>{c("eventTypeField",{...m,label:null===e||void 0===e?void 0:e.primaryText},{shouldDirty:!0}),c(p,null===e||void 0===e?void 0:e.key,{shouldDirty:!0})},clearOnClickAway:!0,clearable:!0,virtualize:!0,disabled:w,sortFunction:$e.mo}),(0,k.Y)(Tr,{field:{...m}}))),!v&&!A&&h.isOn&&(0,k.Y)(Bn.A,null,(0,k.Y)(Da.A,{startElement:(0,k.Y)(Da.A.Icon,{Icon:rs.A}),endElement:(0,k.Y)(Da.A.IconButton,{Icon:Ei.A,onClick:()=>{s("sharedEvent")}}),primaryText:u("edit-events.link-event","Link Event to Other Names"),secondaryText:u("edit-events.link-event-description","Add or remove names linked to this event.")})),(0,k.Y)(Xo,{alignY:"top"},A&&(0,k.Y)(ks,{person:t,personName:a,eventLabel:y.primaryText,relationshipOptions:r,noGrowY:!0,growX:!0}),T.map((e=>{let{fieldType:t,heading:a,fieldSelectorHeading:i}=e;return(0,k.Y)(Os,{key:t,fieldType:t,heading:a,fieldSelectorHeading:i,noGrowY:!0})}))))},Fs=e=>{let{fieldLabel:t,personId:a,event:r,onSuccess:n=()=>{},onError:o=()=>{},shouldSaveToSls:s=!0}=e;const[l]=(0,P.B)(),{images:d}=(0,b.A)(),c=(0,Ae.l)(),u=(0,$.Ay)(),[h,p]=(0,i.useState)(!1),[m,v]=(0,i.useState)(!1),{rip_sharedImageViewer_saveChanges:y,rip_sharedImageViewer_sls_actions_splunk_debugger:f}=(0,L.h)(["rip_sharedImageViewer_saveChanges","rip_sharedImageViewer_sls_actions_splunk_debugger"]),w=(0,i.useCallback)(((e,t)=>{n(e,t),v(!1),u.close()}),[u,n]),T=(0,i.useCallback)((async()=>{v(!0);const e=(0,A.rr)(d,r.id),t=e?ds({key:r.id,el:e}):[],i=t?(0,wi.q)(t):[];s&&e?await(0,Se.fD)({sls:i,dispatches:t,saveChangesFlag:y,slsActionsSplunkDebugger:f,userId:a,dispatch:c,appName:qe.zQ,fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],successHandler:()=>{w(t,i)},errorHandler:e=>{p(e),(0,$e.Yt)(e),o(e),v(!1)}}):w(t,i)}),[c,a,y,f,s,r,o,d,w]);return(0,k.Y)(i.Fragment,null,(0,k.Y)(oe.A,null),(0,k.Y)(Xo,{alignY:"bottom"},(0,k.Y)(Go,null,(0,k.Y)(Si.A,{"data-testid":"delete-event",Icon:xi.A,color:"red",emphasis:"low",onClick:u.handleClick,linkName:"Delete Event"},l("edit-index.delete-event.button","Delete {event}",{event:t||"Event"})),(0,k.Y)(Ze.A,(0,j.A)({},u,{title:l("edit-events.delete-impedance.are-you-sure","Are you sure?")}),(0,k.Y)(te.A,{size:"sm"},l("edit-events.delete-impedance.no-restore","Once the event is removed, you will not be able to restore the information.")," ",l("edit-events.delete-impedance.please-confirm","Please confirm this change.")),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{disabled:m,"data-testid":"delete-event-impedance-cancel",linkName:"Delete Event Cancel",onClick:()=>u.close()},l("edit-events.delete-impedance.cancel.btn","Cancel")),(0,k.Y)(at.A,{disabled:m,"data-testid":"delete-event-impedance-confirm",linkName:"Delete Event Confirm",Icon:m?g.A:xi.A,onClick:()=>{T()}},l("edit-events.delete-impedance.remove.btn","Remove {eventType}",{eventType:t}))))),(0,k.Y)(it,{error:h,setError:p,title:l("save-error-overlay.heading","Unable to Save Changes"),message:l("save-error-overlay.content-generic","Your changes were not saved.  Please try again later.")}))))};function Ds(e){let{finished:t=()=>{},canceled:a=()=>{},onError:r=()=>{},saveChangesOverlay:n,formName:o,onSubmit:s,disableSave:l,personId:d,shouldSavetoSls:c=!0}=e;const{rip_sharedImageViewer_saveChanges:u,rip_sharedImageViewer_sls_actions_splunk_debugger:h}=(0,L.h)(["rip_sharedImageViewer_saveChanges","rip_sharedImageViewer_sls_actions_splunk_debugger"]),p=(0,Ae.l)(),[m]=(0,P.B)(),{clearEdits:v}=(0,bi.Y)(),y=(0,i.useRef)(null),{formState:f,getValues:b}=(0,ur.Hj)(),{isValid:A}=f,[w,T]=(0,i.useState)(),[I,S]=(0,i.useState)(!1);return(0,k.Y)(i.Fragment,null,(0,k.Y)(J.Ay,{alignX:"end",gutters:"md"},(0,k.Y)(Z.A,{"data-testid":"save-component-cancel-button",linkName:"PanelFooterCancelButton",form:o,disabled:I,onClick:()=>{null!==f&&void 0!==f&&f.isDirty?n.open():(n.close(),a())}},m("edit-index.cancel.button","Cancel")),(0,k.Y)(Z.A,{"data-testid":"save-component-save-button",linkName:"PanelFooterSaveButton",disabled:I||l,emphasis:"high",type:"submit",Icon:I&&g.A,form:o,onClick:async()=>{if(!A)return;o&&(0,vi.sx)({event_name:`${o.replaceAll("-","_").replace("edit_","")}_edit`,link_name:`Edit: ${o.replace("edit-","").split("-").map((e=>e.replace(e[0],e[0].toUpperCase()))).join(" ")}: Save`}),S(!0);const e=b(),{sls:a,dispatches:i}=s(e),l=()=>{S(!1),t(i,a),c&&v(),n.close()};c?await(0,Se.fD)({sls:a,dispatches:i,saveChangesFlag:u,slsActionsSplunkDebugger:h,userId:d,dispatch:p,appName:qe.zQ,fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],successHandler:l,errorHandler:e=>{var t,i;T(e),(0,$e.Yt)(e,null,{codeId:99,sls:a,status:null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status,responseBody:null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.data}),S(!1),r(e)}}):l()},ref:y},m("edit-index.save-changes.button","Save Changes"))),(0,k.Y)(Mo,{disableSave:I,overlay:n,onDiscard:()=>{n.close(),a()},onSave:()=>{n.close(),y.current.click()},formId:"edit-person-form"}),(0,k.Y)(it,{error:w,setError:T,title:m("save-error-overlay.heading","Unable to Save Changes"),message:m("save-error-overlay.content-generic","Your changes were not saved.  Please try again later.")}))}const Ms=e=>{var t;let{person:a=null,event:r=null,onSave:n=()=>{},onDelete:o=()=>{},infoSheetPanelProps:s,shouldParseEventfromSls:l=!0,shouldSavetoSls:d=!0,showRelationshipEvents:c=!0,personName:u,shouldSaveHighlights:h=!1,userId:p=""}=e;const[m]=(0,P.B)(),{eventPanelOverlay:g,highlightsPanelOverlay:v,closeOverlay:y,topMostPanel:f}=(0,Ti.HQ)(),w=(0,$.Ay)(),{setDisplayHighlights:T,getHighlights:I,getDispatches:S}=(0,bi.Y)(),{types:E,currentImageArk:C,images:x}=(0,b.A)(),Y=(0,L.u)("rip_sharedImageViewer_showEventsTiedToRelationships"),N=l&&c?(0,A.q5)(a,"RELATIONSHIP"):[],R=N.length>0?N.find((e=>{var t;return null===r||void 0===r||null===(t=r.superElements)||void 0===t?void 0:t.find((t=>t.id===e.id))})):null,O=null===(t=Kn({person:a,currentPersonRecord:(0,A.rr)(x,null===a||void 0===a?void 0:a.recordId)}))||void 0===t?void 0:t.filter((e=>e.key!==(null===a||void 0===a?void 0:a.id))),_=(0,i.useMemo)((()=>R?(0,Ie.RD)(R,a):null),[R,a]),F=(0,i.useMemo)((()=>_?O.find((e=>e.key===_)):null),[O,_]),D=(0,i.useMemo)((()=>ss({event:r,types:E,t:m,selectedRelationshipPerson:F,parentRelationship:R,showRelationshipEvents:c,shouldParseEventfromSls:l})),[r,l,E,m,g.isOpen,F,R]),M=(0,ur.SV)({mode:"all",resolver:e=>((e,t)=>{const a={};return be()(e.eventType)?a.eventType={type:"required",message:t("edit-events.fields.event-type-required","Event Type is required")}:e.eventType.elementTypes.includes("RELATIONSHIP")&&be()(e.relationshipPerson)&&(a.relationshipPerson={type:"required",message:t("FormValidation.notEmpty","Field cannot be empty.")}),{values:e,errors:a}})(e,m),shouldFocusError:!1,defaultValues:D});Ln({methods:M,overlay:w});const{getValues:H,reset:z,formState:V}=M,B=(0,i.useMemo)((()=>null!==u&&void 0!==u?u:null!==a&&void 0!==a&&a.id.includes("1:1:TEMP-ID-")?null===a||void 0===a?void 0:a.label:(0,Ee.hA)({person:a})),[a,u]),G=H("eventTypeField");(0,i.useEffect)((()=>{g.isOpen&&"eventPanel"===f()&&M.reset(D)}),[r,g.isOpen,D]);const U=(0,i.useCallback)((()=>{const e=(e,t)=>e.filter((e=>t.includes(e.fieldId))),{mainEditHighlights:t,splitScreenEditHighlights:a}=I(),{dateFields:i,placeFields:r,otherFields:n,relationshipPerson:o,eventTypeField:s}=H(),l=o?t.filter((e=>{var t;return(null===e||void 0===e||null===(t=e.personIds)||void 0===t?void 0:t.includes(null===o||void 0===o?void 0:o.key))&&["NAME_GN","NAME_SURN","NAME_SUF"].includes(null===e||void 0===e?void 0:e.fieldType)})).map((e=>e.fieldId)):[],d=[null===s||void 0===s?void 0:s.id,...l,...null===i||void 0===i?void 0:i.map((e=>e.id)),...null===r||void 0===r?void 0:r.map((e=>e.id)),...null===n||void 0===n?void 0:n.map((e=>e.id))].filter(Boolean);return[...e(t,d),...e(a,d)]}),[I,H]),K=(0,i.useCallback)((()=>{T({mainPartitionKey:C,highlights:U()})}),[C,U,T]);(0,i.useEffect)((()=>{g.isOpen&&!v.isOpen&&K()}),[g.isOpen,v.isOpen,K]);const q=(0,i.useCallback)((()=>{z(),y("eventPanel")}),[z,y]),W=(0,i.useCallback)((()=>{V.isDirty?w.open():q()}),[w,V.isDirty,q]),X=e=>{const t=h?S({mainImageArk:C}):[],i=Y.isOn,r=[...hs(a,e,E,V,x,i),...t];return{sls:(0,wi.q)(r),dispatches:r}};return(0,k.Y)(pr.Ay,{methods:M,onSubmit:X,id:"edit-events"},(0,k.Y)(hi.A,(0,j.A)({nonClosable:!0,headingColor:"green",title:m("edit-index.edit-person.heading","Edit {personName}",{personName:B}),footer:(0,k.Y)(Ds,{saveChangesOverlay:w,onSubmit:X,finished:e=>{n(e,H()),q()},canceled:q,formName:"edit-events",personId:p,shouldSavetoSls:d})},g,s,{close:W}),(0,k.Y)(Rr,{heading:m("edit-event.heading-generic","Event"),caption:m("edit-events.instructions","Fix any fields that are incorrect including their highlights. Add or remove fields as necessary.")}),(0,k.Y)(_s,{person:a,personName:B,relationshipOptions:O,showRelationshipEvents:c}),r&&(0,k.Y)(Fs,{fieldLabel:(null===G||void 0===G?void 0:G.primaryText)||(null===G||void 0===G?void 0:G.label),personId:null===a||void 0===a?void 0:a.personId,event:r,onSuccess:e=>{o(e,H().id),q()},shouldSaveToSls:d})))};var Hs=a(45837);const Ls=e=>{var t;let{selectedPerson:a,person:i,disabled:r,namePrefix:n,onChange:o=()=>{}}=e;const[s]=(0,P.B)(),l=(0,b.A)(),d=s("select-persons-checkbox.no-relationship","No relationship"),c=null===(t=(0,A.q5)(i,"RELATIONSHIP_TO_HEAD"))||void 0===t?void 0:t[0],u=(0,Ee.hA)({person:i});let h=(0,A.OV)(c);return h||(h=d),(0,k.Y)(Go,null,(0,k.Y)(J.Ay,null,(0,k.Y)(mr.cG,{growX:!0,disabled:a.id===i.id||r,name:`${n}.${i.id}`,value:`${n}.${i.id}`,onChange:()=>o(i.id,n),label:`${u} ${h?`(${h})`:""}`}),"selectedInOtherArks"!==n&&i.partitionKey!==l.currentImageArk&&(0,k.Y)(Hs.A,{target:(0,k.Y)(Pi.A,{"data-testid":"select-persons-checkbox-tooltip-target"}),label:s("select-persons-checkbox.tooltip-label","Name on another image"),description:s("select-persons-checkbox.tooltip-desc","To see in context, find name at the bottom.")})))},zs="selectedInRecord",Vs="selectedInImage",Bs="selectedInOtherArks";function Gs(e){var t;let{personsInThisRecord:a,personsInThisImage:r,allTheArksExceptCurrent:n,selectedPerson:o,viewInContextHandler:s}=e;const[l]=(0,P.B)(),d=(0,b.A)(),c=(0,ur.Hj)(),u=null===(t=d.thumbnails)||void 0===t?void 0:t.findIndex((e=>e.ark===d.currentImageArk)),h=[zs,Vs,Bs],p=(e,t)=>{const a=c.getValues(),i=a[t][e];h.forEach((r=>{r!==t&&"undefined"!==typeof a[r][e]&&c.setValue(`${r}.${e}`,i)}))};return(0,k.Y)(i.Fragment,null,(0,k.Y)(Io.HF,{label:l("record-image-checkboxes.in-record","In this Record"),"data-testid":"in-this-record-checkbox-group"},a.map((e=>(0,k.Y)(Ls,{key:`inThisRecord.${e.id}`,person:e,namePrefix:zs,onChange:p,selectedPerson:o})))),(0,k.Y)(Io.HF,{label:l("record-image-checkboxes.in-image","In this Image"),"data-testid":"in-this-image-checkbox-group"},r.map((e=>(0,k.Y)(Ls,{key:`inThisImage.${e.id}`,person:e,namePrefix:Vs,onChange:p,selectedPerson:o})))),n&&Object.entries(n).filter((e=>{var t;let[a]=e;const i=null===(t=d.thumbnails)||void 0===t?void 0:t.findIndex((e=>e.ark===a));return 1===Math.abs(u-i)})).map((e=>{var t,a;let[i,r]=e;const n=(null===(t=d.thumbnails)||void 0===t?void 0:t.findIndex((e=>e.ark===i)))+1;return(0,k.Y)("div",{key:n},(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(oe.A,{label:l("record-image-checkboxes.names-on-page-n.label","Names on Page {pageNumber}",{pageNumber:n})}),(0,k.Y)(Z.A,{Icon:ki.A,onClick:()=>s(n),emphasis:"medium"},l("record-image-checkboxes.view-image-in-context.close.button","View in Context")),null===(a=r.display)||void 0===a?void 0:a.map((e=>(0,k.Y)(Ls,{key:`inOtherArks.${e.id}`,person:e,namePrefix:Bs,onChange:p,selectedPerson:o}))))})))}function Us(e){let{selectedPerson:t,event:a,shouldSaveToSls:r=!0,onSave:n=()=>{},userId:o,viewInContextHandler:s}=e;const{closeOverlay:l,sharedEventOverlay:d}=(0,Ti.HQ)(),[c]=(0,P.B)(),u=(0,b.A)(),h=(0,Ae.l)(),[p,m]=(0,i.useState)(!1),[g,v]=(0,i.useState)(),{rip_sharedImageViewer_saveChanges:y,rip_sharedImageViewer_sls_actions_splunk_debugger:f}=(0,L.h)(["rip_sharedImageViewer_saveChanges","rip_sharedImageViewer_sls_actions_splunk_debugger"]),w=(0,Ee.hA)({person:t}),T=null!==a&&void 0!==a&&a.eventType?(0,Me.Yy)(u.types,"events").find((e=>e.eventType===a.eventType)):null,I=null===T||void 0===T?void 0:T.displayLabel,S=(0,A.rr)(u.images,null===t||void 0===t?void 0:t.recordId),E=(0,i.useMemo)((()=>{var e;return(null===S||void 0===S||null===(e=S.subElements)||void 0===e?void 0:e.filter((e=>"PERSON"===e.elementType)))||[]}),[null===S||void 0===S?void 0:S.subElements]),C=(0,A.Qp)(u.images,u.currentImageArk),x=(0,A.q5)(C,"PERSON").filter((e=>e.partitionKey===u.currentImageArk)),Y=(0,i.useMemo)((()=>(e=>{let{selectedPersonId:t,images:a,element:i}=e;const r={...i},n=(0,Ee.lY)(r,a).map((e=>(0,A.rr)(a,e)));return n.sort(((e,a)=>e.id===t?-1:a.id===t?1:0)),n.flat()||[]})({element:a,images:u.images,selectedPersonId:t.id})),[a,t.id,u.images]),N=(0,i.useMemo)((()=>(e=>{let{allPersonsSharingElement:t,personsInThisRecord:a}=e;const i=null===t||void 0===t?void 0:t.reduce(((e,t)=>(e[t.partitionKey]?(e[t.partitionKey].selected.push(t),e[t.partitionKey].display.push(t)):e[t.partitionKey]={selected:[t],display:[t]},e)),{});return a.forEach((e=>{i[e.partitionKey]?i[e.partitionKey].display.includes(e)||i[e.partitionKey].display.push(e):i[e.partitionKey]={selected:[],display:[e]}})),i})({allPersonsSharingElement:Y,personsInThisRecord:E})),[Y,E]),R=(0,i.useMemo)((()=>{if(N){const e=on()(N);return delete e[u.currentImageArk],e}return{}}),[N,u.currentImageArk]),O=(0,i.useMemo)((()=>N[u.currentImageArk].selected||[]),[N,u.currentImageArk]),_=(0,i.useMemo)((()=>O.map((e=>e.id))),[O]),F=(0,i.useMemo)((()=>(e=>{let{personIdsSharingElement:t,personsInThisRecord:a,personsInThisImage:i,allTheArksExceptCurrent:r}=e;const n={selectedInRecord:[],selectedInImage:[],selectedInOtherArks:[]};return[...a.map((e=>e.id)),...i.map((e=>e.id))].forEach((e=>{a.find((t=>t.id===e))&&(n.selectedInRecord[e]=!1),n.selectedInImage[e]=!1})),t.forEach((e=>{a.find((t=>t.id===e))&&(n.selectedInRecord[e]=!0),n.selectedInImage[e]=!0})),Object.values(r).forEach((e=>{e.selected.forEach((e=>{a.find((t=>t.id===e.id))&&(n.selectedInRecord[e.id]=!0),n.selectedInOtherArks[e.id]=!0}))})),n})({personIdsSharingElement:_,allTheArksExceptCurrent:R,personsInThisRecord:E,personsInThisImage:x})),[_,E,x,R]),D=(0,ur.SV)({mode:"all",defaultValues:F});return(0,k.Y)(hi.A,(0,j.A)({title:c("shared-event.title","Review {personName}",{personName:w}),headingColor:"red"},d,{close:()=>{l("sharedEvent")},footer:(0,k.Y)(i.Fragment,null,(0,k.Y)(J.Ay,{alignX:"end",gutters:"md"},(0,k.Y)(Z.A,{"data-testid":"shared-event-back-button",linkName:"Shared Event Back Button",emphasis:"low",disabled:p,onClick:()=>{l("sharedEvent")}},c("shared-event.cancel.btn","Cancel")),(0,k.Y)(Z.A,{"data-testid":"shared-event-forward-button",linkName:"Shared Event Forward Button",emphasis:"high",disabled:p,form:"shared-event",type:"submit"},c("shared-event.update.btn","Update"))))}),(0,k.Y)(Rr,{heading:c("shared-event.panel-heading","Link {eventType} to Other Names",{eventType:I}),caption:c("shared-event.panel-caption","Names associated with this event")}),(0,k.Y)(te.A,{size:"sm"},c("shared-event.panel-description","Do more names need to be linked to this {eventType}?",{eventType:I})),(0,k.Y)(pr.Ay,{methods:D,onSubmit:e=>{const t=Object.assign({},e.selectedInImage,e.selectedInRecord,e.selectedInOtherArks),i=Object.assign({},F.selectedInImage,F.selectedInRecord,F.selectedInOtherArks),s=[];if(Object.keys(t).forEach((e=>{if(t[e]!==i[e]){const i=(0,A.rr)(u.images,e);t[e]?s.push({type:"ADD_SUB",value:{superPartitionKey:i.partitionKey,subPartitionKey:a.partitionKey,superId:e,subId:a.id,elementType:"PERSON"}},{type:"SET_RECORD_PERSON_IDS",value:i.recordId}):s.push({type:"REM_SUB",value:{superPartitionKey:i.partitionKey,subPartitionKey:a.partitionKey,superId:e,subId:a.id,elementType:"PERSON"}})}})),r)try{const t=(0,wi.q)(s);m(!0),(0,Se.fD)({sls:t,dispatches:s,saveChangesFlag:y,slsActionsSplunkDebugger:f,userId:o,dispatch:h,appName:qe.zQ,fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],successHandler:()=>{m(!1),l("sharedEvent"),n(s,e)},errorHandler:e=>{var a,i;m(!1),v(e),(0,$e.Yt)(e,null,{codeId:80,sls:t,status:null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.status,responseBody:null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.data})}})}catch(d){m(!1),v(d),(0,$e.Yt)(d,null,{codeId:80,sls:null===d||void 0===d?void 0:d.sls,dispatches:null===d||void 0===d?void 0:d.dispatches})}else n(s,e)},id:"shared-event"},(0,k.Y)(Gs,{personsInThisRecord:E,personsInThisImage:x,allTheArksExceptCurrent:R,selectedPerson:t,viewInContextHandler:s})),(0,k.Y)(it,{error:g,setError:v,title:c("save-error-overlay.heading","Unable to Save Changes"),message:c("save-error-overlay.content-generic","Your changes were not saved.  Please try again later.")}))}const Ks=()=>{const e=(0,je.mS)(),t=(0,b.A)(),a=(0,i.useMemo)((()=>(0,A.rr)(t.images,e.selectedPersonId)),[e.selectedPersonId,t.images]),r=(0,i.useMemo)((()=>{const t=e.activeElementId;if(!a||"addingEvent"===t)return null;const i=(0,A.rr)([a],t);return"EVENT"===(null===i||void 0===i?void 0:i.elementType)?i:null}),[a,e.activeElementId]);return{selectedPerson:a,event:r}};var qs=a(1089);function js(){const e=(0,je.vl)(),t=(0,je.mS)(),{displayHighlights:a,displayHighlightsApi:i,recordDisplayHighlights:r,recordDisplayHighlightsApi:n}=(0,je.Z0)(),o=t=>{let{api:a,value:i,highlightId:r=""}=t;e({type:"SET_STATE",value:i}),a.hover(r)};return{highlightPersonNameHighlight:t=>{let{person:r}=t;const n=a.ids.filter((e=>a.highlights[e].personIds.some((e=>e===(null===r||void 0===r?void 0:r.id)))));n&&o({api:i,value:{highlightedPersonId:null===r||void 0===r?void 0:r.id},highlightId:n,r2Dispatch:e})},highlightRecordHighlight:t=>{let{record:a}=t;const i=r.ids.find((e=>e===(null===a||void 0===a?void 0:a.id)));i&&o({api:n,value:{},highlightId:[i],r2Dispatch:e})},resetPersonNameHighlights:()=>{o({api:i,value:{highlightedPersonId:""}})},resetRecordHighlights:()=>{o({api:n,value:{highlightedRecordId:""}})},getIsSelected:e=>{let{record:a,person:i}=e;if(!a&&!i)return!1;const r=Boolean((null===t||void 0===t?void 0:t.highlightedRecordId)&&t.highlightedRecordId===(null===a||void 0===a?void 0:a.id)),n=Boolean((null===t||void 0===t?void 0:t.highlightedPersonId)&&t.highlightedPersonId===(null===i||void 0===i?void 0:i.id));return r||n}}}var $s=a(98776);const Ws=(0,y.Ay)("rip:R2:AttachmentIcon");function Xs(e){var t;let{person:a,disabled:r=!1}=e;const[n,o]=(0,i.useState)(null),s=(0,i.useRef)(!1),[l,d]=(0,i.useState)(null),c=(0,i.useRef)(!1);(0,i.useEffect)((()=>{if(null!==a&&void 0!==a&&a.id&&!r){if(!n&&!s.current){const e=`https://familysearch.org/ark:/61903/${a.id}`;(0,$s.aS)({urls:[e]}).then((e=>{o(e)})).catch((e=>{Ws("Error getting attached record results",e)})).finally((()=>{s.current=!0}))}l||c.current||(0,$s.C7)({arkIdArray:a.id}).then((e=>{d(e)})).catch((e=>{Ws("Error getting attached record results",e)})).finally((()=>{c.current=!0}))}}),[n,l,a,r]);return{attachmentOrMatchId:(null===n||void 0===n||null===(t=n[`/ark:/61903/${null===a||void 0===a?void 0:a.id}`])||void 0===t?void 0:t[0])||(null===l||void 0===l?void 0:l[null===a||void 0===a?void 0:a.id.slice(4)])}}function Qs(e){let{person:t,record:a,openNewPage:r,isSelected:n,onPersonSelect:o=()=>{},endElement:s=(0,k.Y)(Da.A.IconButton,{Icon:pe.A}),startElement:l,disableDefaultClickHandler:d=!1,disableCheckForTreeAttachment:c=!1,isMultiSelect:u=!1,onCheckboxChange:h=()=>{}}=e;const[p]=(0,P.B)(),m=(0,b.A)(),g=(0,je.mS)(),v=(0,je.vl)(),{openOverlay:y,topMostPanel:f}=(0,Ti.HQ)(),{setQuery:A}=(0,G.A)(),{highlightPersonNameHighlight:w,highlightRecordHighlight:T,resetPersonNameHighlights:I,resetRecordHighlights:S}=js(),E=(0,i.useRef)(),{attachmentOrMatchId:C}=Xs({person:t,disabled:c}),x=(0,L.u)("rip_sharedImageViewer_dragNamesPanelRefactor"),Y=(0,Ee.hA)({person:t}),N=`${(0,Ie.RV)(t,m.types,a)}`,R=`${(0,Ie.UR)(t,m.types,a,p)}`,O=(0,Ie.ON)(N,R);let _=(0,k.Y)(Da.A.Filler,{width:40});x.isOn?_=C?(0,k.Y)(Da.A.Icon,{Icon:qs.A,"data-testid":`source-linker-button-${C}`}):(0,k.Y)(Da.A.Filler,{width:40}):u?_=(0,k.Y)(_a.A,{"data-testid":`checkbox-${null===t||void 0===t?void 0:t.id}`,checked:n,onChange:e=>h(t,e.target.checked),onClick:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation()}):C&&(_=(0,k.Y)(Da.A.Icon,{Icon:qs.A,"data-testid":`source-linker-button-${C}`}));const F=(0,i.useCallback)((()=>{o(null===t||void 0===t?void 0:t.id),r?r():(y("viewIndex"),v({type:"NAV_SELECT_TO_VIEW",value:{personId:g.highlightedPersonId,recordId:null===a||void 0===a?void 0:a.id}}),(0,vi.sx)({event_name:"click_action",link_name:"Edit: Select Person"}),A({personArk:`/ark:/61903/${g.highlightedPersonId}`}))}),[o,r,y,null===t||void 0===t?void 0:t.id,v,g.highlightedPersonId,null===a||void 0===a?void 0:a.id,A]);return(0,k.Y)(i.Fragment,null,t&&(0,k.Y)(Da.A,{ref:E,"data-testid":Y,key:null===t||void 0===t?void 0:t.id,overline:O,primaryText:Y,emphasized:!(null===t||void 0===t||!t.primary),startElement:l||_,endElement:s,onClick:d?()=>{}:F,onMouseEnter:()=>{w({person:t}),T({record:a})},onMouseLeave:()=>{f()||(I(),S())},selected:n}),!t&&(0,k.Y)(i.Fragment,null))}const Js=e=>(0,k.Y)("div",{style:{userSelect:"none"}},(0,k.Y)(Qs,(0,j.A)({},e,{endElement:(0,k.Y)("div",{style:{touchAction:"none"}},(0,k.Y)(Da.A.Icon,{Icon:$n.A})),disableCheckForTreeAttachment:!0}))),Zs=e=>{let{person:t,record:a}=e;const[i]=(0,P.B)(),[r,n,o]=(0,hr.FH)({name:["dragInfo","selectedPersonsIds","isMultiSelect"]}),s=n.some((e=>e===t.id)),l={overflow:"hidden",borderRadius:"0.25rem"},d=null!==r&&void 0!==r&&r.isDragging&&s?{...l,...Qn}:l;return(0,k.Y)(Jn,{key:null===t||void 0===t?void 0:t.id,id:null===t||void 0===t?void 0:t.id,style:d,data:{person:t,record:a},testId:`draggable-person-${null===t||void 0===t?void 0:t.id}`},(0,k.Y)(Js,{person:t,t:i,record:a,isSelected:s,isMultiSelect:o,startElement:o?(0,k.Y)("div",{style:{marginInlineStart:"0.5rem"}},(0,k.Y)(mr.cG,{"data-testid":`multiselect-checkbox-${null===t||void 0===t?void 0:t.id}`,name:"selectedPersonsIds",value:null===t||void 0===t?void 0:t.id,onClick:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation()})):(0,k.Y)(Da.A.Filler,{width:36}),disableDefaultClickHandler:!0}))};function el(e){const t=(0,A.q5)(e,"NAME_GN");return(0,A.OV)(null===t||void 0===t?void 0:t[0])||""}function tl(e){let{person:t,movePersonMode:a,record:r,t:n}=e;return(0,k.Y)(i.Fragment,null,a&&(0,k.Y)(Zs,{person:t,record:r,t:n}),!a&&(0,k.Y)(Qs,{record:r,person:t,openNewPage:()=>{window.open(`/ark:/61903/${t.partitionKey}?view=index&personArk=/ark:/61903/${t.id}&action=view`)},t:n,key:t.id}))}function al(e){let{record:t,movePersonMode:a}=e;const r=(0,A.q5)(t,"PERSON"),{currentImageArk:n}=(0,b.A)(),o=null===r||void 0===r?void 0:r.find((e=>!0===e.primary)),s=r.filter((e=>(null===e||void 0===e?void 0:e.partitionKey)!==n))||[];let l=o;(null===o||void 0===o?void 0:o.partitionKey)!==n&&(l=r.find((e=>(null===e||void 0===e?void 0:e.partitionKey)===n)));const[d]=(0,P.B)();return(0,k.Y)(i.Fragment,null,s.length>0&&l&&(0,k.Y)(Bn.A,null,(0,k.Y)(po.A,{primaryText:d("other-persons-mentioned.mentioned.heading","Others mentioned in this record"),secondaryText:d("other-persons-mentioned.these-are-referenced.sub-heading","These are referenced in relation to {givenName} on other pages",{givenName:el(l)})},s.map((e=>(0,k.Y)(tl,{key:e.id,person:e,movePersonMode:a,record:t,t:d}))))),s.length>0&&!l&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(oe.A,{fullWidth:!0}),(0,k.Y)(ae.A,{size:"xs"}),s.map((e=>(0,k.Y)(tl,{key:e.id,person:e,movePersonMode:a,record:t,t:d})))))}const il=a.p+"static/media/search-record.c8d83316f1270ca57a7b.png",rl=a.p+"static/media/review-record.9dc7a9ed11a3d21174bc.png";function nl(e){let{overlay:t,onCancel:a,onContinue:r,person:n,existingRelationships:o,genericVersion:s}=e;const[l]=(0,P.B)(),d=(0,b.A)(),[c,u]=(0,i.useState)(!1),h=(0,Ee.hA)({person:n}),p=(0,k.AH)("max-height:140px;overflow-x:hidden;overflow-y:",c?"scroll":"hidden",";");return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:s?l("edit-relationships.cross-record-warning-overlay.are-you-sure","Are you sure?"):l("edit-relationships.cross-record-warning-overlay.heading","Before Adding this Relationship")}),(0,k.Y)(te.A,{size:"sm"},s?l("edit-relationships.cross-record-warning-overlay.content.generic-text","{name} is in another record with existing relationships. To move {name}, old relationships will need to be removed. ",{name:h}):l("edit-relationships.cross-record-warning-overlay.content.text","{name} is in another record with existing relationships. To create this relationship, old relationships will need to be removed. ",{name:h}),!s&&(0,k.Y)(rn.A,{to:"https://www.familysearch.org/en/help/helpcenter/article/how-do-i-add-a-name-to-a-relationship-in-historical-records-when-the-name-is-currently-connected-to-the-wrong-record"},l("edit-relationships.cross-record-warning-overlay.learn-more","Learn more"))),(0,k.Y)(Bn.A,null,(0,k.Y)(Da.A,{primaryText:h,overline:null!==n&&void 0!==n&&n.primary?l("edit-relationships.cross-record-warning-overlay.principal","Principal"):"",startElement:(0,k.Y)(Da.A.Icon,{Icon:Ha.A})})),(0,k.Y)(te.A,{size:"sm"},l("edit-relationships.cross-record-warning-overlay.view-relationships","The following relationships will be removed:")),(0,k.Y)("div",{css:p},(0,k.Y)(Bn.A,null,o.map((e=>{const t=(0,A.rr)(d.images,e.otherPersonId);return(0,k.Y)(Da.A,{key:e.id,overline:`${null!==t&&void 0!==t&&t.primary?`${l("edit-relationships.cross-record-warning-overlay.principal","Principal")} | `:""}${e.label}`,primaryText:e.value,endElement:(0,k.Y)(Da.A.Icon,{Icon:Kt.A,onClick:()=>{(0,A.tG)(t,e,d.currentImageArk)}})})})))),o.length>2?(0,k.Y)(Z.A,{onClick:()=>u(!c)},l("edit-relationships.cross-record-warning-overlay.view-all","View All")):null,(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{onClick:()=>{t.close(),a&&a()}},l("edit-relationships.cross-record-warning-overlay.cancel.button","Cancel")),(0,k.Y)(at.A,{onClick:()=>{t.close(),r&&r()},Icon:gi.A},l("edit-relationships.cross-record-warning-overlay.remove.button","Remove Relationships")))))}const ol=(0,k.AH)("background-image:",Xn,";height:90px;padding:10px;display:flex;flex-direction:column;background-color:",W.A.gray03,";border:solid 4px ",W.A.gray00,";"),sl=(0,k.AH)("background-image:none;border:solid 4px ",W.A.blue10,";height:90px;padding:10px;display:flex;flex-direction:column;background-color:",W.A.gray03,";"),ll=(0,k.AH)("border:solid 4px ",W.A.gray00,";"),dl=(0,y.Ay)("rip:R2:DragNames"),cl=async e=>{let{recordIdParam:t,personsData:a,currentPartitionKey:i,images:r,recordType:n}=e,o=t,s=[];const l=Array.isArray(a)?a:[a];"new_record"===t&&(o=await(0,Se.XM)("record"),s=[{type:"CREATE_ELEMENT",value:{elementType:"RECORD",partitionKey:i,id:o,extraArgs:""!==n?{recordType:n}:{}}},{type:"ADD_SUB",value:{superPartitionKey:i,subPartitionKey:i,superId:i,subId:o,elementType:"IMAGE"}}]);return l.reduce(((e,t)=>{var a,n,s;const l=null===(a=(0,A.$C)(r,null===t||void 0===t?void 0:t.recordId))||void 0===a?void 0:a[0],d=null===(n=(0,A.$C)(r,o))||void 0===n?void 0:n[0],c=(0,Ai.nx)({person:t,destRecordId:o,sourceRecPartitionKey:null===l||void 0===l?void 0:l.partitionKey,destRecPartitionKey:d?d.partitionKey:i});return e.push(...c),1===(null===l||void 0===l||null===(s=l.subElements)||void 0===s?void 0:s.length)&&e.push({type:"REMOVE_ELEMENT",value:(0,Je.K5)({elementType:"RECORD",partitionKey:l.partitionKey,id:l.id})}),e}),[...s])};function ul(){var e;const t=(0,je.mS)(),a=(0,Ae.l)(),{dragNamesOverlay:n,closeOverlay:o}=(0,Ti.HQ)(),[s]=(0,P.B)(),l=s("drag=names.heading","Drag Names"),d=s("drag-names.instructions","Drag names to the correct record group or create a new record. All previous relationships will be deleted once a change is saved."),c=(0,i.useRef)(null),[u,h]=(0,i.useState)({}),[p,m]=(0,i.useState)(!1),[v,y]=(0,i.useState)(!1),[f,w]=(0,i.useState)(),[T,I]=(0,i.useState)(""),[S,E]=(0,i.useState)(),[C,x]=(0,i.useState)([]),[Y,N]=(0,i.useState)(!1),[R,O]=(0,i.useState)([]),[_,F]=(0,i.useState)(),[D,M]=(0,i.useState)(ol),H=`solid 4px ${W.A.blue10}`,z=`solid 4px ${W.A.gray00}`,{rip_sharedImageViewer_addIndex:V,rip_sharedImageViewer_saveChanges:B,rip_sharedImageViewer_sls_actions_splunk_debugger:G}=(0,L.h)(["rip_sharedImageViewer_addIndex","rip_sharedImageViewer_saveChanges","rip_sharedImageViewer_sls_actions_splunk_debugger"]),U=(0,b.A)(),{currentImageArk:K}=U,{allRecords:q,floatingPersons:X,noPeople:Q}=Ce({images:null===U||void 0===U?void 0:U.images,currentImageArk:null===U||void 0===U?void 0:U.currentImageArk,thumbnails:null===U||void 0===U?void 0:U.thumbnails}),ee=(0,$.Ay)(),ie=(0,$.Ay)(),re=(0,i.useMemo)((()=>(0,$e.Zw)(U.types,null===U||void 0===U?void 0:U.images,K,s)),[s,U.types,K,null===U||void 0===U?void 0:U.images]),ne=(0,i.useCallback)((async e=>{var i;const r=e.find((e=>"CREATE_ELEMENT"===e.type&&"RECORD"===e.value.elementType)),n=(null===r||void 0===r||null===(i=r.value)||void 0===i?void 0:i.id)||"",o=(0,wi.q)(e);if(null!==o&&void 0!==o&&o.length){dl("saveSls: ",{sls:o,dispatches:e});try{await(0,Se.Nn)({actions:o,userId:t.userId,appName:qe.zQ,fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],splunkDebugModeArguments:G.isOn?{theFileFromWhichSaveWasCalled:"DragNames"}:{}}),a({type:"BATCH_DISPATCHES",value:n?e.concat({type:"NEW_RECORD_AT_TOP",value:n}):e})}catch(d){var s,l;m(d),(0,$e.Yt)(d,{codeId:66,sls:o,status:null===d||void 0===d||null===(s=d.response)||void 0===s?void 0:s.status,responseBody:null===d||void 0===d||null===(l=d.response)||void 0===l?void 0:l.data})}}}),[a,t.userId,G.isOn]),se=(0,i.useCallback)((async(e,t,a,i)=>{let r=[],n=[];if(Y){if((await Promise.all(t.map((async a=>{const i=(0,Ie.FA)(a,U.images);if(i.filter((e=>!t.some((t=>t.id===e.otherPersonId)))).length>0){if(!S)return E(t),y(!0),F(e),!1;E(null)}return i.filter((e=>t.some((t=>t.id===e.otherPersonId)))).forEach((e=>{const t=e.relKey.includes("_SECOND"),i=t?a:e,r=t?e:a,o=(0,Ai.vP)({partitionKey:i.partitionKey,person1ID:i.id,person2ID:r.otherPersonId,person1PartitionKey:i.partitionKey,person2PartitionKey:r.partitionKey,relType:r.fieldType});o&&(n=[...n,...o])})),!0})))).flat().includes(!1))return;r=await cl({recordIdParam:e,personsData:t,currentPartitionKey:a,images:U.images,recordType:i})}else{const n=(0,Ie.FA)(t,U.images);if(n.length>0){if(!S)return E(t),O(n),F(e),void ie.handleClick();E(null)}const o=await cl({recordIdParam:e,personsData:t,currentPartitionKey:a,images:U.images,recordType:i});r.push(...o)}const o=[],s=[];r.forEach((e=>{"REMOVE_ELEMENT"===e.type||"REM_SUB"===e.type?s.push(e):o.push(e)})),B.isOn?(await ne(s),await ne(o),await ne(n)):dl("Saving changes to SLS is disabled")}),[ie,B.isOn,S,U.images,ne,Y]),le={position:"fixed",zIndex:"1",background:W.A.gray00,paddingRight:"16px"},ce=e=>{e&&e.forEach((e=>{e.style.border=z}))},ue=(e,t)=>{x((a=>t?[...a,e]:a.filter((t=>t.id!==e.id))))},he=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e&&t.recordId!==e&&("new_record"===e?(w(a||t),ee.handleClick()):se(e,t,U.currentImageArk))},pe=e=>C.find((t=>t.id===e.id))?C:[...C,e];return(0,k.Y)(hi.A,(0,j.A)({title:s("drag-names.heading","Drag Names"),headingColor:"purple"},n,{close:()=>{o("dragNames")}}),(0,k.Y)(Wn.Mp,{onDragStart:e=>{var t,a;const i={isDragging:!0,person:(0,A.rr)(U.images,e.active.id),record:null===(t=(0,A.$C)(q,null===u||void 0===u||null===(a=u.person)||void 0===a?void 0:a.recordId))||void 0===t?void 0:t[0]};h(i)},onDragOver:e=>{var t,a;const i="new_record"===(null===e||void 0===e||null===(t=e.over)||void 0===t?void 0:t.id),r=c.current.querySelector(`[id="record-${null===e||void 0===e||null===(a=e.over)||void 0===a?void 0:a.id}"]`),n=c.current.querySelectorAll('[id^="record-"]'),o=Array.from(n).filter((e=>(null===e||void 0===e?void 0:e.id)!==(null===r||void 0===r?void 0:r.id)));((e,t)=>{var a,i;const r=(null===u||void 0===u||null===(a=u.person)||void 0===a?void 0:a.recordId)===(null===t||void 0===t||null===(i=t.over)||void 0===i?void 0:i.id);e&&e.style&&!r&&(e.style.border=H)})(r,e),ce(o),M(i?sl:ol)},onDragEnd:e=>{var t;ce(c.current.querySelectorAll('[id^="record-"]'));const a=c.current.querySelectorAll(`[id="record-${null===e||void 0===e||null===(t=e.over)||void 0===t?void 0:t.id}"]`);if(a&&a.style&&(a.style.border=`solid 4px ${W.A.gray00}`),Y){const t=pe(u.person);he(e.over.id,t,u.person)}else he(e.over.id,u.person);h(null),"new_record"!==e.over.id&&x([])},onDragCancel:()=>{h(null)}},(0,k.Y)("div",{css:le},(0,k.Y)(fr,{heading:l,caption:d}),(0,k.Y)(Zn,{key:"new_record",id:"new_record"},(0,k.Y)("div",{css:D,"data-testid":"droppableChild"},(0,k.Y)(Z.A,{emphasis:"low",Icon:Ci.A},s("drag-names.button.newRecord","New Record Group")),(0,k.Y)("div",{css:{marginInlineStart:"25px"}},(0,k.Y)(te.A,{size:"xs"},s("drag-names.button.dragToCreateRecord","Drag name to create a new record group."))))),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(oe.A,{fullWidth:!0})),(0,k.Y)(ae.A,{size:"xxl"}),(0,k.Y)("div",null),(0,k.Y)(ae.A,{size:"xxl"}),(0,k.Y)(Ht.A,{label:s("drag-names.toggle.multiple","Move multiple names"),name:"isMultiple",checked:Y,onChange:()=>{N(!Y)}}),(0,k.Y)("div",{ref:c},null===q||void 0===q?void 0:q.map(((e,t)=>{var a;const r=null===e||void 0===e||null===(a=e.subElements)||void 0===a?void 0:a.filter((e=>"PERSON"===(null===e||void 0===e?void 0:e.elementType)&&(null===e||void 0===e?void 0:e.partitionKey)===K));return(0,k.Y)("div",{key:null===e||void 0===e?void 0:e.id},r&&r.length>0&&0!==t&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(oe.A,{fullWidth:!0}),(0,k.Y)(ae.A,{size:"xs"})),(0,k.Y)(Zn,{id:null===e||void 0===e?void 0:e.id,dragging:null===u||void 0===u?void 0:u.isDragging},(0,k.Y)("div",{key:null===e||void 0===e?void 0:e.id},r&&r.length>0&&(0,k.Y)("div",{css:ll,id:`record-${null===e||void 0===e?void 0:e.id}`},(0,k.Y)(Bn.A,null,r.map((t=>{var a;const i=null!==u&&void 0!==u&&u.isDragging&&(null===t||void 0===t?void 0:t.id)===(null===u||void 0===u||null===(a=u.person)||void 0===a?void 0:a.id)?Qn:{},r=C.some((e=>e.id===t.id));return(0,k.Y)("div",{key:null===t||void 0===t?void 0:t.id},(0,k.Y)(Jn,{id:null===t||void 0===t?void 0:t.id,style:i,"data-current":null===e||void 0===e?void 0:e.id},(0,k.Y)(Qs,{person:t,t:s,key:t.id,record:e,onCheckboxChange:ue,isSelected:r,isMultiSelect:Y})))})))),(0,k.Y)(al,{dragInfo:u,record:e,movePersonMode:!0}))))}))),X&&(null===X||void 0===X?void 0:X.length)>0&&(0,k.Y)("div",null,(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(oe.A,{fullWidth:!0}),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(_e.A,{heading:s("select-person.title.heading","Names not in records"),data:s("select-person.title.subheading","Add relationships to connect a name to the correct record.")}),(0,k.Y)(ae.A,{size:"xs"}),X.sort(((e,t)=>e.primary>t.primary?-1:1)).map((e=>{var t;const a=null!==u&&void 0!==u&&u.isDragging&&(null===e||void 0===e?void 0:e.id)===(null===u||void 0===u||null===(t=u.person)||void 0===t?void 0:t.id)?Qn:{},i=C.some((t=>t.id===e.id));return(0,k.Y)("div",{key:null===e||void 0===e?void 0:e.id},(0,k.Y)(Jn,{key:null===e||void 0===e?void 0:e.id,id:null===e||void 0===e?void 0:e.id,style:a},(0,k.Y)(Qs,{person:e,zionSlsState:U,t:s,key:e.id,onCheckboxChange:ue,isSelected:i,isMultiSelect:!0})))}))),!V.isOn&&!U.loading&&Q&&(0,k.Y)(i.Fragment,null,(0,k.Y)(Dt.A,{src:il,alt:""}),(0,k.Y)(te.A,{size:"sm",centered:!0},s("select-person.subheading.not-indexed","This image has not been indexed."))),V.isOn&&U.currentImageArk&&!U.loading&&Q&&(0,k.Y)(i.Fragment,null,(0,k.Y)(Dt.A,{src:rl,alt:""}),(0,k.Y)(te.A,{size:"sm",centered:!0},s("select-person.subheading.add-name","Select the Add button below to transcribe the first name on this image."))),Q&&U.loading&&(0,k.Y)(J.Ay,{alignX:"center"},(0,k.Y)(g.A,{size:"md"})),(0,r.createPortal)((0,k.Y)(Wn.Hd,{modifiers:[qn.Q_],dropAnimation:null,style:{borderInlineStart:`4px solid${W.A.blue10}`,boxShadow:"0 0 5px rgb(68 68 68 / 0.6)",background:"white"}},u&&(0,k.Y)(Qs,{person:null===u||void 0===u?void 0:u.person,t:s,key:null===u||void 0===u||null===(e=u.person)||void 0===e?void 0:e.id,record:null===u||void 0===u?void 0:u.record})),document.body)),(0,k.Y)(Ze.A,(0,j.A)({},ee,{title:s("new-record-dialog.title","New Record")}),s("new-record-dialog.content","What is the record type? If you are unsure of what to enter, leave it blank."),(0,k.Y)(de.Ay,{label:s("new-record-dialog.record-types","Record Types"),placeholder:s("new-record-dialog.record-types","Record Types"),suggestions:re,onInputTextChange:e=>{e||I("")},onSuggestionSelected:e=>{I((null===e||void 0===e?void 0:e.key)||"")},helpMessage:(0,k.Y)(i.Fragment,null,s("new-record-dialog.help-message","What are record types?"),"\xa0",(0,k.Y)(rn.A,{to:"https://www.familysearch.org/en/help/helpcenter/article/what-is-a-record-type"},s("new-record-dialog.learn-more","Learn More"))),clearOnClickAway:!0,sortFunction:$e.mo}),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{onClick:()=>ee.close()},s("new-record-dialog.undo.btn","Undo")),(0,k.Y)(Z.A,{onClick:async()=>{if(ee.close(),Y){const e=pe(f);se("new_record",e,U.currentImageArk,T)}else se("new_record",f,U.currentImageArk,T);x([])},emphasis:"high"},s("new-record-dialog.save.btn","Save"))))),S&&(0,k.Y)(nl,{overlay:ie,person:S,existingRelationships:R,onContinue:()=>{se(_,S,U.currentImageArk,T)}}),(0,k.Y)(it,{error:p,setError:m,title:s("save-error-overlay.heading","Unable to Save Changes"),message:s("save-error-overlay.content-generic","Your changes were not saved.  Please try again later.")}),(0,k.Y)(it,{error:v,setError:y,title:s("edit-relationships.cross-record-warning-overlay.heading","Before Adding this Relationship"),message:s("edit-relationships.cross-record-warning-overlay.multiple.content","If you dont move all persons on the relationship the relationship would be lost"),label:s("edit-relationships.cross-record-warning-overlay.remove.button","Remove Relationships"),callback:()=>{y(!1),se(_,S,U.currentImageArk,T)},useDangerButton:!0}))}var hl=a(55678);const pl=(0,k.AH)("outline:solid 4px ",W.A.blue10,";"),ml=e=>{var t;let{record:a}=e;const{currentImageArk:r}=(0,b.A)(),[n]=(0,hr.FH)({name:["dragInfo"]}),o=null===a||void 0===a||null===(t=a.subElements)||void 0===t?void 0:t.filter((e=>"PERSON"===(null===e||void 0===e?void 0:e.elementType)&&(null===e||void 0===e?void 0:e.partitionKey)===r));return(0,k.Y)(i.Fragment,null,o.length>0&&(0,k.Y)(hl.A,{marginY:"xs",fullWidth:!0}),(0,k.Y)(Zn,{id:null===a||void 0===a?void 0:a.id,key:null===a||void 0===a?void 0:a.id,setOverStyle:(e,t)=>{var a;return e&&(null===t||void 0===t?void 0:t.id)!==(null===n||void 0===n||null===(a=n.person)||void 0===a?void 0:a.recordId)?pl:void 0}},(0,k.Y)(i.Fragment,null,o&&o.length>0&&(0,k.Y)("div",{id:`record-${null===a||void 0===a?void 0:a.id}`},(0,k.Y)(Bn.A,null,o.map((e=>(0,k.Y)(Zs,{key:null===e||void 0===e?void 0:e.id,person:e,record:a}))))),(0,k.Y)(al,{record:a,movePersonMode:!0}))))},gl=e=>{let{images:t,personsIds:a}=e;return a.map((e=>(0,A.rr)(t,e))).filter(Boolean)},vl=async e=>{let{recordIdParam:t,personsData:a,currentPartitionKey:i,images:r,recordType:n}=e,o=t,s=[];const l=Array.isArray(a)?a:[a];"new_record"===t&&(o=await(0,Se.XM)("record"),s=[{type:"CREATE_ELEMENT",value:{elementType:"RECORD",partitionKey:i,id:o,extraArgs:""!==n?{recordType:n}:{}}},{type:"ADD_SUB",value:{superPartitionKey:i,subPartitionKey:i,superId:i,subId:o,elementType:"IMAGE"}}]);return l.reduce(((e,a)=>{var n,s,l;const d=null===(n=(0,A.$C)(r,null===a||void 0===a?void 0:a.recordId))||void 0===n?void 0:n[0],c=null===(s=(0,A.$C)(r,o))||void 0===s?void 0:s[0],u=(0,Ai.nx)({person:a,destRecordId:o,sourceRecPartitionKey:null===d||void 0===d?void 0:d.partitionKey,destRecPartitionKey:c?c.partitionKey:i});return e.push(...u),1===(null===d||void 0===d||null===(l=d.subElements)||void 0===l?void 0:l.length)&&t!==(null===d||void 0===d?void 0:d.id)&&e.push({type:"REMOVE_ELEMENT",value:(0,Je.K5)({elementType:"RECORD",partitionKey:d.partitionKey,id:d.id})}),e}),[...s])},yl=e=>{let{newRecordOverlay:t,savePersonInOtherRecord:a}=e;const[r]=(0,P.B)(),n=(0,b.A)(),{types:o,images:s,currentImageArk:l}=n,d=(0,ur.Hj)(),c=d.getValues("selectedPersonsIds"),u=(0,i.useMemo)((()=>(0,$e.Zw)(o,s,l,r)),[r,o,l,s]),h=(0,i.useCallback)((async()=>{const e=gl({images:s,personsIds:c}),i=d.getValues("newRecordType")||"";a("new_record",e,n.currentImageArk,i),d.setValue("selectedPersons",[]),t.close()}),[a,c,d,n,t,s]);return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:r("new-record-dialog.title","New Record")}),r("new-record-dialog.content","What is the record type? If you are unsure of what to enter, leave it blank."),(0,k.Y)(mr.eP,{label:r("new-record-dialog.record-types","Record Types"),placeholder:r("new-record-dialog.record-types","Record Types"),suggestions:u,name:"newRecordType",helpMessage:(0,k.Y)(i.Fragment,null,r("new-record-dialog.help-message","What are record types?"),"\xa0",(0,k.Y)(rn.A,{to:"https://www.familysearch.org/en/help/helpcenter/article/what-is-a-record-type"},r("new-record-dialog.learn-more","Learn More"))),sortFunction:$e.mo,clearOnClickAway:!0}),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{"data-testid":"undo-new-record-dialog",onClick:()=>t.close()},r("new-record-dialog.undo.btn","Undo")),(0,k.Y)(Z.A,{"data-testid":"save-new-record-dialog",onClick:h,emphasis:"high"},r("new-record-dialog.save.btn","Save")))))},fl={name:"7erktu",styles:"position:relative;width:100%;min-height:3.25rem;"},bl=(0,k.AH)("position:absolute;box-shadow:0 0 0.3125rem rgb(68 68 68 / 0.6);background:",W.A.white100,";border-radius:0.25rem;display:flex;flex-direction:column;justify-content:center;height:min-content;width:100%;"),Al=()=>{const[e]=(0,P.B)(),[t,a]=(0,hr.FH)({name:["dragInfo","selectedPersonsIds"]});return(0,r.createPortal)((0,k.Y)(Wn.Hd,{modifiers:[qn.Q_],dropAnimation:null},(0,k.Y)("div",{css:fl,"data-testid":"drag-overlay-container"},a.slice(0,3).map(((a,i)=>{var r;return(0,k.Y)("div",{key:a,css:bl,style:{top:5*i+"px",insetInlineStart:5*i+"px",zIndex:-1*(i+1)}},(0,k.Y)(Js,{person:null===t||void 0===t?void 0:t.person,t:e,key:null===t||void 0===t||null===(r=t.person)||void 0===r?void 0:r.id,record:null===t||void 0===t?void 0:t.record}))})))),document.body)},wl=(0,k.AH)("outline:solid 0.25rem ",W.A.blue10,";background-image:none;outline-offset:-0.25rem;"),Tl=(0,k.AH)("background-image:",Xn,";padding:1rem;background-color:",W.A.gray03,";outline:solid 0.25rem ",W.A.gray00,";"),Il={dragInfo:null,draggedPerson:{},newRecordType:"",selectedPersonsIds:[],destinationRecord:null,warningPerson:null,isMultiSelect:!1,crossRecordRelationships:[]},Sl={delay:150,distance:5},El=(0,y.Ay)("rip:R2:DragNames");function kl(){const e=(0,je.mS)(),t=(0,b.A)(),{currentImageArk:a,loading:r,images:n}=t,o=(0,Ae.l)(),{dragNamesOverlay:s,closeOverlay:l}=(0,Ti.HQ)(),[d]=(0,P.B)(),[c,u]=(0,i.useState)(!1),[h,p]=(0,i.useState)(!1),[m,v]=(0,i.useState)(),[y,f]=(0,i.useState)([]),[w,T]=(0,i.useState)(),{rip_sharedImageViewer_addIndex:I,rip_sharedImageViewer_saveChanges:S,rip_sharedImageViewer_sls_actions_splunk_debugger:E}=(0,L.h)(["rip_sharedImageViewer_addIndex","rip_sharedImageViewer_saveChanges","rip_sharedImageViewer_sls_actions_splunk_debugger"]),C=d("drag=names.heading","Drag Names"),x=d("drag-names.instructions","Drag names to the correct record group or create a new record. All previous relationships will be deleted once a change is saved."),Y=(0,ur.SV)({defaultValues:Il}),{allRecords:N,floatingPersons:R,noPeople:O}=Ce({images:null===t||void 0===t?void 0:t.images,currentImageArk:null===t||void 0===t?void 0:t.currentImageArk,thumbnails:null===t||void 0===t?void 0:t.thumbnails}),_=(0,$.Ay)(),F=(0,$.Ay)(),D=(0,i.useCallback)((async t=>{var a;const i=t.find((e=>"CREATE_ELEMENT"===e.type&&"RECORD"===e.value.elementType)),r=(null===i||void 0===i||null===(a=i.value)||void 0===a?void 0:a.id)||"",n=(0,wi.q)(t);if(null!==n&&void 0!==n&&n.length){El("saveSls: ",{sls:n,dispatches:t});try{S.isOn?(0,Se.Nn)({actions:n,userId:e.userId,appName:qe.zQ,fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],splunkDebugModeArguments:E.isOn?{theFileFromWhichSaveWasCalled:"DragNames"}:{}}):El("Saving changes to SLS is disabled"),o({type:"BATCH_DISPATCHES",value:r?t.concat({type:"NEW_RECORD_AT_TOP",value:r}):t})}catch(d){var s,l;u(d),(0,$e.Yt)(d,{codeId:66,sls:n,status:null===d||void 0===d||null===(s=d.response)||void 0===s?void 0:s.status,responseBody:null===d||void 0===d||null===(l=d.response)||void 0===l?void 0:l.data})}finally{Y.reset()}}}),[o,e.userId,E.isOn,S.isOn,Y]),M=(0,i.useCallback)((async(e,t,a)=>{let i=[],r=[];const[o,s]=Y.getValues(["isMultiSelect","newRecordType"]);if(o){if((await Promise.all(t.map((async a=>{const i=(0,Ie.FA)(a,n);if(i.filter((e=>!t.some((t=>t.id===e.otherPersonId)))).length>0){if(!m)return v(t),p(!0),T(e),!1;v(null)}return i.filter((e=>t.some((t=>t.id===e.otherPersonId)))).forEach((e=>{const t=e.relKey.includes("_SECOND"),i=t?a:e,n=t?e:a,o=(0,Ai.vP)({partitionKey:i.partitionKey,person1ID:i.id,person2ID:n.otherPersonId,person1PartitionKey:i.partitionKey,person2PartitionKey:n.partitionKey,relType:n.fieldType});o&&(r=[...r,...o])})),!0})))).flat().includes(!1))return;i=await vl({recordIdParam:e,personsData:t,currentPartitionKey:a,images:n,newRecordType:s})}else{t=Array.isArray(t)?t[0]:t;const r=(0,Ie.FA)(t,n);if(r.length>0){if(!m)return v(t),f(r),T(e),void F.handleClick();v(null)}const o=await vl({recordIdParam:e,personsData:t,currentPartitionKey:a,images:n,newRecordType:s});i.push(...o)}const l=[],d=[];i.forEach((e=>{"REMOVE_ELEMENT"===e.type||"REM_SUB"===e.type?d.push(e):l.push(e)})),await D(d),await D(l),await D(r)}),[F,m,n,D,Y]),H=(0,Wn.FR)((0,Wn.MS)(Wn.AN,{activationConstraint:Sl}),(0,Wn.MS)(Wn.IG,{activationConstraint:Sl})),z=(0,i.useCallback)((()=>{l("dragNames"),Y.reset()}),[l,Y]);return(0,k.Y)(pr.Ay,{methods:Y,id:"drag-names-panel"},(0,k.Y)(Wn.Mp,{sensors:H,onDragStart:e=>{let{active:t}=e;return(e=>{var t;let{active:a,formMethods:i,images:r,allRecords:n}=e;const[o,s]=i.getValues(["selectedPersonsIds","isMultiSelect"]),l=null===a||void 0===a?void 0:a.id;o.includes(l)||i.setValue("selectedPersonsIds",[l,...o]);const d=(0,A.rr)(r,l),c={isDragging:!0,person:d,record:null===(t=(0,A.$C)(n,null===d||void 0===d?void 0:d.recordId))||void 0===t?void 0:t[0]};i.setValue("dragInfo",c),s||i.setValue("selectedPersonsIds",[null===d||void 0===d?void 0:d.id])})({active:t,formMethods:Y,images:n,allRecords:N})},onDragEnd:e=>{let{active:t,over:i}=e;return(e=>{var t,a,i;let{active:r,over:n,formMethods:o,images:s,newRecordOverlay:l,currentImageArk:d,savePersonInOtherRecord:c}=e;const u=o.getValues("selectedPersonsIds"),h=gl({images:s,personsIds:u}),p=null===r||void 0===r||null===(t=r.data)||void 0===t||null===(a=t.current)||void 0===a||null===(i=a.record)||void 0===i?void 0:i.id,m=null===n||void 0===n?void 0:n.id;if(h.every((e=>(null===e||void 0===e?void 0:e.recordId)===p))&&p===m)return o.setValue("dragInfo",null),void o.setValue("selectedPersonsIds",[]);"new_record"===m?l.handleClick():c(m,h,d),o.setValue("dragInfo",null)})({active:t,over:i,formMethods:Y,images:n,newRecordOverlay:_,currentImageArk:a,savePersonInOtherRecord:M})},onDragCancel:()=>(e=>{let{formMethods:t}=e;t.setValue("dragInfo",null)})({formMethods:Y})},(0,k.Y)(hi.A,(0,j.A)({title:d("drag-names.heading","Drag Names"),headingColor:"purple"},s,{close:z,headerContent:(0,k.Y)(Rr,{heading:C,caption:x},(0,k.Y)(Zn,{key:"new_record",id:"new_record",setOverStyle:e=>e?[Tl,wl]:Tl},(0,k.Y)("div",{"data-testid":"droppableChild"},(0,k.Y)(Ft.A,{primaryColor:W.A.blue60,secondaryColor:W.A.gray100},(0,k.Y)(J.Ay,{gutters:"nano"},(0,k.Y)(Ci.A,{color:W.A.blue60,size:"xs"}),(0,k.Y)(re.H6,{supplementary:!0},d("drag-names.button.newRecord","New Record Group"),(0,k.Y)(ne.A,null,d("drag-names.button.dragToCreateRecord","Drag name to create a new record group."))))))))}),(0,k.Y)(i.Fragment,null,(0,k.Y)(mr.Xq,{"data-testid":"toggle-multi-select",label:d("drag-names.toggle.multiple","Move multiple names"),name:"isMultiSelect",onChange:()=>{Y.setValue("selectedPersonsIds",[])}})),null===N||void 0===N?void 0:N.map((e=>(0,k.Y)(ml,{record:e,key:null===e||void 0===e?void 0:e.id}))),R&&(null===R||void 0===R?void 0:R.length)>0&&(0,k.Y)(i.Fragment,null,(0,k.Y)(oe.A,{fullWidth:!0,marginY:"xs"}),(0,k.Y)(_e.A,{heading:d("select-person.title.heading","Names not in records"),data:d("select-person.title.subheading","Add relationships to connect a name to the correct record.")}),(0,k.Y)(ae.A,{size:"xs"}),R.sort(((e,t)=>e.primary>t.primary?-1:1)).map((e=>(0,k.Y)(Zs,{key:null===e||void 0===e?void 0:e.id,person:e})))),!I.isOn&&!r&&O&&(0,k.Y)(i.Fragment,null,(0,k.Y)(Dt.A,{src:il,alt:""}),(0,k.Y)(te.A,{size:"sm",centered:!0},d("select-person.subheading.not-indexed","This image has not been indexed."))),I.isOn&&a&&!r&&O&&(0,k.Y)(i.Fragment,null,(0,k.Y)(Dt.A,{src:rl,alt:""}),(0,k.Y)(te.A,{size:"sm",centered:!0},d("select-person.subheading.add-name","Select the Add button below to transcribe the first name on this image."))),O&&r&&(0,k.Y)(J.Ay,{alignX:"center","data-testid":"loading-indicator"},(0,k.Y)(g.A,{size:"md"})),(0,k.Y)(Al,null),_.isOpen&&(0,k.Y)(yl,{newRecordOverlay:_,savePersonInOtherRecord:M}),m&&(0,k.Y)(nl,{overlay:F,person:m,existingRelationships:y,onContinue:()=>{M(w,m,a)}}),(0,k.Y)(it,{error:c,setError:u,title:d("save-error-overlay.heading","Unable to Save Changes"),message:d("save-error-overlay.content-generic","Your changes were not saved.  Please try again later.")}),(0,k.Y)(it,{error:h,setError:p,title:d("edit-relationships.cross-record-warning-overlay.heading","Before Adding this Relationship"),message:d("edit-relationships.cross-record-warning-overlay.multiple.content","If you dont move all persons on the relationship the relationship would be lost"),label:d("edit-relationships.cross-record-warning-overlay.remove.button","Remove Relationships"),callback:()=>{p(!1),M(w,m,a)},useDangerButton:!0}))))}const Cl=(0,y.Ay)("rip:R2:IndexImage");function xl(){const e=(0,je.mS)(),t=(0,je.vl)(),a=(0,b.A)(),r=(0,Ae.l)(),n=t,{inPanelStack:o}=(0,Ti.HQ)(),[s,l]=(0,i.useState)(),[d,c]=(0,i.useState)(null),[u]=(0,P.B)(),{rip_sharedImageViewer_saveChanges:h,rip_sharedImageViewer_sls_actions_splunk_debugger:p,rip_sharedImageViewer_newAddPersonPanel:m,rip_sharedImageViewer_dragNamesPanelRefactor:g}=(0,L.h)(["rip_sharedImageViewer_saveChanges","rip_sharedImageViewer_sls_actions_splunk_debugger","rip_sharedImageViewer_newAddPersonPanel","rip_sharedImageViewer_dragNamesPanelRefactor"]),{sharedHighlightOverlay:v,splitScreenImageArk:y}=is();const f=async(t,i)=>{Array.isArray(t)||(t=[t]);let n=[];t.forEach((e=>{const t={type:"REMOVE_ELEMENT",value:{id:e,elementType:"PERSON",partitionKey:a.currentImageArk}};n.push(t);const i=(0,A.rr)(a.images,e);let r=[];(0,A.q5)(i,"RELATIONSHIP").forEach((e=>{r=r.concat((0,Ai.Uk)({element:e}))})),r=r.map((e=>({...e,value:{...e.value,reducerOnly:!0}}))),n=n.concat(r)})),i.length>0&&i.forEach((e=>{const t={type:"REMOVE_ELEMENT",value:{id:e,elementType:"RECORD",partitionKey:a.currentImageArk}};n.push(t)}));!function(t,i){h.isOn&&(0,Se.Nn)({actions:t,userId:e.userId,appName:qe.zQ,fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],splunkDebugModeArguments:p.isOn?{theFileFromWhichSaveWasCalled:"IndexImage"}:{}}).then((()=>{r({type:"BATCH_DISPATCHES",value:i})})).catch((e=>{var i,r;l(e),(0,$e.Yt)(e,null===a||void 0===a?void 0:a.currentImageArk,{codeId:77,slsActions:t,status:null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.status,responseBody:null===e||void 0===e||null===(r=e.response)||void 0===r?void 0:r.data})}))}((0,wi.q)(n),n)},{selectedPerson:w,event:T}=Ks();return Cl("Render: ",{r2State:e,zionSlsState:a,selectedPersonId:e.selectedPersonId}),(0,k.Y)(i.Fragment,null,(0,k.Y)(cr,{handleDeletePerson:f}),!m.isOn&&o("addPersonPage1")&&(0,k.Y)(Yr,null),o("addPersonPage1Generic")&&(0,k.Y)(Wr,{userId:e.userId,noRecord:e.createdPersonNoRecord,onGetPerson:e=>{o("editRelationships")&&c(e),t({type:"SET_CREATED_PERSON_ID",value:e})}}),o("dragNames")&&(g.isOn?(0,k.Y)(kl,null):(0,k.Y)(ul,null)),o("editOtherFields")&&(0,k.Y)(Vn,null),o("editRelationships")&&(0,k.Y)(Ao,{personIdOverlay:d,setPersonIdOverlay:c}),o("editAge")&&(0,k.Y)(To,null),o("eventPanel")&&(0,k.Y)(Ms,{person:w,event:T,shouldParseEventfromSls:!0,shouldSavetoSls:!0,shouldSaveHighlights:!0,userId:e.userId}),o("sharedEvent")&&(0,k.Y)(Us,{selectedPerson:w,event:T,userId:e.userId,viewInContextHandler:e=>t({type:"OPEN_SPLIT_SCREEN_TO_PAGE",value:e})}),o("editEssentialInfo")&&(0,k.Y)(Po,null),(o("editSharedFieldPage1")||o("editSharedFieldPage2"))&&(0,k.Y)(Wo,null),o("highlightsPanel")&&(0,k.Y)(Fo,{splitScreenImageArk:y}),o("editDanglingField")&&(0,k.Y)(cn,null),(o("editSharedHighlightPage1")||o("editSharedHighlightPage2"))&&(0,k.Y)(ts,null),o("removePerson")&&(0,k.Y)(an,{handleDeletePerson:f,handleHoverPerson:e=>{n({type:"SET_HIGHLIGHTED_PERSON_ID",value:null===e||void 0===e?void 0:e.id})},handleUnHoverPerson:()=>{n({type:"SET_HIGHLIGHTED_PERSON_ID",value:null})}}),(0,k.Y)(it,{error:s,setError:l,title:u("save-error-overlay.heading","Unable to Save Changes"),message:u("save-error-overlay.content-generic","Your changes were not saved.  Please try again later.")}),(0,k.Y)(as,{overlay:v}))}var Yl=a(22805),Nl=a(63706),Rl=a(40267),Pl=a(17731);const Ol={name:"1kpjck4",styles:"margin-top:-10px;"},_l={name:"1r2f04i",styles:"margin-bottom:10px;"};function Fl(e){let{label:t,disabled:a,inputPlaceHolder:r,values:n,setValues:o,onSelectionChange:s,selectAllLabel:l=""}=e;const[d,c]=(0,i.useState)({}),[u,h]=(0,i.useState)(!1),p=(0,i.useRef)(),m=(e,t)=>{const a={};Object.keys(e||{}).length>0&&Object.keys(e).forEach((e=>{a[e]=t})),h(t),c(a)},g=(0,i.useCallback)((()=>{m(n,!1)}),[n]),v=(0,i.useCallback)((()=>{m(n,!0)}),[n]);(0,i.useEffect)((()=>{g()}),[g]),(0,i.useEffect)((()=>{Object.keys(d).length>0&&s(d)}),[s,d]),(0,i.useEffect)((()=>{p.current&&!a&&g(),a!==p&&(p.current=a)}),[a,g]);const y=(0,i.useCallback)((e=>{const t=new Set;return Object.keys(e).forEach((a=>{t.add(e[a])})),1===t.size?[...t][0]:void 0}),[]);return(0,k.Y)(Nl.A,{heading:""},(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(te.A,{size:"xs"},t),l&&(0,k.Y)("div",{css:_l},(0,k.Y)(_a.A,{checked:u,mixedState:void 0===u,onChange:()=>{y(d)?g():v()},name:l,label:l}),(0,k.Y)(oe.A,{marginY:"nano"})),Object.keys(n||{}).length>0&&Object.keys(n).map((e=>(0,k.Y)(Rl.A,{key:e},(0,k.Y)(J.Ay,{gutters:"xs"},(0,k.Y)(_a.A,{checked:d[e],onChange:t=>{let{currentTarget:a}=t;return((e,t)=>{c((a=>{const i={...a};return i[t]=e.checked,h(y(i)),i}))})(a,e)},name:"input_checkbox"}),(0,k.Y)(pn.A,{value:n[e],onChange:t=>{let{currentTarget:a}=t;return((e,t)=>{o((a=>{const i={...a};return i[t]=e.value,i}))})(a,e)},placeholder:r,type:"text",disabled:a,growX:!0}))))),(0,k.Y)("div",{css:!(null===n||void 0===n||!n.length)&&Ol},(0,k.Y)(Z.A,{Icon:Ci.A,onClick:()=>{o((e=>{const t={...e};return t[(0,Pl.A)()]="",t}))},disabled:a,"data-testid":"checkbox-list-inputs-button"},t)),(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(oe.A,null))}var Dl=a(95476);const Ml={editHeaderCss:{name:"16e7qgd",styles:"position:sticky;top:0;z-index:1;"},infoSheetFooter:(0,k.AH)("position:fixed;bottom:0;background:",W.A.gray00,";width:100%;box-shadow:0 -2px 10px #ddd;padding:10px 16px;"),buttonLoader:{name:"13czff2",styles:"margin-top:-6px;margin-inline-end:-2px;margin-bottom:0;margin-inline-start:-6px;"},errorText:(0,k.AH)("color:",W.A.danger50,";"),coveragesError:{name:"i6l0wq",styles:"display:flex;background-color:#fee6da;padding:4px 16px;align-items:center;"},errorIcon:{name:"814kqp",styles:"padding-inline-end:16px;"},noBottomPadding:{name:"1phsixa",styles:"padding-bottom:0px;"},openChangeHistory:{name:"1w0ym84",styles:"padding:8px 0;"}},Hl=()=>o.i18n.t("groupData.cancelButtonText","Cancel"),Ll=()=>o.i18n.t("groupData.errorSaveMessage","Oops! There was an error saving... Please try again"),zl=()=>o.i18n.t("groupData.partialFailureSaveMessage","Some fields did not save correctly. Make sure you entered valid input. Use the Feedback button if the error continues."),Vl=()=>o.i18n.t("groupData.removeSelected","Remove Selected"),Bl=()=>o.i18n.t("groupData.saveButtonText","Save"),Gl=()=>o.i18n.t("groupData.saveCheckbox","I described the image group, not just one image."),Ul=()=>o.i18n.t("groupData.doneDividing","Done Dividing"),Kl=()=>o.i18n.t("groupData.metadataIsCorrect","Metadata Is Correct"),ql=()=>o.i18n.t("groupData.skip","Skip"),jl=()=>o.i18n.t("groupData.coveragesErrorMessage","There is an error with one or more of the place, date, or record type fields."),$l=()=>o.i18n.t("metaDataOverlay.unsavedChangesHeader","You have unsaved changes"),Wl=()=>o.i18n.t("metaDataOverlay.leaveButton","Leave"),Xl=()=>o.i18n.t("metaDataOverlay.continueEditingButton","Continue Editing"),Ql=()=>o.i18n.t("metaDataOverlay.unsavedChangesBody","Are you sure you want to leave edit mode? The changes you made will not be saved.");function Jl(){const{setAllCoverageCheckboxes:e,deleteSelectedCoverageCheckboxes:t}=(0,Dl.zU)(),{deleteSelectedCreatorCheckboxes:a,resetCreatorCheckboxes:r}=(0,Dl.T9)();return(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"xxl"}),(0,k.Y)(It.A,{sides:!0},(0,k.Y)("div",{css:Ml.infoSheetFooter},(0,k.Y)(J.Ay,{guttersY:"none",alignX:"end"},(0,k.Y)(Z.A,{onClick:()=>{e(!1),r()}},Hl()),(0,k.Y)(at.A,{onClick:()=>{t(),a()}},Vl())))))}var Zl=a(59151),ed=a.n(Zl),td=a(13902);const ad={textArea:{name:"18re9xj",styles:"margin:6px 0px;width:100%;"}};function id(e){let{editing:t,value:a,onDebounce:r,ElseElement:n,label:s,multiValue:l,error:d,helpText:c}=e;const[u,h]=(0,i.useState)((()=>a));(0,i.useEffect)((()=>{h(a)}),[a]);const p=(0,i.useMemo)((()=>ed()((e=>{"function"===typeof r&&r(e)}),100,{leading:!1,trailing:!0})),[r]),m=(0,i.useCallback)((e=>{const t=e.target.value;h(t),p(t)}),[p]);return(0,k.Y)(i.Fragment,null,t?(0,k.Y)("div",{css:ad.textArea},l?(0,k.Y)(td.Ay,{label:s,value:u,rows:2,onInput:m,helpMessage:c}):(0,k.Y)(pn.A,{label:s,value:u,onInput:m,errorMessage:d&&(0,k.Y)("div",null,o.i18n.t("editableFieldError","This Field did not save correctly"))})):n)}const rd={name:"iijur9",styles:"&:hover,&:focus{text-decoration:underline;cursor:default;}"};function nd(e){let{overline:t,description:a}=e;return(0,k.Y)(Hs.A,{target:(0,k.Y)("span",{css:rd},t),label:a,placement:["top","start","end"]})}var od=a(69262);const sd={editButton:{name:"rp6m8n",styles:"min-width:70px;"},infoButton:{name:"of53ao",styles:"display:flex;font-size:12px;line-height:16px;padding-top:0;[data-icon-button]{transform:translate(6px,5px);}"},header:(0,k.AH)("padding:12px 16px;padding-bottom:8px;background-color:",W.A.gray02,";h6{padding-bottom:0;}"),tooltipHeader:{name:"1pwotm6",styles:"font-size:16px;margin-bottom:-10px;padding-top:10px;font-weight:bold;"}},ld=()=>o.i18n.t("GroupDataHeader.editButtonText","Edit"),dd=()=>o.i18n.t("GroupDataHeader.heading","Image Group Data"),cd=(e,t)=>o.i18n.t("GroupDataHeader.metadataItemOfGroupTotal","Metadata describing Item {x} of {y}",{x:e,y:t}),ud=(e,t)=>o.i18n.t("GroupDataHeader.tooltipLabel","Item {index} of {total}",{index:e,total:t}),hd=(e,t,a,i)=>o.i18n.t("GroupDataHeader.tooltipDescription","Item {itemNumber} is a group containing images {startIndex}\u2013{endIndex} of an image group that originally had {initialImages} images.",{itemNumber:e,startIndex:t,endIndex:a,initialImages:i}),pd=()=>o.i18n.t("GroupDataHeader.tooltipAria","More item information"),md=()=>o.i18n.t("GroupDataHeader.viewAnotherButton","View another item"),gd=()=>o.i18n.t("GroupDataHeader.prevButton","Previous"),vd=()=>o.i18n.t("GroupDataHeader.nextButton","Next"),yd=()=>o.i18n.t("GroupDataHeader.wholeGroup","Metadata describing the entire group of images"),fd=()=>o.i18n.t("GroupDataHeader.errorMessage","We encountered an unexpected error. Please try again later."),bd=()=>o.i18n.t("GroupHeader.recordMetadataReviewDialogBody","This image group has been indexed by a computer, but the metadata must be reviewed for accuracy before the new records are published. Please carefully confirm or correct the metadata so that the records will be searchable for users."),Ad=()=>o.i18n.t("GroupHeader.recordMetadataReviewTitle","Record Metadata Review"),wd=()=>o.i18n.t("GroupHeader.recordMetadataReviewModalTitle","Please Review for Accuracy"),Td=()=>o.i18n.t("GroupHeader.recordMetadataReviewBackToDashboardButton","Back to Dashboard"),Id=()=>o.i18n.t("GroupHeader.okayButton","Okay"),Sd=()=>o.i18n.t("GroupHeader.recordMetadataReviewDialogDoNotShowAgainCheckboxLabel","Don't show this again"),Ed=()=>o.i18n.t("GroupDataHeader.finishRecordMetadataReviewBackButton","Back"),kd=()=>o.i18n.t("GroupDataHeader.finishRecordMetadataReviewTitle","Do you want to submit the review?"),Cd=()=>o.i18n.t("GroupDataHeader.finishEditRecordMetadataReviewTitle","Is everything correct?"),xd=()=>o.i18n.t("GroupDataHeader.finishReviewButton","Yes, Submit Review"),Yd=()=>o.i18n.t("GroupDataHeader.finishEditReviewButton","Yes, Save and Submit Review"),Nd=()=>o.i18n.t("GroupHeader.recordMetadataReviewEditMetadataButton","Edit Metadata"),Rd=()=>o.i18n.t("recordMetadataReviewIsCorrectButton","Metadata is Correct"),Pd=()=>o.i18n.t("recordMetadataReviewIsCorrectSubHeading","Indexed records from this image group will be published and searchable when its metadata review is complete."),Od=()=>o.i18n.t("recordMetadataReviewIsCorrectHeading","Confirm Metadata"),_d=()=>o.i18n.t("recordMetadataReviewModifySubHeading","Carefully correct any metadata errors so that records will be categorized properly. Editing the metadata will return the image group for reprocessing."),Fd=()=>o.i18n.t("recordMetadataReviewModifyHeading","Modify Metadata");function Dd(){const{viewAnotherItemOverlay:e}=(0,i.useContext)(Ti.eV),{isDivideMode:t}=(0,Dl.Oq)(),{itemCount:a}=(0,Dl.P2)(),r=a>1;return(0,k.Y)(i.Fragment,null,(r||t)&&(0,k.Y)(Z.A,{onClick:e.open},md()))}const Md="lightyear.record-metadata-review-disclaimer";function Hd(e){let{overlay:t,setShowReviewInstructions:a}=e;const[r,n]=i.useState();return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:wd()}),bd(),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(_a.A,{label:Sd(),checked:r,onChange:e=>{let{target:{checked:t}}=e;n(t),(0,od.setPreference)(Md,t)},name:"recordMetadataReviewDialogDoNotShowAgainCheckboxLabel"}),(0,k.Y)(Z.A,{onClick:()=>{a(!1),t.close()},emphasis:"high"},Id()))))}function Ld(e){let{finishRecordMetadataReviewOverlay:t}=e;const a=(0,_t.mb)(),[r,n]=i.useState(),{submitCaiReview:o}=(0,Dl.Ho)({onError:()=>{a({message:fd(),type:"error",dismissable:!0}),t.close()},setLoading:n});return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:kd()}),(0,k.Y)(O.x,{i18nKey:"GroupDataHeader.finishRecordMetadataReviewDialogBody",defaults:"You can go back to make changes, or click <0>Yes, Submit Review</0> to complete the Record Metadata Review for this image group. The records will be published and made searchable for users.",components:[(0,k.Y)("strong",null,"Yes, Submit Review")],values:{}}),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{disabled:r,onClick:()=>t.close(),emphasis:"low"},Ed()),(0,k.Y)(Z.A,{"data-testid":"finish-record-metadata-review-button",disabled:r,Icon:r&&g.A,onClick:o,emphasis:"high"},xd()))))}var zd=a(61321);function Vd(){const{isDivideMode:e}=(0,Dl.Oq)(),{itemCount:t,group:a,itemNumber:r,setGroupIndex:n}=(0,Dl.P2)(),{viewMode:o}=(0,Dl.an)(),{setQuery:s}=(0,G.A)({replaceState:!0}),{coverages:l=[]}=(0,Dl.zU)(),d=(0,ln.hV)(),c=null===a||void 0===a?void 0:a.siblingIdsWithChildren,u=t>1,h=e=>{if(c){const t=e?null===c||void 0===c?void 0:c[r]:null===c||void 0===c?void 0:c[r-2];s({groupId:null===t||void 0===t?void 0:t.parentId}),n(e?r:r-2),d(0,null,e?r:r-2)}};return(0,k.Y)(i.Fragment,null,(u||e)&&"single"===o&&(0,k.Y)(J.Ay,null,(0,k.Y)(Z.A,{"data-testid":"prev-group",Icon:pe.A,onClick:()=>h(!1),iconDirection:"backward",target:"_blank",disabled:0===(null===l||void 0===l?void 0:l.length)||1===r},gd()),(0,k.Y)(Z.A,{"data-testid":"next-group",Icon:pe.A,onClick:()=>h(!0),iconAtEnd:!0,iconDirection:"forward",target:"_blank",disabled:0===(null===l||void 0===l?void 0:l.length)||r===(null===c||void 0===c?void 0:c.length)},vd())))}function Bd(e){let{hideEditButton:t,onEditClick:a}=e;const{itemNumber:r,itemCount:n,group:{imageApids:o,internalFields:s},initialGroup:{imageApids:l,types:d}}=(0,Dl.P2)(),c=(0,$.Ay)(),u=null===l||void 0===l?void 0:l.length,h=null===s||void 0===s?void 0:s.apid,p=(0,i.useMemo)((()=>null!=h?(null===l||void 0===l?void 0:l.findIndex((e=>e===h)))+1:null),[h,l]),m=p+(null===o||void 0===o?void 0:o.length)-1,g=n>1,v=null===d||void 0===d?void 0:d.includes("VOLUME_SET");return(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H2,{size:"H4","data-heading":!0},dd(),v?(0,k.Y)(ae.A,{size:"xs"}):(0,k.Y)(ne.A,null,(0,k.Y)("span",{css:sd.infoButton},g?(0,k.Y)(i.Fragment,null,cd(r,n),(0,k.Y)(rn.A,{onClick:c.handleClick,title:pd(),"data-icon-button":!0},(0,k.Y)(Pi.A,{size:"xs"})),(0,k.Y)(Zr.A,(0,j.A)({},c,{title:(0,k.Y)("div",{css:sd.tooltipHeader},ud(r,n)),maxWidth:"300px"}),(0,k.Y)(te.A,{size:"sm"},hd(r,p,m,u)))):yd()))),!t&&(0,k.Y)(J.Ay,{alignY:"middle"},(0,k.Y)(le.A,null,(0,k.Y)(Z.A,{emphasis:"medium",onClick:a},ld()))))}function Gd(e){let{onEditClick:t}=e;const{query:a}=(0,G.A)(),{mode:r}=a,[n,o]=(0,i.useState)(),s=i.useRef(!1),l=(0,$.Ay)(),d=(0,$.Ay)(),c=(0,_t.mb)(),{group:{id:u}}=(0,Dl.P2)(),[p,{loading:m}]=(0,Yl._)(zd.A.recordMetadataReviewStatus(),{fetchPolicy:"no-cache"}),[g,v]=i.useState(),{resetCaiReview:y}=(0,Dl.Ho)({onError:()=>{c({message:fd(),type:"error",dismissable:!0})},onSuccess:()=>{window.location.assign(`${h.pc}/records/home/review`)},setLoading:v});return(0,i.useEffect)((()=>{"review"===r&&(async()=>{o(!await(0,od.getPreference)(Md))})()}),[r]),(0,i.useEffect)((()=>{!n||null!==s&&void 0!==s&&s.current||!l||l.isOpen&&l.transitioning||(l.open(),s.current=!0)}),[s,l,n]),(0,k.Y)(i.Fragment,null,(0,k.Y)(Hd,{overlay:l,setShowReviewInstructions:o}),(0,k.Y)(Ld,{finishRecordMetadataReviewOverlay:d}),(0,k.Y)(Z.A,{"data-testid":"back-to-cai-dashboard-button",disabled:g||m,Icon:pe.A,iconDirection:"backward",onClick:async()=>{var e,t;const a=await p({variables:{rmsId:u}});"In Progress"===(null===a||void 0===a||null===(e=a.data)||void 0===e||null===(t=e.recordMetadataReviewStatus)||void 0===t?void 0:t.status)?y():window.location.assign(`${h.pc}/records/home/review`)}},Td()),(0,k.Y)(re.H6,{size:"H5","data-heading":!0},Ad()),(0,k.Y)(re.H5,{supplementary:!0},Fd(),(0,k.Y)(ne.A,null,_d())),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(J.Ay,{alignY:"middle"},(0,k.Y)(le.A,null,(0,k.Y)(Z.A,{disabled:g,emphasis:"medium",onClick:t},Nd()))),(0,k.Y)(ae.A,null),(0,k.Y)(re.H5,{supplementary:!0},Od(),(0,k.Y)(ne.A,null,Pd())),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(J.Ay,{alignY:"middle"},(0,k.Y)(le.A,null,(0,k.Y)(Z.A,{disabled:g,emphasis:"medium",onClick:d.open},Rd()))),(0,k.Y)(ae.A,null))}function Ud(e){let{hideEditButton:t=!0,onEditClick:a}=e;const{initialGroup:{types:r},loading:n}=(0,Dl.P2)(),{showRecordMetadataReview:o}=(0,Dl.iB)(),s=(0,L.u)("lightyear_sharedImageViewer_showPrevAndNextItemButtons");if(n)return(0,k.Y)(Kd,null);const l=null===r||void 0===r?void 0:r.includes("VOLUME_SET");return(0,k.Y)(i.Fragment,null,(0,k.Y)(It.A,{sides:!0,top:!0,css:sd.header},(0,k.Y)(J.Ay,{wrap:!0,guttersY:"nano"},o?(0,k.Y)(Gd,{onEditClick:a}):(0,k.Y)(Bd,{hideEditButton:t,onEditClick:a})),!t&&!o&&!l&&(0,k.Y)(Dd,null),s.isOn&&!t&&!o&&!l&&(0,k.Y)(Vd,null)))}function Kd(){return(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(J.Ay,{gutters:"xxs"},(0,k.Y)(le.A,{growX:!0},(0,k.Y)(q.A.H5,{subheadingLineCount:1})),(0,k.Y)(le.A,null,(0,k.Y)(q.A.Button,{minWidth:"70px"}))),(0,k.Y)(ae.A,{size:"xxs"}))}var qd=a(45427);const jd=e=>o.i18n.t("GroupSelector.optionLabel","Volume {volumeNumber}",{volumeNumber:e});function $d(){const{groupIndex:e,initialGroup:{childGroups:t},setGroupIndex:a}=(0,Dl.P2)(),i=null===t||void 0===t?void 0:t.map(((e,t)=>({label:jd((t+1).toLocaleString()),value:String(t)})));return(0,k.Y)(qd.A,{hidePlaceholder:!0,onChange:e=>{let{target:{value:t}}=e;return a(Number(t))},options:i,value:String(e),name:"group-selector-button"})}var Wd=a(71499),Xd=a(62320),Qd=a(81683),Jd=a(75619),Zd=a(37655);const ec={nextItemText:()=>o.i18n.t("StatusAlreadySetView.nextItem","Next Item"),editingUnavailable:()=>o.i18n.t("ItemInProgressByAnotherUser.editingUnavailable","Editing Unavailable"),anotherUserSubtitle:()=>o.i18n.t("ItemInProgressByAnotherUser.subtitle","Another user is correcting this item."),taskNotAvailable:()=>o.i18n.t("metadatafooter.skipAndIsCorrectMessage","Task Not Available"),skipAndIsCorrectBody:e=>o.i18n.t("metadatafooter.skipAndIsCorrectBody","You only reserved the Correct Metadata task for Item {initialItemNumber}.",{count:e}),skipMessageHeader:e=>o.i18n.t("metadatafooter.skipMessageHeader","Skip Item {itemNumber}",{itemNumber:e}),skipMessageBody:()=>o.i18n.t("metadatafooter.skipMessageBody","The Correct Metadata task will be need to be completed later by you or another user. Other items can still be submitted."),errorMarkingItemMessage:()=>o.i18n.t("ImageOrganizeFooter.errorMarkingItem","Error marking metadata as correct"),itemSkipped:()=>o.i18n.t("StatusAlreadySetView.skippedTitle","Item skipped"),completedTitle:()=>o.i18n.t("StatusAlreadySetView.completedTitle","Metadata marked as correct"),resetStatusText:()=>o.i18n.t("StatusAlreadySetView.resetStatus","Reset status"),toMakeChanges:()=>o.i18n.t("StatusAlreadySetView.subtitle","to make changes")};var tc=a(44264),ac=a(8747);const ic=()=>o.i18n.t("ImageOrganizeFooter.dialogClose","Close"),rc=()=>o.i18n.t("ImageOrganizeFooter.dialogCorrectMetadata","Correct Metadata"),nc=()=>o.i18n.t("ImageOrganizeFooter.dialogCompletedHeading","Division complete"),oc=()=>o.i18n.t("ImageOrganizeFooter.exitDivideDialogMessage","Exit"),sc=()=>o.i18n.t("ImageOrganizeFooter.dialogStatusErrorHeading","Error retrieving division progress."),lc=()=>o.i18n.t("ImageOrganizeFooter.dialogUpdateErrorHeading","Error dividing image group."),dc=()=>o.i18n.t("ImageOrganizeFooter.noDivisionsDialog.title","No divisions were added"),cc=()=>o.i18n.t("ImageOrganizeFooter.noDivisionsDialog.body1","During this step, image groups can be divided into smaller subgroups of related images."),uc=()=>o.i18n.t("ImageOrganizeFooter.noDivisionsDialog.body2","If all thumbnails have been reviewed and this group does not need to be divided, please continue."),hc=()=>o.i18n.t("common-ui:cancel.action"),pc=()=>o.i18n.t("common-ui:continue.action"),mc=()=>o.i18n.t("common-ui:continue.reset","reset"),gc=()=>o.i18n.t("StatusAlreadySet.resetItemMessageHeader","Reset item's status"),vc=e=>o.i18n.t("StatusAlreadySet.resetMessageBody","Are you sure you want to reset this item's status? This item will no longer be {status}.",{status:e?"skipped":"marked correct"}),yc=e=>o.i18n.t("ImageOrganizeFooter.dialogLoadingMessage","{percentComplete}% complete",{percentComplete:e}),fc=e=>o.i18n.t("ImageOrganizeFooter.dialogCompletedMetadatContentText","The image group was successfully divided into {count} items. Would you like to correct the metadata for this group or exit the Image Organize tool?",{count:e}),bc=()=>o.i18n.t("ImageOrganizeFooter.dialogCompleteWithoutDivision","Would you like to correct the metadata for this group or exit the Image Organize tool?"),Ac=()=>o.i18n.t("ImageOrganizeFooter.dialogInProgressContent","Please wait while the images are divided into groups. This should only take a few moments."),wc=()=>o.i18n.t("ImageOrganizeFooter.dialogProgressHeading","Image group division in progress"),Tc=()=>o.i18n.t("ImageOrganizeFooter.updateErrorMessage","We were unable to submit your image group divisions. Please try again later."),Ic=()=>o.i18n.t("ImageOrganizeFooter.statusErrorMessage","We are unable to display progress updates as the image group is divided. Your changes have been saved, and we will continue processing the divisions you submitted. No further action is needed."),Sc=()=>o.i18n.t("CorrectMetadataFinishedDialog.summary","Summary"),Ec=e=>o.i18n.t("CorrectMetadataFinishedDialog.subHeading","Here's a summary of the {number} items in this group:",{number:e}),kc=()=>o.i18n.t("CorrectMetadataFinishedDialog.continueEditing","Continue Editing"),Cc=()=>o.i18n.t("CorrectMetadataFinishedDialog.finish","Finish"),xc=e=>o.i18n.t("CorrectMetadataFinishedDialog.numMarkedCorrectMultipleText","{number} items were marked correct.",{number:e}),Yc=()=>o.i18n.t("CorrectMetadataFinishedDialog.numMarkedCorrectSingleText","1 item was marked correct."),Nc=e=>o.i18n.t("CorrectMetadataFinishedDialog.SkippedMultipleItemsText","{number} items were skipped.",{number:e}),Rc=()=>o.i18n.t("CorrectMetadataFinishedDialog.onlySkippedSingleText","1 item was skipped."),Pc=e=>o.i18n.t("CorrectMetadataFinishedDialog.numRemainingMultipleText","{number} items still need to be reviewed.",{number:e}),Oc=()=>o.i18n.t("CorrectMetadataFinishedDialog.numRemainingSingleText","1 item still needs to be reviewed."),_c=()=>o.i18n.t("CorrectMetadataFinishedDialog.oneInProgressByOthersSingleText","1 item is in progress by another user."),Fc=e=>o.i18n.t("CorrectMetadataFinishedDialog.numInProgressByOthersSingleText","{number} items are in progress by other users.",{number:e}),Dc=()=>o.i18n.t("CorrectMetadataFinishedDialog.inProgressByOthersSubtext","You can still submit your changes."),Mc=()=>o.i18n.t("CorrectMetadataFinishedDialog.statusError","Error retrieving item statuses."),Hc=()=>o.i18n.t("CorrectMetadataFinishedDialog.finishError","Error returning skipped and unreviewed items.");var Lc=a(93422);const zc={name:"14riyws",styles:"margin-inline-end:-6px;"},{IN_PROGRESS:Vc,AVAILABLE:Bc,COMPLETED:Gc}=Qd.Oz;function Uc(e){let{overlay:t,doSaveNewDividers:a}=e;return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:dc()}),(0,k.Y)(te.A,{size:"sm"},cc()),(0,k.Y)(te.A,{size:"sm"},uc()),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{emphasis:"low",onClick:t.close},hc()),(0,k.Y)(Z.A,{emphasis:"high",onClick:a},pc()))))}function Kc(e){let{overlay:t,isDivideComplete:a,statusError:r,updateError:n,numItems:o=-1,percentComplete:s="0",parentGroup:l}=e;const{goBackToSearchResults:d}=(0,Dl.Oq)(),{initialGroup:c}=(0,Dl.P2)(),[u]=(0,Xd.n)(Zd.A.reserveAuditCoverages(),{context:{headers:{...Lc.A}}}),[h]=(0,Xd.n)(Zd.A.updateWorkflowActionStatus(),{context:{headers:{...Lc.A}}}),p=(0,i.useMemo)((()=>n?Tc():r?Ic():null),[r,n]),m=(0,i.useMemo)((()=>a&&!p?nc():n?lc():r?sc():wc()),[a,p,n,r]),v=!a&&!p;(0,i.useEffect)((()=>{100===parseInt(s,10)&&u({variables:{parentGroupId:l.id}})}),[s,l,u]);const y=(0,i.useCallback)((()=>(0,k.Y)(te.A,null,1===o?bc():fc(o))),[o]);return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:m,closeOnClickAway:!1,nonClosable:!0}),(0,k.Y)("div",null,v&&(0,k.Y)(i.Fragment,null,Ac(),(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)(J.Ay,null,(0,k.Y)("div",{css:zc},(0,k.Y)(g.A,null)),yc(s||"0"))),a&&!p&&(0,k.Y)(y,null),p&&p),(0,k.Y)(et.Ay,null,(a||r)&&(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{onClick:()=>d(l.Id)},oc()),a&&(0,k.Y)(Z.A,{emphasis:"high",onClick:function(){const e=c.imageApids||[],t=(null===e||void 0===e?void 0:e.length)>0?(0,na.XJ)(e[0]):null,{origin:a,pathname:i}=window.location;let r=`${a}${i}`;t&&(r=`${r.substring(0,r.lastIndexOf("/"))}/${t}`);const n=null===l||void 0===l?void 0:l.currentWorkflowActions.find((e=>"AuditCoverages"===e.name));h({variables:{params:{action:"AuditCoverages",newStatus:"In Progress",rmsId:l.id,createNewWorkflowAction:!n}}}),window.location.href=`${r}?view=organize&mode=${Qd.ig.METADATA_ALL}`}},rc())),n&&!(a||r)&&(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{onClick:t.close},ic()))))}function qc(e){let{overlay:t,onResetClick:a}=e;const{initialGroup:r,groupIndex:n}=(0,Dl.P2)(),{getSkippedStatus:o}=(0,Dl.Lw)(),s=(0,i.useMemo)((()=>{var e,t;return null!==(e=null===r||void 0===r||null===(t=r.childGroups)||void 0===t?void 0:t[n])&&void 0!==e?e:r}),[r,n]),l=(0,i.useMemo)((()=>!!s.id&&o(s.id)),[s,o]);return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:gc()}),(0,k.Y)(te.A,{size:"sm"},vc(l)),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{onClick:t.handleClick},hc()),(0,k.Y)(at.A,{onClick:function(){t.handleClick(),a()}},mc()))))}function jc(e){let{overlay:t}=e;const{cisId:a}=(0,Wd.useUser)(),r=(0,_t.mb)(),{initialGroup:n,initialChildId:o,itemCount:s}=(0,Dl.P2)(),{goBackToSearchResults:l}=(0,Dl.Oq)(),{getSkippedStatus:d}=(0,Dl.Lw)(),[c]=(0,Yl._)(Jd.A.imageOrganizeStatusList(),{fetchPolicy:"no-cache",context:{headers:{...Lc.A}}}),[u]=(0,Xd.n)(Zd.A.updateWorkflowActionStatusList(),{context:{headers:{...Lc.A}}}),[h,p]=(0,i.useState)(!1),[m,v]=(0,i.useState)(),y=(0,i.useRef)(!1);(0,i.useEffect)((()=>{h||!t.isOpen||y.current||async function(){var e,t,a;p(!0);const i=(null===n||void 0===n||null===(e=n.childGroups)||void 0===e?void 0:e.length)>0?n.childGroups.map((e=>e.id)):[o],s=await c({variables:{rmsIdList:i}});y.current=!0,null!==s&&void 0!==s&&s.error&&r({message:Mc(),type:"error"}),p(!1),v(null!==(t=null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.imageOrganizeStatusList)&&void 0!==t?t:[])}()}),[c,o,n,r,h,m,t]);const f=(0,i.useMemo)((()=>h||!Array.isArray(m)?[]:m),[h,m]),b=(0,i.useMemo)((()=>{let e=0;return f.forEach((t=>{let{correctMetadata:a}=t;(null===a||void 0===a?void 0:a.status)===Gc&&e++})),e}),[f]),A=(0,i.useMemo)((()=>{let e=0;return f.forEach((t=>{let{correctMetadata:i,id:r}=t;const{status:n,userId:o}=i;(n===Bc||n===Vc&&o===a)&&d(r)&&e++})),e}),[f,a,d]),w=(0,i.useMemo)((()=>{let e=0;return f.forEach((t=>{let{correctMetadata:i,id:r}=t;const{status:n,userId:o}=i;(n===Bc||n===Vc&&o===a)&&!d(r)&&e++})),e}),[f,a,d]),T=(0,i.useMemo)((()=>f.map((e=>{let{correctMetadata:t,id:i}=e;const{status:r}=t;return r===Bc||r===Vc&&t.userId===a?i:null})).filter(Boolean)),[a,f]),I=(0,i.useMemo)((()=>{let e=0;return f.forEach((t=>{let{correctMetadata:i}=t;const{status:r,userId:n}=i;(r===Bc||r===Vc&&n===a)&&(r===Vc&&n!==a)&&e++})),e}),[a,f]),S=(0,i.useCallback)((async()=>{const e=T.map((e=>({rmsId:e,newStatus:Bc,action:"AuditCoverages"})));if(e.length){if((await u({variables:{actionStatusList:e}})).error)return void r({message:Hc(),type:"error"})}l(null,null===n||void 0===n?void 0:n.naturalGroupId)}),[l,T,n,r,u]),E=(0,i.useCallback)((()=>{if(h)return(0,k.Y)(Da.A,{startElement:(0,k.Y)(g.A,null)});const e=["correct","skipped","remaining","inProgress"];return e.map((t=>{const a=[b,A,w,I],i=[Yc(),Rc(),Oc(),_c()],r=[xc(b),Nc(A),Pc(w),Fc(I)],n=[vn.A,tc.A,ac.A,Fr.A],o=e.indexOf(t);if(-1===o||0===(null===a||void 0===a?void 0:a[o]))return null;const s=a[o]>1?r[o]:i[o];return(0,k.Y)(Da.A,{dense:!0,key:t,startElement:(0,k.Y)(Da.A.Icon,{Icon:n[o]}),primaryText:s,secondaryText:3===o?Dc():null})}))}),[b,I,w,A,h]);return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:Sc()}),Ec(s),(0,k.Y)(Bn.A,null,(0,k.Y)(i.Fragment,null,(0,k.Y)(E,null))),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(te.A,null,(0,k.Y)(O.x,{i18nKey:"CorrectMetadataFinishedDialog.workSummaryMessage",defaults:"You can continue making changes, or click <strong>Finish</strong> to return skipped and unreviewed items. Corrected items were submitted when you marked the metadata correct."})),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{onClick:t.close},kc()),(0,k.Y)(Z.A,{emphasis:"high",onClick:S,disabled:h},Cc()))))}function $c(e){let{disabled:t,onNextItemClick:a}=e;return(0,k.Y)(J.Ay,{alignY:"middle",guttersY:"none"},(0,k.Y)(le.A,{growX:!0},(0,k.Y)(re.H6,null,ec.editingUnavailable(),(0,k.Y)(ne.A,null,ec.anotherUserSubtitle()))),(0,k.Y)(Z.A,{disabled:t,onClick:a},ec.nextItemText()))}function Wc(e){let{disabled:t,onNextItemClick:a,currentGroupStatus:r,onResetClick:n}=e;const o=(0,$.Ay)(),s=(0,k.Y)(i.Fragment,null,(0,k.Y)((()=>(0,k.Y)(rn.A,{disabled:t,onClick:o.handleClick},ec.resetStatusText())),null)," ",ec.toMakeChanges()),l=r===Qd.Oz.COMPLETED?ec.completedTitle():ec.itemSkipped();return(0,k.Y)(i.Fragment,null,(0,k.Y)(J.Ay,{alignY:"middle",guttersY:"none"},(0,k.Y)(le.A,{growX:!0},(0,k.Y)(re.H6,null,l,(0,k.Y)(ne.A,null,s)))),(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(J.Ay,{alignX:"end",guttersY:"none"},(0,k.Y)(Z.A,{disabled:t,onClick:a,noShrinkX:!0,emphasis:"medium"},ec.nextItemText()),(0,k.Y)(qc,{overlay:o,onResetClick:n})))}function Xc(e){let{onClick:t,emphasis:a="high",disabled:i,buttonText:r,label:n=ec.taskNotAvailable(),description:o=ec.skipAndIsCorrectBody()}=e;return(0,k.Y)(Hs.A,{target:(0,k.Y)(Z.A,{emphasis:a,disabled:i,onClick:t},r),label:n,description:o})}function Qc(){const{isDivideMode:e,isMetadataAllMode:t,isMetadataSingleMode:a}=(0,Dl.Oq)();return(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"xxl"}),(0,k.Y)(It.A,{sides:!0},(0,k.Y)("div",{css:Ml.infoSheetFooter},e&&(0,k.Y)(Jc,null),(t||a)&&(0,k.Y)(Zc,{isMetadataSingleMode:a}))))}function Jc(){var e,t;const a=(0,$.Ay)(),r=(0,$.Ay)(),{dividerOffsets:n,dividersAltered:o}=(0,Dl.Lw)(),{initialGroup:s,group:l}=(0,Dl.P2)(),[d,{data:c,error:u}]=(0,Xd.n)(Zd.A.updateNaturalGroups(),{context:{headers:{...Lc.A}}}),[h]=(0,Xd.n)(Zd.A.updateWorkflowActionStatus(),{context:{headers:{...Lc.A}}}),[p,{data:m,error:g,stopPolling:v}]=(0,Yl._)(Jd.A.naturalGroupAsyncStatus(),{pollInterval:1e3,context:{headers:{...Lc.A}}}),[y,f]=(0,i.useState)(!1),[b,A]=(0,i.useState)(-1),[w,T]=(0,i.useState)(!1),I=(null===n||void 0===n?void 0:n.length)>1,S=(0,i.useCallback)((()=>{const e=function(e,t){if(Array.isArray(e)&&Array.isArray(t)){const a=[];for(let i=0;i<e.length;i++){const r=e[i],n=e[i+1]||t.length,o=t.slice(r,n);a.push({ids:o})}return a}return null}(n,null===s||void 0===s?void 0:s.imageApids);I||async function(){const e=await h({variables:{params:{action:"AuditBoundaries",newStatus:"Completed",rmsId:l.id}}});parseInt(e.data.updateWorkflowActionStatus.code,10)>299&&T(!0),f(!0)}(),o?d({variables:{parentGroupId:null===s||void 0===s?void 0:s.id,newNaturalGroups:e}}):f(!0),A((null===e||void 0===e?void 0:e.length)||-1),a.handleClick()}),[n,s,I,h,l,a,d,o]),E=(0,i.useCallback)((()=>{I?S():r.open()}),[S,I,r]);return(0,i.useEffect)((()=>{var e;const t=null===c||void 0===c?void 0:c.updateNaturalGroups;g&&v(),1===(null===m||void 0===m||null===(e=m.naturalGroupAsyncStatus)||void 0===e?void 0:e.percentComplete)&&(f(!0),v()),t&&!y&&p({variables:{location:t}})}),[g,v,m,p,y,c]),(0,k.Y)(i.Fragment,null,(0,k.Y)(J.Ay,{guttersY:"none",alignX:"end"},(0,k.Y)(Z.A,{emphasis:"high",disabled:!(null!==s&&void 0!==s&&s.imageApids),onClick:E},Ul())),(0,k.Y)(Kc,{overlay:a,isDivideComplete:y,statusError:g,updateError:u||w,numItems:b,percentComplete:(100*(null!==(e=null===m||void 0===m||null===(t=m.naturalGroupAsyncStatus)||void 0===t?void 0:t.percentComplete)&&void 0!==e?e:0)).toFixed(0),parentGroup:s}),!I&&(0,k.Y)(Uc,{overlay:r,doSaveNewDividers:S}))}function Zc(e){var t;let{isMetadataSingleMode:a}=e;const{query:r,setQuery:n}=(0,G.A)(),{cisId:o}=(0,Wd.useUser)(),{finishedCorrectingMetadataOverlay:s}=(0,i.useContext)(Ti.eV),{initialGroup:l,initialChildId:d,setGroupIndex:c,groupIndex:u,loading:h,itemNumber:p,itemCount:m}=(0,Dl.P2)(),{updateMetadataWorkflowStatus:g,loading:v,setSkippedStatus:y,getSkippedStatus:f}=(0,Dl.Lw)(),[b,{data:A,loading:w}]=(0,Yl._)(Jd.A.imageOrganizeStatus()),T=(0,ln.hV)(),I=(0,_t.mb)(),[S,E]=(0,i.useState)(null),C=(0,i.useMemo)((()=>{var e,t;return null!==(e=null===l||void 0===l||null===(t=l.childGroups)||void 0===t?void 0:t[u])&&void 0!==e?e:l}),[l,u]),x=(0,i.useCallback)((async()=>{w||(await b({variables:{rmsId:C.id}}),E(C.id))}),[w,b,C]);(0,i.useEffect)((()=>{null!==C&&void 0!==C&&C.id&&C.id!==S&&x()}),[C,S,x]);const Y=a||u===(null===l||void 0===l||null===(t=l.childGroups)||void 0===t?void 0:t.length)-1||m===p,N=(0,i.useCallback)((()=>{if(Y)s.open();else{const e=u+1;c(e);const t=null===l||void 0===l?void 0:l.childGroups[p].id;t&&n({...r,groupId:t}),T(0,null,e)}}),[l,c,s,r,n,Y,u,p,T]),R=(0,i.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=await g(null===C||void 0===C?void 0:C.id,e);i&&a?N():!i&&t&&I({message:t,dismissable:!0,type:"error"})}),[N,I,g,C]),P=(0,i.useCallback)((()=>R(Qd.Oz.COMPLETED,ec.errorMarkingItemMessage())),[R]),O=(0,i.useCallback)((async()=>{await R(Qd.Oz.IN_PROGRESS,"",!1),y(C.id,!1),b({variables:{rmsId:null===C||void 0===C?void 0:C.id}})}),[C,b,R,y]),_=(0,i.useCallback)((()=>{y(C.id,!0),N()}),[y,C,N]),F=v||h||a&&(null===C||void 0===C?void 0:C.id)!==d,D=(0,i.useMemo)((()=>{var e,t;return null===A||void 0===A||null===(e=A.imageOrganizeStatus)||void 0===e||null===(t=e.correctMetadata)||void 0===t?void 0:t.status}),[A]),M=(0,i.useMemo)((()=>{var e,t;return D===Qd.Oz.IN_PROGRESS&&(null===A||void 0===A||null===(e=A.imageOrganizeStatus)||void 0===e||null===(t=e.correctMetadata)||void 0===t?void 0:t.userId)!==o}),[o,D,A]),H=!M&&Boolean(D)&&D!==Qd.Oz.IN_PROGRESS&&D!==Qd.Oz.AVAILABLE||f(C.id),L=(0,i.useCallback)((()=>!H&&!M?F?(0,k.Y)(J.Ay,{guttersY:"none",alignX:"end"},(0,k.Y)(Xc,{emphasis:"low",disabled:!0,onClick:_,buttonText:ql()}),(0,k.Y)(Xc,{disabled:!0,onClick:P,buttonText:Kl()})):(0,k.Y)(J.Ay,{guttersY:"none",alignX:"end"},(0,k.Y)(Xc,{onClick:_,emphasis:"low",buttonText:ql(),label:ec.skipMessageHeader(),description:ec.skipMessageBody()}),(0,k.Y)(Z.A,{emphasis:"high",onClick:P},Kl())):null),[F,_,M,H,P]);return w||!C?(0,k.Y)(q.A.Button,{minWidth:330}):(0,k.Y)(i.Fragment,null,H&&(0,k.Y)(Wc,{disabled:F,onResetClick:O,onNextItemClick:N,currentGroupStatus:D}),M&&(0,k.Y)($c,{disabled:F,onNextItemClick:N}),(0,k.Y)(L,null),(0,k.Y)(jc,{overlay:s}))}function eu(e){let{onEditClick:t,hideEditButton:a=!1}=e;const[r]=(0,P.B)(),{itemNumber:n,itemCount:o,loading:s,initialGroup:l,initialChildId:d,groupIndex:c}=(0,Dl.P2)(),{isMetadataSingleMode:u,isMetadataAllMode:h,isDivideMode:p}=(0,Dl.Oq)(),[m]=(0,i.useState)(n),{cisId:g}=(0,Wd.useUser)(),v=(0,i.useMemo)((()=>{var e,t;return null!==(e=null===l||void 0===l||null===(t=l.childGroups)||void 0===t?void 0:t[c])&&void 0!==e?e:l}),[l,c]),{getSkippedStatus:y,dividerOffsets:f}=(0,Dl.Lw)(),b=(0,i.useMemo)((()=>y(null===v||void 0===v?void 0:v.id)),[v,y]),A=p?(null===f||void 0===f?void 0:f.length)>1:o>1,[w,{data:T}]=(0,Yl._)(Jd.A.imageOrganizeStatus());(0,i.useEffect)((()=>{null!==v&&void 0!==v&&v.id&&w({variables:{rmsId:v.id}})}),[v,w]);const I=(0,i.useMemo)((()=>{var e,t;return null===T||void 0===T||null===(e=T.imageOrganizeStatus)||void 0===e||null===(t=e.correctMetadata)||void 0===t?void 0:t.status}),[T]),S=u&&(null===v||void 0===v?void 0:v.id)!==d||"Completed"===I||"Skipped"===I||!0===b,E={edit:r("ImageOrganizeHeader.edit","Edit"),heading:r("ImageOrganizeHeader.heading","Item {itemNumber}",{itemNumber:n}),subHeading:r("ImageOrganizeHeader.subHeading","Metadata describing Item {itemNumber} of {itemCount}",{itemNumber:n,itemCount:p?null===f||void 0===f?void 0:f.length:o}),viewAnotherItem:r("ImageOrganizeHeader.viewAnotherItem","View Another Item"),editDisabledHeader:r("ImageOrganizeHeader.editDisabledHeader","Task Not Available"),editDisabledBody:r("ImageOrganizeHeader.editDisabledBoydy","You only reserved the Correct Metadata task for Item {initialItemNumber}.",{initialItemNumber:m}),resetCorrectMessage:r("ImageOrganize.resetItemCorrectStatusMessage","This item is marked correct. To enable editing, reset the status in the bottom-right corner of the screen."),resetSkipMessage:r("ImageOrganize.resetItemSkipStatusMessage","You skipped this item. To enable editing, reset the status in the bottom-right corner of the screen."),editingNotAvavilable:r("ImageOrgainize.resetToEdit","Reset Status to Edit"),taskNotAvailable:r("ImageOrganise.taskNotAvailable","Task Not Available"),wholeGroup:r("ImageOrganizeHeader.wholeGroup","Metadata describing the entire group of images")},C=(0,i.useMemo)((()=>u&&(null===v||void 0===v?void 0:v.id)!==d?E.editDisabledBody:b?E.resetSkipMessage:"Completed"===I?E.resetCorrectMessage:E.resetSkipMessage),[I,d,u,b,E.editDisabledBody,E.resetCorrectMessage,E.resetSkipMessage,v]),x=(0,i.useMemo)((()=>u&&(null===v||void 0===v?void 0:v.id)!==d?E.taskNotAvailable:E.editingNotAvavilable),[v,d,u,E.editingNotAvavilable,E.taskNotAvailable]),Y=(0,i.useMemo)((()=>{var e,t;return"In Progress"===I&&(null===T||void 0===T||null===(e=T.imageOrganizeStatus)||void 0===e||null===(t=e.correctMetadata)||void 0===t?void 0:t.userId)!==g}),[g,I,T]);return(0,k.Y)(Q.Ay,{color:W.A.gray02},s?(0,k.Y)(tu,null):(0,k.Y)(i.Fragment,null,(0,k.Y)(J.Ay,{gutters:"xxs"},(0,k.Y)(le.A,{growX:!0},(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(re.H5,{supplementary:!0},E.heading,(0,k.Y)(ne.A,null,A?E.subHeading:E.wholeGroup)),(0,k.Y)(Dd,null)),(u||h)&&!a&&!Y&&(0,k.Y)(le.A,{noShrinkX:!0},(0,k.Y)(ae.A,{size:"xxs"}),S&&(0,k.Y)(Hs.A,{target:(0,k.Y)(Z.A,{emphasis:"medium",onClick:t,disabled:!0},E.edit),label:x,description:C}),!S&&(0,k.Y)(Z.A,{emphasis:"medium",onClick:t},E.edit)))))}function tu(){return(0,k.Y)("div",{style:{padding:"8px"}},(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(J.Ay,{gutters:"xxs"},(0,k.Y)(le.A,{growX:!0},(0,k.Y)(q.A.H5,{subheadingLineCount:1}),(0,k.Y)(q.A.Button,null)),(0,k.Y)(le.A,null,(0,k.Y)(q.A.Button,null))),(0,k.Y)(ae.A,{size:"xxs"}))}const au={chipsWrapper:{name:"18mudl3",styles:"margin-top:-8px;"},selectorWrapper:{name:"1y7kftt",styles:"margin:6px 0px;"}},iu=()=>o.i18n.t("LanguagePicker.auotsuggestFieldPlaceholder","Add a language");function ru(e){let{languageOptions:t=[],selectedCodes:a=[],label:r="",onChange:n=()=>{},error:o}=e;if(!Array.isArray(t)||!Array.isArray(a))throw new Error('languageOptions and selectedCodes must be type "Array"');if("function"!==typeof n)throw new Error('onChange must be type "function');const[s,l]=(0,i.useState)((()=>"")),d=(0,i.useCallback)((e=>{var a;return{label:(null===t||void 0===t||null===(a=t.find((t=>t.code===e)))||void 0===a?void 0:a.language)||e,value:e}}),[t]),c=[];a&&a.forEach((e=>{c.push(d(e))}));const u=(0,hn.Ay)(c),h=[];t&&t.forEach((e=>{h.push({key:e.id,primaryText:e.language,secondaryText:e.code})}));const p=(0,i.useCallback)((e=>{if(e){const t=[...a];t.push(e.secondaryText),n(t),l(""),u.addChip(d(e.secondaryText))}}),[u,d,n,a]),m=(0,i.useCallback)((e=>{const t=(null===a||void 0===a?void 0:a.filter((t=>t!==e.value)))||a;n(t)}),[n,a]);function g(e,t){let a=e,i=t;e.length<t.length&&(a=t,i=e);const r=a.length;return 0===r?1:(r-function(e,t){e=e.toLowerCase(),t=t.toLowerCase();const a=[];for(let i=0;i<=e.length;i++){let r=i;for(let n=0;n<=t.length;n++)if(0===i)a[n]=n;else if(n>0){let o=a[n-1];e.charAt(i-1)!==t.charAt(n-1)&&(o=Math.min(Math.min(o,r),a[n])+1),a[n-1]=r,r=o}i>0&&(a[t.length]=r)}return a[t.length]}(a,i))/parseFloat(r)}return(0,k.Y)(i.Fragment,null,(0,k.Y)("div",{css:au.selectorWrapper},(0,k.Y)(te.A,{size:"xs"},r),(0,k.Y)(de.Ay,{placeholder:iu(),inputText:s,suggestions:h,onInputTextChange:l,onSuggestionSelected:p,errorMessage:o&&(0,k.Y)("div",null,"This field did not save correctly."),sortFunction:function(e,t,a){const i=function(e,t,a){const i=(t,a)=>{var i,r;return(null===(i=t.primaryText)||void 0===i?void 0:i.substring(0,e.length).toLowerCase())===e.toLowerCase()&&(null===(r=a.primaryText)||void 0===r?void 0:r.substring(0,e.length).toLowerCase())!==e.toLowerCase()};return i(t,a)?-1:i(a,t)?1:null}(e,t,a);if(i)return i;const r=g(e,t.primaryText.toLowerCase()),n=g(e,a.primaryText.toLowerCase());return r===n?t.primaryText.localeCompare(t.primaryText):r>n?-1:1}}),(0,k.Y)("div",{css:au.chipsWrapper},(0,k.Y)(mn.g,{chipCollection:u,onDismiss:e=>m(e)}))))}var nu=a(36920);function ou(e){let{overline:t="",items:a=[],hyperlinks:r=[],hasMoreLess:n=!0,smallText:s=!1,rightElement:l=null,glossaryDescription:d="",commaSeparated:c=!1}=e;const u=function(e,t){var a;const r=new Intl.ListFormat(o.i18n.language,{style:"short",type:"unit"}),n=null!==(a=null===e||void 0===e?void 0:e.filter((e=>!!e)))&&void 0!==a?a:[];return 0===n.length?null:t?(0,k.Y)(i.Fragment,null,r.format(n)):n.map((e=>(0,k.Y)("div",{key:e},e)))}(Array.isArray(a)?a:[a],c),h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=null===e||void 0===e?void 0:e.filter(Boolean);return(null===t||void 0===t?void 0:t.length)<1?null:(0,k.Y)(i.Fragment,null,t.map((e=>(0,k.Y)("div",{key:e.text+e.to},(0,k.Y)(M.Ay,{target:"_blank",external:!0,to:e.skipEncode?e.to:encodeURI(e.to.replace("&","%26"))},e.text)))))}(r);let p="-";return u?p=n?(0,k.Y)(nu.A,{collapsedLineCount:3},u):(0,k.Y)(i.Fragment,null,u):h&&(p=h),(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(te.A,{secondary:!0,dense:!0,size:"xs"},d?(0,k.Y)(nd,{overline:t,description:d}):t),(0,k.Y)(Da.A,{primaryText:s?"":p,secondaryText:s?p:"",endElement:l,dense:!0}))}const su={button:(0,k.Y)(q.A.Button,{maxWidth:"75%"}),expander:(0,k.Y)("div",{css:{name:"f4xy8x",styles:"display:flex;justify-content:space-between;p{width:100%;}"},"data-testid":"skeleton-expander"},(0,k.Y)(q.A.Paragraph,{maxWidth:"75%",size:"md"}),(0,k.Y)(q.A.Image,{height:20,width:20})),heading:(0,k.Y)(q.A.H5,{subheadingLineCount:1}),body:(0,k.Y)(q.A.Paragraph,{size:"md"})};function lu(e){let{loading:t,children:a}=e;return(0,k.Y)(Lt.A.Provider,{loading:t},(0,k.Y)(Lt.A.Loading,null,i.Children.map(a,(e=>{var t;return null==e?null:null!==e&&void 0!==e&&null!==(t=e.props)&&void 0!==t&&t.skeletontype?su[e.props.skeletontype]:(0,k.Y)(i.Fragment,null,(0,k.Y)(q.A.Paragraph,{maxWidth:"50%",size:"xs"}),(0,k.Y)(q.A.Paragraph,{size:"sm"}))}))),(0,k.Y)(Lt.A.Ready,null,a))}var du=a(46738);function cu(){const[e]=(0,_.r)("recordsGetFeedbackEx"),{query:t}=(0,G.A)({replaceState:!0});let a;return a="index"===t.view?"//w.usabilla.com/bb7f49bb22c9.js":"fullText"===t.view?"//w.usabilla.com/44df9f18d43c.js":"//w.usabilla.com/45c3add7853e.js",e?(0,k.Y)(du.Ay,{url:a,hideOnMobile:!0,mobileBreakpoint:"md"}):null}var uu=a(974),hu=a(73925);const pu=()=>o.i18n.t("VolumeSetMetadata.ancestralHall","Ancestral Hall"),mu=()=>o.i18n.t("VolumeSetMetadata.author","Author"),gu=()=>o.i18n.t("VolumeSetMetadata.clan","Clan"),vu=()=>o.i18n.t("VolumeSetMetadata.clanBranches","Clan Branches"),yu=()=>o.i18n.t("VolumeSetMetadata.firstAncestor","First Ancestor"),fu=()=>o.i18n.t("VolumeSetMetadata.generationPoem","Generation Poem"),bu=()=>o.i18n.t("VolumeSetMetadata.jiapuHeading","Jiapu Information"),Au=()=>o.i18n.t("VolumeSetMetadata.jokboHeading","Jokbo Information"),wu=()=>o.i18n.t("VolumeSetMetadata.keizuHeading","Keizu Information"),Tu=()=>o.i18n.t("VolumeSetMetadata.migrantAncestor","Migrant Ancestor"),Iu=()=>o.i18n.t("VolumeSetMetadata.notes","Notes"),Su=e=>o.i18n.t("VolumeSetMetadata.subHeading","Information about all {volumeCount} volumes",{volumeCount:e}),Eu=()=>o.i18n.t("VolumeSetMetadata.surnames","Surnames"),ku=()=>o.i18n.t("VolumeSetMetadata.title","Title"),Cu=e=>o.i18n.t("VolumeSetMetadata.toast","If you do not see the {volumeSetSearch} you are looking for, you may need to look through the images using the View Information drop-down list to find the correct {volumeSetSearch}.",{volumeSetSearch:e}),xu=()=>o.i18n.t("VolumeSetMetadata.volumes","Volumes"),Yu="chinese.myJiapu",Nu=(0,k.AH)("color:",W.A.transparent.gray80,";font-size:12px;line-height:20px;padding:4px inherit;text-transform:uppercase;");function Ru(e){let{groupId:t,metadata:a}=e;const r=(0,L.u)("chinese_sharedImageViewer_clanBranch"),n=(0,L.u)("chinese_sharedImageViewer_clanBranchMultipleValues"),{query:{volumeSetSearch:s}}=(0,G.A)(),l=(0,je.vl)(),d=(0,hu.A)(),[c,u]=(0,i.useState)([]),[h,p]=(0,i.useState)(!1),m=(0,_t.mb)();(0,i.useEffect)((()=>{l({type:"SET_SHOW_ITEM_BREADCRUMBS",value:!1}),l({type:"SET_MOVE_GROUP_SELECTOR_TO_TOP",value:!0})}),[l]),(0,i.useEffect)((()=>{["jiapu","jokbo","keizu"].includes(s)&&m({dismissable:!0,Icon:uu.A,message:Cu(o.i18n.t(`VolumeSetMetadata.${s}`,s))})}),[m,s]),(0,i.useEffect)((()=>{"jiapu"===s&&(0,od.getPreference)(Yu).then((e=>{Array.isArray(e)&&u(e)}))}),[t,s]);const g={jiapu:bu(),jokbo:Au(),keizu:wu()};return(0,k.Y)(i.Fragment,null,"jiapu"===s&&(0,k.Y)(Q.Ay,{alignY:"middle",color:"#f6f6f6",minHeight:80},(0,k.Y)(_a.A,{checked:c.includes(t),label:o.i18n.t("VolumeSetMetadata.checkbox.thisIsMyJiapu","This is my jiapu"),name:"myJiapuCheckbox",onChange:function(e){let{target:{checked:a}}=e;(0,vi._q)({name:`Checkbox:My volumeSet:Toggle-${t}`});const i=[...c];a?i.push(t):i.splice(i.indexOf(t),1),(0,od.setPreference)(Yu,i),u(i)}})),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(re.H5,{supplementary:!0},g[s],(0,k.Y)(ne.A,null,Su(null===a||void 0===a?void 0:a.volumeCount.toLocaleString()))),(0,k.Y)(ae.A,{size:"xs"}),a&&(0,k.Y)(Bn.A,null,(0,k.Y)(ou,{items:[a.title],overline:ku()}),(0,k.Y)(ou,{items:[a.surnames],overline:Eu()}),"jokbo"===s&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ou,{items:[a.clan],overline:gu()}),r.isOn&&(0,k.Y)(ou,{items:n.isOn?a.clanBranches:[a.clanBranch],overline:vu()})),(0,k.Y)(ou,{items:[a.volumeCount],overline:xu()}),(0,k.Y)(ou,{items:[a.firstAncestor],overline:yu()}),(0,k.Y)(ou,{items:[a.migrantAncestor],overline:Tu()}),"jiapu"===s&&(0,k.Y)(ou,{items:[a.ancestralHall],overline:pu()}),(0,k.Y)(ou,{items:a.authors,overline:mu()}),(0,k.Y)("span",{css:Nu},Iu()),a.notes.length>3?(0,k.Y)(i.Fragment,null,!h&&a.notes.slice(0,3).map((e=>(0,k.Y)("div",{key:e},e))),(0,k.Y)(Ne.A,{ariaControlsId:d,open:h,setOpen:p},(0,k.Y)(Pe.A,null,h&&a.notes.map((e=>(0,k.Y)("div",{key:e},e)))),(0,k.Y)(rn.A,{"aria-controls":d,onClick:()=>p(!h)},h?o.i18n.t("common-ui:show-less.info.abbr"):o.i18n.t("common-ui:show-more.info.abbr")))):a.notes.map((e=>(0,k.Y)("div",{key:e},e))),"jiapu"===s&&(0,k.Y)(ou,{items:[a.generationPoem],overline:fu()})))}var Pu=a(77654),Ou=a(41266);const _u={getPercentRecordTypesTrue(e){if(Array.isArray(e)){return e.filter((e=>!0===e.recordTypeChecked)).length/e.length}return 0}};var Fu=a(27888),Du=a(51350),Mu=a(27292);const Hu={metaText:{name:"1s0eu4l",styles:"max-width:125px;"},placeCheckboxText:e=>(0,k.AH)("color:",e?W.A.blue60:"",";margin-inline-start:-6px;"),singleIndent:{name:"yk7qct",styles:"padding-inline-start:36px;"},colorButton:(0,k.AH)("& button{color:",W.A.blue60,";}& button:hover{background-color:",W.A.blue03," !important;}"),adjustIcon:{name:"1cc6u9r",styles:"span{position:relative;top:4px;}"}},Lu={applyToAllVolumes:()=>o.i18n.t("EditableCoverage.toggle.applyToAllVolumes","Apply to all volumes"),placeHelpText:()=>o.i18n.t("EditableCoverages.placeHelperText","This place applies to all the record types and dates below."),recordType:()=>o.i18n.t("EditableCoverage.recordType","Record Type"),learnMore:o.i18n.t("common-ui:learn-more.action"),recordNotStandardized:()=>o.i18n.t("EditableCoverage.recordNotStandardized","This place is not standardized. You can still save your changes."),placeAll:()=>o.i18n.t("EditableCoverages.placeAll","Place")},zu={name:"1cf796q",styles:"div[class^='groupedMenuCss']{min-width:320px;}"};function Vu(e){let{errorMessage:t,forVolumeSet:a,placeId:r,recordType:n,disabled:s,allRecordTypes:l=[]}=e;const[d,c]=(0,i.useState)(n.name||""),{setRecordType:u}=(0,Dl.zU)({forVolumeSet:a}),h=(null===l||void 0===l?void 0:l.length)>0?null===l||void 0===l?void 0:l.map((e=>({key:e.id,primaryText:e.name}))):[],p=(0,i.useCallback)((e=>{e&&u(r,n.id,{name:e.primaryText,id:Number(e.key)})}),[r,n,u]);return(0,k.Y)(i.Fragment,null,(0,k.Y)(k.mL,{styles:zu}),(0,k.Y)(de.Ay,{suggestions:h,label:o.i18n.t("coverage.recordTypeLabel","Record Type"),onSuggestionSelected:p,onInputTextChange:e=>c(e),inputText:d,initialSelectedItem:{primaryText:n.name},virtualize:!0,sortFunction:(e,t,a)=>{let{primaryText:i}=t,{primaryText:r}=a,n=0;return e&&i&&r&&(e.toLowerCase()===i.toLowerCase()?n=-1:e.toLowerCase()===r.toLowerCase()?n=1:i.toLowerCase()<r.toLowerCase()?n=-1:r.toLowerCase()<i.toLowerCase()&&(n=1)),n},disabled:s,errorMessage:t}))}var Bu=a(57925),Gu=a(93882),Uu=a(89093);function Ku(e){let{approximateYear:t=null,onDateSuggestionSelected:a=()=>{},setApproximateYear:r=()=>{},originalDateIndex:n}=e;const s=(0,i.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(null===t||void 0===t||!t.year)return"";const a=t.year-e,i=t.year+e,r=new Date(a,0,1);r.setFullYear(a);const n=new Date(i,11,31);n.setFullYear(i);const s="YEAR",l="zh"===o.i18n.language?"zh-Hant":o.i18n.language;return{text:`${(0,la.Yq)({date:r,format:s,locale:l})}-${(0,la.Yq)({date:n,format:s,locale:l})}`,startDate:r,endDate:n}}),[t]),l=(0,i.useMemo)((()=>s(1)),[s]),d=(0,i.useMemo)((()=>s(3)),[s]),c=(0,i.useMemo)((()=>s(5)),[s]),u=(0,i.useMemo)((()=>{if(null===t||void 0===t||!t.year)return"";const e=10*Math.floor(t.year/10),a=e+9,i=new Date(e,0,1);i.setFullYear(e<0?e+1:e);const r=new Date(a,11,31);r.setFullYear(a<0?a+1:a);const n="YEAR",s="zh"===o.i18n.language?"zh-Hant":o.i18n.language;return{text:`${(0,la.Yq)({date:i,format:n,locale:s})}-${(0,la.Yq)({date:r,format:n,locale:s})}`,startDate:i,endDate:r}}),[t]),h=(0,i.useCallback)((e=>{const t=e.startDate.getFullYear(),i=e.endDate.getFullYear();a({standard:{formalText:`${t>-1?"+":""}${t}/${i>-1?"+":""}${i}`}},n),r(null)}),[a,r,n]),p=[l,d,c,u];return(0,k.Y)(i.Fragment,null,(0,k.Y)(oe.A,null),(0,k.Y)("span",{style:{color:W.A.gray50,fontSize:"12px"}},o.i18n.t("editableCoverage.dividerSubtitle","Suggested Date Ranges")),(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(J.Ay,{wrap:!0,gutters:"xs",guttersY:"xs"},p.map((e=>(0,k.Y)(Z.A,{key:e.text,onClick:()=>h(e)},e.text)))),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(oe.A,null),(0,k.Y)(ae.A,{size:"xs"}))}var qu={name:"1161qt5",styles:"padding-top:0px;"};function ju(e){let{forVolumeSet:t,placeId:a,recordType:r,disabled:n,errorMessage:s,isTest:l,datesChecked:d,onDateChecked:c}=e;const u=o.i18n.t("editableCoverage.approximateMessage","This field does not currently support approximate dates. Please use an exact date range."),{setDate:h}=(0,Dl.zU)({forVolumeSet:t}),p=r.date,m=(0,i.useMemo)((()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=e.map((e=>{let t=null;return t=e.formatted?e.formatted:(0,Uu.A)(e.fromTimestamp,e.toTimestamp,Uu.z.formatted),{label:String(t||""),value:{formatted:t,gedcomX:e.gedcomX}}}));return t}(p)),[p]),[g,v]=(0,i.useState)(null),y=(0,i.useCallback)(((e,t)=>{if(null!==e&&void 0!==e&&e.standard){const{formalText:i}=e.standard;if(null!==i&&void 0!==i&&i.startsWith("A")||null!==i&&void 0!==i&&i.startsWith("/")){const e=Number(i.match(/[A/]([+-]\d+)/)[1]);return void v({year:e,originalDateIndex:t})}if(null!==i&&void 0!==i&&i.endsWith("/")){const e=Number(i.match(/^([+-]\d+)/)[1]);return void v({year:e,originalDateIndex:t})}g&&v(null);const n={label:$u(e,"zh"===o.i18n.language?"zh-Hant":o.i18n.language),value:{gedcomX:i}},s=m.map(((e,a)=>a===t?n:e));h(a,Number(r.id),s)}else{const e=m.map(((e,a)=>a===t?{}:e));h(a,Number(r.id),e)}}),[g,m,a,r,h]);return(0,k.Y)(i.Fragment,null,m.map(((e,t)=>(0,k.Y)("div",{css:qu,key:e.label},(0,k.Y)(J.Ay,{alignItemsY:"middle"},(0,k.Y)(_a.A,{"data-testid":`EditableCoverage.DateCheckbox-${a}-${r.id}-${t}`,name:`date${t}`,checked:null===d||void 0===d?void 0:d[t],onChange:e=>{let{target:a}=e;return c(t,a.checked)}}),(0,k.Y)(Gu.A,{onSuggestionSelected:e=>y(e,t),disabled:n,placeholder:m.length>1?o.i18n.t("editableCoverageDate.addAnotherDatePlaceHolder","Add another date"):o.i18n.t("editableCoverageDate.addDatePlaceHolder","Add a date"),clearable:!0,errorMessage:(null===g||void 0===g?void 0:g.originalDateIndex)===t&&u||s,initialSelectedItem:{key:(null===e||void 0===e?void 0:e.label)||"",primaryText:(null===e||void 0===e?void 0:e.label)||""}}),l&&(0,k.Y)("div",{"data-testid":"coverageDate"},e.label)),(null===g||void 0===g?void 0:g.originalDateIndex)===t&&(0,k.Y)(Ku,{onDateSuggestionSelected:y,approximateYear:g,setApproximateYear:v,originalDateIndex:t})))),(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)(Z.A,{onClick:function(){const e=[...m,{}];h(a,Number(r.id),e)}},(0,k.Y)(Bu.A,null)," ",o.i18n.t("editableCoverageDate.datePlaceholder","Date")),(0,k.Y)(oe.A,null),(0,k.Y)(ae.A,{size:"xs"}))}function $u(e,t){var a,i,r;let n=null===e||void 0===e||null===(a=e.standard)||void 0===a?void 0:a.formalText;if(!n&&null!==e&&void 0!==e&&e.primaryText&&(n=e.primaryText),null===(i=n)||void 0===i||!i.includes("/"))return null===e||void 0===e||null===(r=e.standard)||void 0===r?void 0:r.standardizedText;const[o,s]=n.split("/"),l=o?Wu(o).toISOString():null;let d;if(/^[+-]?\d+\/[+-]?\d+$/.test(n)){const e=Wu(s);e.setFullYear(e.getFullYear()+1),e.setDate(e.getDate()-1),d=e.toISOString()}else if(s.split("-").length>2)d=Wu(s).toISOString();else if(s){const[e,t]=s.split("-"),a=new Date(parseInt(e,10),parseInt(t,10),1);a.setDate(a.getDate()-1),d=a.toISOString()}else d=(new Date).toISOString();return(0,la.Zy)({fromISOString:l,toISOString:d,locale:t})}function Wu(e){var t;const{day:a,month:i,year:r}=(null===(t=e.match(/(?<year>[+-]\d+)-?(?<month>\d+)?-?(?<day>\d+)?/))||void 0===t?void 0:t.groups)||{};let n;if(Number(r)<100)n=new Date,n.setDate(a||1),n.setMonth(i||0),n.setFullYear(Number(r));else{const t=new Date(e);n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()))}return n}const Xu={name:"erebr9",styles:"margin-top:12px;[class^='containerCss']{margin-bottom:unset;}"},Qu={name:"1hw29i9",styles:"margin-top:12px;"};function Ju(e){let{forVolumeSet:t=!1,place:a,placeIndex:r,recordTypes:n,open:o,handleToggleOpen:s,allRecordTypes:l}=e;const{setPlace:d,addRecordType:c,coverageCheckboxes:u,setApplyToChildren:h,handleRecordTypeCheckboxChange:p,handlePlaceCheckboxChange:m,handleDateCheckboxChange:g,validatePlace:v,validateRecordType:y,validateDate:f}=(0,Dl.zU)({forVolumeSet:t}),{deleteCoveragesMode:b}=(0,Dl.Dt)(),{deleteMode:A}=(0,Dl.T9)(),[w,T]=(0,i.useState)(new Array(n.length).fill(!1)),I=(0,L.u)("lightyear_sharedImageViewer_provisionalPlacesInCoverages"),S=(0,N.usePermission)("Standards_Prm_ProposePlaces","InfinityContext"),E=b||A,C=_u.getPercentRecordTypesTrue(u[r]),x=1===C,Y=(0,i.useMemo)((()=>{const[e,t]=S;return!(null===I||void 0===I||!I.isOn||"loaded"!==t||!e)}),[I,S]),R=null===a||void 0===a?void 0:a.id,P=null===a||void 0===a?void 0:a.fullName,O=(0,i.useMemo)((()=>({primaryText:P,key:String(R),standard:{id:String(R),standardizedText:P},startElement:(0,k.Y)(Da.A.Icon,{Icon:Mu.EMT}),isStandard:!0})),[R,P]);return(0,k.Y)(po.A,{open:o,setOpen:()=>s(null===a||void 0===a?void 0:a.id),primaryText:(0,k.Y)("div",{css:Hu.placeCheckboxText(o)},null===a||void 0===a?void 0:a.fullName),key:null===a||void 0===a?void 0:a.id,startElement:(0,k.Y)(_a.A,{name:"place","data-testid":"EditableCoverage.placeCheckbox",checked:x,mixedState:C>0&&C<1,onChange:()=>m(r,!x),onClick:e=>e.stopPropagation()})},(0,k.Y)(i.Fragment,null,(0,k.Y)("div",{css:Hu.singleIndent},(0,k.Y)(Du.A,{onSuggestionSelected:e=>{if(null!==e&&void 0!==e&&e.standard){const t=e.standard;d(r,t.standardizedText,t.id,""!==t.yearRange)}else null!==e&&void 0!==e&&e.isStandard&&Y&&d(r,e.primaryText,parseInt(e.key,10),!1)},helpMessage:(0,k.Y)(eh,{text:Lu.placeHelpText()}),initialSelectedItem:O,disabled:E,errorMessage:v(r),isProposed:Y,clearable:!0,label:Lu.placeAll()}),null===n||void 0===n?void 0:n.map(((e,i)=>{var n,o,s,d;return(0,k.Y)("div",{key:e.id},(0,k.Y)(oe.A,null),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(J.Ay,{alignItemsY:"top",key:e.id},(0,k.Y)("div",{css:Qu},(0,k.Y)(_a.A,{"data-testid":`EditableCoverage.RecordTypeCheckbox-${e.id}`,name:String(e.id),checked:null===(n=u[r])||void 0===n||null===(o=n[i])||void 0===o?void 0:o.recordTypeChecked,onChange:e=>{let{target:t}=e;return p(r,i,t.checked)}})),(0,k.Y)(It.A,{top:!0,bottom:!0},(0,k.Y)(Vu,{errorMessage:y(r,i),forVolumeSet:t,placeId:null===a||void 0===a?void 0:a.id,recordType:e,disabled:E,allRecordTypes:l}),(0,k.Y)(ju,{errorMessage:f(r,i),forVolumeSet:t,placeId:null===a||void 0===a?void 0:a.id,recordType:e,disabled:E,datesChecked:null===(s=u[r])||void 0===s||null===(d=s[i])||void 0===d?void 0:d.datesChecked,onDateChecked:(e,t)=>g(r,i,e,t)}),t&&(0,k.Y)("div",{css:Xu},(0,k.Y)(Fu.A,null,(0,k.Y)(Ht.A,{checked:w[i],label:Lu.applyToAllVolumes(),name:"toggleMe",onChange:e=>{let{target:t}=e;return function(e,t){const a=[...w];a[t]=e.checked,T(a),h(r,t,e.checked)}(t,i)}}))))))})),t&&(0,k.Y)(oe.A,null),(0,k.Y)(Z.A,{Icon:Ci.A,onClick:()=>c(null===a||void 0===a?void 0:a.id),disabled:E},Lu.recordType()),(0,k.Y)(ae.A,{size:"xxs"}))))}const Zu={name:"fwy3zi",styles:"display:block;font-size:10px;padding-inline-end:5px;button{text-transform:none;font-style:italic;font-size:1em;margin-inline-start:1em;}"};function eh(e){let{text:t,buttonText:a=Lu.learnMore,helpUrl:i}=e;const r=(0,Er.pm)(i);return(0,k.Y)("span",{css:Zu},t,i&&(0,k.Y)(rn.A,{onClick:r.handleClick},a))}var th=a(77595);const ah={getGroupParents:()=>th.J1`
    query GetGroupParents($rmsId: ID!, $parentGroupType: GroupType) {
      groupParents(rmsId: $rmsId, parentGroupType: $parentGroupType) {
        properties {
          name
          type
          values
        }
        title
        groupName
      }
    }
  `,getCollection:()=>th.J1`
    query GetCollection($collectionId: ID!) {
      collection(collectionId: $collectionId) {
        title
      }
    }
  `,getRecordTypes:th.J1`
    query getRecordTypes {
      recordTypes {
        id
        name
      }
    }
  `},ih={TOO_MANY_COVERAGES:()=>o.i18n.t("EditableCoverages.tooManyCoverages","10 or more coverages"),PLACE_ORIG_TOO_LONG:()=>o.i18n.t("EditableCoverages.placeOrigTooLong","A place of origin in one or more coverages is greater than 75 characters in length"),MISSING_PLACE:()=>o.i18n.t("EditableCoverages.missingPlace","One or more coverages are missing a place"),MISSING_DATE:()=>o.i18n.t("EditableCoverages.missingDate","One or more coverages are missing a date"),MISSING_RECORD_TYPE:()=>o.i18n.t("EditableCoverages.missingRecordType","One or more coverages are missing a record type"),UNSTANDARDIZED_PLACE:()=>o.i18n.t("EditableCoverages.unstandardizedPlace","One or more coverages have an unstandardized place"),UNSTANDARDIZED_DATE:()=>o.i18n.t("EditableCoverages.unstandardizedDate","One or more coverages have an unstandardized date"),UNSTANDARDIZED_RECORD_TYPE:()=>o.i18n.t("EditableCoverages.unstandardizedRecordType","One or more coverages have an unstandardized record type"),UNACCEPTABLE_FUTURE_DATE:()=>o.i18n.t("EditableCoverages.unacceptableFutureDate","One or more coverages have a date that is at least a year in the future"),UNACCEPTABLE_DATE_RANGE:()=>o.i18n.t("EditableCoverages.unacceptableDateRange","One or more coverages have an unacceptable date range"),errorsHeader:()=>o.i18n.t("EditableCoverages.errorsHeader","This group has the following errors:"),noErrorsHeader:()=>o.i18n.t("EditableCoverages.noErrorsHeader","Please review this group data for incomplete coverages. If there are no errors mark the coverages as complete."),editAndSaveChanges:()=>o.i18n.t("EditableCoverages.editAndSaveChanges","Please review and correct these errors, then save your changes"),coverageDataIsComplete:()=>o.i18n.t("EditableCoverages.coverageDataIsComplete","Coverages are complete"),openAll:()=>o.i18n.t("EditableCoverages.openAll","Open All"),closeAll:()=>o.i18n.t("EditableCoverages.closeAll","Close All"),selectAll:()=>o.i18n.t("EditableCoverages.selectAll","Select All"),placeLabel:()=>o.i18n.t("EditableCoverages.placeAll","Place")};function rh(e){let{forVolumeSet:t}=e;const{addPlace:a,coverages:r,coverageCheckboxes:n,setAllCoverageCheckboxes:o,coverageDataMissing:s,validateCoverages:l,setAuditMissingCoveragesAsCompleted:d,savingMissingAuditData:c,updatedAuditCoverages:u}=(0,Dl.zU)({forVolumeSet:t}),{closeOverlay:h,unsubscribe:p}=(0,Ti.HQ)(),{getIsOpen:m,handleToggleOpen:v,handleToggleOpenAll:y,allClosed:f}=(0,Dl.Aq)(r),{data:b,loading:A}=(0,Ou.IT)(ah.getRecordTypes),[w]=(0,i.useState)(l()),T=(0,_t.mb)(),I=(0,i.useMemo)((()=>{let e=0,t=0;return n.forEach((a=>{e+=_u.getPercentRecordTypesTrue(a),t+=1})),e/t}),[n]),S=(0,i.useCallback)((async()=>{await d(T),h("editMetadataOverlay"),p((()=>"editPanelOpen"))}),[d,h,p,T]),E=(0,i.useCallback)((()=>{if(!s&&!w||u)return null;const e=s.split("|"),t=w?ih.errorsHeader():ih.noErrorsHeader(),a=w?e:null;let r=ih.editAndSaveChanges();return s&&!w&&(r=(0,k.Y)("div",{css:Hu.colorButton},(0,k.Y)(Z.A,{emphasis:"low",onClick:S,disabled:c,Icon:c&&g.A},ih.coverageDataIsComplete()))),(0,k.Y)(i.Fragment,null,(0,k.Y)(i.Fragment,null,t),(0,k.Y)(ae.A,{size:"xs"}),(null===a||void 0===a?void 0:a.length)>0&&(0,k.Y)("ul",null,a.map((e=>(0,k.Y)("li",{key:e},ih[e]())))),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(i.Fragment,null,r))}),[s,S,c,w,u]);return A?null:(0,k.Y)(i.Fragment,null,s&&(0,k.Y)("div",{css:Hu.adjustIcon},(0,k.Y)(Pu.A,{outlined:!0,type:"warning"},(0,k.Y)(E,null))),(null===r||void 0===r?void 0:r.length)>0&&(0,k.Y)(Da.A,{startElement:(0,k.Y)(_a.A,{name:"selectAll",checked:1===I,mixedState:I>0&&I<1,onChange:e=>{let{target:t}=e;return o(t.checked)}}),primaryText:(0,k.Y)("div",{css:Hu.placeCheckboxText(!1)},ih.selectAll()),endElement:(0,k.Y)(Da.A.MetaText,{text:(0,k.Y)(Z.A,{onClick:y},f?ih.openAll():ih.closeAll())})}),null===r||void 0===r?void 0:r.map(((e,a)=>{let{place:i,recordTypes:r}=e;return(0,k.Y)("div",{key:null===i||void 0===i?void 0:i.id},(0,k.Y)(Ju,{forVolumeSet:t,place:i,placeIndex:a,recordTypes:r,handleToggleOpen:v,open:m(null===i||void 0===i?void 0:i.id),allRecordTypes:(null===b||void 0===b?void 0:b.recordTypes)||[]}))})),(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(Z.A,{Icon:Ci.A,onClick:a},ih.placeLabel()),(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(oe.A,null))}var nh=a(32187);function oh(e){let{dates:t,place:a}=e;const[r,n]=(0,i.useState)(!1),{t:o}=(0,P.B)(),s=(0,i.useMemo)((()=>null===t||void 0===t?void 0:t.map((e=>{let{fromTimestamp:t,toTimestamp:a}=e;return(0,k.Y)(J.Ay,{alignX:"end",as:"li",guttersY:"none",key:`${[t,a].filter(Boolean).join("-")}`},(0,k.Y)(te.A,{size:"xs"},(0,Uu.A)(t,a,Uu.z.formatted)))}))),[t]);return(0,k.Y)(Ne.A,{open:r,setOpen:n,ariaControlsId:o("coverageList.ariaControls","Date ranges for {place}",{place:a})},(0,k.Y)(Pe.A,{collapsedHeight:(null===t||void 0===t?void 0:t.length)>1?55:35},(0,k.Y)(Bn.A,null,s)),(null===t||void 0===t?void 0:t.length)>2&&(0,k.Y)(J.Ay,{alignX:"end"},(0,k.Y)(Z.A,{onClick:()=>n(!r),"aria-hidden":!0},r?o("common-ui:show-less.info.abbr","Less"):o("common-ui:show-more.info.abbr","More"))))}const sh=(0,k.AH)("color:",W.A.gray30,";");function lh(e){var t;let{coverages:a,isBottomSheet:r}=e;const n=(0,i.useRef)(),s=r?null===(t=n.current)||void 0===t?void 0:t.offsetWidth:327,l=(0,i.useMemo)((()=>["zh","ko","ja"].includes(o.i18n.language)),[]);return(0,k.Y)(i.Fragment,null,(0,k.Y)(Bn.A,{ref:n},s&&Array.isArray(a)?a.map((e=>{let{place:t,recordTypes:a}=e;const i=(null===t||void 0===t?void 0:t.fullName)||(null===t||void 0===t?void 0:t.name)||o.i18n.t("coverageList.missingPlace","Missing place");return(0,k.Y)(po.A,{primaryText:!t||!t.published&&Object.keys(t).includes("published")?(0,k.Y)(se.Ay,{gutters:"nano"},(0,k.Y)(nh.A,{columns:2,alignY:"middle"}),(0,k.Y)("span",{columns:10},i)):(0,k.Y)("span",{css:t.fullName||t.name?null:sh},i),key:null===t||void 0===t?void 0:t.id,initiallyOpen:!0},(0,k.Y)(dh,{recordTypes:a,width:s,isWiderScript:l,fullName:i}))})):(0,k.Y)(J.Ay,{alignX:"center"},(0,k.Y)(g.A,{size:"md"}))),(0,k.Y)(oe.A,null))}function dh(e){let{fullName:t,recordTypes:a,width:r,isWiderScript:n}=e;const s=(0,i.useMemo)((()=>{const e=function(e){return e.reduce(((e,t)=>{let a=e;return t.date.forEach((e=>{var t;let{formatted:i,fromTimestamp:r,toTimestamp:n}=e;i||(i=(0,Uu.A)(r,n,Uu.z.formatted)),(null===(t=i)||void 0===t?void 0:t.length)>a&&(a=i.length)})),Math.min(a,25)}),0)}(a),t=r/12,i=function(e){return e?9:7}(n),o=Math.ceil(e*i/t)+1;return[12-o,o]}),[n,a,r]);return(0,k.Y)(Oe.Ay,{totalColumnCount:2,rowLevelHeaders:!0,atSizeColumns:{default:{columnCount:2,columnWidths:s}}},a.map(((e,i)=>{let{name:r,date:n}=e;return(0,k.Y)(Fe.lT,{column1:(0,k.Y)(te.A,{size:"xs"},(0,k.Y)("span",{style:{fontWeight:400},css:r?null:sh},r||o.i18n.t("coverageList.missingRecordType","Missing record type"))),column2:(0,k.Y)(oh,{place:t,dates:n}),noBottomDivider:i===a.length-1,key:r})})))}function ch(e){let{forVolumeSet:t,editable:a=!1}=e;const[r]=(0,P.B)(),{coverages:n=[]}=(0,Dl.zU)(),{infoSheetOverlay:{isBottomSheet:o}}=(0,Ti.HQ)();return a?(0,k.Y)(rh,{forVolumeSet:t}):n.length<1?null:(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(re.H6,null,r("coverages.image-group-contents.title","Image Group Contents")),(0,k.Y)(lh,{coverages:n,isBottomSheet:o}))}var uh=a(60517);const hh=()=>o.i18n.t("metadata.section.title","Details"),ph=()=>o.i18n.t("metadata.archivalReferenceNumber","Archival Reference Number"),mh=()=>o.i18n.t("metadata.imageGroupNumber","Image Group Number"),gh=()=>o.i18n.t("edit-index.cancel.button","Cancel"),vh=()=>o.i18n.t("metadata.citation","Citation"),yh=()=>o.i18n.t("metadata.copyAll","Copy All"),fh=e=>o.i18n.t("metadata.copySuccess","{text} copied to clipboard.",{text:e}),bh=e=>o.i18n.t("metadata.copyToClipboard","Copy {fieldName} to clipboard",{fieldName:e}),Ah=()=>o.i18n.t("metadata.creator","Creator"),wh=()=>o.i18n.t("metadata,creatorPlaceholder","Add a creator"),Th=()=>o.i18n.t("metadata.custodian","Custodian"),Ih=()=>o.i18n.t("metadata.everything","Everything"),Sh=()=>o.i18n.t("metadata.filmItemNotes","Film Item Notes"),Eh={archivalReferenceNumber:()=>o.i18n.t("metadata.glossary.archivalReferenceNumber","An identifier a custodian or archive uses to keep track of the record."),citation:()=>o.i18n.t("metadata.glossary.citation","A summary of the record's metadata to be used for referencing the image group."),creator:()=>o.i18n.t("metadata.glossary.creator","The organization, government, or other entity that created the record."),custodian:()=>o.i18n.t("metadata.glossary.custodian","The organization, government, or other entity that currently owns the record."),date:()=>o.i18n.t("metadata.glossary.date","The year or date range from when the record or records were created."),filmItemNotes:()=>o.i18n.t("metadata.glossary.filmItemNotes","Additional information about the film item."),imageGroupNumber:()=>o.i18n.t("metadata.glossary.imageGroupNumber","The image group's unique identification number, also known as a Digital Genealogical Society (DGS) number."),imagesIndexed:()=>o.i18n.t("metadata.glossary.imagesIndexed","The number of images in the image group that have been indexed."),language:()=>o.i18n.t("metadata.glossary.language","The language the record is written in."),title:()=>o.i18n.t("metadata.glossary.title","Contains the place, record type, and date of the records in the image group."),volume:()=>o.i18n.t("metadata.glossary.volume","Typically, the book number within a larger set of books.")},kh=()=>o.i18n.t("metadata.imagesIndexed","Images Indexed"),Ch=(e,t,a,i)=>o.i18n.t("metadata.imagesIndexedTotal","{icon} {indexed} of {total} images ({percent}%)",{icon:e,indexed:t,total:a,percent:i}),xh=(e,t)=>o.i18n.t("metadata.itemNumberTextForGroupIDLabel","(Item {idx} of {total})",{idx:e,total:t}),Yh=()=>o.i18n.t("metadata.language","Language"),Nh=()=>o.i18n.t("metadata.multiValueHelpText","If multiple values exist, list each value on its own line."),Rh=()=>o.i18n.t("metadata.parentGroups","Parent Groups"),Ph=()=>o.i18n.t("metadata.selectAllCreators","Select all Creators"),Oh=()=>o.i18n.t("metadata.title","Title"),_h=()=>o.i18n.t("metadata.volume","Volume"),Fh=()=>o.i18n.t("IndexExploreHeader.Citation.Overlay.GroupNumberExplanation.heading","Film and Image Group Number"),Dh=()=>o.i18n.t("IndexExploreHeader.Citation.Overlay.Title","Citation"),Mh=()=>o.i18n.t("IndexExploreHeader.Citation.Overlay.GroupNumberExplanation.data","Film numbers were used for microfilms, but with immediate digitalization of records, FamilySearch now uses Group Numbers"),Hh=()=>o.i18n.t("IndexExploreHeader.Citation.Overlay.GroupNumberExplanation.learnMore","Learn More"),Lh=()=>o.i18n.t("IndexExploreHeader.Citation.Overlay.GroupNumberExplanation.filmNumber","Film Number");var zh=a(27354);function Vh(e){var t;let{metadata:a,location:i,imageIndex:r,imageCount:n}=e;const o=new Intl.ListFormat(zh.A.language,{style:"narrow",type:"conjunction"});if(!a)return"";const{creator:s,createdDate:l,custodian:d,place:c}=a,u=null===i||void 0===i||null===(t=i.pathname)||void 0===t?void 0:t.split("/").pop();let h="",p="";const m=(0,Uu.A)(null===l||void 0===l?void 0:l.fromTimestamp,null,Uu.z.formatted),g=(0,Uu.A)(Date.now(),null,Uu.z.formatted);c?h=`"${c} ${zh.A.t("generateCitation.records","records")},${m?` ${m},`:""}"`:m&&(h=`"${m},"`),d?p=d:Array.isArray(s)&&(null===s||void 0===s?void 0:s.length)>0&&(p=o.format(s));return{coverageString:h,currentDateFormatted:g,imageCitation:zh.A.t("generateCitation.image-number","image {number} of {totalNumber}",{number:r+1,totalNumber:n}),custodianString:p,ark:u}}function Bh(e){let{metadata:t,location:a,imageIndex:i,imageCount:r,queryView:n}=e;if(!t)return"";const{coverageString:s,currentDateFormatted:l,imageCitation:d,custodianString:c,ark:u}=Vh({metadata:t,location:a,imageIndex:i,imageCount:r});return`${s} ${o.i18n.t("generateCitation.images","images")}, ${o.i18n.t("generateCitation.familySearch","FamilySearch")} (${h.pc}/ark:/61903/${u}?view=${n}${l?` : ${l}`:""}), ${d}; ${c}.`}const Gh=th.J1`
  query getOlibNotes($groupId: String) {
    olibNotes(groupId: $groupId)
  }
`,Uh="lightyear_storedOlibNotes";function Kh(e){let{groupId:t=null}=e;const[a]=(0,Yl._)(Gh,{variables:{groupId:t}}),[r,n]=(0,i.useState)([]),o=(0,i.useMemo)((()=>new fi.Ay({storeName:"lightyear_additionalData"})),[]),[s]=(0,N.usePermission)("RMSGroupReadPermission","RMSContext");return(0,i.useEffect)((()=>(async function(){if(t){const i=await o.getItem(Uh);if(i&&(null===i||void 0===i?void 0:i.id)===t)n(i.notes);else if(s)try{const{data:e}=await a(),i=Array.from(new Set((null===e||void 0===e?void 0:e.olibNotes)||[]));n(i),o.setItem(Uh,{id:t,notes:(null===e||void 0===e?void 0:e.olibNotes)||[]})}catch(e){console.error(e),n([])}}}(),()=>n([]))),[a,t,o,s]),(0,k.Y)(i.Fragment,null,!(null!==r&&void 0!==r&&r.length)&&"-",t&&r&&(0,k.Y)(nu.A,{collapsedLineCount:5},(0,k.Y)(te.A,{size:"sm"},r.map(((e,t)=>(0,k.Y)(i.Fragment,{key:e},t>0&&(0,k.Y)(i.Fragment,null,(0,k.Y)("br",null),(0,k.Y)("br",null)),e))))))}const qh={name:"1v6lj4c",styles:"width:100%;display:flex;justify-content:space-between;"},jh={name:"4rmlxi",styles:"width:100%;display:flex;flex-direction:column;"},$h={name:"viyug1",styles:"padding-inline-start:8px;"},Wh=new Intl.NumberFormat(o.i18n.language),Xh=new Intl.ListFormat(o.i18n.language,{style:"narrow",type:"conjunction"});var Qh={name:"qwnfpz",styles:"margin-top:10px;margin-bottom:-6px;"};function Jh(e){var t,a,r,n,o,s,l,d,c,u;let{hiddenFields:h=[],copyable:p,errors:m,editable:g}=e;const{metadata:v,setTitle:y,setVolume:f,setLanguages:b,setArchivalReferenceNumber:A,setCreator:w}=(0,Dl.p_)(),{deleteCoveragesMode:T}=(0,Dl.Dt)(),{data:I,getLanguagesFromCodes:S}=(0,Dl.Jt)(),{itemNumber:E,itemCount:C,loading:x,group:Y}=(0,Dl.P2)(),{focusedIndex:N}=(0,Pr.XQ)(),{deleteMode:R,dispatch:P}=(0,Dl.T9)(),O=(0,_t.mb)(),{query:_}=(0,G.A)(),F=(0,D.zy)(),H=(0,L.u)("lightyear_sharedImageViewer_indexedPercentage"),[z,{data:V,loading:B}]=(0,Yl._)(Jd.A.parentGroups),{isDivideMode:U}=(0,Dl.Oq)(),{dividerOffsets:K}=(0,Dl.Rb)();(0,i.useEffect)((()=>{Y.id&&!V&&z({variables:{parentGroupType:"VOLUME_SET",rmsId:Y.id}})}),[Y.id,V,z]);const q=(0,i.useCallback)((e=>{P&&P({type:"SET_CREATOR_CHECKBOXES",value:e})}),[P]),j=(0,i.useMemo)((()=>S(null===v||void 0===v?void 0:v.languages)),[S,v]),$=(0,i.useMemo)((()=>null===Y||void 0===Y?void 0:Y.childCount),[Y]),W=null===_||void 0===_?void 0:_.view,X=(0,i.useMemo)((()=>Bh({metadata:v,location:F,imageIndex:N,imageCount:$,queryView:W})),[v,F,N,$,W]),Q=(0,i.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t={dismissable:!0,transient:!0};try{await navigator.clipboard.writeText(e);const a=e.length>20?`${e.substring(0,17)}...`:e;O({...t,message:fh(a),type:"success"})}catch(a){O({...t,message:a.message,type:"error"})}}),[O]),Z=(0,i.useCallback)(((e,t,a)=>p&&e||a?(0,k.Y)(Da.A.IconButton,{Icon:qt.A,onClick:()=>Q(e),title:bh(t)}):null),[Q,p]);return(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H5,null,hh()),(0,k.Y)(ae.A,null),(0,k.Y)(Bn.A,null,(0,k.Y)(lu,{loading:x},(0,k.Y)(id,{editing:g,value:null===v||void 0===v?void 0:v.title,onDebounce:y,label:Oh(),error:(null===m||void 0===m?void 0:m.indexOf("title"))>-1,ElseElement:(0,k.Y)(ou,{overline:Oh(),items:[null===v||void 0===v?void 0:v.title],rightElement:Z(null===v||void 0===v?void 0:v.title,Oh()),glossaryDescription:Eh.title()})}),(0,k.Y)(id,{editing:g,value:null!==(t=null===v||void 0===v||null===(a=v.volumes)||void 0===a?void 0:a.join("\n"))&&void 0!==t?t:"",onDebounce:f,label:_h(),error:(null===m||void 0===m?void 0:m.indexOf("volume"))>-1,ElseElement:(0,k.Y)(ou,{overline:_h(),items:Xh.format(null!==(r=null===v||void 0===v?void 0:v.volumes)&&void 0!==r?r:[]),rightElement:Z(null!==(n=null===v||void 0===v||null===(o=v.volumes)||void 0===o?void 0:o.length)&&void 0!==n?n:0,_h()),glossaryDescription:Eh.volume()}),multiValue:!0,helpText:Nh()}),g?(0,k.Y)(ru,{languageOptions:(null===I||void 0===I?void 0:I.standardsLanguages)||[],selectedCodes:(null===v||void 0===v?void 0:v.languages)||[],label:Yh(),onChange:b,error:(null===m||void 0===m?void 0:m.indexOf("languages"))>-1}):(0,k.Y)(ou,{overline:Yh(),items:j,rightElement:Array.isArray(j)&&(null===j||void 0===j?void 0:j.length)>0&&Z(Xh.format(j),Yh()),glossaryDescription:Eh.language(),commaSeparated:!0}),(null===H||void 0===H?void 0:H.isOn)&&!g&&(0,k.Y)(i.Fragment,null,(()=>{const{indexedChildCount:e,childCount:t}=Y;return void 0===t||void 0===e?null:e>0?(0,k.Y)(ou,{overline:kh(),hyperlinks:[{text:Ch(null,Wh.format(e),Wh.format(t),Math.floor(e/t*100)),to:`/search/record/results?q.filmNumber=${null===v||void 0===v?void 0:v.imageGroupNumber}`}],glossaryDescription:Eh.imagesIndexed()}):(0,k.Y)(ou,{overline:kh(),items:[Ch(null,Wh.format(e),Wh.format(t),Math.floor(e/t*100))],glossaryDescription:Eh.imagesIndexed()})})()),g?(0,k.Y)(Fl,{label:Ah(),selectAllLabel:Ph(),disabled:T||R,inputPlaceHolder:wh(),values:null===v||void 0===v?void 0:v.creator,setValues:e=>w(e((null===v||void 0===v?void 0:v.creator)||{})),onSelectionChange:q}):(0,k.Y)(ou,{overline:Ah(),hyperlinks:null===(s=Object.values((null===v||void 0===v?void 0:v.creator)||{}))||void 0===s?void 0:s.map((e=>Zh("creator",e))),rightElement:Z(Xh.format(Object.values(null!==(l=null===v||void 0===v?void 0:v.creator)&&void 0!==l?l:[])),Ah()),glossaryDescription:Eh.creator()}),!g&&(0,k.Y)(ou,{overline:Th(),hyperlinks:null===v||void 0===v||null===(d=v.custodian)||void 0===d?void 0:d.map((e=>Zh("custodian",e))),rightElement:Z(null===v||void 0===v?void 0:v.custodian,Th()),glossaryDescription:Eh.custodian()}),!h.includes("archivalReferenceNumber")&&(0,k.Y)(id,{editing:g,value:null===v||void 0===v?void 0:v.archivalReferenceNumber,onDebounce:A,label:ph(),error:(null===m||void 0===m?void 0:m.indexOf("archivalReferenceNumber"))>-1,multiValue:!0,helpText:Nh(),ElseElement:(0,k.Y)(ou,{overline:ph(),items:[null===v||void 0===v?void 0:v.archivalReferenceNumber],rightElement:Z(null===v||void 0===v?void 0:v.archivalReferenceNumber,ph()),glossaryDescription:Eh.archivalReferenceNumber()})}),!g&&(0,k.Y)("div",{css:qh},(0,k.Y)("div",{css:jh},(0,k.Y)(nd,{overline:(0,k.Y)(te.A,{size:"xs"},(0,k.Y)(uh.A,null,mh())),description:Eh.imageGroupNumber()}),(0,k.Y)(J.Ay,null,(0,k.Y)(te.A,{as:"div",secondary:!1,size:"sm"},Zh("imageGroupNumbers",null===v||void 0===v?void 0:v.imageGroupNumber)&&(0,k.Y)(M.Ay,{target:"_blank",external:!0,to:Zh("imageGroupNumbers",null===v||void 0===v?void 0:v.imageGroupNumber).to},Zh("imageGroupNumbers",null===v||void 0===v?void 0:v.imageGroupNumber).text),C>1&&(0,k.Y)("span",{css:$h},xh(E,U?null===K||void 0===K?void 0:K.length:C)))))),!g&&(0,k.Y)(i.Fragment,null,(0,k.Y)("div",{css:Qh},(0,k.Y)(nd,{overline:(0,k.Y)(te.A,{as:"div",size:"xs"},(0,k.Y)(uh.A,null,Sh())),description:Eh.filmItemNotes()})),(0,k.Y)(Kh,{groupId:(null===_||void 0===_?void 0:_.groupId)||(null===Y||void 0===Y?void 0:Y.id)})),!g&&(0,k.Y)(ou,{overline:vh(),items:[X],rightElement:Z(X,vh(),!0),glossaryDescription:Eh.citation()}),!B&&(null===V||void 0===V||null===(c=V.groupParents)||void 0===c?void 0:c.length)>0&&(0,k.Y)(ou,{hyperlinks:null===V||void 0===V||null===(u=V.groupParents)||void 0===u?void 0:u.filter((e=>{var t;return null===(t=e.imageApids)||void 0===t?void 0:t.length})).map((e=>({skipEncode:!0,text:e.id,to:`${(0,na.XJ)(e.imageApids[0])}?view=explore&groupId=${e.id}`}))),overline:Rh()}))))}function Zh(e,t){if(!e||!t)return null;return{text:t,to:`/records/images/search-results?${e}=${t}`}}const ep=()=>o.i18n.t("internal.cameraOperator","Camera Operator"),tp=()=>o.i18n.t("internal.heading","Internal Staff Options"),ap=()=>o.i18n.t("internal.imageApid","Image APID"),ip=()=>o.i18n.t("internal.imageArk","Image ARK"),rp=()=>o.i18n.t("Internal.manageJiapuGroup","Manage Jiapu Group"),np=()=>o.i18n.t("internal.mediaNumber","Media Number"),op=()=>o.i18n.t("internal.naturalGroupIds","Natural Group ID"),sp=()=>o.i18n.t("internal.openFullHistory","Open Full Change History"),lp=()=>o.i18n.t("internal.projectId","Project ID"),dp=()=>o.i18n.t("internal.subheading","Visible only to employees and missionaries"),cp={qualityTags:{name:"old1by",styles:"padding:0px;"},commentChips:{name:"xqyigr",styles:"margin-inline-end:5px;padding-bottom:4px;"}},up={qualityTagsHeader:()=>o.i18n.t("qualityTags.qualityTagsHeader","Comments and Quality Tags"),qualityTags101:()=>o.i18n.t("qualityTags.qualityTags101","Tight Binding"),qualityTags102:()=>o.i18n.t("qualityTags.qualityTags102","Faded or Damaged Documents"),qualityTags103:()=>o.i18n.t("qualityTags.qualityTags103","Poor Copy of Original"),qualityTags104:()=>o.i18n.t("qualityTags.qualityTags104","Plastic Covered or Shiny Paper"),qualityTags105:()=>o.i18n.t("qualityTags.qualityTags105","Sequence Error"),qualityTags106:()=>o.i18n.t("qualityTags.qualityTags106","Glued or Covered Information"),qualityTags107:()=>o.i18n.t("qualityTags.qualityTags107","Cover Unavailable or Missing"),qualityTags108:()=>o.i18n.t("qualityTags.qualityTags108","Cover Will Not Be Captured"),qualityTags201:()=>o.i18n.t("qualityTags.qualityTags201","Image may have Publishing Restrictions"),qualityTags202:()=>o.i18n.t("qualityTags.qualityTags202","Imported Images")};function hp(e){let{comments:t,folderQTags:a,recordCaptureComment:i}=e;function r(e){var t;let a="";var i;Array.isArray(null===e||void 0===e?void 0:e.values)&&(null===(t=e.values)||void 0===t?void 0:t.length)>0&&(a=null===e||void 0===e||null===(i=e.values)||void 0===i?void 0:i.join("\n"));return a}return(0,k.Y)("div",{css:cp.qualityTags},(0,k.Y)(po.A,{primaryText:up.qualityTagsHeader()},(0,k.Y)(ae.A,{size:"xs"}),function(e){var t;let a=[];return Array.isArray(null===e||void 0===e?void 0:e.values)&&(null===(t=e.values)||void 0===t?void 0:t.length)>0&&(a=null===e||void 0===e?void 0:e.values[0].split(";")),a}(a).map((e=>(0,k.Y)("div",{css:cp.commentChips,key:e},(0,k.Y)(gn.A,{label:up[`qualityTags${e}`]()})))),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(te.A,null,r(t),t&&(0,k.Y)("br",null),r(i))))}const pp={reprocessFolder:{name:"y8aj3r",styles:"padding:0;"},reprocessFolderButton:{name:"1ebnygn",styles:"padding-bottom:16px;"}},mp={changeHistoryDuplicate:o.i18n.t("Internal.changeHistoryDuplicate","Reprocessing has already been requested for this folder."),changeHistoryInfo:o.i18n.t("Internal.changeHistoryInfo","Please wait up to 60 minutes for reprocessing to complete"),changeHistoryReprocessed:o.i18n.t("Internal.changeHistoryReprocessed","Status: Reprocessed"),changeHistoryRequested:o.i18n.t("Internal.changeHistoryRequested","Status: Requested"),changeHistoryTitle:o.i18n.t("Internal.changeHistoryTitle","Change History"),crop:()=>o.i18n.t("Internal.Crop","Crop"),deskew:()=>o.i18n.t("Internal.Deskew","Deskew"),reprocessFolder:()=>o.i18n.t("Internal.ReprocessFolder","Reprocess Folder"),reprocessOperations:()=>o.i18n.t("Internal.ReprocessOperations","Image operations to apply"),requestSubmitted:()=>o.i18n.t("Internal.RequestSubmitted","Request submitted"),sharpen:()=>o.i18n.t("Internal.Sharpen","Sharpen")};function gp(e){let{requested:t,setRequested:a,setDuplicateRequest:r}=e;const[n,o]=(0,i.useState)(!0),[s,l]=(0,i.useState)(!0),[d,c]=(0,i.useState)(!0),[u,h]=(0,i.useState)(!1),{group:{metadata:p={}}}=(0,Dl.P2)(),[m,{error:v}]=(0,Yl._)(Jd.A.reprocessRequest(),{errorPolicy:"all"});return(0,k.Y)("div",{css:pp.reprocessFolder},(0,k.Y)(Fu.A,{orientation:"vertical",label:mp.reprocessOperations()},(0,k.Y)("div",{css:pp.reprocessFolder},(0,k.Y)(Ht.A,{label:mp.crop(),name:"crop",checked:n,onChange:()=>{o(!n)},disabled:t}),(0,k.Y)(Ht.A,{label:mp.deskew(),name:"deskew",checked:s,onChange:()=>{l(!s)},disabled:t}),(0,k.Y)(Ht.A,{label:mp.sharpen(),name:"sharpen",checked:d,onChange:()=>{c(!d)},disabled:t}))),(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)("div",{css:pp.reprocessFolderButton},(0,k.Y)(Z.A,{emphasis:"medium",disabled:u||t,onClick:()=>(async()=>{h(!0),await m({variables:{imageGroupNumber:p.imageGroupNumber,crop:n,deskew:s,sharpen:d}});let e=!1;null!==v&&void 0!==v&&v.graphQLErrors&&(e=v.graphQLErrors.some((e=>{let{message:t}=e;return t.includes("409")}))),!0===e?(r(!0),a(!1)):a(!0),h(!1)})(),Icon:u?g.A:null},t?mp.requestSubmitted():mp.reprocessFolder())))}function vp(e){var t;let{requested:a,duplicateRequest:r}=e;const[n,{data:o}]=(0,Yl._)(Jd.A.reprocessData()),{group:{imageReprocessing:s=[],parentGroupId:l=""}}=(0,Dl.P2)();let d;return(0,i.useEffect)((()=>{l&&n({variables:{groupIdOrArkId:l}})}),[n,l]),d=null!==o&&void 0!==o&&null!==(t=o.group)&&void 0!==t&&t.imageReprocessing?o.group.imageReprocessing:s,(0,k.Y)(i.Fragment,null,a||r||0!==d.length?(0,k.Y)(re.H6,{size:"H5",supplementary:!0},mp.changeHistoryTitle):"",a?(0,k.Y)(te.A,{size:"sm"},mp.changeHistoryInfo):"",r?(0,k.Y)(te.A,{size:"sm"},mp.changeHistoryDuplicate):"",d.map((e=>e.action?(0,k.Y)(i.Fragment,{key:e.date.fromTimestamp},(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(te.A,{size:"sm"},"COMPLETE"===e.action?mp.changeHistoryReprocessed:mp.changeHistoryRequested,(0,k.Y)("br",null),function(e){const t=new Date(e),a=Navigator.language;return t.toLocaleString(a,{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}(e.date.fromTimestamp))):"")))}function yp(){const[e,t]=(0,i.useState)(!1),[a,r]=(0,i.useState)(!1);return(0,k.Y)("div",{css:pp.reprocessFolder},(0,k.Y)(po.A,{primaryText:mp.reprocessFolder()},(0,k.Y)(gp,{requested:e,setRequested:t,duplicateRequest:a,setDuplicateRequest:r}),(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(vp,{requested:e,duplicateRequest:a})))}const fp={approveRework:o.i18n.t("Internal.approveRework","Approve Rework"),approveSuccess:o.i18n.t("Internal.approveSuccess","Approval succeeded"),approveFailed:o.i18n.t("Internal.approveFailed","Approval failed"),by:o.i18n.t("Internal.by","By:"),cancel:o.i18n.t("common-ui:cancel.action","Cancel"),cancelRework:o.i18n.t("Internal.cancelRework","Cancel Rework"),cancelReworkRequestSuccess:o.i18n.t("Internal.cancelReworkRequestSuccess","Cancel succeeded"),cancelReworkRequestFailed:o.i18n.t("Internal.cancelReworkRequestFailed","Cancel failed"),cancelSuccess:o.i18n.t("Internal.cancelSuccess","Cancel succeeded"),cancelFailed:o.i18n.t("Internal.cancelFailed","Cancel failed"),denyRework:o.i18n.t("Internal.denyRework","Deny Rework"),denySuccess:o.i18n.t("Internal.denySuccess","Deny succeeded"),denyFailed:o.i18n.t("Internal.denyFailed","Deny failed"),denyNote:o.i18n.t("Internal.denyNote","Why is this request for rework being canceled?"),folderRework:()=>o.i18n.t("Internal.FolderRework","Folder Rework"),note:o.i18n.t("Internal.note","Notes:"),requestRework:()=>o.i18n.t("Internal.ReworkButtons.RequestRework","Request Rework"),requestReworkSuccess:o.i18n.t("Internal.requestSuccess","Rework has been requested"),requestReworkFailed:o.i18n.t("Internal.requestFailed","Rework request failed"),reworkNote:o.i18n.t("Internal.reworkNote","Why does this folder require rework?"),status:o.i18n.t("Internal.status","Status:"),submit:o.i18n.t("Internal.submit","Submit"),requested:o.i18n.t("Internal.requested","Requested"),approved:()=>o.i18n.t("Internal.approved","Approved"),cancelReworkRequest:()=>o.i18n.t("Internal.cancelReworkRequest","Cancel Rework Request")};function bp(e){let{reworkHistory:t=[]}=e;const a=(0,i.useMemo)((()=>null===t||void 0===t?void 0:t.reduce(((e,t)=>{const{date:a,state:i,username:r,notes:n,action:o}=t,s=(0,Uu.A)(a.fromTimestamp,a.toTimestamp,Uu.z.formatted);let l=i;if("Available"===i&&(l="CameraRework"===o?fp.approved():fp.requested),e.length<1)return[{date:s,items:[{state:l,username:r,notes:n,key:a.fromTimestamp}]}];const d=e[e.length-1];return d.date===s?(d.items.push({state:l,username:r,notes:n,key:a.fromTimestamp}),e):[...e,{date:s,items:[{state:l,username:r,notes:n,key:a.fromTimestamp}]}]}),[])),[t]);return(0,k.Y)(i.Fragment,null,a.map((e=>{let{date:t,items:a}=e;return(0,k.Y)(i.Fragment,{key:t},(0,k.Y)("strong",null,t),(0,k.Y)(Bn.A,null,null===a||void 0===a?void 0:a.map((e=>(0,k.Y)(Da.A,{key:e.key,primaryText:null===e||void 0===e?void 0:e.state,secondaryText:null===e||void 0===e?void 0:e.notes,overline:null===e||void 0===e?void 0:e.username})))))})))}const Ap="RequestCameraRework",wp="CameraRework",Tp=[Qd.Oz.COMPLETED,Qd.Oz.FAILURE,Qd.Oz.ERROR,Qd.Oz.CANCELLED],Ip=[Qd.Oz.AVAILABLE,Qd.Oz.IN_PROGRESS],Sp={approve:"approve",request:"request",cancel:"cancel"};function Ep(e){let{reworkHistory:t,addReworkItem:a}=e;const{group:{id:r=""}}=(0,Dl.P2)(),n=(0,_t.mb)(),o=(0,Wd.useUser)(),[s,l]=(0,i.useState)(!1),[d,c]=(0,i.useState)(!1),[u,h]=(0,i.useState)(!1),[p,m]=(0,i.useState)(""),[g]=(0,N.usePermission)("LightyearApproveReworkPermission","LightyearContext"),[v]=(0,N.usePermission)("LightyearRequestReworkPermission","LightyearContext"),[y,f]=(0,i.useState)(!1),b=(null===t||void 0===t?void 0:t[t.length-1])||{state:"",action:""},{resetCurrentReworkStatus:A,setReworkStatusError:w}=function(e){const[t,a]=(0,i.useState)(""),[r]=(0,N.usePermission)("LightyearRequestReworkPermission","LightyearContext"),[n]=(0,N.usePermission)("LightyearApproveReworkPermission","LightyearContext");return(0,i.useEffect)((()=>{const t=null===e||void 0===e?void 0:e.action,i=null===e||void 0===e?void 0:e.state;if(t||i||r){const e={request:!1,cancel:!1,approval:!1};e.request=r&&!t||(t===Ap||t===wp)&&Tp.includes(i),e.approval=n&&t===Ap&&i===Qd.Oz.AVAILABLE,e.cancel=r&&t===Ap&&Ip.includes(i)||t===wp&&i===Qd.Oz.IN_PROGRESS||t===wp&&n&&i===Qd.Oz.AVAILABLE,e.approval?a(Sp.approve):e.request?a(t?"":Sp.request):e.cancel?a(Sp.cancel):a("")}}),[e,r,n]),{currentReworkStatus:t,resetCurrentReworkStatus:function(e){a(e===Sp.approve?Sp.cancel:e===Sp.cancel||e!==Sp.request||n?Sp.request:"")},setReworkStatusError:()=>a(""),REWORK_STATUS:Sp}}(b),[T]=(0,Xd.n)(Zd.A.updateCameraReworkStatus()),I=(0,i.useCallback)((async e=>{const{successString:t,failedString:i}=function(e){if(!e)return{successString:fp.requestSuccess,failedString:fp.requestFailed};const t="cancelRework"===e?"deny":e;return{successString:fp[`${t}Success`],failedString:fp[`${t}Failed`]}}(e);let s=!0;l(!0);const d=g&&"requestRework"===e?"supervisorRequest":e;try{var u,m;const{data:t}=await T({variables:{updateParams:{action:d,comment:p,projectId:r}}});if("204"!==(null===t||void 0===t||null===(u=t.updateCameraReworkStatus)||void 0===u?void 0:u.code))throw new Error((null===t||void 0===t||null===(m=t.updateCameraReworkStatus)||void 0===m?void 0:m.message)||"unknown error");if("Camera Rework already under way"===(null===t||void 0===t?void 0:t.updateCameraReworkStatus.message))return n({message:null===t||void 0===t?void 0:t.updateCameraReworkStatus.message,type:"warning"}),h(!1),void l(!1);a({action:["supervisorRequest","approve"].includes(d)?"CameraRework":"RequestCameraRework",date:{fromTimestamp:(new Date).getTime()},state:(v=d,{supervisorRequest:"Available",requestRework:"Available",deny:"Cancelled",cancelReworkRequest:"Cancelled",cancel:"Cancelled",approve:"Available"}[v]),notes:p,username:o.contactName||""}),A(e)}catch(y){c(!0),s=!1,w("")}var v;n({message:s?t:i,dismissable:!0,type:s?"success":"error"}),l(!1),E()}),[p,r,A,w,n,T,a,o,g]),S=(0,i.useCallback)((e=>{let{children:t,onClick:a,pad:r=!1}=e;return(0,k.Y)(i.Fragment,null,r&&(0,k.Y)(ae.A,null),(0,k.Y)(Z.A,{emphasis:"medium",disabled:s,onClick:a},t))}),[s]);function E(){m(""),h(!1),f(!1)}const C=g||v,x=["Available","In Progress"].includes(null===b||void 0===b?void 0:b.state),Y="RequestCameraRework"===(null===b||void 0===b?void 0:b.action),R=C&&x&&!Y,P=g&&"Available"===(null===b||void 0===b?void 0:b.state)&&Y&&!u,O=!R&&!P&&C&&!x&&!u,_=v&&!g&&Y&&"Available"===(null===b||void 0===b?void 0:b.state);return(0,k.Y)(i.Fragment,null,!d&&(0,k.Y)(i.Fragment,null,_&&(0,k.Y)(S,{pad:!0,onClick:()=>I("cancelReworkRequest")},fp.cancelReworkRequest()),O&&(0,k.Y)(S,{pad:!0,onClick:()=>h(!0)},fp.requestRework()),R&&(0,k.Y)(S,{pad:!0,onClick:()=>I("cancel")},fp.cancelRework),P&&(0,k.Y)(i.Fragment,null,(0,k.Y)(S,{pad:!0,onClick:()=>I("approve")},fp.approveRework),(0,k.Y)(S,{onClick:function(){m(""),h(!0),f(!0)}},fp.denyRework)),u&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)(td.Ay,{name:"Rework Comment",onChange:e=>m(e.target.value),value:p,placeholder:y?fp.denyNote:fp.reworkNote}),(0,k.Y)(J.Ay,null,(0,k.Y)(S,{onClick:()=>I(y?"deny":"requestRework")},fp.submit),(0,k.Y)(S,{onClick:E},fp.cancel)))))}function kp(){const[e]=(0,N.usePermission)("LightyearRequestReworkPermission","LightyearContext"),{group:{imageRework:t={},currentWorkflowActions:a=[]}}=(0,Dl.P2)(),r=e=>"SupervisorAuditReview"===e.name&&"Completed"===e.status,[n,o]=(0,i.useState)([]),[s,l]=(0,i.useState)([]),d=(0,i.useMemo)((()=>null===a||void 0===a?void 0:a.some(r)),[a]);(0,i.useEffect)((()=>{var e;if((null===t||void 0===t||null===(e=t.history)||void 0===e?void 0:e.length)>0){const e=t.history.filter((e=>!["Completed","In Progress"].includes(null===e||void 0===e?void 0:e.state)));o(e),l((null===t||void 0===t?void 0:t.history)||[])}}),[t,a]);const c=(0,i.useCallback)((e=>{o([...n,e]),l([...s,e])}),[n,s]);return(0,k.Y)(i.Fragment,null,e&&d||(null===n||void 0===n?void 0:n.length)>0?(0,k.Y)(po.A,{primaryText:fp.folderRework()},(0,k.Y)(bp,{reworkHistory:n}),(0,k.Y)(Ep,{reworkHistory:s,addReworkItem:c})):null)}const Cp=()=>o.i18n.t("internal.updateDividers.divideImageGroup","Divide Image Group"),xp=()=>o.i18n.t("internal.updateDividers.heading","Image Group Dividers"),Yp=()=>o.i18n.t("internal.updateDividers.dividedSubHeading","Adjust the divisions that separate the image group into items."),Np=()=>o.i18n.t("internal.updateDividers.undividedSubheading","Create the divisions that will separate the image group into items."),Rp=()=>o.i18n.t("internal.updateDividers.updateDividers","Update Dividers");function Pp(){const{cisId:e}=(0,Wd.useUser)(),{switchToDivideMode:t,isImageOrganizeMode:a}=(0,Dl.Oq)(),{itemCount:r,group:{workflowActions:n,id:o}}=(0,Dl.P2)(),s=null===n||void 0===n?void 0:n.divide,[l]=(0,Xd.n)(Zd.A.updateWorkflowActionStatus(),{variables:{params:{action:Qd.Oz.DIVIDE,rmsId:null===n||void 0===n?void 0:n.id,newStatus:Qd.Oz.IN_PROGRESS,createNewWorkflowAction:null===s}}}),{attachWorkflowStatuses:d}=(0,Dl.Lw)(),c=r>1,u=(0,i.useRef)(null);(0,i.useEffect)((()=>{!o||a||u.current===o&&n||(u.current=o,d())}),[d,o,a,n]);return(0,k.Y)(i.Fragment,null,(0,k.Y)(Da.A,{primaryText:xp(),secondaryText:c?Yp():Np()}),(0,k.Y)(Z.A,{onClick:()=>{c||l(),t()},disabled:"In Progress"===(null===s||void 0===s?void 0:s.status)&&(null===s||void 0===s?void 0:s.userId)!==e,emphasis:"medium"},c?Rp():Cp()),(0,k.Y)(ae.A,{size:"nano"}))}const Op=(0,k.AH)("background:",W.A.gray02,";padding:8px 16px;");function _p(e,t,a){return e&&t?[{text:a||t,to:`/records/images/search-results?${e}=${t}`}]:[]}function Fp(){var e,t;const a=(0,D.zy)(),[r,n]=(0,N.usePermission)("LightyearApproveReworkPermission","LightyearContext"),{hasEditPermissions:o}=(0,Dl.Rb)(),{group:{internalFields:s={},naturalGroupId:l=null,imageApids:d},initialGroup:c={},loading:u}=(0,Dl.P2)(),p=(0,i.useMemo)((()=>(null===d||void 0===d?void 0:d.length)<1?[]:null===d||void 0===d?void 0:d.reduce(((e,t)=>(e[(0,na.XJ)(t)]=t,e)),{})),[d]),{internalData:m,properties:g=[]}=s,v=null===c||void 0===c||null===(e=c.types)||void 0===e?void 0:e.includes("VOLUME_SET"),{isImageOrganizeMode:y}=(0,Dl.Oq)(),{query:f}=(0,G.A)(),{showRecordMetadataReview:b,showMetadataAudit:A}=(0,Dl.iB)(),w=(null===a||void 0===a||null===(t=a.pathname)||void 0===t?void 0:t.slice(12))||null,T=(0,i.useMemo)((()=>w&&Object.keys(p||{}).length>0?null===p||void 0===p?void 0:p[w]:null),[w,p]),I=(0,i.useMemo)((()=>{let e=f.groupId;return null!==m&&void 0!==m&&m.id&&(e=m.id),`${h.pc}/records/images/history/${e}`}),[m,f]),S=_p("projectId",null===m||void 0===m?void 0:m.phoenixAcquisitionIds),E=_p("naturalGroupIds",l),C=_p("cameraOperatorId",null===m||void 0===m?void 0:m.cameraOperatorNumber,null===m||void 0===m?void 0:m.cameraOperator),x=(0,i.useCallback)((()=>{const{volumeSetSearch:e,groupId:t}=f,a=`/records/images/organize/${e}/${t}`;return v&&!y&&e&&t?(0,k.Y)(Z.A,{external:!0,Icon:Kt.A,target:"_blank",to:a},rp()):null}),[y,v,f]);return(0,k.Y)(It.A,{sides:!0},(0,k.Y)("div",{css:Op},(0,k.Y)(lu,{loading:u},(0,k.Y)(re.H5,{skeletontype:"heading",supplementary:!0},tp(),(0,k.Y)(ne.A,null,dp()))),(0,k.Y)(Bn.A,null,(0,k.Y)(lu,{loading:u},(0,k.Y)(ou,{overline:lp(),hyperlinks:S}),(0,k.Y)(ou,{overline:np(),items:null===m||void 0===m?void 0:m.originalMediaNumber}),(0,k.Y)(ou,{overline:op(),hyperlinks:E}),(0,k.Y)(ou,{overline:ep(),hyperlinks:C}),(0,k.Y)(ou,{overline:ap(),hyperlinks:_p("apid",T)}),(0,k.Y)(ou,{overline:ip(),hyperlinks:_p("ark",w)}))),(0,k.Y)(lu,{loading:u},(0,k.Y)(Z.A,{Icon:Kt.A,to:I,target:"_blank",skeletontype:"button"},sp()),!b&&(0,k.Y)(i.Fragment,null,o&&!y&&!v&&!A&&(0,k.Y)(Pp,null),function(e){const t=e.find((e=>"folderQTags"===(null===e||void 0===e?void 0:e.name)&&"GROUP"===(null===e||void 0===e?void 0:e.type))),a=e.find((e=>"comments"===(null===e||void 0===e?void 0:e.name))),i=e.find((e=>"recordCaptureComment"===(null===e||void 0===e?void 0:e.name)));return t||a||i?(0,k.Y)(hp,{comments:a,folderQTags:t,recordCaptureComment:i}):null}(g),r&&"loaded"===n&&!y?(0,k.Y)(yp,{skeletontype:"expander"}):null,!y&&(0,k.Y)(kp,{skeletontype:"expander"}),(0,k.Y)(x,null)))))}const Dp=()=>th.J1`
    query getWikiLinks($placeIds: [ID]) {
      wikiLinks(placeIds: $placeIds) {
        title
        description
        url
      }
    }
  `,Mp=()=>o.i18n.t("references.research-wiki.subTitle","Wiki Page"),Hp=()=>o.i18n.t("references.image-group-does-not-belong-to-any-wikis.description","There are no wiki pages that returned for this image group."),Lp=()=>o.i18n.t("references.image-group-does-not-belong-to-the-any-collections.description","This image group does not belong to any collections."),zp=()=>o.i18n.t("references.catalog-collection.subTitle","Catalog Collection"),Vp=()=>o.i18n.t("references.historical-record-collection.subTitle","Historical Record Collection"),Bp=()=>o.i18n.t("references.references.title","References"),Gp=()=>o.i18n.t("references.collections.title","Collections"),Up=()=>o.i18n.t("references.image-group-belongs-to-the-following-collections.description","This image group is part of the following collections:"),Kp=()=>o.i18n.t("references.research-wiki.title","Research Wiki"),qp=()=>o.i18n.t("references.image-group-belongs-to-the-following-research-articles.description","These research articles may provide additional context for your search:");function jp(){return(0,k.Y)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,k.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.3333 5.33329H13.6667L12 3.66663H7C6.08333 3.66663 5.34167 4.41663 5.34167 5.33329L5.33333 15.3333C5.33333 16.25 6.08333 17 7 17H20.3333C21.25 17 22 16.25 22 15.3333V6.99996C22 6.08329 21.25 5.33329 20.3333 5.33329ZM2 6.99996H3.66667V18.6666H18.6667V20.3333H3.66667C2.75 20.3333 2 19.5833 2 18.6666L2.00833 11.1666H2V6.99996ZM19.5 14.5H7.83333L11.5833 9.49996L14.5 13.2583L16.5833 10.75L19.5 14.5ZM7 15.3333H20.3333V6.99996H12.975L12.4833 6.50829L11.3083 5.33329H7V15.3333Z",fill:"#066F90"}))}const $p=(0,k.AH)("& [class^='rowCss'] *{color:",W.A.blue60,";}& [class^='rowCss'] *:hover{text-decoration:underline;}& [class^='secondaryText'] *{color:",W.A.transparent.gray40,";}& [class^='listItemCss']{padding-bottom:16px;}"),Wp=(0,k.AH)("font-size:0.8em;color:",W.A.transparent.gray80,";padding-inline-start:5px;"),Xp="LOADING",Qp="EMPTY",Jp="OK";const Zp={collections:"lightyear.references.collections.initially-closed",wiki:"lightyear.references.wiki.initially-closed"};function em(e){let{loading:t,links:a,listRef:r,width:n,isWiki:o,onWikiOpen:s=()=>{}}=e;const l=o?Zp.wiki:Zp.collections,d=o?Kp():Gp(),c=o?qp():Up(),u=o?Ha.A:jp,h=(0,od.usePreference)(l),[p,m]=(0,i.useState)(!1),g=function(e,t,a){return e?Xp:Array.isArray(t)&&t.length>0&&a?Jp:Qp}(t,a,n),[v,y]=(0,i.useState)(!o),[f,b]=(0,i.useState)(!1);(0,i.useEffect)((()=>{v&&o&&(s(),b(!0))}),[v,o,s]);let A=v;g===Jp||p||(A=!1),!p&&h&&(A=!1);return g===Xp?(0,k.Y)(q.A.ListItem,null):(0,k.Y)(i.Fragment,null,(0,k.Y)(Ne.A,{open:A,setOpen:()=>{(0,od.setPreference)(l,A),y(!A),m(!0)}},(0,k.Y)(Re.A,{"data-testid":d,"data-open":A},d,(0,k.Y)("span",{css:Wp}," ",(()=>{var e;return g===Xp?null:!f&&o?"":`(${null!==(e=null===a||void 0===a?void 0:a.length)&&void 0!==e?e:0})`})())),(0,k.Y)(Pe.A,null,(0,k.Y)(Bn.A,{ref:r},g===Jp&&(0,k.Y)(i.Fragment,null,(0,k.Y)(te.A,{size:"xs"},c),(0,k.Y)(ae.A,{size:"nano"}),a.filter(Boolean).map((e=>(0,k.Y)("span",{key:`${e.title}-${e.type}-${e.url}`,css:$p},(0,k.Y)(Da.A,{dense:!0,overline:o?Mp():e.type,primaryText:e.title,secondaryText:e.secondaryText,startElement:(0,k.Y)(Da.A.Icon,{color:W.A.blue60,Icon:u}),to:e.url,target:"_blank",linkName:o?"wiki-article":"record-collection"}))))),g===Xp&&(0,k.Y)(q.A.ListItem,{hasIcon:!0,hasSecondLine:!0,maxWidth:"100%"}),g===Qp&&(0,k.Y)(J.Ay,{alignX:"center"},(0,k.Y)(Ft.A,{primaryColor:W.A.transparent.gray40},(0,k.Y)(te.A,{size:"sm"},o?Hp():Lp())))))),(0,k.Y)(oe.A,null))}function tm(e){var t,a,r;let{isBottomSheet:n}=e;const o=(0,Dl.P2)(),s=(0,i.useMemo)((()=>null===o||void 0===o?void 0:o.group),[o]),l=(0,i.useRef)(),d=n?null===(t=l.current)||void 0===t?void 0:t.offsetWidth:327,[c,u]=(0,i.useState)(!1),[p,{error:m}]=(0,Yl._)(ah.getGroupParents()),[g,{error:v}]=(0,Yl._)(ah.getCollection()),y=null===s||void 0===s||null===(a=s.coverages)||void 0===a?void 0:a.map((e=>{var t;return null===e||void 0===e||null===(t=e.place)||void 0===t?void 0:t.id})).filter(Boolean),{data:f,loading:b}=(0,Ou.IT)(Dp(),{variables:{placeIds:y},skip:!(null!==y&&void 0!==y&&y.length)||!c}),A=(null===f||void 0===f?void 0:f.wikiLinks)||[],[w,T]=(0,i.useState)(!1),[I,S]=(0,i.useState)([]),E=(null===s||void 0===s?void 0:s.imageGroupNumber)||(null===s||void 0===s||null===(r=s.metadata)||void 0===r?void 0:r.imageGroupNumber),C=null===s||void 0===s?void 0:s.id;(0,i.useEffect)((()=>(async function(){if(C&&E){const s=[];T(!0);try{const o=await p({variables:{rmsId:C,parentGroupType:"COLLECTION"}});if(m)console.error(m);else{var e,t,a;const l=null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.groupParents,d=null===l||void 0===l||null===(t=l[0])||void 0===t?void 0:t.groupName,c=`${h.pc}/search/catalog/results?count=20&query=%2Bfilm_number%3A${E}`,u=`${h.pc}/search/collection/${d}`,p={type:zp(),title:null===l||void 0===l||null===(a=l[0])||void 0===a?void 0:a.title,url:c};if(p.title&&s.push(p),d){var i,r,n;const e=await g({variables:{collectionId:d}});v&&(v.graphQLErrors[0].message.includes("410")?s.length>0&&s.pop():console.error(v));const t=null!==(i=null===e||void 0===e||null===(r=e.data)||void 0===r||null===(n=r.collection)||void 0===n?void 0:n.title)&&void 0!==i&&i;t&&s.push({type:Vp(),title:t,url:u})}S(s)}}catch(o){console.error(o)}T(!1)}else S([])}(),()=>{T(!1),S([])})),[p,g,v,m,E,C]);const x=b||w;return(0,k.Y)("div",{id:"shared-image-viewer-references-section"},(0,k.Y)(ae.A,null),x?(0,k.Y)(q.A.Paragraph,{size:"sm"}):(0,k.Y)(re.H6,null,Bp()),(0,k.Y)(em,{loading:x,links:I,listRef:l,width:d}),(0,k.Y)(em,{loading:x,links:A,listRef:l,width:d,isWiki:!0,onWikiOpen:()=>{u(!0)}}),(0,k.Y)(ae.A,null))}Object.values(Zp).forEach((e=>{(0,od.preCachePreferences)(e)}));const am={archivalReferenceNumber:()=>o.i18n.t("ChangeHistory.archivalReferenceNumber","Archival Reference Number"),archivalReferenceNumberRemoved:()=>o.i18n.t("ChangeHistory.archivalReferenceNumberRemoved","The Archival Reference Number was removed."),backButtonText:()=>o.i18n.t("ChangeHistory.backButtonText","Back"),by:()=>o.i18n.t("ChangeHistory.by","by"),cancel:()=>o.i18n.t("common-ui:cancel.action"),changedAt:(e,t)=>o.i18n.t("ChangeHistory.changedAt","Changed at {time} by {user}",{time:e,user:t}),changeHistorySub:()=>o.i18n.t("ChangeHistory.changeHistorySub","Changes to Image Group Data"),changeHistoryTitle:()=>o.i18n.t("ChangeHistory.changeHistoryTitle","Change History"),creator:()=>o.i18n.t("ChangeHistory.creator","Creator"),creatorRemoved:()=>o.i18n.t("ChangeHistory.creatorRemoved","Creator Removed"),currentVersion:()=>o.i18n.t("ChangeHistory.currentVersion","Current Version"),currentVersionDescription:()=>o.i18n.t("ChangeHistory.currentVersionDescription","This is the latest metadata so the Restore button is not available."),dateAndTimeSelect:()=>o.i18n.t("ChangeHistory.dateAndTimeSelect","Date and Time of Change"),errorRestoreMessage:()=>o.i18n.t("ChangeHistory.errorRestoreMessage","Error restoring changes"),failureRestoreMessage:()=>o.i18n.t("ChangeHistory.failureRestoreMessage","Some fields may not have restored properly. Please double check."),languages:()=>o.i18n.t("common-ui:language.label","Language"),languagesRemoved:()=>o.i18n.t("ChangeHistory.languagesRemoved","The language was removed."),lastChangedBy:(e,t)=>o.i18n.t("ChangeHistory.LastChangedBy","Last Changed: {date} by {user}",{date:e,user:t}),loadChangeHistory:()=>o.i18n.t("ChangeHistory.loadChangeHistory","Load Change History"),next:()=>o.i18n.t("ChangeHistory.next","Next"),none:()=>o.i18n.t("ChangeHistory.none","none"),previous:()=>o.i18n.t("ChangeHistory.previous","Previous"),restoreDialogHeader:()=>o.i18n.t("ChangeHistory.restoreDialogHeader","Restore a previous version"),restore:()=>o.i18n.t("ChangeHistory.restore","Restore"),restoreVolume:()=>o.i18n.t("ChangeHistory.restoreVolume","Restore Volume"),removeVolume:()=>o.i18n.t("ChangeHistory.removeVolume","Remove Volume"),selectLabel:()=>o.i18n.t("ChangeHistory.selectLabel","Change date and time"),showHistoryButtonText:()=>o.i18n.t("ChangeHistory.ShowHistoryButtonText","Show Change History"),successRestoreMessage:()=>o.i18n.t("ChangeHistory.successRestoreMessage","Successfully restored changes"),title:()=>o.i18n.t("common-ui:title.item","Title"),titleRemoved:()=>o.i18n.t("ChangeHistory.titleRemoved","The title was removed."),unknown:()=>o.i18n.t("ChangeHistory.unknown","Unknown"),volumes:()=>o.i18n.t("ChangeHistory.volume","Volume"),volumesRemoved:()=>o.i18n.t("ChangeHistory.volumeRemoved","The volume was removed.")};function im(e){let{onFinish:t,isCurrentVersion:a,restoreData:r,wasRemoved:n=!1,date:o}=e;const s=(0,$.Ay)(),[l,d]=(0,i.useState)(!1),c=(0,Dl.u9)(),u=(0,i.useMemo)((()=>null==o?am.unknown():c({date:o})),[o,c]),h=function(e){let{onFinish:t,setLoading:a,restoreData:r}=e;const{saveGroupData:n}=(0,Dl.Dt)(),o=(0,_t.mb)();return(0,i.useCallback)((async()=>{a(!0);try{const e=await n(r,!0);o({message:e.success?am.successRestoreMessage():am.failureRestoreMessage(),type:e.success?"success":"warning"}),"function"===typeof t&&t()}catch(e){o({message:am.errorRestoreMessage(),type:"error"})}a(!1)}),[a,n,r,o,t])}({restoreData:r,setLoading:d,onFinish:t}),p=(0,i.useCallback)((async()=>{await h(),s.close()}),[h,s]);return n?null:(0,k.Y)(i.Fragment,null,a?(0,k.Y)(Hs.A,{label:am.currentVersion(),description:am.currentVersionDescription(),target:(0,k.Y)(rm,{loading:l,onClick:s.handleClick,disabled:!0},am.currentVersion())}):(0,k.Y)(rm,{loading:l,onClick:s.handleClick},am.restore()),(0,k.Y)(Ze.A,(0,j.A)({},s,{title:am.restoreDialogHeader(),size:"md"}),(0,k.Y)(O.x,{i18nKey:"ChangeHistory.restoreDialogContent",values:{date:u},defaults:"This will change the information to what it was on <0></0> {date}",components:[(0,k.Y)("br",null)]}),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{onClick:s.close},am.cancel()),(0,k.Y)(Z.A,{"data-testid":"dialog-restore-btn",emphasis:"high",Icon:l?g.A:null,disabled:l,onClick:()=>p()},am.restore())))))}function rm(e){let{loading:t,onClick:a,children:i,disabled:r=!1}=e;return(0,k.Y)(Z.A,{emphasis:"low",Icon:t?g.A:null,disabled:t||r,onClick:a,"data-testid":"restore-button"},i)}const nm={name:"1kwa2hn",styles:"& > div{display:block;}"};function om(e){let{restoreStatus:t,onFinish:a,children:r,date:n}=e;const[o,s]=(0,N.usePermission)("LightyearImageOrganizePermission","LightyearContext"),[l,d]=(0,N.usePermission)("RMSAdminPermission","RMSContext"),[c,u]=(0,N.usePermission)("RMSGroupWritePermission","RMSContext"),h=[s,d,u].every((e=>"loaded"===e))&&o&&(l||c);return t?(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)("div",{css:nm},(0,k.Y)(Ye.A,{edges:"border"},(0,k.Y)(Bn.A,null,r),h&&t&&(0,k.Y)(im,{isCurrentVersion:"CURRENT"===t.status,restoreData:t.data,onFinish:a,wasRemoved:"REMOVED"===t.status,date:n})))):null}const sm=e=>(0,k.AH)("p:has([data-date-list]){max-width:",e?"40vw":"150px",";margin-top:4px;text-align:end;padding-inline-start:18px;}"),lm=e=>(0,k.AH)("width:100%;max-width:",e?"40vw":"150px",";text-align:start;");function dm(e){let{coverages:t}=e;const[a]=(0,P.B)(),r=(0,ci.Ay)()({default:!0,lg:!1}),n=(0,i.useCallback)((e=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=e.reduce(((e,t)=>Number.isInteger(null===t||void 0===t?void 0:t.fromTimestamp)?[...e,(0,Uu.A)(t.fromTimestamp,t.toTimestamp,Uu.z.formatted)]:e),[]);return new Intl.ListFormat(o.i18n.language,{style:"narrow",type:"conjunction"}).format(t)}(e)),[]),s=e=>{let{key:t,name:i="",dates:n=""}=e;return(0,k.Y)(Da.A,{key:t,dense:!0,primaryText:"",secondaryText:(0,k.Y)("div",{css:lm(r)},i||a("RecordType.noRecordType","No Record Type")),endElement:(0,k.Y)(Da.A.MetaText,{text:n?(0,k.Y)(uh.A,{lineClamp:2},(0,k.Y)("span",{"data-date-list":!0},n)):a("RecordType.noDate","No Date")})})};return(0,k.Y)("div",{css:sm(r)},(0,k.Y)(Bn.A,null,null===t||void 0===t?void 0:t.map((e=>{let{place:t,recordTypes:a}=e;return(0,k.Y)(po.A,{key:null===t||void 0===t?void 0:t.id,dense:!0,primaryText:null===t||void 0===t?void 0:t.fullName,initiallyOpen:!0},null===a||void 0===a?void 0:a.map((e=>(0,k.Y)(s,{key:`${null===t||void 0===t?void 0:t.id}-${e.id}`,name:e.name,dates:n(e.date)}))))}))),(0,k.Y)(oe.A,null))}function cm(e){var t,a;let{onFinish:r,selectedChanges:n}=e;const o=(0,Dl.P2)(),s=null===o||void 0===o||null===(t=o.group)||void 0===t?void 0:t.coverages,l=null===n||void 0===n?void 0:n.coverages,d=(0,i.useMemo)((()=>{if(null==l||null==s)return null;const e={};var t,a;return(t=l,a=s,dt()(um(t),um(a)))?e.status="CURRENT":dt()(l,[])?e.status="REMOVED":e.status="RESTORE",e.data={coverages:l},e}),[s,l]);return Array.isArray(null===n||void 0===n?void 0:n.coverages)?(0,k.Y)(om,{onFinish:r,restoreStatus:d,date:null===n||void 0===n||null===(a=n.date)||void 0===a?void 0:a.fromTimestamp},(0,k.Y)(dm,{coverages:n.coverages,smallText:!0}),(0,k.Y)(ae.A,{size:"xxs"})):null}function um(e){const t=[];return e.forEach((e=>{const a=[];e.recordTypes.forEach((e=>{const t=(e=>{let{apolloId:t,id:a,...i}=e;return i})(e);a.push(t)})),t.push({...e,recordTypes:a})})),t}const hm={changeHistoryP:{name:"js1si6",styles:"margin:0;font-size:small;"},loading:{name:"h0khzz",styles:"display:flex;justify-content:center;align-items:center;min-height:25vh;overflow-y:none;svg{height:40px;width:40px;}"},navButton:{name:"o77cmz",styles:"align-self:center;margin-top:10px;padding:0;"},navWrapper:{name:"3kmgc3",styles:"display:flex;gap:8px;padding:0;width:100%;justify-content:space-between;select{width:100%;}"},openChangeHistory:{name:"1w0ym84",styles:"padding:8px 0;"}};function pm(e){let{history:t=[],onChange:a,currentDateTime:r}=e;const n=(0,i.useMemo)((()=>{let e={};return t&&t.forEach((t=>{var a,i,r;if(null==(null===t||void 0===t||null===(a=t.date)||void 0===a?void 0:a.fromTimestamp))return;const n=(0,Uu.A)(t.date.fromTimestamp,t.date.toTimestamp,Uu.z.formattedFullWithTime),o=(0,Uu.A)(null===t||void 0===t||null===(i=t.date)||void 0===i?void 0:i.fromTimestamp,null===t||void 0===t||null===(r=t.date)||void 0===r?void 0:r.toTimestamp,Uu.z.formattedCompactWithHourMinute)||n;e={...e,[n]:{value:n,label:o,key:t.date.fromTimestamp}}})),Object.values(e)}),[t]),o=(0,i.useMemo)((()=>{const e=n.findIndex((e=>e.value===r));var t;return e>0?null===(t=n[e-1])||void 0===t?void 0:t.value:null}),[n,r]),s=(0,i.useMemo)((()=>{const e=n.findIndex((e=>e.value===r));var t;return e>-1&&e<n.length-1?null===(t=n[e+1])||void 0===t?void 0:t.value:null}),[n,r]),l=(0,i.useCallback)((e=>{r&&"function"===typeof a&&a((()=>"backward"===e?s:"forward"===e?o:e))}),[r,o,s,a]);return(0,k.Y)(It.A,null,(0,k.Y)("div",{css:hm.navWrapper},(0,k.Y)("div",{css:hm.navButton},(0,k.Y)(ee.A,{"data-testid":"back-nav-button",disabled:!s,Icon:pe.A,iconDirection:"backward",onClick:()=>l("backward"),description:am.previous()})),(0,k.Y)(qd.A,{label:am.dateAndTimeSelect(),options:n,value:r,hidePlaceholder:!0,onChange:e=>l(e.target.value)}),(0,k.Y)("div",{css:hm.navButton},(0,k.Y)(ee.A,{"data-testid":"forward-nav-button",disabled:!o,Icon:pe.A,iconDirection:"forward",onClick:()=>l("forward"),description:am.next()}))))}const mm=["title","languages","archivalReferenceNumber","volumes","creator"];function gm(e){let{selectedChanges:t,onFinish:a}=e;const r=null===t||void 0===t?void 0:t.metadata,n=(0,Dl.P2)(),{getLanguagesFromCodes:o}=(0,Dl.Jt)(),s=(0,i.useCallback)((e=>{if(null==e)return null;if(dt()(e,[]))return[];return o(e)}),[o]);return null!=r?(0,k.Y)(i.Fragment,null,Object.keys(r).map((e=>{var i,o,l;if(null==(null===r||void 0===r?void 0:r[e])||!mm.includes(e)||Array.isArray(r[e])&&0===r[e].length)return null;let d=r[e];const c=function(e,t,a){if(null==e||null==t)return null;const i={data:{metadata:{}}};r=e,n=t,dt()(Array.isArray(r)?vm(r):r,Array.isArray(n)?vm(n):n)?i.status="CURRENT":!function(e){if(Array.isArray(e))return!!dt()(e,[]);return""===e}(e)?i.status="RESTORE":i.status="REMOVED";var r,n;return i.data.metadata[a]=e,i}(d,null===n||void 0===n||null===(i=n.group)||void 0===i||null===(o=i.metadata)||void 0===o?void 0:o[e],e);return"languages"===e&&(d=s(null===r||void 0===r?void 0:r[e])),(0,k.Y)(om,{restoreStatus:c,date:null===t||void 0===t||null===(l=t.date)||void 0===l?void 0:l.fromTimestamp,onFinish:a,key:e},(0,k.Y)(ou,{overline:am[e](),items:"REMOVED"===(null===c||void 0===c?void 0:c.status)?[`(${am.none()})`,am[`${e}Removed`]()]:d,hasMoreLess:!1}))}))):null}function vm(e){return e.reduce(((e,t)=>({...e,[t]:t})),{})}function ym(e){var t,a,r;let{changeHistory:n=[]}=e;const[o,s]=(0,i.useState)(null),{closeOverlay:l}=(0,Ti.HQ)();(0,i.useEffect)((()=>{var e,t;Array.isArray(n)&&null!==n&&void 0!==n&&null!==(e=n[0])&&void 0!==e&&null!==(t=e.date)&&void 0!==t&&t.fromTimestamp&&s((0,Uu.A)(n[0].date.fromTimestamp,n[0].date.toTimestamp,Uu.z.formattedFullWithTime))}),[n]);const[d,c]=(0,i.useState)(null);(0,i.useEffect)((()=>{if(null==o||!Array.isArray(n)||n.length<1)return;const e=function(e,t){let a;e&&e.forEach(((e,i)=>{var r,n;(0,Uu.A)(null===e||void 0===e||null===(r=e.date)||void 0===r?void 0:r.fromTimestamp,null===e||void 0===e||null===(n=e.date)||void 0===n?void 0:n.toTimestamp,Uu.z.formattedFullWithTime)===t&&(a=a?function(e,t){const a={coverages:null,metadata:{title:null,languages:null,archivalReferenceNumber:null,volumes:null,creator:null}};return a.coverages=fm(null===e||void 0===e?void 0:e.coverages,null===t||void 0===t?void 0:t.coverages),a.metadata.title=fm(e.metadata.title,t.metadata.title),a.metadata.languages=fm(e.metadata.languages,t.metadata.languages),a.metadata.volumes=fm(e.metadata.volumes,t.metadata.volumes),a.metadata.archivalReferenceNumber=fm(e.metadata.archivalReferenceNumber,t.metadata.archivalReferenceNumber),a.metadata.creator=fm(e.metadata.creator,t.metadata.creator),{...e,...a}}(a,e):{...e,index:i})}));return Object.keys(a).length>1?a:a.index}(n,o);c((()=>"number"===typeof e?n[e]:e))}),[n,o]);const u=(0,Dl.u9)(),h=null===d||void 0===d||null===(t=d.date)||void 0===t?void 0:t.fromTimestamp,p=(0,Uu.A)(h,null===d||void 0===d||null===(a=d.date)||void 0===a?void 0:a.toTimestamp,Uu.z.formatted),m=(0,i.useMemo)((()=>{if(!h)return am.unknown();return u({date:h,options:{hour:"numeric",minute:"numeric",second:"numeric"}})}),[u,h]);return(0,k.Y)(i.Fragment,null,(0,k.Y)(pm,{history:n,onChange:s,currentDateTime:o}),(0,k.Y)(_e.A,{heading:p||"",data:(0,k.Y)("div",{css:hm.changeHistoryP},am.changedAt(m,(null===d||void 0===d||null===(r=d.user)||void 0===r?void 0:r.contactName)||am.unknown()))}),n&&d&&o&&(0,k.Y)(i.Fragment,null,(0,k.Y)(cm,{onFinish:()=>l("groupHistoryOverlay"),selectedChanges:d}),(0,k.Y)(gm,{onFinish:()=>l("groupHistoryOverlay"),selectedChanges:d})))}function fm(e,t){return null!=e?e:null!=t?t:null}const bm=i.lazy((()=>a.e(12570).then(a.bind(a,12570))));function Am(e){var t;let{hideHeader:a}=e;const[r,n]=(0,N.usePermission)("LightyearInternalSearchPermission","LightyearContext"),{query:o}=(0,G.A)(),{initialGroup:s={}}=(0,Dl.P2)(),{isImageOrganizeMode:l}=(0,Dl.Oq)(),{hasEditPermissions:d}=(0,Dl.Rb)(),{openOverlay:c,groupHistoryOverlay:u}=(0,Ti.HQ)(),h=(0,Dl.zm)(),p=null===o||void 0===o?void 0:o.feedback,[m,{data:v,loading:y}]=(0,Yl._)(Jd.A.getGroupChangeHistory(),{variables:{groupId:o.groupId}}),f=null===s||void 0===s||null===(t=s.types)||void 0===t?void 0:t.includes("VOLUME_SET"),b=(0,i.useCallback)((()=>{c("editMetadataOverlay")}),[c]),A=(0,i.useCallback)((()=>a?null:l&&!f?(0,k.Y)(eu,{hideEditButton:!d,onEditClick:b}):(0,k.Y)(Ud,{onEditClick:b,hideEditButton:!d})),[d,a,l,f,b]),w=(0,i.useCallback)((async()=>{v||await m(),c("groupHistoryOverlay")}),[c,m,v]),T=(0,i.useMemo)((()=>{var e,t,a,i;const r=null===v||void 0===v||null===(e=v.getGroupHistory)||void 0===e?void 0:e[0];if(!r)return null;const n=(null===r||void 0===r||null===(t=r.user)||void 0===t?void 0:t.contactName)||am.unknown(),o=(0,Uu.A)(null===r||void 0===r||null===(a=r.date)||void 0===a?void 0:a.fromTimestamp,null===r||void 0===r||null===(i=r.date)||void 0===i?void 0:i.toTimestamp,Uu.z.formattedFullWithTime)||am.unknown();return am.lastChangedBy(o,n)}),[v]);return(0,i.useEffect)((()=>{o.groupHistory&&!v&&o.groupId&&w()}),[o,w,v]),(0,k.Y)(It.A,{bottom:!0},f&&(0,k.Y)(Ru,{groupId:s.id,metadata:h}),(0,k.Y)(A,null),(0,k.Y)(ch,null),(0,k.Y)(tm,null),(0,k.Y)(Jh,{hiddenFields:f?["archivalReferenceNumber"]:[]}),p&&(0,k.Y)(i.Suspense,{fallback:null},(0,k.Y)(bm,null)),(0,k.Y)("div",{css:Ml.openChangeHistory},(0,k.Y)(te.A,{size:"sm"},T),(0,k.Y)(Z.A,{emphasis:"low",keyline:"left",onClick:w,disabled:y,Icon:y?g.A:null},v?am.showHistoryButtonText():am.loadChangeHistory())),(0,k.Y)(hi.A,(0,j.A)({},u,{title:am.changeHistoryTitle(),subtitle:am.changeHistorySub()}),(0,k.Y)(ym,{changeHistory:(null===v||void 0===v?void 0:v.getGroupHistory)||[]})),r&&"loaded"===n&&(0,k.Y)(Fp,null),l&&!f&&(0,k.Y)(Qc,null))}function wm(){var e;const[t]=(0,P.B)(),a=(0,b.A)(),{openOverlay:r}=(0,Ti.HQ)(),n=null===(e=a.personOrder)||void 0===e?void 0:e.find((e=>e.partitionKey===a.currentImageArk)),{noPeople:o,isJiapu:s}=Ce({images:null===a||void 0===a?void 0:a.images,currentImageArk:null===a||void 0===a?void 0:a.currentImageArk,personIdsOrder:null===n||void 0===n?void 0:n.personIds,thumbnails:null===a||void 0===a?void 0:a.thumbnails}),l=t("select-person.normal.heading","Indexed Data"),d=o||s?"":t("select-person.normal.subheading","Select a name to continue"),c=(0,i.useMemo)((()=>{var e;const t=null===(e=a.images)||void 0===e?void 0:e.find((e=>e.partitionKey===a.currentImageArk));return"5000196"===(t&&(0,A.EG)(t))}),[a.currentImageArk,a.images]);return(0,k.Y)(It.A,{top:!0},(0,k.Y)(Q.Ay,{color:W.A.gray02},(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(J.Ay,{gutters:"lg"},(0,k.Y)(re.H5,null,l),(0,k.Y)("div",{style:{paddingTop:6}},(0,k.Y)(ee.A,{Icon:Ei.A,title:t("select-person.edit-records","Edit Records"),onClick:()=>r("dragNames"),dense:!0,disabled:c||o||s}))),(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(te.A,{size:"xs"},d),(0,k.Y)(ae.A,{size:"xs"})))}function Tm(){const[e]=(0,P.B)();return(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)(_e.A,{heading:e("select-person.title.heading","Names not in records"),data:e("select-person.title.subheading","Add relationships to connect a name to the correct record.")}),(0,k.Y)(ae.A,{size:"xs"}))}const Im=(0,y.Ay)("rip:R2:SelectPerson");function Sm(e){var t,a,r;let{loading:n=!1}=e;const[o]=(0,P.B)(),[s,l]=(0,i.useState)(null),{rip_sharedImageViewer_addIndex:d,rip_sharedImageViewer_history_NewLook:c}=(0,L.h)(["rip_sharedImageViewer_addIndex","rip_sharedImageViewer_history_NewLook"]),u=(0,b.A)(),{currentImageArk:h}=u,[p,g]=(0,i.useState)(null),v=null===(t=u.personOrder)||void 0===t?void 0:t.find((e=>e.partitionKey===h)),y=(0,A.Qp)(u.images,null===u||void 0===u?void 0:u.currentImageArk),{allRecords:f,floatingPersons:w,noPeople:T,imageHasData:I,isJiapu:S}=Ce({images:null===u||void 0===u?void 0:u.images,currentImageArk:null===u||void 0===u?void 0:u.currentImageArk,personIdsOrder:null===v||void 0===v?void 0:v.personIds,thumbnails:null===u||void 0===u?void 0:u.thumbnails}),E=n||u.loading,C=n||T&&u.loading,x=e=>{l(e)};Im({allRecords:f,floatingPersons:w,noPeople:T,imageHasData:I}),(0,i.useEffect)((()=>{let e=!0;return(0,m.Ht)().then((t=>{e&&g(t)})),()=>{e=!1}}),[]);const Y=0===(null===p||void 0===p||null===(a=p.users)||void 0===a?void 0:a.length)?"Sign in to view indexing information.":"This image has not been indexed.",N=(null===y||void 0===y||null===(r=y.subElements)||void 0===r?void 0:r.length)>0;return Im("SelectPerson: ",{floatingPersons:w,hasRecords:N,allRecords:f,session:p,isJiapu:S,globalLoading:E}),(0,k.Y)(i.Fragment,null,(0,k.Y)(wm,null),(0,k.Y)(ae.A,{size:"xs"}),null===f||void 0===f?void 0:f.map(((e,t)=>{var a;const r=null===e||void 0===e||null===(a=e.subElements)||void 0===a?void 0:a.filter((e=>"PERSON"===(null===e||void 0===e?void 0:e.elementType)&&(null===e||void 0===e?void 0:e.partitionKey)===h));return(0,k.Y)("div",{key:null===e||void 0===e?void 0:e.id},r&&r.length>0&&0!==t&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(oe.A,{fullWidth:!0}),(0,k.Y)(ae.A,{size:"xs"})),r&&r.length>0&&(0,k.Y)(Bn.A,null,r.map((t=>(0,k.Y)(Qs,{person:t,t:o,key:null===t||void 0===t?void 0:t.id,record:e,isSelected:s===(null===t||void 0===t?void 0:t.id),onPersonSelect:x})))),(0,k.Y)(al,{record:e}))})),w&&!S&&(null===w||void 0===w?void 0:w.length)>0&&(0,k.Y)("div",null,(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(oe.A,{fullWidth:!0}),(0,k.Y)(Tm,null),w.sort(((e,t)=>e.primary>t.primary?-1:1)).map((e=>(0,k.Y)(Qs,{person:e,zionSlsState:u,t:o,key:null===e||void 0===e?void 0:e.id,isSelected:s===(null===e||void 0===e?void 0:e.id),onPersonSelect:x})))),!d.isOn&&!E&&(T||!I||S)&&(0,k.Y)(i.Fragment,null,(0,k.Y)(Dt.A,{src:il,alt:""}),(0,k.Y)(te.A,{size:"sm",centered:!0},Y)),d.isOn&&u.currentImageArk&&!E&&(!I||S)&&(0,k.Y)(i.Fragment,null,(0,k.Y)(Dt.A,{src:rl,alt:""}),(0,k.Y)(te.A,{size:"sm",centered:!0},o("select-person.subheading.add-name","Select the Add button below to transcribe the first name on this image."))),C&&(0,k.Y)(Bn.A,null,(0,k.Y)(q.A.ListItem,{hasSecondLine:!0}),(0,k.Y)(q.A.ListItem,{hasSecondLine:!0}),(0,k.Y)(q.A.ListItem,{hasSecondLine:!0}),(0,k.Y)(q.A.ListItem,{hasSecondLine:!0}),(0,k.Y)(q.A.ListItem,{hasSecondLine:!0}),(0,k.Y)(q.A.ListItem,{hasSecondLine:!0}),(0,k.Y)(q.A.ListItem,{hasSecondLine:!0}),(0,k.Y)(q.A.ListItem,{hasSecondLine:!0}),(0,k.Y)(q.A.ListItem,{hasSecondLine:!0}),(0,k.Y)(q.A.ListItem,{hasSecondLine:!0}),(0,k.Y)(q.A.ListItem,{hasSecondLine:!0}),(0,k.Y)(q.A.ListItem,{hasSecondLine:!0})),!c.isOn&&!S&&(0,k.Y)(Di,{count:3}),!E&&I&&N&&!S&&(0,k.Y)(Ji,null))}const Em=e=>null===e||void 0===e?void 0:e.flatMap((e=>{var t;return(null===(t=e.subElements)||void 0===t?void 0:t.flatMap((e=>({displayLabel:null===e||void 0===e?void 0:e.displayLabel,value:(0,A.OV)(e),id:null===e||void 0===e?void 0:e.id,fieldType:null===e||void 0===e?void 0:e.fieldType,superElements:null===e||void 0===e?void 0:e.superElements,personId:null===e||void 0===e?void 0:e.personId}))))||[]})).filter((e=>e.value));function km(e){let{heading:t,values:a}=e;return(0,k.Y)(i.Fragment,null,t&&(0,k.Y)(i.Fragment,null,(0,k.Y)("strong",null,t),(0,k.Y)("br",null)),a.map((e=>{let{displayLabel:t,value:a,id:i}=e;return a&&t&&"<Unknown Type>"!==t&&(0,k.Y)("span",{key:i},t,": ",a,(0,k.Y)("br",null))})))}const Cm=e=>{let{person:t,images:a}=e;const[r]=(0,P.B)(),n=(0,Ie.FA)(t,a,!1);return(0,k.Y)(i.Fragment,null,n.map(((e,t)=>{const i=(0,A.rr)(a,e.otherPersonId);return t<4?(0,k.Y)(te.A,{size:"sm",key:e.id,dense:!0},(0,k.Y)("strong",null,e.label,": "),(0,Ee.hA)({person:i})):null})),n.length>4&&(0,k.Y)(Z.A,{linkName:"See More","data-testid":"see-more-button",color:"gray",onClick:()=>{}},r("family-review.field.display.toggleInfo.more","See More")))},xm=e=>{let{event:t}=e;if(!t)return"";const a=Em(t.subElements.filter((e=>"DATE"===e.elementType))).slice(0,2),r=Em(t.subElements.filter((e=>"PLACE"===e.elementType))).slice(0,2);return(0,k.Y)(i.Fragment,null,a.map((e=>{let{displayLabel:t,value:a,id:i}=e;return(0,k.Y)(km,{values:[{displayLabel:t,value:a,id:i}],key:i})})),a.length>0&&(0,k.Y)(ae.A,{size:"xs"}),r.map((e=>{let{displayLabel:t,value:a,id:i}=e;return(0,k.Y)(km,{values:[{displayLabel:t,value:a,id:i}],key:i})})))},Ym=e=>{let{person:t,type:a}=e;const i=(0,A.q5)(t,a),r=(0,A.OV)(i.find((e=>{var t;return(null===(t=e.fieldValues)||void 0===t?void 0:t.length)>0})));return(0,k.Y)(te.A,{size:"sm",dense:!0},r)||""},Nm=e=>{let{primaryText:t}=e;return(0,k.Y)(Da.A,{primaryText:t,endElement:(0,k.Y)(Da.A.Icon,{Icon:pe.A}),dense:!0})};function Rm(e){let{person:t,record:a,i:r,primaryEvent:n,otherEventsFormatted:o,maxOtherEventColumns:s}=e;const[l]=(0,P.B)(),d=(0,ci.Ay)(),c=d({default:!0,md:!1}),u=d({default:!0,lg:!1}),h=d({default:!0,xl:!1}),p=d({default:!0,xxl:!1}),{setQuery:m}=(0,G.A)(),g=(0,je.mS)(),v=(0,je.vl)(),y=(0,b.A)(),{highlightPersonNameHighlight:f,highlightRecordHighlight:w,resetPersonNameHighlights:T,resetRecordHighlights:I,getIsSelected:S}=js(),{currentImageArk:E}=y,{openOverlay:C,topMostPanel:x}=(0,Ti.HQ)(),{attachmentOrMatchId:Y}=Xs({person:t}),N=(0,A.q5)(a,"PERSON"),R=null===a||void 0===a?void 0:a.subElements.filter((e=>"PERSON"===e.elementType)),O=(null===N||void 0===N?void 0:N.filter((e=>(null===e||void 0===e?void 0:e.partitionKey)!==E)))||[],_=r===(null===R||void 0===R?void 0:R.length)-1,F=(null===O||void 0===O?void 0:O.length)>0,D=!_||F,M=(0,i.useCallback)((()=>{if(null===o||void 0===o||!o.length)return{};return(null===o||void 0===o?void 0:o.map(((e,a)=>{const i=e.events.find((e=>e.superElements[0].id===t.id));return a===o.length-1?{[`column${a+7}`]:(0,k.Y)(Nm,{primaryText:(0,k.Y)(xm,{event:i})})}:{[`column${a+7}`]:(0,k.Y)(xm,{event:i})}})).slice(0,s)).reduce(((e,t)=>({...e,...t})),{})}),[o,t.id,s]),H=(0,i.useCallback)((()=>{const e=(0,k.Y)(Ym,{person:t,type:"RACE_OR_COLOR"}),a=(0,k.Y)(Ym,{person:t,type:"SEX_CODE"}),i=(0,k.Y)(Ym,{person:t,type:"AGE"}),r=(0,k.Y)(Cm,{person:t,images:y.images})||"";return c?{column2:e,column3:(0,k.Y)(Nm,{primaryText:a})}:u?{column2:e,column3:a,column4:(0,k.Y)(Nm,{primaryText:i})}:h?{column2:e,column3:a,column4:i,column5:(0,k.Y)(Nm,{primaryText:r})}:p?{column2:e,column3:a,column4:i,column5:r,column6:(0,k.Y)(Nm,{primaryText:(0,k.Y)(xm,{event:n})})}:{column2:e,column3:a,column4:i,column5:r,column6:(0,k.Y)(xm,{event:n}),...M()}}),[M,n,t,y.images,c,u,h,p]),L=`${(0,Ie.UR)(t,y.types,a,l)}`,z=(0,Ie.ON)(null,L);return(0,k.Y)(Fe.lT,(0,j.A)({to:()=>{},onClick:()=>{C("viewIndex"),v({type:"NAV_SELECT_TO_VIEW",value:{personId:g.highlightedPersonId,recordId:null===a||void 0===a?void 0:a.id}}),(0,vi.sx)({event_name:"click_action",link_name:"Edit: Select Person"}),m({personArk:`/ark:/61903/${g.highlightedPersonId}`})},onMouseEnter:()=>{f({person:t}),w({record:a})},onMouseLeave:()=>{x()||(T(),I())},selected:S({record:a,person:t}),noBottomDivider:D,name:t.id,"data-testid":"person-table-row",column1:(0,k.Y)(Da.A,{overline:z,primaryText:(0,Ee.hA)({person:t}),startElement:Y?(0,k.Y)(Da.A.Icon,{Icon:qs.A,"data-testid":`source-linker-button-${Y}`}):(0,k.Y)(Da.A.Filler,{width:18}),emphasized:!(null===t||void 0===t||!t.primary),dense:!0})},H()))}function Pm(){var e;const{rip_sharedImageViewer_addIndex:t}=(0,L.h)(["rip_sharedImageViewer_addIndex"]),[a]=(0,P.B)(),r=(0,ci.Ay)()({default:"default",sm:"sm",md:"md",lg:"lg",xl:"xl",xxl:"xxl"}),n=(0,b.A)(),{currentImageArk:o}=n,s=null===(e=n.personOrder)||void 0===e?void 0:e.find((e=>e.partitionKey===o)),{allRecords:l,floatingPersons:d,imageHasData:c,noPeople:u}=Ce({images:null===n||void 0===n?void 0:n.images,currentImageArk:null===n||void 0===n?void 0:n.currentImageArk,personIdsOrder:null===s||void 0===s?void 0:s.personIds,thumbnails:null===n||void 0===n?void 0:n.thumbnails}),h=(0,i.useMemo)((()=>null===l||void 0===l?void 0:l.flatMap((e=>{var t;return null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t.filter((e=>"PERSON"===(null===e||void 0===e?void 0:e.elementType)&&(null===e||void 0===e?void 0:e.partitionKey)===o))}))),[l,o]),p=(0,i.useMemo)((()=>null===h||void 0===h?void 0:h.flatMap((e=>null===e||void 0===e?void 0:e.subElements.filter((e=>"EVENT"===(null===e||void 0===e?void 0:e.elementType)))))),[h]),m=null===p||void 0===p?void 0:p.find((e=>e.primary)),v=(0,i.useMemo)((()=>null===p||void 0===p?void 0:p.filter((e=>!e.primary))),[p]),y=(0,i.useMemo)((()=>Sn(null===v||void 0===v?void 0:v.flatMap((e=>({type:e.eventType,displayLabel:e.displayLabel,events:[]}))))),[v]);v.forEach((e=>{y.find((t=>t.type===e.eventType)).events.push(e)}));const f=(0,i.useMemo)((()=>({name:a("edit-essential-info.title","Name"),raceOrColor:a("edit-essential-info.race-or-color","Race Or Color"),sex:a("edit-essential-info.sex-code","Sex"),age:a("edit-age.heading","Age"),relationships:a("edit-relationships.heading","Relationships"),primaryEvent:null===m||void 0===m?void 0:m.displayLabel})),[m,a]),w=(0,i.useCallback)((()=>y.map((e=>e.displayLabel)).slice(0,4)),[y]),T=(0,i.useMemo)((()=>({default:{labels:[f.name,f.raceOrColor]},sm:{labels:[f.name,f.raceOrColor,f.sex]},md:{labels:[f.name,f.raceOrColor,f.sex,f.age]},lg:{labels:[f.name,f.raceOrColor,f.sex,f.age,f.relationships]},xl:{labels:[f.name,f.raceOrColor,f.sex,f.age,f.relationships,f.primaryEvent]},xxl:{labels:[f.name,f.raceOrColor,f.sex,f.age,f.relationships,f.primaryEvent,...w()]}})),[f,w]),I=e=>{let{person:t,record:i}=e;const r=`${(0,Ie.UR)(t,n.types,i,a)}`;return(0,Ie.ON)(null,r)},S=(0,i.useMemo)((()=>T[r].labels.length),[T,r]);return(0,k.Y)(i.Fragment,null,(0,k.Y)(wm,null),(0,k.Y)(Q.Ay,null,c&&(0,k.Y)(i.Fragment,null,(0,k.Y)(Oe.Ay,{gutters:"xxs",atSizeColumns:T,totalColumnCount:S},l.map((e=>{var t;const r=null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t.filter((e=>"PERSON"===(null===e||void 0===e?void 0:e.elementType)&&(null===e||void 0===e?void 0:e.partitionKey)===o)),n=r.find((e=>e.primary)),s=(0,A.q5)(e,"PERSON").filter((e=>(null===e||void 0===e?void 0:e.partitionKey)!==o))||[],l=(0,A.q5)(n,"NAME_GN"),d=(0,A.OV)(null===l||void 0===l?void 0:l[0])||"";return(0,k.Y)(i.Fragment,{key:e.id},r.map(((t,a)=>(0,k.Y)(Rm,{key:`${t.id}-${e.id}`,person:t,record:e,i:a,primaryEvent:m,otherEventsFormatted:y,MAX_OTHER_EVENT_COLUMNTS:4}))),(null===s||void 0===s?void 0:s.length)>0&&(0,k.Y)(Fe.lT,{key:`other-persons-mentioned-${e.id}`,column1span:S,column1:(0,k.Y)(i.Fragment,null,(0,k.Y)(te.A,{size:"sm"},a("other-persons-mentioned.mentioned.heading","Others mentioned in this record")),(0,k.Y)(te.A,{size:"xs"},a("other-persons-mentioned.these-are-referenced.sub-heading","These are referenced in relation to {givenName} on other pages",{givenName:d})))},s.map((t=>{const a=()=>{window.open(`/ark:/61903/${t.partitionKey}?view=index&personArk=/ark:/61903/${t.id}&action=view`)};return(0,k.Y)(Da.A,{key:t.id,onClick:a,overline:I({person:t,record:e}),primaryText:(0,Ee.hA)({person:t}),endElement:(0,k.Y)(ee.A,{Icon:Kt.A,onClick:a}),startElement:(0,k.Y)(i.Fragment,null),dense:!0})}))))}))),d&&(null===d||void 0===d?void 0:d.length)>0&&(0,k.Y)(i.Fragment,null,(0,k.Y)(oe.A,null),(0,k.Y)(Tm,null),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(Oe.Ay,{gutters:"xxs",atSizeColumns:T,totalColumnCount:S},(0,k.Y)(i.Fragment,null,d.sort(((e,t)=>e.primary>t.primary?-1:1)).map(((e,t)=>(0,k.Y)(Rm,{key:e.id,person:e,i:t,primaryEvent:m}))))))),!t.isOn&&!n.loading&&!c&&(0,k.Y)(Q.Ay,null,(0,k.Y)(ae.A,null),(0,k.Y)(J.Ay,{alignX:"center"},(0,k.Y)(Dt.A,{src:il,alt:"",maxWidth:250})),(0,k.Y)(te.A,{size:"sm",centered:!0},a("select-person.subheading.not-indexed","This image has not been indexed."))),t.isOn&&n.currentImageArk&&!n.loading&&!c&&(0,k.Y)(Q.Ay,null,(0,k.Y)(ae.A,null),(0,k.Y)(J.Ay,{alignX:"center"},(0,k.Y)(Dt.A,{src:rl,alt:"",maxWidth:250})),(0,k.Y)(te.A,{size:"sm",centered:!0},a("select-person.subheading.add-name","Select the Add button below to transcribe the first name on this image."))),u&&n.loading&&(0,k.Y)(J.Ay,{alignX:"center"},(0,k.Y)(g.A,{size:"md"})),c&&(0,k.Y)(Di,{count:3})))}var Om=a(69686),_m=a(64705);const Fm={personsToAttach:[],inputText:"",currentIndex:0,error:null,result:[],editTranscriptMode:!1,imagePermission:!0,checkboxListKey:0};function Dm(e,t){switch(t.type){case"ADD_PERSON_TO_ATTACH":{const a={...e,personsToAttach:[...e.personsToAttach,t.value.personToAttach]};return t.value.updateKey&&(a.checkboxListKey=e.checkboxListKey+1),a}case"REMOVE_PERSON_TO_ATTACH":return{...e,personsToAttach:e.personsToAttach.filter((e=>e.key!==t.value))};case"RESET_PERSONS_TO_ATTACH":return{...e,personsToAttach:[]};case"SET_INPUT_TEXT":return{...e,inputText:t.value};case"SET_CURRENT_INDEX":return{...e,currentIndex:t.value};case"SET_ERROR":return{...e,error:t.value};case"SET_RESULT":return{...e,result:t.value};case"SET_PERSONS_TO_ATTACH":return{...e,personsToAttach:t.value};case"SET_TRANSCRIPT_EDIT_MODE":return{...e,editTranscriptMode:t.value};case"RESET_FULL_TEXT_STATE":return Fm;case"SET_IMAGE_PERMISSION":return{...e,imagePermission:t.value};default:throw new Error(`Unhandled action type: ${t.type}`)}}const Mm=(0,i.createContext)({}),Hm=(0,i.createContext)({});function Lm(e){let{children:t}=e;const[a,r]=(0,i.useReducer)(Dm,Fm);return(0,k.Y)(Mm.Provider,{value:a},(0,k.Y)(Hm.Provider,{value:r},t))}const zm=()=>(0,i.useContext)(Mm),Vm=()=>(0,i.useContext)(Hm);function Bm(){const e=(0,_t.mb)(),{t:t}=(0,P.B)(),{query:a}=(0,G.A)();return{triggerStatusOverlay:function(){let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"fullText"===a.view&&e(i?{message:t("full-text.image.downloaded","Image Downloaded. Want to attach this image to the Tree?"),type:"success",dismissable:!0,actionLabel:t("full-text.attach","Attach"),actionCallback:()=>{r&&r.open()}}:{message:t("full-text.failed-download","Error downloading the file"),type:"error"})}}}const Gm=e=>{const{query:t}=(0,G.A)(),a=(0,b.A)(),r=(0,Pr.XQ)(),n=(0,D.zy)(),{fullTextCreateRecordsAndAttachOverlay:o}=(0,Ti.HQ)(),s=(0,i.useMemo)((()=>(0,A.Qp)(null===a||void 0===a?void 0:a.images,null===a||void 0===a?void 0:a.currentImageArk)||{}),[a]),{group:l}=(0,Dl.P2)(),{childCount:d,metadata:c}=l||{},u=(0,i.useCallback)((e=>{const t=[],a=(0,A.OV)(e),i=(null===a||void 0===a?void 0:a.split(" "))||[];return i&&1!==i.length?(i.forEach(((a,i)=>{var r;t.push({...on()(e),rects:[null===e||void 0===e||null===(r=e.rects)||void 0===r?void 0:r[i]],fieldValues:[{...e.fieldValues[0],origValue:{text:a}}],id:`${e.id}_${i}`})})),t):[e]}),[]),h=(0,i.useCallback)(((e,t)=>{const a=u(e);return a.forEach(((a,i)=>{var r;a.rects&&!t.find((e=>e.fieldId===a.id&&function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a=>!!a&&(0,ia.Kl)(e,a,t)}(e.rect,a.rects[0])))&&t.push((0,ia.F1)(e,(0,ia.TU)({rect:null===a||void 0===a?void 0:a.rects[0],imageId:null===a||void 0===a||null===(r=a.rects[0])||void 0===r?void 0:r.imageId,fieldId:a.id,fieldType:a.fieldType,elementType:a.elementType,personIds:[a.personId],recordId:a.recordId}),i))})),a}),[u]),p=(0,i.useMemo)((()=>{var t,a;const i=[],r=(e,t)=>("NAME"===t.fieldType||("FIELD"===t.elementType?e=e.concat(h(t,i)):null!==t&&void 0!==t&&t.subElements&&t.subElements.forEach((t=>{var a,r;null!==(a=t.subElements)&&void 0!==a&&a[0]&&(e=e.concat(h(null===(r=t.subElements)||void 0===r?void 0:r[0],i)))}))),e);let n=null===s||void 0===s||null===(t=s.floatingElements)||void 0===t?void 0:t.reduce(r,[]);const l=(0,A.q5)(s,"NAME",!1).reduce(r,[]);return n=null===(a=n)||void 0===a?void 0:a.concat(l.filter((e=>e.stuffTokenOffsets))),null!==o&&void 0!==o&&o.isOpen||!e||e(i),n&&n.sort(((e,t)=>{var a,i;return e.stuffTokenOffsets||t.stuffTokenOffsets?!e.stuffTokenOffsets&&t.stuffTokenOffsets?1:e.stuffTokenOffsets&&!t.stuffTokenOffsets?-1:(null===(a=e.stuffTokenOffsets)||void 0===a?void 0:a[0])-(null===(i=t.stuffTokenOffsets)||void 0===i?void 0:i[0]):0})),n||[]}),[s,h,e,null===o||void 0===o?void 0:o.isOpen]),m=(0,i.useMemo)((()=>p.map((e=>(0,A.OV)(e))).join(" ")),[p]),g=null===l||void 0===l?void 0:l.imageApids,v=(0,i.useMemo)((()=>null===g||void 0===g?void 0:g.length),[g]),y=void 0!==d?d:v,f=null===r||void 0===r?void 0:r.focusedIndex;return{citation:(0,i.useMemo)((()=>Bh({metadata:c,location:n,imageIndex:f,imageCount:y,queryView:null===t||void 0===t?void 0:t.view})),[n,f,t,y,c]),plainTextTranscript:m,fields:p}};var Um=a(70565),Km=a(48270);function qm(e){var t,a,r,n,o;let{downloadOverlay:s,displayHighlights:l,triggerStatusOverlay:d,citation:c,plainTextTranscript:u,fullTextCreateRecordsAndAttachOverlay:p,query:m}=e;const{t:g}=(0,P.B)(),v=(0,b.A)(),y=(0,Pr.XQ)(),[f,A]=(0,i.useState)("ImageAndHighlights"),[w,T]=(0,i.useState)("fullText"===(null===m||void 0===m?void 0:m.view)),[I,S]=(0,i.useState)(!0);return(0,k.Y)(Ze.A,(0,j.A)({},s,{title:g("full-text.download","Download"),subtitle:g("full-text.subheading","Customize your download option")}),(0,k.Y)(se.Ay,null,(0,k.Y)(Dt.A,{noCrop:!0,columns:4,alt:(null===(t=v.thumbnails)||void 0===t||null===(a=t[y.focusedIndex])||void 0===a?void 0:a.alt)||"",src:(null===(r=v.thumbnails)||void 0===r||null===(n=r[y.focusedIndex])||void 0===n||null===(o=n.srcSet)||void 0===o?void 0:o[0])||""}),(0,k.Y)(le.A,{columns:8},(0,k.Y)(gt.A,{label:g("full-text.record-image","Record Image")},(0,k.Y)(mt.A,{name:"downloadOptions",wrapLabel:!0,checked:"ImageAndHighlights"===f,value:"ImageAndHighlights",label:g("full-text.pdf-record-image-with-highlights","PDF Record Image with Highlights"),onChange:()=>A("ImageAndHighlights")}),(0,k.Y)(mt.A,{name:"downloadOptions",wrapLabel:!0,checked:"ImageWithoutHighlights"===f,value:"ImageWithoutHighlights",label:g("full-text.pdf-record-image-with-no-highlights","PDF Record Image with No Highlights"),onChange:()=>A("ImageWithoutHighlights")}),(0,k.Y)(mt.A,{name:"downloadOptions",wrapLabel:!0,checked:"JPG Only"===f,value:"JPG Only",label:g("full-text.jpg-only","JPG Only"),onChange:()=>A("JPG Only")}),(0,k.Y)(mt.A,{name:"downloadOptions",wrapLabel:!0,checked:"NoImage"===f,value:"NoImage",label:g("full-text.no-record-image","No Record Image"),onChange:()=>A("NoImage")})),(0,k.Y)(Um.A,{label:g("full-text.include","Include:")},"fullText"===(null===m||void 0===m?void 0:m.view)&&(0,k.Y)(_a.A,{name:"transcriptCheckbox",label:g("full-text.transcription-text","Transcription"),checked:w,onChange:()=>T(!w),disabled:"JPG Only"===f}),(0,k.Y)(_a.A,{name:"citationCheckbox",label:g("full-text.citation-text","Citation"),checked:I,onChange:()=>S(!I),disabled:"JPG Only"===f}),"JPG Only"===f&&(0,k.Y)(te.A,{size:"xs",color:"gray"},g("full-text.unavailable-for-jpg-text","Unavailable for JPG downloads."))))),"NoImage"===f&&!w&&(0,k.Y)(J.Ay,null,(0,k.Y)(te.A,{size:"xs"},(0,k.Y)("span",{style:{color:W.A.red50}},g("full-text.select-image-or-transcript","Please select either the transcript or record image for download.")))),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{"data-testid":"full-text-cancel-download",onClick:s.close},g("full-text.cancel","Cancel")),(0,k.Y)(Z.A,{"data-testid":"full-text-confirm-download",onClick:()=>{(async()=>{try{var e,t;if("JPG Only"===f){var a,i;const e=null===(a=v.thumbnails)||void 0===a||null===(i=a[y.focusedIndex])||void 0===i?void 0:i.srcSet[500];return(0,Km.y)(e),void d(!0,p)}const r=g("metadata.citation","Citation");let n="";const o=`${h.pc}/ark:/61903/${null===v||void 0===v?void 0:v.currentImageArk}?view=${null===m||void 0===m?void 0:m.view}`;"fullText"===(null===m||void 0===m?void 0:m.view)&&w&&(n+=u),I&&(n+=`\n\n${r}:\n${c}\n\n`);const s="localhost"===window.location.hostname?`${h.pc}/records/improve/fullTextPdf`:(0,H.i6)("/records/improve/fullTextPdf"),b=await ra.Ay.post(s,{transcript:n,src:"NoImage"!==f?null===(e=v.thumbnails)||void 0===e||null===(t=e[y.focusedIndex])||void 0===t?void 0:t.srcSet[500]:void 0,highlights:"ImageAndHighlights"===f?null===l||void 0===l?void 0:l.ids.map((e=>l.highlights[e].position)):void 0,url:o},{headers:{Accept:"application/octet-stream"},responseType:"arraybuffer"}),A=new Blob([b.data],{type:"application/pdf"}),T=document.createElement("a");T.href=URL.createObjectURL(A),T.download=`${g("full-text.transcript","Transcript")}.pdf`,document.body.appendChild(T),T.click(),document.body.removeChild(T),(0,vi.sx)({event_name:"click_action",link_name:"full-text-download-complete"}),d(!0,p)}catch(r){console.error("Download error:",r),d(!1)}})(),s.close()},disabled:"NoImage"===f&&!w&&!I},g("full-text.download","Download")))))}const jm={name:"1x6nb4k",styles:"font-weight:bold;padding:0 4px;border-radius:4px;background:none;border:none;"},$m={name:"p6tlxz",styles:"background:none;border:none;padding:0 2px;"},Wm=(0,k.AH)("border:1px solid ",W.A.gray10,";border-radius:4px;padding:5px;");function Xm(e){let{fields:t,keywordFields:a,showKeywords:r,allHighlights:n,fullTextCreateRecordsAndAttachOverlay:o}=e;const[s]=(0,P.B)(),l=(0,b.A)(),d=(0,Ae.l)(),c=(0,je.mS)(),u=zm(),[h,p]=(0,i.useState)(null),[m,g]=(0,i.useState)(""),v=(0,$.Ay)(),{rip_sharedImageViewer_saveChanges:y,rip_sharedImageViewer_sls_actions_splunk_debugger:f}=(0,L.h)(["rip_sharedImageViewer_saveChanges","rip_sharedImageViewer_sls_actions_splunk_debugger"]),w=(0,i.useMemo)((()=>(0,A.Qp)(null===l||void 0===l?void 0:l.images,null===l||void 0===l?void 0:l.currentImageArk)||{}),[l]),{displayHighlightsApi:T,splitScreenDisplayHighlightsApi:I}=(0,je.Z0)(),S=(0,i.useCallback)((()=>{const e=(e,t)=>{var i;return(null===t||void 0===t||null===(i=t.filter((t=>{if(t.imageId===e&&t.fieldId){return null===a||void 0===a?void 0:a.find((e=>e.id===t.fieldId))}return!1})))||void 0===i?void 0:i.map((e=>({...e,attached:!0}))))||[]};if(r){const a=e(l.currentImageArk,n);var t,i;if((0,ha.eP)(a,T),c.splitScreen)(0,ha.eP)(e(null===l||void 0===l||null===(t=l.thumbnails)||void 0===t||null===(i=t[c.referenceFocusedIndex])||void 0===i?void 0:i.ark,c.referenceHighlights),I)}else(0,ha.eP)(null,T),(0,ha.eP)(null,I)}),[n,T,c.referenceFocusedIndex,c.referenceHighlights,c.splitScreen,I,l.currentImageArk,null===l||void 0===l?void 0:l.thumbnails,r,a]),E=(0,i.useMemo)((()=>null===t||void 0===t?void 0:t.map(((e,t)=>{var a;let i=e.id;null!==(a=e.superElements)&&void 0!==a&&a[0]&&(i+=`_${e.superElements[0].id}`),i+=`_${t}`;const s=(e,t)=>{v.handleClick(e),p(t),g((0,A.OV)(t))};if(e.isKeyword){const t=e.id===c.activeFieldId?W.A.blue05:W.A.yellow05,a=()=>{if(!o.isOpen){const t=n.filter((t=>t.fieldId===e.id)).map((e=>e.id));if(T.hover(t),c.splitScreen){const t=c.referenceHighlights.filter((t=>t.fieldId===e.id));I.hover(t)}}},l=()=>{o.isOpen||(T.hover(null),c.splitScreen&&I.hover(null))};return u.editTranscriptMode?(0,k.Y)("span",{key:i},r&&(0,k.Y)("button",{css:jm,type:"button",style:{backgroundColor:t},onMouseOver:a,onFocus:a,onMouseOut:l,onBlur:l,onClick:t=>s(t,e)},`${(0,A.OV)(e)} `),!r&&(0,k.Y)("button",{type:"button",css:$m,onClick:t=>s(t,e)},`${(0,A.OV)(e)} `)):(0,k.Y)("span",{key:i},r&&(0,k.Y)("span",{css:jm,style:{backgroundColor:t},onMouseOver:a,onFocus:a,onMouseOut:l,onBlur:l},`${(0,A.OV)(e)} `),!r&&(0,k.Y)("span",null,`${(0,A.OV)(e)} `))}return u.editTranscriptMode?(0,k.Y)("button",{key:i,type:"button",css:$m,onClick:t=>s(t,e)},`${(0,A.OV)(e)} `):(0,k.Y)("span",{key:i},`${(0,A.OV)(e)} `)}))),[t,T,I,n,c.activeFieldId,c.referenceHighlights,c.splitScreen,r,o.isOpen,u.editTranscriptMode]);return(0,i.useEffect)((()=>{o.isOpen||S()}),[S,o.isOpen]),(0,k.Y)(i.Fragment,null,(0,k.Y)("div",{"data-testid":"full-text-transcript"},u.editTranscriptMode?(0,k.Y)("div",{css:Wm},E):E),(0,k.Y)(Zr.A,v,(0,k.Y)(J.Ay,null,(0,k.Y)(pn.A,{"data-testid":"edit-transcript-input",value:m,onChange:e=>g(e.target.value)}),(0,k.Y)(Z.A,{"data-test-id":"full-text-transcript-submit-edit",linkName:"Full Text Transcript Submit Edit",onClick:async()=>{const e=h.id.replace(/_\d+$/,""),t=(0,A.rr)([w],e),a=h.id.split("_"),i=a.length>1?a[a.length-1]:0,r=(0,A.OV)(t),n=r.split(" ");n[i]=m;const o=n.join(" ");let s=[];o!==r&&(s=[{type:"ADD_FV",value:{partitionKey:w.partitionKey,fieldValue:(0,Je.cN)(o,{comment:"",reasonId:In.LX,app:qe.zQ}),id:e}}]);const l=(0,wi.q)(s);await(0,Se.fD)({sls:l,dispatches:s,saveChangesFlag:y,slsActionsSplunkDebugger:f,userId:c.userId,dispatch:d,successHandler:()=>{p(null),v.close()}})},emphasis:"high"},s("full-text.submit.button","Submit")))))}const Qm=(0,y.Ay)("rip:parseTranscript");const Jm=function(e){if(Qm("Parsing transcript string:",e),!e)return{summary:"",dates:[],namesAndRelationships:[]};const t=e.split("\n").map((e=>e.trim()));let a="";const i=[],r=[];let n="";const o=e=>/^[^\w\s]+$/.test(e);return t.forEach((e=>{if(e.includes("Summary:"))n="summary",a=e.replace("Summary:","").trim(),a=a.replace("****","");else if(e.includes("Dates:"))n="dates";else if(e.includes("Names and Relationships:"))n="namesAndRelationships";else if("summary"===n)a+=` ${e}`;else if("dates"!==n||e.includes("[Date")){if("namesAndRelationships"===n&&!e.includes("[Name")){const t=e.replace(/^-/,"").trim();!t||t.includes("[name")||o(t)||r.push(t)}}else{const t=e.replace(/^-/,"").trim();!t||t.includes("[date")||o(t)||i.push(t)}})),"[summary]"===a&&(a=""),Qm("Parsed transcript:",{summary:a,dates:i,namesAndRelationships:r}),{summary:a,dates:i.length>0?i:[],namesAndRelationships:r.length>0?r:[]}},Zm=e=>{const t=e.replace(/[^\w\s]/g,"").trim().split(/\s+/);if(t.length<5)return!1;if(new Set(t).size<3)return!1;return["name","date","relationship","birth","death","marriage"].some((t=>e.toLowerCase().includes(t)))||t.length>5};var eg=a(25542),tg=a(93162);function ag(e){const t=e.find((e=>"NAME_GN"===e.fieldType)),a=e.find((e=>"NAME_SURN"===e.fieldType)),i=e.filter((e=>"NAME_GN"!==e.fieldType&&"NAME_SURN"!==e.fieldType)),r=[];return t&&r.push(t),a&&r.push(a),[...r,...i]}const ig={name:"i5js84",styles:"padding-inline-start:10px;"},rg=e=>{let{event:t,eventFields:a,title:r,mainType:n,bottomSeparator:o=!1}=e;const{mainField:s,secondaryFields:l}=(0,i.useMemo)((()=>function(e,t){let a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=t.reduce(((t,r,n)=>{const o=(e=>{var t,a,i,r;return null!==(t=null!==(a=null!==(i=null===e||void 0===e||null===(r=e.standard)||void 0===r?void 0:r.standardizedText)&&void 0!==i?i:null===e||void 0===e?void 0:e.standardizedText)&&void 0!==a?a:null===e||void 0===e?void 0:e.originalText)&&void 0!==t?t:"string"===typeof e?e:""})(e[r.id]);return i&&r.fieldType===i&&!a?a=o:t.push({id:(null===r||void 0===r?void 0:r.id)||n,label:null===r||void 0===r?void 0:r.label,value:o}),t}),[]);return{mainField:a,secondaryFields:r}}(t,a,n)),[t,a,n]);return a.length?(0,k.Y)("div",null,(0,k.Y)("div",{css:ig},(0,k.Y)(re.H6,{supplementary:!0},r,s&&`: ${s}`),(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)("div",{css:ig},l.map((e=>(0,k.Y)(i.Fragment,{key:e.id},(0,k.Y)(re.H6,{supplementary:!0},e.label,": ",e.value),(0,k.Y)(ae.A,{size:"nano"})))))),o&&(0,k.Y)(ae.A,{size:"nano"})):null},ng=e=>{let{event:t,setCurrentEvent:a}=e;const{openOverlay:r}=(0,Ti.HQ)(),{t:n}=(0,P.B)(),{eventTypeField:o,placeFields:s=[],dateFields:l=[],otherFields:d=[]}=t||{},c=(0,i.useCallback)((()=>{a(t),r("eventPanel")}),[a,t,r]);return(0,k.Y)("div",{css:ig},(0,k.Y)(J.Ay,null,(0,k.Y)(re.H6,{alignY:"middle",growX:!0},null===o||void 0===o?void 0:o.label),(0,k.Y)(ee.A,{Icon:Ei.A,onClick:c,"data-testid":"edit-event-button",linkName:"VerifyAndEditOverlay_EditEvent",noShrinkX:!0})),(0,k.Y)(i.Fragment,null,(0,k.Y)(rg,{event:t,eventFields:l,title:n("edit-events.fields.date-heading","Date"),bottomSeparator:s.length>0,mainType:"DATE"}),(0,k.Y)(rg,{event:t,eventFields:s,title:n("edit-events.fields.place-heading","Place"),bottomSeparator:d.length>0,mainType:"PLACE"}),(0,k.Y)(rg,{event:t,eventFields:d,title:n("edit-events.fields.others-heading","Others")}),(0,k.Y)(ae.A,{size:"xs"})))},og=e=>{let{chip:t,setCurrentEvent:a}=e;const[r]=(0,P.B)(),{openOverlay:n}=(0,Ti.HQ)();return(0,k.Y)(i.Fragment,null,(0,k.Y)(oe.A,null),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(re.H5,null,r("verify-and-edit.life-events","Life Events")),t.events.map((e=>(0,k.Y)(ng,{key:e.id,event:e,setCurrentEvent:a}))),(0,k.Y)(Z.A,{"data-testid":"add-event-button",linkName:"VerifyAndEditOverlay_AddEvent",emphasis:"low",Icon:Ci.A,color:"yellow",onClick:()=>{a(null),n("eventPanel")}},r("verify-and-edit.add-event","Add Event")))},sg=e=>{var t;let{verifyAndEditOverlay:a,onComplete:r,currentIndex:n,setCurrentIndex:o,showNameFieldHighlights:s,highlightCurrentPerson:l}=e;const[d]=(0,P.B)(),c=zm(),u=Vm(),h=(0,b.A)(),[p,m]=(0,i.useState)([]),g=(0,L.u)("rip_sharedImageViewer_enableFullTextEvents"),[v]=(0,i.useState)((()=>{var e;return(null===c||void 0===c||null===(e=c.personsToAttach[n])||void 0===e?void 0:e.sexFieldId)||(0,$e.Vs)()})),[y,f]=(0,i.useState)(),A=(0,$.Ay)(),w=(0,bi.Y)(),{editHighlightsOverlay:T,eventPanelOverlay:I,highlightsPanelOverlay:S,inPanelStack:E}=(0,Ti.HQ)(),C=(0,i.useMemo)((()=>(null===c||void 0===c?void 0:c.personsToAttach[n])||{}),[c,n]),x=n===(null===(t=c.personsToAttach)||void 0===t?void 0:t.length)-1,[Y,N]=(0,i.useState)((()=>c.personsToAttach[n].selectedFields||[])),{selectedFieldData:R,treatedNameFieldChipData:O}=So(C.nameElement,h.types,Y,p,[]);(0,i.useEffect)((()=>{const e=c.personsToAttach[n].selectedFields||[];N(on()(e))}),[n,c.personsToAttach]),(0,i.useEffect)((()=>{R.length>0&&N((e=>{const t=on()(R).filter((e=>{var t;return null===e||void 0===e||null===(t=e.typeData)||void 0===t?void 0:t.editable}));return ag([...e,...t.filter((t=>!e.find((e=>e.id===t.id))))])}))}),[R]);const _=(0,ur.SV)({mode:"all",defaultValues:{[v]:C[v]||null}}),F=_.formState.dirtyFields;(0,i.useEffect)((()=>{const e={};Y.forEach((t=>{const a=t.id;e[a]=C[a]||""})),e[v]=C[v]||null,_.reset(e)}),[C,v,Y,_]);(0,i.useEffect)((()=>{!a.isOpen||T.isOpen||I.isOpen||S.isOpen||l(n)}),[n,c.addedFields,T.isOpen,I.isOpen,S.isOpen]);const D=(0,i.useCallback)((e=>{const t=_.getValues(),i=c.personsToAttach.map(((e,a)=>{if(a===n){const a={...e};return Y.forEach((e=>{const i=e.id;a[i]=t[i]||""})),a.sexFieldId=v,a[v]=t[v]||null,a.selectedFields=Y,a}return e}));if(u({type:"SET_PERSONS_TO_ATTACH",value:i}),"next"===e){const e=i.filter(((e,t,a)=>t===a.findIndex((t=>t.syntheticOrExistingPerson.id===e.syntheticOrExistingPerson.id))));n<e.length-1?o(n+1):(r(n,i,F),w.clearDisplay({all:!0}))}else"previous"===e&&(n>0?o(n-1):(s(w.mainEditHighlights),a.close()))}),[n,u,r,Y,o,c.personsToAttach,a,w,v,s,_,F]),M=(0,i.useCallback)(((e,t)=>{const a=C.events.findIndex((e=>e.id===t.id)),i={...t,dispatches:[...null===e||void 0===e?void 0:e.filter(Boolean)]};-1===a?C.events.push(i):C.events[a]=i}),[C]),H=(0,i.useCallback)(((e,t)=>{const a=C.events.findIndex((e=>e.id===t));C.events.splice(a,1)}),[C]);return(0,k.Y)(i.Fragment,null,(0,k.Y)(hi.A,(0,j.A)({},a,{headingColor:"blue",title:d("fulltext.verify-and-edit.title","Verify and Edit"),onClose:()=>{s(w.mainEditHighlights),a.close()},footer:(0,k.Y)(J.Ay,{alignX:"end"},(0,k.Y)(Z.A,{"data-testid":"back-button",linkName:"VerifyAndEditOverlay_Back",onClick:()=>D("previous")},d("fulltext.verify-and-edit.back","Back")),(0,k.Y)(Z.A,{"data-testid":x?"save-continue-button":"next-button",linkName:x?"VerifyAndEditOverlay_SaveContinue":"VerifyAndEditOverlay_Next",emphasis:"high",variant:"contained",color:"primary",onClick:()=>D("next")},x?d("fulltext.verify-and-edit.save-and-continue","Save and Continue"):d("fulltext.verify-and-edit.next","Next")))}),(0,k.Y)(pr.Ay,{id:"zion-form-verify-and-edit",methods:_},(0,k.Y)(re.H5,null,d("fulltext.verify-and-edit.verify-name","Verify Name"),(0,k.Y)(ne.A,null,d("fullText.fix-add-details-text","Fix or add details of the name below."))),(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)("div",{key:null===C||void 0===C?void 0:C.value},(0,k.Y)("div",{style:{backgroundColor:"#f0f0f0",color:"#333",padding:"10px",borderRadius:"4px"}},(0,k.Y)(Da.A,{overline:d("fulltext.verify-and-edit.record-name","RECORD NAME"),primaryText:null===C||void 0===C?void 0:C.primaryText,startElement:(0,k.Y)(Da.A.Icon,{Icon:La.A}),emphasized:!0,selected:!0})),(0,k.Y)(ae.A,null),(0,k.Y)(re.H6,null,d("fulltext.verify-and-edit.edit-errors-text","Edit any misspellings or errors below")),(0,k.Y)(ae.A,{size:"xs"}),Y.map((e=>(0,k.Y)("div",{key:e.id},(0,k.Y)(mr.YJ,{"data-testid":e.fieldType,name:e.id,label:e.label,placeholder:e.label}),(0,k.Y)(Tr,{field:e})))),(0,k.Y)(Si.A,{"data-testid":"add-or-remove-fields",Icon:Ci.A,color:"yellow",emphasis:"low",onClick:()=>{A.open()},linkName:"VerifyAndEditOverlay_AddOrRemoveFields"},d("fulltext.verify-and-edit.add-or-remove-name-parts-text","Add or Remove Name Parts")),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(oe.A,null),(0,k.Y)(Ne.A,null,(0,k.Y)(Re.A,null,d("fulltext.verify-and-edit.add-more-details","Add More Details")),(0,k.Y)(Pe.A,null,(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(br,{fieldName:v,person:C.syntheticOrExistingPerson,addedSexCode:{id:v,displayLabel:d("fulltext.verify-and-edit.VerifyAndEditOverlay.sex-field","Sex")},dontShowFeedBack:!0}),(0,k.Y)(Tr,{field:{id:v,label:d("fulltext.verify-and-edit.VerifyAndEditOverlay.sex-field","Sex"),fieldType:"SEX_CODE"},id:v}),g.isOn&&(0,k.Y)(og,{chip:C,setCurrentEvent:f})))))),(0,k.Y)(An,{allowSelectingMultiple:!1,chipData:[{title:d("fulltext.verify-and-edit.name","Name"),key:`nameFields-${null===C||void 0===C?void 0:C.value}`,data:O}],fieldData:Y,overlay:A,handleSelection:e=>{const t=e.filter((e=>!e.id));let a=Y.filter((t=>e.some((e=>{let{id:a}=e;return a===t.id}))));t.length>0&&t.forEach((e=>{const t={label:e.label,fieldType:e.value.split(":")[0],id:(0,$e.Vs)(),added:!0};a.push(t),_.setValue(t.id,"")})),a=ag(a);const i=_.getValues(),r=(0,tg.h)(c.personsToAttach,n,{...C,...i,sexFieldId:v,selectedFields:a});u({type:"SET_PERSONS_TO_ATTACH",value:r}),N(a)},handleSelectionChange:e=>{m(e)},lockSharedFields:!1,showSearch:!1,title:d("fulltext.verify-and-edit.add-or-remove-name-parts","Add or Remove Name Parts")}),g.isOn&&E("eventPanel")&&(0,k.Y)(Ms,{personName:(()=>{var e,t;const a=_.getValues(),i=null===(e=Y.find((e=>"NAME_GN"===e.fieldType)))||void 0===e?void 0:e.id,r=null===(t=Y.find((e=>"NAME_SURN"===e.fieldType)))||void 0===t?void 0:t.id;return[a[i],a[r]].join(" ").trim()})(),person:C.syntheticOrExistingPerson,event:y,onSave:M,onDelete:H,shouldParseEventfromSls:!1,shouldSavetoSls:!1,showRelationshipEvents:!1}))},lg=e=>{let{selectFocusPersonOverlay:t,onBack:a,arkIds:r,openOverlayMessage:n}=e;const{t:o}=(0,P.B)(),{query:s}=(0,G.A)(),{lang:l}=s,d=`https://www.familysearch.org/${l}/help/helpcenter/article/understanding-the-focus-person-in-source-linker`,c=zm(),u=Vm(),h=(0,b.A)(),p=(0,bi.Y)(),m=(0,i.useMemo)((()=>c.personsToAttach.filter(((e,t,a)=>t===a.findIndex((t=>t.syntheticOrExistingPerson.id===e.syntheticOrExistingPerson.id))))),[c.personsToAttach]),g=(0,i.useMemo)((()=>{var e,t;return(null===(e=m[0])||void 0===e||null===(t=e.syntheticOrExistingPerson)||void 0===t?void 0:t.id)||""}),[m]),[v,y]=(0,i.useState)(g),f=(0,i.useMemo)((()=>e=>{var t,a,i;if(null!==(t=e.syntheticOrExistingPerson)&&void 0!==t&&t.localizedName)return e.syntheticOrExistingPerson.localizedName;const r=null===(a=e.selectedFields)||void 0===a?void 0:a.find((e=>"NAME_GN"===e.fieldType)),n=null===(i=e.selectedFields)||void 0===i?void 0:i.find((e=>"NAME_SURN"===e.fieldType)),s=`${e[null===r||void 0===r?void 0:r.id]||""} ${e[null===n||void 0===n?void 0:n.id]||""}`.trim();return s||(e.label?e.label:o("fulltext.select-focus-person-overlay.unnamed-person","Unnamed Person"))}),[o]),A=(0,i.useCallback)((e=>{var t;const a=c.personsToAttach.find((t=>t.syntheticOrExistingPerson.id===e));a&&(p.clearDisplay({all:!0}),p.setDisplayHighlights({mainPartitionKey:h.currentImageArk,elementIds:(null===(t=a.selectedFields)||void 0===t?void 0:t.map((e=>e.id)))||[]}))}),[p,c.personsToAttach,h.currentImageArk]);(0,i.useEffect)((()=>{g&&A(g)}),[]);const w=e=>{const t=e.target.value;y(t),A(t)};return(0,k.Y)(hi.A,(0,j.A)({},t,{headingColor:"blue",title:o("fullText.back","Back"),close:a,footer:(0,k.Y)(i.Fragment,null,(0,k.Y)(Pu.A,{type:"help",dismissable:!1},m.length>1?o("fullText.select-focus-person-overlay.help-text-multiple","Next, you will match your selected name to a person in the tree."):o("fullText.select-focus-person-overlay.help-text-single","Next, you will match this name to a person in the tree.")),(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)(J.Ay,{alignX:"end"},(0,k.Y)(Z.A,{"data-testid":"back-button",linkName:"SelectFocusPersonOverlay_Back",onClick:a},o("fullText.back","Back")),(0,k.Y)(Z.A,{"data-testid":"next-button",linkName:"SelectFocusPersonOverlay_Next",emphasis:"high",variant:"contained",color:"primary",onClick:()=>{(e=>{if(!e)return;const a=`/search/linker?ark=/ark:/61903/${e[v]}&hinting=/tree/person/details/`;t.close(),u({type:"RESET_FULL_TEXT_STATE"}),window.open(a,"_blank")})(r),n()},disabled:!v},o("fullText.next","Next"))))}),(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H5,null,m.length>1?o("fullText.select-focus-person-overlay.heading","Select One Name"):o("fullText.select-focus-person-overlay.heading-single","Focus Person"),(0,k.Y)(ne.A,null,m.length>1?o("fullText.select-focus-person-overlay.subheading","Select one name to attach to someone in Family Tree."):o("fullText.select-focus-person-overlay.subheading-single","You will attach this name to someone in Family Tree in the next step."),m.length>1&&(0,k.Y)(i.Fragment,null,(0,k.Y)("br",null),o("fullText.select-focus-person-overlay.subheading-multiple","If you verified more than one name, you can drag and drop them into their correct place into the family on the next page.")))),(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(Z.A,{emphasis:"low",onClick:()=>{window.open(d,"_blank")},linkName:"SelectFocusPersonOverlay_LearnMore"},o("fullText.select-focus-person-overlay.learn-more","LEARN MORE")),(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(gt.A,{"data-testid":"focus-person-select",label:(0,k.Y)("strong",null,m.length>1?o("fulltext.select-focus-person-overlay.select-focus-person-multiple","Select One Person"):o("fulltext.select-focus-person-overlay.focus-person-single","Focus Person")),largerLabel:!0},m.map((e=>(0,k.Y)(mt.A,{onChange:w,key:e.syntheticOrExistingPerson.id,value:e.syntheticOrExistingPerson.id,checked:e.syntheticOrExistingPerson.id===v,label:f(e),name:"focus-person"}))))))},dg=(e,t,a)=>{let i=[];const r={};return e.selectedFields.forEach((n=>{const o=e.nameElement.subElements.find((e=>{var t;return null===n||void 0===n||null===(t=n.superElements)||void 0===t?void 0:t.find((t=>(null===t||void 0===t?void 0:t.id)===(null===e||void 0===e?void 0:e.id)))}));if(o){const t=o.subElements.find((e=>e.id===n.id));((0,A.OV)(t)||"")!==e[n.id]&&i.push({type:"ADD_FV",value:{id:n.id,partitionKey:t.partitionKey,fieldValue:(0,Je.cN)(e[n.id],{...a,reasonId:In.LX})}})}else if("NAME_SURN"===n.fieldType||"NAME_SPRE"===n.fieldType||"NAME_MATR"===n.fieldType||"NAME_PATR"===n.fieldType){const o=e.nameElement.subElements.find((e=>"NAME_SURNAME"===e.elementType));if(o)i=i.concat((0,Ai.h8)({partitionKey:o.partitionKey,superId:o.id,superElementType:"NAME_SURNAME",fieldType:n.fieldType,fieldValue:(0,Je.cN)(e[n.id],a),id:n.id}));else if(r[t])i=i.concat((0,Ai.h8)({partitionKey:e.nameElement.partitionKey,superId:r[t],superElementType:"NAME_SURNAME",fieldType:n.fieldType,fieldValue:(0,Je.cN)(e[n.id],a),id:n.id}));else{const o=(0,A.Vs)();r[t]=o,i=i.concat((0,Ai.iu)({partitionKey:e.nameElement.partitionKey,nameSuperId:e.nameElement.id,fieldValue:(0,Je.cN)(e[n.id],a),fieldType:n.fieldType,elementType:"NAME_SURNAME",nameFieldId:n.id,nameElementId:o}))}}else{const t=A.u0[n.fieldType],r=e.nameElement.subElements.find((e=>e.elementType===t));i=r?i.concat((0,Ai.h8)({partitionKey:e.nameElement.partitionKey,superId:r.id,superElementType:t,fieldType:n.fieldType,fieldValue:(0,Je.cN)(e[n.id],a),id:n.id})):i.concat((0,Ai.iu)({partitionKey:e.nameElement.partitionKey,nameSuperId:e.nameElement.id,fieldValue:(0,Je.cN)(e[n.id],a),fieldType:n.fieldType,elementType:t,nameFieldId:n.id}))}})),e.nameElement.subElements.forEach((t=>{var a,r;let n=0;if(t&&null!==t&&void 0!==t&&null!==(a=t.subElements)&&void 0!==a&&a.length&&t.subElements.forEach((t=>{const a=e.selectedFields.find((e=>e.id===t.id));a||(i.push({type:"REMOVE_ELEMENT",value:{partitionKey:t.partitionKey,elementType:t.elementType,id:t.id}}),n++)})),n===(null===t||void 0===t||null===(r=t.subElements)||void 0===r?void 0:r.length)){i.find((e=>"ADD_SUB"===e.type&&e.value.superId===t.id))||i.push({type:"REMOVE_ELEMENT",value:{partitionKey:t.partitionKey,elementType:t.elementType,id:t.id}})}})),i};const cg=e=>{var t;return e&&Array.isArray(e.fieldValues)&&e.fieldValues.length>0?null===e||void 0===e?void 0:e.fieldValues[(null===e||void 0===e||null===(t=e.fieldValues)||void 0===t?void 0:t.length)-1]:null},ug=e=>{var t,a,i;const r=cg(e),n=null===r||void 0===r||null===(t=r.normalizedValues)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.text,o=null===r||void 0===r||null===(i=r.origValue)||void 0===i?void 0:i.text;return n||o};function hg(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];let i=[];var r;return r=e,(!a&&(null===r||void 0===r?void 0:r.elementType)===t||(null===r||void 0===r?void 0:r.fieldType)===t)&&i.push(e),Array.isArray(null===e||void 0===e?void 0:e.subElements)&&e.subElements.forEach((e=>{const r=hg(e,t,a);r&&(i=i.concat(r))})),i}function pg(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return hg(e,t,a).concat(function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[];return Array.isArray(null===e||void 0===e?void 0:e.floatingElements)&&e.floatingElements.forEach((e=>{i=i.concat(hg(e,t,a))})),i}(e,t,a))}const mg=e=>{let{currentImage:t}=e;return(0,i.useMemo)((()=>{const e=pg(t,"NAME").filter((e=>"NAME"===e.elementType));return null===e||void 0===e?void 0:e.map((e=>{const t=hg(e,"NAME_GN"),a=hg(e,"NAME_SURN"),i=null!==t&&void 0!==t&&t.length?t[0]:null,r=null!==a&&void 0!==a&&a.length?a[0]:null,n=i?ug(i):"",o=r?ug(r):"",s=`${n} ${o}`.trim();return i||r?{key:e.id,primaryText:s,givenName:n,surname:o}:null})).filter(Boolean)}),[t])},gg=(e,t,a,i)=>e.map((e=>{var r,n,o,s;const l=(0,A.rr)([t],e.key),d=(0,A.q5)(l,"NAME_GN"),c=(0,A.q5)(l,"NAME_SURN"),u=null!==d&&void 0!==d&&d.length?d[0]:null,h=null!==c&&void 0!==c&&c.length?c[0]:null,p=(null===(r=l.superElements)||void 0===r||null===(n=r[0])||void 0===n?void 0:n.id)||`1:1:TEMP-ID-${e.key}`,m=!p.includes("1:1:TEMP-ID-"),g=(m?(0,A.rr)([t],p):null)||{partitionKey:t.partitionKey,id:p,subElements:[],superElements:[],elementType:"PERSON",isDangling:!0,personId:p,label:e.primaryText},v={...e,nameElement:l,givenNameField:u,surnameField:h,syntheticOrExistingPerson:g,selectedFields:[],events:null===(o=g.subElements)||void 0===o?void 0:o.filter((e=>"EVENT"===e.elementType)).map((e=>ss({event:e,types:a,t:i,shouldParseEventfromSls:!0})))};null!==l&&void 0!==l&&l.subElements&&l.subElements.forEach((e=>{var t;null===e||void 0===e||null===(t=e.subElements)||void 0===t||t.forEach((e=>{v[null===e||void 0===e?void 0:e.id]=(0,A.OV)(e),v.selectedFields.push(e)}))}));const y=m?null===(s=(0,A.q5)(g,"SEX_CODE",!0))||void 0===s?void 0:s[0]:null,f=null===y||void 0===y?void 0:y.id;return v.sexFieldId=f||(0,A.Vs)(),y&&(v[f]={primaryText:(0,A.J1)(y,i)||"",key:(0,A.Ut)(y)||""}),v}));function vg(e){let{recordNames:t,createdIdsRef:a}=e;const r=zm(),n=Vm(),[o]=(0,P.B)(),s=r.personsToAttach.map((e=>e.key)),l=(0,i.useRef)([]),d=(0,i.useCallback)((e=>a.current.has(null===e||void 0===e?void 0:e.key)),[a]),c=(0,i.useMemo)((()=>[...t].sort(((e,t)=>{const a=d(e),i=d(t);return Number(a)-Number(i)}))),[t,d]),u=(0,i.useCallback)((e=>{const a=r.personsToAttach.map((e=>e.key)),i=e.filter((e=>!a.includes(e))),o=a.filter((t=>!e.includes(t)));i.forEach((e=>{const a=t.find((t=>t.key===e));a&&n({type:"ADD_PERSON_TO_ATTACH",value:{personToAttach:a}})})),o.forEach((e=>{r.personsToAttach.find((t=>t.key===e))&&n({type:"REMOVE_PERSON_TO_ATTACH",value:e})}))}),[t,r.personsToAttach,n]);return(0,i.useEffect)((()=>{const e=t.find((e=>{var t;return e.key===(null===(t=r.personsToAttach[0])||void 0===t?void 0:t.key)}));if(e){var a;const i=t.indexOf(e);i>-1&&null!==(a=l.current[i])&&void 0!==a&&a.scrollIntoView&&l.current[i].scrollIntoView({behavior:"smooth",block:"center"})}}),[]),(0,k.Y)(Xr.A,{key:r.checkboxListKey,onSelectionChange:u,initialSelection:s},c.map(((e,t)=>(0,k.Y)(Da.A,{key:e.key,primaryText:e.primaryText,ref:e=>{l.current[t]=e},secondaryText:d(e)?o("fulltext.attach-to-tree-overlay.name-not-listed","Name not listed"):null,name:e.key}))))}const yg=()=>{const[e]=(0,P.B)(),{setQuery:t}=(0,G.A)(),{fullTextCreateRecordsAndAttachOverlay:a,addPersonGenericOverlay:r,openOverlay:n,inPanelStack:o}=(0,Ti.HQ)(),s=zm(),l=Vm(),d=(0,Ae.l)(),c=(0,b.A)(),u=(0,je.mS)(),p=(0,je.vl)(),{displayHighlightsApi:m}=(0,je.Z0)(),g=(0,$.Ay)(),v=(0,$.Ay)(),y=(0,$.Ay)(),f=(0,$.Ay)(),{rip_sharedImageViewer_saveChanges:w,rip_sharedImageViewer_sls_actions_splunk_debugger:T,rip_sharedImageViewer_attachToTreeCheckboxes:I}=(0,L.h)(["rip_sharedImageViewer_saveChanges","rip_sharedImageViewer_sls_actions_splunk_debugger","rip_sharedImageViewer_attachToTreeCheckboxes"]),S=(0,bi.Y)(),E=(0,i.useRef)(new Set),C=(0,i.useMemo)((()=>(0,A.Qp)(c.images,c.currentImageArk)),[c.images,c.currentImageArk]),x=mg({currentImage:C}),Y=(0,ur.SV)({mode:"all",defaultValues:{recordNames:null}}),N=(0,i.useMemo)((()=>{const{mainHighlights:e}=S.getHighlights();return e.filter((e=>{const t=s.personsToAttach.find((t=>{var a,i;const r=(0,A.rr)([C],t.key),n=(0,A.q5)(r,"NAME_GN"),o=(0,A.q5)(r,"NAME_SURN");return(null===n||void 0===n||null===(a=n[0])||void 0===a?void 0:a.id)===e.fieldId||(null===o||void 0===o||null===(i=o[0])||void 0===i?void 0:i.id)===e.fieldId}));return Boolean(t)})).map((e=>e.id))}),[C,s.personsToAttach,S.getHighlights()]),R=(0,i.useCallback)((e=>{var t;const a=null===x||void 0===x||null===(t=x.flatMap((e=>{var t,a;const i=(0,A.rr)([C],e.key),r=(0,A.q5)(i,"NAME_GN"),n=(0,A.q5)(i,"NAME_SURN");return[null===r||void 0===r||null===(t=r[0])||void 0===t?void 0:t.id,null===n||void 0===n||null===(a=n[0])||void 0===a?void 0:a.id]})))||void 0===t?void 0:t.filter(Boolean);S.setDisplayHighlights({mainPartitionKey:null===c||void 0===c?void 0:c.currentImageArk,elementIds:a,highlights:e,attachFilter:()=>!1}),m.select(N)}),[C,x,m,null===c||void 0===c?void 0:c.currentImageArk]),O=s.personsToAttach.map((e=>({label:e.primaryText,value:e.key,selected:!0,Icon:vn.A}))),_=(0,hn.Ay)(O),{addChip:F,removeChip:D,resetChips:H}=_,z=(0,i.useCallback)((e=>{F({label:e.primaryText,value:e.key,selected:!0,Icon:vn.A}),l({type:"ADD_PERSON_TO_ATTACH",value:{personToAttach:e}}),setTimeout((()=>{l({type:"SET_INPUT_TEXT",value:""})}),0)}),[F,l]),V=()=>{S.clearDisplay({all:!0}),I.isOn||H(),l({type:"RESET_FULL_TEXT_STATE"}),a.close()},B=async(e,t)=>{const a=e.filter((e=>e.syntheticOrExistingPerson.id.includes("1:1:TEMP-ID-"))),i=e.filter((e=>!e.syntheticOrExistingPerson.id.includes("1:1:TEMP-ID-")));let r=[];const n={};if(i.forEach((e=>{n[e.syntheticOrExistingPerson.id]=e.syntheticOrExistingPerson.id})),a.length){const e=await Promise.all([(0,Se.XM)("record"),...a.map((()=>(0,Se.XM)("person")))]);a.forEach(((t,a)=>{n[t.syntheticOrExistingPerson.id]=e[a]})),r=r.concat(function(e){let{savePersonData:t,recordArk:a,personArks:i,imagePartitionKey:r}=e;const n={comment:"",reasonId:"",app:qe.zQ};let o=(0,Ai.oG)({imagePartitionKey:r,recordArk:a});return i.forEach(((e,i)=>{var s;const l=t[i];var d,c;o.push({type:"CREATE_ELEMENT",value:{id:e,partitionKey:r,elementType:"PERSON"}},{type:"ADD_SUB",value:{superPartitionKey:r,subPartitionKey:r,superId:a,subId:e,elementType:"RECORD"}}),null!==(s=l[null===l||void 0===l?void 0:l.sexFieldId])&&void 0!==s&&s.key&&(o=o.concat((0,Ai.h8)({partitionKey:r,superId:e,fieldType:"SEX_CODE",fieldValue:(0,Je.cN)(null===(d=l[null===l||void 0===l?void 0:l.sexFieldId])||void 0===d?void 0:d.primaryText,n,`http://gedcomx.org/${null===(c=l[null===l||void 0===l?void 0:l.sexFieldId])||void 0===c?void 0:c.key}`),id:l.sexFieldId}))),o.push({type:"ADD_SUB",value:{superPartitionKey:r,subPartitionKey:l.nameElement.partitionKey,superId:e,subId:l.nameElement.id,elementType:"PERSON"}}),o=o.concat(dg(l,e,n)),l.events.forEach((t=>{var a,i,r;const n=null===t||void 0===t||null===(a=t.dispatches)||void 0===a?void 0:a.findIndex((e=>{var t;return"ADD_SUB"===(null===e||void 0===e?void 0:e.type)&&"PERSON"===(null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.elementType)}));null!==t&&void 0!==t&&null!==(i=t.dispatches[n])&&void 0!==i&&null!==(r=i.value)&&void 0!==r&&r.subId&&(t.dispatches[n].value.superId=e,o.push(...t.dispatches))}))})),o.push({type:"SET_RECORD_PERSON_IDS",value:a}),o}({savePersonData:a,recordArk:e[0],personArks:e.slice(1),imagePartitionKey:c.currentImageArk}))}if(i.length){const e=r.find((e=>"CREATE_ELEMENT"===e.type&&"RECORD"===e.value.elementType));let a=null===e||void 0===e?void 0:e.value.id;e||(a=await(0,Se.XM)("record"),r.push(...(0,Ai.oG)({imagePartitionKey:c.currentImageArk,recordArk:a}))),r=r.concat(function(e){let{savePersonData:t,persons:a,dirtyFields:i,recordArk:r,imagePartitionKey:n,images:o}=e,s=[];return a.forEach(((e,a)=>{var l;const d={comment:"",reasonId:"",app:qe.zQ},c=t[a];if(s.push(...(0,Ai.nx)({person:e,destRecordId:r,sourceRecPartitionKey:e.partitionKey,destRecPartitionKey:n,images:o})),null!==(l=c[null===c||void 0===c?void 0:c.sexFieldId])&&void 0!==l&&l.key){const t=(0,A.rr)([e],c.sexFieldId);var u,h,p,m;t?i[null===c||void 0===c?void 0:c.sexFieldId]&&s.push({type:"ADD_FV",value:{id:t.id,partitionKey:t.partitionKey,fieldValue:(0,Je.cN)(null===(u=c[null===c||void 0===c?void 0:c.sexFieldId])||void 0===u?void 0:u.primaryText,{...d,reasonId:In.LX},`http://gedcomx.org/${null===(h=c[null===c||void 0===c?void 0:c.sexFieldId])||void 0===h?void 0:h.key}`)}}):s=s.concat((0,Ai.h8)({partitionKey:e.partitionKey,superId:e.id,fieldType:"SEX_CODE",fieldValue:(0,Je.cN)(null===(p=c[null===c||void 0===c?void 0:c.sexFieldId])||void 0===p?void 0:p.primaryText,d,`http://gedcomx.org/${null===(m=c[null===c||void 0===c?void 0:c.sexFieldId])||void 0===m?void 0:m.key}`),id:c.sexFieldId}))}s=s.concat(dg(c,e.id,d)),s=s.concat(c.events.flatMap((e=>e.dispatches||[])))})),s}({savePersonData:i,persons:i.map((e=>(0,A.rr)(c.images,e.syntheticOrExistingPerson.id))),dirtyFields:t,recordArk:a,imagePartitionKey:c.currentImageArk,images:c.images}))}r=Sn(r),l({type:"SET_RESULT",value:n}),r=r.concat(S.getDispatches({mainImageArk:c.currentImageArk}));const o=(0,wi.q)(r);(0,Se.fD)({sls:o,dispatches:r,saveChangesFlag:w,slsActionsSplunkDebugger:T,userId:u.userId,dispatch:d,appName:qe.zQ,fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],successHandler:()=>{g.close(),y.open()},errorHandler:e=>{l({type:"SET_ERROR",value:e}),(0,$e.Yt)(e)}})},U=(0,i.useMemo)((()=>{var e;const t=[];t.push(c.currentImageArk);((null===C||void 0===C||null===(e=C.floatingElements)||void 0===e?void 0:e.filter((e=>"PERSON"===e.elementType)))||[]).forEach((e=>{t.push(e.id)}));return(0,A.q5)(C,"PERSON").forEach((e=>{t.push(e.id)})),t.map((e=>`${h.pc}/ark:/61903/${e}`))}),[c.currentImageArk,C]),K=(0,i.useCallback)((e=>{var t;return null===e||void 0===e||null===(t=e.events)||void 0===t?void 0:t.flatMap((e=>{const{id:t,placeFields:a=[],dateFields:i=[],otherFields:r=[]}=e||{};return[t,...null===i||void 0===i?void 0:i.map((e=>e.id)),...null===a||void 0===a?void 0:a.map((e=>e.id)),...null===r||void 0===r?void 0:r.map((e=>e.id))]}))}),[]);(0,i.useEffect)((()=>{r.isOpen||g.isOpen||m.select(N)}),[m,N,r.isOpen,g.isOpen]),(0,i.useEffect)((()=>{if(!c.currentImageArk||!a.isOpen||g.isOpen||r.isOpen)return;const{mainHighlights:e}=S.init({mainImageArk:c.currentImageArk});R(e)}),[c.currentImageArk,a.isOpen,r.isOpen,g.isOpen,R]);const q=s.personsToAttach.length>0;return(0,k.Y)(i.Fragment,null,(0,k.Y)(hi.A,(0,j.A)({},a,{close:V,headingColor:"blue",title:e("fulltext.attach-to-tree-overlay.back","Back"),footer:(0,k.Y)(i.Fragment,null,q?(0,k.Y)(Pu.A,{type:"help",dismissable:!1},e("fulltext.attach-to-tree-overlay.names-need-verification-text","You will next be asked to validate information for the selected names.")):(0,k.Y)(Pu.A,{type:"help",dismissable:!1},e("fulltext.attach-to-tree-overlay.what-is-family-search-family-tree","What is FamilySearch's Family Tree?")," ",(0,k.Y)(M.Ay,{to:"https://www.familysearch.org/gettingstarted/create-family-tree",target:"__blank"},e("fulltext.attach-to-tree-overlay.learn-more","Learn more"))),(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)(J.Ay,{alignX:"end"},(0,k.Y)(Z.A,{"data-testid":"cancel-button",linkName:"AttachToTreeOverlay_Cancel",onClick:V},e("fulltext.attach-to-tree-overlay.cancel","Cancel")),(0,k.Y)(Z.A,{"data-testid":"next-button",linkName:"AttachToTreeOverlay_Next",emphasis:"high",onClick:()=>{g.open(),l({type:"SET_PERSONS_TO_ATTACH",value:gg(s.personsToAttach,C,c.types,e)})},variant:"contained",color:"primary",disabled:!q},e("fulltext.attach-to-tree-overlay.next","Next"))))}),(0,k.Y)(pr.Ay,{id:"zion-form-attach-to-tree",methods:Y},(0,k.Y)(re.H5,null,e("fulltext.attach-to-tree-overlay.attach-to-tree-heading","Attach to Tree"),(0,k.Y)(ne.A,null,I.isOn?e("fulltext.attach-to-tree-overlay.checkbox.subheading","These names are computer-generated from the image. Select related family members to attach to your tree"):e("fulltext.attach-to-tree-overlay.subheading","Select the people you want to attach this record to in the Family Tree"))),(0,k.Y)(ae.A,{size:"sm"}),!I.isOn&&(0,k.Y)(i.Fragment,null,(0,k.Y)(mr.eP,{suggestions:x,label:e("fulltext.attach-to-tree-overlay.select-record-names-label","Select Record Names"),placeholder:e("fulltext.attach-to-tree-overlay.search-record-names-placeholder","Select Record Names"),helpMessage:e("fullText.names-generated-from-text","These names were generated from the text of the record"),onSuggestionSelected:z,inputText:s.inputText,onInputTextChange:e=>l({type:"SET_INPUT_TEXT",value:e}),name:"recordNames"}),(0,k.Y)(mn.g,{chipCollection:_,isSelectable:!0,onDismiss:e=>{I.isOn||D(e),l({type:"REMOVE_PERSON_TO_ATTACH",value:e.value})}})),I.isOn&&(0,k.Y)(J.Ay,{gutters:"xxs"},(0,k.Y)(vg,{recordNames:x,createdIdsRef:E})),(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(Si.A,{"data-testid":"add-name-not-listed-button",linkName:"AttachToTreeOverlay_AddNameNotListed",Icon:Ci.A,onClick:()=>{p({type:"SET_CREATED_PERSON_NO_RECORD",value:!0}),n("addPersonPage1Generic")},color:"yellow",emphasis:"low"},e("fulltext.attach-to-tree-overlay.add-name-not-listed","Add name not listed")),(0,k.Y)(Z.A,{"data-testid":"view-all-attachments-button",linkName:"AttachToTreeOverlay_ViewAllAttachments",Icon:rs.A,onClick:()=>v.handleClick()},e("fulltext.attach-to-tree-overlay.view-all-attachments","view all attachments"))," ")),g.isOpen&&(0,k.Y)(sg,{verifyAndEditOverlay:g,onComplete:(e,t,a)=>{l({type:"SET_CURRENT_INDEX",value:e}),B(t,a)},currentIndex:s.currentIndex,setCurrentIndex:e=>l({type:"SET_CURRENT_INDEX",value:e}),showNameFieldHighlights:R,highlightCurrentPerson:e=>{const t=s.personsToAttach[e];if(t){var a;const e=S.getHighlights().mainEditHighlights,i=K(t),r=(null===(a=t.selectedFields)||void 0===a?void 0:a.map((e=>e.id)))||[];r.push(t.sexFieldId);const n=e.filter((e=>{var t;return null===(t=[...r,...i])||void 0===t?void 0:t.includes(e.fieldId)}));S.setDisplayHighlights({mainPartitionKey:c.currentImageArk,highlights:n})}}}),y.isOpen&&(0,k.Y)(lg,{selectFocusPersonOverlay:y,onBack:()=>{y.close(),g.open()},arkIds:s.result,openOverlayMessage:()=>{f.open()}}),v.isOpen&&(0,k.Y)(eg.B,{attachmentUrls:U,overlay:v}),o("addPersonPage1Generic")&&(0,k.Y)(Wr,{userId:u.userId,noRecord:!0,onSave:e=>{const t=e.dispatches.nameDispatches.filter((e=>"ADD_SUB"!==e.type||"PERSON"!==e.value.elementType)),a=(0,wi.q)(t);(0,Se.fD)({sls:a,dispatches:t,saveChangesFlag:w,slsActionsSplunkDebugger:T,userId:u.userId,dispatch:d,appName:qe.zQ,fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],successHandler:()=>{const t=e.dispatches.nameDispatches.find((e=>"CREATE_ELEMENT"===e.type&&"NAME"===e.value.elementType)),a={key:null===t||void 0===t?void 0:t.value.id,primaryText:`${e.formValues.givenField} ${e.formValues.surnameField}`.trim(),givenName:e.formValues.givenField,surname:e.formValues.surnameField};I.isOn&&E.current.add(null===t||void 0===t?void 0:t.value.id),l({type:"ADD_PERSON_TO_ATTACH",value:{personToAttach:a,updateKey:!0}}),I.isOn||F({label:a.primaryText,value:a.key,selected:!0,Icon:vn.A})},errorHandler:e=>{l({type:"SET_ERROR",value:e}),(0,$e.Yt)(e)}})},shouldSaveToSls:!1}),(0,k.Y)(it,{error:s.error,setError:e=>l({type:"SET_ERROR",value:e}),title:e("save-error-overlay.heading","Unable to Save Changes"),message:e("save-error-overlay.content-generic","Your changes were not saved.  Please try again later.")}),(0,k.Y)(Ze.A,(0,j.A)({},f,{title:e("fulltext.attach-to-tree-overlay-redirect.title","You Attached to the Tree"),size:"sm",footer:(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{linkName:"Done",onClick:()=>{f.close(),a.close()},emphasis:"high"},e("fulltext.attach-to-tree-overlay-redirect.done.button","Done")))}),(0,k.Y)(te.A,{size:"sm"},e("fulltext.attach-to-tree-overlay-redirect.body.title","View the Names")),(0,k.Y)(te.A,{size:"xs"},e("fulltext.attach-to-tree-overlay-redirect.body.description","You can view or make changes to the names by going to the index tab in the top right. You can finish indexing the whole family here:")),(0,k.Y)(Z.A,{linkName:"redirect",onClick:()=>t({view:"index"}),emphasis:"low",Icon:Ei.A},e("fulltext.attach-to-tree-overlay-redirect.button.redirect","CONTINUE INDEXING"))))};const fg="tree_attachment_prompt_shown";function bg(e){let{openAttachToTree:t}=e;const a=(0,_t.mb)(),{t:r}=(0,P.B)(),n=(0,i.useRef)(null),[o,s]=(0,i.useState)((()=>"true"===sessionStorage.getItem(fg)));return(0,i.useEffect)((()=>()=>{n.current&&clearTimeout(n.current)}),[]),{startViewTimer:()=>{n.current&&clearTimeout(n.current),n.current=setTimeout((()=>{o||(sessionStorage.setItem(fg,"true"),s(!0),a({message:r("tree-attachment.prompt","Would you like to attach this image to your tree?"),type:"normal",dismissable:!0,actionLabel:r("tree-attachment.attach","Attach"),actionCallback:()=>{(0,vi.sx)({event_name:"click_action",link_name:"attach-to-tree-from-prompt"}),t()}}))}),6e4)},hasShownInSession:o}}const Ag=(0,k.AH)("background-color:",W.A.gray02,";padding:20px;"),wg={name:"1v5fhbt",styles:"max-height:300px;overflow:scroll;"},Tg=(0,y.Ay)("rip:FullText");function Ig(){const[e]=(0,P.B)(),{rip_sharedImageViewer_AiTranscriptSummarization:t,rip_sharedImageViewer_ShowPromptDetails:a,rip_sharedImageViewer_chatGPT40:r,rip_sharedImageViewer_translateWithChatGPT:n,rip_sharedImageViewer_fullTextEditTranscript:s,rip_sharedImageViewer_enableFullTextAttachToTree:l,rip_sharedImageViewer_attachTreePrompt:d}=(0,L.h)(["rip_sharedImageViewer_AiTranscriptSummarization","rip_sharedImageViewer_ShowPromptDetails","rip_sharedImageViewer_chatGPT40","rip_sharedImageViewer_translateWithChatGPT","rip_sharedImageViewer_fullTextEditTranscript","rip_sharedImageViewer_enableFullTextAttachToTree","rip_sharedImageViewer_attachTreePrompt"]),{group:c}=(0,Dl.P2)(),u=(0,$.Ay)(),h=(0,b.A)(),p=zm(),m=Vm(),v=(0,Qd.kg)(c),{query:y}=(0,G.A)(),f=(0,_t.mb)(),{displayHighlights:w}=(0,je.Z0)(),{triggerStatusOverlay:T}=Bm(),[I,S]=(0,i.useState)(!0),[E,C]=(0,i.useState)([]),[x,Y]=(0,i.useState)(!1),[N,R]=(0,i.useState)(!1),[O,_]=(0,i.useState)(null),[F,D]=(0,i.useState)({}),[M,z]=(0,i.useState)("Here is the content that we sent to Chat GPT."),[V,B]=(0,i.useState)(),[U,K]=(0,i.useState)(),[X,Q]=(0,i.useState)(!1),[ie,se]=(0,i.useState)({}),[le,de]=(0,i.useState)(),[ce,ue]=(0,i.useState)(!1),he=(0,$.Ay)(),{fullTextCreateRecordsAndAttachOverlay:pe,inPanelStack:me,openOverlay:ge}=(0,Ti.HQ)(),ve=p.imagePermission?e("full-text.transcription-not-available","Transcript is not available."):e("full-text.transcription-image-permission-false","Transcript is not available, image restricted."),ye=(0,i.useRef)(!1),{citation:fe,plainTextTranscript:be,fields:Ae}=Gm(C),we=(0,i.useCallback)((()=>{Y((e=>!e)),ye.current=!0}),[]),Te=(0,i.useMemo)((()=>h.currentImageArk),[h.currentImageArk]),Ie=(0,i.useMemo)((()=>{var e;return(null===(e=y.keywords)||void 0===e?void 0:e.split(",").map((e=>{var t;return null===(t=decodeURIComponent(e))||void 0===t?void 0:t.toLowerCase()})))||[]}),[y.keywords]),Se=(0,i.useCallback)(((e,t)=>{var a;let i="";t.forEach(((e,a)=>{var r;a>0&&a<t.length&&(i+=" "),i+=(null===(r=(0,A.OV)(e))||void 0===r?void 0:r.trim())||""}));return(null===e||void 0===e?void 0:e.toLowerCase())===(null===(a=i)||void 0===a?void 0:a.toLowerCase())}),[]),Ee=(0,i.useCallback)(((e,t)=>{var a;return e===(null===(a=(0,A.OV)(t))||void 0===a?void 0:a.toLowerCase()).replace(/[^\w]/,"")}),[]),ke=(0,i.useMemo)((()=>(0,A.Qp)(null===h||void 0===h?void 0:h.images,null===h||void 0===h?void 0:h.currentImageArk)||{}),[h]),Ce=(0,i.useMemo)((()=>{const e=[];return Ae?(Ie&&Ie.forEach((t=>{const a=null===t||void 0===t?void 0:t.split(" ");(null===a||void 0===a?void 0:a.length)>1?Ae&&Ae.forEach(((i,r)=>{const n=[];for(let e=0;e<a.length;e++)r+e<Ae.length&&n.push(Ae[r+e]);Se(t,n)&&n.forEach((t=>e.push(t))),Ee(t,i)&&e.push(i)})):Ae.forEach((a=>{Ee(t,a)&&e.push(a)}))})),e.forEach((e=>{e.isKeyword=!0})),e):e}),[Ie,Ae,Se,Ee]);(0,i.useEffect)((()=>{Y(!1),_(null),ye.current=!1}),[h.currentImageArk]),(0,i.useEffect)((()=>{if(!t.isOn||!x||!ye.current)return;(async()=>{R(!0);try{var e;if(!be||!Te)return _(null),void R(!1);if(F[Te])return _(F[Te]),void R(!1);if(!Zm(be))return _(null),void R(!1);const t=await ra.Ay.post((0,H.i6)("/records/improve/azureAiPrompt"),{role:"act like a genealogist",prompt:`\n            Summarize the following text highlighting key persons, their relationships, and important dates. \n            Ensure the summary is 3-4 sentences long. Present it in the following format:\n            Summary: [summary]\n            Dates:\n            - [date1]\n            - [date2]\n            Names and Relationships:\n            - [Name1] [relationship1]\n            - [Name2] [relationship2]\n            ${be}`,fourZeroFlag:r.isOn},{headers:{Accept:"text/plain"}}),a=Jm(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.result);D((e=>({...e,[Te]:a}))),_(a)}catch(t){console.error("Error getting AI transcript",t)}finally{R(!1)}})()}),[t.isOn,x,be,Te,F,r.isOn]),(0,i.useEffect)((()=>{(async e=>{if(void 0!==e){const t=await $i(null,e);m({type:"SET_IMAGE_PERMISSION",value:t})}})(Te)}),[Te,m]),(0,i.useEffect)((()=>{(async()=>{var e,t;const a=null===(e=h.thumbnails)||void 0===e||null===(t=e.find((e=>e.ark===h.currentImageArk)))||void 0===t?void 0:t.id;if(a)try{const e=await async function(e){const t=`${qe.du}/artifact/${e}`;return ra.Ay.get(t,{headers:qe.b3}).then((e=>{const{data:t}=e;return t}))}(a);B(e)}catch(i){(0,$e.Yt)(i,h.currentImageArk,{codeId:25}),K(!0)}})()}),[h.thumbnails,h.currentImageArk]),(0,i.useEffect)((()=>{m({type:"SET_TRANSCRIPT_EDIT_MODE",value:!1})}),[Te,m]),(0,i.useEffect)((()=>{const e=async()=>{ue(!0);try{const e=n.isOn?await(async()=>{var e;const t=await ra.Ay.post((0,H.i6)("/records/improve/azureAiPrompt"),{role:"act like a translator",prompt:`\n            Translate the following text to this locale: ${o.i18n.language}\n            Present the translation in the following format: [translation]\n            ${be}`,fourZeroFlag:r.isOn},{headers:{Accept:"text/plain"}});return null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.result.replace(/^\[|]$/g,"")})():await async function(e,t,a){const i=/localhost/.test(window.location.href)?"":"https://test.researchllm.org";return ra.Ay.post(`${i}/translate/${a}/${t}`,{content:e})}(be,o.i18n.language,V.languages[0]);se({...ie,[h.currentImageArk]:e.data||e}),ue(!1)}catch(e){(0,$e.Yt)(e,h.currentImageArk,{codeId:26}),de(h.currentImageArk),ue(!1)}};X&&be&&V&&h.currentImageArk&&!ie[h.currentImageArk]&&!ce&&le!==h.currentImageArk&&(le&&de(!1),e())}),[X,be,V,ie,h.currentImageArk,le,ce,r,n]);const{startViewTimer:xe}=bg({openAttachToTree:()=>pe.open()});return(0,i.useEffect)((()=>{ke&&null!==d&&void 0!==d&&d.isOn&&"fullText"===y.view&&xe()}),[ke,xe,null===d||void 0===d?void 0:d.isOn,y.view]),Tg("Render: ",{keywords:Ie,keywordFields:Ce,allHighlights:E,fields:Ae}),(0,k.Y)(i.Fragment,null,!p.imagePermission&&(0,k.Y)(i.Fragment,null,(0,k.Y)(Dt.A,{src:il,alt:""}),(0,k.Y)(ae.A,null),(0,k.Y)(te.A,{"data-testid":"trascript-not-available",size:"sm",centered:!0},ve)),p.imagePermission&&(0,k.Y)(i.Fragment,null,(0,k.Y)(It.A,{sides:!0,css:Ag},(0,k.Y)(re.H5,null,e("full-text.heading","Full Transcript"),(0,k.Y)(ne.A,null,v)),(0,k.Y)(J.Ay,null,(0,k.Y)(ee.A,{"data-testid":"full-text-copy",Icon:qt.A,linkName:"full-text-copy",title:e("full-text.copy-icon-text","Copy Transcription"),onClick:()=>{(0,Om.l)(be,"text/plain",(()=>{f({message:e("full-text.copy-success","Full transcript copied to clipboard")})}),(()=>{f({message:e("full-text.copy-error","Error copying full transcript"),type:"error"})}))}}),(0,k.Y)(ee.A,{"data-testid":"full-text-download",Icon:Ut.A,linkName:"full-text-download-start",title:e("full-text.download","Download Image and Transcription"),onClick:u.handleClick}),s.isOn&&(0,k.Y)(ee.A,{"data-testid":"full-text-edit",Icon:Ei.A,linkName:"full-text-edit",title:e("full-text.edit","Edit Transcription"),onClick:()=>m({type:"SET_TRANSCRIPT_EDIT_MODE",value:!p.editTranscriptMode})}))),(0,k.Y)(ae.A,{size:"xs"}),p.editTranscriptMode?(0,k.Y)(Ft.A,{primaryColor:W.A.red50},(0,k.Y)(te.A,{size:"sm"},e("full-text.click-to-edit","Click on a word to edit."))):(0,k.Y)(Ht.A,{checked:I,label:e("full-text.show-keywords","Show Keywords"),onChange:()=>S(!I)}),(0,k.Y)(ae.A,{size:"xs"}),l.isOn&&(0,k.Y)(i.Fragment,null,(0,k.Y)(Bn.A,null,(0,k.Y)(Da.A,{startElement:(0,k.Y)(Da.A.Icon,{Icon:La.A,color:W.A.blue60}),primaryText:(0,k.Y)("span",{style:{color:W.A.blue60}},(0,k.Y)("strong",null,e("IndexExploreHeader.viewRecordNames","View record names"))),onClick:()=>ge("fullTextCreateRecordsAndAttachOverlay"),"data-testid":"attach-to-tree-button"}))),(0,k.Y)(oe.A,null),t.isOn&&Zm(be)&&!p.editTranscriptMode&&(0,k.Y)(i.Fragment,null,(0,k.Y)(Ne.A,{open:x&&Te===h.currentImageArk,setOpen:we},(0,k.Y)(Re.A,null,(0,k.Y)(J.Ay,{alignItemsY:"middle"},(0,k.Y)(ee.A,{Icon:_m.A,onClick:e=>{if(e.stopPropagation(),a.isOn){z("\n        Summarize the following text highlighting key persons, their relationships, and important dates. \n        Ensure the summary is 3-4 sentences long. Present it in the following format:\n        Summary: [summary]\n        Dates:\n        - [date1]\n        - [date2]\n        Names and Relationships:\n        - [Name1] [relationship1]\n        - [Name2] [relationship2]"),he.open({target:e.currentTarget})}},"data-testid":"summarize-icon-button",linkName:"summarize-document"}),(0,k.Y)("span",{style:{color:W.A.blue60}},(0,k.Y)("strong",null,e("full-text.ai-summarization-header","Summarize the document"))))),(0,k.Y)(Zr.A,(0,j.A)({},he,{title:e("full-text.prompt-title","Prompt sent to ChatGPT")}),(0,k.Y)(te.A,{size:"sm"},M),(0,k.Y)(en.A,null,(0,k.Y)(Z.A,{onClick:he.close,keyline:"end","data-testid":"close-quick-glance-button",linkName:"close-quick-glance"},e("full-text.close-button","Close")))),(0,k.Y)(Pe.A,null,N?(0,k.Y)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},(0,k.Y)(g.A,null)):O&&(0,k.Y)(i.Fragment,null,(0,k.Y)("span",{style:{color:W.A.gray70}},(0,k.Y)("p",null,e("full-text.ai-generated","AI-generated from the transcription below."))),(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(te.A,{size:"sm"},O.summary),O.dates.length>0&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(te.A,null,e("full-text.dates","Dates")),(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)("ul",null,O.dates.map((e=>(0,k.Y)("li",{key:e},e))))),O.namesAndRelationships.length>0&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(te.A,null,e("full-text.names-and-relationships","Names and Relationships")),(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)("ul",null,O.namesAndRelationships.map((e=>(0,k.Y)("li",{key:e},e))))),(0,k.Y)(ae.A,{size:"nano"})),(0,k.Y)(ae.A,{size:"xs"}))),(0,k.Y)(oe.A,null)),(0,k.Y)(ae.A,{size:"xs"}),V&&V.languages&&V.languages[0]!==o.i18n.language&&!le&&(0,k.Y)(Z.A,{Icon:_m.A,onClick:()=>Q(!X),"data-testid":"full-text-translate",linkName:X?"Full Text Hide Translation":"Full Text Show Translation"},X?e("full-text.hide-translation","Hide Translation"):e("full-text.show-translation","Show Translation")),(U||le)&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(Pu.A,{type:"error",dismissable:!0},e("full-text.translation-error","Unable to translate transcript. Reload page.")),(0,k.Y)(ae.A,{size:"xs"})),X&&!le&&(0,k.Y)(i.Fragment,null,(0,k.Y)(Bn.A,null,(0,k.Y)(Da.A,{primaryText:e("full-text.translation-tip","Translation is in site language"),startElement:(0,k.Y)(Da.A.Icon,{Icon:mo.A})})),e("full-text.translation-ai-generated","AI-generated from the transcription below."),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)("div",{css:wg},(0,k.Y)(Ye.A,{edges:"border"},!ie[h.currentImageArk]&&(0,k.Y)(q.A.Paragraph,null),ie[h.currentImageArk])),(0,k.Y)(ae.A,{size:"xs"})),(0,k.Y)(Xm,{fields:Ae,allHighlights:E,showKeywords:I,keywordFields:Ce,fullTextCreateRecordsAndAttachOverlay:pe}),(0,k.Y)(qm,{downloadOverlay:u,displayHighlights:w,triggerStatusOverlay:T,citation:fe,plainTextTranscript:be,fullTextCreateRecordsAndAttachOverlay:pe,query:y}),pe.isOpen&&(0,k.Y)(yg,null),me("highlightsPanel")&&(0,k.Y)(Fo,null)))}const Sg=a.p+"static/media/gridmode.2d35d8e475a0d42633eb.png";var Eg=a(17636),kg=a(57475),Cg=a(49388),xg=a(31767),Yg=a(69227);const Ng={imageQualityIssue:()=>o.i18n.t("imageQualityAudit.ImageQualityIssue","Image Quality Issue"),imageQualityIssueForItem:e=>o.i18n.t("imageQualityAudit.imageQualityIssueForItem","Image Quality issue for {itemNumber}",{itemNumber:e}),nextImage:()=>o.i18n.t("imageQualityAudit.nextImage","Next Image"),previousImage:()=>o.i18n.t("imageQualityAudit.previousImage","Previous Image"),submitAudit:()=>o.i18n.t("imageQualityAudit.submitAudit","Submit Audit"),imageGroupNumber:()=>o.i18n.t("imageQualityAudit.imageGroupNumber","Image Group Number"),overUnderExposed:()=>o.i18n.t("imageQualityAudit.overUnderExposed","Overexposed/Underexposed"),defective:()=>o.i18n.t("imageQualityAudit.defective","Defective"),duplicate:()=>o.i18n.t("imageQualityAudit.duplicate","Duplicate"),extraMaterialInFrame:()=>o.i18n.t("imageQualityAudit.extraMaterialInFrame","Extra Material in Frame"),improperlyCropped:()=>o.i18n.t("imageQualityAudit.improperlyCropped","Improperly Cropped"),informationObscured:()=>o.i18n.t("imageQualityAudit.informationObscured","Information Obscured"),missingPages:()=>o.i18n.t("imageQualityAudit.missingPages","Missing Pages, Documents, or Attachments"),motionBlurOrOutOfFocus:()=>o.i18n.t("imageQualityAudit.motionBlurOrOutOfFocus","Motion Blur or Out of Focus"),other:()=>o.i18n.t("imageQualityAudit.other","Other Reason for Retake"),optional:()=>o.i18n.t("imageQualityAudit.optional","optional"),multiple:()=>o.i18n.t("imageQualityAudit.multipleNaturalGroups","Multiple Natural Groups"),reflections:()=>o.i18n.t("imageQualityAudit.reflections","Reflections"),userEnteredIssue:()=>o.i18n.t("imageQualityAudit.userEnteredIssue","User-entered Issue"),wrongCaptureMode:()=>o.i18n.t("imageQualityAudit.wrongCaptureMode","Wrong Capture Mode"),wrongImageOrientation:()=>o.i18n.t("imageQualityAudit.wrongImageOrientation","Wrong Image Orientation"),imageQualityAudit:()=>o.i18n.t("imageQualityAudit.imageQualityAudit","Image Quality Audit"),backToAuditList:()=>o.i18n.t("imageQualityAudit.backToAuditList","Back to Audit List"),suggestNewAuditPercentage:()=>o.i18n.t("imageQualityAudit.suggestNewAuditPercentage","Suggest New Audit Percentage"),imageQualityStandards:()=>o.i18n.t("imageQualityAudit.imageQualityStandards","Image Quality Standards"),reviewTheseImages:e=>o.i18n.t("imageQualityAudit.reviewTheseImages","Please review the {number} randomly selected images required for audit:",{number:e}),imageNumber:e=>o.i18n.t("imageQualityAudit.imageNumber","Image {number}",{number:e}),describeTheIssue:()=>o.i18n.t("imageQualityAudit.describeTheIssue","Please describe the issue"),suggestAChange:()=>o.i18n.t("imageQualityAudit.suggestAChange","Suggest a Change"),submit:()=>o.i18n.t("imageQualityAudit.submit","Submit"),decreasePercentage:()=>o.i18n.t("imageQualityAudit.decreasePercentage","Decrease Percentage"),increasePercentage:()=>o.i18n.t("imageQualityAudit.increasePercentage","Increase Percentage"),additionalNotes:()=>o.i18n.t("imageQualityAudit.additionalNotes","Additional notes (optional)"),knownIssueHeader:()=>o.i18n.t("imageQualityAudit.knownIssueHeader","Known Folder Quality Issues"),copyImageNumberClipboardSuccess:()=>o.i18n.t("Image group number copied to clipboard."),copyImageNumberClipboardError:()=>o.i18n.t("There was an error copying the image group number to the clipboard."),copyImageNumberClipboardTooltip:()=>o.i18n.t("Copy Image Group Number"),searchImageLinkTooltip:()=>o.i18n.t("Search Image Group Number")},Rg="FS.ly-image-audit:rmsGroupKeys";function Pg(e){let t=[];const{childCount:a}=e;let i=function(e){let t=5;if(Array.isArray(e)){const a=e.find((e=>"ImageQualityAudit"===e.name));if(a&&Array.isArray(a.parameters)){const e=a.parameters.find((e=>"samplingRate"===e.name));e&&(t=parseFloat(e.value))}}return t}((null===e||void 0===e?void 0:e.currentWorkflowActions)||[]);if(o=i,(Number(o)===o&&o%1!==0||Number.isInteger(i))&&i>0&&i<=100&&Number.isInteger(a)&&a>5){i/=100;const e=Math.ceil(a*i),o={1:{begin:2,middle:1,end:2},2:{begin:2,middle:e,end:2},3:{begin:2,middle:2,end:2},4:{begin:2,middle:3,end:2},5:{begin:2,middle:3,end:2},6:{begin:2,middle:4,end:2},7:{begin:2,middle:5,end:2},8:{begin:2,middle:5,end:2},9:{begin:2,middle:6,end:2},10:{begin:2,middle:7,end:2},11:{begin:3,middle:7,end:2},12:{begin:3,middle:8,end:2},13:{begin:3,middle:9,end:2},14:{begin:3,middle:10,end:2},15:{begin:3,middle:11,end:2}};let l=null;if(o[e])l=o[e];else try{Object.keys(o).forEach((t=>{if(e<+t)throw l=o[t],{}}))}catch(s){}l||(l={begin:4,middle:e-6,end:2});const d=l.begin||0,c=l.middle||0,u=l.end||0;t=[...Og(d),...Fg(c,d+1,a-u),...(r=u,n=a,Array.from(Array(r).keys()).map((e=>n-e)).reverse())]}var r,n,o;return t.length||(t=[...Og(a)]),t}function Og(e){return Array.from(Array(e).keys()).map((e=>e+1))}function _g(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function Fg(e,t,a){const i=[];let r=0;for(;i.length<e&&r<1e4;){const e=_g(t,a);i.includes(e)?r++:i.push(e)}return i.sort(((e,t)=>e-t))}function Dg(e){let t;try{t=JSON.parse(localStorage[Rg])}catch{t={}}const a=Object.keys(t),i={};a.forEach((a=>{a!==e&&(i[a]=t[a])})),localStorage[Rg]=JSON.stringify(i)}const Mg=(0,i.createContext)({}),Hg=["informationObscured","missingPages","wrongCaptureMode"],Lg=th.J1`
  mutation updateImageQualityAudit($imageAudits: [ImageInfo], $rmsId: String, $projectId: String) {
    updateImageQualityAudit(imageAudits: $imageAudits, rmsId: $rmsId, projectId: $projectId) {
      code
      success
      message
    }
  }
`,zg=1e3,Vg=e=>"folderQTags"===(null===e||void 0===e?void 0:e.name)&&"GROUP"===(null===e||void 0===e?void 0:e.type),Bg=e=>"recordCaptureComment"===(null===e||void 0===e?void 0:e.name)&&"GROUP"===(null===e||void 0===e?void 0:e.type)||"comments"===(null===e||void 0===e?void 0:e.name)&&"GROUP"===(null===e||void 0===e?void 0:e.type);function Gg(e){let{children:t,imageQualityMode:a=!1}=e;const r=(0,je.vl)(),n=(0,Pr.XQ)(),{group:o,loading:s,initialChildId:l}=(0,Dl.P2)(),[d]=(0,Xd.n)(Lg,{context:{headers:{...Lc.A}}}),c=(0,_t.mb)(),{query:u}=(0,G.A)({replaceState:!0}),{showImageQualityAudit:p}=(0,Dl.iB)(),[m,g]=(0,i.useState)({imageInfo:[]}),[v,y]=(0,i.useState)(!1),[f,b]=(0,i.useState)(!1),A=null===o||void 0===o?void 0:o.id,w=(0,i.useMemo)((()=>{if(null!==o&&void 0!==o&&o.properties){var e,t;const a=o.properties.find(Vg),i=(null===a||void 0===a||null===(e=a.values)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.split(";"))||[];if(i.length>0)return i.map((e=>up[`qualityTags${e}`]()))}return[]}),[o]),T=(0,i.useMemo)((()=>{if(null!==o&&void 0!==o&&o.properties){const e=o.properties.find(Bg);if(e)return e.values.join("\n")}return null}),[o]),I=(0,i.useMemo)((()=>null===m||void 0===m?void 0:m.imageInfo.filter((e=>!0!==e.optional)).length),[m]),S=(0,ln.hV)(!1),E=(0,i.useCallback)((e=>S(e-1)),[S]),C=(0,i.useMemo)((()=>{const e=m.imageInfo.find((e=>e.imageNumber===n.focusedIndex+1)),t=m.imageInfo.indexOf(e);return-1===t?{}:{...m.imageInfo[t]}}),[m.imageInfo,n.focusedIndex]);(0,i.useEffect)((()=>{!C||null!==C&&void 0!==C&&C.loaded||g((e=>{const t=e.imageInfo.findIndex((e=>e.imageNumber===C.imageNumber));return-1===t?e:(e.imageInfo[t].loaded=!0,{...e})}))}),[C,C.imageNumber]);const x=(0,i.useMemo)((()=>{let e=!0;const t=(null===m||void 0===m?void 0:m.imageInfo.length)||0;if(m.imageInfo.find((e=>!e.loaded)))return!1;for(let a=0;a<m.imageInfo.length;a++){const t=m.imageInfo[a];t.viewed||t.imageNumber===n.focusedIndex+1||(e=!1)}return e&&t>0}),[m,n.focusedIndex]);(0,i.useEffect)((()=>{if((null===o||void 0===o?void 0:o.childCount)&&!s&&(o.id===l||!l)&&!v&&(p||a)){let e={};try{e=JSON.parse(localStorage["FS.ly-image-audit:rmsGroupKeys"]);Object.keys(e).forEach((t=>{const a=e[t],i=new Date(a.expires);new Date>i&&Dg(t)}))}catch{e={}}if(A)if(A&&e[A])g(e[A]),y(!0);else if(null!==o&&void 0!==o&&o.childCount&&A){const e=function(e){const t=new Date;t.setDate(t.getDate()+1);const a=e.map((e=>({audit:{informationObscured:!1,missingPages:!1,otherReason:!1,wrongCaptureMode:!1},imageNumber:e,userAdded:!1,viewed:!1})));return a[0].viewed=!0,{expires:t,imageInfo:a}}(Pg(o));g(e),y(!0),E(e.imageInfo[0].imageNumber)}}}),[o,m,s,E,A,v,u,r,p,a,l]),(0,i.useEffect)((()=>{if(a||p){const e={...m};for(let a=0;a<e.imageInfo.length;a++){const t=e.imageInfo[a];t.audit.informationObscured||t.audit.missingPages||t.audit.otherReason||t.audit.wrongCaptureMode||!t.optional||e.imageInfo.splice(a,1)}const t=e.imageInfo.find((e=>e.imageNumber===n.focusedIndex+1));t?(t.viewed||(b(!0),setTimeout((()=>b(!1)),zg)),t.viewed=!0):n.focusedIndex>-1&&(e.imageInfo.push({audit:{informationObscured:!1,missingPages:!1,otherReason:!1,wrongCaptureMode:!1},optional:!0,imageNumber:n.focusedIndex+1,userAdded:!1,viewed:!0,loaded:!0}),e.imageInfo=e.imageInfo.sort(((e,t)=>parseInt(e.imageNumber,10)>parseInt(t.imageNumber,10)?1:parseInt(e.imageNumber,10)<parseInt(t.imageNumber,10)?-1:0))),null!==o&&void 0!==o&&o.id&&e.imageInfo.length>0&&function(e,t){let a;try{a=JSON.parse(localStorage[Rg])}catch{a={}}a[t]=e,localStorage[Rg]=JSON.stringify(a)}(e,o.id)}}),[m,n.focusedIndex,o,p,a]);const Y=(0,i.useMemo)((()=>n.focusedIndex),[n.focusedIndex]);return(0,k.Y)(Mg.Provider,{value:{audit:m,originalAuditCount:I,submitAudit:async function(){try{var e,t,a,i,r;const n=[];for(let e=0;e<m.imageInfo.length;e++){const t={...m.imageInfo[e]};t.audit.otherReason||delete t.audit.otherReason,t.badQuality&&(t.apid=o.imageApids[t.imageNumber-1],n.push(t))}const s=null===o||void 0===o||null===(e=o.properties)||void 0===e||null===(t=e.find((e=>"metisProjectId"===e.name)))||void 0===t||null===(a=t.values)||void 0===a?void 0:a[0],l=await d({variables:{imageAudits:n,rmsId:A,projectId:s}});if(null===l||void 0===l||null===(i=l.data)||void 0===i||null===(r=i.updateImageQualityAudit)||void 0===r||!r.success)throw l;Dg(o.id);const{projectId:c}=localStorage.getItem("react-audit-quality")?JSON.parse(localStorage.getItem("react-audit-quality")):{projectId:null};window.location.assign(`${h.pc}/records/audit${c?`/${c}?auditCompletedFor=${o.id}`:""}`)}catch(n){c({message:"There was an error submitting the audit. Please try again.",type:"error"}),console.error(n)}},nextImage:function(){const e=n.focusedIndex;for(let t=0;t<m.imageInfo.length;t++){const{imageNumber:a,viewed:i=!1}=m.imageInfo[t];a-1>e&&(E(a),i||(b(!0),setTimeout((()=>b(!1)),zg)),t=m.imageInfo.length)}},previousImage:function(){const e=n.focusedIndex;for(let t=m.imageInfo.length-1;t>=0;t--){const{imageNumber:a,viewed:i=!1}=m.imageInfo[t];if(a-1<e)return E(a),void(i||(b(!0),setTimeout((()=>b(!1)),zg)))}},setFocusIndex:E,focusedIndex:Y,setItemIssue:function(e){const t={...m},a=t.imageInfo.find((e=>e.imageNumber===n.focusedIndex+1)),i=t.imageInfo.indexOf(a);if(t.imageInfo[i].audit={otherReason:!1,informationObscured:!1,missingPages:!1,wrongCaptureMode:!1},e)if("otherReason"===e)t.imageInfo[i].badQuality=!0;else{const a=Hg.indexOf(e);if(a>-1){const e=Hg[a];t.imageInfo[i].audit[e]=!0}else t.imageInfo[i].audit.otherReason=e;t.imageInfo[i].badQuality=!0}else t.imageInfo[i].badQuality=!1;g(t)},currentImageInfo:C,auditComplete:x,group:o,loading:s,qualityTags:w,qualityComments:T,stickOnImage:f}},t)}const Ug=()=>(0,i.useContext)(Mg),Kg=["defective","duplicate","extraMaterialInFrame","improperlyCropped","informationObscured","missingPages","motionBlurOrOutOfFocus","multiple","overUnderExposed","reflections","wrongCaptureMode","wrongImageOrientation","other"],qg={name:"18g9vyn",styles:"padding:16px;box-shadow:0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12);"};function jg(){const[e,t]=(0,i.useState)(null),[a,r]=(0,i.useState)(),[n,o]=(0,i.useState)([]),{nextImage:s,previousImage:l,focusedIndex:d,setItemIssue:c,currentImageInfo:u,submitAudit:h,auditComplete:p,loading:m,stickOnImage:g}=Ug(),v=(0,i.useMemo)((()=>Kg.map(((e,t)=>({globalIndex:t,key:e,primaryText:Ng[e](),leftElement:"other"===e?(0,k.Y)(Da.A.Icon,{Icon:Ci.A}):null})))),[]);const y=(0,i.useMemo)((()=>{const e=[...v];return n.forEach((t=>{const a=e.find((e=>e.key===t.key));if(a){const t=e.indexOf(a);e.splice(t,1)}})),[...n,...e]}),[v,n]);return(0,i.useEffect)((()=>{if(null!==u&&void 0!==u&&u.audit){const e=["informationObscured","missingPages","wrongCaptureMode"],i=[v[4],v[5],v[10]];if(null!==u&&void 0!==u&&u.audit.otherReason){const e=v.find((e=>e.key===u.audit.otherReason));e?t(e):(t(v[v.length-1]),r(u.audit.otherReason))}else{let r;e.forEach(((e,a)=>{u.audit[e]&&(t(i[a]),r=!0)})),r||t(null!==a&&void 0!==a?a:null)}}else t(null)}),[u]),m?(0,k.Y)(i.Fragment,null,(0,k.Y)(q.A.TextInput,null),(0,k.Y)(q.A.Button,{maxWidth:400}),(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(q.A.Button,{maxWidth:400})):(0,k.Y)(It.A,{sides:!0,bottom:!0},(0,k.Y)("div",{css:qg},(0,k.Y)(st.N6,{gutters:"pico"},(0,k.Y)(de.Ay,{clearable:!0,value:e,onSuggestionSelected:function(e){if(e){const t={...e},a=[...n];a.find((t=>t.globalIndex===e.globalIndex))||"other"===e.key||(t.leftElement=(0,k.Y)(Da.A.Icon,{Icon:Qi.A}),a.unshift(t)),a.length>5&&a.pop(),o(a),c(e.key)}else c(null);t(e)},label:Ng.imageQualityIssue(),placeholder:Ng.imageQualityIssueForItem(d+1),suggestions:y,selectedItem:e}),"other"===(null===e||void 0===e?void 0:e.key)&&(0,k.Y)(pn.A,{value:a,onChange:e=>{return t=e.target.value,r(t),void c(t||"other");var t},label:Ng.describeTheIssue()}),(0,k.Y)(oe.A,{fullWidth:!0}),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(Z.A,{fullWidth:!0,emphasis:"medium",onClick:function(){t(null),s()},"data-testid":"next-image-button",disabled:g},Ng.nextImage()),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(Z.A,{fullWidth:!0,emphasis:"medium",onClick:function(){t(null),l()},"data-testid":"previous-image-button",disabled:g},Ng.previousImage()),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(Z.A,{fullWidth:!0,emphasis:"high",onClick:h,disabled:!p||g,"data-testid":"submit-audit-button"},Ng.submitAudit()))))}var $g=a(23413),Wg=a(73202);function Xg(e){const t=null===e||void 0===e?void 0:e.split("_");return(null===t||void 0===t?void 0:t.reduce(((e,t,a)=>{if(0===a)e=t;else if(1===a&&isFinite(t)){const a=t.replace(/^0+/,"");e=o.i18n.t("metisProjects.groupNameWithItem","{dgs} (Item {item})",{dgs:e,item:a})}return e}),""))||""}function Qg(){const{query:e}=(0,G.A)(),t=null===e||void 0===e?void 0:e.mode,{group:a}=Ug(),[r]=(0,Xd.n)(Zd.A.updateWorkflowActionStatus(),{context:{headers:{...Lc.A}}}),[n]=(0,Yl._)(zd.A.workflowActions(),{fetchPolicy:"no-cache"});return{returnToAudit:(0,i.useCallback)((async e=>{const i=await(0,Qd.mO)(n,a),o=null===i||void 0===i?void 0:i.find((e=>"imageQualityAudit"===t?(null===e||void 0===e?void 0:e.name)===Qd.Oz.IMAGE_QUALITY_AUDIT:(null===e||void 0===e?void 0:e.name)===Qd.Oz.IMAGE_METADATA_AUDIT));if("In Progress"===(null===o||void 0===o?void 0:o.status)){var s,l;const e=await r({variables:{params:{action:"imageQualityAudit"===t?Qd.Oz.IMAGE_QUALITY_AUDIT:Qd.Oz.IMAGE_METADATA_AUDIT,newStatus:"Available",rmsId:null===a||void 0===a?void 0:a.id,createNewWorkflowAction:!1}}});var d,c;if("204"===!(null!==e&&void 0!==e&&null!==(s=e.data)&&void 0!==s&&null!==(l=s.updateWorkflowActionStatus)&&void 0!==l&&l.code))console.error(`metisAuditResponse returned code of ${null===e||void 0===e||null===(d=e.data)||void 0===d||null===(c=d.updateMetisProjectStatus)||void 0===c?void 0:c.code}`)}!function(e,t){let a;if(!e||Array.isArray(e)){const{projectId:e}=localStorage.getItem("imageQualityAudit"===t?"react-audit-quality":"react-audit-data")?JSON.parse(localStorage.getItem("imageQualityAudit"===t?"react-audit-quality":"react-audit-data")):{projectId:null};a=e}else a=e;window.location.assign(`${h.pc}/records/audit${a?`/${a}`:""}`)}(e,t)}),[r,n,a,t])}}const Jg=(0,k.AH)("background-color:",W.A.gray02,";padding:1em;"),Zg={name:"8dbkzf",styles:"button{text-transform:none;}a{text-transform:none;}"},ev=e=>(0,k.AH)("color:",e,";"),tv=(0,k.AH)("color:",W.A.danger50,";& *{color:",W.A.danger50,";font-weight:bold;}"),av={name:"a1evg0",styles:"padding:0 1em;"},iv=["defective","duplicate","extraMaterialInFrame","improperlyCropped","informationObscured","missingPages","motionBlurOrOutOfFocus","multiple","overUnderExposed","reflections","wrongCaptureMode","wrongImageOrientation","other"];function rv(){var e;const{audit:t,setFocusIndex:a,focusedIndex:r,group:n,loading:s,qualityTags:l,qualityComments:d,originalAuditCount:c}=Ug(),u=(0,$.Ay)(),[p,m]=(0,i.useState)("higher"),[g,v]=(0,i.useState)(""),y=(0,_t.mb)(),f=(0,b.A)(),[A]=(0,Xd.n)(Zd.A.suggestNewAuditPercentage()),w=iv.map(((e,t)=>({globalIndex:t,key:e,primaryText:Ng[e]()})));function T(e){let{auditItem:t}=e,a=null;var i;if(null!==t&&void 0!==t&&t.badQuality)if(null!==t&&void 0!==t&&null!==(i=t.audit)&&void 0!==i&&i.otherReason){if(-1===iv.indexOf(t.audit.otherReason))a=t.audit.otherReason;else{a=w.find((e=>e.key===t.audit.otherReason)).primaryText}}else t.audit.informationObscured?a=w[4].primaryText:t.audit.missingPages?a=w[5].primaryText:t.audit.wrongCaptureMode&&(a=w[10].primaryText);return a?(0,k.Y)("span",{css:ev(W.A.gray70)},a):null}function I(e){let{item:t=null,currentIndex:n}=e;const o=(0,i.useRef)();(0,i.useEffect)((()=>{var e,a;t.imageNumber===r+1&&(null===(e=(a=o.current).scrollIntoView)||void 0===e||e.call(a))}),[t,n]);const s=(l=t).viewed&&l.loaded?l.badQuality?"QUALITY_ERROR":l.optional?"NOT_VIEWED":"VIEWED":"NOT_VIEWED";var l;const{stickOnImage:d}=Ug();return(0,k.Y)(Da.A,{primaryText:(0,k.Y)(i.Fragment,null,(0,k.Y)(J.Ay,{gutters:"nano"},(0,k.Y)("span",{css:ev(W.A.blue50)},Ng.imageNumber(t.imageNumber)),(0,k.Y)("span",{css:ev(W.A.gray50)},t.optional?`(${Ng.optional()})`:null))),startElement:(0,k.Y)(Da.A.Icon,{Icon:()=>"VIEWED"===s?(0,k.Y)(vn.A,{color:W.A.green50}):"QUALITY_ERROR"===s?(0,k.Y)($g.A,{color:W.A.danger50}):(0,k.Y)(Wg.A,{color:W.A.gray20})}),onClick:()=>a(t.imageNumber),selected:t.imageNumber-1===r,secondaryText:(0,k.Y)(T,{auditItem:t}),key:t.imageNumber,ref:o,disabled:d})}const{returnToAudit:S}=Qg(),E=null===n||void 0===n||null===(e=n.internalData)||void 0===e?void 0:e.phoenixAcquisitionIds;const C=d||l.length>0;return s?(0,k.Y)(i.Fragment,null,(0,k.Y)(q.A.Button,null),(0,k.Y)(q.A.H1,null),(0,k.Y)(q.A.Paragraph,{size:"md"}),(0,k.Y)("br",null),(0,k.Y)(q.A.ListItem,{hasIcon:!0}),(0,k.Y)(q.A.ListItem,{hasIcon:!0}),(0,k.Y)(q.A.ListItem,{hasIcon:!0}),(0,k.Y)(q.A.ListItem,{hasIcon:!0}),(0,k.Y)(q.A.ListItem,{hasIcon:!0})):(0,k.Y)(i.Fragment,null,(0,k.Y)(st.N6,{gutters:"pico"},(0,k.Y)(It.A,{top:!0,sides:!0,css:Jg},(0,k.Y)(st.N6,{gutters:"pico"},(0,k.Y)(Z.A,{Icon:pe.A,iconDirection:"backward",onClick:()=>S(E),"data-testid":"back-to-audit-list"},Ng.backToAuditList()),(0,k.Y)(re.H5,null,Ng.imageQualityAudit()),(0,k.Y)("div",{css:Zg},(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(rn.A,{"data-testid":"go-to-image-quality-standards-button",onClick:function(){const e=(null===o.i18n||void 0===o.i18n?void 0:o.i18n.language)||"en";window.open(`https://www.familysearch.org/${e}/fieldops/article/image-quality-and-folder-metadata-image-quality-issue-examples-and-details`,"_blank")}},Ng.imageQualityStandards()),(0,k.Y)(Bn.A,null,(0,k.Y)(Da.A,{overline:Ng.imageGroupNumber(),primaryText:(0,k.Y)(rn.A,{title:Ng.searchImageLinkTooltip(),"data-testid":"search-image-group-number-button",to:`${h.pc}/ark:/61903/${null===f||void 0===f?void 0:f.currentImageArk}?view=explore&groupId=${null===n||void 0===n?void 0:n.id}&grid=on`,target:"_blank"},Xg(null===n||void 0===n?void 0:n.naturalGroupId)),endElement:(0,k.Y)(Da.A.IconButton,{title:Ng.copyImageNumberClipboardTooltip(),"data-testid":"copy-image-group-number-button",Icon:qt.A,onClick:()=>{(0,Om.l)(null===n||void 0===n?void 0:n.naturalGroupId,"text/plain",(()=>{y({type:"success",message:Ng.copyImageNumberClipboardSuccess(),dismissable:!0},(()=>{y({type:"error",message:Ng.copyImageNumberClipboardError(),dismissable:!0})}))}))}})}))))),C&&(0,k.Y)(i.Fragment,null,(0,k.Y)("div",{css:tv},(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(J.Ay,{alignY:"center",gutters:"xxs"},(0,k.Y)(un.A,null),(0,k.Y)(te.A,{size:"sm"},Ng.knownIssueHeader()))),d&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(te.A,{size:"sm"},d)),(0,k.Y)(ae.A,{size:"xs"}),!!l.length&&(0,k.Y)(i.Fragment,null,(0,k.Y)(J.Ay,{alignX:"start",gutters:"nano",wrap:!0},l.map(((e,t)=>(0,k.Y)(gn.A,{label:e,key:e||t})))),(0,k.Y)(ae.A,{size:"nano"}))),(0,k.Y)(te.A,{size:"sm"},Ng.reviewTheseImages(c)),(0,k.Y)("div",{css:av},(0,k.Y)(Bn.A,null,t.imageInfo.map(((e,t)=>(0,k.Y)(I,{item:e,currentIndex:r,key:e.imageNumber||t})))))),(0,k.Y)(Ze.A,(0,j.A)({title:Ng.suggestAChange()},u),(0,k.Y)(gt.A,null,(0,k.Y)(mt.A,{checked:"higher"===p,value:"higher",name:"higher-option",label:Ng.increasePercentage(),onChange:e=>m(e.target.value)}),(0,k.Y)(mt.A,{checked:"lower"===p,value:"lower",name:"lower-option",label:Ng.decreasePercentage(),onChange:e=>m(e.target.value)})),(0,k.Y)(pn.A,{placeholder:Ng.additionalNotes(),value:g,onChange:e=>v(e.target.value)}),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{emphasis:"medium",onClick:async function(){(await A()).data.suggestNewImageAudit.success?(y({message:"Audit suggestion submitted successfully!",type:"success"}),u.close()):y({message:"Audit suggestion submission failed",type:"error"})},"data-testid":"suggest-new-audit-button"},Ng.submit())))))}const nv={name:"dd1aqp",styles:"background-color:var(--gray02);padding:16px;"},ov={name:"1g5b64m",styles:"padding:16px 0;"},sv=()=>{const[e,t]=(0,i.useState)(!1);return(0,k.Y)("div",{css:ov},(0,k.Y)(re.H6,null,o.i18n.t("attach.viewMetaData","View image group metadata"),(0,k.Y)(ne.A,null,o.i18n.t("attach.viewMetadataSubheaderMessage","This metadata will not be included in the source. Copy any important data into the Notes field."))),(0,k.Y)(Z.A,{Icon:function(){return(0,k.Y)(ye.A,{toggle:e})},onClick:()=>{t(!e)}},e?o.i18n.t("attach.hideButton","Hide"):o.i18n.t("attach.showButton","Show")),(0,k.Y)(ae.A,{size:"sm"}),e&&(0,k.Y)(It.A,{sides:!0},(0,k.Y)("div",{css:nv},(0,k.Y)(ch,null),(0,k.Y)(Jh,{copyable:!0}))),(0,k.Y)(ae.A,{size:"lg"}))};var lv=a(95147);function dv(e){let{overlay:t,onSuccess:a}=e;const r=(0,_t.mb)(),[n,o]=i.useState(),{submitCaiReview:s}=(0,Dl.Ho)({onError:()=>{r({message:fd(),type:"error",dismissable:!0}),t.close()},onSuccess:a,setLoading:o,resolutionType:Dl.PY.UPDATED_METADATA});return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:Cd()}),(0,k.Y)(O.x,{i18nKey:"GroupDataHeader.finishEditRecordMetadataReviewDialogBody",defaults:"You can continue making changes, or click <0>Yes, Save and Submit Review</0> to save your changes and complete the Record Metadata Review for this image group. This will return the image group for reprocessing.",components:[(0,k.Y)("strong",null,"Yes, Save and Submit Review")],values:{}}),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{disabled:n,onClick:()=>t.close(),emphasis:"low"},Ed()),(0,k.Y)(Z.A,{"data-testid":"finish-record-metadata-review-button",disabled:n,Icon:n&&g.A,onClick:s,emphasis:"high"},Yd()))))}const cv=()=>o.i18n.t("infoSheetWrapper.copyImageLinkToClipboardSuccess","Image group number copied to clipboard."),uv=()=>o.i18n.t("infoSheetWrapper.copyImageLinkToClipboardError","There was an error copying the image group number to the clipboard."),hv=()=>o.i18n.t("groupData.invalidCoverage","A place, record type, and date are required to complete the audit."),pv=()=>o.i18n.t("metadata-audit.back-to-audit-list-button","Back to Audit List"),mv=()=>o.i18n.t("metadata-audit.heading","Metadata Audit"),gv=()=>o.i18n.t("metadata-audit.metadata-quality-standards.link","Metadata Quality Standards"),vv=()=>o.i18n.t("infoSheetWrapper.searchImageLink.tooltip","Image Group Details"),yv=()=>o.i18n.t("metadata-audit.imageGroupNumber","Image Group Number"),fv=()=>o.i18n.t("infoSheetWrapper.copyImageLinkToClipboard.tooltip","Copy Image Group Number"),bv=()=>o.i18n.t("GroupDataHeader.editButtonText","Edit"),Av=()=>o.i18n.t("groupData.submitAuditButtonText","Submit Audit"),wv=()=>th.J1`
    query GetGroupWorkflowActions($groupIdOrArkId: String!) {
      group(groupIdOrArkId: $groupIdOrArkId) {
        currentWorkflowActions {
          name
          status
          parameters {
            name
            value
          }
          properties {
            name
            value
          }
        }
      }
    }
  `,Tv=()=>th.J1`
    mutation UpdateWorkflowActionStatus($params: UpdateWorkflowActionStatusInput) {
      updateWorkflowActionStatus(params: $params) {
        code
        success
        newStatus
        message
      }
    }
  `;function Iv(e){const t=Number(e);return!Number.isNaN(t)&&t>0}const Sv=(0,k.AH)("position:fixed;bottom:0;background:",W.A.gray00,";width:100%;box-shadow:0 -2px 10px #ddd;padding:10px 16px;");function Ev(e){let{saveCoverages:t=null}=e;const[a,r]=(0,i.useState)(),n=(0,$.Ay)(),{group:o}=(0,Dl.P2)(),s=(0,_t.mb)(),{properties:l=[],id:d=null}=o,{showRecordMetadataReview:c}=(0,Dl.iB)(),{cisId:u}=(0,Wd.useUser)(),p=(0,$.Ay)(),[m]=(0,Yl._)(wv(),{fetchPolicy:"no-cache"}),[g]=(0,Xd.n)(Tv(),{context:{headers:{...Lc.A}}}),v=(0,i.useCallback)((async()=>{if(c)p.open();else{t&&await t();const c=await(0,Qd.mO)(m,o),p=null===c||void 0===c?void 0:c.find((e=>(null===e||void 0===e?void 0:e.name)===Qd.Oz.IMAGE_METADATA_AUDIT&&"Completed"!==(null===e||void 0===e?void 0:e.status)));if(!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let a=0;a<e.length;a++){var t;const i=e[a];if(!Iv(null===i||void 0===i||null===(t=i.place)||void 0===t?void 0:t.id))return!1;const r=i.recordTypes.find((e=>{let{id:t}=e;return Iv(t)}));if(!r)return!1;const n=i.recordTypes.find((e=>{let{date:t}=e;return Array.isArray(t)&&t.length>0}));if(!n)return!1}return!0}(null===o||void 0===o?void 0:o.coverages))return void s({message:hv(),type:"error",dismissable:!0});if(p){var e,a;try{const e=l.find((e=>"metisProjectId"===e.name)).values[0],t=`${h.BP}/service/records/metis/cache/audit/tasks/project/${e}/group/${d}/action/ImageMetadataAudit/start`;await lv.A.put(t)}catch(b){console.error(`Error removing the audit from cache: ${b}`)}const t=await g({variables:{params:{action:Qd.Oz.IMAGE_METADATA_AUDIT,newStatus:"Completed",rmsId:null===o||void 0===o?void 0:o.id,createNewWorkflowAction:!1}}});var i,r;if("204"===!(null!==t&&void 0!==t&&null!==(e=t.data)&&void 0!==e&&null!==(a=e.updateMetisProjectStatus)&&void 0!==a&&a.code))console.error(`metisAuditResponse returned code of ${null===t||void 0===t||null===(i=t.data)||void 0===i||null===(r=i.updateMetisProjectStatus)||void 0===r?void 0:r.code}`)}let A="";try{const e=JSON.parse(localStorage.getItem("react-audit-data"));e&&(A=`/${e.projectId}?auditCompletedFor=${o.id}`)}catch{A=""}if(c.find((e=>"AuditMissingCoverage"===e.name&&"Available"===e.status))){var n,v;const e=await g({variables:{params:{action:"AuditMissingCoverage",newStatus:"Completed",rmsId:null===o||void 0===o?void 0:o.id,createNewWorkflowAction:!1,comment:`reviewed by user ${u}`}}});var y,f;if("204"===!(null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&null!==(v=n.updateMetisProjectStatus)&&void 0!==v&&v.code))console.error(`metisAuditResponse returned code of ${null===e||void 0===e||null===(y=e.data)||void 0===y||null===(f=y.updateMetisProjectStatus)||void 0===f?void 0:f.code}`)}const w=h.pc;window.location.assign(`${w}/records/audit${A}`)}}),[t,p,c,m,o,s,d,l,g,u]);return(0,k.Y)(i.Fragment,null,(0,k.Y)(It.A,{sides:!0},(0,k.Y)("div",{css:Sv},(0,k.Y)(_a.A,{label:(0,k.Y)(O.x,{i18nKey:"groupData.verifiedAllMetadataCaption",defaults:"I have verified <strong>all</strong> of the metadata fields for this folder."}),name:"PreSaveCheckbox",checked:a,onChange:e=>{let{target:t}=e;return r(t.checked)}}),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(Z.A,{emphasis:"high",fullWidth:!0,centered:!0,disabled:!a,onClick:v},Av()))),(0,k.Y)(dv,{overlay:n,onSuccess:v}))}function kv(e){var t;let{hideEditButton:a=!1}=e;const r=(0,_t.mb)(),{returnToAudit:n}=Qg(),o=(0,b.A)(),{group:s}=(0,Dl.P2)(),l=null===s||void 0===s||null===(t=s.internalData)||void 0===t?void 0:t.phoenixAcquisitionIds,{openOverlay:d}=(0,Ti.HQ)(),c=`${h.pc}/ark:/61903/${null===o||void 0===o?void 0:o.currentImageArk}?view=explore&groupId=${null===s||void 0===s?void 0:s.id}&grid=on`,u=(0,i.useCallback)((()=>{(0,Om.l)(null===s||void 0===s?void 0:s.naturalGroupId,"text/plain",(()=>{r({type:"success",message:cv(),dismissable:!0},(()=>{r({type:"error",message:uv(),dismissable:!0})}))}))}),[s,r]);return(0,k.Y)(Q.Ay,{color:W.A.gray02},(0,k.Y)(Z.A,{"data-testid":"back-to-audit-list-button",Icon:pe.A,iconDirection:"backward",onClick:()=>n(l)},pv()),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(re.H6,{size:"H5","data-heading":!0},mv()),(0,k.Y)(Z.A,{to:"https://www.familysearch.org/en/fieldops/article/natural-group-metadata-standards-and-guidelines",external:!0,target:"_blank"},gv()),(0,k.Y)(Bn.A,null,(0,k.Y)(Da.A,{overline:yv(),primaryText:(0,k.Y)(rn.A,{"data-testid":"search-image-group-number-button",to:c,target:"_blank"},Xg(null===s||void 0===s?void 0:s.naturalGroupId)),title:vv(),endElement:(0,k.Y)(Da.A.IconButton,{Icon:qt.A,"data-testid":"copy-image-group-number-button",title:fv(),onClick:u})}),!a&&(0,k.Y)(Da.A,{primaryText:(0,k.Y)(Z.A,{emphasis:"medium",onClick:()=>d("editMetadataOverlay")},bv())})))}function Cv(){return(0,k.Y)(i.Fragment,null,(0,k.Y)(kv,null),(0,k.Y)(Am,{hideHeader:!0}),(0,k.Y)(ae.A,{size:"xxl"}),(0,k.Y)(Ev,null))}const xv=()=>o.i18n.t("view-manager.image-index","Index"),Yv=()=>o.i18n.t("view-manager.group-data","Group Data"),Nv=()=>o.i18n.t("grid-mode.infosheet-content","Select an image to view the index"),Rv=()=>o.i18n.t("view-manager.full-text","Full Text"),Pv=()=>o.i18n.t("select-person.delete.button","Delete"),Ov=()=>o.i18n.t("select-person.add-person.button","Add"),_v=()=>o.i18n.t("select-person.done.button","Done"),Fv=()=>o.i18n.t("grid-mode.infosheet-heading","Indexed Data"),Dv=()=>o.i18n.t("infoSheetWrapper.unauthorizedImageAudit","You do not have permission to audit this image group."),Mv=()=>o.i18n.t("infoSheetWrapper.unauthorizedImageOrganizeMessage","You do not have permission to edit this image group."),Hv=()=>o.i18n.t("view-manager.divide-image-group","Divide Image Group"),Lv=()=>o.i18n.t("view-manager.correct-metadata","Correct Metadata"),zv=()=>o.i18n.t("view-manager.edit-mode-single-item","Edit Image Group"),Vv=e=>o.i18n.t("view-manager.edit-mode","Edit Item {itemNumber}",{itemNumber:e}),Bv=()=>o.i18n.t("headerNavigation.names","Names"),Gv=()=>o.i18n.t("headerNavigation.transcript","Transcript"),Uv=()=>o.i18n.t("headerNavigation.information","Information");function Kv(e){let{overlay:t,handleSave:a}=e;const{itemNumber:r,group:{workflowActions:n}}=(0,Dl.P2)(),{attachWorkflowStatuses:o,updateMetadataWorkflowStatus:s}=(0,Dl.Lw)(),[l]=(0,P.B)(),[d,c]=(0,i.useState)(!1),u={title:l("groupdata.markMetadataComplete.title","Mark complete?"),body:l("groupdata.markMetadataComplete.body","Would you like to mark the Correct Metadata task complete for Item {itemNumber}? Your metadata changes will be saved no matter which option you select.",{itemNumber:r}),doMark:l("groupData.markMetadataComplete.doMark","Mark Complete"),doNotMark:l("groupData.markMetadataComplete.doNotMark","Do Not Mark Complete")};return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:u.title}),(0,k.Y)(te.A,{size:"sm"},u.body),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{onClick:async function(){c("notMarking"),await a(),c(!1)},Icon:"notMarking"===d&&g.A,disabled:d},u.doNotMark),(0,k.Y)(Z.A,{onClick:async()=>{c("marking");try{await a();s(n.id,Qd.Oz.COMPLETED)&&o({...n,correctMetadata:{name:Qd.Oz.METADATA_AUDIT,status:Qd.Oz.COMPLETED}})}catch(e){console.error(e)}c(!1)},emphasis:"high",Icon:"marking"===d&&g.A,disabled:d},u.doMark))))}function qv(){const{deleteCoveragesMode:e,saveGroupData:t,setEdited:a}=(0,Dl.Dt)(),r=(0,Dl.gw)(),n=(0,_t.mb)(),o=(0,_t.mb)(),{unsubscribe:s,closeOverlay:l}=(0,Ti.HQ)(),{group:{currentWorkflowActions:d=[],id:c}}=(0,Dl.P2)(),{validateCoverages:u,coverageDataMissing:h,setAuditMissingCoveragesAsCompleted:p}=(0,Dl.zU)(),{deleteMode:m}=(0,Dl.T9)(),g=(0,$.Ay)(),v=(0,i.useCallback)((()=>{const e=u();if(e){n({message:e,type:"error"})}return!e}),[n,u]),[y,f]=(0,i.useState)(!1),[b,A]=(0,i.useState)([]),[w,T]=(0,i.useState)(null),[I,S]=(0,i.useState)(!1),{showMetadataAudit:E}=(0,Dl.iB)(),C=(0,$.Ay)({initiallyOpen:!1}),{getGroupHasBeenEdited:x}=(0,Dl.$p)({}),Y=(0,i.useCallback)((()=>{r({type:"RESET",value:c}),C.close(),l("editMetadataOverlay")}),[C,l,r,c]),N=(0,i.useCallback)((()=>{x()?C.open():Y()}),[C,x,Y]),R=(0,i.useCallback)((async()=>{var e;if(!v())return;let i;try{f(!0),i=await t()}catch(r){n({message:Ll(),type:"error",dismissable:!0})}"200"===(null===(e=i)||void 0===e?void 0:e.code)?(h&&await p(o),T(!1),a(!0)):function(e,t,a,i){const r=e.message.includes("The following fields experienced errors: "),n=e.message.split("errors:");if(n.length>1){const e=n[1].split(",");t(e),e.forEach((e=>{"imageViewerCoverage"===e.trim()&&a(!0)}))}i({message:r?zl():Ll(),type:"error",dismissable:!0})}(i,A,T,n),f(!1),l("editMetadataOverlay"),s((()=>"editPanelOpen"))}),[v,t,a,n,o,l,s,h,p]),P=(0,i.useCallback)((()=>{A([]),T(!1),N()}),[N]),O=e||m,_=(0,i.useCallback)((()=>{if(!v())return;((null===d||void 0===d?void 0:d.length)>0?d.find((e=>"AuditCoverages"===e.name&&"Available"===e.status)):null)?g.handleClick():R()}),[R,g,v,d]),F=(0,i.useCallback)((()=>O?(0,k.Y)(Jl,null):E?(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"xxl"}),(0,k.Y)(Ev,{saveCoverages:R})):(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"xxl"}),(0,k.Y)(It.A,{sides:!0},(0,k.Y)("div",{css:Ml.infoSheetFooter},(0,k.Y)(_a.A,{name:"I added this name just to stop errors in tests",label:Gl(),checked:I,onChange:()=>S(!I)}),(0,k.Y)(J.Ay,{guttersY:"none",alignX:"end"},(0,k.Y)(Z.A,{disabled:y,onClick:P},Hl()),(0,k.Y)(Z.A,{disabled:y||!I,emphasis:"high",onClick:_},Bl())))))),[O,E,P,R,I,y,_]);return(0,k.Y)(i.Fragment,null,w&&(0,k.Y)("div",{css:Ml.coveragesError},(0,k.Y)("div",{css:Ml.errorIcon},(0,k.Y)(Gt.A,null)),(0,k.Y)("div",{css:Ml.noBottomPadding},(0,k.Y)(te.A,{size:"sm"},jl()))),E&&(0,k.Y)(kv,{hideEditButton:!0}),(0,k.Y)(ch,{editable:!0}),(0,k.Y)(Jh,{errors:b,editable:!0}),(0,k.Y)(F,null),(0,k.Y)(Ze.A,(0,j.A)({title:$l()},C,{footer:(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{onClick:Y},Wl()),(0,k.Y)(Z.A,{emphasis:"high",onClick:C.close},Xl()))}),(0,k.Y)(te.A,{size:"sm"},Ql())),(0,k.Y)(Kv,{overlay:g,handleSave:R}))}var jv=a(56597);const $v=a.p+"static/media/navigation.06ed2fc94604007b9e8b.gif",Wv=a.p+"static/media/citation.151251abc632230dcd4c.gif",Xv=a.p+"static/media/saveRecord.35261a5bedf309981818.gif";function Qv(){const[e]=(0,P.B)();return(0,k.Y)(i.Fragment,null,(0,k.Y)(Dt.A,{src:$v,alt:e("index.transitional.dialog.img_alt_nav","Navigation")}),(0,k.Y)(ae.A,null),(0,k.Y)(re.H6,null,e("index.transitional.dialog.nav_header","New location and label for the Index and Group Data tabs")),(0,k.Y)(ae.A,null),(0,k.Y)("p",null,e("index.transitional.dialog.nav_text","Instead of tabs on the side sheet, you'll now use the names and information buttons in the header to switch between the indexed data and group data. Same details, just easier to find.")))}function Jv(){const[e]=(0,P.B)();return(0,k.Y)(i.Fragment,null,(0,k.Y)(Dt.A,{src:Xv,alt:e("index.transitional.dialog.img_alt_save_record","Save Record")}),(0,k.Y)(ae.A,null),(0,k.Y)(re.H6,null,e("index.transitional.dialog.save_record_header","One button for attaching to Family Tree and saving to source box")),(0,k.Y)(ae.A,null),(0,k.Y)("p",null,(0,k.Y)(O.x,{i18nKey:"index.transitional.dialog.save_record_text"},(0,k.Y)("span",null,"Instead of separate buttons, click ",(0,k.Y)("strong",null,"Save Record")," to attach the record to a person in Family Tree or save it in your source box."))))}function Zv(){const[e]=(0,P.B)();return(0,k.Y)(i.Fragment,null,(0,k.Y)(Dt.A,{"data-testid":"route-next",src:Wv,alt:e("index.transitional.dialog.img_alt_citation","Citation")}),(0,k.Y)(ae.A,null),(0,k.Y)(re.H6,null,e("index.transitional.dialog.citation_header","Copying the citation")),(0,k.Y)(ae.A,null),(0,k.Y)("p",null,(0,k.Y)(O.x,{i18nKey:"index.transitional.dialog.citation_text"},(0,k.Y)("span",null,"To copy the citation, click ",(0,k.Y)("strong",null,"Information"),", and then scroll down. The copy icon is located next to the citation."))))}function ey(){const[e]=(0,P.B)(),t=(0,$.Ay)(),a=(0,i.useCallback)((()=>{t.close(),localStorage.setItem("rip:transitionalDialogSeen","true")}),[t]);return t.isOpen||null!==localStorage.getItem("rip:transitionalDialogSeen")||t.open(),(0,k.Y)(i.Fragment,null,(0,k.Y)(jv.A,(0,j.A)({title:e("index.transitional.dialog.title","Updates to How You Use Records"),initialLocation:"/navigation-route"},t,{closeOnClickAway:!1,size:"lg",nonClosable:!0,"data-testid":"transitioning-dialog-overlay"}),(0,k.Y)(z.A,{path:"/navigation-route",subtitle:"1 of 3",footer:(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{emphasis:"low",onClick:a,"data-testid":"transitioning-dialog-overlay-close"},e("common-ui:close.action","Close")),(0,k.Y)(Z.A,{to:"/save-record-route",emphasis:"high","data-testid":"transitioning-dialog-overlay-next"},e("navigation.next-button","Next")))},(0,k.Y)(Qv,null)),(0,k.Y)(z.A,{path:"/save-record-route",subtitle:"2 of 3",footer:(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{emphasis:"low",onClick:a},e("common-ui:close.action","Close")),(0,k.Y)(Z.A,{to:"/citation-route",emphasis:"high"},e("navigation.next-button","Next")))},(0,k.Y)(Jv,null)),(0,k.Y)(z.A,{path:"/citation-route",subtitle:"3 of 3",footer:(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{emphasis:"high",onClick:a},e("common-ui:close.action","Close")))},(0,k.Y)(Zv,null))))}const ty=(0,y.Ay)("siv:InfoSheetWrapper"),ay={name:"wvkyg7",styles:"img{margin:auto;}"};function iy(e){let{inAuditOrReviewMode:t,attachToTreeOverlay:a,activeTabIndex:r,handleTabChange:n,availableTabs:o,imageHasData:s,isBottomSheet:l,loading:d=!1}=e;const{query:c}=(0,G.A)(),{mode:u,grid:h}=c,p=(0,je.mS)(),m=(0,ci.Ay)()({default:!0,sm:!1}),{rip_sharedImageViewer_rachelDesign:g}=(0,L.h)(["rip_sharedImageViewer_rachelDesign"]);if("metadataAudit"===u)return(0,k.Y)(Cv,null);if("imageQualityAudit"===u)return(0,k.Y)(rv,null);if("DIVIDE"===u)return(0,k.Y)(Am,null);if(g.isOn){const{view:e}=c;return(0,k.Y)(i.Fragment,null,(0,k.Y)(ey,null),"index"===e&&!h&&(0,k.Y)(i.Fragment,null,!m&&(0,k.Y)(i.Fragment,null,l&&(0,k.Y)(Pm,null),!l&&(0,k.Y)(Sm,{loading:d})),m&&(0,k.Y)(Sm,{loading:d}),s&&!p.resetState&&(0,k.Y)(xl,null)),"fullText"===e&&(0,k.Y)(Ig,null),"organize"===e&&(0,k.Y)(Am,null),(!e||"explore"===e)&&(0,k.Y)(Am,null))}return(0,k.Y)(i.Fragment,null,!t||null!==a&&void 0!==a&&a.isOpen?(0,k.Y)(Am,null):(0,k.Y)(zt.A,{index:r,onChange:n},o.includes("index")&&(0,k.Y)(Vt.A,{title:xv()},"on"===h?(0,k.Y)("div",{css:ay},(0,k.Y)(fr,{heading:Fv()}),(0,k.Y)(Dt.A,{src:Sg,width:220,alt:""}),(0,k.Y)(te.A,{size:"sm",centered:!0},Nv())):(0,k.Y)(i.Fragment,null,!m&&(0,k.Y)(i.Fragment,null,l&&(0,k.Y)(Pm,null),!l&&(0,k.Y)(Sm,{loading:d})),m&&(0,k.Y)(Sm,{loading:d}))),o.includes("fullText")&&(0,k.Y)(Vt.A,{title:Rv()},(0,k.Y)(Ig,null)),(0,k.Y)(Vt.A,{title:Yv()},(0,k.Y)(Am,null))),s&&!p.resetState&&"on"!==(null===c||void 0===c?void 0:c.grid)&&"index"===c.view&&(0,k.Y)(xl,null))}function ry(e){var t,a,r;let{loading:n}=e;const{rip_sharedImageViewer_addIndex:o,rip_sharedImageViewer_newAddPersonPanel:s}=(0,L.h)(["rip_sharedImageViewer_addIndex","rip_sharedImageViewer_newAddPersonPanel"]),{restrictedFields:l}=Y(),d=null===l||void 0===l?void 0:l.includes(I.ADD_REMOVE_PERSON),{infoSheetOverlay:c,editMetadataOverlay:u,openOverlay:p,allPanelsClosed:m,attachToTreeOverlay:g,topMostPanel:v}=(0,Ti.HQ)(),{itemNumber:y,itemCount:f,group:w}=(0,Dl.P2)(),T=null===w||void 0===w||null===(t=w.internalData)||void 0===t?void 0:t.phoenixAcquisitionIds,{errorStatus:S,isGroupError:E}=(0,Dl.Ah)(),C=(0,b.A)(),x=(0,je.mS)(),R=(0,je.vl)(),P=zm(),O=Vm(),_=(0,A.Qp)(C.images,C.currentImageArk),{imageHasData:F,isJiapu:D}=Ce({images:null===C||void 0===C?void 0:C.images,currentImageArk:null===C||void 0===C?void 0:C.currentImageArk,thumbnails:null===C||void 0===C?void 0:C.thumbnails}),M=(0,bi.Y)(),{showRecordMetadataReview:H,showMetadataAudit:z,showImageQualityAudit:V}=(0,Dl.iB)(),{rip_sharedImageViewer_rachelDesign:B}=(0,L.h)(["rip_sharedImageViewer_rachelDesign"]),[U,K]=(0,N.usePermission)("LightyearAuditProjectsPermission","LightyearContext"),[q,$]=(0,i.useState)(!1),{isBottomSheet:W,setInfoSheetOrientation:X}=function(){const[e,t]=(0,i.useState)(!1),a=i.useRef(!0);(0,i.useEffect)((()=>()=>{a.current=!1}),[]),ny.getItem("hey_should_i_use_bottom_sheet_here?").then((e=>{a.current&&t(e||!1)}));const r=(0,i.useCallback)((e=>{ny.setItem("hey_should_i_use_bottom_sheet_here?",e),t(e)}),[]);return{isBottomSheet:e,setInfoSheetOrientation:r}}(),Q=(0,i.useMemo)((()=>{var e;const t=[];t.push(C.currentImageArk);(0,A.q5)(_,"PERSON").forEach((e=>{t.push(e.id)}));return((null===_||void 0===_||null===(e=_.floatingElements)||void 0===e?void 0:e.filter((e=>{var t;return"PERSON"===e.elementType&&(null===(t=e.subElements)||void 0===t?void 0:t.length)})))||[]).forEach((e=>{t.push(e.id)})),t.map((e=>`${h.pc}/ark:/61903/${e}`))}),[C.currentImageArk,_]),ee=(0,_t.mb)(),{query:te,setQuery:ae,removeQuery:ie}=(0,G.A)({replaceState:!0}),{mode:re}=te,[ne]=(0,i.useState)(te.view||"explore"),oe=null===te||void 0===te||null===(a=te.personArk)||void 0===a?void 0:a.split("/").find((e=>e.includes("1:1"))),se=null===te||void 0===te?void 0:te.action,le=(0,i.useCallback)((()=>{ee({message:Mv(),dismissable:!0})}),[ee]),{isImageOrganizeMode:de,isDivideMode:ue,isMetadataAllMode:he,isMetadataSingleMode:pe}=(0,Dl.Oq)({unauthorizedCallback:le}),me=(0,i.useCallback)((()=>{if(de){if(ue)return Hv();if(he||pe)return Lv()}return null}),[ue,de,he,pe]);const ge=(0,i.useMemo)((()=>{if(te.volumeSetSearch)return["explore"];if(ue||he||pe)return["organize"];const e=["index"];return"fullText"===ne&&e.push("fullText"),e.push("explore"),e}),[te.volumeSetSearch,ne,ue,he,pe]),ve=(0,i.useMemo)((()=>function(e,t){return e&&t.includes(e)?e:t[0]}(te.view,ge)),[te.view,ge]),ye=(0,i.useMemo)((()=>function(e,t){return t.indexOf(e)}(ve,ge)),[ve,ge]),fe=(0,i.useCallback)((e=>{const t=ge[e];ae({view:t})}),[ae,ge]);(0,i.useEffect)((()=>{"imageQualityAudit"!==re&&"metadataAudit"!==re||U||"loaded"!==K||(ae({mode:void 0}),ee({message:Dv(),dismissable:!0}))}),[U,re,ae,K,ee]);const[be,Ae]=(0,i.useState)(!1),we=!H&&!z&&!V;(0,i.useEffect)((()=>{if(m()&&"index"===te.view){var e,t;const a=["NAME_SURN","NAME_SUF","NAME_GN"],i=e=>e.personIds.length>0,r=null===C||void 0===C||null===(e=C.thumbnails)||void 0===e||null===(t=e[x.referenceFocusedIndex])||void 0===t?void 0:t.ark;null!==C&&void 0!==C&&C.currentImageArk&&M.setDisplayHighlights({mainPartitionKey:C.currentImageArk,fieldTypes:a,customFilter:i}),x.splitScreen&&!x.splitScreenImageGrid&&r&&M.setDisplayHighlights({splitScreenPartitionKey:r,fieldTypes:a,customFilter:i})}}),[m,R,x.editHighlights,x.highlights,x.referenceEditHighlights,x.referenceFocusedIndex,x.splitScreen,C.currentImageArk,null===C||void 0===C?void 0:C.thumbnails,te.view,x.splitScreenImageGrid]),(0,i.useEffect)((()=>{let e=!0;if(!n&&!be&&e){if(se){const e=(0,A.rr)([_],oe);"view"===se&&e?(p("viewIndex"),R({type:"NAV_SELECT_TO_VIEW",value:{personId:oe,recordId:e.recordId}})):(ie("action"),ie("personArk"))}else v()||(R({type:"SET_SELECTED_PERSON_ID",value:null}),ie("personArk"));Ae(!0)}return()=>{e=!1}}),[se,n,be,p,oe,R,C.images,_,ie,v]);const Te=(0,i.useMemo)((()=>{if(f<2)return zv();if(de){if(ue)return Hv();if(he||pe)return Lv()}return Vv(y||"")}),[f,y,ue,de,he,pe]);(0,i.useEffect)((()=>{const e=localStorage.getItem("ly.images.searchResults.lastQuery")||"{}",{hasMissingCoverageData:t}=JSON.parse(e),a=((null===w||void 0===w?void 0:w.currentWorkflowActions)||[]).find((e=>"AuditMissingCoverage"===e.name&&"Available"===e.status));t&&a&&!q&&$(!0)}),[w,q]);const Ie=(null===_||void 0===_||null===(r=_.subElements)||void 0===r?void 0:r.length)>0,Se=(0,i.useMemo)((()=>{function e(e,t){p(t),(0,vi.sx)({event_name:"click_action",link_name:e})}const{grid:t,view:a}=te;if("fullText"===a&&P.editTranscriptMode)return(0,k.Y)(J.Ay,{alignX:"end"},(0,k.Y)(Z.A,{"data-testid":"edit-transcript-done",Icon:pi.A,onClick:()=>O({type:"SET_TRANSCRIPT_EDIT_MODE",payload:!1}),emphasis:"medium",disabled:!F&&!o.isOn},_v()));return 0===x.tabIndex&&"on"!==t&&"index"===a&&(F&&Ie&&!D)?(0,k.Y)(J.Ay,{gutters:"md",alignX:"end"},(0,k.Y)(Z.A,{"data-testid":"select-person-add-button",Icon:mi.A,onClick:()=>e("Add: Open",s.isOn?"addPersonPage1Generic":"addPersonPage1"),emphasis:"medium",disabled:!F&&!o.isOn||d},Ov()),(0,k.Y)(Z.A,{"data-testid":"select-person-delete-button",Icon:gi.A,onClick:()=>e("Delete: Open","removePerson"),emphasis:"medium",disabled:!F||d},Pv())):V?(0,k.Y)(jg,null):null}),[V,x.tabIndex,te,F,o.isOn,p,D,Ie,O,P.editTranscriptMode,d,s.isOn]);return(0,i.useEffect)((()=>{z&&p("editMetadataOverlay")}),[z,p]),ty({isImageOrganizeMode:de,isDivideMode:ue,isMetadataAllMode:he,isMetadataSingleMode:pe,imageHasData:F,zionSlsState:C}),S&&E?null:(0,k.Y)(i.Fragment,null,(0,k.Y)(ce.A,(0,j.A)({nonClosable:z||B.isOn&&ue,dockable:!0,size:"md",title:!z&&(()=>{if(z)return null;if(null!==B&&void 0!==B&&B.isOn){if(ue)return Hv();switch(te.view){case"index":return Bv();case"fullText":return Gv();case"explore":default:return Uv();case"organize":return he||pe?Lv():Uv()}}return me()})()},c,{isBottomSheet:W,setIsBottomSheet:X,footer:Se}),(0,k.Y)(iy,{inAuditOrReviewMode:we,attachToTreeOverlay:g,activeTabIndex:ye,handleTabChange:fe,availableTabs:ge,imageHasData:F,projectId:T,group:w,isBottomSheet:W,loading:n}),(0,k.Y)(hi.A,(0,j.A)({},u,{title:Te}),(0,k.Y)(Eg.A,null,(0,k.Y)(qv,null))),w&&"{}"!==JSON.stringify(w)&&(0,k.Y)(ui.A,{imageURL:window.location,key:w.naturalGroupId,imageTitle:(0,Qd.kg)(w),attachToTreeFirstPanel:g,additionalContentStep1:(0,k.Y)(sv,null),attachmentUrls:Q,onAttachImageToTree:e=>{var t,a,i,r;const n=null===e||void 0===e||null===(t=e.responses)||void 0===t||null===(a=t[0])||void 0===a||null===(i=a.person)||void 0===i?void 0:i.id;(0,vi.sx)({link_name:"attach-to-tree-completed",event_name:"collection_image_attach",attachees:null===e||void 0===e||null===(r=e.responses)||void 0===r?void 0:r.length}),yi.A.log({message:"Attach to Tree completed",imageArk:null===C||void 0===C?void 0:C.currentImageArk,personId:n})}})))}const ny=new fi.Ay({storeName:"infoSheetOrientation"});const oy=function(e,t){const a=(0,i.useRef)(!1);return t&&(a.current=!0),e&&!a.current};var sy=a(94066);function ly(e){let{validSession:t,children:a}=e;const r=(0,D.zy)(),n=(0,L.u)("chinese_sharedImageViewer_clanBranchMultipleValues"),o=(0,L.u)("lightyear_lightyearReact_includeDeprecatedImageGroups"),{query:s,setQuery:l}=(0,G.A)({replaceState:!0}),d=(0,sy.A)(s),[c,{loading:u,error:p}]=(0,Yl._)(Jd.A.naturalGroupParentId()),[m,{error:g}]=(0,Yl._)(o.isOn?Jd.A.getArtifactParentWithInactive():Jd.A.getArtifactParent()),[v,{data:y,loading:f,error:b}]=(0,Yl._)(Jd.A.getSimpleGroupDetails(),{errorPolicy:"all"}),[A,w]=(0,i.useState)(null),[T,I]=(0,i.useState)([]),[S,E]=(0,i.useState)({}),[C,x]=(0,i.useState)(!1),Y=(0,i.useRef)(!0),N=(0,i.useMemo)((()=>f||u||C),[f,u,C]),R=oy(N,Boolean(y)),P=(0,i.useMemo)((()=>{var e;return null!==y&&void 0!==y&&null!==(e=y.group)&&void 0!==e&&e.imageApids?null:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.reduce(((e,t)=>{var a,i,r;return e||(t?(null===t||void 0===t||null===(a=t.graphQLErrors[0])||void 0===a||null===(i=a.extensions)||void 0===i||null===(r=i.response)||void 0===r?void 0:r.status)||500:null)}),null)}(b,g,p)}),[y,b,p,g]);(0,i.useEffect)((()=>{!async function(){try{const e=r.pathname.split("/").pop(),t=await async function(e){try{const r=void 0==={NODE_ENV:"production",PUBLIC_URL:"https://edge.fscdn.org/assets",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.JEST_WORKER_ID?`${h.BP}/platform/records/images/${e}`:null,n=r?await ra.Ay.get(r):{data:{agents:[],sourceDescriptions:[]}},o=null===n||void 0===n?void 0:n.data,s=null===o||void 0===o?void 0:o.sourceDescriptions;if(o.agents){var t,a,i;const e=[];o.agents.forEach((t=>{var a;e.push({lang:t.names[0].lang,value:t.names[0].value,address:null===t||void 0===t||null===(a=t.addresses[0])||void 0===a?void 0:a.value})}));const r=null===(t=s[0])||void 0===t?void 0:t.rights[0],n=[];r&&(r.includes("allowPrint=false")&&n.push("print"),r.includes("allowDownload=false")&&n.push("download"));let l=null,d=null;return null!==o&&void 0!==o&&null!==(a=o.agents)&&void 0!==a&&a.length&&(d=o.agents[0].links.siteUrl.href),s.length&&null!==(i=s[0].notes)&&void 0!==i&&i.length&&(l=s[0].notes[0].text),{permission:l,sources:e,siteUrl:d,restrictedRights:n.length?n:[]}}}catch(r){console.error(r)}return{permission:null,sources:[],restrictedRights:[]}}(e);null!==t&&void 0!==t&&t.sources.length&&w(t)}catch(e){console.error(e),w(null)}}()}),[]),(0,i.useEffect)((()=>{let e=!0;return"index"===d.view&&async function(){let t=d.groupId;if(!t){const e=r.pathname.split("/").pop();t=await da(e)}const a=await async function(e){const t=`${qe.du}/artifact/group/${e}/children`;return ra.Ay.get(t,{headers:qe.b3}).then((async e=>{const{data:t}=e;return t}))}(t);if(!e)return;I(a)}(),()=>{e=!1}}),[r.pathname,d.groupId,d.view]),(0,i.useEffect)((()=>{let e=!0;const a=()=>{e=!1};return t?("index"===d.view&&async function(){let t=d.groupId;if(!t){const e=r.pathname.split("/").pop();t=await da(e)}try{const a=await ua(t);if(!e)return;E(a)}catch(a){console.error("Error fetching group:",a)}finally{x(!1)}}(),a):a}),[r.pathname,d.groupId,d.view,t]);const O=(0,i.useCallback)((e=>{var t,a,i,r,n,o;if(!Boolean(null===e||void 0===e||null===(t=e.group)||void 0===t?void 0:t.parentGroupId))return{...e};const s={ancestralHall:null===e||void 0===e?void 0:e.ancestralHall,changeHistory:[],childCount:0,childGroups:[],childNumber:null,clan:null===e||void 0===e?void 0:e.clan,currentWorkflowActions:[],firstAncestor:null===e||void 0===e?void 0:e.firstAncestor,generationPoem:null===e||void 0===e?void 0:e.generationPoem,id:(null===e||void 0===e||null===(a=e.group)||void 0===a?void 0:a.parentGroupId)||(null===e||void 0===e||null===(i=e.group)||void 0===i?void 0:i.id),imageApids:[],imageReprocessing:[],imageRework:{},imageViewerCoverages:[],indexedChildCount:0,internalData:{},metadata:{},migrantAncestor:null===e||void 0===e?void 0:e.migrantAncestor,naturalGroupId:null===e||void 0===e||null===(r=e.group)||void 0===r||null===(n=r.naturalGroupId)||void 0===n?void 0:n.split("_")[0],parentGroupId:null,properties:(null===e||void 0===e?void 0:e.properties)||[],siblingCount:null,types:(null===e||void 0===e?void 0:e.types)||[],volumeSetTitle:null===e||void 0===e?void 0:e.volumeSetTitle,volumeSetTotalVolumes:null===e||void 0===e?void 0:e.volumeSetTotalVolumes,volumes:null===e||void 0===e?void 0:e.volumes};return Array.isArray(null===e||void 0===e||null===(o=e.group)||void 0===o?void 0:o.siblingIdsWithChildren)&&e.group.siblingIdsWithChildren.forEach((t=>{const a=null!==t&&void 0!==t&&t.childIds?null===t||void 0===t?void 0:t.childIds:[];s.imageApids.push(...a),s.childCount+=null===a||void 0===a?void 0:a.length;const i=(null===e||void 0===e?void 0:e.group.id)===t.parentId;s.childGroups.push(i?null===e||void 0===e?void 0:e.group:{childCount:a.length,id:t.parentId,imageApids:a,imageViewerCoverages:[],indexedChildCount:0,internalData:{},languages:[],metadata:{},naturalGroupId:"",parentGroupId:null===e||void 0===e?void 0:e.group.parentGroupId,siblingIdsWithChildren:[],title:null,volumes:null})})),{group:s}}),[]),_=(0,i.useMemo)((()=>{var e,t;if("index"!==d.view&&y){const e=O(y);return A&&e?(e.imageAttribution=A,e):e}if("index"!==d.view){if(A&&y){const e={...y};return e.imageAttribution=A,e}return y}const a={group:{imageViewerCoverages:null===S||void 0===S?void 0:S.imageViewerCoverages,imageApids:T,metadata:{title:null===S||void 0===S?void 0:S.title,imageGroupNumber:null===S||void 0===S?void 0:S.dgsNumber,creator:null===S||void 0===S?void 0:S.creators,custodian:null===S||void 0===S?void 0:S.custodians,place:null===(e=S.coverages)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.place},childNumber:null===S||void 0===S?void 0:S.itemNumber,siblingCount:null!==S&&void 0!==S&&S.itemNumber?2:void 0,parentId:null===S||void 0===S?void 0:S.parentId}};return A&&(a.imageAttribution=A),a}),[O,y,T,A,S,d.view]),F=(0,i.useCallback)((async()=>{if(d.groupId)if("index"!==d.view)try{var e,t;const a=await c({variables:{childGroupIdOrArkId:d.groupId}});let i=null!==(e=null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.naturalGroupParentId)&&void 0!==e?e:d.groupId;"organize"!==d.view&&(i=d.groupId);const r=["explore","organize"].includes(d.view);v({variables:{detailed:r,groupIdOrArkId:i,multipleClanBranches:r&&n.isOn}})}catch(a){console.error(a)}else x(!0)}),[n.isOn,v,c,d.groupId,d.view]),M=(0,i.useCallback)((async()=>{try{if("index"!==d.view&&!g&&Y.current&&!d.volumeSetSearch||"index"!==d.view&&!g&&!d.groupId){var e,t;const a=r.pathname.split("/").pop(),i=await m({variables:{ark:a}}),n=o.isOn?null===i||void 0===i||null===(e=i.data)||void 0===e?void 0:e.getArtifactParentWithInactive:null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.getArtifactParent;n!==(null===d||void 0===d?void 0:d.groupId)&&l({groupId:n}),Y.current=!1}}catch(a){console.error(a)}}),[d.groupId,d.view,d.volumeSetSearch,g,r.pathname,m,l,o.isOn]);return(0,i.useEffect)((()=>{M()}),[M]),(0,i.useEffect)((()=>{F()}),[F]),(0,k.Y)(Cg.Ay,{initialData:_,loading:R},(0,k.Y)(xg.A,{parentGroup:null===y||void 0===y?void 0:y.group},(0,k.Y)(Yg.A,null,(0,k.Y)(Gg,null,(0,k.Y)(kg.A,{errorStatusCode:P,isGroupError:!(null!==y&&void 0!==y&&y.group)},a)))))}var dy=a(81732),cy=a(404);function uy(){const[e,t]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{const e=()=>{t(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}}),[]),[e,()=>{document.fullscreenElement?document.exitFullscreen().catch((e=>{console.error(`Error attempting to exit full-screen mode: ${e.message}`)})):document.body.requestFullscreen().catch((e=>{console.error(`Error attempting to enable full-screen mode: ${e.message}`)})),t((e=>!e))}]}var hy=a(58429);const py=a.p+"static/media/unauthorized.996e641ebb79f47fba70ce92cb165325.svg";const my=a.p+"static/media/unavailable.7e5ba8575135bb10050d1e1491774ddd.svg",gy=(0,k.AH)("background-color:",W.A.gray03,";flex:1;"),vy=(0,k.AH)("background-color:",W.A.gray03,";height:100%;width:100%;"),yy={name:"128ztr9",styles:"display:flex;flex-direction:column;justify-content:center;align-items:center;padding:16px;max-width:750px;margin-inline-start:auto;margin-inline-end:auto;text-align:center;gap:4px;height:100%;"},fy={name:"115fm0k",styles:"max-width:100%;height:auto;margin-top:16px;"},by=0,Ay=1,wy=2;const Ty=i.memo((function(e){let{errorState:t,view:a}=e;const[r]=(0,P.B)(),{setErrorStatus:n}=(0,Dl.Ah)(),o=(0,i.useRef)(),s=!a,{query:l}=(0,G.A)();(0,i.useEffect)((()=>{t&&s&&n(t)}),[t,s,n]);const d=(0,i.useMemo)((()=>{if(s)return null;const e=document.referrer;return e.includes("images/search-results")||e.includes("images/beta/search-results")?by:e.includes("ark:/61903/1:1")||e.includes("ark:/61903/1:2")?Ay:wy}),[s]),c=(0,i.useMemo)((()=>{let e,a;return t===hy.r.UNAUTHORIZED?(a="jiapu"===l.volumeSetSearch?r("ImageGroupError.jiapuUnauthorizedBody","FamilySearch International has recently suspended access to certain Chinese family records as it reviews developments with respect to privacy laws, contractual agreements and technology requirements. Thank you for your understanding and continued support."):r("ImageGroupError.unauthorizedBody","We don't have permission to share this image group. Access is usually determined by the records' creator or custodian or by data privacy laws."),e=r("ImageGroupError.unauthorizedHeader","Unable to Display Image Group")):t===hy.r.NOT_FOUND?(e=r("ImageGroupError.notFoundHeader","Image Group Not Found"),a=r("ImageGroupError.notFoundBody","We are unable to find this image group.")):(e=r("ImageGroupError.unavailableHeader","Cannot Display Image Group"),a=r("ImageGroupError.unavailableBody","Try refreshing the page, or come back later.")),(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H3,null,e),(0,k.Y)(te.A,null,a))}),[t,r,l.volumeSetSearch]),u=(0,i.useMemo)((()=>{if("explore"!==a&&"organize"!==a)return null;let e,i;return t===hy.r.UNAVAILABLE?null:(e=d===wy?"/records/images":document.referrer,i=d===wy?r("ImageGroupError.goToExplore","Go To Explore Images"):d===by?r("ImageGroupError.backToSearch","Back To Search"):r("common-ui.back.action"),(0,k.Y)(Z.A,{emphasis:"medium",external:!0,to:e},i))}),[t,d,r,a]);return(0,k.Y)("div",{css:s?vy:gy,ref:o},(0,k.Y)("div",{css:yy},c,u,(0,k.Y)("img",{alt:"","aria-hidden":!0,src:t===hy.r.UNAUTHORIZED?py:my,css:fy})))})),Iy="shared-image-viewer.maintainZoomPan";function Sy(){return{initialMaintainZoomPan:!1!==(0,od.usePreference)(Iy),onToggleMaintainZoomPan:(0,i.useCallback)((e=>{(0,od.setPreference)(Iy,e)}),[])}}var Ey=a(68161);const ky=(0,k.AH)("padding:var(--spacer-nano,4px);background-color:",W.A.gray03,";"),Cy=(0,k.AH)("overflow:hidden;border:1px solid ",W.A.gray10,";border-start-start-radius:8px;border-start-end-radius:8px;width:50%;display:flex;position:relative;flex-grow:1;flex-direction:column;"),xy={name:"cnkcry",styles:"padding:4px;overflow:hidden;height:0;flex-grow:1;display:flex;gap:var(--spacer-xxs,12px);"},Yy={name:"14kvf3f",styles:"display:flex;flex-grow:1;flex-direction:column;position:relative;"};function Ny(e){let{MainImageViewer:t,MainRibbonViewer:a,mainImageTitleText:i,mainRibbonReady:r,SplitScreenImageViewer:n,SplitScreenRibbonViewer:o,splitScreenTitleText:s,splitScreenRibbonReady:l,splitScreenIsOpen:d=!1,setSplitScreenIsOpen:c,appName:u}=e;const h=function(e){switch(e){case"Rii":return"close-split-screen-button-rii";case"FamilyReview":return"close-split-screen-button-family-review";default:throw new Error("appName must be tracked in this switch statement for readabilitie's sake... (just add a new case)")}}(u);return(0,k.Y)("div",{css:xy},d&&Boolean(n)&&(0,k.Y)(Ey.Ay,{z:4,css:Cy},(0,k.Y)(J.Ay,{css:ky,gutters:"nano",guttersY:"none"},(0,k.Y)(re.H6,{growX:!0,noShrinkX:!0},s),c&&(0,k.Y)(ee.A,{"data-testid":"close-split-screen-button",noShrinkX:!0,size:"sm",emphasis:"low",Icon:$g.A,onClick:()=>c(!1),linkName:h,dense:!0})),(0,k.Y)("div",{css:Yy},n),l&&o),(0,k.Y)(Ey.Ay,{z:4,css:Cy},d&&(0,k.Y)(J.Ay,{css:ky},(0,k.Y)(re.H6,null,i)),(0,k.Y)("div",{css:Yy},t),r&&a))}var Ry=a(59368),Py=a(45236);const Oy=(0,y.Ay)("rip:FamilyReviewCorrection:reducer"),_y={STEP_ONE:"1",STEP_TWO:"2",STEP_THREE:"3",STEP_FOUR:"4"},Fy={activeFieldId:"",addNewEvent:{eventId:"",typeId:""},addedSexId:"",currentStep:_y.STEP_ONE,creatingRect:!1,isAddingHighlight:!1,selectedPersonId:"",selectedEventId:"",error:!1,userId:"",statsTrackingUserAction:"reviewed",stepTwo:{relationshipCards:[{personId:"",hasBeenReviewed:!1}],allReviewsComplete:!1,initialized:!1},stepThree:{eventCards:[],allReviewsComplete:!1,initialized:!1,addedFloatingEventPersonId:""},splitScreenFocusedIndex:void 0,splitScreenPartitionKey:void 0,showImageGrid:!1};function Dy(e,t){switch(Oy("reducer called: ",{state:e,type:t.type,value:t.value}),t.type){case"SET_STATE":return{...e,...t.value};case"SET_STATS_TRACKING_USER_ACTION":if("fixed"!==t.value&&"reviewed"!==t.value)throw new Error('Invalid value for stats tracking. Valid values are "fixed" or "reviewed"');return{...e,statsTrackingUserAction:t.value};case"SET_SPLIT_SCREEN_FOCUSED_INDEX":return{...e,splitScreenFocusedIndex:t.value};case"SET_SPLIT_SCREEN_PARTITION_KEY":return{...e,splitScreenPartitionKey:t.value};case"SET_SHOW_IMAGE_GRID":return{...e,showImageGrid:t.value};case"SET_ACTIVE_FIELD_ID":return{...e,activeFieldId:t.value};case"SET_IS_ADDING_HIGHLIGHT":return{...e,isAddingHighlight:t.value};case"SET_ADDED_FLOATING_EVENT_PERSON":return{...e,stepThree:{...e.stepThree,addedFloatingEventPersonId:t.value}};case"SET_ADD_NEW_EVENT_IDS":{const t=(0,$e.Vs)();return{...e,addNewEvent:{eventId:t,typeId:(0,$e.Vs)()},selectedEventId:t}}case"RESET_ADD_NEW_EVENT_IDS":return{...e,addNewEvent:{eventId:"",typeId:""}};case"SET_CURRENT_STEP":return{...e,currentStep:t.value};case"SET_CREATING_RECT":return{...e,creatingRect:t.value};case"SET_ERROR":return{...e,error:t.value};case"SET_SELECTED_PERSON_ID":return{...e,selectedPersonId:t.value};case"SET_SELECTED_EVENT_ID":return{...e,selectedEventId:t.value};case"SET_USER_ID":return{...e,userId:t.value};case"RESET_STEP_TWO":return{...e,stepTwo:{relationshipCards:[{personId:"",hasBeenReviewed:!1}],allReviewsComplete:!1,initialized:!1}};case"SET_STEP_TWO_CARD_REVIEWS":{var a,i;const r=t.value.map((t=>{const a=e.stepTwo.relationshipCards.find((e=>(null===e||void 0===e?void 0:e.personId)===(null===t||void 0===t?void 0:t.personId)));return{...t,hasBeenReviewed:!!a&&a.hasBeenReviewed}}));return{...e,stepTwo:{...e.stepTwo,relationshipCards:r,allReviewsComplete:r.every((e=>e.hasBeenReviewed))},selectedPersonId:(null===(a=r.find((e=>!e.hasBeenReviewed)))||void 0===a?void 0:a.personId)||(null===(i=r[0])||void 0===i?void 0:i.personId)}}case"SET_STEP_TWO_DATA":{var r;let a=!1;if(null!==t&&void 0!==t&&null!==(r=t.value)&&void 0!==r&&r.relationshipCards&&(a=t.value.relationshipCards.every((e=>e.hasBeenReviewed))),!e.stepTwo.initialized)return{...e,stepTwo:{...e.stepTwo,relationshipCards:t.value.relationshipCards,initialized:!0,allReviewsComplete:a},selectedPersonId:t.value.selectedPersonId};const i=e.stepTwo.relationshipCards.findIndex((e=>!e.hasBeenReviewed)),n=-1!==i?e.stepTwo.relationshipCards[i].personId:"";return{...e,selectedPersonId:n}}case"RESET_STEP_THREE":return{...e,stepThree:{eventCards:[],allReviewsComplete:!1,initialized:!1}};case"RESET_STEP_THREE_CARD_REVIEWS":var n,o;return{...e,stepThree:{...e.stepThree,eventCards:t.value,allReviewsComplete:!1},selectedEventId:(null===(n=t.value[0])||void 0===n?void 0:n.eventId)||(null===(o=e.stepThree.eventCards[0])||void 0===o?void 0:o.eventId)};case"SET_STEP_THREE_DATA":{var s;let a=!1;if(null!==t&&void 0!==t&&null!==(s=t.value)&&void 0!==s&&s.eventCards&&(a=t.value.eventCards.every((e=>e.hasBeenReviewed))),!e.stepThree.initialized)return{...e,stepThree:{...e.stepThree,eventCards:t.value.eventCards,initialized:!0,allReviewsComplete:a},selectedEventId:t.value.selectedEventId};const i=e.stepThree.eventCards.findIndex((e=>!e.hasBeenReviewed)),r=-1!==i?e.stepThree.eventCards[i].eventId:"";return{...e,selectedEventId:r}}case"MARK_RELATIONSHIP_CARD_CORRECT":{const a=e.stepTwo.relationshipCards.map((e=>e.personId===t.value?{...e,hasBeenReviewed:!0}:e)),i=a.findIndex((e=>!e.hasBeenReviewed));return{...e,stepTwo:{...e.stepTwo,relationshipCards:a,allReviewsComplete:-1===i},selectedPersonId:-1!==i?a[i].personId:e.selectedPersonId}}case"MARK_EVENT_CARD_CORRECT":{const a=e.stepThree.eventCards.map((e=>e.eventId===t.value?{...e,hasBeenReviewed:!0}:e)),i=a.findIndex((e=>!e.hasBeenReviewed));return{...e,stepThree:{...e.stepThree,eventCards:a,allReviewsComplete:-1===i},selectedEventId:-1!==i?a[i].eventId:e.selectedEventId}}default:throw new Error(`Unhandled type in Family Review reducer: ${t.type}`)}}const My=_y,Hy=(0,i.createContext)({}),Ly=(0,i.createContext)({});function zy(e){let{children:t}=e;const[a,r]=(0,i.useReducer)(Dy,Fy);return(0,k.Y)(Hy.Provider,{value:a},(0,k.Y)(Ly.Provider,{value:r},t))}const Vy=()=>{const e=(0,i.useContext)(Hy);if(void 0===e)throw new Error("useFamilyReviewStateContext must be used within a FamilyReviewContextProvider. If writing a test, use <StateProvider> from testUtils.js");return e},By=()=>{const e=(0,i.useContext)(Ly);if(void 0===e)throw new Error("useFamilyReviewDispatchContext must be used within a FamilyReviewContextProvider. If writing a test, use <StateProvider> from testUtils.js");return e},Gy="index",Uy="fullText",Ky="Family Review",qy=[{name:Gy},{name:Uy},{name:"Full Name Review"},{name:Ky}];const jy=e=>{let{id:t,freezeAttachStateList:a,onToggleAttachedListener:i}=e;const{attached:r}=(0,Ry.MP)(),[n]=(0,P.B)();return null!==a&&void 0!==a&&a.includes(t)?null:(0,k.Y)(Ye.A,null,(0,k.Y)(J.Ay,{wrap:!0,alignX:"center"},(0,k.Y)(Z.A,{emphasis:"medium",Icon:r?$g.A:vn.A,onClick:()=>i(t)},r?n("highlights-base.button.detach","Detach"):n("highlights-base.button.attach","Attach"))))},$y=()=>{var e,t;const a=(0,b.A)(),i=Vm(),[r]=(0,P.B)(),{fullTextCreateRecordsAndAttachOverlay:n}=(0,Ti.HQ)(),o=(0,A.Qp)(a.images,a.currentImageArk),s=mg({currentImage:o});let{fieldId:l}=(0,Ry.MP)();l=l.replace(/_\d+$/,"");const d=(0,A.rr)(a.images,l);if(d&&!n.isOpen&&["NAME_SURNAME","NAME_GIVEN","NAME_SUFFIX"].includes(null===(e=d.typeData)||void 0===e||null===(t=e.elementTypes)||void 0===t?void 0:t[0])){let e="";const t=(0,A.x5)(a.images),o=(0,A.km)(d,"NAME",t);if(o.length){var c,u,h;e=`${(0,A.OV)(null===(c=(0,A.q5)(o[0],"NAME_GN",!0))||void 0===c?void 0:c[0])||""} ${(0,A.OV)(null===(u=(0,A.q5)(o[0],"NAME_SURN",!0))||void 0===u?void 0:u[0])||""} ${(0,A.OV)(null===(h=(0,A.q5)(o[0],"NAME_SUF",!0))||void 0===h?void 0:h[0])||""}`}return(0,k.Y)(Ye.A,null,(0,k.Y)(te.A,{centered:!0,size:"sm"},e),(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(Z.A,{centered:!0,emphasis:"medium",linkName:"full-text-highlight-attach-to-tree","data-testid":"highlight-attach-to-tree-button",onClick:()=>{n.handleClick(),i({type:"ADD_PERSON_TO_ATTACH",value:{personToAttach:s.find((e=>e.key===o[0].id))}})}},r("highlights-base.button.attach-to-tree","Attach to Tree")))}return null};function Wy(e){let{forSplitScreen:t,showEditHighlights:a,freezeAttachStateList:r}=e;const{displayHighlights:n,splitScreenDisplayHighlights:o,recordDisplayHighlights:s,recordDisplayHighlightsApi:l,splitScreenRecordDisplayHighlights:d,splitScreenRecordDisplayHighlightsApi:c}=(0,je.Z0)(),{isCreatingRects:u}=(0,bi.Y)(),{onHoverHighlight:h,onFocusHighlight:p,onUpdateHighlight:m,onToggleAttachedListener:g,onHoverRecordHighlight:v}=function(e){const t=(0,Ti.HQ)(),a=(0,je.vl)(),r=(0,je.mS)(),n=Vy(),o=By(),{query:s}=(0,G.A)(),l=(0,i.useRef)(qy.find((e=>s.view===e.name||s.task===e.name)).name);let d=r,c=a;l.current===Ky&&(d=n,c=o);const{displayHighlights:u,displayHighlightsApi:h,splitScreenDisplayHighlights:p,splitScreenDisplayHighlightsApi:m}=(0,je.Z0)(),{activeFieldInfo:g}=(0,bi.Y)(),v=(0,i.useRef)(e?p:u),y=(0,i.useRef)(e?m:h);(0,i.useEffect)((()=>{v.current=e?p:u}),[u,p,e]),(0,i.useEffect)((()=>{y.current=e?m:h}),[h,m,e]);const f=(0,i.useCallback)(((e,a)=>{if(a)if(t.topMostPanel&&!t.topMostPanel()){const t=v.current.highlights[e];if(l.current===Uy)c({type:"SET_ACTIVE_FIELD_ID",value:t.fieldId});else if(l.current===Gy){const e=t.personIds;if(e[0]){const t=v.current.ids.filter((t=>v.current.highlights[t].personIds.some((t=>e.some((e=>e===t))))));y.current.hover(t),c({type:"SET_HIGHLIGHTED_PERSON_ID",value:e[0]})}}}else y.current.hover(e);else y.current.hover(),t.topMostPanel&&!t.topMostPanel()&&(l.current===Uy?c({type:"SET_ACTIVE_FIELD_ID",value:""}):l.current===Gy&&c({type:"SET_HIGHLIGHTED_PERSON_ID",value:""}))}),[c,t,l]),b=(0,i.useCallback)(((e,t)=>{l.current===Gy&&c({type:"SET_STATE",value:{highlightedRecordId:t?e:""}})}),[c]);return{onHoverHighlight:f,onFocusHighlight:(0,i.useCallback)((e=>{if(l.current===Gy&&t.topMostPanel&&!t.topMostPanel()){const a=v.current.highlights[e];null!==a&&void 0!==a&&a.personIds[0]&&(t.openOverlay("viewIndex"),c({type:"NAV_SELECT_TO_VIEW",value:{personId:a.personIds[0],recordId:a.recordId}}))}else d.creatingRect&&c({type:"SET_CREATING_RECT",value:!1}),y.current.select(e)}),[c,t,d.creatingRect]),onUpdateHighlight:(0,i.useCallback)(((e,t)=>{const{x:a,y:i,width:r,height:n}=v.current.highlights[e].position;t.x.toFixed(4)===a.toFixed(4)&&t.y.toFixed(4)===i.toFixed(4)&&t.width.toFixed(4)===r.toFixed(4)&&t.height.toFixed(4)===n.toFixed(4)||y.current.update(e,{position:t,change:"edit"})}),[]),onToggleAttachedListener:(0,i.useCallback)((e=>{const t=v.current.highlights[e];if(!0===t.attached){const a=t.originalHighlight.fieldId!==(null===g||void 0===g?void 0:g.id);y.current.update(e,{attached:!1,change:!a&&"deselected",fieldType:"",fieldId:a?t.originalHighlight.fieldId:"",personIds:t.personIds.length?(0,$e.xR)(t.personIds,t.personIds.indexOf(d.selectedPersonId)):t.personIds})}else y.current.update(e,{attached:!0,change:"edit",fieldType:null===g||void 0===g?void 0:g.fieldType,fieldId:null===g||void 0===g?void 0:g.id,personIds:[...t.personIds,d.selectedPersonId]})}),[d.selectedPersonId,g]),onHoverRecordHighlight:b}}(t),{query:y}=(0,G.A)(),f=(0,L.u)("rip_sharedImageViewer_fullTextHighlightAttachButton"),b=(0,i.useCallback)((e=>{let{id:t}=e;return(0,k.Y)(jy,{id:t,freezeAttachStateList:r,onToggleAttachedListener:g})}),[r,g]);return a?(0,k.Y)(i.Fragment,null,(0,k.Y)(Xt.N,{editable:!0,drawMode:u,state:t?d:s,api:t?c:l,Component:Py.A,onHover:v}),(0,k.Y)(Xt.N,{editable:!0,SelectedContent:b,drawMode:u,state:t?o:n,Component:Qt.A,onHover:h,onFocus:p,onUpdate:m})):(0,k.Y)(i.Fragment,null,(0,k.Y)(Xt.N,{state:t?d:s,api:t?c:l,Component:Py.A,onHover:v}),(0,k.Y)(Xt.N,{state:t?o:n,Component:Qt.A,onHover:h,onFocus:p,SelectedContent:"fullText"===y.view&&f.isOn?$y:null}))}var Xy=a(93227);const Qy={name:"1834v0y",styles:"margin-top:-1px;box-sizing:border-box;display:flex;align-items:flex-start;& div{border:none;}& select:focus{margin-top:1px;margin-inline-end:1px;}& select{box-shadow:0px 1px 5px 0px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 3px 1px -2px rgba(0,0,0,0.12);}"};function Jy(e){let{preventDownloads:t,viewMode:a,setViewMode:r}=e;const n=(0,ln.X$)(),o=(0,ln.WH)(),[s]=(0,P.B)(),l=(0,Ti.HQ)(),d=(0,Pr.XQ)(),c=(0,je.mS)(),u=(0,je.vl)(),{isInEditMode:h,isCreatingRects:p}=(0,bi.Y)(),{displayHighlights:m,displayHighlightsApi:g,recordDisplayHighlightsApi:v}=(0,je.Z0)(),y=!(null!==m&&void 0!==m&&m.isShowingAll),{query:f}=(0,G.A)(),{showMetadataAudit:b,showImageQualityAudit:A}=(0,Dl.iB)(),{itemCount:w,itemNumber:T}=(0,Dl.P2)(),{isImageOrganizeMode:I}=(0,Dl.Oq)(),S={options:(0,i.useMemo)((()=>[{value:"single",label:s("sharedViewer.viewIndividualImage","View item {itemNumber} by itself",{itemNumber:T})},{value:"group",label:s("sharedViewer.viewWholeGroup","View image group")}]),[T,s]),value:a,onChange:e=>r(e.target.value),hidePlaceholder:!0,name:"view-image-by-itself-button"};return(0,k.Y)(i.Fragment,null,(h||"highlightsPanel"===l.topMostPanel())&&!p&&!c.creatingRect&&(0,k.Y)(Bt.A,{Icon:()=>(0,k.Y)(tf,{toggle:y}),onClick:()=>{g.showAll(!m.isShowingAll),v.showAll(!m.isShowingAll)},label:null!==m&&void 0!==m&&m.isShowingAll?s("shared-image-viewer.hide.button-label","Hide Highlights"):s("shared-image-viewer.show.button-label","Show Highlights"),linkName:"show-hide-highlights-button"}),(0,k.Y)(Zy,null),!c.splitScreen&&"fullText"!==f.view&&!A&&!b&&(0,k.Y)(Bt.A,{Icon:ki.A,onClick:()=>{u({type:"SET_SPLIT_SCREEN",value:!0}),o(d.focusedIndex),n(!0)},label:s("shared-image-viewer.open-split-screen.button","Split Screen"),linkName:"split-screen-button"}),t&&(0,k.Y)(Bt.A,{Icon:ef,disabled:!0,label:s("imageViewer.noDownloadButton","Due to contract restrictions this feature is disabled"),linkName:"no-download-button"}),c.moveGroupSelectorToTop?(0,k.Y)("div",{css:Qy},(0,k.Y)($d,null)):!I&&w>1&&(0,k.Y)("div",{css:Qy},(0,k.Y)(qd.A,S)))}function Zy(){const{infoSheetOverlay:e}=(0,Ti.HQ)(),[t]=(0,P.B)(),a=(0,L.u)("rip_sharedImageViewer_rachelDesign");return null!==e&&void 0!==e&&e.isOpen||a.isOn?null:(0,k.Y)(Bt.A,{Icon:Xy.A,onClick:()=>{e.handleClick()},label:t("open-infosheet.button","Open Panel"),linkName:"open-panel-button"})}function ef(){return(0,k.Y)(Ut.A,{color:W.A.gray50})}function tf(e){let{toggle:t}=e;return(0,k.Y)(ye.A,{toggle:t})}var af=a(99445);const rf=(0,y.Ay)("siv:SharedImageBrowserViewer");function nf(){var e,t;const[a]=(0,P.B)(),{query:r}=(0,G.A)({replaceState:!0}),[n]=(0,ga.Ay)(),[o]=(0,ga.Ay)(),s=(0,jn.Ay)(),{view:l="explore"}=r,{isCreatingRects:d,isInEditMode:c,init:u}=(0,bi.Y)(),p=(0,L.u)("shared_dasProxy"),{fullTextCreateRecordsAndAttachOverlay:v}=(0,Ti.HQ)(),{triggerStatusOverlay:y}=Bm(),f=(0,$.Ay)(),{displayHighlights:A}=(0,je.Z0)(),{loading:w,imageAttribution:T}=(0,Dl.P2)(),I=(0,je.vl)(),S=(0,je.mS)(),E=(0,Pr.XQ)(),C=(0,b.A)(),{currentImageArk:x,images:Y}=C,{errorStatus:N}=(0,Dl.Ah)(),{citation:R,plainTextTranscript:O}=Gm(),_=Sy(),[F,D]=(0,i.useState)(5),{viewMode:M,setViewMode:H}=(0,af.A)(),[z,V]=(0,i.useState)(5),B=(0,i.useRef)(void 0),[U,K]=uy(),q=(0,ln.gq)(),W=null===q||void 0===q?void 0:q.imageApids,X=function(e){const[t,a]=(0,i.useState)(null),[r,n]=(0,i.useState)(!1),{query:o}=(0,G.A)();return(0,i.useEffect)((()=>{"index"!==(null===o||void 0===o?void 0:o.view)||t||async function(){if(!r&&void 0!==(null===e||void 0===e?void 0:e.parentId)){n(!0);try{const t=await ca(e.parentId),i=t.reduce(((e,t)=>[...e,...t.childIds]),[]);a({...e,childGroups:t,imageApids:i})}catch(t){console.error(t),a({imageApids:[],title:"Failed to fetch group data"})}n(!1)}}()}),[o,e,t,r]),r?null:t}(q),Q=(0,i.useMemo)((()=>"index"===(null===r||void 0===r?void 0:r.view)&&"group"===M&&X),[r,M,X]);let Z=null===(e=C.thumbnails)||void 0===e?void 0:e.map((e=>{var t;return{alt:e.alt,id:e.id,src:(null===(t=e.srcSet)||void 0===t?void 0:t[0])||""}}));Q&&(Z=Q.imageApids.map((e=>({alt:e,id:e,src:`${h.BP}/service/records/storage/deepzoomcloud/dz/v1/apid:${e}/thumb_p200.jpg?sessionId=${(0,m.u0)()}`}))));const ee=(null===T||void 0===T||null===(t=T.restrictedRights)||void 0===t?void 0:t.indexOf("download"))>0,te=(0,ln.WG)(Q);(0,ln.YZ)(),(0,ln.d9)({ribbonImages:Z,overrideSections:Q?te:null}),(0,ln.sA)(Q),(0,ln.XA)(),(0,ln.Yj)();const ae=(0,ln.X$)(),ie=(0,ln.WH)(),re=(0,ln.hK)(),ne=(0,ln.v_)(),oe=(0,ln.dJ)(),se=(0,ln.hV)(),le=(0,ln.Tf)(),de=(0,i.useCallback)((e=>{se(e),le(e)}),[se,le]);return rf({currentImageArk:x,focusedIndex:E.focusedIndex,imagesData:Y,ribbonImages:Z,thumbnails:C.thumbnails,imageApids:W,loading:w,group:q,showImageGrid:"on"===(null===r||void 0===r?void 0:r.grid),r2State:S}),(0,i.useEffect)((()=>{var e,t;const a=S.splitScreen&&!S.splitScreenImageGrid?null===C||void 0===C||null===(e=C.thumbnails)||void 0===e||null===(t=e[S.referenceFocusedIndex])||void 0===t?void 0:t.ark:void 0;if(B.current!==x){const e=Y.find((e=>e.partitionKey===x));u({mainImageArk:x,splitScreenImageArk:a}),e&&(B.current=null===e||void 0===e?void 0:e.partitionKey)}}),[x,Y]),N?(0,k.Y)(i.Fragment,null,(0,k.Y)(Ty,{errorState:N,view:l}),(0,k.Y)(cu,null)):(0,k.Y)(i.Fragment,null,w?(0,k.Y)(J.Ay,{alignX:"center",alignY:"middle"},(0,k.Y)(g.A,{size:"md"})):(0,k.Y)(i.Fragment,null,(0,k.Y)(Ny,{appName:"Rii",splitScreenIsOpen:S.splitScreen,setSplitScreenIsOpen:e=>I({type:"SET_SPLIT_SCREEN",value:e}),splitScreenTitleText:a("shared-image-viewer.view-only","View Only: Image {index}",{index:S.referenceFocusedIndex+1}),splitScreenRibbonReady:!S.splitScreenImageGrid&&Z,mainImageTitleText:a("shared-image-viewer.original","Original: Image {index}",{index:E.focusedIndex+1}),mainRibbonReady:"on"!==(null===r||void 0===r?void 0:r.grid)&&Z,SplitScreenImageViewer:(0,k.Y)($t.A,(0,j.A)({},o,{images:null===C||void 0===C?void 0:C.thumbnails,setFocusedIndex:ie,focusedIndex:S.referenceFocusedIndex,ImageComponent:Wt.A,showImageGrid:S.splitScreenImageGrid,setShowImageGrid:ae,setColumnCount:V,columnCount:s({default:3,md:z}),downloadControl:!ee,numbered:!0},_,{minZoom:.8}),("fullText"===l||"index"===l)&&(0,k.Y)(Wy,{showEditHighlights:c,forSplitScreen:!0})),SplitScreenRibbonViewer:(0,k.Y)(Jt.A,{focusedIndex:S.referenceFocusedIndex,setFocusedIndex:ie,images:Z||[]}),MainImageViewer:(0,k.Y)($t.A,(0,j.A)({},n,{drawingMode:d||S.creatingRect,onRectangleDrawn:re,prompt:d||S.creatingRect?a("draw-highlight.body","Click anywhere and drag to create a highlight"):"",setFocusedIndex:de,focusedIndex:C.thumbnails?E.focusedIndex:0,showImageGrid:"on"===(null===r||void 0===r?void 0:r.grid),setShowImageGrid:oe,setColumnCount:D,columnCount:s({default:3,md:F}),images:C.thumbnails||[{id:`image-${C.currentImageArk}`,alt:`Image ${C.currentImageArk+1}`,src:(0,xe.F)(C.currentImageArk,p.isOn),ribbonSrc:(0,xe.Td)(C.currentImageArk,p.isOn),ark:C.currentImageArk}],ImageComponent:Wt.A,attribution:null!==T&&void 0!==T?T:null,downloadControl:!ee,onDownload:async()=>{try{f.handleClick()}catch(e){y()}},sections:te,hoverButtonProps:ne,controls:(0,k.Y)(i.Fragment,null,(0,k.Y)(Bt.A,{label:a("shared-image-viewer.toggle-fullscreen","Toggle fullscreen mode"),Icon:U?dy.A:cy.A,onClick:K,linkName:"fullscreen-button"}),(0,k.Y)(Jy,{preventDownloads:ee,viewMode:M,setViewMode:H})),gridControls:(0,k.Y)(i.Fragment,null,(0,k.Y)(Bt.A,{label:a("shared-image-viewer.toggle-fullscreen","Toggle fullscreen mode"),Icon:U?dy.A:cy.A,onClick:K,linkName:"fullscreen-button"}),(0,k.Y)(Jy,{preventDownloads:ee,viewMode:M,setViewMode:H})),numbered:!0},_,{minZoom:.8}),("index"===l||"fullText"===l)&&(0,k.Y)(Wy,{showEditHighlights:c})),MainRibbonViewer:(0,k.Y)(Jt.A,{focusedIndex:E.focusedIndex>-1?E.focusedIndex:0,setFocusedIndex:de,images:Z||[]})}),(0,k.Y)(qm,{downloadOverlay:f,displayHighlights:A,triggerStatusOverlay:y,citation:R,plainTextTranscript:O,fullTextCreateRecordsAndAttachOverlay:v,query:r})))}var of=a(44334),sf=a(29652),lf=a(74479),df=a(36652);const cf=(0,y.Ay)("usabilla:useOpenUsabilla");function uf(){const[e]=(0,P.B)(),[t]=(0,_.r)("recordsGetFeedbackEx"),a=function(){const[e]=(0,_.r)("recordsGetFeedbackEx"),{query:t}=(0,G.A)({replaceState:!0}),a=(0,i.useMemo)((()=>{let a;return a="index"===t.view?"//w.usabilla.com/bb7f49bb22c9.js":"Full Name Review"===t.task?"//w.usabilla.com/d90ab84f6f51.js":"Name Correction"===t.task?"//w.usabilla.com/fcf53049fea9.js":"Family Review"===t.task?"//w.usabilla.com/fa948ca83eea.js":"fullText"===t.view?"//w.usabilla.com/44df9f18d43c.js":"//w.usabilla.com/45c3add7853e.js",cf({query:t,usabillaUrl:a,recordsGetFeedbackEx:e}),e?new du.t$(a):null}),[e,t]);return function(){null!==a&&void 0!==a&&a.openForm&&a.openForm()}}();return(0,k.Y)(i.Fragment,null,t&&(0,k.Y)(Fa.A,{menuButton:(0,k.Y)(ee.A,{Icon:df.A})},(0,k.Y)(Da.A,{"data-testid":"feedback-menu",primaryText:e("common-ui:feedback.label","Feedback"),onClick:a})))}function hf(e){let{overlay:t}=e;const[a]=(0,P.B)(),{isMetadataAllMode:r,isMetadataSingleMode:n,isDivideMode:o}=(0,Dl.Oq)();return(0,k.Y)(Zr.A,(0,j.A)({},t,{placement:"bottom"}),(r||n)&&(0,k.Y)(i.Fragment,null,(0,k.Y)(te.A,null,(0,k.Y)(M.Ay,{to:"/"},a("TheaterOverlayHeader.metadataInstructions","Instructions: Correct Metadata"))),(0,k.Y)(te.A,null,(0,k.Y)(M.Ay,{to:"/"},a("TheaterOverlayHeader.metadataStandards","Metadata Standards")))),o&&(0,k.Y)(M.Ay,{to:"/"},a("TheaterOverlayHeader.divideInstructions","Instructions: Divide Image Group")),(0,k.Y)(en.A,null,(0,k.Y)(Z.A,{onClick:t.close},a("common-ui:close.action","Close"))))}var pf=a(71208),mf=a(77554),gf={name:"4ma18r",styles:"z-index:3;"};function vf(){var e;const[t]=(0,P.B)(),{selectedPersonId:a}=(0,je.mS)(),{currentImageArk:i,images:r,thumbnails:n}=(0,b.A)(),{group:o}=(0,Dl.P2)(),s=null===n||void 0===n||null===(e=n.find((e=>e.ark===i)))||void 0===e?void 0:e.index,l=`${(0,Qd.kg)(o)} ${t("IndexExploreHeader.SourceBox.DefaultSourceTitle","(image {imageNumber})",{imageNumber:s+1})}`,d=gf;return(0,k.Y)("div",{css:d},(0,k.Y)(Fa.A,{menuButton:(0,k.Y)(ee.A,{color:"blue",Icon:mf.A,"data-testid":"source-box-button"})},(0,k.Y)(pf.default,{"data-testid":"save-image-to-source-box",primaryText:t("IndexExploreHeader.SourceBox.MenuListItem.AddToMySourceBox","Add Image to Source Box"),defaultTitle:l,endElement:(0,k.Y)(Da.A.Icon,{Icon:Ci.A}),ark:`https://www.familysearch.org/ark:/61903/${a||i}`}),a&&(0,k.Y)(pf.default,{"data-testid":"save-person-to-source-box",defaultTitle:`${l} ${(0,Ee.hA)({person:(0,A.rr)(r,a)})}`,primaryText:t("IndexExploreHeader.SourceBox.MenuListItem.AddPersonToMySourceBox","Add {personName} to Source Box",{personName:(0,Ee.hA)({person:(0,A.rr)(r,a)})}),endElement:(0,k.Y)(Da.A.Icon,{Icon:Ci.A}),ark:`https://www.familysearch.org/ark:/61903/${a}`}),(0,k.Y)(Da.A,{"data-testid":"go-to-my-source-box",primaryText:t("IndexExploreHeader.SourceBox.MenuListItem.GoToSourceBox","Go to My Source Box"),endElement:(0,k.Y)(Da.A.Icon,{Icon:mf.A}),to:"https://www.familysearch.org/tree/sources/sourceBox"})))}var yf=a(83174);function ff(){const e=(0,$.Ay)();return(0,k.Y)(i.Fragment,null,(0,k.Y)(bf,{citationOverlay:e}),(0,k.Y)(wf,{citationOverlay:e}))}function bf(e){let{citationOverlay:t}=e;const a=(0,jn.Ay)(),r=(0,i.useCallback)((()=>{t.isOpen?t.close():t.open()}),[t]);return(0,k.Y)(i.Fragment,null,a({default:(0,k.Y)(ee.A,{color:"blue",Icon:yf.A,onClick:r,"data-testid":"citation-button",linkName:"citation-button"}),lg:(0,k.Y)(Z.A,{Icon:yf.A,onClick:r,"data-testid":"citation-button"},vh())}))}const Af="https://www.familysearch.org/en/wiki/Book_and_Film_Numbers_Used_by_the_FamilySearch_Library#Microfilm_Numbers_.28GS.29";function wf(e){let{citationOverlay:t}=e;const a=(0,_t.mb)(),{group:r}=(0,Dl.P2)(),{childCount:n,metadata:o}=r,s=(0,D.zy)(),{focusedIndex:l}=(0,Pr.XQ)(),d=(0,i.useMemo)((()=>{var e;return null===r||void 0===r||null===(e=r.metadata)||void 0===e?void 0:e.imageGroupNumber}),[r]),{query:{view:c}}=(0,G.A)(),u=(0,i.useMemo)((()=>{var e;return null===(e=r.imageApids)||void 0===e?void 0:e.length}),[r]),h=void 0!==n?n:u,p=(0,i.useMemo)((()=>Bh({metadata:o,location:s,imageIndex:l,imageCount:h,queryView:c})),[o,s,c,l,h]),m=(0,i.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i={dismissable:!0,transient:!0};try{await navigator.clipboard.writeText(e);const r=e.length>20?`${e.substring(0,17)}...`:e;a({...i,message:fh(t?Ih():r),type:"success"})}catch(r){a({...i,message:r.message,type:"error"})}}),[a]);return(0,k.Y)(i.Fragment,null,(0,k.Y)(Ze.A,(0,j.A)({},t,{placement:["bottom","start"],title:Dh()}),t.isOpen&&(0,k.Y)(i.Fragment,null,(0,k.Y)(J.Ay,null,(0,k.Y)(nu.A,null,(0,k.Y)(te.A,null,(0,k.Y)(Tf,{metadata:o,location:s,imageIndex:l,imageCount:h,queryView:c}))),(0,k.Y)(ee.A,{Icon:qt.A,onClick:()=>m(p),title:bh(p)})),(0,k.Y)(oe.A,{marginY:"xs"}),(0,k.Y)(re.H5,null,Fh()),(0,k.Y)(te.A,null,Mh()),(0,k.Y)(ae.A,{marginY:"xxs"}),(0,k.Y)(Z.A,{to:Af,target:"_blank"},Hh()),(0,k.Y)(ae.A,{marginY:"xxs"}),(0,k.Y)(J.Ay,null,(0,k.Y)(te.A,null,`${Lh()}/${mh()}: ${d}`),(0,k.Y)(ee.A,{Icon:qt.A,onClick:()=>m(d),title:bh(mh())}))),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{onClick:()=>t.close()},gh()),(0,k.Y)(Z.A,{Icon:qt.A,emphasis:"high","data-testid":"copy-all-to-clipboard-button",onClick:()=>m(`${p} ${d}`,!0)},yh())))))}function Tf(e){let{metadata:t,location:a,imageIndex:r,imageCount:n,queryView:s}=e;const{ark:l,coverageString:d,custodianString:c,currentDateFormatted:u,imageCitation:p}=Vh({metadata:t,location:a,imageIndex:r,imageCount:n,queryView:s});return(0,k.Y)(i.Fragment,null,`${d} ${o.i18n.t("generateCitation.images","images")}, `,(0,k.Y)("i",null,`${o.i18n.t("generateCitation.familySearch","FamilySearch")} `),`(${h.pc}`,"/ark:/61903/",l,"?view=",s,` : ${u})`||"",p?`, ${p}; `:"",`${c}.`)}var If=a(19098),Sf=a(16860),Ef=a(35853),kf=a(83688),Cf=a(76116);const xf=a.p+"static/media/slide1.fcb8f60812e0de5e635f65a96f61cd35.svg";const Yf=a.p+"static/media/slide2.6687f6a66cd009a374dfdd663ff85e92.svg";const Nf=a.p+"static/media/slide3.cdebda83d93246768dc7d11bbf4bb81c.svg";const Rf=a.p+"static/media/slide4.feb4f81ec0365053d0605933979287dd.svg";const Pf=a.p+"static/media/endSlide1.4512b5932479666811c61ebbd152c463.svg";const Of=a.p+"static/media/endSlide2.3de4e7af9d6557cb825648fde771013e.svg";const _f=a.p+"static/media/endSlide3.332ea93d6017cc6b26fccb59098609e8.svg";function Ff(){const e=(0,If.FM)("fullText.help.tutorial"),[t]=(0,P.B)(),a=t("fullText.tutorial.title","Attach to Family Tree"),r=t("fullText.tutorial.description","Attaching these sources to Family Tree creates accuracy and leads to more discoveries."),n=t("fullText.tutorial.slide1.title","Click and Attach to tree"),o=(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,null),(0,k.Y)(te.A,{size:"sm"},(0,k.Y)(O.x,{i18nKey:"fullText.tutorial.slide1.description"},"When you find names in the record you want to attach, click ",(0,k.Y)("strong",null,"Attach to Tree"),". Then select the names from the list."))),s=t("fullText.tutorial.slide2.title","Verify the names"),l=(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,null),(0,k.Y)(te.A,{size:"sm"},t("fullText.tutorial.slide2.description","Edit any misspelling and add any record details or life events to help make the ancestor profiles more accurate and complete."))),d=t("fullText.tutorial.slide3.title","Select One Name to Attach to a Person in Family Tree."),c=(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,null),(0,k.Y)(te.A,{size:"sm"},t("fullText.tutorial.slide3.description","If you verified more than one name, those names will also be on the next page."))),u=t("fullText.tutorial.slide4.title","Attach Your Record Details"),h=(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,null),(0,k.Y)(te.A,{size:"sm"},t("fullText.tutorial.slide4.description.p1","Match your selected name to a person in the tree. Notice that the left side of the screen is the record, and the right side is the Family Tree.")),(0,k.Y)(ae.A,null),(0,k.Y)(te.A,{size:"sm"},t("fullText.tutorial.slide4.description.p2","After matching the name to a tree person, you can drag and drop other names from the record into the tree.")),(0,k.Y)(ae.A,null),(0,k.Y)(te.A,{size:"sm"},t("fullText.tutorial.slide4.description.p3","This Source Linker tool gives you the ability to add new tree names, attach multiple sources, and make the tree more accurate."))),p=t("fullText.tutorial.endSlide1.title","Unlock the Power of Full-Text Searching for Historical Records"),m=t("fullText.tutorial.endSlide1.description","This video shows you how to use full-text search."),g=t("fullText.tutorial.endSlide2.title","Using Source Linker to attach sources"),v=t("fullText.tutorial.endSlide2.description","Source Linker uses a purple Compare icon to notify you that the left column (the source..."),y=t("fullText.tutorial.endSlide3.title","Understanding the focus person in Source Linker"),f=t("fullText.tutorial.endSlide3.description","The focus person is the central figure in Source Linker. All other individuals are...");return(0,k.Y)(i.Fragment,null,(0,k.Y)(Sf.Ay,(0,j.A)({tutorialId:"rip.introTutorial",tutorialTitle:a,tutorialDescription:r},e),(0,k.Y)(Ef.A,{imageAlt:n,imageSrc:xf,imgBleed:!0,heading:n,content:o}),(0,k.Y)(Ef.A,{imageAlt:s,imageSrc:Yf,imgBleed:!0,heading:s,content:l}),(0,k.Y)(Ef.A,{imageAlt:d,imageSrc:Nf,imgBleed:!0,heading:d,content:c}),(0,k.Y)(Ef.A,{imageAlt:u,imageSrc:Rf,imgBleed:!0,heading:u,content:h}),(0,k.Y)(kf.A,null,(0,k.Y)(Cf.A,{to:"https://www.familysearch.org/en/help/helpcenter/unlock-the-power-of-full-text-searching-for-historical-records",imageSrc:Pf,imageAlt:p,title:p,description:m,columns:"6"}),(0,k.Y)(Cf.A,{to:"https://www.familysearch.org/en/help/helpcenter/article/understanding-the-focus-person-in-source-linker",imageSrc:Of,imageAlt:g,title:g,description:v,columns:"6"}),(0,k.Y)(Cf.A,{to:"https://www.familysearch.org/en/help/helpcenter/article/using-source-linker-to-attach-sources",imageSrc:_f,imageAlt:y,title:y,description:f,columns:"6"}))))}var Df=a(37217);function Mf(){const[e]=(0,P.B)(),{finishedCorrectingMetadataOverlay:t}=(0,i.useContext)(Ti.eV),{isDivideMode:a,isMetadataAllMode:r,isMetadataSingleMode:n,isImageOrganizeMode:o}=(0,Dl.Oq)(),s=(0,jn.Ay)(),{errorStatus:l}=(0,Dl.Ah)(),d=(0,je.mS)(),{inPanelStack:c,openOverlay:u}=(0,Ti.HQ)(),[h,p]=(0,i.useState)(""),{query:m}=(0,G.A)();(0,i.useEffect)((()=>{if(d.selectedPersonId)try{(0,Df.fP)(d.selectedPersonId.replace("1:1:",""),!0).then((e=>{var t,a;if(null!==(t=e.data)&&void 0!==t&&null!==(a=t.entries)&&void 0!==a&&a.length){const t=e.data.entries[0].id;p(t)}else p("")}))}catch{p("")}}),[d.selectedPersonId]);const g=(0,i.useMemo)((()=>({attachToTree:e("IndexExploreHeader.attachToTree","Attach to Tree"),finishCorrecting:e("IndexExploreHeader.finishCorrecting","Finish Correcting")})),[e]),v=m.view,y=(0,i.useCallback)((()=>{(0,vi.sx)({event_name:"click_action",link_name:"Attach to Tree Start",page_context:v}),u("mainInfosheet"),u("attachToTreeOverlay")}),[v,u]),f=(0,i.useMemo)((()=>{let e;return r||n?e={text:g.finishCorrecting,onClick:null===t||void 0===t?void 0:t.handleClick}:a||(e={text:g.attachToTree,onClick:c("viewIndex")&&d.selectedPersonId?()=>{(0,vi.sx)({event_name:"click_action",link_name:"Attach to Source Linker"});const e=encodeURIComponent(`/ark:/61903/${d.selectedPersonId}`),t=h?`&id=${encodeURIComponent(h)}&hinting=/tree/person/details/`:"";window.open(`/search/linker?ark=${e}${t}`)}:y}),e}),[r,n,a,g,null===t||void 0===t?void 0:t.handleClick,c,d.selectedPersonId,y,h]);return(0,k.Y)(i.Fragment,null,(null===f||void 0===f?void 0:f.text)===g.attachToTree?s({lg:(0,k.Y)(Z.A,{emphasis:"medium",Icon:sf.A,onClick:null===f||void 0===f?void 0:f.onClick,"data-testid":"attach-to-tree-button",disabled:!!l,linkName:"start-attach-to-tree"},null===f||void 0===f?void 0:f.text),default:(0,k.Y)(ee.A,{Icon:sf.A,onClick:null===f||void 0===f?void 0:f.onClick,"data-testid":"attach-to-tree-button",disabled:!!l,linkName:"start-attach-to-tree"})}):(0,k.Y)(i.Fragment,null,!o&&(0,k.Y)(Z.A,{emphasis:"medium",onClick:null===f||void 0===f?void 0:f.onClick,disabled:!!l},null===f||void 0===f?void 0:f.text)))}const Hf={name:"lqn4aw",styles:"& button,& a{margin:0 calc(var(--tuck-in-size,0) / 2) !important;}"};function Lf(){return(0,k.Y)(J.Ay,{alignY:"middle",gutters:"xs"},(0,k.Y)(q.A.IconButton,{noShrinkX:!0}),(0,k.Y)(q.A.H5,{growX:!0,hasOverline:!0,maxWidth:800}),(0,k.Y)(J.Ay,{noShrinkX:!0,alignY:"middle",gutters:"xxs"},(0,k.Y)(q.A.Button,{maxWidth:130,width:130}),(0,k.Y)(q.A.IconButton,null)))}function zf(){var e;const[t]=(0,P.B)(),{query:a}=(0,G.A)(),{openOverlay:r}=(0,Ti.HQ)(),n=(0,jn.Ay)(),s=(0,$.Ay)(),{group:l,loading:d,itemCount:c,updating:u,editMode:p}=(0,Dl.P2)(),{dividerOffsets:m}=(0,Dl.Rb)(),[g,v]=(0,i.useState)(""),{rip_sharedImageViewer_enableFullTextAttachToTree:y,rip_sharedImageViewer_enableFullTextTutorial:f}=(0,L.h)(["rip_sharedImageViewer_enableFullTextAttachToTree","rip_sharedImageViewer_enableFullTextTutorial"]),b=(0,$.Ay)(),A=(0,ci.Ay)()({default:!0,md:!1}),{getIsDividerOffsetChanges:w,getGroupHasBeenEdited:T}=(0,Dl.$p)({editMode:p,dividerOffsets:m}),I=function(){var e,t;const[a]=(0,P.B)(),{query:i}=(0,G.A)(),{group:r,itemNumber:n,itemCount:o}=(0,Dl.P2)(),{viewAnotherItemOverlay:s}=(0,Ti.HQ)(),{showMetadataAudit:l,showImageQualityAudit:d}=(0,Dl.iB)(),c=o>1?{text:a("ImageViewerHeader.itemNumber","Item {itemNumber}",{itemNumber:n})}:null,u=l||d,p=Zh("imageGroupNumbers",null===(e=r.metadata)||void 0===e?void 0:e.imageGroupNumber),m=r.metadata?[{text:`#${null===(t=r.metadata)||void 0===t?void 0:t.imageGroupNumber}`,to:u&&p?`${h.pc}${p.to}`:`${window.location.pathname}?${(0,lf.stringify)(i)}`,onClick:u?null:s.open,target:u&&p?"_blank":null},c].filter(Boolean):[];return m}(),{showItemBreadcrumbs:S}=(0,je.mS)(),{isImageOrganizeMode:E,isDivideMode:C}=(0,Dl.Oq)(),{showRecordMetadataReview:x,showMetadataAudit:Y,showImageQualityAudit:N}=(0,Dl.iB)(),R=(0,i.useMemo)((()=>{if(!u){var e;const t=(0,Qd.kg)(l);return v(t),t||(null===l||void 0===l||null===(e=l.coverages)||void 0===e?void 0:e.length)&&o.i18n.t("ImageViewerHeader.unknown","Unknown Image Group")||""}return g}),[u,g,l]),O=(0,i.useMemo)((()=>!x&&!Y&&!N&&!E),[E,N,Y,x]),_=(0,$e._I)();return(0,k.Y)(i.Fragment,null,(0,k.Y)(Ot.A,null,R),E&&(0,k.Y)(hf,{overlay:s}),b.isOpen&&((e,t,a,i)=>(0,k.Y)(Ze.A,(0,j.A)({},a,{title:e("indexExploreHeader.unsavedChanges","You have unsaved changes")}),"DIVIDERS"===i?e("indexExploreHeader.areYouSure","Are you sure you want to leave this page? If you leave now, the divisions you created will not be saved."):e("indexExploreHeader.areYouSure.metadata","Are you sure you want to leave this page? The changes you made will not be saved."),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{to:t,emphasis:"low"},e("indexExploreHeader.leave","Leave")),(0,k.Y)(Z.A,{emphasis:"high",onClick:()=>a.handleClick()},e("indexExploreHeader.stayOnPage","Stay on this page"))))))(t,_,b,w()?"DIVIDERS":"METADATA"),(0,k.Y)(Q.Ay,{as:"header",marginX:"sm",marginY:"xxs",maxWidth:"xxl"},d?(0,k.Y)(Lf,null):(0,k.Y)(J.Ay,{alignY:"middle",gutters:"xs"},_&&(0,k.Y)(ee.A,{noShrinkX:!0,Icon:he.A,iconDirection:"backward",color:"gray",to:_,onClick:e=>{e.preventDefault(),C&&w()||T()?b.handleClick():window.location.href=_},"aria-label":t("indexExploreHeader.goBackToImageSearch","Go back to image search"),"data-testid":"image-viewer-back-button"}),(0,k.Y)(le.A,{growX:!0},S&&n({default:null,sm:(c>1||C)&&(0,k.Y)(of.A,{breadcrumbs:I})}),!R&&(0,k.Y)(q.A.H4,null),R&&(0,k.Y)(re.H1,{size:"H5"},(0,k.Y)(uh.A,null,R))),O?(0,k.Y)(J.Ay,{noShrinkX:!0,alignY:"middle",css:Hf,gutters:"xxs"},(0,k.Y)(vf,null),(0,k.Y)(ff,null),"fullText"===a.view&&y.isOn?(0,k.Y)(i.Fragment,null,n({lg:(0,k.Y)(Z.A,{emphasis:"high",Icon:sf.A,onClick:()=>r("fullTextCreateRecordsAndAttachOverlay"),"data-testid":"attach-to-tree-button",linkName:"start-attach-to-tree"},t("indexExploreHeader.attachToTree","Attach to Tree")),default:(0,k.Y)(ee.A,{Icon:sf.A,onClick:()=>r("fullTextCreateRecordsAndAttachOverlay"),"data-testid":"attach-to-tree-button",linkName:"start-attach-to-tree"})})):(0,k.Y)(Mf,null),E&&(0,k.Y)(ee.A,{Icon:Pi.A,color:"gray",onClick:s.handleClick}),(null===l||void 0===l?void 0:l.indexedChildCount)>0&&(0,k.Y)(ee.A,{Icon:ba.A,to:`/search/record/results?q.filmNumber=${null===(e=l.metadata)||void 0===e?void 0:e.imageGroupNumber}`,external:!0,target:"_blank",title:t("indexedExploreHeader.imagesIndexed","View Indexed Records")}),_&&(0,k.Y)(Er.kY,{linkName:"help-button",color:"gray"}),A&&(0,k.Y)(uf,null)):(0,k.Y)(J.Ay,{noShrinkX:!0,alignY:"middle",css:Hf,gutters:"sm"},_&&(0,k.Y)(Er.kY,{linkName:"help-button",color:"gray"}),A&&(0,k.Y)(uf,null)))),(0,k.Y)(oe.A,null),"fullText"===a.view&&f.isOn&&(0,k.Y)(Ff,null))}const Vf=th.J1`
  query ImageOrganizeStatusList($rmsIdList: [ID]!) {
    imageOrganizeStatusList(rmsIdList: $rmsIdList) {
      id
      divide {
        status
        userId
      }
      correctMetadata {
        status
        userId
      }
    }
  }
`;function Bf(e){var t,a,r;let{overlay:n}=e;const{cisId:o}=(0,Wd.useUser)(),{close:s,isOpen:l}=n,{initialGroup:d,setGroupIndex:c}=(0,Dl.P2)(),{viewMode:u}=(0,af.A)(),{getSkippedStatus:h,dividerOffsets:p}=(0,Dl.Lw)(),{isMetadataAllMode:m,isMetadataSingleMode:v,isDivideMode:y}=(0,Dl.Oq)(),f=(0,ln.hV)(),[b,{data:A,loading:w}]=(0,Yl._)(Vf),{setQuery:T}=(0,G.A)(),[I]=(0,P.B)(),S=I("ViewAnotherItemDialog.navigateHeading","Navigate between items"),E=I("ViewAnotherItemDialog.browseImagesButtonText","Browse Images"),C=I("ViewAnotherItemDialog.cancelButtonText","Cancel"),x=I("ViewAnotherItemDialog.autoSuggestLabel","Item Number"),Y=I("ViewAnotherItemDialog.autoSuggestPlaceholder","Type or choose from list"),N=I("ViewAnotherItemDialog.helpNavigateMessage",'The original image group has been divided into {number} groups of images called "items."',{number:y?null!==(t=null===p||void 0===p?void 0:p.length)&&void 0!==t?t:0:null!==(a=null===d||void 0===d||null===(r=d.childGroups)||void 0===r?void 0:r.length)&&void 0!==a?a:0}),[R,O]=(0,i.useState)(),{imageOrganizeStatusList:_}=null!==A&&void 0!==A?A:{},F=(0,i.useMemo)((()=>{var e;const t=I("ViewAnotherItemDialog.skippedText","Skipped");let a;return a=y?p:d.id?null!==d&&void 0!==d&&null!==(e=d.childGroups)&&void 0!==e&&e.length?d.childGroups:[d]:[],a.map(((e,a)=>{var i;let r;var n,s,l,d,c,u,p;(v||m)&&(w?r=(0,k.Y)(Da.A.Icon,{Icon:g.A}):(null===_||void 0===_||null===(n=_[a])||void 0===n||null===(s=n.correctMetadata)||void 0===s?void 0:s.status)===Qd.Oz.COMPLETED?r=(0,k.Y)(Da.A.Icon,{Icon:vn.A}):h(e.id)?r=(0,k.Y)(Da.A.MetaText,{text:t}):(null===_||void 0===_||null===(l=_[a])||void 0===l||null===(d=l.correctMetadata)||void 0===d?void 0:d.status)===Qd.Oz.IN_PROGRESS&&(null===_||void 0===_||null===(c=_[a])||void 0===c||null===(u=c.correctMetadata)||void 0===u?void 0:u.userId)!==o&&(r=(0,k.Y)(Da.A.Icon,{Icon:Fr.A})));return{key:y?e:null===e||void 0===e?void 0:e.id,primaryText:(p=a+1,I("ViewAnotherItemDialog.itemText","Item {itemNumber}",{itemNumber:p})),index:a,rightElement:r,itemIndex:y?e:null,itemApid:null===e||void 0===e||null===(i=e.imageApids)||void 0===i?void 0:i[0]}}))}),[I,d,y,p,v,m,w,_,h,o]);(0,i.useEffect)((()=>{if(l&&null!==d&&void 0!==d&&d.childGroups){const e=null===d||void 0===d?void 0:d.childGroups.map((e=>e.id));b({variables:{rmsIdList:e}})}}),[b,l,d]);const D=(0,i.useCallback)((()=>{const e=null===R||void 0===R?void 0:R.index;y?(c(e),f(null===R||void 0===R?void 0:R.itemIndex,null,e)):R&&(T({groupId:R.key}),c(e),f("single"===u?0:p[e],null,e)),s()}),[y,R,s,f,c,T,p,u]);return(0,k.Y)(Ze.A,(0,j.A)({},n,{title:S}),(0,k.Y)(It.A,{bottom:!0},(0,k.Y)(de.Ay,{suggestions:F,onSuggestionSelected:O,label:x,placeholder:Y,helpMessage:N})),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{onClick:s},C),(0,k.Y)(Z.A,{emphasis:"high",disabled:!R,onClick:D},E))))}const Gf=JSON.parse('[{"fieldType":"FS_HOUSEHOLD_ID","standard":true,"editable":true,"displayable":true,"elementTypes":["PERSON","RECORD"],"displayLabel":"HOUSEHOLD_ID","uri":"http://familysearch.org/types/fields/HouseholdId"},{"fieldType":"RACE_OR_COLOR","standard":true,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Race","uri":"http://gedcomx.org/Race"},{"fieldType":"MISC_FLAG_SEEKING_WORK","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Seeking work","uri":"http://familysearch.org/types/fields/MiscFlagSeekingWork"},{"fieldType":"MISC_CODE_A_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Code A","uri":"http://familysearch.org/types/fields/MiscCodeA1950Census"},{"fieldType":"MISC_CODE_B_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Code B","uri":"http://familysearch.org/types/fields/MiscCodeB1950Census"},{"fieldType":"MISC_CODE_C_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Code C","uri":"http://familysearch.org/types/fields/MiscCodeC1950Census"},{"fieldType":"MISC_CODE_C1_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Code C1","uri":"http://familysearch.org/types/fields/MiscCodeC11950Census"},{"fieldType":"MISC_CODE_C2_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Code C2","uri":"http://familysearch.org/types/fields/MiscCodeC21950Census"},{"fieldType":"MISC_CODE_D_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Code D","uri":"http://familysearch.org/types/fields/MiscCodeD1950Census"},{"fieldType":"MISC_CODE_D1_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Code D1","uri":"http://familysearch.org/types/fields/MiscCodeD11950Census"},{"fieldType":"MISC_CODE_D2_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Code D2","uri":"http://familysearch.org/types/fields/MiscCodeD21950Census"},{"fieldType":"MISC_CODE_E_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Code E","uri":"http://familysearch.org/types/fields/MiscCodeE1950Census"},{"fieldType":"MISC_CODE_F_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Code F","uri":"http://familysearch.org/types/fields/MiscCodeF1950Census"},{"fieldType":"MISC_CODE_G_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Code G","uri":"http://familysearch.org/types/fields/MiscCodeG1950Census"},{"fieldType":"MISC_CODE_H_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Code H","uri":"http://familysearch.org/types/fields/MiscCodeH1950Census"},{"fieldType":"MISC_SAME_HOUSE_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Same house","uri":"http://familysearch.org/types/fields/SameHouse1950Census"},{"fieldType":"MISC_IMAGE_FOLDER_1950_CENSUS","standard":false,"editable":false,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Image folder","uri":"http://familysearch.org/types/fields/ImageFolder1950Census"},{"fieldType":"MISC_FLAG_LIVED_ON_FARM_LAST_YEAR","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Lived on farm last year","uri":"http://familysearch.org/types/fields/LivedOnFarm1950Census"},{"fieldType":"MISC_SAME_COUNTY_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Same county","uri":"http://familysearch.org/types/fields/SameCounty1950Census"},{"fieldType":"MISC_RELATIVE_INCOME","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Relative income","uri":"http://familysearch.org/types/fields/RelativeIncome"},{"fieldType":"MISC_RELATIVE_OTHER_INCOME_SUPPLEMENT","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Relative income","uri":"http://familysearch.org/types/fields/RelativeOtherIncomeSupplment"},{"fieldType":"INSTITUTION_1_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Institution 1","uri":"http://familysearch.org/types/fields/Institution11950Census"},{"fieldType":"INSTITUTION_1_TYPE_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Institution 1 type","uri":"http://familysearch.org/types/fields/Institution1Type1950Census"},{"fieldType":"INSTITUTION_1_FROM_LINE_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Institution 1 from line","uri":"http://familysearch.org/types/fields/Institution1ToLine1950Census"},{"fieldType":"INSTITUTION_1_TO_LINE_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Institution 1 to line","uri":"http://familysearch.org/types/fields/Institution1FromLine1950Census"},{"fieldType":"INSTITUTION_2_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Institution 2","uri":"http://familysearch.org/types/fields/Institution21950Census"},{"fieldType":"INSTITUTION_2_TYPE_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Institution 2 type","uri":"http://familysearch.org/types/fields/Institution2Type1950Census"},{"fieldType":"INSTITUTION_2_FROM_LINE_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Institution 2 from line","uri":"http://familysearch.org/types/fields/Institution2FromLine1950Census"},{"fieldType":"INSTITUTION_2_TO_LINE_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Institution 2 to line","uri":"http://familysearch.org/types/fields/Institution2ToLine1950Census"},{"fieldType":"MISC_INCOME_OTHER_SOURCES","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Income from other sources","uri":"http://familysearch.org/types/fields/MiscIncomeOtherSources"},{"fieldType":"MISC_FLAG_WWII_VET","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"World War II vet","uri":"http://familysearch.org/types/fields/MiscFlagWWIIVet"},{"fieldType":"MISC_FLAG_WWI_VET","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"World War I vet","uri":"http://familysearch.org/types/fields/MiscFlagWWIVet"},{"fieldType":"OCC_FIELDS_POPULATED_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Occupation fields are populated","uri":"http://familysearch.org/types/fields/OccFieldsPopulated1950Census"},{"fieldType":"MISC_LAST_OCCUPATION","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Last Occupation","uri":"http://familysearch.org/types/fields/LastOccupation"},{"fieldType":"MISC_LAST_OCCUPATION_INDUSTRY","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Last occupation industry","uri":"http://familysearch.org/types/fields/LastOccupationIndustry"},{"fieldType":"MISC_LAST_WORKER_CLASS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Last worker class","uri":"http://familysearch.org/types/fields/LastWorkerClass"},{"fieldType":"MISC_YEARS_SINCE_MARITAL_STATUS_CHANGE","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Years since marital status change","uri":"http://familysearch.org/types/fields/YearsSinceMaritalStatusChange"},{"fieldType":"MISC_FLAG_COMPLETED_GRADE","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Completed grade","uri":"http://familysearch.org/types/fields/GradeCompleted"},{"fieldType":"CNT_CHILDREN_BORN","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Children Born Count","uri":"http://familysearch.org/types/fields/CntChildrenBorn"},{"fieldType":"MISC_CHECKED_BY","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Checked by","uri":"http://familysearch.org/types/fields/CheckedBy"},{"fieldType":"MISC_CHECKED_BY_DATE","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Checked by date","uri":"http://familysearch.org/types/fields/CheckedByDate"},{"fieldType":"APARTMENT_NBR","standard":false,"editable":true,"displayable":true,"elementTypes":["PLACE"],"displayLabel":"Apartment number","uri":"http://familysearch.org/types/fields/ApartmentNbr"},{"fieldType":"MISC_FLAG_HOUSEHOLD_CONTINUED","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Checked by date","uri":"http://familysearch.org/types/fields/HouseholdContinued"},{"fieldType":"MISC_FLAG_LIVED_ON_FARM","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Lived on farm","uri":"http://familysearch.org/types/fields/LivedOnFarm"},{"fieldType":"MISC_FLAG_3_PLUS_ACRES","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"3 plus acres","uri":"http://familysearch.org/types/fields/3PlusAcres"},{"fieldType":"MISC_AG_QUESTIONAIRE_NBR_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Agricultural questionaire number","uri":"http://familysearch.org/types/fields/AgQuestionairNbr"},{"fieldType":"MISC_OCCUPATION_CATEGORY","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Occupation category","uri":"http://familysearch.org/types/fields/OccupationCategory"},{"fieldType":"MISC_FLAG_WORKED_LAST_WEEK","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Worked last week","uri":"http://familysearch.org/types/fields/WorkedLastWeek"},{"fieldType":"MISC_FLAG_CAN_READ_ENGLISH","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Can Read English","uri":"http://familysearch.org/types/fields/FlagCanReadEnglish"},{"fieldType":"MISC_FLAG_CAN_READ_OTHER","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Can Read Other Language","uri":"http://familysearch.org/types/fields/FlagCanReadOther"},{"fieldType":"MISC_FLAG_CAN_SPEAK_ENGLISH","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Can Speak English","uri":"http://familysearch.org/types/fields/FlagCanSpeakEnglish"},{"fieldType":"MISC_FLAG_CAN_SPEAK_OTHER","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Can Speak Other Language","uri":"http://familysearch.org/types/fields/FlagCanSpeakOther"},{"fieldType":"MISC_FLAG_CAN_WRITE_ENGLISH","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Can Write English","uri":"http://familysearch.org/types/fields/FlagCanWriteEnglish"},{"fieldType":"MISC_FLAG_CAN_WRITE_OTHER","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Can Write Other Language","uri":"http://familysearch.org/types/fields/FlagCanWriteOther"},{"fieldType":"MISC_CLASS_OF_HOUSE","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Class of House","uri":"http://familysearch.org/types/fields/ClassOfHouse"},{"fieldType":"MISC_CONSTRUCT_MATERIALS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Construction Materials","uri":"http://familysearch.org/types/fields/MiscConstructMaterials"},{"fieldType":"MISC_INDIAN_BLOOD_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Indian Blood","uri":"http://familysearch.org/types/fields/MiscIndianBlood"},{"fieldType":"MISC_FLAG_ATTENDED_CEREMONY_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Attended Ceremony","uri":"http://familysearch.org/types/fields/MiscFlagAttendedCeremony"},{"fieldType":"MISC_FLAG_TERRITORIAL_CITIZEN_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Territorial Citizen","uri":"http://familysearch.org/types/fields/MiscFlagTerritorialCitizen"},{"fieldType":"MISC_FLAG_IS_COLORED_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Is Colored","uri":"http://familysearch.org/types/fields/MiscFlagIsColored"},{"fieldType":"MISC_HOUSE_LIST_NBR_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Is Colored","uri":"http://familysearch.org/types/fields/MiscHouseListNbr"},{"fieldType":"MISC_SOURCE_PAGE_NBR_1_1950_CENSUS","standard":false,"editable":true,"displayable":true,"elementTypes":["PERSON"],"displayLabel":"Source Page Number","uri":"http://familysearch.org/types/fields/MiscSourcePageNbr1"}]');const Uf=a.p+"static/media/oops.f367759ac843caa3a4c1c01523670c2d.svg";var Kf={name:"1lb6n3v",styles:"display:flex;justify-content:center;align-items:center;height:100vh;"};function qf(){const e=Kf,[t]=(0,P.B)(),a=t("error-overlay-boundary.heading","Something unexpected happened."),i=t("error-overlay-boundary.content","Try again or refresh the page if the problem persists."),r=(0,jn.Ay)()({default:!0,sm:!1});return(0,k.Y)("div",{css:e},(0,k.Y)("div",null,(0,k.Y)(ae.A,{size:r?"xxl":"sm"}),(0,k.Y)(J.Ay,{alignX:"center"},(0,k.Y)(Dt.A,{maxHeight:315,maxWidth:"100%",src:Uf,alt:""})),(0,k.Y)(ae.A,{size:"md"}),(0,k.Y)(J.Ay,{alignX:"center"},(0,k.Y)(re.H4,{centered:!0},a)),(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(J.Ay,{alignX:"center"},(0,k.Y)(te.A,{centered:!0},i)),(0,k.Y)(ae.A,{size:"md"}),(0,k.Y)(se.Ay,null,(0,k.Y)(J.Ay,{alignX:"center"},(0,k.Y)(Z.A,{"data-testid":"go-back-button",onClick:()=>window.history.back()},t("tasks-done-overlay.go-back.button","Go Back")),(0,k.Y)(Z.A,{"data-testid":"refresh-button",onClick:()=>window.location.reload(),emphasis:"high"},t("error-overlay.submit","Refresh"))),(0,k.Y)(ae.A,{size:"xxs"})),r&&(0,k.Y)(ae.A,{size:"sm"})))}const jf={name:"179b57w",styles:"background-color:white;height:150px;position:fixed;z-index:3;inset-inline-start:65px;bottom:32%;padding:20px;border-radius:10px;box-shadow:0px 10px 20px rgba(0,0,0,0.25);&:before,&:after{content:'';position:absolute;inset-inline-start:-30px;top:33%;width:0;height:0;border-top:30px solid transparent;border-bottom:30px solid transparent;}&:before{border-inline-end:30px solid rgba(0,0,0,0.1);filter:blur(10px);z-index:-1;}&:after{border-inline-end:30px solid white;}"},$f=e=>{let{waitTime:t=3e4,handleOnClose:a=()=>{}}=e;const[r,n]=(0,i.useState)(!1),o=(0,i.useRef)(null),[s]=(0,P.B)(),l=new fi.Ay({storeName:"RIP_settings"});(0,i.useEffect)((()=>(l.getItem("closedFeedbackOverlay").then((e=>{o.current=setTimeout((()=>{e||(l.setItem("closedFeedbackOverlay",!1),n(!0))}),t)})),()=>{clearTimeout(o.current)})),[]);return(0,k.Y)(i.Fragment,null,r&&(0,k.Y)("div",{css:jf,"data-testid":"usabilla-popup"},(0,k.Y)(J.Ay,null,(0,k.Y)(re.H4,null,s("feedbackOverlay.header","Share Your Feedback!")),(0,k.Y)(ee.A,{Icon:$g.A,title:s("feedbackOverlay.button","Close Feedback Popup"),onClick:()=>{l.setItem("closedFeedbackOverlay",!0),n(!1),a()},"data-testid":"close-feedback-overlay",linkName:"close-feedback-overlay"})),(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(J.Ay,null,(0,k.Y)(te.A,{size:"sm"},s("feedbackOverlay.content","Let us know what you think of this page."))),(0,k.Y)(ae.A,{size:"nano"})))};var Wf=a(25237),Xf=a(7951),Qf=a(2030);const Jf={name:"136m6w0",styles:"z-index:1000;"},Zf=()=>{const[e]=(0,P.B)(),{query:t,setQuery:a}=(0,G.A)({replaceState:!0}),{viewAnotherItemOverlay:r,infoSheetOverlay:n,openOverlay:o}=(0,Ti.HQ)(),s=(0,ci.Ay)()({default:!0,md:!1}),{showItemBreadcrumbs:l}=(0,je.mS)(),{errorStatus:d}=(0,Dl.Ah)(),c=(0,U.A)(),{group:u,itemNumber:h,itemCount:p}=(0,Dl.P2)(),m="organize"===t.view,{isDivideMode:g,isMetadataAllMode:v,isMetadataSingleMode:y}=(0,Dl.Oq)({}),{showMetadataAudit:f,showImageQualityAudit:b}=(0,Dl.iB)(),A=(0,i.useMemo)((()=>(0,Qd.kg)(u)),[u]),w=(0,i.useMemo)((()=>p>1?{text:e("ImageViewerHeader.itemNumber","Item {itemNumber}",{itemNumber:h})}:null),[p,h,e]),T=(0,i.useMemo)((()=>{var e;return u.metadata?[{text:`#${null===(e=u.metadata)||void 0===e?void 0:e.imageGroupNumber}`,to:`?${(0,lf.stringify)(t)}`,onClick:r.open},w].filter(Boolean):[]}),[u.metadata,w,t,r.open]),I=(0,i.useCallback)((e=>{a({view:e,...t.from&&{from:t.from}}),n.open()}),[a,t.from,n]),S=(0,i.useCallback)((e=>{e.preventDefault(),window.history.back()}),[]),E=(0,$e._I)(),C=Boolean(E),[x]=(0,i.useState)(t.view||"explore"),Y=(0,i.useMemo)((()=>"fullText"===x),[x]),N=(0,i.useMemo)((()=>!(m||g||v||y||f||b)),[m,g,v,y,f,b]),R=(0,Wf.A)(),O=(0,jn.Ay)(),_=(0,i.useMemo)((()=>C),[C]),F=O({default:!1,md:!1,lg:!1,xl:!1,xxl:!0});return(0,k.Y)(i.Fragment,null,(0,k.Y)(Ot.A,null,A),(0,k.Y)(St.A,{as:"header",marginY:"xxs"},(0,k.Y)(J.Ay,{alignY:"middle",alignX:"end",gutters:"sm"},(0,k.Y)(St.A,{marginX:"sm"},(0,k.Y)(ee.A,{noShrinkX:!0,Icon:he.A,iconDirection:"backward",color:"gray",onClick:S,"aria-label":e("headerNavigation.goBack","Go back"),"data-testid":"header-back-button"})),(0,k.Y)(le.A,{growX:!0},(0,k.Y)(re.H1,{size:"H5"},(0,k.Y)(uh.A,null,A)),!s&&l&&(0,k.Y)(of.A,{breadcrumbs:T})),N&&(F?(0,k.Y)(J.Ay,{gutters:"xs",alignY:"middle"},(0,k.Y)(Z.A,{noShrinkX:!0,color:"gray",Icon:Xf.A,onClick:()=>I("index"),"data-testid":"names-button",linkName:"header-nav-names"},e("headerNavigation.names","Names")),Y&&(0,k.Y)(Z.A,{noShrinkX:!0,color:"gray",Icon:Qf.A,onClick:()=>I("fullText"),"data-testid":"transcript-button",linkName:"header-nav-transcript"},e("headerNavigation.transcript","Transcript")),(0,k.Y)(Z.A,{noShrinkX:!0,color:"gray",Icon:Pi.A,onClick:()=>I("explore"),"data-testid":"information-button",linkName:"header-nav-information"},e("headerNavigation.information","Information")),(0,k.Y)(Z.A,(0,j.A)({noShrinkX:!0,emphasis:"high",Icon:sf.A,"data-testid":"save-record-button",disabled:!!d,linkName:"start-attach-to-tree"},R.menuButtonProps),e("headerNavigation.saveRecord","Save Record")),_&&(0,k.Y)(Er.kY,{"data-testid":"help-overlay-button",helpActionUrl:"image-viewer"}),(0,k.Y)(ae.A,{size:"xxs"})):(0,k.Y)(J.Ay,{alignY:"middle",gutters:"xs"},(0,k.Y)(ee.A,{title:e("headerNavigation.names","Names"),Icon:Xf.A,onClick:()=>I("index"),"data-testid":"names-button",color:"gray"}),Y&&(0,k.Y)(ee.A,{title:e("headerNavigation.transcript","Transcript"),Icon:Qf.A,onClick:()=>I("fullText"),"data-testid":"transcript-button",color:"gray"}),(0,k.Y)(ee.A,{title:e("headerNavigation.information","Information"),Icon:Pi.A,onClick:()=>I("explore"),"data-testid":"information-button",color:"gray"}),(0,k.Y)(ee.A,(0,j.A)({noShrinkX:!0,Icon:sf.A,"data-testid":"save-record-button",disabled:!!d,linkName:"start-attach-to-tree"},R.menuButtonProps)),_&&(0,k.Y)(Er.kY,{"data-testid":"help-overlay-button",helpActionUrl:"image-viewer"}),(0,k.Y)(ae.A,{size:"sm"}))))),(0,k.Y)(oe.A,null),(0,k.Y)("div",{css:Jf},(0,k.Y)(Fa.A,R,(0,k.Y)(Da.A,{"data-testid":"attach-to-tree-option",primaryText:e("headerNavigation.attachToTree","Attach to person in Family Tree"),onClick:()=>{(0,vi.sx)({event_name:"click_action",link_name:"Attach to Tree Start",page_context:t.view}),"fullText"===t.view?o("fullTextCreateRecordsAndAttachOverlay"):(o("mainInfosheet"),o("attachToTreeOverlay"))},startElement:(0,k.Y)(Da.A.Icon,{Icon:Xf.A})}),(0,k.Y)(pf.default,{"data-testid":"save-image-to-source-box",primaryText:e("headerNavigation.saveToSourceBox","Save to source box"),defaultTitle:(0,Qd.kg)(u),startElement:(0,k.Y)(Da.A.Icon,{Icon:mf.A}),ark:`https://www.familysearch.org/ark:/61903/${c.location.pathname.split("/").pop()}`}))))};function eb(){const e=(0,je.vl)();return(0,i.useCallback)((t=>{e({type:"SET_REFERENCE_FOCUSED_INDEX",value:t})}),[e])}function tb(){const{viewMode:e}=(0,af.A)(),{isDivideMode:t}=(0,Dl.Oq)(),{initialGroup:a,group:r}=(0,Dl.P2)();return(0,i.useMemo)((()=>t||"group"===e?a:r),[a,r,t,e])}function ab(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const{query:t}=(0,G.A)({replaceState:!0}),{view:a}=t,r=(0,U.A)(),n=function(){const e=(0,je.mS)(),t=(0,je.vl)(),a=(0,b.A)(),r=(0,Ae.l)(),{currentImageArk:n}=a,o=tb(),s=(0,Dl.gw)();return(0,i.useCallback)(((a,i,l)=>{n&&i&&a&&a&&n!==a&&(r({type:"SET_DATA",value:{currentImageArk:a}}),e.dontResetState&&!l||t({type:"NAVIGATE_IMAGE_RESET"}),(0,Qd.s3)(i,a,o,s))}),[n,s,o,t,e.dontResetState,r])}(),o=(0,Ti.HQ)(),{switchImageCheck:s}=o,l=(0,Pr.XQ)(),d=(0,Pr.kT)(),c=(0,b.A)(),u=function(){const{isDivideMode:e}=(0,Dl.Oq)(),{viewMode:t}=(0,af.A)(),{initialGroup:a}=(0,Dl.P2)(),r=null===a||void 0===a?void 0:a.imageApids,n=(0,b.A)(),{dividerOffsets:o}=(0,Dl.Rb)();return(0,i.useCallback)(((i,s)=>{var l,d,c;if((null===a||void 0===a||null===(l=a.childGroups)||void 0===l?void 0:l.length)>0&&"single"===t&&!e&&"number"===typeof s&&s>=0){const e=(0,Qd.bz)(r),t=i+o[s];return Array.isArray(e)&&e[t]?e[t]:{}}return null!==n&&void 0!==n&&null!==(d=n.thumbnails)&&void 0!==d&&null!==(c=d[i])&&void 0!==c&&c.ark?n.thumbnails[i]:{}}),[o,a,r,t,n,e])}(),h=(0,i.useCallback)((t=>{e&&!s()||d({type:"SET_FOCUSED_INDEX",value:t})}),[d,s,e]),p=(0,i.useCallback)((e=>{const t=window.location.search,i=null===t||void 0===t?void 0:t.split("&").filter((e=>!e.includes("personArk"))).join("&");"explore"===a?r.replace({pathname:`/ark:/61903/${e}`,search:i}):r.push({pathname:`/ark:/61903/${e}`,search:i})}),[r,a]);return(0,i.useCallback)(((e,t,a)=>{if(e===l.focusedIndex&&"number"!==typeof a)return;const{ark:i,id:r}=u(e,a);i&&(i!==c.currentImageArk||l.focusedIndex<0)&&(h(e),p(i),n(i,r,t))}),[p,h,n,l.focusedIndex,u,c.currentImageArk])}function ib(){const e=(0,je.vl)();return(0,i.useCallback)((t=>{e({type:"SET_SPLIT_SCREEN_IMAGE_GRID",value:t})}),[e])}const rb={name:"1834v0y",styles:"margin-top:-1px;box-sizing:border-box;display:flex;align-items:flex-start;& div{border:none;}& select:focus{margin-top:1px;margin-inline-end:1px;}& select{box-shadow:0px 1px 5px 0px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 3px 1px -2px rgba(0,0,0,0.12);}"};function nb(e){let{preventDownloads:t,viewMode:a,setViewMode:r}=e;const n=ib(),o=eb(),[s]=(0,P.B)(),l=(0,Ti.HQ)(),d=(0,je.mS)(),c=(0,Pr.XQ)(),u=(0,je.vl)(),{isInEditMode:h,isCreatingRects:p}=(0,bi.Y)(),{displayHighlights:m,displayHighlightsApi:g,recordDisplayHighlightsApi:v}=(0,je.Z0)(),y=!(null!==m&&void 0!==m&&m.isShowingAll),{query:f}=(0,G.A)(),{showMetadataAudit:b,showImageQualityAudit:A}=(0,Dl.iB)(),{itemCount:w,itemNumber:T}=(0,Dl.P2)(),{isImageOrganizeMode:I}=(0,Dl.Oq)(),S={options:(0,i.useMemo)((()=>[{value:"single",label:s("sharedViewer.viewIndividualImage","View item {itemNumber} by itself",{itemNumber:T})},{value:"group",label:s("sharedViewer.viewWholeGroup","View image group")}]),[T,s]),value:a,onChange:e=>r(e.target.value),hidePlaceholder:!0,name:"view-image-by-itself-button"};return(0,k.Y)(i.Fragment,null,(h||"highlightsPanel"===l.topMostPanel())&&!p&&!d.creatingRect&&(0,k.Y)(Bt.A,{Icon:()=>(0,k.Y)(lb,{toggle:y}),onClick:()=>{g.showAll(!m.isShowingAll),v.showAll(!m.isShowingAll)},label:null!==m&&void 0!==m&&m.isShowingAll?s("shared-image-viewer.hide.button-label","Hide Highlights"):s("shared-image-viewer.show.button-label","Show Highlights"),linkName:"show-hide-highlights-button"}),(0,k.Y)(ob,null),!d.splitScreen&&"fullText"!==f.view&&!A&&!b&&(0,k.Y)(Bt.A,{Icon:ki.A,onClick:()=>{u({type:"SET_SPLIT_SCREEN",value:!0}),o(c.focusedIndex),n(!0)},label:s("shared-image-viewer.open-split-screen.button","Split Screen"),linkName:"split-screen-button"}),t&&(0,k.Y)(Bt.A,{Icon:sb,disabled:!0,label:s("imageViewer.noDownloadButton","Due to contract restrictions this feature is disabled"),linkName:"no-download-button"}),d.moveGroupSelectorToTop?(0,k.Y)("div",{css:rb},(0,k.Y)($d,null)):!I&&w>1&&(0,k.Y)("div",{css:rb},(0,k.Y)(qd.A,S)))}function ob(){const{infoSheetOverlay:e}=(0,Ti.HQ)(),[t]=(0,P.B)();return null!==e&&void 0!==e&&e.isOpen?null:(0,k.Y)(Bt.A,{Icon:Xy.A,onClick:()=>{e.handleClick()},label:t("open-infosheet.button","Open Panel"),linkName:"open-panel-button"})}function sb(){return(0,k.Y)(Ut.A,{color:W.A.gray50})}function lb(e){let{toggle:t}=e;return(0,k.Y)(ye.A,{toggle:t})}const db=(0,y.Ay)("siv:SharedImageBrowserViewer");function cb(){var e,t;const[a]=(0,P.B)(),{query:r}=(0,G.A)({replaceState:!0}),[n]=(0,ga.Ay)(),[o]=(0,ga.Ay)(),s=(0,jn.Ay)(),{view:l="explore"}=r,{isCreatingRects:d,isInEditMode:c,init:u}=(0,bi.Y)(),p=(0,L.u)("shared_dasProxy"),{fullTextCreateRecordsAndAttachOverlay:v}=(0,Ti.HQ)(),{triggerStatusOverlay:y}=Bm(),f=(0,$.Ay)(),{displayHighlights:A}=(0,je.Z0)(),{loading:w,imageAttribution:T}=(0,Dl.P2)(),I=(0,je.vl)(),S=(0,Pr.XQ)(),E=(0,je.mS)(),C=(0,b.A)(),{currentImageArk:x,images:Y}=C,{errorStatus:N}=(0,Dl.Ah)(),{citation:R,plainTextTranscript:O}=Gm(),_=Sy(),[F,D]=(0,i.useState)(5),{viewMode:M,setViewMode:H}=(0,af.A)(),[z,V]=(0,i.useState)(5),B=tb(),K=null===B||void 0===B?void 0:B.imageApids,q=function(e){const[t,a]=(0,i.useState)(null),[r,n]=(0,i.useState)(!1),{query:o}=(0,G.A)();return(0,i.useEffect)((()=>{"index"!==(null===o||void 0===o?void 0:o.view)||t||async function(){if(!r&&void 0!==(null===e||void 0===e?void 0:e.parentId)){n(!0);try{const t=await ca(e.parentId),i=t.reduce(((e,t)=>[...e,...t.childIds]),[]);a({...e,childGroups:t,imageApids:i})}catch(t){console.error(t),a({imageApids:[],title:"Failed to fetch group data"})}n(!1)}}()}),[o,e,t,r]),r?null:t}(B),W=(0,i.useMemo)((()=>"index"===(null===r||void 0===r?void 0:r.view)&&"group"===M&&q),[r,M,q]);let X=null===(e=C.thumbnails)||void 0===e?void 0:e.map((e=>{var t;return{alt:e.alt,id:e.id,src:(null===(t=e.srcSet)||void 0===t?void 0:t[0])||""}}));W&&(X=W.imageApids.map((e=>({alt:e,id:e,src:`${h.BP}/service/records/storage/deepzoomcloud/dz/v1/apid:${e}/thumb_p200.jpg?sessionId=${(0,m.u0)()}`}))));const Q=(null===T||void 0===T||null===(t=T.restrictedRights)||void 0===t?void 0:t.indexOf("download"))>0,Z=function(){const{viewMode:e}=(0,af.A)(),{isDivideMode:t}=(0,Dl.Oq)(),{dividerOffsets:a,removeDivider:r}=(0,Dl.Lw)(),n=(0,Qd.rE)({dividerOffsets:a,removeDivider:r}),o=(0,Qd.rE)({dividerOffsets:a});return(0,i.useMemo)((()=>{var a;let i;return t?i=n:"group"===e&&(i=o),(null===(a=i)||void 0===a?void 0:a.length)>0?i:[{offset:0}]}),[o,t,n,e])}();!function(){const{query:e}=(0,G.A)(),{view:t="explore"}=e,a=(0,Pr.XQ)(),r=(0,Pr.kT)(),n=(0,U.A)(),o=(0,b.A)(),{currentImageArk:s}=o,l=(0,Ae.l)(),{itemNumber:d}=(0,Dl.P2)(),{isDivideMode:c}=(0,Dl.Oq)(),{isImageOrganizeMode:u}=(0,Dl.Oq)(),{dividerOffsets:h}=(0,Dl.Lw)(),p=ab(),m=(0,i.useRef)(!1),g=(0,i.useCallback)((()=>{const e=n.location.pathname.split("/").pop();if(s||l({type:"SET_DATA",value:{currentImageArk:e}}),o.thumbnails&&o.thumbnails.length){const t=o.thumbnails.findIndex((t=>t.ark===e));-1===a.focusedIndex&&t>-1&&(r({type:"SET_FOCUSED_INDEX",value:t}),m.current=!0)}}),[s,n.location.pathname,a.focusedIndex,l,o.thumbnails,r]),v=(0,i.useCallback)((()=>{var e;-1===a.focusedIndex?g():(a.focusedIndex>=(null===(e=o.thumbnails)||void 0===e?void 0:e.length)?0:a.focusedIndex)!==a.focusedIndex&&p(0)}),[a.focusedIndex,o.thumbnails,p,g]),y=(0,i.useCallback)((()=>{o.thumbnails&&o.thumbnails.length&&v()}),[v,o.thumbnails]),f=(0,i.useCallback)((()=>{!c&&!u||"number"===typeof a.focusedIndex&&-1!==a.focusedIndex||(d>0&&(null===h||void 0===h?void 0:h.length)>0&&c&&m.current?p(h[d-1]):v())}),[h,c,u,d,a.focusedIndex,p,v]);(0,i.useEffect)((()=>{"organize"===t&&f()}),[f,t]),(0,i.useEffect)((()=>{"index"!==t&&"fullText"!==t||g()}),[t,g]),(0,i.useEffect)((()=>{"explore"===t&&y()}),[t,y])}(),function(e){let{ribbonImages:t}=e;const[a,r]=(0,i.useState)(-1),{viewMode:n}=(0,af.A)(),{dividerOffsets:o}=(0,Dl.Rb)(),{itemNumber:s}=(0,Dl.P2)(),l=(0,Pr.XQ)(),d=(0,je.mS)(),c=(0,Pr.kT)(),u=(0,i.useCallback)((e=>c({type:"SET_FOCUSED_INDEX",value:e})),[c]);(0,i.useEffect)((()=>{"group"===n&&a<0&&(null===o||void 0===o?void 0:o.length)>0&&o[s-1]>-1&&(null===l||void 0===l?void 0:l.focusedIndex)+o[s-1]>-1&&(null===t||void 0===t?void 0:t.length)>(null===l||void 0===l?void 0:l.focusedIndex)+o[s-1]?(u(l.focusedIndex+o[s-1]),r(o[s-1])):"single"===n&&a>0&&(l.focusedIndex-a>0?u(l.focusedIndex-a):u(0),r(-1))}),[s,o,t,a,u,d,l,n])}({ribbonImages:X,overrideSections:W?Z:null}),function(){const{imageApids:e}=tb(),t=(0,Ae.l)();(0,i.useEffect)((()=>{e&&e.length&&t({type:"SET_DATA",value:{thumbnails:(0,Qd.bz)(e)}})}),[e,t])}(),function(){const{currentImageArk:e}=(0,b.A)(),t=(0,je.mS)(),a=(0,Pr.XQ)(),r=(0,je.vl)(),n=(0,b.A)(),o=n.images,{query:s}=(0,G.A)();(0,i.useEffect)((()=>{const t=(e,t)=>e.find((e=>t.fieldId===e.fieldId&&t.position.x===e.position.x&&t.position.y===e.position.y&&t.position.width===e.position.width&&t.position.height===e.position.height&&(null===t||void 0===t?void 0:t.imageId)===(null===e||void 0===e?void 0:e.imageId)));if(e&&a.focusedIndex>=0){let i=(0,ia.mV)({element:o.find((t=>t.partitionKey===e))});const s=(0,ia.mV)({element:o.find((e=>{var t;return e.partitionKey===(null===(t=n.thumbnails[a.focusedIndex-1])||void 0===t?void 0:t.ark)}))}),l=(0,ia.mV)({element:o.find((e=>{var t;return e.partitionKey===(null===(t=n.thumbnails[a.focusedIndex+1])||void 0===t?void 0:t.ark)}))});i=[...i,...null===s||void 0===s?void 0:s.filter((t=>(null===t||void 0===t?void 0:t.imageId)===e)).filter((e=>!t(i,e)&&!t(l,e))),...null===l||void 0===l?void 0:l.filter((t=>(null===t||void 0===t?void 0:t.imageId)===e)).filter((e=>!t(i,e)&&!t(s,e)))];const d=(0,ia.L2)(o.find((t=>t.partitionKey===e)));r({type:"SET_STATE",value:{recordHighlights:d,recordEditHighlights:d}}),r({type:"SET_HIGHLIGHTS",value:i}),r({type:"SET_EDIT_HIGHLIGHTS",value:i})}}),[e,o,r,a.focusedIndex,s.view]),(0,i.useEffect)((()=>{if(t.splitScreen){const a=o.find((e=>{var a,i;return e.partitionKey===(null===n||void 0===n||null===(a=n.thumbnails)||void 0===a||null===(i=a[t.referenceFocusedIndex])||void 0===i?void 0:i.ark)})),i=(0,ia.mV)({element:a}).concat((0,ia.mV)({element:o.find((t=>t.partitionKey===e))}));r({type:"SET_REFERENCE_HIGHLIGHTS",value:i}),r({type:"SET_REFERENCE_EDIT_HIGHLIGHTS",value:i});const s=(0,ia.L2)(a);r({type:"SET_STATE",value:{referenceRecordHighlights:s,referenceRecordEditHighlights:s}})}}),[e,o,r,t.referenceFocusedIndex,t.splitScreen,null===n||void 0===n?void 0:n.thumbnails])}(),function(){const e=(0,je.mS)(),t=(0,je.vl)(),{query:a}=(0,G.A)(),r=(0,Ti.HQ)();(0,i.useEffect)((()=>{e.resetState&&("explore"!==a.view&&r.switchImageCheck(),e.resetState&&t({type:"SET_STATE",value:{resetState:!1}}))}),[t,r,a.mode])}();const ee=ib(),te=eb(),ae=function(){const{currentImageArk:e,images:t}=(0,b.A)(),a=(0,je.mS)(),r=(0,je.vl)(),{displayHighlightsApi:n}=(0,je.Z0)(),{activeFieldInfo:o,setCreatingRects:s}=(0,bi.Y)(),{query:{view:l}}=(0,G.A)();return(0,i.useCallback)((i=>{(0,ha.pH)(i,t,e,a,n,r,o,["fullText","index"].includes(l)),s(!1)}),[o,e,n,t,r,a,s,l])}(),ie=function(){const[e]=(0,P.B)(),{addNewDivider:t}=(0,Dl.Lw)(),{isDivideMode:a}=(0,Dl.Oq)();return a?{Icon:ki.A,text:e("ImageBrowserViewer.hoverButtonText","End Item"),onClick:t,linkName:"add-new-divider-button"}:void 0}(),re=function(){const e=(0,U.A)();return(0,i.useCallback)((t=>{t?e.replace({pathname:window.location.pathname,search:`${window.location.search}&grid=on`}):e.replace({pathname:window.location.pathname,search:window.location.search.replace("&grid=on","")})}),[e])}(),ne=ab(),oe=function(){const e=(0,U.A)(),{viewMode:t}=(0,af.A)(),{dividerOffsets:a}=(0,Dl.Rb)(),{isDivideMode:r}=(0,Dl.Oq)(),{groupIndex:n,setGroupIndex:o,initialGroup:s}=(0,Dl.P2)(),{query:l}=(0,G.A)();return(0,i.useCallback)((i=>{if(("group"===t||r)&&a.length>0&&n>-1&&i>-1){var d,c;const t=(u=i)<=(h=a)[0]?0:u>=h[h.length-1]?h.length-1:h.findIndex(((e,t)=>u>=e&&u<h[t+1]));if(-1===t||t===n)return;o(t);const r=null===s||void 0===s||null===(d=s.childGroups)||void 0===d||null===(c=d[t])||void 0===c?void 0:c.id;if(r&&r!==l.groupId){const t=window.location.search.replace(/&groupId=[^&]*/,`&groupId=${r}`);e.replace({pathname:window.location.pathname,search:t})}}var u,h}),[a,e,s,r,n,l.groupId,o,t])}(),se=(0,i.useCallback)((e=>{ne(e),oe(e)}),[ne,oe]);return db({currentImageArk:x,focusedIndex:S.focusedIndex,imagesData:Y,ribbonImages:X,thumbnails:C.thumbnails,imageApids:K,loading:w,group:B,showImageGrid:"on"===(null===r||void 0===r?void 0:r.grid),r2State:E}),(0,i.useEffect)((()=>{var e,t;const a=E.splitScreen&&!E.splitScreenImageGrid?null===C||void 0===C||null===(e=C.thumbnails)||void 0===e||null===(t=e[E.referenceFocusedIndex])||void 0===t?void 0:t.ark:void 0;u({mainImageArk:x,splitScreenImageArk:a})}),[x,u]),N?(0,k.Y)(i.Fragment,null,(0,k.Y)(Ty,{errorState:N,view:l}),(0,k.Y)(cu,null)):(0,k.Y)(i.Fragment,null,w?(0,k.Y)(J.Ay,{alignX:"center",alignY:"middle"},(0,k.Y)(g.A,{size:"md"})):(0,k.Y)(i.Fragment,null,(0,k.Y)(Ny,{appName:"Rii",splitScreenIsOpen:E.splitScreen,setSplitScreenIsOpen:e=>I({type:"SET_SPLIT_SCREEN",value:e}),splitScreenTitleText:a("shared-image-viewer.view-only","View Only: Image {index}",{index:E.referenceFocusedIndex+1}),splitScreenRibbonReady:!E.splitScreenImageGrid&&X,mainImageTitleText:a("shared-image-viewer.original","Original: Image {index}",{index:S.focusedIndex+1}),mainRibbonReady:"on"!==(null===r||void 0===r?void 0:r.grid)&&X,SplitScreenImageViewer:(0,k.Y)($t.A,(0,j.A)({},o,{images:null===C||void 0===C?void 0:C.thumbnails,setFocusedIndex:te,focusedIndex:E.referenceFocusedIndex,ImageComponent:Wt.A,showImageGrid:E.splitScreenImageGrid,setShowImageGrid:ee,setColumnCount:V,columnCount:s({default:3,md:z}),downloadControl:!Q,numbered:!0},_,{minZoom:.8}),("fullText"===l||"index"===l)&&(0,k.Y)(Wy,{showEditHighlights:c,forSplitScreen:!0})),SplitScreenRibbonViewer:(0,k.Y)(Jt.A,{focusedIndex:E.referenceFocusedIndex,setFocusedIndex:te,images:X||[]}),MainImageViewer:(0,k.Y)($t.A,(0,j.A)({},n,{drawingMode:d||E.creatingRect,onRectangleDrawn:ae,prompt:d||E.creatingRect?a("draw-highlight.body","Click anywhere and drag to create a highlight"):"",setFocusedIndex:se,focusedIndex:C.thumbnails?S.focusedIndex:0,showImageGrid:"on"===(null===r||void 0===r?void 0:r.grid),setShowImageGrid:re,setColumnCount:D,columnCount:s({default:3,md:F}),images:C.thumbnails||[{id:`image-${C.currentImageArk}`,alt:`Image ${C.currentImageArk+1}`,src:(0,xe.F)(C.currentImageArk,p.isOn),ribbonSrc:(0,xe.Td)(C.currentImageArk,p.isOn),ark:C.currentImageArk}],ImageComponent:Wt.A,attribution:null!==T&&void 0!==T?T:null,downloadControl:!Q,onDownload:async()=>{try{f.handleClick()}catch(e){y()}},sections:Z,hoverButtonProps:ie,controls:(0,k.Y)(nb,{preventDownloads:Q,viewMode:M,setViewMode:H}),gridControls:(0,k.Y)(nb,{preventDownloads:Q,viewMode:M,setViewMode:H}),numbered:!0},_,{minZoom:.8}),("index"===l||"fullText"===l)&&(0,k.Y)(Wy,{showEditHighlights:c})),MainRibbonViewer:(0,k.Y)(Jt.A,{focusedIndex:S.focusedIndex>-1?S.focusedIndex:0,setFocusedIndex:se,images:X||[]})}),(0,k.Y)(qm,{downloadOverlay:f,displayHighlights:A,triggerStatusOverlay:y,citation:R,plainTextTranscript:O,fullTextCreateRecordsAndAttachOverlay:v,query:r})))}function ub(){const{viewMode:e}=(0,af.A)(),{isDivideMode:t}=(0,Dl.Oq)(),{initialGroup:a,group:r}=(0,Dl.P2)();return(0,i.useMemo)((()=>t||"group"===e?a:r),[a,r,t,e])}function hb(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const{query:t}=(0,G.A)({replaceState:!0}),{view:a}=t,r=(0,U.A)(),n=function(){const e=(0,je.mS)(),t=(0,je.vl)(),a=(0,b.A)(),r=(0,Ae.l)(),{currentImageArk:n}=a,o=ub(),s=(0,Dl.gw)();return(0,i.useCallback)(((a,i,l)=>{n&&i&&a&&a&&n!==a&&(r({type:"SET_DATA",value:{currentImageArk:a}}),e.dontResetState&&!l||t({type:"NAVIGATE_IMAGE_RESET"}),(0,Qd.s3)(i,a,o,s))}),[n,s,o,t,e.dontResetState,r])}(),o=(0,Ti.HQ)(),{switchImageCheck:s}=o,l=(0,Pr.XQ)(),d=(0,Pr.kT)(),c=(0,b.A)(),u=function(){const{isDivideMode:e}=(0,Dl.Oq)(),{viewMode:t}=(0,af.A)(),{initialGroup:a}=(0,Dl.P2)(),r=null===a||void 0===a?void 0:a.imageApids,n=(0,b.A)(),{dividerOffsets:o}=(0,Dl.Rb)();return(0,i.useCallback)(((i,s)=>{var l,d,c;if((null===a||void 0===a||null===(l=a.childGroups)||void 0===l?void 0:l.length)>0&&"single"===t&&!e&&"number"===typeof s&&s>=0){const e=(0,Qd.bz)(r),t=i+o[s];return Array.isArray(e)&&e[t]?e[t]:{}}return null!==n&&void 0!==n&&null!==(d=n.thumbnails)&&void 0!==d&&null!==(c=d[i])&&void 0!==c&&c.ark?n.thumbnails[i]:{}}),[o,a,r,t,n,e])}(),h=(0,i.useCallback)((t=>{e&&!s()||d({type:"SET_FOCUSED_INDEX",value:t})}),[d,s,e]),p=(0,i.useCallback)((e=>{const t=window.location.search,i=null===t||void 0===t?void 0:t.split("&").filter((e=>!e.includes("personArk"))).join("&");"explore"===a?r.replace({pathname:`/ark:/61903/${e}`,search:i}):r.push({pathname:`/ark:/61903/${e}`,search:i})}),[r,a]);return(0,i.useCallback)(((e,t,a)=>{if(e===l.focusedIndex&&"number"!==typeof a)return;const{ark:i,id:r}=u(e,a);i&&(i!==c.currentImageArk||l.focusedIndex<0)&&(h(e),p(i),n(i,r,t))}),[p,h,n,l.focusedIndex,u,c.currentImageArk])}const pb={name:"1834v0y",styles:"margin-top:-1px;box-sizing:border-box;display:flex;align-items:flex-start;& div{border:none;}& select:focus{margin-top:1px;margin-inline-end:1px;}& select{box-shadow:0px 1px 5px 0px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 3px 1px -2px rgba(0,0,0,0.12);}"};function mb(e){let{preventDownloads:t,viewMode:a,setViewMode:r}=e;const[n]=(0,P.B)(),o=(0,je.mS)(),{itemCount:s,itemNumber:l}=(0,Dl.P2)(),{isImageOrganizeMode:d}=(0,Dl.Oq)(),c={options:(0,i.useMemo)((()=>[{value:"single",label:n("sharedViewer.viewIndividualImage","View item {itemNumber} by itself",{itemNumber:l})},{value:"group",label:n("sharedViewer.viewWholeGroup","View image group")}]),[l,n]),value:a,onChange:e=>r(e.target.value),hidePlaceholder:!0,name:"view-image-by-itself-button"};return(0,k.Y)(i.Fragment,null,(0,k.Y)(gb,null),t&&(0,k.Y)(Bt.A,{Icon:vb,disabled:!0,label:n("imageViewer.noDownloadButton","Due to contract restrictions this feature is disabled"),linkName:"no-download-button"}),o.moveGroupSelectorToTop?(0,k.Y)("div",{css:pb},(0,k.Y)($d,null)):!d&&s>1&&(0,k.Y)("div",{css:pb},(0,k.Y)(qd.A,c)))}function gb(){const{infoSheetOverlay:e}=(0,Ti.HQ)(),[t]=(0,P.B)();return null!==e&&void 0!==e&&e.isOpen?null:(0,k.Y)(Bt.A,{Icon:Xy.A,onClick:()=>{e.handleClick()},label:t("open-infosheet.button","Open Panel"),linkName:"open-panel-button"})}function vb(){return(0,k.Y)(Ut.A,{color:W.A.gray50})}const yb=(0,y.Ay)("siv:SharedImageBrowserViewer"),fb={name:"14kvf3f",styles:"display:flex;flex-grow:1;flex-direction:column;position:relative;"};function bb(){var e;const{query:t}=(0,G.A)({replaceState:!0}),[a]=(0,ga.Ay)(),r=(0,jn.Ay)(),{view:n="explore"}=t,o=(0,L.u)("shared_dasProxy"),{fullTextCreateRecordsAndAttachOverlay:s}=(0,Ti.HQ)(),{triggerStatusOverlay:l}=Bm(),d=(0,$.Ay)(),{loading:c,imageAttribution:u}=(0,Dl.P2)(),h=(0,Pr.XQ)(),p=(0,b.A)(),{currentImageArk:m}=p,{errorStatus:v}=(0,Dl.Ah)(),{citation:y,plainTextTranscript:f}=Gm(),A=Sy(),[w,T]=(0,i.useState)(5),{viewMode:I,setViewMode:S}=(0,af.A)(),E=ub(),C=null===E||void 0===E?void 0:E.imageApids,x=(0,i.useMemo)((()=>{var e;return null===(e=p.thumbnails)||void 0===e?void 0:e.map((e=>{var t;return{alt:e.alt,id:e.id,src:(null===(t=e.srcSet)||void 0===t?void 0:t[0])||""}}))}),[p.thumbnails]),Y=(null===u||void 0===u||null===(e=u.restrictedRights)||void 0===e?void 0:e.indexOf("download"))>0;!function(){const{query:e}=(0,G.A)(),{view:t="explore"}=e,a=(0,Pr.XQ)(),r=(0,Pr.kT)(),n=(0,U.A)(),o=(0,b.A)(),{currentImageArk:s}=o,l=(0,Ae.l)(),{itemNumber:d}=(0,Dl.P2)(),{isDivideMode:c}=(0,Dl.Oq)(),{isImageOrganizeMode:u}=(0,Dl.Oq)(),{dividerOffsets:h}=(0,Dl.Lw)(),p=hb(),m=(0,i.useRef)(!1),g=(0,i.useCallback)((()=>{const e=n.location.pathname.split("/").pop();if(s||l({type:"SET_DATA",value:{currentImageArk:e}}),o.thumbnails&&o.thumbnails.length){const t=o.thumbnails.findIndex((t=>t.ark===e));-1===a.focusedIndex&&t>-1&&(r({type:"SET_FOCUSED_INDEX",value:t}),m.current=!0)}}),[s,n.location.pathname,a.focusedIndex,l,o.thumbnails,r]),v=(0,i.useCallback)((()=>{var e;-1===a.focusedIndex?g():(a.focusedIndex>=(null===(e=o.thumbnails)||void 0===e?void 0:e.length)?0:a.focusedIndex)!==a.focusedIndex&&p(0)}),[a.focusedIndex,o.thumbnails,p,g]),y=(0,i.useCallback)((()=>{o.thumbnails&&o.thumbnails.length&&v()}),[v,o.thumbnails]),f=(0,i.useCallback)((()=>{!c&&!u||"number"===typeof a.focusedIndex&&-1!==a.focusedIndex||(d>0&&(null===h||void 0===h?void 0:h.length)>0&&c&&m.current?p(h[d-1]):v())}),[h,c,u,d,a.focusedIndex,p,v]);(0,i.useEffect)((()=>{"organize"===t&&f()}),[f,t]),(0,i.useEffect)((()=>{"index"!==t&&"fullText"!==t||g()}),[t,g]),(0,i.useEffect)((()=>{"explore"===t&&y()}),[t,y])}(),function(e){let{ribbonImages:t}=e;const[a,r]=(0,i.useState)(-1),{viewMode:n}=(0,af.A)(),{dividerOffsets:o}=(0,Dl.Rb)(),{itemNumber:s}=(0,Dl.P2)(),l=(0,Pr.XQ)(),d=(0,Pr.kT)(),c=(0,i.useCallback)((e=>d({type:"SET_FOCUSED_INDEX",value:e})),[d]);(0,i.useEffect)((()=>{"group"===n&&a<0&&(null===o||void 0===o?void 0:o.length)>0&&o[s-1]>-1&&(null===l||void 0===l?void 0:l.focusedIndex)+o[s-1]>-1&&(null===t||void 0===t?void 0:t.length)>(null===l||void 0===l?void 0:l.focusedIndex)+o[s-1]?(c(l.focusedIndex+o[s-1]),r(o[s-1])):"single"===n&&a>0&&(l.focusedIndex-a>0?c(l.focusedIndex-a):c(0),r(-1))}),[s,o,t,a,c,l,n])}({ribbonImages:x}),function(){const{imageApids:e}=ub(),t=(0,Ae.l)();(0,i.useEffect)((()=>{e&&e.length&&t({type:"SET_DATA",value:{thumbnails:(0,Qd.bz)(e)}})}),[e,t])}(),function(){const e=(0,je.mS)(),t=(0,je.vl)(),{query:a}=(0,G.A)(),r=(0,Ti.HQ)();(0,i.useEffect)((()=>{e.resetState&&("explore"!==a.view&&r.switchImageCheck(),e.resetState&&t({type:"SET_STATE",value:{resetState:!1}}))}),[t,r,a.mode])}();const N=function(){const[e]=(0,P.B)(),{addNewDivider:t}=(0,Dl.Lw)(),{isDivideMode:a}=(0,Dl.Oq)();return a?{Icon:ki.A,text:e("ImageBrowserViewer.hoverButtonText","End Item"),onClick:t,linkName:"add-new-divider-button"}:void 0}(),R=function(){const{viewMode:e}=(0,af.A)(),{isDivideMode:t}=(0,Dl.Oq)(),{dividerOffsets:a,removeDivider:r}=(0,Dl.Lw)(),n=(0,Qd.rE)({dividerOffsets:a,removeDivider:r}),o=(0,Qd.rE)({dividerOffsets:a});return(0,i.useMemo)((()=>{var a;let i;return t?i=n:"group"===e&&(i=o),(null===(a=i)||void 0===a?void 0:a.length)>0?i:[{offset:0}]}),[o,t,n,e])}(),O=function(){const e=(0,U.A)();return(0,i.useCallback)((t=>{t?e.replace({pathname:window.location.pathname,search:`${window.location.search}&grid=on`}):e.replace({pathname:window.location.pathname,search:window.location.search.replace("&grid=on","")})}),[e])}(),_=hb(),F=function(){const e=(0,U.A)(),{viewMode:t}=(0,af.A)(),{dividerOffsets:a}=(0,Dl.Rb)(),{isDivideMode:r}=(0,Dl.Oq)(),{groupIndex:n,setGroupIndex:o,initialGroup:s}=(0,Dl.P2)(),{query:l}=(0,G.A)();return(0,i.useCallback)((i=>{if(("group"===t||r)&&a.length>0&&n>-1&&i>-1){var d,c;const t=(u=i)<=(h=a)[0]?0:u>=h[h.length-1]?h.length-1:h.findIndex(((e,t)=>u>=e&&u<h[t+1]));if(-1===t||t===n)return;o(t);const r=null===s||void 0===s||null===(d=s.childGroups)||void 0===d||null===(c=d[t])||void 0===c?void 0:c.id;if(r&&r!==l.groupId){const t=window.location.search.replace(/&groupId=[^&]*/,`&groupId=${r}`);e.replace({pathname:window.location.pathname,search:t})}}var u,h}),[a,e,s,r,n,l.groupId,o,t])}(),D=(0,i.useCallback)((e=>{_(e),F(e)}),[_,F]);return yb({currentImageArk:m,focusedIndex:h.focusedIndex,ribbonImages:x,thumbnails:p.thumbnails,imageApids:C,loading:c,group:E,showImageGrid:"on"===(null===t||void 0===t?void 0:t.grid),imageBrowserState:h}),v?(0,k.Y)(i.Fragment,null,(0,k.Y)(Ty,{errorState:v,view:n}),(0,k.Y)(cu,null)):(0,k.Y)(i.Fragment,null,c?(0,k.Y)(J.Ay,{alignX:"center",alignY:"middle"},(0,k.Y)(g.A,{size:"md"})):(0,k.Y)("div",{css:fb},(0,k.Y)($t.A,(0,j.A)({},a,{setFocusedIndex:D,focusedIndex:p.thumbnails?h.focusedIndex:0,showImageGrid:"on"===(null===t||void 0===t?void 0:t.grid),setShowImageGrid:O,setColumnCount:T,columnCount:r({default:3,md:w}),images:p.thumbnails||[{id:`image-${p.currentImageArk}`,alt:`Image ${p.currentImageArk+1}`,src:(0,xe.F)(p.currentImageArk,o.isOn),ribbonSrc:(0,xe.Td)(p.currentImageArk,o.isOn),ark:p.currentImageArk}],ImageComponent:Wt.A,attribution:null!==u&&void 0!==u?u:null,downloadControl:!Y,onDownload:async()=>{try{d.handleClick()}catch(e){l()}},sections:R,hoverButtonProps:N,controls:(0,k.Y)(mb,{preventDownloads:Y,viewMode:I,setViewMode:S}),gridControls:(0,k.Y)(mb,{preventDownloads:Y,viewMode:I,setViewMode:S}),numbered:!0},A,{minZoom:.8})),"on"!==(null===t||void 0===t?void 0:t.grid)&&x&&(0,k.Y)(Jt.A,{focusedIndex:h.focusedIndex>-1?h.focusedIndex:0,setFocusedIndex:D,images:x||[]}),(0,k.Y)(qm,{downloadOverlay:d,triggerStatusOverlay:l,citation:y,plainTextTranscript:f,fullTextCreateRecordsAndAttachOverlay:s,query:t})))}function Ab(){const{query:{view:e="explore"}}=(0,G.A)();return(0,k.Y)(i.Fragment,null,"group"===e||"explore"===e||"organize"===e?(0,k.Y)(bb,null):(0,k.Y)(cb,null))}const wb=(0,y.Ay)("siv:IndexExploreView");function Tb(e){var t;let{validSession:a}=e;const r=(0,L.u)("rip_sharedImageViewer_feedback_RII"),n=(0,L.u)("rip_sharedImageViewer_history_NewLook"),o=(0,L.u)("rip_sharedImageViewer_rachelDesign"),s=(0,L.u)("rip_sharedImageViewer_splitViewers"),l=(0,ci.Ay)()({default:!0,md:!1}),[d]=(0,P.B)(),c=(0,D.zy)(),u=(0,ma.A)({initiallyOpen:!0}),h=(0,$.Ay)(),p=(0,$.Ay)(),m=(0,$.Ay)(),g=(0,$.Ay)(),v=(0,$.Ay)(),y=(0,$.Ay)(),f=(0,$.Ay)(),w=(0,$.Ay)(),T=(0,$.Ay)(),I=(0,$.Ay)(),S=(0,$.Ay)(),E=(0,$.Ay)(),C=(0,$.Ay)(),x=(0,$.Ay)(),Y=(0,$.Ay)(),N=(0,$.Ay)(),R=(0,$.Ay)(),O=(0,$.Ay)(),_=(0,$.Ay)(),F=(0,$.Ay)(),M=(0,$.Ay)(),H=(0,$.Ay)(),z=(0,$.Ay)(),V=(0,$.Ay)(),B=(0,$.Ay)(),U=(0,$.Ay)(),K=(0,$.Ay)(),q=(0,$.Ay)(),{query:j}=(0,G.A)(),W=(0,Ae.l)(),X=(0,b.A)(),Q=(0,je.mS)(),J=c.pathname.split("/").pop(),[Z,ee]=(0,i.useState)([]),[te,ae]=(0,i.useState)(!0),[ie,re]=(0,i.useState)(!1),ne=(0,i.useCallback)((()=>(0,A.Th)(null===X||void 0===X?void 0:X.currentImage,[])),[null===X||void 0===X?void 0:X.currentImage]),oe=(0,i.useMemo)((()=>(0,A.Qp)(null===X||void 0===X?void 0:X.images,null===X||void 0===X?void 0:X.currentImageArk)||{}),[null===X||void 0===X?void 0:X.currentImageArk,null===X||void 0===X?void 0:X.images]),se=(0,i.useCallback)(((e,t)=>{var a,i;console.error("well, sorry about the bad news",e,t),(0,$e.Yt)(e,null,{codeId:1001,status:null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.status,responseBody:null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.data,...t})}),[]),le=(0,i.useCallback)((e=>{var t;return null===X||void 0===X||null===(t=X.images)||void 0===t?void 0:t.every((t=>e.includes(t.partitionKey)))}),[null===X||void 0===X?void 0:X.images]),de=(0,i.useCallback)((e=>{var t,a;return null===X||void 0===X||null===(t=X.thumbnails)||void 0===t||null===(a=t[e])||void 0===a?void 0:a.ark}),[null===X||void 0===X?void 0:X.thumbnails]),ce=(0,i.useCallback)((e=>{var t;return e<=(null===X||void 0===X||null===(t=X.thumbnails)||void 0===t?void 0:t.length)-1&&e>=0}),[null===X||void 0===X||null===(t=X.thumbnails)||void 0===t?void 0:t.length]),{isJiapu:ue}=Ce({images:null===X||void 0===X?void 0:X.images,currentImageArk:null===X||void 0===X?void 0:X.currentImageArk,thumbnails:null===X||void 0===X?void 0:X.thumbnails}),he=(0,i.useCallback)((()=>{var e;const t=null===X||void 0===X||null===(e=X.thumbnails)||void 0===e?void 0:e.findIndex((e=>e.ark===J)),a=[J];return t>-1&&(ce(t-1)&&a.push(de(t-1)),ce(t+1)&&a.push(de(t+1))),a}),[ce,J,de,null===X||void 0===X?void 0:X.thumbnails]),pe=(0,i.useMemo)((()=>{var e;const t=null===X||void 0===X||null===(e=X.images)||void 0===e?void 0:e.find((e=>e.partitionKey===J));if(!t)return[J];if(!ue&&Q.shouldLoadIndexedData&&t){let e=he();return e=[...new Set([J,...e,...ne()])],e}return[]}),[J,ue,Q.shouldLoadIndexedData,null===X||void 0===X?void 0:X.images,ne,he]),{loading:me,error:ge}=(0,we.e)({imageArks:pe,fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],sort:!0,dispatch:!0,additionalFieldTypes:Gf,enableHook:Q.shouldLoadIndexedData});return(0,Te.J)({imageArks:!te&&(0,A.Qp)(null===X||void 0===X?void 0:X.images,J)?[J]:[],fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],dispatch:!0,enableHook:!n.isOn}),(0,i.useEffect)((()=>{let e;return me&&(e=setTimeout((()=>{me&&re(!0)}),1e4)),()=>clearTimeout(e)}),[me]),Q.shouldLoadIndexedData||me||!te||ae(!1),Q.shouldLoadIndexedData&&le(pe||[])&&te&&ae(!1),Z&&null!==oe&&void 0!==oe&&oe.partitionKey&&-1===Z.indexOf(null===oe||void 0===oe?void 0:oe.partitionKey)&&(async(e,t,a,i,r)=>{const n=[];null!==a&&void 0!==a&&a.subElements&&a.subElements.forEach((e=>{e.subElements&&e.subElements.forEach((e=>{n.push(Ri(e,a.partitionKey))}))})),null!==a&&void 0!==a&&a.floatingElements&&a.floatingElements.forEach((async e=>{e&&"PERSON"===(null===e||void 0===e?void 0:e.elementType)&&n.push(Ri(e,a.partitionKey))})),i([...r,a.partitionKey]),t({type:"SET_PERSON_LOCALIZED_NAMES",value:{partitionKey:e.currentImageArk,personsInfo:await Promise.all(n)}})})(X,W,oe,ee,Z),(0,i.useEffect)((()=>{X.loading!==te&&W({type:"SET_DATA",value:{t:d,loading:te}})}),[W,te,d,X.loading]),wb("Render: ",{slsImageArksToLoad:pe,imageDatumsLoaded:null===X||void 0===X?void 0:X.images,shouldLoadIndexedData:Q.shouldLoadIndexedData,imagePermission:Q.imagePermission,currentImageArk:X.currentImageArk,imageArk:J,error:ge,query:j,loading:te,loadingSls:me,thumbnails:X.thumbnails,newImage:(0,A.Qp)(null===X||void 0===X?void 0:X.images,J),currentImage:oe,r2State:Q,zionSlsState:X}),(0,k.Y)(ly,{validSession:a},(0,k.Y)(di.A,{errorHandler:se,FallbackComponent:qf},(0,k.Y)(Ti.Ay,{editIndexOverlay:p,viewIndexOverlay:h,addPersonOverlay:m,addPersonGenericOverlay:g,addPersonPage2Overlay:v,addPersonPage2GenericOverlay:y,dragNamesOverlay:f,removePersonOverlay:w,infoSheetOverlay:u,viewAnotherItemOverlay:I,finishedCorrectingMetadataOverlay:S,editSharedHighlightPage1Overlay:E,editSharedHighlightPage2Overlay:C,editHighlightsOverlay:x,editMetadataOverlay:Y,editSharedFieldPage1Overlay:N,editSharedFieldPage2Overlay:R,editDanglingFieldOverlay:O,editOtherFieldsOverlay:_,editRelationshipsOverlay:F,editAgeOverlay:M,editEventsOverlay:H,editEssentialInfoOverlay:z,eventPanelOverlay:V,sharedEventOverlay:B,highlightsPanelOverlay:U,attachToTreeOverlay:T,fullTextCreateRecordsAndAttachOverlay:K,groupHistoryOverlay:q},(0,k.Y)(Bf,{overlay:I}),o.isOn?(0,k.Y)(Zf,null):(0,k.Y)(zf,null),(0,k.Y)(cu,null),!l&&r.isOn&&(0,k.Y)($f,null),(0,k.Y)(Lm,null,a&&!s.isOn&&(0,k.Y)(nf,{view:j.view}),a&&s.isOn&&(0,k.Y)(Ab,{view:j.view}),(0,k.Y)(ry,{loading:te||me})),(0,k.Y)(it,{error:ie,setError:re,title:d("ssl-loading-error.heading","Unable to load the data"),message:d("ssl-loading-error.content","Loading record data is taking longer than expected.  Please try again later.")})),ge&&(0,k.Y)(Gi,{error:ge})))}const Ib=i.lazy((()=>a.e(88148).then(a.bind(a,88148)))),Sb=i.lazy((()=>a.e(41570).then(a.bind(a,41570)))),Eb={index:"RII: Indexing App",combo:"RII: Combo Viewer App",explore:"RII: Image Browser App",catalog:"RII: Catalog Viewer App",fullText:"Full Text"},kb=(0,y.Ay)("siv:ViewManager");function Cb(e){var t,a;let{imagePermission:r}=e;const{query:n}=(0,G.A)(),o=(0,b.A)(),s=(0,je.mS)(),l=(0,Dl.P2)(),d=(0,K.u)(),c=(0,i.useRef)(),u=(0,i.useRef)(),[h,p]=(0,i.useState)(),g=(0,je.vl)(),[v,y]=(0,i.useState)(!1),f=(0,U.A)().location.pathname.split("/").pop(),w="history"===(null===n||void 0===n?void 0:n.view);(0,i.useEffect)((()=>{!async function(){if(r){var e,t,a,i,n;g({type:"SET_IMAGE_PERMISSION",value:r});const o=await(0,m.Ht)(),s=(0,A.rv)(r);if(kb("VM: Session information ",{validSession:Boolean(!s&&(null===o||void 0===o||null===(e=o.users)||void 0===e?void 0:e.length)),publicallyViewable:s,session:o,length:null===o||void 0===o||null===(t=o.users)||void 0===t?void 0:t.length}),g({type:"SET_LOAD_INDEXED_DATA",value:(null===o||void 0===o||null===(a=o.users)||void 0===a?void 0:a.length)>0}),(null===o||void 0===o||null===(i=o.users)||void 0===i||!i.length)&&(!s||w))return window.location.replace(`/auth/familysearch/login?returnUrl=${encodeURIComponent(window.location)}`),void kb("VM: Redirecting to FamilySearch's login page");o&&null!==o&&void 0!==o&&null!==(n=o.users)&&void 0!==n&&n.length?kb("VM: User session was good"):(await(0,m.FD)(),kb("VM: Anon session created")),y(!0)}}()}),[f,g,r,w]),(0,i.useEffect)((()=>{!async function(){var e;const t=(null===l||void 0===l||null===(e=l.group)||void 0===e?void 0:e.id)||(null===n||void 0===n?void 0:n.groupId);if(t)p(t);else if(!h){const e=await da(f);p(null===e||void 0===e?void 0:e[0])}}()}),[null===l||void 0===l||null===(t=l.group)||void 0===t?void 0:t.id,h,null===n||void 0===n?void 0:n.groupId,f]),null!==o&&void 0!==o&&null!==(a=o.thumbnails)&&void 0!==a&&a.length&&f!==u.current&&h&&(d({page_detail:null===Eb||void 0===Eb?void 0:Eb[n.view],event_name:"imageSearch_view",image_dgsId:h}),c.current=null===n||void 0===n?void 0:n.view,u.current=f);const T=["index","fullText","explore","organize"],I={catalog:(0,k.Y)(Sb,null),history:(0,k.Y)(Pt,null),debug:(0,k.Y)(li,null)};return kb("ViewManager: ",{validSession:v,query:n,zionSlsState:o,r2State:s,groupObject:l}),v?function(){if(!n)return(0,k.Y)(Ib,null);const{view:e="default"}=n;return T.includes(e)?(0,k.Y)(Tb,{validSession:v}):I[e]?I[e]:(0,k.Y)(Ib,null)}():(0,k.Y)(q.A.Image,{width:"100%",height:"100%"})}var xb=a(10473),Yb=a(67472),Nb=a(40629);const Rb=a.p+"static/media/handwritingExamplesDesktop.db0fe448567633969af6.png",Pb=a.p+"static/media/handwritingExamplesTablet.549219d018f82da2c4bd.png";function Ob(e){const[t]=(0,P.B)(),a=(0,jn.Ay)(),{close:r}=e,n=a({default:{src:Pb,width:"100%"},xl:{src:Rb,width:"100%"}});return(0,k.Y)(Zr.A,(0,j.A)({maxWidth:"100vw"},e,{placement:["end","start","bottom"]}),(0,k.Y)(i.Fragment,null,(0,k.Y)(J.Ay,{guttersY:"none",alignY:"top"},(0,k.Y)(re.H5,{growX:!0},t("task-viewer.handwriting-tooltip","Handwriting Examples")),(0,k.Y)(ee.A,{Icon:$g.A,title:t("common-ui:close.action","Close"),onClick:r,dense:!0})),(0,k.Y)(ae.A,null),(0,k.Y)("img",(0,j.A)({},n,{alt:t("task-viewer.handwriting-alt-text","Table of handwriting examples for each letter")}))))}const _b=async e=>{const t=`give.${"Name Review"===e?"full":"Family Review"===e?"family":"quick"}_lastSearch`;try{const e=await(0,od.getPreference)(t);e&&await(0,od.setPreference)(t,{...e,stats:+e.stats+1})}catch(a){console.warn(`error updating ${t} stats`,a)}},Fb={quickNameReview:{prev:0,cur:0},fullNameReview:{prev:0,cur:0},familyReview:{prev:0,cur:0},indexing:{indexed:{prev:0,cur:0},reviewed:{prev:0,cur:0}}},Db="give:user-session-stats",Mb=async e=>{if("Name Correction"!==e&&"Full Name Review"!==e&&"Family Review"!==e)throw new Error(`Invalid task type: ${e}`);const t="Name Correction"===e?"quickNameReview":"Full Name Review"===e?"fullNameReview":"familyReview",a=(e=>{try{return JSON.parse(e)}catch(t){return Fb}})(sessionStorage.getItem(Db)),i={...Fb,...a},r={...i,[t]:{prev:i[t].prev,cur:i[t].cur+1}};sessionStorage.setItem(Db,JSON.stringify(r))};var Hb=a(69079);const Lb={config:{checkForBigEditDistance:{enabled:!0,threshhold:3},checkForSanitizedCharacters:{enabled:!0},checkForTooManySpaces:{enabled:!0,threshhold:3},checkForSequentialEdits:{enabled:!0,threshhold:3},checkForProfanity:{enabled:!0},checkForEditSpam:{enabled:!0,threshhold:3},checkForHighlightCollisions:{enabled:!0,threshhold:3},checkForExtraneousHighlights:{enabled:!0,threshhold:3},checkForTooSmallHighlighst:{enabled:!0,threshhold:3}},treatment:"on"},zb=(0,y.Ay)("rip:badActorStore"),Vb="give_bad_actor",Bb=new fi.Ay({storeName:"badActorStore",type:"session"});window.badActorStore=Bb;const Gb=async()=>{try{await(0,Hb.t_)();const e=await(0,Hb.jj)(Vb);zb("getBadActorFlag:flag",e);const t=(e=>{try{return JSON.parse(e)}catch(t){return e}})(localStorage.getItem("fsZionFlags"));zb("getBadActorFlag:localFlags",t);const a=null===t||void 0===t?void 0:t[Vb];return zb("getBadActorFlag:flagOverride",a),a?{...Lb,isOn:"on"===(null===a||void 0===a?void 0:a.treatment)}:{...e,isOn:"on"===(null===e||void 0===e?void 0:e.treatment)}}catch(e){return zb("getBadActorFlag:error",e),{...Lb,isOn:"on"===Lb.treatment}}},Ub=async e=>{const{config:t}=await Gb();return null===t||void 0===t?void 0:t[e]},Kb=async e=>{var t,a,i,r;const{config:n}=await Gb(),o=await Bb.getItem(e)||{};return{enabled:null!==(t=null===n||void 0===n||null===(a=n[e])||void 0===a?void 0:a.enabled)&&void 0!==t&&t,pass:null===(i=null===o||void 0===o?void 0:o.pass)||void 0===i||i,...void 0!==(null===o||void 0===o?void 0:o.count)&&{count:(null===o||void 0===o?void 0:o.count)||0},...void 0!==(null===n||void 0===n||null===(r=n[e])||void 0===r?void 0:r.threshhold)&&{threshhold:n[e].threshhold||0},...(null===o||void 0===o?void 0:o.originalTerm)&&{originalTerm:o.originalTerm},...(null===o||void 0===o?void 0:o.editedTerm)&&{editedTerm:o.editedTerm}}},qb=async()=>{const{config:e}=await Gb(),t=Object.keys(e),a=await Promise.all(t.map((async e=>({[e]:await Kb(e)}))));return a.reduce(((e,t)=>({...e,...t})),{})},jb=async(e,t)=>{const a={...await Bb.getItem(e)||{},...t};return Bb.setItem(e,a)};var $b=a(42042);var Wb=a(80951);const Xb={abbo:1,abeed:2,abid:1,abo:1,abortion:1,abuse:1,addict:1,addicts:1,africoon:2,alla:1,"alligator bait":2,alligatorbait:2,anal:1,analannie:2,analsex:1,anus:1,arabush:2,arabushs:2,areola:1,argie:2,armo:2,armos:2,arse:2,"arse bandit":2,arsehole:2,ass:2,assbagger:2,assblaster:2,assclown:2,asscowboy:2,asses:2,assfuck:2,assfucker:2,asshat:2,asshole:2,assholes:2,asshore:2,assjockey:2,asskiss:2,asskisser:2,assklown:2,asslick:2,asslicker:2,asslover:2,assman:2,assmonkey:2,assmunch:2,assmuncher:2,asspacker:2,asspirate:2,asspuppies:2,assranger:2,asswhore:2,asswipe:2,athletesfoot:1,babe:1,backdoorman:2,badfuck:2,balllicker:2,balls:1,ballsack:1,banging:1,barelylegal:2,barf:2,barface:2,barfface:2,bastard:1,"batty boy":2,bazongas:2,bazooms:2,beanbag:2,beanbags:2,beaner:2,beaners:2,beaney:2,beaneys:2,beastality:1,beastial:1,beastiality:1,beatoff:2,beatyourmeat:2,bestial:1,bestiality:1,biatch:2,bicurious:1,bigass:2,bigbastard:2,bigbutt:2,bitch:1,bitcher:2,bitches:1,bitchez:2,bitchin:2,bitching:2,bitchslap:2,bitchy:2,biteme:2,blackman:1,blacks:1,blowjob:2,bluegum:2,bluegums:2,boang:2,boche:2,boches:2,bogan:2,bohunk:2,bollick:2,bollock:2,bollocks:2,bondage:1,boner:2,bong:2,boob:1,boobies:2,boobs:1,booby:2,boody:2,boong:2,boonga:2,boongas:2,boongs:2,boonie:2,boonies:2,bootlip:2,bootlips:2,booty:2,bootycall:2,bosche:2,bosches:2,boschs:2,"bounty bar":1,"bounty bars":1,bountybar:1,brea5t:2,breastjob:2,breastlover:2,breastman:2,brothel:1,buddhahead:2,buddhaheads:2,buffies:2,bufter:2,bufty:2,bugger:2,buggered:2,buggery:2,bule:2,bules:2,bullcrap:2,bulldike:2,bulldyke:2,bullshit:2,"bum boy":2,"bum chum":2,"bum robber":2,bumblefuck:2,bumfuck:2,bung:2,bunga:2,bungas:2,bunghole:2,"burr head":2,"burr heads":2,burrhead:2,burrheads:2,butchbabes:2,butchdike:2,butchdyke:2,buttbang:2,buttface:2,buttfuck:2,buttfucker:2,buttfuckers:2,butthead:2,buttman:2,buttmunch:2,buttmuncher:2,buttpirate:2,buttplug:1,buttstain:2,byatch:2,cacker:2,"camel jockey":2,"camel jockeys":2,cameljockey:2,cameltoe:2,carpetmuncher:2,carruth:2,chav:2,"cheese eating surrender monkey":2,"cheese eating surrender monkies":2,"cheeseeating surrender monkey":2,"cheeseeating surrender monkies":2,cheesehead:2,cheeseheads:2,cherrypopper:2,"chi chi man":2,chickslick:2,"china swede":2,"china swedes":2,chinaman:2,chinamen:2,chinaswede:2,chinaswedes:2,"ching chong":2,"ching chongs":2,chingchong:2,chingchongs:2,chink:2,chinks:2,chinky:2,choad:2,chode:2,chonkies:2,chonky:2,chonkys:2,"christ killer":2,"christ killers":2,chug:2,chugs:2,chunger:2,chungers:2,chunkies:2,chunky:2,chunkys:2,clamdigger:2,clamdiver:2,clansman:2,clansmen:2,clanswoman:2,clanswomen:2,clit:1,clitoris:1,clogwog:2,cocaine:1,cock:1,cockblock:2,cockblocker:2,cockcowboy:2,cockfight:2,cockhead:2,cockknob:2,cocklicker:2,cocklover:2,cocknob:2,cockqueen:2,cockrider:2,cocksman:2,cocksmith:2,cocksmoker:2,cocksucer:2,cocksuck:2,cocksucked:2,cocksucker:2,cocksucking:2,cocktease:2,cocky:2,cohee:2,coitus:1,commie:2,condom:1,coolie:2,coolies:2,cooly:2,coon:2,"coon ass":2,"coon asses":2,coonass:2,coonasses:2,coondog:2,coons:2,copulate:1,cornhole:2,cra5h:1,crack:1,cracka:2,cracker:1,crackpipe:1,crackwhore:2,crap:2,crapola:2,crapper:2,crappy:2,crotch:1,crotchjockey:2,crotchmonkey:2,crotchrot:2,cum:2,cumbubble:2,cumfest:2,cumjockey:2,cumm:2,cummer:2,cumming:2,cummings:1,cumquat:2,cumqueen:2,cumshot:2,cunilingus:1,cunillingus:1,cunn:2,cunnilingus:1,cunntt:2,cunt:2,cunteyed:2,cuntfuck:2,cuntfucker:2,cuntlick:2,cuntlicker:2,cuntlicking:2,cuntsucker:2,"curry muncher":2,"curry munchers":2,currymuncher:2,currymunchers:2,cushi:2,cushis:2,cybersex:1,cyberslimer:2,dago:2,dagos:2,dahmer:2,dammit:2,damn:1,damnation:1,damnit:2,darkey:2,darkeys:2,darkie:2,darkies:2,darky:2,datnigga:2,deapthroat:2,deepthroat:2,defecate:1,dego:2,degos:2,demon:1,devil:1,devilworshipper:1,"diaper head":2,"diaper heads":2,diaperhead:2,diaperheads:2,dick:1,dickbrain:2,dickforbrains:2,dickhead:2,dickless:2,dicklick:2,dicklicker:2,dickman:2,dickwad:2,dickweed:2,diddle:2,dike:1,dildo:1,dingleberry:2,dink:2,dinks:2,dipshit:2,dipstick:2,dix:2,dixiedike:2,dixiedyke:2,doggiestyle:2,doggystyle:2,dong:2,doodoo:2,dope:2,"dot head":2,"dot heads":2,dothead:2,dotheads:2,dragqueen:2,dragqween:2,dripdick:2,drug:1,drunk:1,drunken:1,dumb:2,dumbass:2,dumbbitch:2,dumbfuck:2,"dune coon":2,"dune coons":2,dyefly:2,dyke:1,easyslut:2,eatballs:2,eatme:2,eatpussy:2,"eight ball":2,"eight balls":2,ejaculate:1,ejaculated:1,ejaculating:1,ejaculation:1,enema:1,erection:1,ero:2,esqua:2,evl:2,excrement:1,exkwew:2,facefucker:2,faeces:2,fag:1,fagging:2,faggot:2,fagot:2,fannyfucker:2,fart:1,farted:1,farting:1,farty:2,fastfuck:2,fatah:2,fatass:2,fatfuck:2,fatfucker:2,fatso:2,fckcum:2,feces:1,felatio:1,felch:2,felcher:2,felching:2,fellatio:2,feltch:2,feltcher:2,feltching:2,fetish:1,fingerfood:1,fingerfuck:2,fingerfucked:2,fingerfucker:2,fingerfuckers:2,fingerfucking:2,fister:2,fistfuck:2,fistfucked:2,fistfucker:2,fistfucking:2,fisting:2,flamer:1,flange:2,flasher:1,flatulence:1,floo:2,flydie:2,flydye:2,fok:2,fondle:1,footaction:1,footfuck:2,footfucker:2,footlicker:2,footstar:2,foreskin:1,forni:2,fornicate:1,foursome:1,fourtwenty:1,freakfuck:2,freakyfucker:2,freefuck:2,fruitcake:1,fu:2,fubar:2,fuc:2,fucck:2,fuck:2,fucka:2,fuckable:2,fuckbag:2,fuckbook:2,fuckbuddy:2,fucked:2,fuckedup:2,fucker:2,fuckers:2,fuckface:2,fuckfest:2,fuckfreak:2,fuckfriend:2,fuckhead:2,fuckher:2,fuckin:2,fuckina:2,fucking:2,fuckingbitch:2,fuckinnuts:2,fuckinright:2,fuckit:2,fuckknob:2,fuckme:2,fuckmehard:2,fuckmonkey:2,fuckoff:2,fuckpig:2,fucks:2,fucktard:2,fuckwhore:2,fuckyou:2,"fudge packer":2,fudgepacker:2,fugly:2,fuk:2,fuks:2,funfuck:2,fuuck:2,gable:1,gables:2,gangbang:2,gangbanged:2,gangbanger:2,gangsta:2,"gator bait":2,gatorbait:2,gaymuthafuckinwhore:2,gaysex:2,geez:2,geezer:2,geni:2,genital:1,getiton:2,ginzo:2,ginzos:2,gipp:2,gippo:2,gippos:2,gipps:2,givehead:2,glazeddonut:2,gob:1,god:1,godammit:2,goddamit:2,goddammit:2,goddamn:2,goddamned:2,goddamnes:2,goddamnit:2,goddamnmuthafucker:2,goldenshower:2,golliwog:2,golliwogs:2,gonorrehea:2,gonzagas:1,gook:2,"gook eye":2,"gook eyes":2,gookeye:2,gookeyes:2,gookies:2,gooks:2,gooky:2,gora:2,goras:2,gotohell:2,goy:1,goyim:1,greaseball:2,greaseballs:2,greaser:2,greasers:2,gringo:2,gringos:2,groe:1,groid:2,groids:2,gross:1,grostulation:1,gub:1,gubba:2,gubbas:2,gubs:2,guinea:1,guineas:1,guizi:1,gummer:2,gwailo:2,gwailos:2,gweilo:2,gweilos:2,gyopo:2,gyopos:2,gyp:2,gyped:2,gypo:2,gypos:2,gypp:2,gypped:2,gyppie:2,gyppies:2,gyppo:2,gyppos:2,gyppy:2,gyppys:2,gypsies:2,gypsy:2,gypsys:2,hadji:2,hadjis:2,hairyback:2,hairybacks:2,haji:2,hajis:2,hajji:2,hajjis:2,"half breed":2,"half caste":2,halfbreed:2,halfcaste:2,hamas:1,handjob:2,haole:2,haoles:2,hapa:2,hardon:2,headfuck:2,hebe:2,hebephila:1,hebephile:1,hebephiles:1,hebephilia:1,hebephilic:1,hebes:2,heeb:2,heebs:2,heroin:1,herpes:1,hillbillies:2,hillbilly:2,hindoo:2,hiscock:2,hitler:1,hitlerism:2,hitlerist:2,hiv:1,ho:2,hobo:2,hodgie:2,hoes:2,holestuffer:2,homicide:1,homo:2,homobangers:2,homosexual:1,honger:2,honkers:2,honkey:2,honkeys:2,honkie:2,honkies:2,honky:2,hooker:2,hookers:2,hooters:2,hore:2,hori:2,horis:2,hork:2,horney:2,horniest:2,horny:1,horseshit:2,hosejob:2,hoser:2,hotdamn:2,hotpussy:2,hottotrot:2,hymen:1,hymie:2,hymies:2,iblowu:2,idiot:2,ike:1,ikes:1,ikey:1,ikeymo:2,ikeymos:2,ikwe:2,illegals:1,incest:1,indon:2,indons:2,injun:2,injuns:2,insest:2,intercourse:1,interracial:1,intheass:2,inthebuff:2,italiano:1,jackass:2,jackoff:2,jackshit:2,jacktheripper:2,jap:2,japcrap:2,japie:2,japies:2,japs:2,jebus:2,jeez:2,jerkoff:2,jerries:1,jesuschrist:1,jewboy:2,jewed:2,jewess:2,jig:2,jiga:2,jigaboo:2,jigaboos:2,jigarooni:2,jigaroonis:2,jigg:2,jigga:2,jiggabo:2,jiggabos:2,jiggas:2,jigger:2,jiggers:2,jiggs:2,jiggy:2,jigs:2,jihad:1,jijjiboo:2,jijjiboos:2,jimfish:2,jism:2,jiz:2,jizim:2,jizjuice:2,jizm:2,jizz:2,jizzim:2,jizzum:2,juggalo:2,"jungle bunnies":2,"jungle bunny":2,junglebunny:2,kacap:2,kacapas:2,kacaps:2,kaffer:2,kaffir:2,kaffre:2,kafir:2,kanake:2,katsap:2,katsaps:2,khokhol:2,khokhols:2,kigger:2,kike:2,kikes:2,kimchis:2,kink:1,kinky:1,kissass:2,kkk:2,klansman:2,klansmen:2,klanswoman:2,klanswomen:2,knockers:1,kock:1,kondum:2,koon:2,kotex:1,krap:2,krappy:2,kraut:1,krauts:2,kuffar:2,kum:2,kumbubble:2,kumbullbe:2,kummer:2,kumming:2,kumquat:2,kums:2,kunilingus:2,kunnilingus:2,kunt:2,kushi:2,kushis:2,kwa:2,"kwai lo":2,"kwai los":2,ky:1,kyke:2,kykes:2,kyopo:2,kyopos:2,lactate:1,lapdance:1,lebo:2,lebos:2,lesbain:2,lesbayn:2,lesbin:2,lesbo:2,lez:2,lezbe:2,lezbefriends:2,lezbo:2,lezz:2,lezzo:2,libido:1,licker:1,lickme:2,limey:2,limpdick:2,limy:2,liquor:1,livesex:2,loadedgun:2,lolita:1,looser:2,loser:2,lovebone:2,lovegoo:2,lovegun:2,lovejuice:2,lovemuscle:2,lovepistol:2,loverocket:2,lowlife:2,lsd:1,lubejob:2,lubra:2,luckycammeltoe:2,lugan:2,lugans:2,lynch:1,mabuno:2,mabunos:2,macaca:2,macacas:2,mafia:1,magicwand:2,mahbuno:2,mahbunos:2,mams:2,manhater:2,manpaste:2,marijuana:1,mastabate:2,mastabater:2,masterbate:2,masterblaster:2,mastrabator:2,masturbate:2,masturbating:2,mattressprincess:2,"mau mau":2,"mau maus":2,maumau:2,maumaus:2,meatbeatter:2,meatrack:2,meth:1,mgger:2,mggor:2,mick:1,mickeyfinn:2,milf:2,mockey:2,mockie:2,mocky:2,mofo:2,moky:2,molest:1,molestation:1,molester:1,molestor:1,moneyshot:2,"moon cricket":2,"moon crickets":2,mooncricket:2,mooncrickets:2,moron:2,moskal:2,moskals:2,moslem:2,mosshead:2,mothafuck:2,mothafucka:2,mothafuckaz:2,mothafucked:2,mothafucker:2,mothafuckin:2,mothafucking:2,mothafuckings:2,motherfuck:2,motherfucked:2,motherfucker:2,motherfuckin:2,motherfucking:2,motherfuckings:2,motherlovebone:2,muff:2,muffdive:2,muffdiver:2,muffindiver:2,mufflikcer:2,mulatto:2,muncher:2,munt:2,murder:1,murderer:1,mzungu:2,mzungus:2,narcotic:1,nastybitch:2,nastyho:2,nastyslut:2,nastywhore:2,nazi:1,necro:1,negres:2,negress:2,negro:2,negroes:2,negroid:2,negros:2,nig:2,nigar:2,nigars:2,nigerian:1,nigerians:1,nigers:2,nigette:2,nigettes:2,nigg:2,nigga:2,niggah:2,niggahs:2,niggar:2,niggaracci:2,niggard:2,niggarded:2,niggarding:2,niggardliness:2,niggardlinesss:2,niggards:2,niggars:2,niggas:2,niggaz:2,nigger:2,niggerhead:2,niggerhole:2,niggers:2,niggle:2,niggled:2,niggles:2,niggling:2,nigglings:2,niggor:2,niggress:2,niggresses:2,nigguh:2,nigguhs:2,niggur:2,niggurs:2,niglet:2,nignog:2,nigor:2,nigors:2,nigr:2,nigra:2,nigras:2,nigre:2,nigres:2,nigress:2,nigs:2,nip:2,nipple:1,nipplering:1,nittit:2,nlgger:2,nlggor:2,nofuckingway:2,nook:1,nookey:2,nookie:2,noonan:2,nooner:1,nude:1,nudger:2,nuke:1,nutfucker:2,nymph:1,ontherag:2,oral:1,orga:2,orgasim:2,orgasm:1,orgies:1,orgy:1,paddy:1,paederastic:1,paederasts:1,paederasty:1,paki:2,pakis:2,palesimian:2,"pancake face":2,"pancake faces":2,pansies:2,pansy:2,panti:2,payo:2,pearlnecklace:1,peck:1,pecker:1,peckerwood:2,pederastic:1,pederasts:1,pederasty:1,pedo:2,pedophile:1,pedophiles:1,pedophilia:1,pedophilic:1,pee:1,peehole:2,peepee:2,peepshow:1,peepshpw:2,pendy:1,penetration:1,peni5:2,penile:1,penis:1,penises:1,perv:2,phonesex:1,phuk:2,phuked:2,phuking:2,phukked:2,phukking:2,phungky:2,phuq:2,pi55:2,picaninny:2,piccaninny:2,pickaninnies:2,pickaninny:2,piefke:2,piefkes:2,piker:2,pikey:2,piky:2,"pillow biter":2,pimp:2,pimped:2,pimper:2,pimpjuic:2,pimpjuice:2,pimpsimp:2,pindick:2,piss:2,pissed:2,pisser:2,pisses:2,pisshead:2,pissin:2,pissing:2,pissoff:2,pistol:1,pixie:1,pixy:1,playboy:1,playgirl:1,pocha:2,pochas:2,pocho:2,pochos:2,pocketpool:2,pohm:2,pohms:2,polack:2,polacks:2,pollock:2,pollocks:2,pom:2,pommie:2,"pommie grant":2,"pommie grants":2,pommies:2,pommy:2,poms:2,poo:2,poof:2,poofta:2,poofter:2,poon:2,poontang:2,poop:2,pooper:2,pooperscooper:2,pooping:2,poorwhitetrash:2,popimp:2,"porch monkey":2,"porch monkies":2,porchmonkey:2,porn:1,pornflick:1,pornking:2,porno:1,pornography:1,pornprincess:2,"prairie nigger":2,"prairie niggers":2,pric:2,prick:2,prickhead:2,prostitute:1,protestant:1,pu55i:2,pu55y:2,pube:1,pubic:1,pubiclice:2,pud:2,pudboy:2,pudd:2,puddboy:2,puke:2,puntang:2,purinapricness:2,puss:2,pussie:2,pussies:2,pussy:1,pussycat:1,pussyeater:2,pussyfucker:2,pussylicker:2,pussylips:2,pussylover:2,pussypounder:2,pusy:2,quashie:2,queef:2,queer:1,quickie:2,quim:2,ra8s:2,racist:1,radical:1,radicals:1,raghead:2,ragheads:2,randy:1,rape:1,raped:1,raper:2,rapist:1,rearend:2,rearentry:2,rectum:1,redleg:2,redlegs:2,redneck:2,rednecks:2,redskin:2,redskins:2,reefer:2,reestie:2,rentafuck:2,rere:2,retard:2,retarded:2,ribbed:1,rigger:2,rimjob:2,rimming:2,"round eyes":2,roundeye:2,russki:2,russkie:2,sadis:2,sadom:2,sambo:2,sambos:2,samckdaddy:2,"sand nigger":2,"sand niggers":2,sandm:2,sandnigger:2,satan:1,scag:1,scallywag:2,scat:1,schlong:2,schvartse:2,schvartsen:2,schwartze:2,schwartzen:2,screw:1,screwyou:2,scrotum:1,scum:1,semen:1,seppo:2,seppos:2,septic:1,septics:1,sex:1,sexed:2,sexfarm:2,sexhound:2,sexhouse:1,sexing:2,sexkitten:2,sexpot:2,sexslave:2,sextogo:2,sextoy:1,sextoys:1,sexual:1,sexually:1,sexwhore:2,sexy:1,sexymoma:2,sexyslim:2,shag:1,shaggin:2,shagging:2,shat:2,shav:2,shawtypimp:2,sheeney:2,shhit:2,shiksa:2,shinola:1,shit:1,shitcan:2,shitdick:2,shite:2,shiteater:2,shited:2,shitface:2,shitfaced:2,shitfit:2,shitforbrains:2,shitfuck:2,shitfucker:2,shitfull:2,shithapens:2,shithappens:2,shithead:2,shithouse:2,shiting:2,shitlist:2,shitola:2,shitoutofluck:2,shits:2,shitstain:2,shitted:2,shitter:2,shitting:2,shitty:2,shortfuck:2,shylock:2,shylocks:2,sissy:2,sixsixsix:2,sixtynine:2,sixtyniner:2,skank:2,skankbitch:2,skankfuck:2,skankwhore:2,skanky:2,skankybitch:2,skankywhore:2,skinflute:2,skum:2,skumbag:2,skwa:2,skwe:2,slanteye:2,slanty:2,slapper:2,slaughter:1,slave:2,slavedriver:2,sleezebag:2,sleezeball:2,slideitin:2,slimeball:2,slimebucket:2,slopehead:2,slopeheads:2,sloper:2,slopers:2,slopey:2,slopeys:2,slopies:2,slopy:2,slut:2,sluts:2,slutt:2,slutting:2,slutty:2,slutwear:2,slutwhore:2,smack:1,smackthemonkey:2,smut:2,snatch:1,snatchpatch:2,sniggers:1,snowback:2,snownigger:2,sodom:1,sodomise:2,sodomite:1,sodomize:2,sodomy:2,sonofabitch:2,sonofbitch:2,sooties:2,sooty:2,spade:1,spades:1,spaghettibender:2,spaghettinigger:2,spank:1,spankthemonkey:2,spearchucker:2,spearchuckers:2,sperm:1,spermacide:2,spermbag:2,spermhearder:2,spermherder:2,spic:2,spick:2,spicks:2,spics:2,spig:2,spigotty:2,spik:2,spit:2,spitter:2,splittail:2,spooge:2,spreadeagle:2,spunk:2,spunky:2,sqeh:2,squa:2,squarehead:2,squareheads:2,squaw:2,squinty:2,stagg:1,stiffy:1,strapon:1,stringer:2,stripclub:2,stroking:1,stuinties:2,stupid:2,stupidfuck:2,stupidfucker:2,suck:1,suckdick:2,sucker:2,suckme:2,suckmyass:2,suckmydick:2,suckmytit:2,suckoff:2,suicide:1,swallow:1,swallower:2,swalow:2,"swamp guinea":2,"swamp guineas":2,swastika:1,syphilis:1,tacohead:2,tacoheads:2,taff:2,tang:2,tantra:1,"tar babies":2,"tar baby":2,tarbaby:2,tard:2,teat:1,terrorist:1,teste:2,testicle:1,testicles:1,thicklip:2,thicklips:2,thirdeye:2,thirdleg:2,threesome:1,threeway:2,"timber nigger":2,"timber niggers":2,timbernigger:2,tinker:2,tinkers:2,tinkle:1,tit:1,titbitnipply:2,titfuck:2,titfucker:2,titfuckin:2,titjob:2,titlicker:2,titlover:2,tits:1,tittie:2,titties:2,titty:2,tnt:1,tongethruster:2,tonguethrust:2,tonguetramp:2,tortur:2,torture:1,tosser:2,"towel head":2,"towel heads":2,towelhead:2,trailertrash:2,tramp:1,trannie:2,tranny:2,transvestite:2,trap:1,triplex:2,trisexual:1,trots:1,tuckahoe:2,tunneloflove:2,turd:1,turnon:2,twat:2,twink:2,twinkie:2,twobitwhore:2,uck:2,ukrop:2,"uncle tom":2,unfuckable:2,upskirt:2,uptheass:2,upthebutt:2,usama:2,uterus:1,vagina:1,vaginal:1,vibr:2,vibrater:2,vibrator:1,virginbreaker:2,vomit:2,vulva:1,wab:2,wank:2,wanker:2,wanking:2,waysted:2,weenie:2,weewee:2,welcher:2,welfare:2,wetb:2,wetback:2,wetbacks:2,wetspot:2,whacker:2,whash:2,whigger:2,whiggers:2,whiskeydick:2,whiskydick:2,whit:1,"white trash":2,whitenigger:2,whites:1,whitetrash:2,whitey:2,whiteys:2,whities:2,whiz:2,whop:2,whore:2,whorefucker:2,whorehouse:2,wigga:2,wiggas:2,wigger:2,wiggers:2,willie:2,williewanker:2,willy:1,wn:2,wog:2,wogs:2,wop:2,wtf:2,wuss:2,wuzzie:2,xkwe:2,xtc:1,xxx:1,yank:2,yankee:1,yankees:1,yanks:2,yarpie:2,yarpies:2,yellowman:2,yid:2,yids:2,zigabo:2,zigabos:2,zipperhead:2,zipperheads:2,abanto:2,abrazafarolas:2,acabada:2,adefesio:2,adufe:2,afilar:1,agarraderas:2,aguayon:1,"aguay\xf3n":2,alcornoque:2,"alfe\xf1ique":2,anda:1,andorga:2,andurriasmo:2,"and\xe1":2,aniz:2,argolla:1,arrastracueros:2,arrecho:2,artaban:1,"artab\xe1n":2,asesinato:1,asno:1,atarre:2,avergallon:1,"avergall\xf3n":2,ayotes:2,baboso:2,balurde:2,barrabas:1,"barrab\xe1s":2,barriobajero:2,bastardo:2,bebecharcos:2,bellaco:2,belloto:2,berzotas:2,besugo:2,bizcocho:1,bobalicon:1,"bobalic\xf3n":2,bocabuzon:1,"bocabuz\xf3n":2,bocachancla:2,bocallanta:2,bolas:2,bollera:1,bollito:2,bollo:2,boludo:2,bombin:1,"bomb\xedn":2,boniato:2,boquimuelle:2,borondanga:2,borraja:2,borrico:2,bostazo:2,botarate:2,brisco:2,brizna:2,brocha:2,bruta:2,bucha:2,bufarron:1,"bufarr\xf3n":2,bujarra:2,bujarron:1,"bujarr\xf3n":2,burundanga:1,butifarra:2,cabecipelao:2,cabestro:2,cabezaalberca:2,cabezabuque:2,cabezahueca:1,cabron:2,cabrona:2,cabrones:2,"cabr\xf3n":2,caca:1,cacha:2,cachapera:2,cachar:2,cacheteo:2,cachilo:2,cachimba:2,cachivache:1,cachufleta:2,cafre:2,cagada:2,cagado:2,cagalindes:2,cagar:2,cagarruta:2,cagarse:2,cagon:2,cagueta:1,cajeta:1,calabazo:2,calambuco:2,calamidad:2,calduo:1,"cald\xfao":2,calientahielos:2,caliente:2,callate:1,calzamonas:2,cansalmas:2,"cantama\xf1anas":2,cantimplora:2,capullo:2,"cara de pupu":2,caracaballo:2,caracarton:1,"caracart\xf3n":2,caraculo:2,caraflema:2,carajaula:2,carajote:2,carapapa:2,carapijo:2,casquete:1,cazurro:2,cebollino:2,cenizo:1,cenutrio:2,ceporro:2,cernicalo:1,"cern\xedcalo":2,cerote:2,chacon:1,"chac\xf3n":2,chancay:2,chancla:1,chapero:2,chaqueta:2,charran:1,"charr\xe1n":2,chiche:2,chichi:2,chifar:2,chimar:2,"chinga a madre":2,"chinga tu madre":2,chingado:2,chingar:2,chiquilicuatre:2,chirimbaina:2,chocho:2,chucha:2,chupacables:2,chupada:1,chupador:1,chupapollas:1,chuparla:2,chupasangre:2,chuperson:2,chupeton:1,"chupet\xf3n":1,chupoptero:1,"chup\xf3ptero":2,cierrabares:2,cipote:2,clavar:1,cocheche:2,cocones:2,cocos:1,coger:2,cogollo:2,cogote:2,cojido:2,cojieron:2,cojiste:2,cojones:2,cola:2,colgados:2,colgazon:1,"colgaz\xf3n":2,colipato:2,colison:1,"colis\xf3n":2,collofe:2,colloma:2,colon:1,"col\xf3n":2,comadres:2,come:1,comebolsas:2,comechapas:2,comeflores:2,comemierda:2,comer:1,"comer bistec":1,comestacas:2,"compa\xf1ero":1,"compa\xf1eros":1,concha:1,"concha de tu madre":1,conchudo:2,conejo:1,conejos:1,copa:1,copeton:1,"copet\xf3n":2,coprofagia:1,coquimbanos:2,corneta:1,cornudo:2,coronta:2,corota:2,corotas:2,corozo:2,correa:1,corrida:1,coso:2,cotorra:2,coyoles:2,coyones:2,coyos:2,"co\xf1a":1,"co\xf1o":2,cretino:2,crica:2,cuacha:2,"cuaresme\xf1o":2,cuates:2,cuca:2,cuchara:2,cuchillo:1,cucon:2,cucona:2,cueco:2,cuerpoescombro:2,culamen:2,culeado:2,culear:2,culero:2,culo:1,culopollo:2,culos:2,curtir:1,cuyones:2,"c\xe1llate":1,descerebrado:2,desgarracalzas:2,desgraciarse:2,dondiego:2,donnadie:2,echacantos:2,ejarramantas:2,"el puto ese":2,"el puto que te pario":2,"el puto que te pari\xf3":1,empiernarse:2,emputado:2,emputecido:2,energumeno:1,"energ\xfameno":2,ensartar:1,esbaratabailes:2,escolimoso:2,escornacabras:2,estaca:1,estafiate:2,estulto:2,estupido:2,exprimir:1,fachar:2,fanfosquero:2,fantoche:2,fariseo:2,fifar:2,filiberto:2,filimincias:2,fleto:2,foligoso:2,follador:2,follar:2,forrar:2,forro:1,fulastre:2,fundillo:2,ganapan:1,ganapio:2,"ganap\xe1n":2,gandul:1,garchar:2,garompa:2,gaznapiro:1,"gazn\xe1piro":2,"ga\xf1an":1,"ga\xf1\xe1n":2,gilipichis:2,gilipollas:2,gilipuertas:2,giraesquinas:2,gomas:1,gorrino:2,gorrumino:2,guaranga:2,guitarro:2,gurriato:2,gustarle:2,"g\xfcebo":2,habahela:1,"habahel\xe1":2,"hacer una mamada":2,"hacer una paja":2,"haciendo el amor":2,heroina:1,"hero\xedna":2,"hija de puta":2,"hijo de mil putas":2,"hijo de puta":2,hueco:2,huelegateras:2,huevo:1,huevon:1,huevos:1,"huev\xf3n":2,idiota:2,ignorante:1,imbecil:2,imbeciles:2,"imb\xe9cil":2,"imb\xe9ciles":1,impermeable:1,infierno:1,jilipollas:2,joder:2,kapullo:2,"la puta que te pario":2,"la puta que te pari\xf3":1,"la puta que te recontrapario":2,"la puta que te recontrapari\xf3":1,ladilla:2,lamecharcos:2,lameculos:2,lamehuevos:1,lameplatos:2,leche:2,leches:2,lechuguino:2,lerdo:2,letrin:1,"letr\xedn":2,lloramigas:2,lolas:2,longanizas:2,lumbreras:2,maciza:1,macizorra:2,maganto:2,majadero:2,malandro:1,malasangre:2,malasombra:2,maldita:1,maldito:2,maleton:1,"malet\xf3n":2,malparido:2,"mama huevos":2,mamada:2,mamahuevo:1,mamar:2,mamarla:2,mameluco:2,mamey:2,mamon:2,mamona:1,mamplora:2,mamporrero:2,"mam\xf3n":1,manchas:2,manegueta:2,mangarran:1,"mangarr\xe1n":2,mangurrian:1,"mangurri\xe1n":2,maraco:2,marica:2,maricon:2,maricona:1,mariconazo:2,maricos:2,"maric\xf3n":2,mariposa:1,mariposon:1,"maripos\xf3n":2,martillo:1,marujo:2,mastuerzo:2,masturbacion:1,"masturbaci\xf3n":2,matacandiles:2,mayate:2,meapilas:2,mecos:2,melon:1,melones:1,"mel\xf3n":1,mendrugo:2,mentecato:2,mequetrefe:2,merluzo:2,metemuertos:2,metijaco:2,mico:2,mierda:2,mindundi:2,minga:2,mojar:1,"mojar el bizcocho":2,"mojar el chingolo":2,montar:1,morfarse:2,morlaco:2,morroestufa:2,morrongo:2,muerdesartenes:2,nabo:2,naco:2,ninfo:2,"no jodas":1,nojoda:1,ojete:2,orate:2,orina:1,orto:2,ovejo:2,pagafantas:2,paja:2,pajara:1,pajaro:1,pajeado:2,pajearse:2,pajero:2,palo:2,palurdo:2,pamplinas:2,panarra:2,panocha:2,panoli:2,papafrita:2,papallona:2,papanatas:2,papaya:1,papayona:2,papirote:2,paquete:1,pardillo:2,pargo:2,parguela:2,pasmarote:2,pasmasuegras:2,pata:1,pataliebre:2,patan:1,pato:1,"pat\xe1n":2,pavitonto:2,pazguato:2,pecholata:2,pechugas:2,pedazo:1,pedorro:2,peinabombillas:2,peinaovejas:2,pelagallos:2,pelagambas:2,pelagatos:2,pelatigres:2,pelazarzas:2,pelele:2,pelma:2,pelotas:2,pelotudo:2,pendejo:2,pepa:2,percebe:2,perrocostra:2,perroflauta:2,pervertido:2,peterete:2,petimetre:2,pezon:1,"pez\xf3n":2,picapleitos:2,picha:2,pichabrava:2,pico:2,pija:2,pijo:2,pillavispas:2,piltrafa:2,pinchauvas:2,pinche:2,pinga:2,pintamonas:2,piojoso:2,pipe:2,pipian:1,"pipi\xe1n":1,pis:2,pisar:2,pistola:2,"pita\xf1oso":2,pito:2,pitofloro:2,playo:2,plomo:1,pocasluces:2,polla:2,pollas:2,pollopera:2,polvazo:1,polvo:2,popa:2,poronga:2,poto:2,pringao:1,prostituta:2,prostituto:2,puchero:2,puta:2,putada:1,putas:1,putica:1,puto:2,putona:1,putos:1,"p\xe1jara":1,"p\xe1jaro":1,quebracho:2,quebrachon:1,"quebrach\xf3n":2,quitahipos:2,racista:1,raja:2,ramera:2,rastrapajo:2,reata:2,"reba\xf1asandias":1,"reba\xf1asand\xedas":2,remame:2,repisas:2,retazo:2,revientabaules:2,riata:2,rieleches:1,rifle:1,robaperas:2,rulacho:2,sabandija:2,sacamuelas:2,sadico:1,sanguijuela:2,seno:2,senos:2,sexo:2,"sexo oral":2,sinentraero:2,singar:2,sinsustancia:2,sobarsela:1,sobo:2,"sob\xe1rsela":2,sonajas:2,sonso:2,sopladores:2,soplagaitas:2,soplaguindas:2,soplanucas:2,soplapollas:2,sorete:2,sosco:2,"s\xe1dico":2,tagarote:2,tajarse:2,tanate:2,tarado:2,tarugo:2,tereso:2,tetas:2,"tetas grandes":2,tetona:1,"tia buena":1,"tio bueno":1,tiralevitas:2,tirar:1,tirarse:1,tocapelotas:2,tocho:2,tolai:2,tolete:2,tompeates:2,tonga:2,tontaco:2,tontucio:2,tordo:2,tortillera:2,totona:2,traga:2,tragaldabas:2,tragasables:2,transar:2,travesti:2,trincar:2,trio:2,trola:2,trolo:2,"tr\xedo":1,tuercebotas:2,tunante:2,"t\xeda buena":2,"t\xedo bueno":1,vejiga:1,verga:2,vergallito:2,vergallo:2,vete:2,"vete a la mierda":2,violador:2,violar:2,volar:1,volarse:2,"voltearse la rosca":2,"voltearse la tortilla":2,yegua:2,zamacuco:2,zambombo:2,zampabollos:2,zamugo:2,zangano:1,zarrapastroso:2,zascandil:2,zopenco:2,zoquete:2,zorra:2,zote:2,zullenco:2,zurcefrenillos:2,"z\xe1ngano":1,"\xf1ema":1,"\xf1orro":1,BLC:2,Bitembois:2,DMC:2,DTC:2,"Dieu me pignole":2,"Dieu me tripote":2,FDP:2,NTM:2,PD:2,PQR:2,RAB:2,TBM:2,TG:2,VDM:2,"aller aux putes":2,"aller lib\xe9rer Mandela":2,"aller niquer sa m\xe8re":2,"aller se faire empapaouter":2,"aller se faire enculer":2,"aller se faire foutre":2,"aller se faire mettre":2,"allez vous faire foutre":2,archifoutre:2,"arriver comme le marquis de Couille-Verte":2,asphalteuse:2,astiquer:2,"avoir de la chatte":2,"avoir de la merde dans les yeux":2,"avoir de la moule":2,"avoir des couilles":2,"avoir des couilles au cul":2,"avoir du cul":2,"avoir du poil au cul":2,"avoir la gueule dans le cul":2,"avoir la t\xeate dans le cul":2,"avoir le cul bord\xe9 de m\xe9dailles":2,"avoir le cul bord\xe9 de nouilles":2,"avoir le feu au cul":2,"avoir le papier qui colle aux bonbons":2,"avoir le trou du cul en chou-fleur":2,"avoir les couilles":2,"avoir les nerfs":2,"avoir les rideaux qui collent aux fen\xeatres":2,"avoir les yeux en trou de bite":2,"avoir les yeux en trou de pine":2,"avoir l\u2019air con":2,"avoir plein le cul":2,"avoir un balai dans le cul":2,bagouse:1,baisable:2,baise:2,baiser:1,"baiser Fanny":2,"baiser comme des lapins":2,"baiser comme un lapin":2,baiseur:2,"balancer la sauce":1,balayette:1,banane:1,bander:1,"bander comme un Turc":2,"bander comme un cerf":2,"bander comme un taureau":2,"bander comme un \xe2ne":2,"bapt\xeame":1,"bar \xe0 putes":2,bat:1,batte:1,benzer:2,berlingue:1,bibite:2,biffle:2,biffler:2,bifle:2,bifler:2,bite:1,bitembois:2,"bivouaquer dans la crevasse":2,"bi\xe9taze":2,bolosser:2,"bombe atomique":2,"bon coup":2,bonasse:2,bonnasse:2,bonne:1,bordel:2,"bordel de merde":2,"bordel \xe0 cul":2,"bordel \xe0 cul de pompe \xe0 merde":2,"bordel \xe0 cul pompe \xe0 merde":2,bosnioule:2,"botter le cul":2,boucaque:2,bouffable:2,"bouffer la chatte":2,"bouffer le cul":2,bougnoul:2,bougnoule:2,bougnoulisation:2,bougnouliser:2,boukak:2,boule:2,bounioul:2,bounioule:2,"bourrer le mou":2,bourriquer:2,"boyau cullier":2,"branle-couille":2,branler:2,"branler le mammouth":2,branlette:2,"branlette espagnole":2,"branlette intellectuelle":2,branleur:2,branlo:2,branlotter:2,"branl\xe9e":2,"brise-burnes":2,"briser les noix":2,broutage:1,"broute-minou":2,brouter:1,"brouter le gazon":2,"brouter les couilles":2,brouteur:1,brouteuse:1,"br\xeale":2,burne:2,"b\xe2ton":1,cagasse:2,cagoince:2,cahba:2,calice:1,"carrer dans l\u2019oignon":2,"carte de France":1,"casse-bonbon":2,"casse-burette":2,"casse-couille":2,"casse-couilles":2,"casser la gueule":2,"casser le pot":2,"casser les boules":2,"casser les burnes":2,"casser les couilles":2,cerise:1,"chacun sa merde":2,chagasse:2,chagatte:2,charmouta:2,chat:1,"chat bite":2,"chat-bite":2,chatte:1,"chaude-pisse":2,"cherche-merde":2,chiant:2,"chiant comme la Lune":2,chiasse:2,chiasser:2,chiatique:2,chibre:2,chiennasse:2,chienne:1,chiennerie:1,chier:2,"chier comme tout le monde":2,"chier dans les bottes":2,"chier dans son froc":2,"chier pour la marine":2,"chier une pendule":2,chierie:2,chieur:2,chiotte:2,chiottes:2,"chi\xe9e":2,choper:2,choune:2,christ:1,ciboire:1,"claque merde":2,"claque-merde":2,clille:2,"comme papa dans maman":2,"comme un chien fout sa merde":2,con:2,"con comme un balai":2,"con comme un gland":2,"con comme une bite":2,conchier:2,connard:2,connarde:2,connasse:2,conneau:2,connerie:2,contrecrisser:2,"copain de baise":2,"copine de baise":2,coquillard:2,couille:2,"couille de loup":2,"couille molle":2,"couilles au poteau":2,couillu:2,"coup de pute":2,"couter la peau des couilles":2,"couter la peau du cul":2,"co\xfbter la peau des couilles":2,"co\xfbter la peau du cul":2,"co\xfbter une couille":2,cramouille:2,"craquer son slip":2,"craquer son string":2,"cravacher le pur-sang":2,crisse:2,crissement:2,crosse:2,crosser:2,cruchasse:2,cul:2,culasse:2,culbuter:2,culer:2,culeter:2,culeur:2,"c\xe2liboire":2,"c\xe2lice":1,"c\xe2lisse":1,"c\xe2lisser":2,"c\xe9o\xe8ne":2,"c\u2019est de la couille de loup":2,"dans ton cul":2,"de mes couilles":2,"de mes deux":2,"de mon vier":2,"demi-molle":2,"des couilles":2,"diarrh\xe9e":2,dilater:2,djoc:2,does:2,doeser:2,doigter:2,drisser:2,drouille:2,ducon:2,duconnot:2,dugland:2,"d\xe9bagouler":2,"d\xe9bander":2,"d\xe9boiter":2,"d\xe9broussailler la tranch\xe9e":2,"d\xe9charger":2,"d\xe9connade":2,"d\xe9connage":2,"d\xe9conner":2,"d\xe9crisser":2,"d\xe9culer":2,"d\xe9c\xe2lisser":2,"d\xe9foncer":2,"d\xe9fonceur":2,"d\xe9fourailler":2,"d\xe9gager":2,"d\xe9glinguer":2,"d\xe9gueulassement":2,"d\xe9merde yourself":2,"d\xe9monter":2,"d\xe9pucelage":2,"d\xe9puceler":2,"d\xe9rouler du c\xe2ble":2,"d\xe9sengorger":2,emmancher:2,"emmanch\xe9":2,emmerder:2,emmerdeur:2,"emmerd\xe9":2,empapaoutage:2,"en avoir deux":2,"en avoir plein le cul":2,"en avoir plein les couilles":2,"en avoir ras les burnes":2,"en chier":2,enconnade:2,enconner:2,encuguler:2,enculable:2,enculade:2,"enculade de mouche":2,enculagailler:2,enculage:2,"enculage de mouche":2,"enculage de mouches":2,enculailleur:2,enculatoire:2,enculement:2,enculer:2,"enculer les mouches":2,enculerie:2,enculette:2,enculeur:2,"enculeur de mouches":2,enculeuse:2,"encul\xe9":2,"encul\xe9 de ta m\xe8re":2,"encul\xe9 de ta race":2,"enfant de chienne":2,"enfant de putain":2,"enfant de pute":2,enfiler:2,enfler:2,enfoirer:2,"enfoir\xe9":2,enfourailler:2,enfoutrer:2,englander:2,engrosser:2,engueuler:2,"entre couilles":2,entuber:2,envoyer:2,"envoyer chier":2,envulver:2,esque:2,estie:2,"et mon cul, c\u2019est du poulet":2,"et ta connerie":2,exploser:2,"exploser le terrier":2,"face de pet":2,faciale:2,"faire chier":2,"faire chier la bite":2,"faire crapahuter le flemmard":2,"faire minette":2,"faire sa pute":2,"faire sprinter l\u2019unijambiste":2,"faire un caca nerveux":2,"fan de putain":2,"fant de pute":2,fdp:2,"ferme ta gueule":2,"fermer sa gueule":2,"fermer son claque merde":2,"fermer son claque-merde":2,fesse:2,fif:2,fifi:2,"fille \xe0 p\xe9d\xe9s":2,"film de boule":2,"film de boules":2,"fils de b\xe2tard":2,"fils de chien":2,"fils de chienne":2,"fils de garce":2,"fils de putain":2,"fils de pute":2,"fils de ta race":2,"fils-de-puterie":2,filsdeputerie:2,fion:2,fiotte:2,"fl\xfbte":2,foirade:2,foufoune:2,foufounette:2,"fouille-merde":2,foune:2,fourbir:2,fourrer:2,"foutage de gueule":2,fouteur:2,"fouteur de merde":2,foutoir:2,foutre:2,"foutre en l\u2019air":2,"foutre la merde":2,"foutre la paix":2,"foutre le camp":2,"foutre sur la gueule":2,foutriquer:2,"fuck me boots":2,"garage \xe0 bite":2,"garage \xe0 bites":2,gland:2,glaoui:2,glisser:2,gnasse:2,gniouf:2,gnoul:2,gnoule:2,gosse:2,gougnote:2,gougnoter:2,gourdin:2,gousse:2,graine:2,gros:2,grouille:2,gueule:2,gueuler:2,imbaisable:2,"imbitabilit\xe9":2,imbitable:2,"joual vert":2,journalope:2,"laisser pisser le m\xe9rinos":2,"langue de pute":2,latter:2,"le con de sa m\xe8re":2,"lib\xe9rer Mandela":2,limer:2,lopette:2,"l\xe8che-cul":2,"l\xe9cher le cul":2,"l\u2019avoir dans le cul":2,"manche \xe0 couilles":2,"mange-merde":2,"manger de la marde":2,maquerellage:2,matos:2,"mazouter le pingouin":2,mercon:2,merdasse:2,merde:2,merder:2,merderie:2,merdeux:2,"merdicit\xe9":2,merdier:2,"merdog\xe8ne":2,"mes couilles":2,"mes couilles le temps se brouille":2,mettre:2,"mettre dans la sauce":2,"mettre dans l\u2019os":2,"mettre la mis\xe8re":2,"mettre la quenelle dans le shaker":2,"mettre le nez de quelqu\u2019un dans sa merde":2,"mettre ses couilles sur la table":2,"mettre sur la gueule":2,mijole:2,minou:2,mollard:2,"mon cul":2,"mon vier":2,"mon vier, Madame Olivier":2,morue:2,motocultable:2,motoculter:2,"mouche \xe0 merde":2,mouille:2,moule:2,"moule \xe0 merde":2,"moule-bite":2,mouron:2,"ne plus se sentir pisser":2,"ne rien branler":2,"nique sa m\xe8re":2,"nique ta m\xe8re":2,niquer:2,"niquer sa m\xe8re":2,"nul \xe0 chier":2,nulach:2,"nulach\u2019":2,"n\u2019en avoir rien \xe0 foutre":2,"oh hisse, encul\xe9":2,"on s\u2019encule":2,ordure:2,"oui ou merde":2,"ouvrir sa grande gueule":2,pachole:2,panier:2,"papier-cul":2,"parachuter un S\xe9n\xe9galais":2,"pare-choc":2,"pare-chocs":2,"parle \xe0 mon cul, ma t\xeate est malade":2,"partir en couille":2,"pays-bas":2,"peau de zob":2,peler:2,"pelle \xe0 merde":2,"penser avec sa bite":2,"penser avec sa queue":2,"pet sauce":2,piment:2,pine:2,piner:2,pinocumettable:2,pinocumettre:2,"pisse-au-lit":2,"pisser de la copie":2,"pisser sa c\xf4telette":2,"pisser \xe0 la raie":2,pisseur:2,"plan cul":2,"planter le javelot dans la moquette":2,"plotte \xe0 cash":2,plume:2,poche:2,"pogne-cul":2,poil:2,"pomme \xe0 l\u2019huile":2,"pompe \xe0 merde":2,pomper:2,porc:2,"porter le pet":2,pougner:2,"pour les couilles du pape":2,pourrir:2,"pousser le repas de la veille":2,"pousser une gueulante":2,poutrer:2,putain:2,"putain con":2,"putain de":2,"putain de bordel de merde":2,"putain de merde":2,"putain de moine":2,"putain de sa m\xe8re":2,"putain de sa race":2,"putain de ta race":2,pute:2,"pute borgne":2,"pute de luxe":2,"p\xe9dale":2,"p\xe9doque":2,"p\xe9d\xe9":2,"p\xe9d\xe9 comme un Grec":2,"p\xe9lot":2,"p\xe9pom":2,"p\xe9ter dans la soie":2,"p\xe9ter le cul":2,"p\xe9ter les couilles":2,"p\xe9ter \xe0 la gueule":2,queue:2,queutard:2,"qu\u2019il aille se faire foutre":2,"qu\u2019ils aillent se faire foutre":2,"qu\u2019on l\u2019encule":2,"raccrocher \xe0 la gueule":2,radasse:2,ramoner:2,"ramoner le trou de balle":2,"ras la touffe":2,"ras le cul":2,"ras-la-moule":2,"ras-le-bonbon":2,"ras-les-fesses":2,"ratisser le bunker":2,refucker:2,"remuer la merde":2,"retourne aux asperges":2,"rien \xe0 enculer":2,"rien \xe0 foutre":2,riflard:2,rondelle:2,roubignole:2,roupette:2,"r\xe9curer la marmite":2,"r\xe9empaffer":2,"r\xe9enculer":2,"sa m\xe8re":2,"sac \xe0 merde":2,"saint-chr\xeame":2,"saint-ciboire":2,"saint-cr\xeame":2,"saint-sacrament":2,"saint-simonaque":2,salaud:2,"salle des f\xeates":2,salopard:2,salope:2,"sans-couilles":2,sarce:2,"saute au paf":2,"saute-au-paf":2,sauter:2,schleu:2,schnek:2,"se battre les couilles de":2,"se branler comme de l\u2019an quarante de":2,"se branler les couilles":2,"se casser la gueule":2,"se casser le cul":2,"se casser le tronc":2,"se casser les couilles":2,"se cirer le manche":2,"se cogner":2,"se contrecrisser":2,"se contrefoutre":2,"se c\xe2lisser":2,"se doigter":2,"se d\xe9senclaver la p\xe9ninsule":2,"se faire":1,"se faire enculer":2,"se faire la bite":2,"se faire pousser au cul":2,"se faire quelqu'un":1,"se faire reluire":2,"se foutre comme de l\u2019an quarante de":2,"se foutre de":2,"se foutre de la gueule de":2,"se geler le croupion":2,"se geler le fion":2,"se geler les couilles":2,"se les cailler":2,"se magner le cul":2,"se manger les couilles":2,"se ronger le cul \xe0 la vinaigrette":2,"se sortir les doigts du cul":2,"se taper":2,"se taper une queue":2,"se vider les couilles":2,"sent-la-pisse":2,shampoing:2,simonaque:2,souchien:2,souchienne:2,"sous-merde":2,sphincter:2,"suce-boules":2,"suce-m\xe9dailles":2,sucer:2,suceuse:2,"s\u2019archifoutre":2,"s\u2019astiquer le poireau":2,"s\u2019en badigeonner les testicules avec le pinceau de l\u2019indiff\xe9rence":2,"s\u2019en battre":2,"s\u2019en battre lec":2,"s\u2019en beurrer la raie":2,"s\u2019en branler":2,"s\u2019en cogner":2,"s\u2019en c\xe2lisser":2,"s\u2019en taper":2,"ta bouche":2,"ta gueule":2,"ta m\xe8re":2,"ta m\xe8re la pute":2,tabarnac:2,tabarnak:2,taboune:2,tafiole:2,tantouze:2,taper:2,tapette:2,tapettitude:2,tapiole:2,tarlouze:2,tartissure:2,"tasp\xe9":2,"tassep\xe9":2,techa:2,tepu:2,teub:2,teuch:2,teucha:2,tg:2,"tire-au-cul":2,tirelire:1,"tirer son coup":2,"tirer un coup":2,"touche \xe0 ton cul t\u2019auras des verrues":2,touffe:1,"tout de la gueule":2,trappe:1,"tremper son biscuit":1,treuf:2,troncher:2,"trou de balle":2,"trou de cul":2,"trou du cul":2,"trou du cul du monde":2,trouduc:2,trouducune:2,"trouer le cul":2,troufignoler:2,troufignolerie:2,troufignoliser:2,troufignon:2,truie:1,turluchon:2,turlutte:2,tuyau:1,"t\xe2ter":2,"t\xe9l\xe9phoner aux Congolais":2,"t\xeate de gland":2,"t\xeate de n\u0153ud":2,"va chier":2,"va lib\xe9rer Mandela":2,"va niquer ta m\xe8re":2,"va te faire empapaouter":2,"va te faire enculer":2,"va te faire foutre":2,"va te faire mettre":2,"va te faire une soupe d\u2019esques":2,"vais lib\xe9rer Mandela":2,valseuse:1,"vendre du piment":2,viarge:2,vieille:1,vier:2,"vier d\u2019\xe2ne":2,vtff:2,"y avoir une couille dans le potage":2,"y avoir une couille dans le p\xe2t\xe9":2,yeule:2,youp:2,youpin:2,youpine:2,zboob:2,zboube:2,"zgu\xe8gue":2,"\xe0 chier":2,"\xe0 couilles rabattues":2,"\xe0 la con":2,"\xe0 la mords-moi":1,"\xe0 la mords-moi-le-n\u0153ud":1,"\xe0 la roule-moi les couilles dans la laitue":2,"\xe0 un poil de cul":1,"\xe9burn\xe9":2,"\xe9couill\xe9":2,"\xe9trangler le borgne":2,"\xeatre chi\xe9":2,"\xeatre couillu":2,"\xeatre la f\xeate":2,"\xeatre mou de la bite":2,allupare:1,allupata:1,allupate:1,allupati:1,allupato:1,ammucchiata:1,ammucchiate:1,anale:2,anali:2,ano:2,arrapa:2,arrapamenti:2,arrapamento:2,arrapando:2,arrapano:2,arrapare:2,arrapate:2,arrapati:2,arrapato:2,arrusa:2,arruso:2,assatanata:2,assatanate:2,assatanati:2,assatanato:2,azz:2,azzo:2,bagasce:2,bagascia:2,bagassa:2,bagasse:2,baldracca:2,baldracche:2,baldraccone:2,baldracconi:2,barzotta:2,barzotte:2,barzotti:2,barzotto:2,bastardata:2,bastardate:2,bastarde:2,bastardi:1,battona:2,battone:2,"bel bocconcino":1,belini:2,belino:2,"bestia dio":2,bimbaminkia:2,bimbeminkia:2,bimbiminkia:2,bimbominkia:2,bocchina:2,bocchinara:2,bocchinare:2,bocchinari:2,bocchinaro:2,bocchini:2,bocchino:2,bofilo:2,boia:1,"boia dio":2,boiata:1,boiate:1,bonazza:2,bonazzo:2,bordello:2,bucaiola:2,bucaiolo:2,buciadiculo:2,buciodiculo:2,bucodiculo:2,budella:1,budello:1,budiulo:2,busona:2,busone:2,busoni:2,cacando:2,cacano:2,cacare:2,cacarella:2,cacarelle:2,cacarsi:2,cacasotto:2,cacata:2,cacate:2,cacca:2,caccata:2,cacchio:1,caccona:2,caccone:2,caciocappella:2,caciocappelle:2,cacone:2,cagare:2,cagata:2,cagate:2,cagati:2,cagato:2,cagna:1,"cagna madonna":2,cagne:1,cancara:2,cancare:2,cancari:2,cancaro:2,"cane dio":2,cannate:2,cannati:2,cannato:2,casci:1,castronaggine:2,castronata:2,castronate:2,castroneria:2,castronerie:2,cazzata:2,cazzate:2,cazzeggi:2,cazzeggia:2,cazzeggiano:2,cazzeggiare:2,cazzeggiate:2,cazzeggio:2,cazzi:2,cazziata:2,cazziate:2,cazziatona:2,cazziatone:2,cazzimma:2,cazzo:2,"cazzo di cane":2,cazzone:2,cazzoni:2,cazzuta:2,cazzute:2,cazzuti:2,cazzuto:2,cessa:2,cesse:2,cessi:2,cesso:2,checca:2,checche:2,checchetta:2,checchette:2,chiappa:1,chiappe:1,chiappona:2,chiappone:2,chiapponi:2,chiavabile:2,chiavando:2,chiavano:2,chiavare:2,chiavata:2,chiavate:2,chiavati:2,chiavato:2,chiaviamo:2,chiavo:2,ciccia:1,ciccio:1,cicciona:2,ciccione:2,ciccioni:2,ciolla:2,ciolle:2,ciucciacazzi:2,ciucciacazzo:2,ciula:2,ciulando:2,ciulano:2,ciulare:2,ciulata:2,ciulate:2,ciulati:2,ciulato:2,ciuli:2,ciulo:2,cogliona:2,coglionano:2,coglionare:2,coglionata:2,coglionate:2,coglionati:2,coglionato:2,coglione:2,coglioni:2,coito:2,coregge:2,coreggia:2,cornuta:1,cornute:2,cornuti:2,cornuto:1,cristo:1,crucca:2,crucche:2,crucchi:2,crucco:2,cuccando:2,cuccano:2,cuccata:2,cuccate:2,cuccati:2,cuccato:2,cucchi:2,cucco:2,cula:2,culatella:2,culatone:2,culatoni:2,culattella:2,culattina:2,culattine:2,culattoni:2,culattun:2,culi:1,cunnilingio:2,cunnilinguo:2,dio:1,"dio bestia":2,"dio boia":2,"dio cane":2,"dio infame":2,"dio legnetto":2,"dio lurido":2,"dio maiale":2,"dio merda":2,"dio porco":2,"dio porcone":2,"dio stronzo":2,"dio suino":2,diobestia:2,dioboia:2,diocane:2,dioinfame:2,diolegnetto:2,diolurido:2,diomaiale:2,diomerda:2,dioporco:2,dioporcone:2,diopporco:2,diostronzo:2,diosuino:2,ditalini:1,ditalino:2,durelli:2,durello:2,eiacula:2,eiaculando:2,eiaculano:2,eiaculare:2,eiaculazione:2,eiaculi:2,eiaculo:2,esticazzi:2,"facce da culo":2,"faccia da culo":2,falli:2,fallo:2,fanculo:2,"far girare i coglioni":2,fattone:2,fattoni:2,fava:1,fave:1,feci:1,femminucce:2,femminuccia:2,fessa:2,fessi:2,fesso:2,fica:2,fiche:2,figa:2,fighe:2,fighetta:2,fighette:2,fighetti:2,"figli di puttana":2,"figli di puttane":2,"figli di troia":2,"figli di troie":2,"figlia di puttana":2,"figlia di puttane":2,"figlia di troia":2,"figlia di troie":2,"figlie di puttana":2,"figlie di puttane":2,"figlie di troia":2,"figlie di troie":2,"figlio di puttana":2,"figlio di puttane":2,"figlio di troia":2,"figlio di troie":2,figo:1,figone:1,finocchione:2,finocchioni:2,fotte:2,fottendo:2,fottere:2,fottersene:2,fottersi:2,fottuta:2,fottute:2,fottuti:2,fottutissima:2,fottutissime:2,fottutissimi:2,fottutissimo:2,fottuto:2,fregna:2,fregnacce:2,fregnaccia:2,fregne:2,frocetti:2,frocetto:2,froci:2,frociaggine:2,frociata:2,frociate:2,frocio:2,frocione:2,frocioni:2,frosci:2,froscio:2,"fuori dai coglioni":2,"fuori dalle palle":2,gay:1,gesu:1,gnocca:2,gnocche:2,goldone:2,goldoni:2,grulla:1,grulle:1,grulli:1,grullo:1,guardona:2,guardone:2,guardoni:2,immerdato:2,impiccati:2,impiccato:1,"in culo alla balena":2,incazzano:2,incazzarsi:2,incazzata:2,incazzate:2,incazzati:2,incazzato:2,incazziamo:2,incazzo:2,incazzosa:2,incazzosamente:2,incazzose:2,incazzosi:2,incazzoso:2,inchiappetta:2,inchiappettando:2,inchiappettano:2,inchiappettare:2,inchiappettata:2,inchiappettate:2,inchiappettati:2,inchiappettato:2,inchiappetti:2,inchiappettiamo:2,inchiappetto:2,inchiavabile:2,incoglionirsi:2,incoglionita:2,incoglionite:2,incoglioniti:2,incoglionito:2,incula:2,inculando:2,inculano:2,inculare:2,inculata:2,inculate:2,inculati:2,inculato:2,inculi:2,inculiamo:2,inculo:2,inculone:2,inculoni:2,infame:2,"infame dio":2,infamedio:2,ingroppa:1,ingroppando:1,ingroppano:1,ingroppare:1,ingroppata:1,ingroppate:1,ingroppati:1,ingroppato:1,ingroppi:1,ingroppiamo:1,ingroppo:1,leccaciuffi:2,leccaculi:2,leccaculo:2,leccapalle:2,lecchina:2,lecchine:2,lecchini:2,lecchino:2,"legnetto dio":2,legnettodio:2,lofa:2,lofare:2,loffa:2,loffare:2,loffe:2,"lurida madonna":2,luridamadonna:2,"lurido dio":2,luridodio:2,madonna:2,"madonna cagna":2,"madonna lurida":2,"madonna prostituta":2,"madonna puttana":2,"madonna slabbrata":2,"madonna troia":2,"madonna vacca":2,madonnacagna:2,madonnalurida:2,madonnaprostituta:2,madonnaputtana:2,madonnaslabbrata:2,madonnatroia:2,madonnavacca:2,maiala:2,maialata:2,maialate:2,maiale:1,"maiale dio":2,maialedio:2,maiali:1,maialone:2,maialoni:2,mangiaparana:2,mangiaparane:2,mangiapatata:2,mangiapatate:2,marone:2,maroni:2,menano:2,menare:2,menata:2,menate:2,menati:2,menato:2,merda:2,"merda dio":2,merdacce:2,merdaccia:2,"merdaccia dio":2,merdacciadio:2,merdadio:2,merdai:2,merdaia:2,merdaio:2,merdaiola:2,merdaiole:2,merdaioli:2,merdaiolo:2,merdata:2,merdate:2,merdina:2,merdine:2,merdone:2,merdoni:2,merdosa:2,merdosamente:2,merdose:2,merdosi:2,merdoso:2,meretrice:2,mezzasega:2,mezzeseghe:2,mignotta:2,mignotte:2,mignottone:2,mignottoni:2,minchia:2,minchiata:2,minchie:2,minchiona:2,minchionando:2,minchionare:2,minchionata:2,minchione:2,minchioni:2,mocciosa:2,mocciose:2,mocciosi:2,moccioso:2,mona:2,monata:2,monate:2,mussa:2,musse:2,mussi:2,musso:2,negra:2,negre:2,negretta:2,negrette:2,negretti:2,negretto:2,negri:2,nerchia:2,nerchie:2,padulo:1,palle:1,pallosa:2,pallose:2,pallosi:2,palloso:2,pappone:2,papponi:2,paraculi:2,paraculo:2,patonza:2,patonze:2,pecorina:2,pecorine:2,pederasta:2,pederasti:2,pene:2,peni:2,picio:2,pinciano:2,pinciare:2,pinciata:2,pinciate:2,pinciati:2,pinciato:2,pippa:2,pippaiola:2,pippaiole:2,pippaioli:2,pippaiolo:2,pipparola:2,pipparole:2,pipparoli:2,pipparolo:2,pippe:2,pippetta:2,pippette:2,pippona:2,pippone:2,pipponi:2,pirla:1,pirlata:1,pirlate:1,pirlona:1,pirlone:1,pirloni:1,piscia:2,pisciando:2,pisciare:2,pisciasotto:2,pisciata:2,pisciate:2,pisciati:2,pisciato:2,pisciatona:2,pisciatone:2,piscio:2,pisciona:2,piscione:2,piscioni:2,pisciosa:2,pisciose:2,pisciosi:2,piscioso:2,pisella:2,piselle:2,pistolotto:1,pomiciare:1,pomiciata:1,pompinara:2,pompinare:2,pompinari:2,pompinaro:2,pompini:2,pompino:2,"porca eva":2,"porca madonna":2,"porca puttana":2,"porca troia":2,porcamadonna:2,porcapputtana:2,porcaputtana:2,porcatroia:2,porche:2,porci:1,porco:1,"porco cristo":2,"porco dio":2,"porco due":2,"porco ges\xf9":2,"porco l\xe0":2,"porco qua":2,"porco zio":2,porcocane:1,porcocazzo:2,porcoddio:2,porcodio:2,"porcone dio":2,porconedio:2,porcozio:2,porcozzio:2,potta:2,prostituirsi:2,prostituite:2,prostituito:2,"prostituta madonna":2,prostitutamadonna:2,pucchiacchiera:2,pucchiacchiere:2,pula:2,pulotti:2,pulotto:2,puppa:2,puppalo:2,puppami:2,puttana:2,"puttana eva":2,"puttana madonna":2,puttanaeva:2,puttanaio:2,puttanamadonna:2,puttanata:2,puttanate:2,puttane:2,puttaniere:2,puttanona:2,puttanone:2,puttanoni:2,recchia:2,recchione:2,recchioni:2,ricchione:2,ricchioni:2,rincoglionimento:2,rincoglionire:2,rincoglionirsi:2,rincoglionita:2,rincoglionite:2,rincoglioniti:2,rincoglionito:2,rizzarsi:1,rompiballe:2,rompicazzo:2,rompicoglioni:2,rompimaroni:2,rompimarroni:2,rompipalle:2,sardegnola:2,sardegnolo:2,sballato:1,sbattersi:1,sbatti:1,sbatto:1,sbocchinara:2,sbocchinare:2,sbocchinari:2,sbocchinaro:2,sbocchini:2,sbocchino:2,sbora:2,sboro:2,sborona:2,sborone:2,sborra:2,sborrare:2,sborrata:2,sborrate:2,sborro:2,sborrone:2,sburra:2,sburrata:2,sburrate:2,sburrati:2,sburrato:2,sburro:2,scacazza:2,scacazzando:2,scacazzano:2,scacazzare:2,scacazzata:2,scacazzate:2,scacazzi:2,scacazziamo:2,scacazzo:2,scagazza:2,scagazzando:2,scagazzano:2,scagazzare:2,scagazzata:2,scagazzate:2,scagazzi:2,scagazziamo:2,scagazzo:2,scappella:2,scappellamenti:2,scappellamento:2,scappellano:2,scappellare:2,scappellata:2,scappellate:2,scappellati:2,scappellato:2,scassacazzi:2,scassacazzo:2,scassaminchia:2,scassapalle:2,scazza:2,scazzando:2,scazzano:2,scazzare:2,scazzata:2,scazzate:2,scazzati:2,scazzato:2,scazzi:2,scazziamo:2,scazzo:2,scema:2,scemata:2,scemate:2,sceme:2,scemi:2,scemo:2,schiappa:2,schiappe:2,scoglionamento:2,scoglionandosi:2,scoglionare:2,scoglionarsi:2,scoglionata:2,scoglionate:2,scoglionati:2,scoglionato:2,scopamica:2,scopamiche:2,scopamici:2,scopamico:2,scopata:1,scopate:1,scopati:2,scopato:1,scoreggia:2,scoreggiare:2,scorreggia:2,scorreggiare:2,scrofa:1,scrofe:1,scrotale:2,scroti:2,scroto:2,sculata:2,sculate:2,sculati:2,sculato:2,secchiona:2,secchione:2,secchioni:2,sedere:1,sederi:1,sederini:1,sederino:1,segaiola:2,segaiole:2,segaioli:2,segaiolo:2,segarsi:2,seghe:1,segone:2,segoni:2,sfiga:1,sfigare:2,sfigata:2,sfigate:2,sfigati:2,sfigato:2,sfighe:1,sgrillettando:2,sgrillettano:2,sgrillettare:2,sgrillettarsi:2,sgrillettata:2,sgrillettate:2,sgrillettati:2,sgrillettato:2,slabbrata:2,"slabbrata madonna":2,slabbratamadonna:2,slabbrato:2,slinguano:2,slinguare:2,slinguata:2,slinguate:2,slinguati:2,slinguato:2,smandrappano:2,smandrappata:2,smandrappate:2,smandrappati:2,smandrappato:2,smerda:2,smerdando:2,smerdare:2,smerdata:2,smerdato:2,"socc'mel":2,soccia:2,socmel:2,sodomita:2,sodomiti:2,soffocotti:2,soffocotto:2,sorca:2,sorce:2,sorcia:2,sorice:1,spaccamaroni:2,spaccamarroni:2,spantana:1,spantanando:1,spantanano:1,spantanare:1,spantani:1,spantano:1,sperma:2,spinelli:1,spinello:1,spompina:2,spompinando:2,spompinao:2,spompinara:2,spompinare:2,spompinari:2,spompinaro:2,spompinata:2,spompinate:2,spompinati:2,spompinato:2,spompini:2,spompino:2,sputtanando:2,sputtanano:2,sputtanare:2,sputtanate:2,sputtani:2,squillo:1,squinzia:2,squinzie:2,sticazzi:2,sticchio:2,stocazzo:2,stronza:2,stronzaggine:2,stronzaggini:2,stronzata:2,stronzate:2,stronze:2,stronzeggiare:2,stronzetta:2,stronzette:2,stronzetti:2,stronzetto:2,stronzi:2,stronzio:1,stronzo:2,"stronzo dio":2,stronzodio:2,stronzone:2,stronzoni:2,stupidi:1,stupido:1,suca:2,sucando:2,sucano:2,sucanti:2,sucare:2,sucata:2,sucate:2,sucato:2,succhi:1,succhia:1,succhiacazzi:2,succhiacazzo:2,succhio:1,suina:2,suine:2,suini:1,suino:1,"suino dio":2,suinodio:2,superdotata:1,superdotate:1,superdotati:1,superdotato:1,sveltina:2,sveltine:2,svergina:2,sverginando:2,sverginano:2,sverginare:2,sverginata:2,sverginate:2,sverginati:2,sverginato:2,tarzanelli:2,tarzanello:2,tega:2,teghe:2,tegona:2,tegone:2,terga:2,terghe:2,terrona:2,terrone:2,terroni:2,terronia:2,terrun:2,"testa di cazzo":2,"testa di merda":2,"teste di cazzo":2,"teste di merda":2,testicoli:2,testicolo:2,tetta:2,tettata:2,tettate:2,tette:2,tettina:2,tettine:2,tettona:2,tettone:2,tope:1,topona:1,topone:1,troia:2,"troia madonna":2,troiaio:2,troiamadonna:2,troiata:2,troiate:2,troie:2,troiona:2,troione:2,troioni:2,trombamica:2,trombamiche:2,trombamici:2,trombamico:2,trombando:2,trombano:2,trombare:2,trombata:2,trombate:2,trombati:2,trombato:2,trombi:2,uccella:2,uccellone:2,uccelloni:2,"vacca madonna":2,vaccamadonna:2,vaccona:2,vaccone:2,vaffanculo:2,vaginale:2,vagine:2,"vai a fare in culo":2,vatteneaffanculo:2,verghe:1,vulve:2,vulvetta:2,vulvette:2,zebedei:2,zebedeo:2,zinna:2,zinne:2,zinnona:2,zinnone:2,zoccola:2,zoccole:2,zoccoletta:2,zoccolette:2,zoccolona:2,zoccolone:2,"Filha da puta":2,"Filho da puta":2,arrombada:2,arrombado:2,"baba-ovo":2,babaca:2,babaovo:2,bagos:2,baitola:2,bebum:2,besta:2,bicha:2,biscate:2,bixa:2,boazuda:2,bobo:1,"bob\xe3o":1,boceta:2,boco:2,"boc\xf3":2,boiola:2,bolagato:2,boquete:2,bosseta:2,bosta:2,bostinha:1,brioco:2,bronha:2,buceta:2,bugre:1,bunda:2,bunduda:2,burra:2,burro:1,bussanga:2,busseta:2,caceta:2,cacete:2,cachorra:2,cachorro:1,cadela:1,caga:2,cagona:2,"cag\xe3o":2,canalha:1,caralho:2,casseta:2,cassete:2,checheca:2,chereca:2,chifruda:2,chifrudo:2,chochonho:1,chochota:2,chota:2,coco:1,corna:2,corno:2,cretina:2,cu:2,"cuz\xe3o":2,"desgra\xe7a":2,"desgra\xe7ada":2,"desgra\xe7ado":2,escrota:2,escroto:1,esporro:1,"fiof\xf3":2,foda:2,fode:2,fodida:2,fodido:2,frango:2,fudendo:2,fuder:2,fudida:2,fudido:2,fuleira:2,galinha:1,grelinho:2,grelo:2,idiotice:2,jossa:2,kenga:2,macaco:1,machona:2,"man\xe9":2,mijada:2,mijado:2,mijo:2,mizera:2,mocrea:2,mocreia:2,"ot\xe1ria":2,"ot\xe1rio":2,pau:1,peido:2,pentelha:2,pentelho:2,pepeka:2,perereca:1,peru:1,pica:2,piranha:1,piroca:2,piru:2,porra:2,punheta:2,"puxa-saco":2,puxasaco:2,"p\xeanis":1,rabo:1,rabuda:2,rabudo:2,rabudona:2,"rabud\xe3o":2,"rab\xe3o":2,rapariga:2,recalcada:2,recalcado:2,retardada:2,retardado:2,rola:1,rolinha:1,rosca:1,safada:2,safado:2,"sapat\xe3o":2,siririca:2,tarada:2,tezuda:2,tezudo:2,"tez\xe3o":2,"tiri\xe7a":2,toba:2,trocha:2,troucha:2,trouxa:2,troxa:2,vaca:1,vagabunda:2,vagabundo:2,vagaranha:2,veada:2,veado:1,"vead\xe3o":2,viada:2,viadinho:2,viado:2,"viad\xe3o":2,"v\xedado":2,xana:2,xavasca:2,xereca:2,xerereca:2,xexeca:2,xochota:2,xota:2,xoxota:2,"\xe2nus":1,badalhoca:2,badalhoco:2,breque:1,broche:2,"cabr\xe3o":2,canalhas:1,caralhinho:2,cona:2,conas:2,"dar uma queca":2,"fazer um bico":2,"filha da puta":2,"foda-se":2,foder:2,fufa:1,grelos:1,"olho do cu":2,orgasmo:2,pachacha:2,pancada:1,paneleiro:1,pila:1,pilinha:2,"pita que te pariu":2,"p\xf3 caralho":2,queca:1};const Qb=/^[^\s@]+@[^\s@]+\.[^\s@]+$/im,Jb=/\p{Emoji_Presentation}/imu,Zb=/\d{3}/im;const eA=/\s/gimu;const tA=[async function(e,t){if("string"!==typeof e||"string"!==typeof t)throw new Error("Both arguments must be strings");const a="checkForBigEditDistance",i=await Ub(a),r=(0,$b.x)(e,t),n={};return r>i.threshhold&&i.enabled&&(n.count=r,n.pass=n.count<=i.threshhold,n.originalTerm=t,n.editedTerm=e),await jb(a,n),!(null===i||void 0===i||!i.enabled)&&r>i.threshhold},async function(e){if("string"!==typeof e)throw new Error("Argument must be a string");const t="checkForSanitizedCharacters";(0,Wb.Z)()&&await a.e(11929).then(a.bind(a,11929));const i=await Ub(t),r=new Intl.Segmenter,n=Array.from(r.segment(e,{granularity:"grapheme"})).map((e=>e.segment)).join(""),o={includesEmailAddress:Qb.test(n),includesPhoneNumber:Zb.test(n),includesEmoji:Jb.test(n)};if(null!==i&&void 0!==i&&i.enabled){const a=Object.keys(o).filter((e=>o[e])),i={};return i.pass=0===a.length,i.editedTerm=e,jb(t,i),a.length>0}return!1},async function(e){if("string"!==typeof e)throw new Error("Argument must be a string");const t="checkForTooManySpaces";(0,Wb.Z)()&&await a.e(11929).then(a.bind(a,11929));const i=await Ub(t);if(null!==i&&void 0!==i&&i.enabled){const a=new Intl.Segmenter,r=Array.from(a.segment(e,{granularity:"word"})).map((e=>e.segment)).join("").match(eA)||[],n={};return n.count=r.length,n.pass=n.count<=i.threshhold,n.editedTerm=e,jb(t,n),r.length>i.threshhold}return!1},async function(e){if("string"!==typeof e)throw new Error("Argument must be a string");const t="checkForProfanity";(0,Wb.Z)()&&await a.e(11929).then(a.bind(a,11929));try{const a=await Ub(t);if(null!==a&&void 0!==a&&a.enabled){const i=new Intl.Segmenter("en",{granularity:"word"}),r=Array.from(i.segment(e)).map((e=>e.segment)).filter((e=>" "!==e&&""!==e)).map((e=>e.toLowerCase())),n=Object.keys(Xb).filter((e=>r.includes(e))),o={};return o.pass=n.length<a.threshhold,o.editedTerm=e,jb(t,o),n.length>0}}catch(i){}return!1}];async function aA(e){if(!Array.isArray(e))throw new Error("editedValue must be an array");try{if(1===e.length){var t;const a=e[0],i=null===a||void 0===a?void 0:a.editedValue,r=null===a||void 0===a||null===(t=a.origValue)||void 0===t?void 0:t.text,n=(await Promise.all(tA.map((e=>e(i,r))))).some((e=>e));if(n){const e=await qb();yi.A.log({editedTerm:i,originalTerm:r,badActorData:e,type:"quick_name_review"})}return n}const a=e.filter((e=>"FIELD"===e.elementType)).map((e=>{var t,a;return{editedText:null===e||void 0===e||null===(t=e.fieldValueArg)||void 0===t||null===(a=t.origValue)||void 0===a?void 0:a.text,originalText:null===e||void 0===e?void 0:e.originalValue}})),i=(await Promise.all(a.map((e=>Promise.all(tA.map((t=>t(null===e||void 0===e?void 0:e.editedText,null===e||void 0===e?void 0:e.originalText)))))))).some((e=>e.some((e=>e))));if(i){const e=await qb();yi.A.log({terms:a,badActorData:e,type:"full_name_review"})}return i}catch(a){return console.error("Error in saveInterceptor",a),!1}}const iA=(0,y.Ay)("rip:record-enhancement-service");async function rA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";const n=`${qe.Xx}/record-enhancement/task`,o={language:e,placeRepId:t,task:a,surname:i,givenName:r};return"1950 Census Household Correction"!==a&&"1950 Census Header Correction"!==a||(o.recordTypeConceptId=123363),ra.Ay.post(n,o,{headers:qe.b3})}async function nA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=`${qe.Xx}/record-enhancement/task/${e}`;return ra.Ay.get(t,{headers:qe.b3})}async function oA(e,t,a){const i=parseInt(t.retry,10);if(e.taskData)return e.taskData;for(let r=0;r<500;r++){const t=await nA(e.requestId,a);if(200===(null===t||void 0===t?void 0:t.status))return t.data.taskData;if(204===(null===t||void 0===t?void 0:t.status))return null;setTimeout((()=>{}),i)}throw new Error("NoMoreTasks")}async function sA(e){let{placeCode:t,language:a,isFirstRequest:i,apid:r,action:n,taskType:o,surname:s}=e,l=null;if(i){const e=await async function(e,t,a){const i=a?`&startValue=${a}`:"",r=`${qe.Xx}/record-enhancement/task/current?action=${e}${i}&task=${encodeURIComponent(t)}`;return ra.Ay.get(r,{headers:qe.b3})}(n,o,s);if(204===(null===e||void 0===e?void 0:e.status))throw new Error("NoMoreTasks");l=null===e||void 0===e?void 0:e.data}else l=await async function(e,t){let a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=arguments.length>4?arguments[4]:void 0;try{if(i||!r){const{data:i,headers:r}=await rA(e,t,n);a=await oA(i,r,!0)}else{const{data:e,headers:t}=await lA(r,!0,n);a=await oA(e,t,!1)}return a}catch(l){if(404===(null===l||void 0===l?void 0:l.status))throw new Error("TaskExpired");if(/NoMoreTasks/.test(l.message))throw new Error("NoMoreTasks");var o,s;throw(0,$e.Yt)(l,r,{codeId:668,status:null===l||void 0===l||null===(o=l.response)||void 0===o?void 0:o.status,responseBody:null===l||void 0===l||null===(s=l.response)||void 0===s?void 0:s.data}),new Error(l)}}(a,t,i,r,o);if(!l)throw new Error("NoMoreTasks");return l.slsImageInfo&&"string"===typeof l.slsImageInfo&&(l.slsImageInfo=JSON.parse(l.slsImageInfo)),l}async function lA(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0;if(e){const i=`${qe.Xx}/record-enhancement/apid/${e}/done?requestNext=${t}&task=${encodeURIComponent(a)}`,r=await ra.Ay.post(i,{},{headers:qe.b3});if(t&&204===(null===r||void 0===r?void 0:r.status))throw new Error("NoMoreTasks");return r}return null}function dA(e,t,a){return{partitionKey:e,id:t,elementType:"FIELD",opCode:"SET_FIELD_TYPE",fieldTypeArg:a}}const cA=(e,t,a)=>{const i=[];t.forEach((t=>{i.push(dA(e,t,"WORD"))})),ra.Ay.post(`${qe.Xx}/record-enhancement/updates?task=${encodeURIComponent(a)}`,i,{headers:qe.b3})},uA=async e=>{let{partitionKey:t,id:a,edit:i,fieldValues:r,isFixed:n,newFieldType:o,isFinished:s=!1,requestNext:l=!1,placeRepId:d}=e;const c=await Gb();iA("saveEdit:badActorFlag",c),null!==r&&void 0!==r&&r[0]&&(r[0].editedValue=i);if(!(!!(n&&c.isOn&&h.M9)&&await aA(r))){const e=[];return o&&e.push(dA(t,a,o)),"WORD"!==o&&e.push(function(e,t,a,i,r){const n=r?In.LX:In.sw;return{partitionKey:e,id:t,elementType:a,opCode:"ADD_FV",fieldValueArg:{id:(0,$e.Vs)(),origValue:{text:i,attribution:{comment:"",reasonId:n,app:"NAME_WEB"}}}}}(t,a,"FIELD",i,n)),iA("saveEdit:fieldValue:payload",e),d&&ra.Ay.post(`/service/volunteer/edge/widget-exp/involvement/project/${d}`),ra.Ay.post(`${qe.Xx}/record-enhancement/updates?isFinished=${s}&requestNext=${l}`,e,{headers:qe.b3})}},hA=async function(e,t){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4?arguments[4]:void 0;iA("slsPayload",t);const n=await Gb();iA("badActorFlag",n);if(!(!(!n.isOn||!h.M9)&&await aA(t))){const e=t.map((e=>("FIELD"===e.elementType&&delete e.originalValue,e)));return iA("strippedSlsPayload",e),ra.Ay.post(`${qe.Xx}/record-enhancement/updates?isFinished=${a}&requestNext=${i}&task=${encodeURIComponent(r)}`,e,{headers:qe.b3})}},pA=(e,t)=>ra.Ay.post(`${qe.Xx}/record-enhancement/stats/task/${encodeURIComponent(t)}/ark/${e}`,{},{headers:qe.b3});function mA(e){let{partitionKey:t,taskType:a,action:i}=e;if(!t||!a||!i)throw new Error("Missing required parameters");if("fixed"!==i&&"reviewed"!==i&&"not-a-person"!==i)throw new Error('Invalid action type. Valid types are "fixed", "not-a-person" or "reviewed"');if("Family Review"!==a&&"Full Name Review"!==a&&"Name Correction"!==a)throw new Error('Invalid task type. Valid types are "Name Correction", "Name Review", or "Family Review"');"fixed"!==i&&"reviewed"!==i&&"not-a-person"!==i||(_b(a),Mb(a)),"Name Correction"!==a&&ra.Ay.post(`${qe.Xx}/record-enhancement/stats`,{action:i,artifactARK:t,task:a,count:1},{headers:qe.b3})}const gA=e=>{if(null===e||void 0===e||!e.length)return{panX:.5,panY:.5};const{maxX:t,minX:a,maxY:i,minY:r}=bA(e);return{panX:(t+a)/2,panY:(i+r)/2}},vA=(e,t)=>{if(null===e||void 0===e||!e.length)return 1;const{maxX:a,minX:i,maxY:r,minY:n}=bA(e);return yA(a,i,r,n,t)};function yA(e,t,a,i){let r=1;const n=e-t,o=a-i;return arguments.length>4&&void 0!==arguments[4]&&arguments[4]?(n<.3&&o<.3&&(r=2),n<.15&&o<.15&&(r=4),n<.08&&o<.08&&(r=7)):(n<.6&&o<.6&&(r=1),n<.4&&o<.4&&(r=2),n<.3&&o<.3&&(r=3),n<.2&&o<.2&&(r=4),n<.1&&o<.1&&(r=5),n<.05&&o<.05&&(r=6)),r}function fA(e){return{max:Math.max(...e),min:Math.min(...e)}}function bA(e){const t=e.filter(Boolean),{max:a,min:i}=fA(t.flatMap((e=>[e.x1,e.x2]))),{max:r,min:n}=fA(t.flatMap((e=>[e.y1,e.y2])));return{maxX:a,minX:i,maxY:r,minY:n}}const AA=["aj","aq","av","az","cy","dy","eh","ek","fy","gy","ib","if","ih","ii","ij","ik","iq","iu","iv","iw","ix","iy","jy","ko","ku","ky","oc","og","oh","oj","ok","oq","ov","oy","oz","qa","qi","qo","qy","sy","uc","uf","ug","uh","uj","uk","uq","uu","uv","uw","ux","uy","uz","vu","vy","wu","wy","xa","xi","xu","xy","yb","yc","yd","yf","yg","yh","yi","yj","yk","ym","yp","yq","yr","yt","yv","yw","yx","yy","yz"];let wA=null,TA=null;const IA=e=>{let t="(";for(let a=0;a<e.length;a++)t+=0===a?e[a]:`|${e[a]}`;return t+=")",new RegExp(t,"gi")};function SA(e){for(let t=0;t<e.length;t++)for(let a=0;a<e.length;a++)AA.push(`${e[t]}${e[a]}`)}async function EA(e){const t=[...new Set(e.map((e=>e.ark)))],a=await Promise.all(t.map((async e=>{var t;const a=await(0,Se.pr)({partitionKey:e,fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],includeActions:!1}),i=null===a||void 0===a||null===(t=a.elements[0])||void 0===t?void 0:t.collectionId;return i?+i:"No collection ID available"})));return[...new Set(a)]}SA(["b","c","d","f","g","h","j","k","l","m","n","p","q","r","s","t","v","w","x","y","z"]),SA(["a","e","i","o","u","y"]),SA(["0","1","2","3","4","5","6","7","8","9"]),wA=IA(AA),TA=IA(["cpl","srx","tkt","pbm","slp","ch"]);const kA=(e,t)=>e.map((e=>{let a=`ark: ${e.ark}, editedValue: ${e.editedValue}, originalValue: ${e.originalValue}`;return"garbage"===t&&(a+=`, spamConfidenceRating: ${e.spamConfidenceRating}`),a})),CA=(e,t)=>e.current?e.current.map((e=>{const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{min:5};const a={...t};if("object"===typeof t&&"number"===typeof t.min&&t.min>=0&&(a.min=t.min),e.length<a.min)return!1;let i=0,r=e.match(/([a-zA-Z]{2})(?=(.*?\1){2})/g);if(Array.isArray(r)){r=function(e){const t={},a=[];for(let i=0;i<e.length;i++)t[e[i]]||(t[e[i]]=!0,a.push(e[i]));return a}(r);const t=IA(r);let a=t.exec(e);for(;a;)i++,a=t.exec(e)}let n="";for(let s=0;s<e.length-1;s++){n=e.substr(s,2);let t=wA.exec(n);for(;t;)i++,t=wA.exec(n)}let o=TA.exec(e);for(;o;)3===o[0].length?i-=2:2===o[0].length&&i--,o=TA.exec(e);return i/(e.length-1)}(e.editedValue);return a>=t&&{ark:e.ark,editedValue:e.editedValue,originalValue:e.originalValue,spamConfidenceRating:a}})).filter(Boolean).filter((e=>e.editedValue.trim()!==e.originalValue.trim())):[];async function xA(e){let{cisId:t,consecutiveSpamEpisodes:a,taskCache:i,editThreshold:r,garbageThreshold:n,incrementConsecutiveSpam:o}=e;const s=CA(i,n),l=(e=>{var t;return e.current?[...null===(t=e.current)||void 0===t?void 0:t.filter((e=>Xb[e.editedValue.toLowerCase()])).map((e=>({ark:e.ark,editedValue:e.editedValue,originalValue:e.originalValue})))]:[]})(i);if(s.length===r)o("edit"),EA(s).then((e=>{(async(e,t,a,i)=>{const[r,n,o]=kA(i,"garbage"),s={cisId:e,collectionIds:t,consecutiveEditSpamEpisodes:a,message:"garbage edit spamming on quick name review",task1:r,task2:n,task3:o};yi.A.log(s)})(t,e,null===a||void 0===a?void 0:a.current.count,s)})).catch((e=>console.error("Error logging garbage spam:",e))),i.current=[];else if(l.length===r)o("edit"),EA(l).then((e=>{((e,t,a,i)=>{const[r,n,o]=kA(i),s={cisId:e,collectionIds:t,consecutiveEditSpamEpisodes:a,message:"cuss edit spamming on quick name review",task1:r,task2:n,task3:o};yi.A.log(s)})(t,e,null===a||void 0===a?void 0:a.current.count,l)})).catch((e=>console.error("Error logging cuss spam:",e))),i.current=[];else{var d;a.current={type:"edit",count:0},i.current=null===(d=i.current)||void 0===d?void 0:d.slice(1-r)}}var YA=a(89276);function NA(e,t){var a;return e.current?[...null===(a=e.current)||void 0===a?void 0:a.filter((e=>e.actionType===t))]:[]}function RA(e){var t,a,i;let{cisId:r,consecutiveSpamEpisodes:n,incrementConsecutiveSpam:o,taskCache:s,threshold:l,type:d}=e;if((null===s||void 0===s||null===(t=s.current)||void 0===t?void 0:t.length)<l)return;const c=null===s||void 0===s||null===(a=s.current)||void 0===a||null===(i=a.slice(-1))||void 0===i?void 0:i[0],u=NA(s,d),h="match"===d?null:u.map((e=>e.originalValue)).join(", ");const p=(0,YA.Ovd)(u.slice(-1)[0].timestamp,u[0].timestamp);u.length===l&&(o(d),EA(u).then((e=>{((e,t,a,i,r,n)=>{const o={cisId:e,collectionIds:t,consecutiveSpamEpisodes:a,message:`${n} same-type spamming on quick name review`,spamDurationInSeconds:r};i&&(o.originalValues=i),yi.A.log(o)})(r,e,null===n||void 0===n?void 0:n.current.count,"match"!==d&&{originalValues:h},p,c.actionType)})).catch((e=>console.error("Error logging garbage spam:",e))),s.current=[])}function PA(e){var t,a,i,r;let{cisId:n,count:o,frequencySpamData:s,interval:l,taskCache:d,setFrequencySpamData:c,type:u}=e;const{isFrequencySpamming:h}=s;if((null===(t=d.current)||void 0===t?void 0:t.length)<o)return;const p=null===(a=d.current)||void 0===a||null===(i=a.slice(-1))||void 0===i?void 0:i[0],m=((e,t,a)=>{const i=NA(e,a),r=Date.now();return[...null===i||void 0===i?void 0:i.filter((e=>(0,YA.Ovd)(r,e.timestamp)<=t))]})(d,l,u),g=!1===h&&m.length===o,v=(null===(r=d.current)||void 0===r?void 0:r.length)-o;var y;g&&c({isFrequencySpamming:!0,spamStartTime:d.current[v].timestamp,spamStartIndex:(null===(y=d.current)||void 0===y?void 0:y.length)-o});if(!0===h&&m.length<o){var f;const e=(0,YA.Ovd)(p.timestamp,s.spamStartTime),t=(null===(f=d.current)||void 0===f?void 0:f.length)-s.spamStartIndex;EA(d.current).then((a=>{((e,t,a,i,r)=>{const n={cisId:t,collectionIds:a,message:`${e} frequency spamming on quick name review`,spamDurationInSeconds:i,totalButtonPressCount:r};yi.A.log(n)})(p.actionType,n,a,e,t)})).catch((e=>console.error("Error logging garbage spam:",e))),d.current=[],c({isFrequencySpamming:!1,spamStartTime:null,spamStartIndex:null})}}const OA=(0,i.createContext)({});function _A(e){let{children:t}=e;const a=(0,i.useRef)([]),r=(0,i.useRef)([]),n=(0,i.useRef)([]),o=(0,i.useRef)({type:"",count:0}),{config:s,isOn:l}=(0,L.u)("rip_sharedImageViewer_flaggedUserDetection_"),{cisId:d}=(0,Wd.useUser)(),c=+(null===s||void 0===s?void 0:s.intervalInSeconds)||6,u=+(null===s||void 0===s?void 0:s.spamCountWithinInterval)||10,h=+(null===s||void 0===s?void 0:s.editCumulativeThreshold)||3,p=+(null===s||void 0===s?void 0:s.garbageDetectionThreshold)||.51,m=+(null===s||void 0===s?void 0:s.matchCumulativeThreshold)||20,g=+(null===s||void 0===s?void 0:s.notPersonCumulativeThreshold)||6,[v,y]=(0,i.useState)({isFrequencySpamming:!1,spamStartTime:null,spamStartIndex:null}),f=e=>{const{type:t,count:a}=o.current;e===t?o.current.count=a+1:o.current={type:e,count:1}},b=(0,i.useCallback)((e=>{if(l&&e){r.current=[...r.current||[],e],n.current=[...n.current||[],e];try{const i=null===e||void 0===e?void 0:e.actionType;if(o.current.type!==i&&(o.current={type:"",count:0}),"edit"===i){var t;if(a.current=[...a.current,e],(null===(t=a.current)||void 0===t?void 0:t.length)<h)return;xA({cisId:d,consecutiveSpamEpisodes:o,taskCache:a,editThreshold:h,garbageThreshold:p,incrementConsecutiveSpam:f})}else{const e="match"===i?m:g;PA({cisId:d,count:u,frequencySpamData:v,interval:c,taskCache:r,setFrequencySpamData:y,type:i}),RA({cisId:d,consecutiveSpamEpisodes:o,incrementConsecutiveSpam:f,taskCache:n,threshold:e,type:i}),a.current=[]}}catch(i){console.error("Error occurred in checkForFlaggedBehavior:",i)}}}),[d,h,v,p,c,l,m,g,u]);return(0,i.useEffect)((()=>{const e=setInterval((function(){var e,t;if(!l||!r.current.length)return;const a=null===(e=r.current)||void 0===e||null===(t=e.slice(-1))||void 0===t?void 0:t[0],i=null===a||void 0===a?void 0:a.actionType;PA({cisId:d,count:u,frequencySpamData:v,interval:c,taskCache:r,setFrequencySpamData:y,type:i})}),1e3);return()=>clearInterval(e)}),[d,v,c,l,m,g,u]),(0,k.Y)(OA.Provider,{value:{checkForFlaggedBehavior:b}},t)}const FA=()=>{const e=(0,i.useContext)(OA);if(void 0===e)throw new Error("FlaggedUserContext must be used within a FlaggedUserContextProvider. If writing a test, use <StateProvider> from testUtils.js");return e},DA={name:"mrqpu",styles:"display:flex;flex-flow:column nowrap;justify-content:center;align-items:center;text-align:center;margin-top:16px;margin-inline-end:0;margin-bottom:16px;margin-inline-start:0;"};function MA(e){let{disabled:t,title:a,icon:r,handleOnClick:n,color:o,emphasis:s,iconDirection:l="up",size:d="md",loading:c,description:u=""}=e;const h=(0,jn.Ay)();return(0,k.Y)("div",{css:DA},(0,k.Y)(ee.A,{title:a,Icon:r,onClick:n,iconDirection:l,color:o,emphasis:s,size:d,disabled:t||c,description:u}),"md"===d&&h({default:(0,k.Y)(te.A,{size:"sm"},a),md:(0,k.Y)(te.A,null,a)}),"sm"===d&&(0,k.Y)(i.Fragment,null,(0,k.Y)(te.A,{size:"sm"},a)),"lg"===d&&(0,k.Y)(te.A,{size:"sm"},a))}function HA(e){let{disableBackButton:t,goToNextTask:a,goToPreviousTask:r,handleSave:n,handleClickNotAPerson:o,focusOnEditField:s,index:l,loading:d,sharedField:c}=e;const[u]=(0,P.B)(),{checkForFlaggedBehavior:h}=FA(),{query:p}=(0,G.A)(),m=(0,ci.Ay)()({default:!0,md:!1}),g=(0,i.useCallback)((()=>{const e=()=>(0,k.Y)(MA,{disabled:t,title:u("navigation.back-button","Back"),icon:pe.A,handleOnClick:r,color:"blue",emphasis:"medium",iconDirection:"backward",size:"lg",loading:d});return t?(0,k.Y)(Ii.A,{label:u("navigation.back-button.label.no-previous-name","No Previous Name"),placement:"top",target:(0,k.Y)(e,null)}):(0,k.Y)(e,null)}),[t,r,d,u]);return(0,k.Y)(J.Ay,{alignX:"center",alignY:"middle",gutters:"lg",guttersY:"xl"},l>0&&(0,k.Y)(g,null),(0,k.Y)(MA,{title:u("navigation.match-button","Match"),icon:vn.A,handleOnClick:()=>{n(),h({actionType:"match",ark:p.autoGenImageArk,timestamp:new Date}),(0,vi.sx)({event_name:"click_action",link_name:"Match"})},color:"green",emphasis:"lightHigh",alignY:"top",size:"lg",loading:d}),(0,k.Y)(MA,{title:u("navigation.edit-button","Edit"),icon:Ei.A,handleOnClick:()=>{(0,vi.sx)({event_name:"click_action",link_name:"Edit"}),s()},color:"red",emphasis:"lightHigh",alignY:"top",size:"lg",loading:d}),(0,k.Y)(MA,{title:u("navigation.unsure-button","Unsure"),icon:pe.A,handleOnClick:()=>{(0,vi.sx)({event_name:"click_action",link_name:"Unsure"}),a()},color:"blue",emphasis:"lightHigh",iconDirection:"forward",alignY:"top",size:"lg",loading:d}),m?(0,k.Y)(ee.A,{size:"lg",disabled:d,Icon:gi.A,onClick:()=>{o()},"data-testid":"not-a-person",linkName:"Not A Person",title:u("navigation.not-a-person-button","Not A Person")}):(0,k.Y)(Z.A,{Icon:gi.A,onClick:()=>{o()},emphasis:"low",iconDirection:"forward",size:"sm",alignY:"middle",disabled:c||d,description:u("navigation.not-a-person-tooltip",'Sometimes the computer identifies text as a name but it may actually be a note from the census taker. Hint: Common text such as "Vacant", "No One Home", etc.')},u("navigation.not-a-person-button","Not A Person")))}var LA=a(69279);function zA(e){let{handleClickRecordDetails:t,handleClickAttachToTree:a,handleSave:r,sharable:n="",imageAuth:o=!1,showNotAPerson:s=!0,showRecordDetails:l=!0}=e;const[d]=(0,P.B)(),c=(0,$.Ay)(),u=(0,i.useRef)(),h=(0,$.Ay)(),{accessFromPrison:p,isReady:m}=(0,LA.A)();return(0,k.Y)(i.Fragment,null,(0,k.Y)(ee.A,{title:d("navigation.menu-button","More Tools"),Icon:df.A,onClick:()=>{c.handleClick()},color:"gray",size:"md",ref:u}),(0,k.Y)(Zr.A,(0,j.A)({},c,{placement:"start",targetRef:u}),(0,k.Y)(st.N6,{columnCount:1,orientation:"vertical",gutters:"pico"},s&&(0,k.Y)(Hs.A,{target:(0,k.Y)(Z.A,{Icon:gi.A,emphasis:"low",fullWidth:!0,onClick:()=>r({},"WORD")},d("report-error-overlay.not-a-person-button","Not A Person")),label:"NotAPerson",description:d("navigation.not-a-person-tooltip",'Sometimes the computer identifies text as a name but it may actually be a note from the census taker. Hint: Common text such as "Vacant", "No One Home", etc.')}),l&&o&&!p&&m&&(0,k.Y)(Z.A,{Icon:Ha.A,emphasis:"low",fullWidth:!0,onClick:t},d("navigation.details-button","Record Details")),l&&o&&!p&&m&&(0,k.Y)(Z.A,{Icon:sf.A,title:d("attach.header","Attach To Tree"),onClick:()=>a(),"data-testid":"attach-to-tree",linkName:"Attach To Tree"},d("attach.header","Attach To Tree")),(0,k.Y)(Z.A,{Icon:xb.A,emphasis:"low",fullWidth:!0,onClick:()=>{(0,vi.sx)({event_name:"click_action",link_name:"Handwriting Help"}),h.handleClick()}},d("task-viewer.handwriting-tooltip","Handwriting Examples")),n&&!p&&m&&(0,k.Y)(Nb.DJ,{sharable:n,inline:!1,buttonEmphasis:"low"}),(0,k.Y)(Ob,h))))}var VA=a(17287),BA=a(8407);const GA=(0,y.Ay)("rip:useQuickNameTasks");function UA(e){let{debugArk:t,placeCode:a,recordLanguage:r,action:n,surname:o,finishedDialogOverlay:s,setZoomPan:l,setHighlights:d}=e;const[c,u]=(0,i.useState)([]),[h,p]=(0,i.useState)(0),[m,g]=(0,i.useState)(),[v,y]=(0,i.useState)({}),f=(0,L.u)("shared_dasProxy"),[b,w]=(0,i.useState)(),[T,I]=(0,i.useState)(),S=(0,i.useRef)(),E=(0,i.useRef)(),[k,C]=(0,i.useState)(),[x,Y]=(0,i.useState)(!1),{displayHighlights:N}=(0,je.Z0)(),{setQuery:R}=(0,G.A)(),[O,_]=(0,i.useState)(0),[F,D]=(0,i.useState)(20),[M]=(0,P.B)(),{data:H}=(0,aa.Zm)({fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],dispatchTypes:!1,lang:"en"}),z=(0,i.useRef)(!1),V=(0,i.useCallback)((async(e,t)=>{let a=!1;try{var i;let n,o=!1;try{n=await(0,Se.pr)({partitionKey:e[0].partitionKey,fsUserAgentChain:t})}catch(d){var r;if(403===(null===d||void 0===d||null===(r=d.response)||void 0===r?void 0:r.status))return!1;throw new Error(d)}(0,VA.ao)(n.elements),C(n);const s=await Xi(n.elements,null===(i=e[0])||void 0===i?void 0:i.id);s&&(o=await $i(null,e[0].partitionKey),a=s&&o),GA("Image Auth: ",{imagePermissions:o,recordPermissions:s,authorized:a})}catch(d){var n,o,s,l;if(null!==d&&void 0!==d&&null!==(n=d.response)&&void 0!==n&&n.status)w(d),(0,$e.Yt)(d,null===(o=e[0])||void 0===o?void 0:o.partitionKey,{codeId:661,status:null===d||void 0===d||null===(s=d.response)||void 0===s?void 0:s.status,responseBody:null===d||void 0===d||null===(l=d.response)||void 0===l?void 0:l.data}),I(!1)}finally{I(a)}return a}),[]),B=(0,i.useCallback)((e=>E.current||(0,xe.F)(e,f.isOn)),[f.isOn]),U=(0,i.useCallback)((e=>{const t=[];return e?e.forEach((e=>{t.push((0,ia.eS)(e))})):null!==N&&void 0!==N&&N.ids&&N.ids.forEach((e=>{var a;null!==(a=N.highlights[e])&&void 0!==a&&a.attached&&t.push((0,ia.eS)(N.highlights[e]))})),t}),[null===N||void 0===N?void 0:N.highlights,null===N||void 0===N?void 0:N.ids]),K=(0,i.useCallback)((e=>{const{panX:t,panY:a}=gA(e),i=vA(e,!0);l({zoom:i,panX:t,panY:a})}),[l]),q=(0,i.useCallback)(((e,t)=>{const a=t?null===t||void 0===t?void 0:t[e]:null===c||void 0===c?void 0:c[e];return y(a||{}),a&&R({autoGenImageArk:null===a||void 0===a?void 0:a.partitionKey}),a}),[R,c]),j=(0,i.useCallback)((e=>{let{taskHighlights:t}=e;const a=U(t);a&&K(a)}),[U,K]),$=(0,i.useCallback)((e=>{var t;const a=null===e||void 0===e||null===(t=e.slsData)||void 0===t?void 0:t.map((e=>(e.artifactUrl=B(e.partitionKey),e.apid=S.current,e)));u(a),q(0,a),V(a,qe.YU)}),[B,V,q]),W=(0,i.useCallback)((async()=>{const e=await(0,Se.pr)({partitionKey:t,fsUserAgentChain:qe.YU,includeActions:!1}),a=e.elements[0].partitionKey;S.current=await(0,xe.eN)(a);const{images:i}=(0,BA.D2)([{elements:e.elements,danglingSupers:e.danglingSupers,danglingElementTypes:e.danglingElementTypes,danglingElementDescriptions:e.danglingElementDescriptions,partitionKey:(0,na.XJ)(S.current)}]);(0,Me.OU)(i,H,M("type-unknown.label","<Unknown Type>"));const r=(0,A.Qc)(i[0],"NAME",!1).filter((e=>"NAME"===e.elementType)).flatMap((e=>(0,A.tk)(e,["NAME_SURN","NAME_GN","NAME_PRE","NAME_SUF"]))).filter((e=>e.rects));if(r){E.current=B(a);try{$({slsData:r}),g(!1)}catch(n){g(!1),w(!0)}}}),[H,B,t,$,M]),X=(0,i.useCallback)((async()=>{const e=!c||0===(null===c||void 0===c?void 0:c.length),i=h===(null===c||void 0===c?void 0:c.length);if(GA("getMoreTasks start: ",{isFirstRequest:e,isLastTask:i,loadingDataRef:z.current,debugArk:t,tasksLength:null===c||void 0===c?void 0:c.length}),t||z.current||!e&&!i)z.current||!t||c.length||W();else{z.current=!0,GA("getMoreTasks: ",{length:null===c||void 0===c?void 0:c.length,isLastTask:i,index:h,isFirstRequest:e,doneCount:O,maxTasks:F,currentTask:v});const t=v&&v.apid;let u;GA("apid: ",t);try{g(!0),u=await sA({placeCode:a,language:r,isFirstRequest:e,apid:t,action:n,taskType:"Name Correction",surname:o}),g(!1),GA("New Tasks: ",{newTasks:u}),u?(S.current=u.artifactId,E.current=u.artifactUrl,$(u),p(0),w(!1)):(g(!1),w(!0))}catch(d){var s,l;if("NoMoreTasks"!==(null===d||void 0===d?void 0:d.message)&&"TaskExpired"!==(null===d||void 0===d?void 0:d.message)&&"No names on task"!==(null===d||void 0===d?void 0:d.message))(0,$e.Yt)(d,t,{codeId:660,status:null===d||void 0===d||null===(s=d.response)||void 0===s?void 0:s.status,responseBody:null===d||void 0===d||null===(l=d.response)||void 0===l?void 0:l.data});g(!1),w(d)}z.current=!1}}),[c,h,t,O,F,v,a,r,n,o,$,W]);(0,i.useEffect)((()=>{be()(H)||X()}),[H,X]);const Q=(0,i.useCallback)(((e,t)=>{if(t<0)return 0;if(t>=e.length)return t;for(let a=t;a>=0;a--)if(!e[a].notAPersonWasClicked)return a;return console.error("No valid index found in guaranteeValidPreviousIndex"),-1}),[]),J=(0,i.useCallback)(((e,t)=>{if(t<0)return 0;if(t>=e.length)return t;for(let a=t;a<e.length;a++)if(!e[a].notAPersonWasClicked)return a;return console.error("No valid index found in guaranteeValidNextIndex"),-1}),[]),Z=(0,i.useCallback)((()=>{const e=h-1,t=Q(c.slice(0,e+1),e);let a=!0;for(let i=0;i<t;i++)if(!c[i].notAPersonWasClicked){a=!1;break}Y(a),_(t),p((()=>(q(t),t))),(0,vi.sx)({event_name:"click_action",link_name:"Back"})}),[q,Q,h,c]),ee=(0,i.useCallback)((e=>{if(null===e||void 0===e||!e.justMarkedNotAPerson)return!1;const t=on()(c);t[h].notAPersonWasClicked=!0,u(t);let a=!0;for(let i=0;i<h;i++)if(!c[i].notAPersonWasClicked){a=!1;break}return a}),[h,c]),te=(0,i.useCallback)((e=>{if(Y(ee(e)),GA("goToNextTask: ",{index:h,doneCount:O,maxTasks:F}),null===F||O+1<F){const e=J(c,h+1,!0);_(e),p((()=>{if(c&&c.length&&c[e]){const t=q(e),a=d({newCurrentTask:t});j({newCurrentTask:t,taskHighlights:a}),GA("goToNextTask: ",{maxTasks:F,doneCount:O+1,index:h+1})}return e}))}else s.handleClick()}),[O,s,h,j,F,d,q,c,ee,J]),ae=(0,i.useMemo)((()=>{try{return Boolean(Wi(null===k||void 0===k?void 0:k.elements,v.id))}catch(e){return!1}}),[v.id,null===k||void 0===k?void 0:k.elements]),ie=(0,i.useCallback)((async()=>{try{g(!0);const{data:e,headers:t}=await rA(r,a,"Name Correction",o),i=await oA(e,t,!0);i&&(S.current=i.artifactId,E.current=i.artifactUrl,$(i),p(0),w(!1)),g(!1)}catch(e){console.error("Error getting new image:",e),g(!1),w(e)}}),[a,r,o,$]);return GA("Return: ",{imageAuth:T,tasks:c,currentTask:v,error:b,doneCount:O,index:h,maxTasks:F,dataTypes:H}),{goToPreviousTask:Z,goToNextTask:te,handleContinue:async e=>{u((t=>{const a=t.slice(h+1);return p(0),function(t,a){const i=q(t,a),r=d({newCurrentTask:i,allHighlights:c.highlights});j({newCurrentTask:i,taskHighlights:r}),_(0),D(e),s.handleClick()}(0,a),a}))},updateNameCorrectionTaskValue:e=>{const t=[...c],a=t.findIndex((e=>e.id===v.id));c[a].fieldValues[0].origValue.text=e,u(t)},showRecordDetailsAndAttachToTree:ae,handleClickRecordDetails:async()=>{(0,vi.sx)({event_name:"click_action",link_name:"RecordDetails"});const e=Wi(k.elements,v.id);window.open(`/ark:/61903/${e}`,"_blank")||window.location.assign(`/ark:/61903/${e}`)},handleClickAttachToTree:async()=>{const e=Wi(k.elements,v.id);window.open(`/search/linker?ark=${encodeURIComponent(`/ark:/61903/${e}`)}`,"_blank")||window.location.assign(`/search/linker?ark=${encodeURIComponent(`/ark:/61903/${e}`)}`)},doneCount:O,currentTask:v,imageAuth:T,loading:m,error:b,disableBackButton:x,maxTasks:F,index:h,getNewImage:ie}}function KA(e){let{title:t,message:a,goBackToGive:r}=e;const n=(0,$.Ay)({initiallyOpen:!0}),[o]=(0,P.B)(),s=o("task-viewer.finished-modal.heading","Way to go!"),l=o("tasks-done-overlay.surnames-done.message","All the surnames are completed in this area. Go back to Get Involved to do another search.");return(0,k.Y)(i.Fragment,null,(0,k.Y)(Ze.A,(0,j.A)({},n,{title:t||s,nonClosable:!0}),(0,k.Y)(te.A,null,a||l),(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{"data-testid":"go-back-to-give",onClick:()=>r(),emphasis:"high"},o("tasks-done-overlay.go-back.button","Go Back")))))}const qA=a.p+"static/media/ThankYouOverlay.0759630bce219504d422.png";function jA(e){let{dialogOverlay:t,initialChipValue:a,chipOptions:r,totalFinished:n,handleContinue:s,goBackToGive:l,placeCode:d,name:c,goToPreviousStep:u}=e;const[h]=(0,P.B)(),[p,m]=(0,i.useState)(a),[g,v]=(0,i.useState)("");(0,i.useEffect)((()=>{t.isOpen&&m(a)}),[t.isOpen,r,a]);const y=(0,i.useMemo)((()=>({name:"continueNameCount",chips:r.map((e=>({label:e.label,value:e.value,selected:e.value===p}))),onSelectionChange:e=>{e&&m(e.value)}})),[r,p]);(0,i.useEffect)((()=>{!async function(){const{displayName:e}=await oa(d,o.i18n.language);v(e.name)}()}),[d]);const f=(b=c).includes("undefined")||!b?null:b;var b;const A=f?(0,k.Y)("strong",{key:f},f):null;let w,T;1===n?(w="completion-dialog.description2",T=h(w,{name:null!==f&&void 0!==f?f:"",placeName:g})):(w="completion-dialog.description",T=h(w,{totalFinished:n,placeName:g}));const I=(0,i.useCallback)((()=>{u?u():((0,vi.sx)({event_name:"click_action",link_name:"To GIVE: Finished Dialog"}),l())}),[l,u]);return(0,k.Y)(Ze.A,(0,j.A)({},t,{closeOnClickAway:!1,close:I,nonClosable:!u}),(0,k.Y)(Dt.A,{src:qA,alt:h("completion-dialog.thank-you","Thank you!")}),(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(re.H1,{size:"H5"},h("completion-dialog.bold-text","You're helping others find their family!")),(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(te.A,{size:"sm"},h(w,T,{totalFinished:(0,k.Y)("strong",{key:n},n),placeName:(0,k.Y)("strong",{key:g},g),name:A})),(0,k.Y)(te.A,{size:"sm"},h("task-viewer.finished-modal.continue-reviewing-prompt","Want to make more names available?")),(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(ue.A,y),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{"data-testid":"maybe-later-button",linkName:"Maybe Later Action",onClick:()=>{(0,vi.sx)({event_name:"click_action",link_name:"To GIVE: Finished Dialog"}),l()}},h("task-viewer.finished-modal.cancel-btn","Maybe Later")),(0,k.Y)(Z.A,{"data-testid":"continue-button",linkName:"Continue Action",onClick:()=>{const e=r.find((e=>e.value===p)),t=e?e.max:void 0;(0,vi.sx)({event_name:"click_action",link_name:`Continue with ${null===t?"unlimited":t} names`}),s(t)},emphasis:"high"},h("task-viewer.finished-modal.continue-btn","Continue")))))}function $A(e){const t=[];return e&&e.ids.forEach((a=>{var i;null!==(i=e.highlights[a])&&void 0!==i&&i.attached&&t.push((0,ia.eS)(e.highlights[a]))})),t}function WA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const a=e?"/getinvolved/corrections":"/getinvolved/opportunities",i=t?`${a}?viewActivity=${t}`:a,r=(0,H.i6)(i);window.location.assign(r)}const XA=async(e,t)=>{let a=!1;try{var i;let n,s=!1;try{n=await(0,Se.pr)({partitionKey:e[0].partitionKey,fsUserAgentChain:t,includeActions:!1})}catch(o){var r;if(403===(null===o||void 0===o||null===(r=o.response)||void 0===r?void 0:r.status))return!1;throw new Error(o)}(0,VA.ao)(n.elements);const l=await Xi(n.elements,null===(i=e[0])||void 0===i?void 0:i.id);l&&(s=await $i(null,e[0].partitionKey),a=l&&s)}catch(o){var n;(0,$e.Yt)(o,null===(n=e[0])||void 0===n?void 0:n.partitionKey,{codeId:666,status:o.response.status,responseBody:o.response.data})}return a};function QA(e){let{overlay:t,handleClickConfirmNotAPerson:a}=e;const[i]=(0,P.B)();return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:i("task-viewer.confirm-not-a-person-overlay.heading","Are you sure?"),nonClosable:!0,footer:(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{"data-testid":"decline-not-a-person-button",onClick:t.close,emphasis:"low",linkName:"Confirm Not A Person Overlay Decline Button",title:i("tasks-done-overlay.confirm-not-a-person-overlay.cancel-button","Cancel")},i("tasks-done-overlay.confirm-not-a-person-overlay.cancel-button","Cancel")),(0,k.Y)(Z.A,{"data-testid":"confirm-not-a-person-button",onClick:a,emphasis:"high",linkName:"Confirm Not A Person Overlay Confirm Button",title:i("tasks-done-overlay.confirm-not-a-person-overlay.confirm-button","Not A Person")},i("tasks-done-overlay.confirm-not-a-person-overlay.confirm-button","Not A Person")))}),(0,k.Y)(O.x,{i18nKey:"tasks-done-overlay.confirm-not-a-person-overlay.message"},(0,k.Y)(te.A,{size:"sm"},(0,k.Y)("b",null,"Not a Person")," means that the highlighted word(s) don't belong to a name.",(0,k.Y)("span",null,"Please confirm."))))}function JA(e){let{onSkip:t,onGetNewImage:a,currentTask:r}=e;const[n,o]=(0,i.useState)(0),[s,l]=(0,i.useState)(null===r||void 0===r?void 0:r.artifactUrl),[d,c]=(0,i.useState)(!1),u=(0,$.Ay)();(null===r||void 0===r?void 0:r.artifactUrl)!==s&&(l(null===r||void 0===r?void 0:r.artifactUrl),o(0),c(!1));return{handleSkip:(0,i.useCallback)((()=>{if((null===r||void 0===r?void 0:r.artifactUrl)===s){const e=n+1;o(e),e>=5&&!d&&(u.open(),c(!0))}else o(1),l(null===r||void 0===r?void 0:r.artifactUrl),c(!1);t()}),[n,r,t,u,s,d]),handleClickNewImage:(0,i.useCallback)((async()=>{if(u.close(),o(0),c(!1),"function"===typeof a)try{await a()}catch(e){console.error("Error getting new image:",e)}}),[u,a]),resetSkipCounter:(0,i.useCallback)((()=>{o(0)}),[]),skipImageOverlay:u}}const ZA=a.p+"static/media/skipimage.d0ad278d89f7132821790030a3a67f31.svg";function ew(e){let{overlay:t,handleClickNewImage:a}=e;const[i]=(0,P.B)(),r=(0,ci.Ay)()({default:!0,md:!1});return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:i("task-viewer.skip-image-overlay.heading","Do you want to skip the image?"),nonClosable:!0,footer:(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{"data-testid":"stay-here-button",onClick:t.close,emphasis:"low",linkName:"Skip Image Overlay Stay Here Button",title:i("tasks-done-overlay.skip-image-overlay.stay-button","STAY HERE")},i("tasks-done-overlay.skip-image-overlay.stay-button","STAY HERE")),(0,k.Y)(Z.A,{"data-testid":"new-image-button",onClick:a,emphasis:"high",linkName:"Skip Image Overlay New Image Button",title:i("tasks-done-overlay.skip-image-overlay.new-image-button","NEW IMAGE")},i("tasks-done-overlay.skip-image-overlay.new-image-button","NEW IMAGE")))}),(0,k.Y)(Dt.A,{src:ZA,alt:"",maxWidth:r?"100%":"482px",height:r?"150px":"200px",positionY:"middle",positionX:"center"}),(0,k.Y)(O.x,{i18nKey:"tasks-done-overlay.skip-image-overlay.message"},"Looks like you skipped a lot of names in a row. Would you like to try a new image?"))}const tw={name:"15abl3h",styles:"display:flex;flex-direction:column;flex-grow:1;justify-content:space-between;overflow:hidden;[class^='highlightCss']{box-shadow:none !important;}[class^='quickGlanceBleedableCss']{margin-top:20px;}"},aw=e=>{let{latestName:t,handleSubmit:a,childInputRef:i}=e;const[r]=(0,P.B)(),n={nameField:vr.Yj().test("contains-illegal-characters",r("task-viewer.error.illegal-characters","You can only enter ' - , . diacritic, and alphanumeric characters."),(e=>e===(0,$e.tK)(e)))},o=vr.Ik().shape(n),s=(0,ur.SV)({mode:"all",defaultValues:{nameField:(0,$e.tK)(t)},resolver:(0,gr.t)(o)});return(0,k.Y)(Ye.A,null,(0,k.Y)(pr.Ay,{onSubmit:a,methods:s,id:"name-correction-selected-content"},(0,k.Y)(J.Ay,{gutters:"xxs",alignX:"center"},(0,k.Y)(mr.YJ,{"data-testid":"name-text-field",name:"nameField",ref:i,resettable:!0,label:r("task-viewer.name-correction-selected-content.name-field-label","Name")}),s.formState.isDirty&&(0,k.Y)(J.Ay,{gutters:"xxs"},(0,k.Y)(Z.A,{size:"medium",emphasis:"high",form:"name-correction-selected-content",type:"submit",linkName:"Submit Edit","data-testid":"Submit",onTouchStart:()=>{a(s.getValues())}},r("task-viewer.save-btn","Submit"))))))};function iw(){(0,K.O)({page_channel:"RIP",page_detail:"Name Corrections"});const e=(0,L.u)("rip_sharedImageViewer_feedback_NameCorrections"),{query:t}=(0,G.A)(),{action:a,placeCode:r,language:n,surname:o,debugArk:s}=t,l=parseInt(r,10),[d]=(0,P.B)(),c=(0,jn.Ay)(),u=c({default:!0,md:!1}),h=(0,ci.Ay)()({default:!0,md:!1}),{checkForFlaggedBehavior:p}=FA(),[m,v]=(()=>{const e=(0,i.useRef)(null),t=(0,i.useCallback)((()=>{e.current&&e.current.focus()}),[]);return[e,t]})(),[y,f]=(0,i.useState)(!1),[b,A]=(0,i.useState)(""),[w,T]=(0,i.useState)(),I=(0,$.Ay)(),S=(0,$.Ay)(),E=(0,$.Ay)(),[{controllerRef:C,stageRef:x,viewerRef:Y},{set:N}]=(0,ga.Ay)(),R={url:"https://www.familysearch.org/getinvolved"},[O,_]=(0,jt.A)(),{accessFromPrison:F,isReady:D}=(0,LA.A)(),{goToPreviousTask:M,goToNextTask:H,handleContinue:z,updateNameCorrectionTaskValue:V,showRecordDetailsAndAttachToTree:B,handleClickRecordDetails:U,handleClickAttachToTree:q,doneCount:j,currentTask:W,imageAuth:X,loading:Q,error:te,disableBackButton:ie,maxTasks:oe,index:se,getNewImage:le}=UA({debugArk:s,placeCode:l,recordLanguage:n,action:a,surname:o,finishedDialogOverlay:I,setZoomPan:()=>{},setHighlights:()=>{}}),{handleSkip:de,handleClickNewImage:ce,resetSkipCounter:ue,skipImageOverlay:pe}=JA({onSkip:H,onGetNewImage:le,currentTask:W}),me=e=>{var t,a;const i=null===e||void 0===e?void 0:e.fieldValues,r=null===i||void 0===i||null===(t=i[i.length-1])||void 0===t||null===(a=t.origValue)||void 0===a?void 0:a.text;return"string"===typeof r?r:""},ge=(0,Yb._)((async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const i="WORD"===a;i&&(0,vi.sx)({event_name:"click_action",link_name:"Not A Person"});try{A(!0);const{partitionKey:r,id:n}=W,o=e||(0,$e.tK)(me(W)),s=!!e;i&&(W.oldFieldType=W.fieldType),await uA({edit:o,id:n,isFixed:s,newFieldType:a,partitionKey:r,placeRepId:l}),mA({partitionKey:r,taskType:"Name Correction",action:i?"not-a-person":s?"fixed":"reviewed"}),i||(p({...W,actionType:"edit",ark:t.autoGenImageArk,editedValue:e,originalValue:me(W)}),e&&V(e)),A(!1),H({justMarkedNotAPerson:i})}catch(r){console.warn("Error saving edit",r),A(!1),f(!0)}})),ve=async()=>{!b&&W&&await lA(W.apid,!1,"Name Correction"),WA(F&&D,"quickNameReview")},ye=(0,i.useCallback)((()=>{E.handleClick()}),[E]);(0,i.useEffect)((()=>{var e;(0,ha.eP)((e=W.rects)&&0!==e.length?null===e||void 0===e?void 0:e.map((e=>({id:Math.random(),position:{x:e.x1,y:e.y1,width:e.x2-e.x1,height:e.y2-e.y1}}))):[],_)}),[W,_]),(0,i.useEffect)((()=>{O.ids.length>0&&_.select(O.ids[0])}),[_,O]),(0,i.useEffect)((()=>{if(W&&W.rects){const{panX:e,panY:t}=gA([W.rects[0]]),a=vA(W.rects,u);N({zoom:a,panX:e,panY:t})}}),[W,u,N]);const fe=oe?d("task-viewer.counter-with-total",`(${j+1} of ${oe})`,{counter:j+1,total:oe}):`(${j+1})`;/NoMoreTasks/.test(null===te||void 0===te?void 0:te.message)&&(w||T({title:d("tasks-done-overlay.no-more-tasks.error.title","No more tasks"),message:d("tasks-done-overlay.tasks-done.error.message","Go back to Get Involved to do another search.")})),/TaskExpired/.test(null===te||void 0===te?void 0:te.message)&&(w||T({title:d("tasks-done-overlay.tasks-done.error.title","Task has expired"),message:d("tasks-done-overlay.tasks-done.error.message","Go back to Get Involved to do another search.")}));const be=(0,i.useCallback)((()=>(0,k.Y)(aw,{latestName:me(W),handleSubmit:e=>{let{nameField:t}=e;return ge(t)},childInputRef:m})),[m,W,ge]),Ae=(0,i.useCallback)((function(){ue(),ge(...arguments)}),[ge,ue]),we=(0,i.useCallback)((()=>{ue(),ye()}),[ye,ue]);return(0,k.Y)(i.Suspense,{fallback:(0,k.Y)(g.A,null)},(0,k.Y)(Ot.A,null,d("task-viewer.quick-name-review-title","Quick Name Review")),(0,k.Y)("div",{css:tw},(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(J.Ay,{alignY:"middle"},(0,k.Y)(ae.A,null),(0,k.Y)(ee.A,{Icon:he.A,iconDirection:"backward",onClick:()=>{(0,vi.sx)({event_name:"click_action",link_name:"To GIVE: Top Left"}),ve()},title:d("task-viewer.get-involved-link","Back to Get Involved"),disabled:b||Q}),c({default:(0,k.Y)(re.H1,{size:"H5",growX:!0},d("task-viewer.quick-name-review-title","Quick Name Review"),(0,k.Y)(ne.A,null,fe)),sm:(0,k.Y)(re.H1,{size:"H5",growX:!0},`${d("task-viewer.quick-name-review-title","Quick Name Review")} ${fe}`)}),X&&!F&&D&&B&&(h?(0,k.Y)(ee.A,{disabled:b,Icon:Ha.A,onClick:()=>U(),"data-testid":"record-details",linkName:"Record Details",title:d("navigation.details-button","Record Details")}):(0,k.Y)(Z.A,{disabled:b,Icon:Ha.A,onClick:()=>U(),"data-testid":"record-details",linkName:"Record Details"},d("navigation.details-button","Record Details"))),X&&!F&&D&&B&&(h?(0,k.Y)(ee.A,{disabled:b,Icon:sf.A,onClick:()=>q(),"data-testid":"attach-to-tree",linkName:"Attach To Tree",title:d("attach.header","Attach To Tree")}):(0,k.Y)(Z.A,{emphasis:"medium",disabled:b,Icon:sf.A,onClick:()=>q(),"data-testid":"attach-to-tree",linkName:"Attach To Tree"},d("attach.header","Attach To Tree"))),c({sm:(0,k.Y)(ee.A,{Icon:xb.A,title:d("task-viewer.handwriting-tooltip","Handwriting Examples"),onClick:()=>{(0,vi.sx)({event_name:"click_action",link_name:"Handwriting Help"}),S.handleClick()}})}),!F&&D&&c({sm:(0,k.Y)(Nb.DJ,{useIconButton:!0,sharable:R,"data-testid":"social-share"})}),c({default:(0,k.Y)(zA,{handleClickRecordDetails:U,handleClickAttachToTree:q,handleSave:Ae,sharable:R,imageAuth:X,showNotAPerson:!1,showRecordDetails:!0}),sm:(0,k.Y)("div",null)})),(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(it,{error:y,setError:f}),W&&W.artifactUrl&&(0,k.Y)(Aa.A,{controllerRef:C,stageRef:x,viewerRef:Y,alt:"",src:W.artifactUrl,maxZoom:20,initialZoom:vA(W.rects,u),initialPanX:gA([W.rects[0]]).panX,initialPanY:gA([W.rects[0]]).panY},(0,k.Y)(Xt.A,{state:O,api:_,Component:Qt.A,SelectedContent:be}),(0,k.Y)(jA,{dialogOverlay:I,initialChipValue:"20names",chipOptions:[{label:d("task-viewer.finished-modal.option.20names","20 Names"),value:"20names",max:20,selected:!0},{label:d("task-viewer.finished-modal.option.30names","30 Names"),value:"30names",max:30},{label:d("task-viewer.finished-modal.option.50names","50 Names"),value:"50names",max:50},{label:d("task-viewer.finished-modal.option.nolimit","No limit"),value:"nolimit",max:null}],totalFinished:j+1,handleContinue:z,goBackToGive:ve,placeCode:l,name:me(W)}),(0,k.Y)(it,null)),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(HA,{disableBackButton:ie,atWidth:c,goToNextTask:de,goToPreviousTask:M,handleSave:Ae,handleClickNotAPerson:we,focusOnEditField:v,index:se,loading:b||Q}),(0,k.Y)(Ob,S),(0,k.Y)(QA,{overlay:E,handleClickConfirmNotAPerson:()=>{E.close(),ge({},"WORD"),p({...W,actionType:"notAPerson",ark:t.autoGenImageArk,originalValue:me(W),timestamp:new Date})}}),w&&(0,k.Y)(KA,{title:w.title,message:w.message,goBackToGive:ve}),(0,k.Y)(ew,{overlay:pe,handleClickNewImage:ce})),!h&&(0,k.Y)(du.Ay,{url:"//w.usabilla.com/fcf53049fea9.js",hideOnMobile:!0,mobileBreakpoint:"md"}),!h&&e.isOn&&(0,k.Y)($f,null))}function rw(e){let{loading:t,personId:a,sharable:r,showRecordDetails:n=!1,handleClickRecordDetails:o}=e;const[s]=(0,P.B)(),l=(0,$.Ay)(),d=(0,i.useRef)(),{accessFromPrison:c,isReady:u}=(0,LA.A)();return(0,k.Y)(i.Fragment,null,(0,k.Y)(ee.A,{title:s("navigation.menu-button","More Tools"),Icon:df.A,onClick:()=>l.handleClick(),color:"gray",size:"md",ref:d}),(0,k.Y)(Zr.A,(0,j.A)({},l,{placement:"start",targetRef:d}),(0,k.Y)(st.N6,{columnCount:1,orientation:"vertical",gutters:"pico"},a&&n&&!c&&u&&(0,k.Y)(Z.A,{disabled:t,Icon:Ha.A,title:s("navigation.details-button","Record Details"),onClick:()=>o(),"data-testid":"record-details",linkName:"Record Details"},s("navigation.details-button","Record Details")),a&&n&&!c&&u&&(0,k.Y)(Z.A,{disabled:t,Icon:sf.A,title:s("attach.header","Attach To Tree"),onClick:()=>{window.open(`/search/linker?ark=${encodeURIComponent(`/ark:/61903/${a}`)}`)},"data-testid":"attach-to-tree",linkName:"Attach To Tree"},s("attach.header","Attach To Tree")),!c&&u&&(0,k.Y)(Nb.DJ,{"data-testid":"social-menu",disabled:t,sharable:r,buttonEmphasis:"low"}))))}function nw(e){let{loading:t,personId:a,maxTasks:i=1,doneCount:r=0,showRecordDetails:n=!1}=e;const[o]=(0,P.B)(),s=(0,jn.Ay)(),l=(0,$.Ay)(),d={url:"https://www.familysearch.org/getinvolved/"},c=(0,ci.Ay)()({default:!0,md:!1}),{accessFromPrison:u,isReady:h}=(0,LA.A)(),p=async()=>{window.open(`/ark:/61903/${a}`,"_blank")||window.location.assign(`/ark:/61903/${a}`)};return(0,k.Y)(J.Ay,{alignY:"middle"},(0,k.Y)(ae.A,null),(0,k.Y)(ee.A,{Icon:he.A,iconDirection:"backward",onClick:()=>WA(u&&h,"fullNameReview"),title:o("task-viewer.get-involved-link","Back to Get Involved"),"data-testid":"back-to-get-invovled",linkName:"Back To Give"}),s({default:(0,k.Y)(re.H1,{size:"H5",growX:!0},o("full-name-correction.infosheet-header","Full Name Review"),(0,k.Y)(ne.A,null,r+1)),xs:(0,k.Y)(re.H1,{size:"H5",growX:!0},i?`${o("full-name-viewer.title-with-max-tasks","Full Name Review ({currentCount} of {maxTasks})",{currentCount:r+1,maxTasks:i})}`:`${o("full-name-viewer.title","Full Name Review ({currentCount})",{currentCount:r+1})}`)}),s({default:(0,k.Y)(J.Ay,{alignX:"end",growX:!0},(0,k.Y)(ee.A,{Icon:xb.A,title:o("task-viewer.handwriting-tooltip","Handwriting Examples"),onClick:()=>l.handleClick(),"data-testid":"handwriting-help",linkName:"Handwriting Help"}),(0,k.Y)(rw,{loading:t,personId:a,sharable:d,showRecordDetails:n,handleClickRecordDetails:p})),sm:(0,k.Y)(J.Ay,{alignX:"end",growX:!0},a&&n&&!u&&h&&(c?(0,k.Y)(ee.A,{disabled:t,Icon:Ha.A,onClick:()=>p(),"data-testid":"record-details",linkName:"Record Details",title:o("navigation.details-button","Record Details")}):(0,k.Y)(Z.A,{disabled:t,Icon:Ha.A,onClick:()=>p(),"data-testid":"record-details",linkName:"Record Details"},o("navigation.details-button","Record Details"))),a&&n&&!u&&h&&(c?(0,k.Y)(ee.A,{emphasis:"medium",disabled:t,Icon:sf.A,onClick:()=>{window.open(`/search/linker?ark=${encodeURIComponent(`/ark:/61903/${a}`)}`)},"data-testid":"attach-to-tree",linkName:"Attach To Tree",title:o("attach.header","Attach To Tree")}):(0,k.Y)(Z.A,{emphasis:"high",disabled:t,Icon:sf.A,onClick:()=>{window.open(`/search/linker?ark=${encodeURIComponent(`/ark:/61903/${a}`)}`)},"data-testid":"attach-to-tree",linkName:"Attach To Tree"},o("attach.header","Attach To Tree"))),(0,k.Y)(ee.A,{Icon:xb.A,title:o("task-viewer.handwriting-tooltip","Handwriting Examples"),onClick:()=>l.handleClick(),"data-testid":"handwriting-help",linkName:"Handwriting Help"}),!u&&h&&(0,k.Y)(Nb.DJ,{disabled:t,sharable:d,useIconButton:!0}))}),(0,k.Y)(Ob,l),(0,k.Y)(ae.A,null))}const ow=a.p+"static/media/FullNameWelcome.00d39605ba1ea73fcbda890a2874f91e.svg";function sw(e){let{welcomeOverlay:t,goBackToGive:a}=e;const r=new fi.Ay({storeName:"RIP_settings"});(0,i.useEffect)((()=>{r.getItem("shownWelcome").then((e=>{e||(t.handleClick(),r.setItem("shownWelcome",!0))}))}),[]);const[n]=(0,P.B)();return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:n("full-name-welcome-overlay.title","Welcome to Full Name Review")}),n("full-name-welcome-overlay.content","A computer indexed this image, and we need your help to make sure the full name is highlighted, spelled correctly, and in the right order."),(0,k.Y)(Dt.A,{src:ow,alt:n("full-name-welcome-overlay.title","Welcome to Full Name Review"),height:140,noCrop:!0}),n("full-name-welcome-overlay.content2","Reviewing names makes research easier and helps people find their ancestors every day!"),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{onClick:a},n("full-name-welcome-overlay.go-back.btn","Go Back")),(0,k.Y)(Z.A,{onClick:()=>t.close(),emphasis:"high"},n("full-name-welcome-overlay.start.btn","Start")))))}const lw=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a=>!!a&&(0,ia.Kl)(e,a,t)},dw=e=>{let{nameSuperId:t,elementType:a,fieldType:i,text:r,rects:n,attribution:o,currentTask:s}=e;const l=(0,A.Vs)(),d=(0,Ai.iu)({partitionKey:s.partitionKey,nameSuperId:t,elementType:a,fieldType:i,fieldValue:(0,Je.cN)(r,o),nameFieldId:l});return n.forEach((e=>{d.push({type:"ADD_RECT",value:{partitionKey:s.partitionKey,id:l,rect:e}})})),d},cw=(e,t,a)=>{const i=[];return e&&e.rects&&e.rects.forEach((r=>{t.find(lw(r,!0))||i.push({type:"REM_RECT",value:{id:e.id,rect:r,partitionKey:a.partitionKey}})})),t.forEach((t=>{var r;!e||null!==(r=e.rects)&&void 0!==r&&r.find(lw(t,!0))||i.push({type:"ADD_RECT",value:{id:e.id,rect:t,partitionKey:a.partitionKey}})})),i},uw=(e,t,a)=>{const i=(0,A.q5)(t,a)[0],r=(0,A.OV)(i)||"",n=Boolean(!i&&e.rects.length),o=Boolean(i&&!e.rects.length),s=Boolean(!r&&e.text),l=Boolean(e.text!==r);return n||o||s||l?In.LX:In.sw},hw=e=>e.filter((t=>"REM_RECT"===t.type?!e.find((e=>"ADD_RECT"===e.type&&e.value.id===t.value.id&&(0,ia.Kl)(e.value.rect,t.value.rect,!0))):"ADD_RECT"!==t.type||!e.find((e=>"REM_RECT"===e.type&&e.value.id===t.value.id&&(0,ia.Kl)(e.value.rect,t.value.rect,!0))))),pw=e=>{const t=[];return e.forEach((e=>{if("ADD_RECT"!==e.type&&"REM_RECT"!==e.type&&t.push(e),"ADD_RECT"===e.type){Boolean(!t.find((t=>"ADD_RECT"===t.type&&t.value.id===e.value.id&&(0,ia.Kl)(t.value.rect,e.value.rect,!0))))&&t.push(e)}if("REM_RECT"===e.type){Boolean(!t.find((t=>"REM_RECT"===t.type&&t.value.id===e.value.id&&(0,ia.Kl)(t.value.rect,e.value.rect,!0))))&&t.push(e)}})),t},mw=(e,t,a,i,r,n)=>{var o;return(e=>{let{elementType:t,fieldType:a,originalValue:i,text:r,rects:n,fieldIds:o,attribution:s,currentTask:l,images:d}=e,c=[],u=[],h=!1,p=l.subElements.find((e=>e.elementType===t));const m=p;if(o.forEach((e=>{var t,a;const i=(0,A.rr)(d,e),r=(0,A.rr)(d,null===i||void 0===i||null===(t=i.superElements)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.id);(null===m||void 0===m?void 0:m.id)!==(null===r||void 0===r?void 0:r.id)&&((null===m||void 0===m?void 0:m.elementType)===(null===r||void 0===r?void 0:r.elementType)?(h=!0,p=r):Array.isArray(null===i||void 0===i?void 0:i.rects)&&i.rects.filter(Boolean).forEach((e=>{n.find(lw(e,!0))&&u.push({type:"REM_RECT",value:{partitionKey:i.partitionKey,id:i.id,rect:e}})})))})),r)if(p){const e=p.subElements.find((e=>e.fieldType===a));let o=null===e||void 0===e?void 0:e.id;e||(o=(0,A.Vs)(),c=c.concat([{type:"CREATE_ELEMENT",value:{id:o,partitionKey:l.partitionKey,elementType:"FIELD",extraArgs:{fieldType:a}}},{type:"ADD_SUB",value:{superPartitionKey:l.partitionKey,subPartitionKey:l.partitionKey,superId:p.id,subId:o,elementType:t}}])),h&&(c.push({type:"ADD_SUB",value:{superPartitionKey:l.partitionKey,subPartitionKey:l.partitionKey,superId:l.id,subId:p.id,elementType:"NAME"}}),m&&c.push({type:"REM_SUB",value:{superPartitionKey:l.partitionKey,subPartitionKey:l.partitionKey,superId:l.id,subId:m.id,elementType:"NAME"}})),c.push({type:"ADD_FV",value:{id:o,partitionKey:l.partitionKey,fieldValue:(0,Je.cN)(r,s),originalValue:i}}),c=c.concat(cw(e,n,l))}else c=c.concat(dw({nameSuperId:l.id,elementType:t,fieldType:a,text:r,originalValue:i,rects:n,attribution:s,currentTask:l}));else if(p){var g;(null===(g=p.superElements)||void 0===g?void 0:g.length)>1?c.push({type:"REM_SUB",value:{superPartitionKey:l.partitionKey,subPartitionKey:l.partitionKey,superId:l.id,subId:p.id,elementType:"NAME"}}):u=(0,Ai.Uk)({element:p})}return{dispatches:c,removeDispatches:u}})({elementType:i,fieldType:r,originalValue:null===(o=e[r])||void 0===o?void 0:o.originalValue,text:e[r].text,rects:e[r].rects,fieldIds:e[r].fieldIds,attribution:{...n,reasonId:uw(e[r],t,r)},currentTask:t,images:a})};function gw(e,t,a){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=[];if(!e.find((e=>"ADD_SUB"===e.type&&e.value.superId===a.id))){var n;let c=0,u=null===(n=a.subElements)||void 0===n?void 0:n[c];const h=e=>{var t,i;return"REMOVE_ELEMENT"===e.type&&e.value.id===(null===(t=u)||void 0===t?void 0:t.id)||"REM_SUB"===e.type&&e.value.subId===(null===(i=u)||void 0===i?void 0:i.id)&&e.value.superId===a.id};let p=t.find(h)||e.find(h);for(;c<(null===a||void 0===a||null===(o=a.subElements)||void 0===o?void 0:o.length)&&p;){var o,s;c++,u=null===(s=a.subElements)||void 0===s?void 0:s[c],p=t.find(h)}var l,d;if(u&&i)r.push({type:"ADD_SUB",value:{superPartitionKey:a.partitionKey,subPartitionKey:null===(l=u)||void 0===l?void 0:l.partitionKey,superId:a.id,subId:null===(d=u)||void 0===d?void 0:d.id,elementType:a.elementType}})}return r}const vw=function(e,t,a){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=t.id,n={comment:"",reasonId:uw(e.NAME_GN,t,"NAME_GN"),app:qe.YU};let o=[],s=[];[{elementType:"NAME_GIVEN",fieldType:"NAME_GN"},{elementType:"NAME_SURNAME",fieldType:"NAME_SURN"},{elementType:"NAME_SUFFIX",fieldType:"NAME_SUF"},{elementType:"NAME_PREFIX",fieldType:"NAME_PRE"}].forEach((i=>{let{elementType:r,fieldType:l}=i;const d=mw(e,t,a,r,l,n);o=o.concat(d.dispatches),s=s.concat(d.removeDispatches)}));[{fieldType:"NAME_SPRE",nameValue:e.NAME_SPRE},{fieldType:"NAME_PATR",nameValue:e.NAME_PATR},{fieldType:"NAME_MATR",nameValue:e.NAME_MATR}].forEach((e=>{let{fieldType:i,nameValue:l}=e;if(l.text){const e=(e=>{var t;let{dispatches:a,nameSuperId:i,nameValue:r,attribution:n,fieldType:o,currentTask:s,images:l}=e,d=s.subElements.find((e=>"NAME_SURNAME"===e.elementType)),c=null===(t=d)||void 0===t?void 0:t.id;const u=d;let h=!1,p=!1;const m=[];if(a.find((e=>"REM_SUB"===e.type&&e.value.subId===c&&e.value.superId===s.id))){var g,v;const e=null===(g=a.find((e=>"ADD_SUB"===e.type&&e.value.superId===s.id)))||void 0===g?void 0:g.value.subId;d=(0,A.rr)(l,e),c=null===(v=d)||void 0===v?void 0:v.id,p=!0}if(r.fieldIds.forEach((e=>{var t,a;const i=(0,A.rr)(l,e),n=(0,A.rr)(l,null===i||void 0===i||null===(t=i.superElements)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.id);(null===u||void 0===u?void 0:u.id)!==(null===n||void 0===n?void 0:n.id)&&(p||(null===u||void 0===u?void 0:u.elementType)!==(null===n||void 0===n?void 0:n.elementType)?Array.isArray(null===i||void 0===i?void 0:i.rects)&&i.rects.forEach((e=>{r.rects.find(lw(e,!0))&&m.push({type:"REM_RECT",value:{partitionKey:i.partitionKey,id:i.id,rect:e}})})):(h=!0,d=n,c=n.id))})),!d){const e=a.find((e=>"CREATE_ELEMENT"===e.type&&"NAME_SURNAME"===e.value.elementType));c=null===e||void 0===e?void 0:e.value.id}const y=(0,Je.cN)(r.text,n);let f=[];if(c){var b;const e=null===(b=d)||void 0===b?void 0:b.subElements.find((e=>e.fieldType===o));let t=null===e||void 0===e?void 0:e.id;e||(t=(0,A.Vs)(),f=f.concat([{type:"CREATE_ELEMENT",value:{id:t,partitionKey:s.partitionKey,elementType:"FIELD",extraArgs:{fieldType:o}}},{type:"ADD_SUB",value:{superPartitionKey:s.partitionKey,subPartitionKey:s.partitionKey,superId:c,subId:t,elementType:"NAME_SURNAME"}}])),h&&(a.forEach((e=>{e.value.id===u.id&&(e.value.id=c),e.value.superId===u.id&&(e.value.superId=c)})),a.find((e=>"REM_SUB"===e.type&&e.value.subId===c&&e.value.superId===s.id))||(f.push({type:"ADD_SUB",value:{superPartitionKey:s.partitionKey,subPartitionKey:s.partitionKey,superId:s.id,subId:c,elementType:"NAME"}}),u&&f.push({type:"REM_SUB",value:{superPartitionKey:s.partitionKey,subPartitionKey:s.partitionKey,superId:s.id,subId:u.id,elementType:"NAME"}})),u.subElements.forEach((e=>{a.find((t=>"REM_SUB"===t.type&&t.value.subId===e&&t.value.superId===u.id))||(f.push({type:"REM_SUB",value:{superPartitionKey:s.partitionKey,subPartitionKey:s.partitionKey,superId:u.id,subId:e.id,elementType:"NAME_SURNAME"}}),f.push({type:"ADD_SUB",value:{superPartitionKey:s.partitionKey,subPartitionKey:s.partitionKey,superId:c,subId:e.id,elementType:"NAME_SURNAME"}}))}))),f.push({type:"ADD_FV",value:{fieldValue:y,id:t,partitionKey:s.partitionKey}}),e?f=f.concat(cw(e,r.rects,s)):r.rects.forEach((e=>{f.push({type:"ADD_RECT",value:{partitionKey:s.partitionKey,id:t,rect:e}})}))}else f=dw({nameSuperId:i,elementType:"NAME_SURNAME",fieldType:o,text:r.text,rects:r.rects,attribution:n,currentTask:s});return{dispatches:f,removeDispatches:m}})({dispatches:o,nameSuperId:r,nameValue:l,attribution:{...n,reasonId:uw(l,t,i)},fieldType:i,currentTask:t,images:a});o=o.concat(e.dispatches),s=s.concat(e.removeDispatches)}})),s=s.filter((e=>"REM_RECT"!==e.type||!s.find((t=>"REMOVE_ELEMENT"===t.type&&t.value.id===e.value.id)))),o=hw(o),o=pw(o),s=hw(s),s=pw(s);const l=gw(o,s,t,i);return o=o.concat(l),{dispatches:o,removeDispatches:s}},yw=(0,y.Ay)("rip:FullNameCorrection:reducer"),fw={highlights:[],editHighlights:[],stepThree:{},stepFour:{},userId:"",creatingRect:!1,activeFieldId:"",selectedPersonId:"",userPerformedFix:!1,noGivenOrSurnameError:!1,emptyGivenOrSurnameError:!1,tasksMarkedNotAPerson:[],currentNameParts:{}};function bw(e,t){var a,i,r,n,o,s;switch(yw("reducer called: ",e,t.type,t),t.type){case"SET_USER_PERFORMED_FIX":return{...e,userPerformedFix:!0};case"BATCH_DISPATCHES":return t.value.reduce(bw,e);case"SET_USER_ID":return{...e,userId:t.value};case"SET_CURRENT_NAME_PARTS":case"SET_STEP_THREE":{var l,d,c,u;const a=!(null!==(l=t.value)&&void 0!==l&&null!==(d=l.NAME_GN)&&void 0!==d&&d.fields.length||null!==(c=t.value)&&void 0!==c&&null!==(u=c.NAME_SURN)&&void 0!==u&&u.fields.length),i=e=>{Object.entries(e).forEach((e=>{let[,t]=e;const a=t.fields;a.length&&a.forEach((e=>{e.userEnteredValue=(0,$e.tK)(e.userEnteredValue)}))}))};return i(t.value),{...e,stepThree:t.value,currentNameParts:t.value,noGivenOrSurnameError:a,emptyGivenOrSurnameError:a}}case"SET_STEP_FOUR":return{...e,stepFour:t.value,emptyGivenOrSurnameError:!(null!==(a=t.value)&&void 0!==a&&null!==(i=a.NAME_GN)&&void 0!==i&&null!==(r=i.text)&&void 0!==r&&r.trim()||null!==(n=t.value)&&void 0!==n&&null!==(o=n.NAME_SURN)&&void 0!==o&&null!==(s=o.text)&&void 0!==s&&s.trim())};case"SET_CREATING_RECT":return{...e,creatingRect:t.value};case"SET_ACTIVE_FIELD_ID":return{...e,activeFieldId:t.value};case"SET_SELECTED_PERSON_ID":return{...e,selectedPersonId:t.value};case"SET_HIGHLIGHTS":return{...e,highlights:on()(t.value)};case"SET_EDIT_HIGHLIGHTS":return{...e,editHighlights:on()(t.value)};case"ADD_TO_NOT_PERSON_TASKS":return{...e,tasksMarkedNotAPerson:[...e.tasksMarkedNotAPerson,t.value]};case"REMOVE_FROM_NOT_PERSON_TASKS":return{...e,tasksMarkedNotAPerson:[...e.tasksMarkedNotAPerson.filter((e=>e!==t.value))]};default:throw new Error(`Unhandled type in Full Name reducer: ${t.type}`)}}const Aw=(0,i.createContext)({}),ww=(0,i.createContext)({});function Tw(e){let{children:t}=e;const[a,r]=(0,i.useReducer)(bw,fw);return(0,k.Y)(Aw.Provider,{value:a},(0,k.Y)(ww.Provider,{value:r},t))}const Iw=()=>(0,i.useContext)(Aw),Sw=()=>(0,i.useContext)(ww),Ew={tasks:[],currentTask:{subElements:[]},currentIndex:0,artifactId:"",doneCount:0,goal:-1,loading:!1},kw=(e,t)=>{switch(t.type){case"UPDATE_TASKLIST":return{...e,tasks:t.value,currentTask:t.value[e.currentIndex]};case"LOAD_IMAGE":var a;return{...e,doneCount:0===e.doneCount?0:e.doneCount+1,tasks:t.value.newTaskList,currentTask:null===(a=t.value.newTaskList)||void 0===a?void 0:a[0],currentIndex:0,loading:!1,artifactId:t.value.artifactId};case"CONTINUE_WITH_NEW_GOAL":{const t=e.currentIndex+1;return{...e,doneCount:0,currentIndex:t,currentTask:e.tasks[t]}}case"GO_TO_PREVIOUS_TASK":{const t=e.currentIndex>0?e.currentIndex-1:0;return{...e,doneCount:e.doneCount>0?e.doneCount-1:0,currentIndex:t,currentTask:e.tasks[t]}}case"GO_TO_NEXT_TASK_WITHOUT_UPDATING_PROGRESS":{const t=(e.currentIndex||0)+1;return{...e,currentIndex:t,currentTask:e.tasks[t]}}case"GO_TO_NEXT_TASK":{const t=(e.currentIndex||0)+1;return{...e,doneCount:(e.doneCount||0)+1,currentIndex:t,currentTask:e.tasks[t]}}case"SKIP_TASK":{const t=(e.currentIndex||0)+1;return{...e,currentIndex:t,currentTask:e.tasks[t]}}case"SET_TASKS_GOAL":return{...e,goal:t.value||0};case"SET_LOADING":return{...e,loading:t.value};default:throw new Error(`Unhandled action type: ${t.type}`)}},Cw=(0,y.Ay)("rip:useTasks2"),xw=new fi.Ay({storeName:"RIP_settings"});function Yw(e){let{currentTaskUpdated:t,generateTasks:a,goalDefault:r,goalCacheKey:n,onGoalCompleted:o=()=>{},setError:s,types:l}=e;if(!r)throw new Error('You need to pass in a "goalDefault" to useTasks');if(!t)throw new Error('You need to pass in a "currentTaskUpdated" to useTasks');if(!a)throw new Error('You need to pass in a "generateTasks" to useTasks');const{query:d,setQuery:c}=(0,G.A)(),{action:u,task:h,placeCode:p,language:m,surname:g,debugArk:v}=d,[y,f]=(0,i.useReducer)(kw,Ew),b=(0,L.u)("shared_dasProxy"),A=(0,i.useRef)(!1);(0,i.useEffect)((()=>{xw.getItem(n).then((e=>{f({type:"SET_TASKS_GOAL",value:e||r})}))}),[]);const w=(0,i.useCallback)((async()=>{var e;const t=!(null!==(e=y.tasks)&&void 0!==e&&e.length);let i;var r,n,o,l,d,w;if(v&&!A.current)i=await(0,Se.pr)({partitionKey:v,fsUserAgentChain:qe.YU,includeActions:!1}),i={slsImageInfo:i,artifactId:await(0,xe.eN)(null===(r=i)||void 0===r||null===(n=r.elements)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.partitionKey),artifactUrl:(0,xe.F)(null===(l=i)||void 0===l||null===(d=l.elements)||void 0===d||null===(w=d[0])||void 0===w?void 0:w.partitionKey,b.isOn)},A.current=!0;else try{f({type:"SET_LOADING",value:!0}),i=await sA({placeCode:p,language:m,isFirstRequest:t,apid:v?null:y.artifactId,action:u,taskType:h,surname:g})}catch(E){var T,I;if("NoMoreTasks"!==(null===E||void 0===E?void 0:E.message)&&"TaskExpired"!==(null===E||void 0===E?void 0:E.message)&&"No names on task"!==(null===E||void 0===E?void 0:E.message))(0,$e.Yt)(E,"",{codeId:667,status:null===E||void 0===E||null===(T=E.response)||void 0===T?void 0:T.status,responseBody:null===E||void 0===E||null===(I=E.response)||void 0===I?void 0:I.data});s(E.message)}if(i){var S;const e=a({data:i});c({autoGenImageArk:null===e||void 0===e||null===(S=e[0])||void 0===S?void 0:S.partitionKey}),f({type:"LOAD_IMAGE",value:{newTaskList:e,artifactId:i.artifactId}})}}),[v,u,a,m,p,c,b.isOn,y.tasks,y.artifactId,g,h,s]),T=(0,i.useRef)(!0);(0,i.useEffect)((()=>{!be()(l)&&T.current&&(w(),T.current=!1)}),[l]);const I=(0,i.useCallback)((()=>{if(0===y.currentIndex)return;if(0===y.doneCount)return;const e=kw(y,{type:"GO_TO_PREVIOUS_TASK",value:null});f({type:"GO_TO_PREVIOUS_TASK",value:null}),t({newTask:e.currentTask}),(0,vi.sx)({event_name:"click_action",link_name:"Back"})}),[t,y]),S=(0,i.useCallback)((async e=>{if(-1===y.goal)throw new Error("Set a goal before calling goToNextTask \ud83d\ude05. Pass into useTasks, goalDefault, for a quick and dirty fix. Pass in goalCacheKey to start caching a users goal preference");const a=y.doneCount===y.goal-1,i=y.currentIndex===y.tasks.length-1;a?e&&1===y.goal?i?await w():(f({type:"GO_TO_NEXT_TASK_WITHOUT_UPDATING_PROGRESS",value:null}),t({newTask:y.tasks[y.currentIndex+1]})):o():i?i&&await w():(f({type:"GO_TO_NEXT_TASK",value:null}),t({newTask:y.tasks[y.currentIndex+1]})),(0,vi.sx)({event_name:"click_action",link_name:"Next"})}),[t,w,o,y]),E=(0,i.useCallback)((async()=>{const e=y.currentIndex===y.tasks.length-1;e?e&&await w():(f({type:"SKIP_TASK",value:null}),t({newTask:y.tasks[y.currentIndex+1]})),(0,vi.sx)({event_name:"click_action",link_name:"Skip"})}),[t,w,y]),k=(0,i.useCallback)((async e=>{const a=y.currentIndex===y.tasks.length-1;f({type:"SET_TASKS_GOAL",value:e}),a?await w():(f({type:"CONTINUE_WITH_NEW_GOAL",value:null}),t({newTask:y.tasks[y.currentIndex+1]})),n&&0!==e&&xw.setItem(n,e)}),[w,y.currentIndex,y.tasks,n,t]),C=(0,i.useCallback)((e=>{let{newTaskList:t}=e;if(!t)throw new Error("NewTaskList is empty!");f({type:"UPDATE_TASKLIST",value:t})}),[]),x=(0,i.useCallback)((async()=>{try{f({type:"SET_LOADING",value:!0});const{data:t,headers:i}=await rA(m,p,h,g),r=await oA(t,i,!0);if(r){var e;const t=a({data:r});c({autoGenImageArk:null===t||void 0===t||null===(e=t[0])||void 0===e?void 0:e.partitionKey}),f({type:"LOAD_IMAGE",value:{newTaskList:t,artifactId:r.artifactId}})}}catch(r){var t,i;if("NoMoreTasks"===(null===r||void 0===r?void 0:r.message)||"TaskExpired"===(null===r||void 0===r?void 0:r.message)||"No names on task"===(null===r||void 0===r?void 0:r.message))return void s(r.message);(0,$e.Yt)(r,"",{codeId:667,status:null===r||void 0===r||null===(t=r.response)||void 0===t?void 0:t.status,responseBody:null===r||void 0===r||null===(i=r.response)||void 0===i?void 0:i.data}),window.location.reload()}}),[m,p,h,g,a,c,s]);return Cw("new useTasks render",{state:y,action:u,taskType:h,placeCode:p,language:m,surname:g,debugArk:v}),{continueWithNewGoal:k,goToNextTask:S,goToPreviousTask:I,skipTask:E,updateTaskList:C,fetchTaskData:w,getNewImage:x,currentIndex:y.currentIndex,currentTask:y.currentTask,doneCount:y.doneCount,goal:y.goal,loading:y.loading}}const Nw={name:"1hmev9",styles:"display:flex;flex-flow:column;align-items:center;gap:0.25rem;"},Rw=e=>{let{useTasksMethods:t,stepper:a,setFullNamedHighlighted:r,triggerTaskRegeneration:n,setError:o,handleSkip:s,resetSkipCounter:l,showBackButton:d=!0}=e;const[c]=(0,P.B)(),u=(0,$.Ay)(),{currentTask:h,doneCount:p,goToPreviousTask:m,goToNextTask:g,loading:v}=t,{notAPerson:y}=h,f=Iw(),b=Sw(),w=(0,Ae.l)(),T=(0,L.u)("rip_sharedImageViewer_saveChanges"),I=(0,bi.Y)(),S=(0,ci.Ay)()({default:!0,md:!1});(0,i.useEffect)((()=>{if(null!==h&&void 0!==h&&h.partitionKey){const e=[...new Set((0,ia.mV)({element:h}).flatMap((e=>e.fieldId)))];I.setDisplayHighlights({mainPartitionKey:h.partitionKey,elementIds:e,attachFilter:t=>e.includes(t.fieldId),mainZoomFilter:e=>e.attached,setMainZoom:!0,isSmallScreen:S})}}),[null===h||void 0===h?void 0:h.id,S]);const E=(0,i.useCallback)((()=>{r(!0),l(),a.goToStep(3)}),[a,r,l]),C=(0,i.useCallback)((()=>{r(!1),l(),I.setEditMode(!0),a.goToStep(2)}),[a,r,I,l]),x=(0,i.useCallback)((()=>{s()}),[s]),Y=(0,i.useCallback)((async e=>{try{l();let t=[];if(e){b({type:"ADD_TO_NOT_PERSON_TASKS",value:h.id});const e=[];h.personId&&e.push({type:"REM_SUB",value:{superPartitionKey:h.partitionKey,subPartitionKey:h.partitionKey,superId:null!==h&&void 0!==h&&h.personId?h.personId:h.partitionKey,subId:h.id,elementType:"PERSON"}}),e.push({type:"REMOVE_ELEMENT",value:{id:h.id,partitionKey:h.partitionKey,elementType:"NAME"}}),t=(0,wi.q)(e)||[]}else{b({type:"REMOVE_FROM_NOT_PERSON_TASKS",value:h.id});const e=(0,Ai.vc)({partitionKey:h.partitionKey,nameElementId:(0,A.Vs)(),nameType:h.nameType,personId:h.personId?h.personId:h.partitionKey}),a=e;h.subElements.forEach((t=>a.push({type:"ADD_SUB",value:{superPartitionKey:t.partitionKey,subPartitionKey:t.partitionKey,superId:e[0].value.id,subId:t.id,elementType:"NAME"}}))),t=(0,wi.q)(a)||[],h.personId&&(a.push({type:"REM_SUB",value:{superPartitionKey:h.partitionKey,subPartitionKey:h.partitionKey,superId:h.personId,subId:h.id,elementType:"PERSON"}}),a.push({type:"REMOVE_ELEMENT",value:{id:h.id,partitionKey:h.partitionKey,elementType:"NAME"}})),h.recordId&&a.push({type:"SET_RECORD_PERSON_IDS",value:h.recordId}),w({type:"BATCH_DISPATCHES",value:a})}(0,Se.k7)(t,f.userId,qe.YU),T.isOn&&await hA(h.partitionKey,t,!1,!1,"Full Name Review"),n(!0)}catch(t){o(t)}}),[h,b,f.userId,w,T,n,o,l]),N=(0,i.useCallback)((()=>{Y(!h.notAPerson),r(!1),g(!0),u.close()}),[u,r,Y,g,h.notAPerson]),R=(0,i.useCallback)((()=>{Y(!1),l()}),[Y,l]);return(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H2,{size:"H5"},c("full-name-correction.step1.heading","Is this person's full name highlighted?")),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(te.A,{size:"sm"},c("full-name-correction.step1.subHeading","Check for prefixes, suffixes, maiden names, and married names. You'll be able to add or remove highlights in the next step.")),(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)(J.Ay,null,(0,k.Y)("div",{css:Nw},(0,k.Y)(ee.A,{title:c("full-name-correction.step-one-yes","Yes"),Icon:vn.A,onClick:E,linkName:"Full Name: Step One Yes",color:"green",emphasis:"lightHigh",size:"lg",disabled:v||y}),(0,k.Y)(te.A,{centered:!0,size:"sm"},c("full-name-correction.step-one-yes","Yes"))),(0,k.Y)("div",{css:Nw},(0,k.Y)(ee.A,{title:c("full-name-correction.step-one-no","No"),Icon:$g.A,onClick:C,linkName:"Full Name: Step One No",color:"red",emphasis:"lightHigh",size:"lg",disabled:v||y}),(0,k.Y)(te.A,{centered:!0,size:"sm"},c("full-name-correction.step-one-no","No"))),(0,k.Y)("div",{css:Nw},(0,k.Y)(ee.A,{title:y?c("full-name-correction.step-one-next","Next"):c("full-name-correction.step-one-unsure","Unsure"),Icon:pe.A,onClick:x,linkName:y?"Full Name: Step One Next":"Full Name: Step One Unsure",color:"blue",emphasis:"lightHigh",size:"lg",disabled:v}),(0,k.Y)(te.A,{centered:!0,size:"sm"},y?c("full-name-correction.step-one-next","Next"):c("full-name-correction.step-one-unsure","Unsure")))),(0,k.Y)(ae.A,{size:"xs"}),p>0&&d&&(0,k.Y)(J.Ay,null,(0,k.Y)(Z.A,{title:c("navigation.back-button","Back"),Icon:pe.A,iconDirection:"backward",onClick:m,linkName:"Full Name: Back"},c("navigation.back-button","Back"))),(0,k.Y)(Z.A,{title:y?c("navigation.restore-nap-button","Restore Person"):c("navigation.not-a-person-button","Not A Person"),Icon:gi.A,onClick:y?R:u.handleClick,linkName:y?"Full Name: Restore Person":"Full Name: Not A Person",color:"blue",emphasis:"low",size:"sm",disabled:v},y?c("navigation.restore-nap-button","Restore Person"):c("navigation.not-a-person-button","Not A Person")),y&&(0,k.Y)(te.A,{size:"sm"},(0,k.Y)("span",{style:{color:W.A.danger50}},c("full-name-correction.step1.restore-person-text",'This person was marked "Not a Person". Restore using the button above to work on the full name.'))),(0,k.Y)(QA,{overlay:u,handleClickConfirmNotAPerson:N}))},Pw=e=>{let{useTasksMethods:t}=e;const[a]=(0,P.B)(),r=(0,bi.Y)(),n=(0,ci.Ay)()({default:!0,md:!1}),{currentTask:o}=t;return(0,i.useEffect)((()=>{if(null!==o&&void 0!==o&&o.partitionKey){const e=(0,ia.mV)({element:o}).flatMap((e=>e.fieldId));r.setDisplayHighlights({mainPartitionKey:o.partitionKey,mainZoomFilter:e=>e.attached,attachFilter:t=>e.includes(t.fieldId)||t.attached,setMainZoom:!0,isSmallScreen:n})}}),[o]),(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H2,{size:"H5"},a("full-name-correction.step2.heading","Add or remove highlights to complete this person's full name.")),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(te.A,{size:"sm"},a("full-name-correction.step2.tips-content-1",'Remember to include any maiden names, married names, and prefixes or suffixes, such as "Mrs.", "Mr.", and "Jr."')),(0,k.Y)(te.A,{size:"sm"},a("full-name-correction.step2.tips-content-2","(Note: if you see a name more than once, you don't need to select it here.)")),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(Oo,null),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(Z.A,{Icon:Ar.A,onClick:()=>r.setCreatingRects(!0),"data-testid":"editHighlightTipsNewHighlightButton",linkName:"New Highlight"},a("editHighlight.highlightTips.newHighlight","New highlight")))};var Ow=a(52521),_w=a(70569);const Fw={display:"flex",marginTop:"8px",backgroundColor:W.A.gray00,borderRadius:"6px"},Dw={flexGrow:1,padding:"10px"};function Mw(e){const{id:t,children:a,dragHandle:i,data:r}=e,{attributes:n,listeners:o,setNodeRef:s,transform:l,transition:d}=(0,Ow.gl)({id:t,data:r}),c=(null===r||void 0===r?void 0:r.draggableStyle)||Fw,u=(null===r||void 0===r?void 0:r.childrenStyle)||Dw,h={transform:_w.Ks.Transform.toString(l),transition:d};return(0,k.Y)("div",(0,j.A)({ref:s,style:h},n),(0,k.Y)("div",{style:c},(0,k.Y)("div",{style:u},a),(0,k.Y)("div",o,i)))}const Hw=["NAME_PRE","NAME_GN","NAME_SPRE","NAME_SURN","NAME_SUF","NAME_PATR","NAME_MATR"],Lw=(0,k.AH)("background-color:",W.A.blue30,";padding:12px 8px;border-start-end-radius:6px;border-end-end-radius:6px;cursor:grab;"),zw=e=>{let{fields:t,fieldType:a,nameField:r}=e;const[n]=(0,P.B)(),o=Iw(),s=Sw(),l=(0,bi.Y)(),d=n("full-name-correction.step3.drop-spot-text","DRAG NAME FIELDS HERE."),c={backgroundImage:"url(\"data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' stroke='%233ac' stroke-width='3' stroke-dasharray='6%2c 14' stroke-dashoffset='0' stroke-linecap='square'/%3e%3c/svg%3e\")",height:"70px",padding:"10px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"};return(0,k.Y)(Zn,{id:r.fieldType,data:{fieldType:r.fieldType}},(0,k.Y)(Ow.gB,{items:t||[],strategy:Ow._G},(0,k.Y)(re.H6,null,`${r.label}:`),null===t||void 0===t?void 0:t.map(((e,t)=>(0,k.Y)(i.Fragment,{key:e.id},(0,k.Y)(Mw,{id:e.id,data:{fieldType:a,draggableStyle:{display:"flex",marginTop:"8px",backgroundColor:W.A.gray00,borderRadius:"6px",maxHeight:"48px"},childrenStyle:{flexGrow:1,padding:"4px"}},dragHandle:(0,k.Y)("div",{css:Lw},(0,k.Y)($n.A,null))},(0,k.Y)(pn.A,{"data-testid":`${r.fieldType}-${t}`,errorMessage:null===e||void 0===e?void 0:e.errorMessage,placeholder:r.label,value:null===e||void 0===e?void 0:e.userEnteredValue,onChange:t=>((e,t)=>{var i,r;const l=on()(o.currentNameParts),d=null===(i=l[a])||void 0===i||null===(r=i.fields)||void 0===r?void 0:r.find((e=>e.id===t));d.userEnteredValue=e,e!==(0,$e.tK)(e)?d.errorMessage=n("task-viewer.error.illegal-characters","You can only enter ' - , . diacritic, and alphanumeric characters."):d.errorMessage="",s({type:"SET_CURRENT_NAME_PARTS",value:l})})(t.target.value,e.id),onFocus:()=>{l.hoverHighlights({mainScreenHighlightsIds:[e.id]})},onBlur:()=>l.hoverHighlights({mainScreenHighlightsIds:[]})})),(null===e||void 0===e?void 0:e.errorMessage)&&(0,k.Y)(ae.A,{size:"md"})))),!(null!==t&&void 0!==t&&t.length)&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)("div",{css:c},(0,k.Y)(Ft.A,null,d))),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(oe.A,{marginY:"xs"})))},Vw=e=>{let{currentTask:t,types:a}=e;const[r]=(0,P.B)(),n=Iw(),o=Sw(),{displayHighlightsApi:s}=(0,je.Z0)(),[l,d]=(0,i.useState)([]),[c,u]=(0,i.useState)([]),[h,p]=(0,i.useState)([]),[m,g]=(0,i.useState)([]),v=(0,$.Ay)(),y=(0,bi.Y)(),f=(0,Wn.FR)((0,Wn.MS)(Wn.AN),(0,Wn.MS)(Wn.uN,{coordinateGetter:Ow.JR})),b=(0,i.useMemo)((()=>{const e=Object.values(n.currentNameParts).reduce(((e,t)=>(t.fields.forEach((t=>{e.find((e=>e.fieldType===t.fieldType))||e.push({id:t.id,fieldType:t.fieldType})})),e)),[]),t={subElements:[]};return e.forEach((e=>{t.subElements.push({subElements:[e]})})),t}),[]),{selectedFieldData:A,treatedNameFieldChipData:w}=So(b,a,h,l,c),T=ed()((e=>{o({type:"SET_CURRENT_NAME_PARTS",value:e})}),50),I=(0,i.useCallback)((e=>{s.hover(e)}),[s]);(0,i.useEffect)((()=>{p(on()(A))}),[A]);const S=(0,i.useCallback)((e=>{const t=n.currentNameParts[e.active.data.current.fieldType].fields.find((t=>t.id===e.active.id));I(t.id)}),[I,n.currentNameParts]),E=(0,i.useCallback)((e=>{const t=on()(n.currentNameParts);(e=>{var t,a,i;let{event:r,handleDispatchNewStepThree:n,updatedStepThree:o}=e;const{active:s,over:l}=r,d=null===o||void 0===o||null===(t=o[null===s||void 0===s||null===(i=s.data.current)||void 0===i?void 0:i.fieldType])||void 0===t||null===(a=t.fields)||void 0===a?void 0:a.find((e=>e.id===s.id));if(Hw.includes(null===l||void 0===l?void 0:l.id)&&Hw.includes(null===s||void 0===s?void 0:s.data.current.fieldType)&&s.data.current.fieldType!==(null===l||void 0===l?void 0:l.id)&&d){var c,u;const e=null===(c=o[d.fieldType])||void 0===c||null===(u=c.fields)||void 0===u?void 0:u.indexOf(d);d.fieldType=l.id,o[d.fieldType]||(o[d.fieldType]={fields:[]}),s.rect.current.initial.top-s.rect.current.translated.top<0?o[d.fieldType].fields.unshift(d):o[d.fieldType].fields.push(d),o[s.data.current.fieldType].fields.splice(e,1),o[s.data.current.fieldType].fields.length||delete o[s.data.current.fieldType],n(o)}})({event:e,handleDispatchNewStepThree:T,updatedStepThree:t,handleHoverOnDrag:I})}),[T,I,n.currentNameParts]),C=(0,i.useCallback)((e=>{I([]);const t=on()(n.currentNameParts);(e=>{let{event:t,handleDispatchNewStepThree:a,updatedStepThree:i}=e;const{active:r,over:n}=t;if(n&&r.id!==n.id){var o,s;const e=null===(o=i[n.data.current.fieldType])||void 0===o||null===(s=o.fields)||void 0===s?void 0:s.find((e=>e.id===n.id));if(e){var l,d,c,u,h;const t=null===(l=i[r.data.current.fieldType].fields)||void 0===l?void 0:l.find((e=>e.id===r.id)),n=null===(d=i[t.fieldType])||void 0===d||null===(c=d.fields)||void 0===c?void 0:c.indexOf(t),o=null===(u=i[e.fieldType])||void 0===u||null===(h=u.fields)||void 0===h?void 0:h.indexOf(e);i[r.data.current.fieldType].fields.splice(n,1),i[e.fieldType]&&i[e.fieldType].fields&&i[e.fieldType].fields.splice(o,0,t),a(i)}}})({event:e,handleDispatchNewStepThree:T,updatedStepThree:t})}),[T,I,n.currentNameParts]);return(0,k.Y)(Wn.Mp,{sensors:f,collisionDetection:Wn.Qo,onDragStart:S,onDragOver:E,onDragEnd:C},(0,k.Y)(re.H2,{size:"H5"},r("full-name-correction.step3.heading","Drag the name parts below via the blue drag icon to the correct label and order.")),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(te.A,{size:"sm"},r("full-name-correction.step3.must-have-name-part","Must have a name part in Given Name or Surname.")),(0,k.Y)(go,{primaryText:r("full-name-correction.step3.tip.heading","Why is there an empty text box?"),listPrimaryText:r("full-name-correction.tip.main","Each text box is connected to a single highlight. Click on the box to see which higlight is connected to what.")}),(0,k.Y)(go,{primaryText:r("full-name-correction.step3.tip2.heading","Do I have to fill every text box?"),listPrimaryText:r("full-name-correction.step3.tip2.main","No, the text boxes are there to help you move the highlights to the right sections. As long as the text is in the right order and location, it will be combined in step four.")}),(0,k.Y)(ae.A,null),(0,k.Y)(Ye.A,{backgroundColor:W.A.blue03},(0,k.Y)(i.Fragment,null,h.sort(((e,t)=>{var a,i;return(null===(a=Ee.kV.find((t=>t.fieldType===e.fieldType)))||void 0===a?void 0:a.value)-(null===(i=Ee.kV.find((e=>e.fieldType===t.fieldType)))||void 0===i?void 0:i.value)})).map((e=>{var t;return(0,k.Y)(zw,{fields:null===(t=n.currentNameParts[e.fieldType])||void 0===t?void 0:t.fields,fieldType:e.fieldType,nameField:e,key:e.fieldType})}))),(0,k.Y)(Si.A,{"data-testid":"add-or-remove-fields-button",emphasis:"low",Icon:Ci.A,onClick:v.handleClick},r("edit-index.add-fields.button","Add or Remove Fields"))),n.noGivenOrSurnameError&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)(Pu.A,{type:"error"},r("full-name-correction.step3.must-have-name-part","Must have a name part in Given Name or Surname."))),(0,k.Y)(An,{allowSelectingMultiple:!1,title:r("edit-index.add-fields.title","Add or Remove Fields"),chipData:[{title:r("edit-index.chips.name-fields.title","Name"),data:w,key:`nameFields-${t.id}`}],fieldData:h,handleSelection:e=>{const t=[...h],a=on()(n.currentNameParts),{mainEditHighlights:i}=y.getHighlights(),r=[...i];let l=[...m];h.filter((t=>!e.map((e=>{let{id:t}=e;return t})).includes(t.id))).forEach((e=>{a[e.fieldType]&&(a[e.fieldType].fields.forEach((e=>{r.find((t=>t.id===e.id)).attached=!1,s.remove(e.id),l.push(e)})),delete a[e.fieldType]);const i=t.findIndex((t=>t.id===e.id));t.splice(i,1)}));const d=e.filter((e=>!e.id));d&&d.forEach((e=>{const i={label:e.label,fieldType:e.value.split(":")[0],id:(0,$e.Vs)(),added:!0};t.push(i),l.filter((e=>e.fieldType===i.fieldType)).forEach((e=>{r.find((t=>t.id===e.id)).attached=!0,s.add(e.id,n.highlights.find((t=>t.id===e.id))),a[i.fieldType]||(a[i.fieldType]={fields:[]}),a[i.fieldType].fields.push(e)})),l=l.filter((e=>e.fieldType!==i.fieldType))})),g(l),o({type:"SET_CURRENT_NAME_PARTS",value:a});const c={subElements:[{elementType:"NAME",subElements:t}]};(0,Ee.qz)(c),p(t)},handleSelectionChange:(e,t)=>{d(e),u(t)},overlay:v,disabledFunc:Eo}))},Bw=e=>{var t;let{types:a=[]}=e;const[r]=(0,P.B)(),n=(0,bi.Y)(),{getValues:o,control:s}=(0,ur.Hj)(),{errors:l}=(0,hr.lN)({control:s}),d=o("step4"),c=Object.keys(d).sort(((e,t)=>{var a,i;return(null===(a=Ee.kV.find((t=>t.fieldType===e)))||void 0===a?void 0:a.value)-(null===(i=Ee.kV.find((e=>e.fieldType===t)))||void 0===i?void 0:i.value)})),u=(0,i.useCallback)((e=>{var t,i;return null===a||void 0===a||null===(t=a.fields)||void 0===t||null===(i=t.find((t=>t.fieldType===e)))||void 0===i?void 0:i.displayLabel}),[null===a||void 0===a?void 0:a.fields]);return(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H2,{size:"H5"},r("full-name-correction.step4.heading","Correct the spelling of each part of this person's name.")),(0,k.Y)(ae.A,{size:"xs"}),c.map((e=>(0,k.Y)(mr.YJ,{"data-testid":e,key:e,name:`step4.${e}.text`,label:u(e),placeholder:u(e),onFocus:()=>{n.hoverHighlights({mainScreenHighlightsIds:d[e].highlightIds})},onBlur:()=>{n.hoverHighlights({mainScreenHighlightsIds:[]})}}))),(null===l||void 0===l||null===(t=l.step4)||void 0===t?void 0:t.root)&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(Pu.A,{type:"error"},l.step4.root.message)))},Gw=e=>{let{currentNameParts:t={}}=e;const a={};return Object.keys(t).forEach((e=>{let i="",r="";const n=[];t[e].fields.forEach((e=>{i+=`${e.userEnteredValue} `,r=null===e||void 0===e?void 0:e.originalValue,n.push(e.id)})),a[e]={text:i.trim(),originalValue:r,highlightIds:n}})),a},Uw=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{step1:{originalData:e},step4:Gw({currentNameParts:e})}},Kw=(0,y.Ay)("rip:FullNameCorrection"),qw=e=>{let{stepper:t,types:a,useTasksMethods:r,finishedOverlay:n,generateTasks:o,setError:s,handleSkip:l,resetSkipCounter:d}=e;const[c]=(0,P.B)(),{query:u}=(0,G.A)(),{task:h}=u,p=Iw(),m=Sw(),g=(0,b.A)(),v=(0,Ae.l)(),y=(0,ma.A)({initiallyOpen:!0}),[f,w]=(0,i.useState)(!1),[T,I]=(0,i.useState)(!1),{currentTask:S,currentIndex:E,goal:C,doneCount:x,goToPreviousTask:Y,goToNextTask:N,updateTaskList:R}=r,O=(0,bi.Y)(),{rip_sharedImageViewer_saveChanges:_,rip_sharedImageViewer_statsTracking:F,rip_sharedImageViewer_fullNameReviewNextBackButton:D}=(0,L.h)(["rip_sharedImageViewer_saveChanges","rip_sharedImageViewer_statsTracking","rip_sharedImageViewer_fullNameReviewNextBackButton"]),M=(0,i.useRef)(E);E>M.current&&(M.current=E);const H=x+1<C&&E<M.current,{currentStep:z}=t,V=(0,ur.SV)({mode:"all",defaultValues:Uw(p.currentNameParts),resolver:async e=>((e,t)=>{const a={step4:{}};let i=!1;const r=null===e||void 0===e?void 0:e.step4;return r&&(Object.keys(r).forEach((r=>{const n=e.step4[r].text.trim();/^[a-zA-Z0-9\xc0-\u017e\s\-',.]+$/.test(n)?i=!0:n&&(a.step4[r]={text:{message:t("task-viewer.error.illegal-characters","You can only enter ' - , . diacritic, and alphanumeric characters.")}})})),i||(a.step4.root={message:t("full-name-correction.step4.must-have-name-value","Given Name or Surname must not be empty.")})),0===Object.keys(null===a||void 0===a?void 0:a.step4).length&&delete a.step4,{values:e,errors:a}})(e,c)}),B=(0,i.useCallback)((async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const a=(0,wi.q)(e);(0,Se.k7)(a,p.userId,qe.YU),_.isOn?null!==a&&void 0!==a&&a.length&&(Kw("saveSls: ",{sls:a}),await hA(g.currentImageArk,a,!1,!1,h)):Kw("Saving changes to SLS is disabled"),t&&v({type:"BATCH_DISPATCHES",value:e})}),[_.isOn,p.userId,h,g.currentImageArk,v]),U=(0,i.useCallback)((()=>{O.setCreatingRects(!1),O.clearEdits();const e=V.getValues("step1.originalData");m({type:"SET_CURRENT_NAME_PARTS",value:e}),t.goToStep(1)}),[t,m,V,O]),K=(0,i.useCallback)((()=>{O.setCreatingRects(!1);const{mainEditHighlights:e}=O.stageEdits(),a=e.filter((e=>e.attached));O.setDisplayHighlights({mainPartitionKey:S.partitionKey,highlights:a}),(e=>{let{mainHighlights:t,state:a,zionSlsState:i,t:r,dispatch:n}=e;const o=[],s={},l=Object.values(a.currentNameParts).reduce(((e,t)=>(Object.values(t).forEach((t=>{e=e.concat(t)})),e)),[]);t.filter((e=>e.attached)).forEach((e=>{const t=l.find((t=>t.fieldId===e.originalHighlight.fieldId)),a=(0,A.rr)(i.images,e.originalHighlight.fieldId);let d="NAME_GN";t?(s[t.fieldType]||(s[t.fieldType]={fields:[]}),s[t.fieldType].fields.push({elementType:t.elementType,partitionKey:t.partitionKey,fieldId:t.id,superElements:t.superElements,fieldType:t.fieldType,id:e.id,rects:[(0,ia.eS)(e)],typeData:t.typeData,confidence:t.confidence,userEnteredValue:s[t.fieldType].fields.find((e=>e.id===t.id))?"":t.userEnteredValue})):a?(Hw.includes(a.fieldType)&&(d=a.fieldType),s[d]||(s[d]={fields:[]}),s[d].fields.push({elementType:a.elementType,partitionKey:a.partitionKey,fieldId:a.id,superElements:a.superElements,fieldType:d,id:null===e||void 0===e?void 0:e.id,rects:[(0,ia.eS)(e)],typeData:a.typeData,confidence:a.confidence,userEnteredValue:s[d].fields.find((e=>e.fieldId===a.id))?"":(0,A.OV)(a)})):(e.change&&"edit"===e.change&&o.push(e),s[d]||(s[d]={fields:[]}),s[d].fields.push({elementType:"FIELD",partitionKey:l[0].partitionKey,fieldId:(0,A.Vs)(),superElements:[],fieldType:d,id:e.id,rects:[(0,ia.eS)(e)],typeData:{displayLabel:r("full-name-correction.name-input.placeholder-text","Name")},confidence:"",userEnteredValue:""})),n({type:"SET_CURRENT_NAME_PARTS",value:s})}))})({mainHighlights:e,state:p,zionSlsState:g,t:c,dispatch:m}),t.nextStep()}),[t,S.partitionKey,O,m,p,g,c]),q=(0,i.useCallback)((()=>{V.setValue("step4",Gw({currentNameParts:p.currentNameParts}),{shouldDirty:!0,shouldTouch:!0}),V.trigger(),t.nextStep()}),[t,V,p.currentNameParts]),$=(0,i.useMemo)((()=>{switch(z){case 1:return(0,k.Y)(Rw,{useTasksMethods:r,stepper:t,setFullNamedHighlighted:w,triggerTaskRegeneration:I,setError:s,handleSkip:l,resetSkipCounter:d,showBackButton:!D.isOn});case 2:return(0,k.Y)(Pw,{useTasksMethods:r});case 3:return(0,k.Y)(Vw,{currentTask:S,types:a});case 4:return(0,k.Y)(Bw,{types:a});default:return(0,k.Y)(i.Fragment,null)}}),[z,t,S,a,r,s,l,d]),W=(0,i.useMemo)((()=>{switch(z){case 2:return{back:U,next:K};case 3:return{next:q};default:return{next:t.nextStep}}}),[z,K,q,U,t]),X=(0,i.useCallback)((()=>{f&&3===t.currentStep?t.goToStep(1):t.prevStep()}),[f,t]);(0,i.useEffect)((()=>{if(T){const e=o({images:g.images,currentIndex:E});R({newTaskList:e}),I(!1)}}),[o,T,g.images,R,E,m,I]),(0,i.useEffect)((()=>{V.reset(Uw(p.currentNameParts))}),[S,V]);const Q=D.isOn?(0,k.Y)(J.Ay,{alignX:"end",gutters:"md"},(0,k.Y)(Z.A,{Icon:pe.A,iconDirection:"backward",onClick:Y,disabled:x<=0},c("edit-shared-surname-footer.back","Back")),(0,k.Y)(Z.A,{emphasis:"medium",onClick:N,disabled:!H},c("edit-shared-surname-footer.next","Next"))):void 0;return(0,k.Y)(pr.Ay,{methods:V,id:(null===S||void 0===S?void 0:S.id)||"full-name-correction"},(0,k.Y)(ce.A,(0,j.A)({},y,{size:"md",title:c("full-name-correction.infosheet-header","Full Name Review"),subtitle:c("full-name-correction.stepXof4","Step {step} of 4",{step:z}),headingColor:"purple",nonClosable:!0,footer:t.isFirstStep?Q:(0,k.Y)(J.Ay,{alignX:"end"},(0,k.Y)(Z.A,{onClick:(null===W||void 0===W?void 0:W.back)||X},c("navigation.back-button","Back")),t.isLastStep?(0,k.Y)(Z.A,{emphasis:"high",onClick:V.handleSubmit((async e=>{const{step4:a}=e,i={};Hw.forEach((e=>{if(a[e]){var t;const r=a[e].highlightIds,{mainEditHighlights:n}=O.getHighlights();i[e]={originalValue:null===(t=a[e])||void 0===t?void 0:t.originalValue,text:a[e].text,rects:r.map((e=>(0,ia.eS)(n.find((t=>t.id===e))))),fieldIds:Un()(p.currentNameParts[e].fields.map((e=>e.fieldId)))}}else i[e]={originalValue:"",text:"",rects:[],fieldIds:[]}}));try{var r,o;if((null===(r=i.NAME_SURN)||void 0===r||!r.text)&&(null===(o=i.NAME_GN)||void 0===o||!o.text))throw new Error("No name values")}catch(c){return(0,$e.Yt)(c),void s(!0)}const{dispatches:l,removeDispatches:d}=vw(i,S,g.images,_.isOn);try{if(await B(d),await B(l),F.isOn){const e=(e=>{let{nameValues:t,images:a}=e,i=!1;return"object"===typeof t&&Object.entries(t).forEach((e=>{let[t,r]=e;r&&Array.isArray(null===r||void 0===r?void 0:r.fieldIds)&&r.fieldIds.forEach((e=>{const n=(0,A.rr)(a,e);if(!n)return;const o=(0,A.OV)(n),s=n.fieldType;o===r.text&&s===t||(i=!0)}))})),i})({nameValues:i,images:null===g||void 0===g?void 0:g.images});mA({partitionKey:null===S||void 0===S?void 0:S.partitionKey,taskType:"Full Name Review",action:p.userPerformedFix||e?"fixed":"reviewed"})}else pA(S.partitionKey,"Full Name Review");0===C||x+1<C?(N(),I(!0),t.goToStep(1)):n.open()}catch(c){(0,$e.Yt)(c,null===S||void 0===S?void 0:S.partitionKey,{codeId:70,removeDispatches:d,dispatches:l,error:c}),s(c)}}))},c("navigation.done-button","Done")):(0,k.Y)(Z.A,{emphasis:"high",onClick:W.next},c("navigation.next-button","Next")))}),$))},jw=e=>{let{initialStep:t=1,steps:a=2}=e;const[r,n]=(0,i.useState)(t);return{currentStep:r,nextStep:()=>{n((e=>e<a?e+1:e))},prevStep:()=>{n((e=>e>1?e-1:e))},goToStep:e=>{e>=1&&e<=a&&n(e)},resetStepper:()=>{n(t)},isLastStep:r===a,isFirstStep:1===r}},$w={name:"1ylu0bo",styles:"display:flex;flex-direction:column;flex-grow:1;"},Ww=(0,y.Ay)("rip:FullNameCorrection");function Xw(){(0,K.O)({page_channel:"RIP",page_detail:"Full Name Corrections"});const{query:e}=(0,G.A)(),{task:t,placeCode:a,debugArk:r}=e,n=(0,i.useMemo)((()=>Boolean(r)),[r]),o=parseInt(a,10),[s]=(0,P.B)(),{rip_sharedImageViewer_saveChanges:l,rip_sharedImageViewer_feedback_FullName:d}=(0,L.h)(["rip_sharedImageViewer_saveChanges","rip_sharedImageViewer_statsTracking","rip_sharedImageViewer_feedback_FullName"]),c=Iw(),u=Sw(),h=(0,b.A)(),p=(0,Ae.l)(),[m,v]=(0,i.useState)(),[y,f]=(0,i.useState)([]),[w,T]=(0,i.useState)(!1),I=(0,i.useRef)(!1),{tasksMarkedNotAPerson:S}=c,E=jw({steps:4}),C=(0,$.Ay)(),x=(0,$.Ay)(),{displayHighlights:Y,displayHighlightsApi:N}=(0,je.Z0)(),[R,O]=(0,i.useState)(),[_]=(0,i.useState)(""),F=(0,ci.Ay)()({default:!0,md:!1}),[D,M]=(0,i.useState)(!1),H=(0,bi.Y)(),{accessFromPrison:z,isReady:V}=(0,LA.A)(),{data:B}=(0,aa.Zm)({fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],dispatchTypes:!1,lang:"en"}),U=(0,i.useCallback)((e=>{var t;let{newTask:a,imageHighlights:i}=e;i||(i=H.getHighlights().mainEditHighlights);const r={},n=[];if(!be()(null===a||void 0===a?void 0:a.subElements)&&null!==(t=i)&&void 0!==t&&t.length){var o;null!==a&&void 0!==a&&null!==(o=a.subElements)&&void 0!==o&&o.length&&a.subElements.forEach((e=>{var t;null!==e&&void 0!==e&&null!==(t=e.subElements)&&void 0!==t&&t.length&&e.subElements.forEach((e=>{const t=i.filter((t=>t.fieldId===e.id)),a=[];t.forEach(((t,i)=>{var r,o,s;n.push(t.id),a.push({elementType:e.elementType,partitionKey:e.partitionKey,fieldId:e.id,superElements:[...e.superElements],fieldType:e.fieldType,id:t.id,rects:[(0,ia.eS)(t)],typeData:{...e.typeData},confidence:e.confidence,originalValue:(null===e||void 0===e||null===(r=e.fieldValues)||void 0===r||null===(o=r[0])||void 0===o||null===(s=o.origValue)||void 0===s?void 0:s.text)||"",userEnteredValue:0===i&&(0,A.OV)(e)||""})})),a.length&&(r[e.fieldType]={fields:a})}))}));const e=Object.fromEntries(Object.entries(r).sort(((e,t)=>Hw.indexOf(e[0])-Hw.indexOf(t[0]))));u({type:"SET_CURRENT_NAME_PARTS",value:e})}}),[u,H]),q=(0,i.useRef)(null),W=(0,i.useRef)(null),X=(0,i.useCallback)((e=>{var t,a,i;let{data:r,images:o=[],currentIndex:d=0}=e,c=[];if(null!==r&&void 0!==r&&r.slsImageInfo&&null!==r&&void 0!==r&&r.artifactId){var u;q.current=r.artifactId,W.current=r.artifactUrl,o=(0,BA.D2)([{elements:r.slsImageInfo.elements,danglingSupers:r.slsImageInfo.danglingSupers,danglingElementTypes:r.slsImageInfo.danglingElementTypes,danglingElementDescriptions:r.slsImageInfo.danglingElementDescriptions,partitionKey:(0,na.XJ)(q.current)}]).images;const e=null===(u=r.slsImageInfo.elements)||void 0===u?void 0:u.filter((e=>"PERSON"===e.elementType)).map((e=>e.id));c=[{partitionKey:r.slsImageInfo.elements[0].partitionKey,personIds:e||[]}]}(0,Me.OU)(o,B,s("type-unknown.label","<Unknown Type>"));const m=[],g={hasNoRects:0,hasAttribution:0,isNameField:0},v=(0,A.Qc)(o[0]||(null===h||void 0===h||null===(t=h.images)||void 0===t?void 0:t[0]),"NAME"),y=(null===(a=c[0])||void 0===a?void 0:a.personIds)||(null===h||void 0===h||null===(i=h.personOrder[0])||void 0===i?void 0:i.personIds)||[],b=v.sort(((e,t)=>y.indexOf(null===e||void 0===e?void 0:e.personId)-y.indexOf(null===t||void 0===t?void 0:t.personId))).filter((e=>{var t;const a=["NAME_GIVEN","NAME_SURNAME","NAME_SUFFIX","NAME_PREFIX","NAME_SUFFIX_PREFIX","NAME_PATRONYMIC","NAME_MATRONYMIC"];return!!(null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t.some((e=>a.includes(e.elementType))))||(m.push(e),!1)})).filter((e=>{var t,a,i;const r=Boolean(null===(t=(0,A.HK)(e))||void 0===t?void 0:t.find((e=>{var t;return null===(t=e.rects)||void 0===t?void 0:t.length}))),o=!r,s=Boolean(!(null!==(a=e.attribution)&&void 0!==a&&null!==(i=a.userId)&&void 0!==i&&i.startsWith("cis"))),l=!s,d="FIELD"===e.elementType;return Ww&&(o&&g.hasNoRects++,l&&g.hasAttribution++,d&&g.isNameField++),!d&&(o&&s?(m.push(e),!1):n?r:r&&s)})).map((e=>{var t;let a;return null!==e&&void 0!==e&&null!==(t=e.superElements)&&void 0!==t&&t.length&&(a=e.superElements[0].id),{...e,artifactUrl:(null===W||void 0===W?void 0:W.current)||(0,xe.F)(e.partitionKey),apid:q.current,subElements:e.subElements.filter((e=>"FIELD"!==e.elementType)),personId:a,notAPerson:S.includes(e.id)}}));if(!n&&function(e){return e.every((e=>{var t,a;return null===(t=e.attribution)||void 0===t||null===(a=t.userId)||void 0===a?void 0:a.startsWith("cis")}))}(b)&&(lA(q.current,!0,"Full Name Review"),O({title:s("tasks-done-overlay.no-more-tasks.error.title","No more tasks"),message:s("tasks-done-overlay.tasks-done.error.message","Go back to Get Involved to do another search.")})),b.length){w||XA(b,qe.YU).then((e=>{M(e),T(!0)}));const{mainHighlights:e}=H.init({mainImageArk:(0,na.XJ)(q.current),images:o});let t=[];m.length&&m.forEach((e=>{t=[...t,...gw([],[],e,l.isOn)]})),f(t),U({imageHighlights:e,newTask:b[d]})}return p({type:"BATCH_DISPATCHES",value:[{type:"SET_DATA",value:{images:o,currentImageArk:(0,na.XJ)(q.current)}},{type:"ADD_PERSON_ORDER",value:c},{type:"SORT_PERSONS"}]}),b}),[n,U,S,h.images,h.personOrder,B,s,p,w,H,l.isOn]),Q=(0,i.useCallback)((()=>{C.open()}),[C]),J=Yw({currentTaskUpdated:U,generateTasks:X,goalDefault:1,goalCacheKey:"fullNameReviewTaskLengthPreference",onGoalCompleted:Q,setError:v,types:B}),{currentTask:Z,doneCount:ee,goal:te,loading:ie,continueWithNewGoal:re,goToNextTask:ne,getNewImage:oe}=J,se=(0,i.useCallback)((async function(e){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=(0,wi.q)(e);(0,Se.k7)(i,c.userId,qe.YU),l.isOn?null!==i&&void 0!==i&&i.length&&(Ww("saveSls: ",{sls:i}),await hA(h.currentImageArk,i,!1,!1,t),a&&p({type:"BATCH_DISPATCHES",value:e})):Ww("Saving changes to SLS is disabled")}),[l.isOn,c.userId,t,h.currentImageArk,p]);!I.current&&null!==y&&void 0!==y&&y.length&&(se(y,!1),I.current=!0),(0,i.useEffect)((()=>{(0,Wd.getUser)().then((e=>u({type:"SET_USER_ID",value:e.cisId})))}),[u]);const le=(0,i.useCallback)((e=>{re(e),C.close(),E.goToStep(1)}),[re,C,E]);(/NoMoreTasks/.test(null===m||void 0===m?void 0:m.message)||/NoNamesToReview/.test(m))&&(R||O({title:s("tasks-done-overlay.no-more-tasks.error.title","No more tasks"),message:s("tasks-done-overlay.tasks-done.error.message","Go back to Get Involved to do another search.")})),/TaskExpired/.test(null===m||void 0===m?void 0:m.message)&&(R||O({title:s("tasks-done-overlay.tasks-done.error.title","Task has expired"),message:s("tasks-done-overlay.tasks-done.error.message","Go back to Get Involved to do another search.")}));const de=(0,i.useCallback)((()=>{ne(!0)}),[ne]),{handleSkip:ce,handleClickNewImage:ue,resetSkipCounter:he,skipImageOverlay:pe}=JA({onSkip:de,onGetNewImage:oe,currentTask:Z});return Ww("FullNameCorrection Render: ",{doneCount:ee,currentTask:Z,loading:ie,error:m,state:c,zionSlsState:h,displayHighlights:Y,tasksMarkedNotAPerson:S}),(0,k.Y)(i.Suspense,{fallback:(0,k.Y)(g.A,null)},(0,k.Y)(Ot.A,null,s("task-viewer.full-name-review-title","Full Name Review")),(0,k.Y)("div",{css:$w},(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(nw,{loading:ie,personId:null===Z||void 0===Z?void 0:Z.personId,doneCount:ee,maxTasks:te,showRecordDetails:D}),(0,k.Y)(ae.A,{size:"nano"}),(null===Z||void 0===Z?void 0:Z.partitionKey)&&(0,k.Y)(Aa.A,(0,j.A)({},H.zoomPanRefs,{initialZoom:vA($A(Y),F),initialPanX:gA($A(Y)).panX,initialPanY:gA($A(Y)).panY,src:Z.artifactUrl,controls:(0,k.Y)(i.Fragment,null,2===E.currentStep&&!H.isCreatingRects&&(0,k.Y)(Bt.A,{Icon:null!==Y&&void 0!==Y&&Y.isShowingAll?ve.A:ye.A,onClick:()=>{N.showAll(!Y.isShowingAll)},label:null!==Y&&void 0!==Y&&Y.isShowingAll?s("shared-image-viewer.hide.button-label","Hide Highlights"):s("shared-image-viewer.show.button-label","Show Highlights"),linkName:"show-hide-highlights-button"})),drawingMode:H.isCreatingRects,onRectangleDrawn:e=>{(0,ha.pH)(e,[Z],h.currentImageArk,c,N,u,H.activeFieldInfo,!0),H.setCreatingRects(!1),u({type:"SET_USER_PERFORMED_FIX"})},prompt:H.isCreatingRects?s("draw-highlight.body","Click anywhere and drag to create a highlight"):""}),(0,k.Y)(Wy,{showEditHighlights:2===E.currentStep}))),(0,k.Y)(qw,{useTasksMethods:J,stepper:E,types:B,finishedOverlay:C,generateTasks:X,setError:v,handleSkip:ce,resetSkipCounter:he}),(0,k.Y)(jA,{dialogOverlay:C,initialChipValue:"5names",chipOptions:[{label:s("task-viewer.finished-modal.option.5names","5 names"),value:"5names",max:5,selected:!0},{label:s("task-viewer.finished-modal.option.10names","10 names"),value:"10names",max:10},{label:s("task-viewer.finished-modal.option.20names","20 names"),value:"20names",max:20},{label:s("task-viewer.finished-modal.option.nolimit","No limit"),value:"nolimit",max:null}],totalFinished:ee+1,handleContinue:le,goBackToGive:()=>WA(z&&V,"fullNameReview"),placeCode:o,name:_}),(0,k.Y)(sw,{welcomeOverlay:x,goBackToGive:()=>WA(z&&V,"fullNameReview")}),(0,k.Y)(ew,{overlay:pe,handleClickNewImage:ue}),(0,k.Y)(it,{error:m,setError:v}),R&&(0,k.Y)(KA,{title:R.title,message:R.message,goBackToGive:()=>WA(z&&V,"fullNameReview")}),!F&&(0,k.Y)(du.Ay,{url:"//w.usabilla.com/d90ab84f6f51.js",hideOnMobile:!0,mobileBreakpoint:"md"}),!F&&d.isOn&&(0,k.Y)($f,null))}const Qw={name:"728fgs",styles:"display:flex;flex-flow:column;align-items:center;"};function Jw(e){let{currentTask:t,loading:a,handleClickNo:r,handleClickYes:n,handleSkipTask:o,goToPreviousTask:s,doneCount:l,handleClickNotAPerson:d}=e;const[c]=(0,P.B)();return(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H2,{size:"H5"},(0,k.Y)(Mt.A,null,c("full-name-correction.stepXof4","Step {step} of 4",{step:"1"})),c("full-name-correction.step1.heading","Is this person's full name highlighted?")),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(te.A,{size:"sm"},c("full-name-correction.step1.subHeading","Check for prefixes, suffixes, maiden names, and married names. You'll be able to add or remove highlights in the next step.")),(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)(J.Ay,null,(0,k.Y)("div",{css:Qw},(0,k.Y)(ee.A,{title:c("full-name-correction.step-one-yes","Yes"),Icon:vn.A,onClick:()=>n(),linkName:"Full Name: Step One Yes",color:"green",emphasis:"lightHigh",size:"lg",disabled:a||t.notAPerson}),(0,k.Y)(te.A,{centered:!0,size:"sm"},c("full-name-correction.step-one-yes","Yes"))),(0,k.Y)("div",{css:Qw},(0,k.Y)(ee.A,{title:c("full-name-correction.step-one-no","No"),Icon:$g.A,onClick:()=>r(),linkName:"Full Name: Step One No",color:"red",emphasis:"lightHigh",size:"lg",disabled:a||t.notAPerson}),(0,k.Y)(te.A,{centered:!0,size:"sm"},c("full-name-correction.step-one-no","No"))),(0,k.Y)("div",{css:Qw},(0,k.Y)(ee.A,{title:t.notAPerson?c("full-name-correction.step-one-next","Next"):c("full-name-correction.step-one-unsure","Unsure"),Icon:pe.A,onClick:()=>o(),linkName:t.notAPerson?"Full Name: Step One Next":"Full Name: Step One Unsure",color:"blue",emphasis:"lightHigh",size:"lg",disabled:a}),(0,k.Y)(te.A,{centered:!0,size:"sm"},t.notAPerson?c("full-name-correction.step-one-next","Next"):c("full-name-correction.step-one-unsure","Unsure")))),(0,k.Y)(ae.A,{size:"xs"}),l>0&&(0,k.Y)(J.Ay,null,(0,k.Y)(Z.A,{title:c("navigation.back-button","Back"),Icon:pe.A,iconDirection:"backward",onClick:()=>s(),linkName:"Full Name: Back"},c("navigation.back-button","Back"))),(0,k.Y)(Z.A,{title:t.notAPerson?c("navigation.restore-nap-button","Restore Person"):c("navigation.not-a-person-button","Not A Person"),Icon:gi.A,onClick:()=>{d()},linkName:t.notAPerson?"Full Name: Restore Person":"Full Name: Not A Person",color:"blue",emphasis:"low",size:"sm",disabled:a},t.notAPerson?c("navigation.restore-nap-button","Restore Person"):c("navigation.not-a-person-button","Not A Person")),t.notAPerson&&(0,k.Y)(te.A,{size:"sm"},(0,k.Y)("span",{style:{color:W.A.danger50}},c("full-name-correction.step1.restore-person-text",'This person was marked "Not a Person". Restore using the button above to work on the full name.'))))}function Zw(){const[e]=(0,P.B)();return(0,k.Y)(i.Fragment,null,(0,k.Y)(go,{overline:e("editHighlight.highlightTips.item1Overline","Instructions"),primaryText:e("editHighlight.highlightTips.item1PrimaryText","Adding and removing highlights"),listPrimaryText:(0,k.Y)(i.Fragment,null,(0,k.Y)("p",null,e("editHighlight.highlightTips.item1Content","To add a highlight, hover over the correct name on the image. If a blue highlight appears, select it and then attach.")),(0,k.Y)("p",null,e("editHighlight.highlightTips.item1Content2","To remove a highlight, hover over an existing yellow highlight and select it and then detach.")))}),(0,k.Y)(go,{primaryText:e("editHighlight.highlightTips.item2PrimaryText","Don't see a blue highlight?"),listPrimaryText:e("editHighlight.highlightTips.item2Content","If no blue highlight appears, you will create a new one.")}))}function eT(){const[e]=(0,P.B)(),t=(0,b.A)(),a=Iw(),r=Sw(),{displayHighlightsApi:n}=(0,je.Z0)();return(0,i.useEffect)((()=>{var e;(0,ha.eP)((e=t.currentImageArk,a.editHighlights.filter((t=>(null===t||void 0===t?void 0:t.imageId)===e))),n)}),[n,a.editHighlights,t.currentImageArk,r]),(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H2,{size:"H5"},(0,k.Y)(Mt.A,null,e("full-name-correction.stepXof4","Step {step} of 4",{step:"2"})),e("full-name-correction.step2.heading","Add or remove highlights to complete this person's full name.")),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(re.H6,null,(0,k.Y)(ne.A,null,e("full-name-correction.step2.tips-content-1",'Remember to include any maiden names, married names, and prefixes or suffixes, such as "Mrs.", "Mr.", and "Jr."'))),(0,k.Y)(re.H6,null,(0,k.Y)(ne.A,null,e("full-name-correction.step2.tips-content-2","(Note: if you see a name more than once, you don't need to select it here.)"))),(0,k.Y)(Zw,{hideSplitScreen:!0,dispatch:r}),(0,k.Y)(Z.A,{Icon:Ar.A,onClick:()=>r({type:"SET_CREATING_RECT",value:!0}),"data-testid":"editHighlightTipsNewHighlightButton",linkName:"New Highlight"},e("editHighlight.highlightTips.newHighlight","New highlight")))}const tT=(0,k.AH)("background-color:",W.A.blue30,";padding:12px 8px;border-start-end-radius:6px;border-end-end-radius:6px;cursor:grab;");function aT(e){let{fields:t,fieldType:a,nameField:r}=e;const[n]=(0,P.B)(),o=Iw(),s=Sw(),{displayHighlightsApi:l}=(0,je.Z0)(),d=n("full-name-correction.step3.drop-spot-text","DRAG NAME FIELDS HERE."),c={backgroundImage:"url(\"data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' stroke='%233ac' stroke-width='3' stroke-dasharray='6%2c 14' stroke-dashoffset='0' stroke-linecap='square'/%3e%3c/svg%3e\")",height:"70px",padding:"10px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"};return(0,k.Y)(i.Fragment,null,(0,k.Y)(Zn,{id:r.fieldType,data:{fieldType:r.fieldType}},(0,k.Y)(Ow.gB,{items:t||[],strategy:Ow._G},(0,k.Y)(re.H6,null,`${r.label}:`),null===t||void 0===t?void 0:t.map((e=>(0,k.Y)("div",{key:e.id},(0,k.Y)(Mw,{id:e.id,data:{fieldType:a,draggableStyle:{display:"flex",marginTop:"8px",backgroundColor:W.A.gray00,borderRadius:"6px",maxHeight:"48px"},childrenStyle:{flexGrow:1,padding:"4px"}},dragHandle:(0,k.Y)("div",{css:tT},(0,k.Y)($n.A,null))},(0,k.Y)(pn.A,{errorMessage:null===e||void 0===e?void 0:e.errorMessage,placeholder:r.label,value:null===e||void 0===e?void 0:e.userEnteredValue,onChange:t=>((e,t)=>{var i,r;const l=on()(o.stepThree),d=null===(i=l[a])||void 0===i||null===(r=i.fields)||void 0===r?void 0:r.find((e=>e.id===t));d.userEnteredValue=e,e!==(0,$e.tK)(e)?d.errorMessage=n("task-viewer.error.illegal-characters","You can only enter ' - , . diacritic, and alphanumeric characters."):d.errorMessage="",s({type:"SET_STEP_THREE",value:l})})(t.target.value,e.id),onFocus:()=>l.hover(e.id),onBlur:()=>l.hover([])})),(null===e||void 0===e?void 0:e.errorMessage)&&(0,k.Y)(ae.A,{size:"md"})))),!(null!==t&&void 0!==t&&t.length)&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)("div",{css:c},(0,k.Y)(Ft.A,null,d))),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(oe.A,{marginY:"xs"}))))}function iT(e){let{currentTask:t,types:a}=e;const[r]=(0,P.B)(),n=Iw(),o=Sw(),{displayHighlightsApi:s}=(0,je.Z0)(),[l,d]=(0,i.useState)([]),[c,u]=(0,i.useState)([]),[h,p]=(0,i.useState)([]),[m,g]=(0,i.useState)([]),v=(0,$.Ay)(),y=(0,Wn.FR)((0,Wn.MS)(Wn.AN),(0,Wn.MS)(Wn.uN,{coordinateGetter:Ow.JR})),f=(0,i.useMemo)((()=>{const e=Object.values(n.stepThree).reduce(((e,t)=>(t.fields.forEach((t=>{e.find((e=>e.fieldType===t.fieldType))||e.push({id:t.id,fieldType:t.fieldType})})),e)),[]),t={subElements:[]};return e.forEach((e=>{t.subElements.push({subElements:[e]})})),t}),[]),{selectedFieldData:b,treatedNameFieldChipData:A}=So(f,a,h,l,c),w=ed()((e=>{o({type:"SET_STEP_THREE",value:e})}),50),T=e=>{s.hover(e)};(0,i.useEffect)((()=>{p(on()(b))}),[b]);return(0,k.Y)(Wn.Mp,{sensors:y,collisionDetection:Wn.Qo,onDragStart:e=>{const t=n.stepThree[e.active.data.current.fieldType].fields.find((t=>t.id===e.active.id));T(t.id)},onDragOver:e=>{const t=on()(n.stepThree);!function(e){var t,a,i;let{event:r,handleDispatchNewStepThree:n,updatedStepThree:o}=e;const{active:s,over:l}=r,d=["NAME_PRE","NAME_GN","NAME_SPRE","NAME_SURN","NAME_SUF","NAME_PATR","NAME_MATR"],c=null===o||void 0===o||null===(t=o[null===s||void 0===s||null===(i=s.data.current)||void 0===i?void 0:i.fieldType])||void 0===t||null===(a=t.fields)||void 0===a?void 0:a.find((e=>e.id===s.id));if(d.includes(null===l||void 0===l?void 0:l.id)&&d.includes(null===s||void 0===s?void 0:s.data.current.fieldType)&&s.data.current.fieldType!==(null===l||void 0===l?void 0:l.id)&&c){var u,h;const e=null===(u=o[c.fieldType])||void 0===u||null===(h=u.fields)||void 0===h?void 0:h.indexOf(c);c.fieldType=l.id,o[c.fieldType]||(o[c.fieldType]={fields:[]}),s.rect.current.initial.top-s.rect.current.translated.top<0?o[c.fieldType].fields.unshift(c):o[c.fieldType].fields.push(c),o[s.data.current.fieldType].fields.splice(e,1),o[s.data.current.fieldType].fields.length||delete o[s.data.current.fieldType],n(o)}}({event:e,handleDispatchNewStepThree:w,updatedStepThree:t,handleHoverOnDrag:T})},onDragEnd:e=>{T([]);const t=on()(n.stepThree);!function(e){let{event:t,handleDispatchNewStepThree:a,updatedStepThree:i}=e;const{active:r,over:n}=t;if(n&&r.id!==n.id){var o,s;const e=null===(o=i[n.data.current.fieldType])||void 0===o||null===(s=o.fields)||void 0===s?void 0:s.find((e=>e.id===n.id));if(e){var l,d,c,u,h;const t=null===(l=i[r.data.current.fieldType].fields)||void 0===l?void 0:l.find((e=>e.id===r.id)),n=null===(d=i[t.fieldType])||void 0===d||null===(c=d.fields)||void 0===c?void 0:c.indexOf(t),o=null===(u=i[e.fieldType])||void 0===u||null===(h=u.fields)||void 0===h?void 0:h.indexOf(e);i[r.data.current.fieldType].fields.splice(n,1),i[e.fieldType]&&i[e.fieldType].fields&&i[e.fieldType].fields.splice(o,0,t),a(i)}}}({event:e,handleDispatchNewStepThree:w,updatedStepThree:t,dispatch:o})}},(0,k.Y)(re.H2,{size:"H5"},(0,k.Y)(Mt.A,null,r("full-name-correction.stepXof4","Step {step} of 4",{step:"3"})),r("full-name-correction.step3.heading","Drag the name parts below via the blue drag icon to the correct label and order.")),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(te.A,{size:"sm"},r("full-name-correction.step3.must-have-name-part","Must have a name part in Given Name or Surname.")),(0,k.Y)(go,{primaryText:r("full-name-correction.step3.tip.heading","Why is there an empty text box?"),listPrimaryText:r("full-name-correction.tip.main","Each text box is connected to a single highlight. Click on the box to see which higlight is connected to what.")}),(0,k.Y)(go,{primaryText:r("full-name-correction.step3.tip2.heading","Do I have to fill every text box?"),listPrimaryText:r("full-name-correction.step3.tip2.main","No, the text boxes are there to help you move the highlights to the right sections. As long as the text is in the right order and location, it will be combined in step four.")}),(0,k.Y)(ae.A,null),(0,k.Y)(Ye.A,{backgroundColor:W.A.blue03},(0,k.Y)(i.Fragment,null,h.sort(((e,t)=>{var a,i;return(null===(a=Ee.kV.find((t=>t.fieldType===e.fieldType)))||void 0===a?void 0:a.value)-(null===(i=Ee.kV.find((e=>e.fieldType===t.fieldType)))||void 0===i?void 0:i.value)})).map((e=>{var t;return(0,k.Y)(aT,{fields:null===(t=n.stepThree[e.fieldType])||void 0===t?void 0:t.fields,fieldType:e.fieldType,nameField:e,key:e.fieldType})}))),(0,k.Y)(Si.A,{"data-testid":"add-or-remove-fields-button",emphasis:"low",Icon:Ci.A,onClick:v.handleClick},r("edit-index.add-fields.button","Add or Remove Fields"))),n.noGivenOrSurnameError&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)(Pu.A,{type:"error"},r("full-name-correction.step3.must-have-name-part","Must have a name part in Given Name or Surname."))),(0,k.Y)(An,{allowSelectingMultiple:!1,title:r("edit-index.add-fields.title","Add or Remove Fields"),chipData:[{title:r("edit-index.chips.name-fields.title","Name"),data:A,key:`nameFields-${t.id}`}],fieldData:h,handleSelection:e=>{const t=[...h],a=on()(n.stepThree),i=[...n.editHighlights];let r=[...m];h.filter((t=>!e.map((e=>{let{id:t}=e;return t})).includes(t.id))).forEach((e=>{a[e.fieldType]&&(a[e.fieldType].fields.forEach((e=>{i.find((t=>t.id===e.id)).attached=!1,s.remove(e.id),r.push(e)})),delete a[e.fieldType]);const n=t.findIndex((t=>t.id===e.id));t.splice(n,1)}));const l=e.filter((e=>!e.id));l&&l.forEach((e=>{const o={label:e.label,fieldType:e.value.split(":")[0],id:(0,$e.Vs)(),added:!0};t.push(o),r.filter((e=>e.fieldType===o.fieldType)).forEach((e=>{i.find((t=>t.id===e.id)).attached=!0,s.add(e.id,n.highlights.find((t=>t.id===e.id))),a[o.fieldType]||(a[o.fieldType]={fields:[]}),a[o.fieldType].fields.push(e)})),r=r.filter((e=>e.fieldType!==o.fieldType))})),g(r),o({type:"SET_EDIT_HIGHLIGHTS",value:i}),o({type:"SET_STEP_THREE",value:a});const d={subElements:[{elementType:"NAME",subElements:t}]};(0,Ee.qz)(d),p(t)},handleSelectionChange:(e,t)=>{d(e),u(t)},overlay:v,disabledFunc:Eo}))}function rT(e){let{types:t}=e;const[a]=(0,P.B)(),r=Iw(),n=Sw(),{displayHighlightsApi:o}=(0,je.Z0)(),s=Object.keys(r.stepFour);return(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H2,{size:"H5"},(0,k.Y)(Mt.A,null,a("full-name-correction.stepXof4","Step {step} of 4",{step:"4"})),a("full-name-correction.step4.heading","Correct the spelling of each part of this person's name.")),(0,k.Y)(ae.A,{size:"xs"}),s.sort(((e,t)=>{var a,i;return(null===(a=Ee.kV.find((t=>t.fieldType===e)))||void 0===a?void 0:a.value)-(null===(i=Ee.kV.find((e=>e.fieldType===t)))||void 0===i?void 0:i.value)})).map((e=>{var i,s;return(0,k.Y)("div",{key:e},(0,k.Y)(pn.A,{label:null===t||void 0===t||null===(i=t.fields.find((t=>t.fieldType===e)))||void 0===i?void 0:i.displayLabel,placeholder:null===t||void 0===t||null===(s=t.fields.find((t=>t.fieldType===e)))||void 0===s?void 0:s.displayLabel,value:r.stepFour[e].text,errorMessage:r.stepFour[e].errorMessage,onChange:t=>{var i,o;const s=t.target.value,l=s!==(0,$e.tK)(s);n({type:"SET_STEP_FOUR",value:{...r.stepFour,[e]:{originalValue:null===r||void 0===r||null===(i=r.stepFour)||void 0===i||null===(o=i[e])||void 0===o?void 0:o.originalValue,text:(0,$e.tK)(s),...l&&{errorMessage:a("task-viewer.error.illegal-characters","You can only enter ' - , . diacritic, and alphanumeric characters.")},highlightIds:r.stepFour[e].highlightIds}}})},onFocus:()=>{o.hover(r.stepFour[e].highlightIds)},onBlur:()=>{o.hover()}}))})),r.emptyGivenOrSurnameError&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(Pu.A,{type:"error"},a("full-name-correction.step4.must-have-name-value","Given Name or Surname must not be empty."))))}function nT(e){let{overlay:t,handleContinue:a}=e;const[r]=(0,P.B)(),[n,o]=(0,i.useState)(!1);return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:r("full-name-correction.verify-step-three-overlay.title","There are Blank Fields")}),(0,k.Y)(te.A,null,r("full-name-correction.verify-step-three-overlay.body","Are you sure those fields should be blank? Highlights associated with blank fields will be removed.")),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(J.Ay,{noGrowY:!0,growX:!0},(0,k.Y)(J.Ay,{noShrinkX:!0,noGrowY:!0},(0,k.Y)(_a.A,{label:r("full-name-correction.verify-step-three-overlay.dont-ask-again","Don't ask again"),checked:n,onChange:()=>o(!n),id:"dontAskAgain",name:"dontAskAgain"}))),(0,k.Y)(Z.A,{onClick:()=>t.close()},r("full-name-correction.verify-step-three-overlay.go-back-button","GO BACK")),(0,k.Y)(Z.A,{emphasis:"high",onClick:()=>{t.close(),n&&localStorage.setItem("verify-step-three-overlay.do-not-ask-again",JSON.stringify(!0)),a()}},r("full-name-correction.verify-step-three-overlay.im-sure-button","I'M SURE")))))}const oT="index",sT="fullText",lT="Family Review",dT=[{name:oT},{name:sT},{name:"Full Name Review"},{name:lT}];const cT=e=>{let{id:t,freezeAttachStateList:a,onToggleAttachedListener:r,t:n}=e;const{attached:o}=(0,Ry.MP)(),s=(0,i.useCallback)((()=>r(t)),[t,r]);return null!==a&&void 0!==a&&a.includes(t)?null:(0,k.Y)(Ye.A,null,(0,k.Y)(J.Ay,{wrap:!0,alignX:"center"},(0,k.Y)(Z.A,{emphasis:"medium",Icon:o?$g.A:vn.A,onClick:s},o?n("highlights-base.button.detach","Detach"):n("highlights-base.button.attach","Attach"))))};function uT(e){let{forSplitScreen:t,showEditHighlights:a,freezeAttachStateList:r}=e;const[n]=(0,P.B)(),{displayHighlights:o,splitScreenDisplayHighlights:s,recordDisplayHighlights:l,recordDisplayHighlightsApi:d,splitScreenRecordDisplayHighlights:c,splitScreenRecordDisplayHighlightsApi:u}=(0,je.Z0)(),h=(0,je.mS)(),{onHoverHighlight:p,onFocusHighlight:m,onUpdateHighlight:g,onToggleAttachedListener:v,onHoverRecordHighlight:y}=function(e){const t=(0,Ti.HQ)(),a=(0,je.vl)(),r=(0,je.mS)(),n=Vy(),o=By(),{query:s}=(0,G.A)(),l=(0,i.useRef)(dT.find((e=>s.view===e.name||s.task===e.name)).name);let d=r,c=a;l.current===lT&&(d=n,c=o);const{displayHighlights:u,displayHighlightsApi:h,splitScreenDisplayHighlights:p,splitScreenDisplayHighlightsApi:m}=(0,je.Z0)(),g=(0,i.useRef)(e?p:u),v=(0,i.useRef)(e?m:h);(0,i.useEffect)((()=>{g.current=e?p:u}),[u,p,e]),(0,i.useEffect)((()=>{v.current=e?m:h}),[h,m,e]);const y=(0,i.useCallback)(((e,a)=>{if(a)if(t.topMostPanel&&!t.topMostPanel()){const t=g.current.highlights[e];if(l.current===sT)c({type:"SET_ACTIVE_FIELD_ID",value:t.fieldId});else if(l.current===oT){const e=t.personIds;if(e[0]){const t=g.current.ids.filter((t=>g.current.highlights[t].personIds.some((t=>e.some((e=>e===t))))));v.current.hover(t),c({type:"SET_HIGHLIGHTED_PERSON_ID",value:e[0]})}}}else v.current.hover(e);else v.current.hover(),t.topMostPanel&&!t.topMostPanel()&&(l.current===sT?c({type:"SET_ACTIVE_FIELD_ID",value:""}):l.current===oT&&c({type:"SET_HIGHLIGHTED_PERSON_ID",value:""}))}),[c,t,l]),f=(0,i.useCallback)(((e,t)=>{l.current===oT&&c({type:"SET_STATE",value:{highlightedRecordId:t?e:""}})}),[c]);return{onHoverHighlight:y,onFocusHighlight:(0,i.useCallback)((e=>{if(l.current===oT&&t.topMostPanel&&!t.topMostPanel()){const a=g.current.highlights[e];null!==a&&void 0!==a&&a.personIds[0]&&(t.openOverlay("viewIndex"),c({type:"NAV_SELECT_TO_VIEW",value:{personId:a.personIds[0],recordId:a.recordId}}))}else d.creatingRect&&c({type:"SET_CREATING_RECT",value:!1}),v.current.select(e)}),[c,t,d.creatingRect]),onUpdateHighlight:(0,i.useCallback)(((e,t)=>{const{x:a,y:i,width:r,height:n}=g.current.highlights[e].position;t.x.toFixed(4)===a.toFixed(4)&&t.y.toFixed(4)===i.toFixed(4)&&t.width.toFixed(4)===r.toFixed(4)&&t.height.toFixed(4)===n.toFixed(4)||v.current.update(e,{position:t,change:"edit"})}),[]),onToggleAttachedListener:(0,i.useCallback)((e=>{const t=g.current.highlights[e];if(!0===t.attached){const a=t.originalHighlight.fieldId!==r.activeFieldId;v.current.update(e,{attached:!1,change:!a&&"deselected",fieldType:"",fieldId:a?t.originalHighlight.fieldId:"",personIds:t.personIds.length?(0,$e.xR)(t.personIds,t.personIds.indexOf(d.selectedPersonId)):t.personIds})}else{var a;v.current.update(e,{attached:!0,change:"edit",fieldType:null===(a=d.highlightsFieldInfo)||void 0===a?void 0:a.fieldType,fieldId:d.activeFieldId,personIds:[...t.personIds,d.selectedPersonId]})}}),[d.selectedPersonId,d.activeFieldId,d.highlightsFieldInfo,r.activeFieldId]),onHoverRecordHighlight:f}}(t),f=(0,i.useCallback)((e=>{let{id:t}=e;return(0,k.Y)(cT,{id:t,freezeAttachStateList:r,onToggleAttachedListener:v,t:n})}),[r,n,v]);return a?(0,k.Y)(i.Fragment,null,(0,k.Y)(Xt.N,{editable:!0,drawMode:h.creatingRect,state:t?c:l,api:t?u:d,Component:Py.A,onHover:y}),(0,k.Y)(Xt.N,{editable:!0,SelectedContent:f,drawMode:h.creatingRect,state:t?s:o,Component:Qt.A,onHover:p,onFocus:m,onUpdate:g})):(0,k.Y)(i.Fragment,null,(0,k.Y)(Xt.N,{state:t?c:l,api:t?u:d,Component:Py.A,onHover:y}),(0,k.Y)(Xt.N,{state:t?s:o,Component:Qt.A,onHover:p,onFocus:m}))}const hT={name:"1ylu0bo",styles:"display:flex;flex-direction:column;flex-grow:1;"},pT=(0,y.Ay)("rip:FullNameCorrection"),mT=["NAME_PRE","NAME_GN","NAME_SPRE","NAME_SURN","NAME_SUF","NAME_PATR","NAME_MATR"];function gT(){(0,K.O)({page_channel:"RIP",page_detail:"Full Name Corrections"});const{query:e}=(0,G.A)(),{task:t,placeCode:a,debugArk:r}=e,n=(0,i.useMemo)((()=>Boolean(r)),[r]),o=parseInt(a,10),[s]=(0,P.B)(),{rip_sharedImageViewer_saveChanges:l,rip_sharedImageViewer_statsTracking:d,rip_sharedImageViewer_feedback_FullName:c}=(0,L.h)(["rip_sharedImageViewer_saveChanges","rip_sharedImageViewer_statsTracking","rip_sharedImageViewer_feedback_FullName"]),u=Iw(),h=Sw(),p=(0,b.A)(),m=(0,Ae.l)(),[v,y]=(0,i.useState)(),[f,w]=(0,i.useState)(!1),T=(0,i.useRef)(!1),[I,S]=(0,i.useState)([1]),[E,C]=(0,i.useState)([]),[x,Y]=(0,i.useState)(!1),[N,R]=(0,i.useState)([]),[O,_]=(0,i.useState)([]),[F,D]=(0,i.useState)(!1),[{controllerRef:M,stageRef:H,viewerRef:z},{set:V}]=(0,ga.Ay)(),B=(0,ma.A)({initiallyOpen:!0}),U=(0,$.Ay)(),q=(0,$.Ay)(),W=(0,$.Ay)(),{displayHighlights:X,displayHighlightsApi:Q}=(0,je.Z0)(),ee=()=>(0,k.Y)(ye.A,{toggle:!(null!==X&&void 0!==X&&X.isShowingAll)}),[te,ie]=(0,i.useState)(),[re,ne]=(0,i.useState)(""),oe=(0,ci.Ay)()({default:!0,md:!1}),[se,le]=(0,i.useState)(!1),{data:de}=(0,aa.Zm)({fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],dispatchTypes:!1,lang:"en"}),{accessFromPrison:ue,isReady:he}=(0,LA.A)(),pe=(0,i.useCallback)((e=>{var t;let{newTask:a,imageHighlights:i}=e;i||(i=u.highlights),i&&vT({highlights:i,task:a,fullNameDispatch:h,api:Q,setZoomPan:V});const r={},n=[];if(!be()(null===a||void 0===a?void 0:a.subElements)&&null!==(t=i)&&void 0!==t&&t.length){a.subElements.forEach((e=>{var t;if(null!==e&&void 0!==e&&null!==(t=e.subElements)&&void 0!==t&&t.length){const t=e.subElements[0],a=i.filter((e=>e.fieldId===t.id)),o=[];a.forEach(((e,a)=>{var i,r,s;n.push(e.id),o.push({elementType:t.elementType,partitionKey:t.partitionKey,fieldId:t.id,superElements:[...t.superElements],fieldType:t.fieldType,id:e.id,rects:[(0,ia.eS)(e)],typeData:{...t.typeData},confidence:t.confidence,originalValue:(null===t||void 0===t||null===(i=t.fieldValues)||void 0===i||null===(r=i[0])||void 0===r||null===(s=r.origValue)||void 0===s?void 0:s.text)||"",userEnteredValue:0===a&&(0,A.OV)(t)||""})})),r[t.fieldType]={fields:o}}})),C(n);const e=Object.fromEntries(Object.entries(r).sort(((e,t)=>mT.indexOf(e[0])-mT.indexOf(t[0]))));h({type:"SET_STEP_THREE",value:e})}}),[Q,V,u.highlights,h]),me=(0,i.useRef)(null),ge=(0,i.useRef)(null),ve=(0,i.useCallback)((e=>{var t;let{data:a,images:i=[],currentIndex:r=0}=e,o=[];if(null!==a&&void 0!==a&&a.slsImageInfo&&null!==a&&void 0!==a&&a.artifactId){var l;me.current=a.artifactId,ge.current=a.artifactUrl,i=(0,BA.D2)([{elements:a.slsImageInfo.elements,danglingSupers:a.slsImageInfo.danglingSupers,danglingElementTypes:a.slsImageInfo.danglingElementTypes,danglingElementDescriptions:a.slsImageInfo.danglingElementDescriptions,partitionKey:(0,na.XJ)(me.current)}]).images;const e=null===(l=a.slsImageInfo.elements)||void 0===l?void 0:l.filter((e=>"PERSON"===e.elementType)).map((e=>e.id));o=[{partitionKey:a.slsImageInfo.elements[0].partitionKey,personIds:e||[]}]}(0,Me.OU)(i,de,s("type-unknown.label","<Unknown Type>"));const d=[],c={hasNoRects:0,hasAttribution:0,isNameField:0},u=(0,A.Qc)(i[0]||(null===p||void 0===p||null===(t=p.images)||void 0===t?void 0:t[0]),"NAME").filter((e=>{var t;const a=["NAME_GIVEN","NAME_SURNAME","NAME_SUFFIX","NAME_PREFIX","NAME_SUFFIX_PREFIX","NAME_PATRONYMIC","NAME_MATRONYMIC"];return!!(null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t.some((e=>a.includes(e.elementType))))||(d.push(e),!1)})).filter((e=>{var t,a,i;const r=Boolean(null===(t=(0,A.HK)(e))||void 0===t?void 0:t.find((e=>{var t;return null===(t=e.rects)||void 0===t?void 0:t.length}))),o=!r,s=Boolean(!(null!==(a=e.attribution)&&void 0!==a&&null!==(i=a.userId)&&void 0!==i&&i.startsWith("cis"))),l=!s,u="FIELD"===e.elementType;return pT&&(o&&c.hasNoRects++,l&&c.hasAttribution++,u&&c.isNameField++),!u&&(o&&s?(d.push(e),!1):n?r:r&&s)})).map((e=>{var t;let a;return null!==e&&void 0!==e&&null!==(t=e.superElements)&&void 0!==t&&t.length&&(a=e.superElements[0].id),{...e,artifactUrl:(null===ge||void 0===ge?void 0:ge.current)||(0,xe.F)(e.partitionKey),apid:me.current,subElements:e.subElements.filter((e=>"FIELD"!==e.elementType)),personId:a,notAPerson:O.includes(e.id)}}));if(!n&&function(e){return e.every((e=>{var t,a;return null===(t=e.attribution)||void 0===t||null===(a=t.userId)||void 0===a?void 0:a.startsWith("cis")}))}(u)&&(lA(me.current,!0,"Full Name Review"),ie({title:s("tasks-done-overlay.no-more-tasks.error.title","No more tasks"),message:s("tasks-done-overlay.tasks-done.error.message","Go back to Get Involved to do another search.")})),u.length){f||XA(u).then((e=>{le(e),w(!0)}));const e=(0,ia.mV)({element:i[0]||p.images[0]});h({type:"SET_HIGHLIGHTS",value:e});let t=[];d.length&&d.forEach((e=>{t=[...t,...gw([],[],e)]})),R(t),pe({imageHighlights:e,newTask:u[r]})}return m({type:"BATCH_DISPATCHES",value:[{type:"SET_DATA",value:{images:i,currentImageArk:(0,na.XJ)(me.current)}},{type:"ADD_PERSON_ORDER",value:o},{type:"SORT_PERSONS"}]}),u}),[n,pe,h,O,p.images,de,s,m,f]),fe=(0,i.useCallback)((()=>{U.handleClick()}),[U]),{currentIndex:we,currentTask:Te,doneCount:Ie,goal:Ee,loading:ke,continueWithNewGoal:Ce,goToNextTask:Ye,goToPreviousTask:Ne,updateTaskList:Re}=Yw({currentTaskUpdated:pe,generateTasks:ve,goalDefault:1,goalCacheKey:"fullNameReviewTaskLengthPreference",onGoalCompleted:fe,setError:y,types:de}),Pe=(0,i.useCallback)((async e=>{try{let t="";if(e){_((e=>[...e,Te.id]));const e=[];Te.personId&&e.push({type:"REM_SUB",value:{superPartitionKey:Te.partitionKey,subPartitionKey:Te.partitionKey,superId:null!==Te&&void 0!==Te&&Te.personId?Te.personId:Te.partitionKey,subId:Te.id,elementType:"PERSON"}}),e.push({type:"REMOVE_ELEMENT",value:{id:Te.id,partitionKey:Te.partitionKey,elementType:"NAME"}}),t=(0,wi.q)(e)}else{_((e=>e.filter((e=>e!==Te.id))));const e=(0,Ai.vc)({partitionKey:Te.partitionKey,nameElementId:(0,A.Vs)(),nameType:Te.nameType,personId:Te.personId?Te.personId:Te.partitionKey}),a=e;Te.subElements.forEach((t=>a.push({type:"ADD_SUB",value:{superPartitionKey:t.partitionKey,subPartitionKey:t.partitionKey,superId:e[0].value.id,subId:t.id,elementType:"NAME"}}))),t=(0,wi.q)(a),Te.personId&&(a.push({type:"REM_SUB",value:{superPartitionKey:Te.partitionKey,subPartitionKey:Te.partitionKey,superId:Te.personId,subId:Te.id,elementType:"PERSON"}}),a.push({type:"REMOVE_ELEMENT",value:{id:Te.id,partitionKey:Te.partitionKey,elementType:"NAME"}})),Te.recordId&&a.push({type:"SET_RECORD_PERSON_IDS",value:Te.recordId}),m({type:"BATCH_DISPATCHES",value:a})}(0,Se.k7)(t,u.userId,qe.YU),await hA(Te.partitionKey,t,!1,!1,"Full Name Review"),Y(!0)}catch(t){y(t)}}),[Te,u.userId,m,y,Y]),Oe=(0,i.useCallback)((async function(e){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=(0,wi.q)(e);(0,Se.k7)(i,u.userId,qe.YU),l.isOn?null!==i&&void 0!==i&&i.length&&(pT("saveSls: ",{sls:i}),await hA(p.currentImageArk,i,!1,!1,t),a&&m({type:"BATCH_DISPATCHES",value:e})):pT("Saving changes to SLS is disabled")}),[l.isOn,u.userId,t,p.currentImageArk,m]);!T.current&&null!==N&&void 0!==N&&N.length&&(Oe(N,!1),T.current=!0),(0,i.useEffect)((()=>{if(x){const e=ve({images:p.images,currentIndex:we});Re({newTaskList:e}),Y(!1)}}),[ve,x,p.images,Re,we]),(0,i.useEffect)((()=>{(0,Wd.getUser)().then((e=>h({type:"SET_USER_ID",value:e.cisId})))}),[h]);const _e=(0,i.useCallback)((()=>{const e=u.editHighlights.map((e=>({...e,attached:!1})));h({type:"SET_EDIT_HIGHLIGHTS",value:e})}),[h,u.editHighlights]),Fe=async()=>{if(u.emptyGivenOrSurnameError||F)return;D(!0);const e={};["NAME_GN","NAME_SURN","NAME_SUF","NAME_PRE","NAME_SPRE","NAME_PATR","NAME_MATR"].forEach((t=>{if(u.stepFour[t]){var a,i;const r=u.stepFour[t].highlightIds;e[t]={originalValue:null===u||void 0===u||null===(a=u.stepFour)||void 0===a||null===(i=a[t])||void 0===i?void 0:i.originalValue,text:u.stepFour[t].text,rects:r.map((e=>(0,ia.eS)(X.highlights[e]))),fieldIds:Un()(u.stepThree[t].fields.map((e=>e.fieldId)))}}else e[t]={originalValue:"",text:"",rects:[],fieldIds:[]}}));try{var t,a;if((null===(t=e.NAME_SURN)||void 0===t||!t.text)&&(null===(a=e.NAME_GN)||void 0===a||!a.text))throw new Error("No name values")}catch(n){return void(0,$e.Yt)(n)}const{dispatches:i,removeDispatches:r}=vw(e,Te,p.images);try{if(await Oe(r),await Oe(i),Y(!0),d.isOn){const t=function(e){let{nameValues:t,images:a}=e,i=!1;"object"===typeof t&&Object.entries(t).forEach((e=>{let[t,r]=e;r&&Array.isArray(null===r||void 0===r?void 0:r.fieldIds)&&r.fieldIds.forEach((e=>{const n=(0,A.rr)(a,e);if(!n)return;const o=(0,A.OV)(n),s=n.fieldType;o===r.text&&s===t||(i=!0)}))}));return i}({nameValues:e,images:null===p||void 0===p?void 0:p.images});mA({partitionKey:null===Te||void 0===Te?void 0:Te.partitionKey,taskType:"Full Name Review",action:u.userPerformedFix||t?"fixed":"reviewed"})}else pA(Te.partitionKey,"Full Name Review");_e(),0===Ee||Ie+1<Ee?(Ye(),S([1])):U.handleClick()}catch(n){(0,$e.Yt)(n,null===Te||void 0===Te?void 0:Te.partitionKey,{codeId:70,removeDispatches:r,dispatches:i,error:n}),y(n)}finally{D(!1)}},De=e=>{C(e);const t=[];return e.forEach((e=>t.push(X.highlights[e]))),(0,ha.eP)(t,Q),h({type:"SET_EDIT_HIGHLIGHTS",value:(0,ha.bZ)(u.editHighlights,Object.values(X.highlights))}),t},He=s("full-name-correction.name-input.placeholder-text","Name"),Le=e=>{let{resetStepFour:t}=e;const a=[...I],i=a[a.length-1];if(2===i){const e=(null===X||void 0===X?void 0:X.ids.filter((e=>{var t;return null===(t=X.highlights[e])||void 0===t?void 0:t.attached})))||[];if(JSON.stringify(e)!==JSON.stringify(E)){(e=>{let{attachedHighlights:t,namePlaceholder:a,state:i,zionSlsState:r,nameFieldTypes:n,dispatch:o}=e;const s=[],l={},d=Object.values(i.stepThree).reduce(((e,t)=>(Object.values(t).forEach((t=>{e=e.concat(t)})),e)),[]);t.forEach((e=>{const t=d.find((t=>t.fieldId===e.originalHighlight.fieldId)),i=(0,A.rr)(r.images,e.originalHighlight.fieldId);let o="NAME_GN";t?(l[t.fieldType]||(l[t.fieldType]={fields:[]}),l[t.fieldType].fields.push({elementType:t.elementType,partitionKey:t.partitionKey,fieldId:t.id,superElements:t.superElements,fieldType:t.fieldType,id:e.id,rects:[(0,ia.eS)(e)],typeData:t.typeData,confidence:t.confidence,userEnteredValue:l[t.fieldType].fields.find((e=>e.id===t.id))?"":t.userEnteredValue})):i?(n.includes(i.fieldType)&&(o=i.fieldType),l[o]||(l[o]={fields:[]}),l[o].fields.push({elementType:i.elementType,partitionKey:i.partitionKey,fieldId:i.id,superElements:i.superElements,fieldType:o,id:null===e||void 0===e?void 0:e.id,rects:[(0,ia.eS)(e)],typeData:i.typeData,confidence:i.confidence,userEnteredValue:l[o].fields.find((e=>e.fieldId===i.id))?"":(0,A.OV)(i)})):(e.change&&"edit"===e.change&&s.push(e),l[o]||(l[o]={fields:[]}),l[o].fields.push({elementType:"FIELD",partitionKey:d[0].partitionKey,fieldId:(0,A.Vs)(),superElements:[],fieldType:o,id:e.id,rects:[(0,ia.eS)(e)],typeData:{displayLabel:a},confidence:"",userEnteredValue:""}))})),o({type:"SET_STEP_THREE",value:l})})({attachedHighlights:De(e),namePlaceholder:He,state:u,zionSlsState:p,nameFieldTypes:mT,dispatch:h})}else De(e)}(3===i&&0===Object.keys(u.stepFour).length||t)&&(()=>{const e={};Object.keys(u.stepThree).forEach((t=>{let a="",i="";const r=[];u.stepThree[t].fields.forEach((e=>{a+=`${e.userEnteredValue} `,i=null===e||void 0===e?void 0:e.originalValue,r.push(e.id)})),e[t]={text:a.trim(),originalValue:i,highlightIds:r}})),h({type:"SET_STEP_FOUR",value:e})})(),S([...a.concat(i+1)])},ze=()=>{U.close();const e=[...I],t=e.pop();if(S(e),3===t&&2===e[e.length-1]){const e=(null===X||void 0===X?void 0:X.ids.filter((e=>{var t;return null===(t=X.highlights[e])||void 0===t?void 0:t.attached})))||[];De(e)}2===t&&1===e[e.length-1]&&vT({highlights:u.highlights,task:Te,fullNameDispatch:h,api:Q,setZoomPan:V})},Ve=(0,i.useCallback)((()=>{S([...I].concat(2))}),[S,I]),Be=(0,i.useCallback)((()=>{S([...I].concat(3))}),[S,I]),Ge=(0,i.useCallback)((()=>{Ye(!0),_e()}),[_e,Ye]),Ue=(0,i.useCallback)((e=>{Ce(e),U.handleClick(),S([1])}),[Ce,U]);const Ke=(0,$.Ay)();return(/NoMoreTasks/.test(null===v||void 0===v?void 0:v.message)||/NoNamesToReview/.test(v))&&(te||ie({title:s("tasks-done-overlay.no-more-tasks.error.title","No more tasks"),message:s("tasks-done-overlay.tasks-done.error.message","Go back to Get Involved to do another search.")})),/TaskExpired/.test(null===v||void 0===v?void 0:v.message)&&(te||ie({title:s("tasks-done-overlay.tasks-done.error.title","Task has expired"),message:s("tasks-done-overlay.tasks-done.error.message","Go back to Get Involved to do another search.")})),pT("FullNameCorrection Render: ",{doneCount:Ie,currentTask:Te,loading:ke,error:v,state:u,zionSlsState:p,displayHighlights:X,tasksMarkedNotAPerson:O}),(0,k.Y)(i.Suspense,{fallback:(0,k.Y)(g.A,null)},(0,k.Y)(Ot.A,null,s("task-viewer.full-name-review-title","Full Name Review")),(0,k.Y)("div",{css:hT},(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(nw,{loading:ke,personId:null===Te||void 0===Te?void 0:Te.personId,doneCount:Ie,maxTasks:Ee,showRecordDetails:se}),(0,k.Y)(ae.A,{size:"nano"}),(null===Te||void 0===Te?void 0:Te.partitionKey)&&(0,k.Y)(Aa.A,{controllerRef:M,stageRef:H,viewerRef:z,alt:"",initialZoom:vA($A(X),!0),initialPanX:gA($A(X)).panX,initialPanY:gA($A(X)).panY,src:Te.artifactUrl,controls:(0,k.Y)(i.Fragment,null,2===I[I.length-1]&&!u.creatingRect&&(0,k.Y)(Bt.A,{Icon:ee,onClick:()=>Q.showAll(!X.isShowingAll),label:null!==X&&void 0!==X&&X.isShowingAll?s("shared-image-viewer.hide.button-label","Hide Highlights"):s("shared-image-viewer.show.button-label","Show Highlights")})),drawingMode:u.creatingRect,onRectangleDrawn:e=>{(0,ha.pH)(e,[Te],p.currentImageArk,u,Q,h),h({type:"SET_USER_PERFORMED_FIX"})},prompt:u.creatingRect?s("draw-highlight.body","Click anywhere and drag to create a highlight"):""},(0,k.Y)(uT,{showEditHighlights:2===I[I.length-1]}))),(0,k.Y)(ce.A,(0,j.A)({},B,{size:"md",title:s("full-name-correction.infosheet-header","Full Name Review"),headingColor:"purple",nonClosable:!0,footer:(0,k.Y)(i.Fragment,null,1!==I[I.length-1]&&(0,k.Y)(J.Ay,{alignX:"end"},(0,k.Y)(Z.A,{onClick:()=>ze()},s("navigation.back-button","Back")),4!==I[I.length-1]&&(0,k.Y)(Z.A,{emphasis:"high",onClick:()=>{3===I[I.length-1]&&u.noGivenOrSurnameError||Le({resetStepFour:!0})}},s("navigation.next-button","Next")),4===I[I.length-1]&&(0,k.Y)(Z.A,{emphasis:"high",onClick:()=>{var e,t;ne(`${null===(e=u.stepFour.NAME_GN)||void 0===e?void 0:e.text} ${null===(t=u.stepFour.NAME_SURN)||void 0===t?void 0:t.text}`),Fe()}},s("navigation.done-button","Done"))))}),1===I[I.length-1]&&Te&&(null===Te||void 0===Te?void 0:Te.partitionKey)&&(0,k.Y)(Jw,{currentTask:Te,loading:ke,handleClickNo:Ve,handleClickYes:Be,handleSkipTask:Ge,goToPreviousTask:()=>{Ne()},doneCount:Ie,taskType:t,markTaskNotAPerson:Pe,handleClickNotAPerson:()=>{Ke.handleClick()}}),2===I[I.length-1]&&Te&&(0,k.Y)(eT,null),3===I[I.length-1]&&Te&&(0,k.Y)(iT,{currentTask:Te,types:de}),4===I[I.length-1]&&Te&&(0,k.Y)(rT,{types:de})),(0,k.Y)(jA,{dialogOverlay:U,initialChipValue:"5names",chipOptions:[{label:s("task-viewer.finished-modal.option.5names","5 names"),value:"5names",max:5,selected:!0},{label:s("task-viewer.finished-modal.option.10names","10 names"),value:"10names",max:10},{label:s("task-viewer.finished-modal.option.20names","20 names"),value:"20names",max:20},{label:s("task-viewer.finished-modal.option.nolimit","No limit"),value:"nolimit",max:null}],totalFinished:Ie+1,handleContinue:Ue,goBackToGive:()=>WA(ue&&he,"fullNameReview"),placeCode:o,name:re,goToPreviousStep:ze}),(0,k.Y)(nT,{overlay:W,handleContinue:()=>{Le()}}),(0,k.Y)(sw,{welcomeOverlay:q,goBackToGive:()=>WA(ue&&he,"fullNameReview")}),(0,k.Y)(it,{error:v,setError:y}),(0,k.Y)(QA,{overlay:Ke,handleClickConfirmNotAPerson:()=>{Ke.close(),Pe(!Te.notAPerson),Ge()}}),te&&(0,k.Y)(KA,{title:te.title,message:te.message,goBackToGive:()=>WA(ue&&he,"fullNameReview")}),!oe&&(0,k.Y)(du.Ay,{url:"//w.usabilla.com/d90ab84f6f51.js",hideOnMobile:!0,mobileBreakpoint:"md"}),!oe&&c.isOn&&(0,k.Y)($f,null))}function vT(e){let{highlights:t,task:a,fullNameDispatch:i,api:r,setZoomPan:n}=e;const o=(0,ia.mV)({element:a}).flatMap((e=>e.fieldId)),s=t.filter((e=>o.includes(e.fieldId))).filter((e=>mT.includes(e.fieldType)||e.attached)).filter((e=>(null===e||void 0===e?void 0:e.imageId)===a.partitionKey)).map((e=>({...e,attached:!0})));(0,ha.eP)(s,r),i({type:"SET_EDIT_HIGHLIGHTS",value:(0,ha.bZ)(t,s)});n(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null===e||void 0===e||!e.length)return{zoom:1,panX:.5,panY:.5};const{maxX:a,minX:i,maxY:r,minY:n}=bA(e),o=(a+i)/2,s=(r+n)/2;return{zoom:yA(a,i,r,n,t),panX:o,panY:s}}(s.map((e=>(0,ia.eS)(e)))))}var yT=a(3802),fT=a(4395),bT=a(24998),AT=a(15438);function wT(e){let{loading:t,handleClickRecordDetails:a,personId:r,sharable:n,notAPerson:o=!1,handleNotAPerson:s=()=>{},transcriptionError:l=!1,handleTranscriptionError:d=()=>{},attachToTree:c=!1,recordDetails:u=!1,welcomeOverlay:h,social:p=!1}=e;const[m]=(0,P.B)(),g=(0,$.Ay)(),v=(0,i.useRef)();return(0,k.Y)(i.Fragment,null,(0,k.Y)(ee.A,{title:m("navigation.menu-button","More Tools"),Icon:df.A,onClick:()=>g.handleClick(),color:"gray",size:"md",ref:v}),(0,k.Y)(Zr.A,(0,j.A)({},g,{placement:"start",targetRef:v}),(0,k.Y)(st.N6,{columnCount:1,orientation:"vertical",gutters:"pico"},o&&(0,k.Y)(Hs.A,{target:(0,k.Y)(Z.A,{Icon:gi.A,emphasis:"low",fullWidth:!0,onClick:()=>{s({},"WORD")}},m("report-error-overlay.not-a-person-button","Not A Person")),label:"NotAPerson",description:m("navigation.not-a-person-tooltip",'Sometimes the computer identifies text as a name but it may actually be a note from the census taker. Hint: Common text such as "Vacant", "No One Home", etc.')}),h&&(0,k.Y)(Z.A,{Icon:mo.A,onClick:h.handleClick,"data-testid":"instructions-modal",linkName:"Instructions Modal"},m("navigation.instructions-button","Instructions")),u&&r&&(0,k.Y)(Z.A,{disabled:t,Icon:Ha.A,title:m("navigation.details-button","Record Details"),onClick:()=>a(),"data-testid":"record-details",linkName:"Record Details"},m("navigation.details-button","Record Details")),c&&r&&(0,k.Y)(Z.A,{disabled:t,Icon:sf.A,title:m("attach.header","Attach To Tree"),onClick:()=>{window.open(`/search/linker?ark=${encodeURIComponent(`/ark:/61903/${r}`)}`)},"data-testid":"attach-to-tree",linkName:"Attach To Tree"},m("attach.header","Attach To Tree")),l&&(0,k.Y)(Z.A,{Icon:AT.A,emphasis:"low",fullWidth:!0,onClick:d},m("report-error-overlay.error-button","Transcription Error")),p&&(0,k.Y)(Nb.DJ,{disabled:t,sharable:n,buttonEmphasis:"low"}))))}function TT(e){let{loading:t,personId:a,title:i,displayNotAPerson:r,handleNotAPerson:n,transcriptionError:o,handleTranscriptionError:s,attachToTree:l,recordDetails:d,handwriting:c,social:u,welcomeOverlay:h}=e;const[p]=(0,P.B)(),m=(0,jn.Ay)(),g=(0,$.Ay)(),v={url:"https://www.familysearch.org/getinvolved/"},y=(0,ci.Ay)()({default:!0,md:!1}),f=async()=>{window.open(`/ark:/61903/${a}`,"_blank")||window.location.assign(`/ark:/61903/${a}`)},{accessFromPrison:b,isReady:A}=(0,LA.A)();return(0,k.Y)(J.Ay,{alignY:"middle"},(0,k.Y)(ae.A,null),(0,k.Y)(ee.A,{Icon:he.A,iconDirection:"backward",onClick:()=>WA(b&&A),title:p("task-viewer.get-involved-link","Back to Get Involved"),"data-testid":"back-to-get-invovled",linkName:"Back To Give"}),(0,k.Y)(re.H1,{size:"H5",growX:!0},i),m({default:(0,k.Y)(J.Ay,{alignX:"end",growX:!0},c&&(0,k.Y)(ee.A,{Icon:xb.A,title:p("task-viewer.handwriting-tooltip","Handwriting Examples"),onClick:()=>g.handleClick(),"data-testid":"handwriting-help",linkName:"Handwriting Help"}),(0,k.Y)(wT,{loading:t,handleClickRecordDetails:f,personId:a,sharable:v,notAPerson:r,handleNotAPerson:n,transcriptionError:o,handleTranscriptionError:s,attachToTree:d,recordDetails:d,welcomeOverlay:h,social:u})),sm:(0,k.Y)(J.Ay,{alignX:"end",growX:!0},(0,k.Y)(Z.A,{Icon:mo.A,onClick:null===h||void 0===h?void 0:h.handleClick,"data-testid":"instructions-modal",linkName:"Instructions Modal"},p("navigation.instructions-button","Instructions")),d&&!b&&A&&a&&(y?(0,k.Y)(ee.A,{disabled:t,Icon:Ha.A,title:p("navigation.details-button","Record Details"),onClick:()=>f(),"data-testid":"record-details",linkName:"Record Details"}):(0,k.Y)(Z.A,{disabled:t,Icon:Ha.A,onClick:()=>f(),"data-testid":"record-details",linkName:"Record Details"},p("navigation.details-button","Record Details"))),d&&a&&!b&&A&&(y?(0,k.Y)(ee.A,{disabled:t,Icon:sf.A,"data-testid":"attach-to-tree",linkName:"Attach To Tree",onClick:()=>{window.open(`/search/linker?ark=${encodeURIComponent(`/ark:/61903/${a}`)}`)},title:p("attach.header","Attach To Tree")}):(0,k.Y)(Z.A,{emphasis:"medium",disabled:t,Icon:sf.A,"data-testid":"attach-to-tree",linkName:"Attach To Tree",onClick:()=>{window.open(`/search/linker?ark=${encodeURIComponent(`/ark:/61903/${a}`)}`)}},p("attach.header","Attach To Tree"))),l&&a&&(0,k.Y)(ee.A,{disabled:t,Icon:sf.A,title:p("attach.header","Attach To Tree"),onClick:()=>{window.open(`/search/linker?ark=${encodeURIComponent(`/ark:/61903/${a}`)}`)},"data-testid":"attach-to-tree",linkName:"Attach To Tree"}),c&&(0,k.Y)(ee.A,{Icon:xb.A,title:p("task-viewer.handwriting-tooltip","Handwriting Examples"),onClick:()=>g.handleClick(),"data-testid":"handwriting-help",linkName:"Handwriting Help"}),u&&!b&&A&&(0,k.Y)(Nb.DJ,{disabled:t,sharable:v,useIconButton:!0}))}),(0,k.Y)(Ob,g),(0,k.Y)(ae.A,null))}function IT(e){let{onClick:t,loading:a,linkName:i=""}=e;const{t:r}=(0,P.B)();return(0,k.Y)("div",{css:ET()},(0,k.Y)(ee.A,{"data-testid":"review-experience-navigation-button-no",title:r("full-name-correction.step-one-no","No"),Icon:$g.A,onClick:t,color:"red",emphasis:"lightHigh",size:"lg",disabled:a,linkName:i}),(0,k.Y)(te.A,{size:"sm",centered:!0},r("full-name-correction.step-one-no","No")))}var ST={name:"728fgs",styles:"display:flex;flex-flow:column;align-items:center;"};function ET(){return ST}function kT(e){let{onClick:t,loading:a,linkName:i=""}=e;const{t:r}=(0,P.B)();return(0,k.Y)("div",{css:ET()},(0,k.Y)(ee.A,{"data-testid":"review-experience-navigation-button-yes",title:r("full-name-correction.step-one-yes","Yes"),Icon:vn.A,onClick:t,color:"green",emphasis:"lightHigh",size:"lg",disabled:a,linkName:i}),(0,k.Y)(te.A,{size:"sm",centered:!0},r("full-name-correction.step-one-yes","Yes")))}function CT(e){let{onClick:t,loading:a,linkName:i=""}=e;const{t:r}=(0,P.B)();return(0,k.Y)("div",{css:ET()},(0,k.Y)(ee.A,{"data-testid":"review-experience-navigation-button-unsure",title:r("full-name-correction.step-one-unsure","Unsure"),Icon:pe.A,onClick:t,color:"blue",emphasis:"lightHigh",size:"lg",disabled:a,linkName:i}),(0,k.Y)(te.A,{size:"sm",centered:!0},r("full-name-correction.step-one-unsure","Unsure")))}const xT=e=>{var t,a;const i=null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t.find((e=>e.primary)),r=null===e||void 0===e||null===(a=e.subElements)||void 0===a?void 0:a.filter((e=>"PERSON"===e.elementType))[0];return i||r},YT=e=>(0,Ee.hA)({person:xT(e),justOneName:!0}),NT=e=>null===e||void 0===e?void 0:e.flatMap((e=>{var t;return(null===(t=e.subElements)||void 0===t?void 0:t.flatMap((e=>({displayLabel:null===e||void 0===e?void 0:e.displayLabel,value:(0,A.OV)(e),id:null===e||void 0===e?void 0:e.id,fieldType:null===e||void 0===e?void 0:e.fieldType,superElements:null===e||void 0===e?void 0:e.superElements,personId:null===e||void 0===e?void 0:e.personId}))))||[]})).filter((e=>e.value)),RT=e=>{var t,a,i;const r=(null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t.filter((e=>"PLACE"===(null===e||void 0===e?void 0:e.elementType))))||[],n=(null===e||void 0===e||null===(a=e.subElements)||void 0===a?void 0:a.filter((e=>"DATE"===(null===e||void 0===e?void 0:e.elementType))))||[],o=(null===e||void 0===e||null===(i=e.subElements)||void 0===i?void 0:i.filter((e=>"EVENT_TYPE"===(null===e||void 0===e?void 0:e.fieldType))))||[];return r.concat(n).concat(o).flatMap((e=>null===e||void 0===e?void 0:e.subElements)).flatMap((e=>null===e||void 0===e?void 0:e.id))},PT=(e,t,a,i)=>(0,Ie.UR)(e,t,a,i)||i("family-review.step2.relationship-label.no-direction-relation","No Direct Relation"),OT=e=>{var t;return NT(null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t.filter((e=>"PLACE"===e.elementType)))},_T=e=>{var t;return NT(null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t.filter((e=>"DATE"===e.elementType)))},FT=e=>{var t;return null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t.filter((e=>"PERSON"===e.elementType)).sort(((e,t)=>!e.primary&&t.primary?1:e.primary&&!t.primary?-1:0))},DT=e=>{var t;const a=[];return(null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t.filter((e=>"PERSON"===e.elementType)).flatMap((e=>{var t;return null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t.filter((e=>"EVENT"===e.elementType))}))).forEach((e=>{a.includes(e.id)||a.push(e)})),a},MT=e=>{var t,a;let{types:i,t:r,isPrimary:n=!1,primaryEventType:o}=e;return Un()(null===i||void 0===i||null===(t=i.events)||void 0===t||null===(a=t.filter((e=>!!n||(e=>!e.primaryOnly)(e))))||void 0===a?void 0:a.filter((e=>e.eventType!==o)).map((e=>({key:e.eventType,primaryText:e.displayLabel,group:r("add-person.record-types","Record types")}))),"key")||[{key:"notImplementd",primaryText:r("add-person.types-not-implemented","Types Not Implemented")}]},HT=(e,t)=>{var a;return null===e||void 0===e||null===(a=e.relationships)||void 0===a?void 0:a.reduce(((e,a)=>{const i={subElements:[{fieldType:"SEX_CODE",fieldValues:[{normalizedValues:[{resource:`http://gedcomx.org/${t}`}]}]}]};let r="",n="";return r=(0,Ie.p)({otherPerson:i,order:"FIRST",typeData:a}),n=(0,Ie.p)({otherPerson:i,order:"SECOND",typeData:a}),e.push({key:`${a.relType}_FIRST`,primaryText:r}),r!==n&&e.push({key:`${a.relType}_SECOND`,primaryText:n}),e}),[])},LT=e=>{if(!e||!e.key)return{relType:"",order:""};const t=e.key.split("_"),a=t[t.length-1];t.pop();return{relType:t.join("_"),order:a}},zT=(e,t,a,i,r)=>{const n=[],{removeSubDispatch:o,subToRemove:s,superOfSubToRemove:l}=((e,t,a)=>{let i=(0,A.rr)([e],a),r=null;return i.typeData.singleSuper?(i=(0,A.rr)([e],i.superElements[0].id),r=(0,A.Ll)(t,i)):(r=1===i.superElements.length?(0,A.rr)([e],i.superElements[0].id):(0,A.Ll)(t,i),r.superElements.length>1&&(i=r,r=(0,A.Ll)(t,i))),{removeSubDispatch:{type:"REM_SUB",value:{superId:r.id,superPartitionKey:r.partitionKey,subId:i.id,subPartitionKey:i.partitionKey,elementType:r.elementType}},subToRemove:i,superOfSubToRemove:r}})(e,t,a);n.push(o),r.typeData.singleSuper&&(r=(0,A.rr)([e],r.superElements[0].id));if((0,A.rr)([e],r.superElements[0].id).elementType===s.elementType){const e=(0,A.Vs)(),t={type:"CREATE_ELEMENT",value:{partitionKey:l.partitionKey,elementType:s.elementType,id:e}},a={type:"ADD_SUB",value:{superId:l.id,superPartitionKey:l.partitionKey,subId:e,subPartitionKey:l.partitionKey,elementType:l.elementType}},i={type:"ADD_SUB",value:{superId:e,superPartitionKey:l.partitionKey,subId:r.id,subPartitionKey:r.partitionKey,elementType:s.elementType}};n.push(t,a,i)}else{const e={type:"ADD_SUB",value:{superId:l.id,superPartitionKey:l.partitionKey,subId:r.id,subPartitionKey:r.partitionKey,elementType:l.elementType}};n.push(e)}const d={type:"ADD_FV",value:{fieldValue:(0,Je.cN)(i,{comment:"",reasonId:"",app:qe.uO}),id:r.id,partitionKey:r.partitionKey}};return n.push(d),n},VT=e=>{let t=!1;return e&&null!==e&&void 0!==e&&e.subElements&&e.subElements.forEach((a=>{a.partitionKey!==e.partitionKey&&(t=!0)})),t},BT=(e,t,a)=>{const i=null===e||void 0===e?void 0:e.toLowerCase().trim(),r=t.primaryText.toLowerCase(),n=a.primaryText.toLowerCase(),o=r.startsWith(i),s=n.startsWith(i);return i?o&&!s?-1:!o&&s?1:o&&s?r.length-n.length:0:0},GT=(e,t,a,i,r)=>e?r:t?i:a,UT=[{showOnSteps:["1"],questionKey:"family-review.faq.question0",questionDefault:"What is a record?",answerKey:"family-review.faq.answer0",answerDefault:"A record is a document that certifies a life event. It can be as large as a few images or as small as a line or two on a ledger or register.",learnMoreLink:"https://www.familysearch.org/en/help/helpcenter/article/what-is-the-difference-between-a-record-and-an-image"},{showOnSteps:["1"],questionKey:"family-review.faq.question1",questionDefault:"What if there is just part of a name selected?",answerKey:"family-review.faq.answer1",answerDefault:"If the part of the name you see belongs to the primary person in the record, go ahead and mark \u201cYes.\u201d You can change highlights in a later step."},{showOnSteps:["1"],questionKey:"family-review.faq.question2",questionDefault:"What if the primary person is right but the name is misspelled?",answerKey:"family-review.faq.answer2",answerDefault:"Go ahead and select \u201cYes.\u201d You will have a chance to change spellings in a later step."},{showOnSteps:["2"],questionKey:"family-review.faq.primary-person-question",questionDefault:"Who is a primary person?",answerKey:"family-review.faq.primary-person-answer",answerDefault:"The primary person is the name of the person at the center of the event. Most historical records contain just one primary name.",learnMoreLink:"https://www.familysearch.org/en/help/helpcenter/article/who-is-the-principal-person-in-a-historical-record"},{showOnSteps:["2"],questionKey:"family-review.faq.missing-person-question",questionDefault:"What if someone is missing in this transcription?",answerKey:"family-review.faq.missing-person-answer",answerDefault:"Scroll down to the bottom and click Add New Person."},{showOnSteps:["3"],questionKey:"family-review.faq.question4",questionDefault:"What is an event?",answerKey:"family-review.faq.answer4",answerDefault:(0,k.Y)(i.Fragment,null,"The primary event is the event the record certifies. This could be a census, a baptism, a marriage, etc. Inferred events are other events mentioned in the document. For example, in a census, you might find information about where a person was born or lived.")},{showOnSteps:["3"],questionKey:"family-review.faq.question5",questionDefault:"What if I want to add an event?",answerKey:"family-review.faq.answer5",answerDefault:"Scroll down to the bottom and click Add Event."},{showOnSteps:["1","1-2","2","3"],questionKey:"family-review.faq.question3",questionDefault:"What should I do if I see a problem with this record?",answerKey:"family-review.faq.answer3",answerDefault:"If you want to correct the problem, go to the Record Details page, click edit, and make the correction."}],KT=async e=>{window.open(`/ark:/61903/${e}`,"_blank")||window.location.assign(`/ark:/61903/${e}`)},qT=e=>{let{personId:t,currentStep:a,handleGoToNextRecordAndResetStep:r,hasImagePermission:n}=e;const{t:o}=(0,P.B)(),{accessFromPrison:s,isReady:l}=(0,LA.A)();return(0,k.Y)(te.A,{as:"div",size:"sm"},(0,k.Y)("ol",null,UT.filter((e=>e.showOnSteps.includes(a))).map((e=>(0,k.Y)("div",{key:`${e.questionKey}-${e.answerKey}`},(0,k.Y)("strong",null,(0,k.Y)("li",null,o(e.questionKey,e.questionDefault))),(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(te.A,{size:"sm"},e.answerDefault),"learnMoreLink"in e&&!s&&l&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(M.Ay,{to:e.learnMoreLink,target:"__blank"},o("family-review.faq.learn-more","Learn More"))),"family-review.faq.question3"===e.questionKey&&(0,k.Y)(i.Fragment,null,t&&n&&!s&&l&&(0,k.Y)(Z.A,{emphasis:"low",Icon:Ha.A,title:o("navigation.details-button","Record Details"),onClick:()=>KT(t),"data-testid":"record-details",linkName:"Tip Record Details"},o("navigation.details-button","Record Details")),(0,k.Y)(te.A,{size:"sm"},o("family-review.step1.in-most-cases","In most cases, we recommend going to the next record and continuing with Family Review"),(0,k.Y)(Z.A,{emphasis:"low",onClick:r,"data-testid":"go-to-next-record",linkName:"Tip Go To Next Record"},o("family-review.step2.go-to-next-record","Go To Next Record")))),(0,k.Y)(ae.A,{size:"xs"}))))))},jT=(0,y.Ay)("rip:saveUtils"),$T=async e=>{let{dispatches:t,updateState:a=!0,userId:i,taskTypeParam:r,appName:n,saveChangesFlag:o,zionSLSState:s,zionSlsDispatch:l,handleError:d=()=>{},handleSuccess:c=()=>{}}=e;try{const e=(0,wi.q)(t);if(o.isOn)if(null!==e&&void 0!==e&&e.length){(0,Se.k7)(e,i,n),jT("saveSls: ",{sls:e});try{await hA(s.currentImageArk,e,!1,!1,r),a&&l({type:"BATCH_DISPATCHES",value:t}),c()}catch(p){var u,h;(0,$e.Yt)(p,null,{codeId:7777,sls:e,status:null===p||void 0===p||null===(u=p.response)||void 0===u?void 0:u.status,responseBody:null===p||void 0===p||null===(h=p.response)||void 0===h?void 0:h.data}),d(p)}}else c();else c(),jT("Saving changes to SLS is disabled")}catch(p){(0,$e.Yt)(p,null,{codeId:7777,sls:null===p||void 0===p?void 0:p.sls,dispatches:null===p||void 0===p?void 0:p.dispatches}),d(p)}},WT={comment:"",reasonId:In.LX,app:qe.uO};async function XT(e){let{primaryPerson:t,currentTask:a,partitionKey:i,zionSLSState:r,zionSlsDispatch:n,userId:o,saveChangesFlag:s}=e,l=[{type:"SET_PRIMARY",value:{partitionKey:i,id:t.id,primary:!0}}];if(t.recordId!==a.id){const e=(0,A.rr)(r.images,t.recordId);l=l.concat((0,Ai.nx)({person:t,destRecordId:a.recordId,sourceRecPartitionKey:e.partitionKey,destRecPartitionKey:a.partitionKey}))}await $T({dispatches:l,userId:o,taskTypeParam:"Family Review",appName:qe.uO,saveChangesFlag:s,zionSLSState:r,zionSlsDispatch:n})}async function QT(e){let{eventId:t,dirtyFields:a,highlights:i,partitionKey:r,values:n,zionSLSState:o,userId:s,saveChangesFlag:l,zionSlsDispatch:d,unlinkingStates:c,isPrimaryEvent:u,primaryPerson:h,currentTask:p,recordId:m,handleError:g,handleSuccess:v}=e;const y=e=>{let{dispatches:a,personId:i}=e;return a.push({type:"ADD_SUB",value:{superPartitionKey:r,subPartitionKey:r,superId:i,subId:t,elementType:"PERSON"}}),a},f=e=>{var i;let{dispatches:n,el:o,value:s}=e;const l=(null===(i=null!==(d=o)&&void 0!==d&&d.subElements?d.subElements.find((e=>"EVENT_TYPE"===e.fieldType)):null)||void 0===i?void 0:i.id)||null;var d;const c=a[t];return l?c&&(n=(e=>{let{dispatches:t,typeFieldId:a,value:i}=e;return t=[...t,...(0,Ai.DF)({partitionKey:r,typeFieldId:a,typeFieldValue:(0,Je.cN)(i.primaryText,WT,i.uri)})],t})({dispatches:n,typeFieldId:l,value:s})):n=(e=>{let{dispatches:t,eventElement:a,value:i}=e;const r=(0,A.Vs)();return t=[...t,...(0,Ai.Ns)({partitionKey:a.partitionKey,typeFieldId:r,typeFieldValue:(0,Je.cN)(i.primaryText,{...WT,reasonId:""}),elementId:a.id})],t})({dispatches:n,eventElement:o,value:s}),n};let b=[],w=i;const T=(0,A.rr)([o.images[0]],t),I=Object.entries(n);b=(e=>{var a;let{dispatches:i,valuesArray:n,event:o}=e;const s=n.filter((e=>{let[t,a]=e;return t.includes("person")&&a&&""!==a.key})).filter((e=>{let[,{key:t}]=e;return o.superElements.every((e=>e.id!==t))})).map((e=>{let[,{key:t}]=e;return t}));s.forEach((e=>{i=y({personId:e,eventId:t,dispatches:i})}));let l=o.superElements.filter((e=>{let{id:t}=e;return n.every((e=>{let[a,i]=e;return!(a.includes("person")&&i&&i.key)||t!==i.key}))})).filter((e=>{let{id:t}=e;return Boolean((0,A.cd)([p],t))})).map((e=>{let{id:t}=e;return t}));return u&&(l=null===(a=l)||void 0===a?void 0:a.filter((e=>e!==h.id))),l.forEach((e=>{i=(e=>{let{dispatches:a,personId:i}=e;return a.push({type:"REM_SUB",value:{superPartitionKey:r,subPartitionKey:r,superId:i,subId:t,elementType:"PERSON"}}),a})({personId:e,eventId:t,dispatches:i})})),u&&o.superElements.every((e=>e.id!==h.id))&&(i=y({personId:h.id,eventId:t,dispatches:i})),i})({valuesArray:I,event:T,dispatches:b,isPrimaryEvent:u});const S=(e=>{var i,n;let{dispatches:s,valuesArray:l,event:d,updatedHighlightsParam:u}=e,h=(null===(i=d.subElements.find((e=>"DATE"===e.elementType)))||void 0===i?void 0:i.id)||"",p=(null===(n=d.subElements.find((e=>"PLACE"===e.elementType)))||void 0===n?void 0:n.id)||"",m=u;return l.filter((e=>{let[t,a]=e;return!t.includes("-fieldType")&&!t.includes("-superType")&&!t.includes("person")&&("string"===typeof a||a.originalText||a.standard)||!t.includes("person")&&a.key&&""!==a.primaryText})).forEach(((e,i)=>{let[n,d]=e;const u=(0,A.rr)(o.images,n),g=Boolean(u),v=a[n],y=g&&"EVENT"===u.elementType,b="FIELD"===(null===u||void 0===u?void 0:u.elementType),w=!g;if(y)s=f({index:i,dispatches:s,el:u,value:d,dirtyFields:a});else if(b){var T;if(null!==(T=c[n])&&void 0!==T&&T.state){const e=(e=>{var a,i;let{dispatches:n,el:o,value:s,key:l,dateElementId:d,placeElementId:c,updatedHighlightsParam:u}=e;const h=null===o||void 0===o||null===(a=o.typeData)||void 0===a||null===(i=a.elementTypes)||void 0===i?void 0:i[0];let p=u,m=t;"DATE"===h&&(m=d),"PLACE"===h&&(m=c),n.push({type:"REM_SUB",value:{superPartitionKey:r,subPartitionKey:r,superId:m,subId:l,elementType:h}});const g=(0,A.Vs)();return n=n.concat((0,Ai.h8)({partitionKey:r,superId:m,fieldType:o.fieldType,fieldValue:(0,Je.cN)(s,WT),superElementType:h,id:g})),p=p.map((e=>e.fieldId===o.id?{...e,fieldId:g}:"deselected"===e.change&&e.originalHighlight.fieldId===o.id?{...e,fieldId:e.originalHighlight.fieldId,change:null}:e)),{dispatches:n,updatedHighlights:p}})({dispatches:s,el:u,value:d,key:n,dateElementId:h,placeElementId:p,updatedHighlightsParam:m});s=e.dispatches,m=e.updatedHighlights}else{if(!v)return;s=(e=>{let{dispatches:t,el:a,value:i}=e;if("REMOVED"===i||""===i)t=(e=>{let{dispatches:t,element:a}=e;return t.push({type:"REMOVE_ELEMENT",value:{id:a.id,partitionKey:a.partitionKey,elementType:a.elementType}}),t})({dispatches:t,element:a});else{const{id:e,value:r}=Cn({el:a,value:i,attribution:WT});t.push({type:"ADD_FV",value:{partitionKey:a.partitionKey,id:e,fieldValue:r}})}return t})({index:i,dispatches:s,el:u,value:d})}}else if(w){if(!d)return;const e=l.find((e=>{let[t]=e;return t===`${n}-superType`}))[1],a=l.find((e=>{let[t]=e;return t===`${n}-fieldType`}))[1];"DATE"!==e||h?"PLACE"!==e||p||(p=(0,A.Vs)(),s=(e=>{let{dispatches:a,placeElementId:i}=e;return[...a,...(0,Ai.qJ)({partitionKey:r,intermediaryType:"PLACE",superId:t,intermediaryId:i,superType:"EVENT"})]})({dispatches:s,placeElementId:p})):(h=(0,A.Vs)(),s=(e=>{let{dispatches:a,dateElementId:i}=e;return[...a,...(0,Ai.qJ)({partitionKey:r,intermediaryType:"DATE",superId:t,intermediaryId:i,superType:"EVENT"})]})({dispatches:s,dateElementId:h})),s=(e=>{let{dispatches:t,key:a,value:i,superId:n,superType:o,fieldType:s}=e,l=(0,Je.cN)("string"===typeof i?i:i.originalText,{...WT,reasonId:""});return i.standard&&(l=(0,Je.nu)(i,s,WT)),t=[...t,...(0,Ai.h8)({partitionKey:r,superId:n,fieldType:s,fieldValue:l,superElementType:o,id:a})],t})({dispatches:s,valuesArray:l,fieldType:a,key:n,value:d,superType:e,superId:"DATE"===e?h:p})}})),{dispatches:s,updatedHighlights:m}})({valuesArray:I,dispatches:b,event:T,updatedHighlightsParam:w});b=S.dispatches,w=S.updatedHighlights,b=[...b,...(0,Ai.Aq)(o.images,r,w,"",!0)],b.length?(b.push({type:"SET_RECORD_PERSON_IDS",value:m}),await $T({dispatches:b,userId:s,taskTypeParam:"Family Review",appName:qe.uO,saveChangesFlag:l,zionSLSState:o,zionSlsDispatch:d,handleError:g,handleSuccess:v})):v()}async function JT(e){let{partitionKey:t,personId:a,zionSLSState:i,zionSlsDispatch:r,userId:n,saveChangesFlag:o}=e;const s=[{type:"REMOVE_ELEMENT",value:{id:a,elementType:"PERSON",partitionKey:t}}];await $T({dispatches:s,userId:n,taskTypeParam:"Family Review",appName:qe.uO,saveChangesFlag:o,zionSLSState:i,zionSlsDispatch:r})}const ZT=e=>{let{overlay:t}=e;const[a]=(0,P.B)(),{accessFromPrison:i,isReady:r}=(0,LA.A)();return(0,k.Y)(Zr.A,(0,j.A)({},t,{title:(0,k.Y)(J.Ay,{alignY:"middle"},(0,k.Y)(re.H5,{growX:!0},a("family-review.record-tool-tip.title","What is a record?")),(0,k.Y)(ee.A,{alignY:"bottom",Icon:$g.A,onClick:t.close,"data-testid":"close-button"}))}),(0,k.Y)(te.A,null,a("family-review.record-tool-tip.description","A record is a document that certifies a life event. It can be as large as a few images or as small as a line or two on a ledger or register.")),!i&&r&&(0,k.Y)(te.A,null,(0,k.Y)(M.Ay,{to:"https://www.familysearch.org/en/help/helpcenter/article/what-is-the-difference-between-a-record-and-an-image",target:"__blank"},a("family-review.record-tool-tip.link-text","Learn More"))))};function eI(e){let{currentTask:t,loading:a,setStepTwoData:r,stepTwoOverlay:n,skipTask:o,stepOnePartTwoOverlay:s,hasImagePermission:l,handleGoToNextRecordAndResetStep:d,setSaveUpdateCalled:c}=e;const u=(0,bi.Y)(),[h]=(0,P.B)(),p=Vy(),m=By(),g=(0,b.A)(),v=(0,Ae.l)(),y=(0,L.u)("rip_sharedImageViewer_saveChanges"),f=(0,$.Ay)(),A=YT(t);return(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H2,{size:"H5"},(0,k.Y)(Mt.A,null,h("family-review.stepXof4","Step {step} of 4",{step:"1"})),(0,k.Y)(O.x,{i18nKey:"family-review.step1.content"},"Is this"," ",(0,k.Y)(Z.A,{onClick:f.handleClick,dense:!0,"data-testid":"record-tooltip-button",linkName:"Family Review Step One Record Tooltip Button"},(0,k.Y)("strong",null,(0,k.Y)("u",null,"record"))),(0,k.Y)("span",null,"\xa0primarily about ",{primaryPerson:A},"?"),(0,k.Y)(te.A,{size:"sm"},"You can correct any highlight or spelling mistakes in the next step."))),(0,k.Y)(ZT,{overlay:f}),(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)(st.N6,{columnCount:3},(0,k.Y)(kT,{onClick:async()=>{const e=xT(t);e.primary||(await XT({primaryPerson:e,currentTask:t,partitionKey:t.partitionKey,zionSLSState:g,zionSlsDispatch:v,userId:p.userId,saveChangesFlag:y}),c(!0)),r(),n.open(),m({type:"SET_CURRENT_STEP",value:My.STEP_TWO})},loading:a,linkName:"Step One Yes"}),(0,k.Y)(IT,{onClick:()=>{s.open(),u.clearDisplay({all:!0})},loading:a,linkName:"Step One No"}),(0,k.Y)(CT,{onClick:o,loading:a,linkName:"Step One Unsure"})),(0,k.Y)(ae.A,null),(0,k.Y)(J.Ay,null,(0,k.Y)(Z.A,{title:h("navigation.not-a-person-button","Not A Person"),Icon:gi.A,linkName:"Step One Not A Person",onClick:()=>{var e;const a=FT(t);JT({partitionKey:t.partitionKey,personId:null===(e=xT(t))||void 0===e?void 0:e.id,zionSLSState:g,zionSlsDispatch:v,userId:p.userId,saveChangesFlag:y}),a.length>1?s.open():1===a.length&&(!async function(e){let{partitionKey:t,recordId:a,zionSLSState:i,zionSlsDispatch:r,userId:n,saveChangesFlag:o}=e;const s=[{type:"REMOVE_ELEMENT",value:{id:a,elementType:"RECORD",partitionKey:t}}];await $T({dispatches:s,userId:n,taskTypeParam:"Family Review",appName:qe.uO,saveChangesFlag:o,zionSLSState:i,zionSlsDispatch:r})}({partitionKey:t.partitionKey,recordId:null===t||void 0===t?void 0:t.id,zionSLSState:g,zionSlsDispatch:v,userId:p.userId,saveChangesFlag:y}),o())},color:"blue",emphasis:"low",size:"sm",disabled:a,"data-testid":"not-a-person-button"},h("navigation.not-a-person-button","Not A Person"))),(0,k.Y)(go,{overline:" ",primaryText:(0,k.Y)("span",{style:{color:W.A.blue60}},(0,k.Y)("strong",null,h("family-review.step1.help-with-this-step","Help with this step"))),listPrimaryText:(0,k.Y)(qT,{personId:null===t||void 0===t?void 0:t.personId,currentStep:p.currentStep,handleGoToNextRecordAndResetStep:d,hasImagePermission:l})}))}var tI=a(40087);const aI=["NAME_PRE","NAME_GN","NAME_SPRE","NAME_SURN","NAME_SUF","NAME_PATR","NAME_MATR"],iI=[...aI,"SEX_CODE"],rI=[...aI,"BIRTH_DATE","DEATH_DATE","OCCUPATION","PLACE"],nI=e=>{var t,a,i;const r=(null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t.filter((e=>"PLACE"===(null===e||void 0===e?void 0:e.elementType))))||[],n=(null===e||void 0===e||null===(a=e.subElements)||void 0===a?void 0:a.filter((e=>"DATE"===(null===e||void 0===e?void 0:e.elementType))))||[],o=(null===e||void 0===e||null===(i=e.subElements)||void 0===i?void 0:i.filter((e=>"EVENT_TYPE"===(null===e||void 0===e?void 0:e.fieldType))))||[];return r.concat(n).concat(o).flatMap((e=>(null===e||void 0===e?void 0:e.subElements)||e)).filter((e=>null===e||void 0===e?void 0:e.rects)).flatMap((e=>null===e||void 0===e?void 0:e.id))},oI=e=>{(0,tI.d)(e,["highlights","personIds","includeSex","includeAll"]);const{highlights:t,personIds:a,includeSex:i=!1,includeAll:r=!1}=e;if(t){let e=aI;r?e=rI:i&&(e=iI);return Un()(a.flatMap((a=>t.filter((e=>e.personIds.includes(a))).filter((t=>e.includes(t.fieldType)||t.attached)))),(e=>e.id))}},sI=e=>{(0,tI.d)(e,["h","mainPartitionKey","splitScreenPartitionKey","personIds","highlights","recordHighlights","isSmallScreen"]);const{h:t,mainPartitionKey:a,splitScreenPartitionKey:i,personIds:r,isSmallScreen:n}=e;let{highlights:o,recordHighlights:s}=e;o||(o=[...t.getHighlights().mainEditHighlights,...t.getHighlights().splitScreenEditHighlights]),s||(s=[...t.getHighlights().mainRecordHighlights,...t.getHighlights().splitScreenRecordHighlights]);const l=oI({highlights:o,personIds:r});t.setDisplayHighlights({mainPartitionKey:a,splitScreenPartitionKey:i,highlights:l,recordHighlights:s,setMainZoom:!0,setSplitScreenZoom:Boolean(i),isSmallScreen:n})},lI=e=>{(0,tI.d)(e,["h","currentTask","highlights","eventIds","isSmallScreen","includeAll","splitScreenPartitionKey","forceFieldIds"]);const{h:t,currentTask:a,highlights:i,eventIds:r=[],isSmallScreen:n,includeAll:o=!1,splitScreenPartitionKey:s,forceFieldIds:l}=e,d=null===r||void 0===r?void 0:r.flatMap((e=>(0,A.cd)(null===a||void 0===a?void 0:a.subElements,e))),c=null===d||void 0===d?void 0:d.flatMap((e=>nI(e))),u=null===d||void 0===d?void 0:d.flatMap((e=>{var t;return null===e||void 0===e||null===(t=e.superElements.filter((e=>{let{id:t}=e;return Boolean((0,A.cd)([a],t))})))||void 0===t?void 0:t.map((e=>e.id))})),h=[...oI({highlights:i,personIds:u,includeAll:o}),...i.filter((e=>l?l.includes(e.fieldId):c.includes(e.fieldId)))];t.setDisplayHighlights({mainPartitionKey:a.partitionKey,splitScreenPartitionKey:s,highlights:h,setMainZoom:!0,setSplitScreenZoom:Boolean(s),isSmallScreen:n})},dI=e=>{(0,tI.d)(e,["h","currentTask","highlights","personIds","isSmallScreen","splitScreenPartitionKey"]);const{h:t,currentTask:a,highlights:i,personIds:r,isSmallScreen:n,splitScreenPartitionKey:o}=e,s=a.subElements.filter((e=>r.includes(e.id))).flatMap((e=>{var t;return null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t.filter((e=>"EVENT"===e.elementType))})).flatMap((e=>nI(e)));t.setDisplayHighlights({mainPartitionKey:a.partitionKey,splitScreenPartitionKey:o,highlights:i,elementIds:[...r,...s],setMainZoom:!0,setSplitScreenZoom:Boolean(o),isSmallScreen:n})},cI=(e,t,a,i)=>{let r=null;const n=e.map((e=>{const n=e.change,o=e.fieldId===t,s=e.originalHighlight.fieldId&&e.fieldId!==e.originalHighlight.fieldId;if(n&&o&&s){const n=(0,A.rr)([a],t)||{fieldType:i},o=(0,A.rr)([a],e.originalHighlight.fieldId),s=(null===o||void 0===o?void 0:o.fieldType)===n.fieldType;if(o&&s){r=o;const t={...e,fieldId:r.id};return delete t.change,t}}return e}));return{sharedField:r,updatedHighlights:n}},uI=(e,t,a)=>{let i=e,r=[];const n=cI(i,t,a,"NAME_SURN");if(n.sharedField){var o;i=n.updatedHighlights;const e=null===(o=n.sharedField.superElements)||void 0===o?void 0:o[0].id;if(e){var s;const t=(0,A.rr)([a],e);(null===t||void 0===t||null===(s=t.superElements)||void 0===s?void 0:s.length)>1&&(r=r.concat((0,Ai.qq)(t)))}}return{sharedField:n.sharedField,updatedHighlights:i,dispatches:r}};async function hI(e){let{currentTask:t,partitionKey:a,formValues:i,dirtyFields:r,unlinkingNames:n,personId:o,userId:s,nameElementId:l,highlights:d,relatedPersonId:c,zionSLSState:u,zionSlsDispatch:h,saveChangesFlag:p,handleError:m,handleSuccess:g}=e;const v=(0,A.rr)(u.images,o),{surnameElId:y,surnamePartitionKey:f,hasSecondarySurnameEl:b}=Yn(i,v),w={comment:"",reasonId:"",app:qe.uO};let T=[],I=d,S=l;S||(S=(0,A.Vs)(),T=T.concat((0,Ai.vc)({partitionKey:v.partitionKey,nameElementId:S,nameType:"BIRTH_NAME",personId:v.id})));const E=(e,i,s)=>{const l="REMOVED"===s||"OTHER"===(null===s||void 0===s?void 0:s.key),d=r[i],h=cI(I,i,t),p=n[e.fieldType],m=A.AZ.includes(null===s||void 0===s?void 0:s.key);if(l)T=T.concat(xn(e,i,b,v,u.images));else if(h.sharedField)I=h.updatedHighlights,T=T.concat(zT(t,v,i,s,h.sharedField));else if(d||p)if("RELATIONSHIP"===e.elementType){T=T.concat((0,Ai.Uk)({element:e}));const{relType:t,order:i}=LT(s);T=T.concat((0,Ai.vP)({partitionKey:a,person1ID:"FIRST"===i?o:c,person2ID:"FIRST"===i?c:o,person1PartitionKey:a,person2PartitionKey:a,relType:t,id:(0,A.Vs)()}))}else if("NAME_SURN"===e.fieldType){const a=((e,t,a,i,r,n,o,s)=>{let l=e;const d=uI(l,t.id,s);l=d.updatedHighlights;let c=d.dispatches;if(r.NAME_SURN){var u;const e=(0,Ai.jb)({nameId:n,surnameField:t,images:o.images,newFieldText:a,existingNameSurnId:null===(u=d.sharedField)||void 0===u?void 0:u.id,attribution:i});if(!d.sharedField){const a=e.find((e=>{var t;return"CREATE_ELEMENT"===e.type&&"NAME_SURN"===(null===(t=e.value.extraArgs)||void 0===t?void 0:t.fieldType)})),i=null===a||void 0===a?void 0:a.value.id;l=l.map((e=>e.fieldId===t.id?{...e,fieldId:i}:e))}l=l.map((e=>"deselected"===e.change&&e.originalHighlight.fieldId===t.id?{...e,fieldId:e.originalHighlight.fieldId,change:null}:e)),c=c.concat(e)}else if(d.sharedField)t.superElements.forEach((e=>{var a;(null===(a=e.superElements)||void 0===a?void 0:a.length)>1?e.superElements.forEach((t=>{const a=(0,A.rr)(o.images,t);c=c.concat((0,Ai.FJ)(a,e,{partitionKey:d.sharedField.partitionKey,id:d.sharedField.id}))})):c.push({type:"REM_SUB",value:{superPartitionKey:e.partitionKey,subPartitionKey:t.partitionKey,superId:e.id,subId:t.id,elementType:"NAME_SURNAME"}},{type:"ADD_SUB",value:{superPartitionKey:e.partitionKey,subPartitionKey:d.sharedField.partitionKey,superId:e.id,subId:d.sharedField.id,elementType:"NAME_SURNAME"}})}));else{const e=(0,Je.cN)(a,i);c.push({type:"ADD_FV",value:{partitionKey:t.partitionKey,id:t.id,fieldValue:e}})}return{dispatches:c,updatedHighlights:l}})(I,e,s,{...w,reasonId:In.LX},n,S,u,t);T=T.concat(a.dispatches),I=a.updatedHighlights}else if(["NAME_PATR","NAME_MATR","NAME_SPRE"].includes(e.fieldType)){const t=((e,t,a,i,r,n,o)=>{const s=(0,Je.cN)(a,i);let l=e,d=[];const c=(0,ha.D9)(l,t.fieldId,a,o.images);if(c.sharedField&&(l=c.updatedHighlights),r[t.fieldType]){var u;const e=null===(u=t.superElements)||void 0===u?void 0:u.find((e=>(0,A.rr)(o.images,e.id).personId===n));if(e){const a=(0,A.Vs)();d.push({type:"REM_SUB",value:{superPartitionKey:e.partitionKey,subPartitionKey:t.partitionKey,superId:e.id,subId:t.id,elementType:"NAME_SURNAME"}}),c.sharedField?d.push({type:"ADD_SUB",value:{superPartitionKey:e.partitionKey,subPartitionKey:c.sharedField.partitionKey,superId:e.id,subId:c.sharedField.id,elementType:"NAME_SURNAME"}}):d=d.concat((0,Ai.h8)({partitionKey:t.partitionKey,superId:e.id,fieldType:t.fieldType,fieldValue:s,superElementType:"NAME_SURNAME",id:a})),l=l.map((e=>e.fieldId===t.id?{...e,fieldId:a}:e))}l=l.map((e=>"deselected"===e.change&&e.originalHighlight.fieldId===t.id?{...e,fieldId:e.originalHighlight.fieldId,change:null}:e))}else c.sharedField?t.superElements&&t.superElements.forEach((e=>{d.push({type:"REM_SUB",value:{superPartitionKey:e.partitionKey,subPartitionKey:t.partitionKey,superId:e.id,subId:t.id,elementType:"NAME_SURNAME"}},{type:"ADD_SUB",value:{superPartitionKey:e.partitionKey,subPartitionKey:c.sharedField.partitionKey,superId:e.id,subId:c.sharedField.id,elementType:"NAME_SURNAME"}})})):d.push({type:"ADD_FV",value:{partitionKey:t.partitionKey,id:t.id,fieldValue:s}});return{dispatches:d,updatedHighlights:l}})(I,e,s,{...w,reasonId:In.LX},n,o,u);T=T.concat(t.dispatches),I=t.updatedHighlights}else if(m){const t=(0,Je.cN)(null===s||void 0===s?void 0:s.primaryText,w,`http://gedcomx.org/${null===s||void 0===s?void 0:s.key}`);T.push({type:"ADD_FV",value:{partitionKey:e.partitionKey,id:e.id,fieldValue:t}})}else{const t=(0,Je.cN)(s,{...w,reasonId:In.LX});T.push({type:"ADD_FV",value:{partitionKey:e.partitionKey,id:e.id,fieldValue:t}})}else{const t=(0,ha.D9)(I,i,s,u.images);t.sharedField&&(I=t.updatedHighlights,e.superElements.forEach((a=>{const i=(0,A.rr)(u.images,a.id);T.push({type:"REM_SUB",value:{superPartitionKey:i.partitionKey,subPartitionKey:e.partitionKey,superId:i.id,subId:e.id,elementType:i.elementType}},{type:"ADD_SUB",value:{superPartitionKey:i.partitionKey,subPartitionKey:t.sharedField.partitionKey,superId:i.id,subId:t.sharedField.id,elementType:i.elementType}})})))}};Object.entries(i).filter((e=>{let[t,a]=e;return!t.includes("_fieldType")&&("string"!==typeof a||(null===a||void 0===a?void 0:a.length)>=0)})).forEach((e=>{let[t,r]=e;const n=(0,A.rr)([v],t),s="REL_TYPE"===i[`${t}_fieldType`],l="SEX_CODE"===i[`${t}_fieldType`];if(n)E(n,t,r);else if(s){if(r&&"OTHER"!==(null===r||void 0===r?void 0:r.key)){const{relType:e,order:t}=LT(r);T=T.concat((0,Ai.vP)({partitionKey:a,person1ID:"FIRST"===t?o:c,person2ID:"FIRST"===t?c:o,person1PartitionKey:a,person2PartitionKey:a,relType:e,id:(0,A.Vs)()}))}}else if(l){const e=(0,ha.D9)(I,t,r,u.images);e.sharedField&&(I=e.updatedHighlights,T.push({type:"ADD_SUB",value:{superPartitionKey:v.partitionKey,subPartitionKey:e[0].partitionKey,superId:o,subId:e.sharedField.id,elementType:"PERSON"}}));const a=(0,Je.cN)(r.primaryText,w,`http://gedcomx.org/${r.key}`),n={partitionKey:v.partitionKey,superId:o,id:t,fieldType:i[`${t}_fieldType`],fieldValue:a};T=T.concat((0,Ai.h8)(n))}else{const e=(e=>{let{highlights:t,key:a,value:i,attr:r,formValues:n,selectedPerson:o,partitionKey:s,surnamePartitionKey:l,surnameElId:d,nameElementId:c,zionSLSState:u}=e,h=t,p=[];const m=n[`${a}_fieldType`],g={NAME_PRE:"NAME_PREFIX",NAME_GN:"NAME_GIVEN",NAME_SURN:"NAME_SURNAME",NAME_SUF:"NAME_SUFFIX",NAME_SPRE:"NAME_SURNAME",NAME_PATR:"NAME_SURNAME",NAME_MATR:"NAME_SURNAME"}[m],v=(0,ha.D9)(h,a,i,u.images);v.sharedField&&(h=v.updatedHighlights);const y=(0,Je.cN)(i,r);if("NAME_SPRE"===m||"NAME_PATR"===m||"NAME_MATR"===m)if(d){var f;if((0,A.Qv)(d,[o])){const e=(0,A.rr)([o],d);p=p.concat((0,Ai.qq)(e))}const e=o.subElements.find((e=>"NAME"===e.elementType)),t=null===(f=p.find((t=>"ADD_SUB"===t.type&&t.value.superId===e.id)))||void 0===f?void 0:f.value.subId;v.sharedField?p.push({type:"ADD_SUB",value:{superPartitionKey:l,subPartitionKey:v.sharedField.partitionKey,superId:t||d,subId:v.sharedField.id,elementType:"NAME_SURNAME"}}):p=p.concat((0,Ai.h8)({partitionKey:l,superId:t||d,fieldType:m,fieldValue:y,superElementType:"NAME_SURNAME",id:a}))}else p=v.sharedField?p.concat((0,Ai.b)({partitionKey:s,nameId:c,sharedFieldId:v.sharedField})):p.concat((0,Ai.iu)({partitionKey:o.partitionKey,nameSuperId:c,fieldValue:y,fieldType:m,elementType:g,nameFieldId:a}));else p=p.concat((0,Ai.iu)({partitionKey:o.partitionKey,nameSuperId:c,fieldValue:y,fieldType:m,elementType:g,nameFieldId:a,nameElementId:"NAME_SURNAME"===g?d:(0,A.Vs)()}));return{dispatches:p,updatedHighlights:h}})({highlights:d,key:t,value:r,attr:w,formValues:i,selectedPerson:v,partitionKey:a,surnamePartitionKey:f,surnameElId:y,nameElementId:S,zionSLSState:u});T=T.concat(e.dispatches),I=e.updatedHighlights}})),T=Sn(T.concat((0,Ai.Aq)(u.images,a,I,null,!0))),T.push({type:"SET_RECORD_PERSON_IDS",value:v.recordId}),await $T({dispatches:T,userId:s,taskTypeParam:"Family Review",appName:qe.uO,saveChangesFlag:p,zionSLSState:u,zionSlsDispatch:h,handleError:m,handleSuccess:g})}async function pI(e){let{partitionKey:t,addNewPersonData:a,personId:i,userId:r,recordId:n,highlights:o,setAsPrimary:s,relatedPersonId:l,zionSLSState:d,zionSlsDispatch:c,saveChangesFlag:u,currentTask:h}=e,p=[];const m={comment:"",reasonId:"",app:qe.uO},g=uI(o,a.surnameFieldId,h);if(p=p.concat(g.dispatches),g.sharedField?(p=p.concat((0,Ai.Ud)({partitionKey:t,personId:i,recordId:n,setAsPrimary:s,givenNameFieldId:a.givenNameFieldId,surnameFieldId:g.sharedField.id,givenNameFieldValue:a.givenField?(0,Je.cN)(a.givenField,m):null,nameType:a.nameType})),p.push({type:"ADD_FV",value:{partitionKey:t,id:g.sharedField.id,fieldValue:(0,Je.cN)(a.surnameField,m)}})):p=(0,Ai.e9)({partitionKey:t,personId:i,recordId:n,primaryPerson:s,givenNameFieldId:a.givenNameFieldId,surnameFieldId:a.surnameFieldId,givenNameFieldValue:a.givenField?(0,Je.cN)(a.givenField,m):null,surnameFieldValue:a.surnameField?(0,Je.cN)(a.surnameField,m):null,nameType:a.nameType}),s){h.subElements.filter((e=>"PERSON"===e.elementType&&e.primary)).forEach((e=>{p.push({type:"SET_PRIMARY",value:{partitionKey:t,id:e.id,primary:!1}})}))}const{sharedField:v,updatedHighlights:y}=(0,ha.D9)(g.updatedHighlights,a.sexFieldId,a.sexField,d.images);if(v?p.push({type:"ADD_SUB",value:{superPartitionKey:t,subPartitionKey:t,superId:i,subId:v.id,elementType:"PERSON"}}):p=p.concat((0,Ai.h8)({partitionKey:t,superId:i,fieldType:"SEX_CODE",fieldValue:(0,Je.cN)(a.sexField.primaryText,m,`http://gedcomx.org/${a.sexField.key}`),id:a.sexFieldId})),a.relationshipField){const{relType:e,order:r}=LT(a.relationshipField);p=p.concat((0,Ai.vP)({partitionKey:t,person1ID:"FIRST"===r?i:l,person2ID:"FIRST"===r?l:i,person1PartitionKey:t,person2PartitionKey:t,relType:e,id:(0,A.Vs)()}))}p=p.concat((0,Ai.Aq)(d.images,t,y,null,!0)),p.push({type:"SET_RECORD_PERSON_IDS",value:n}),await $T({dispatches:p,userId:r,taskTypeParam:"Family Review",appName:qe.uO,saveChangesFlag:u,zionSLSState:d,zionSlsDispatch:c})}function mI(e){let{isAdding:t,handleHighlightButtonClicked:a,editHighlightsOverlay:i,id:r}=e;const[n]=(0,P.B)(),o=By();return(0,k.Y)(Si.A,{"data-testid":"highlight-button",Icon:Ar.A,iconSize:"xs",emphasis:"low",linkName:t?"Add Highlight":"Edit Highlight",onClick:()=>{o({type:"SET_IS_ADDING_HIGHLIGHT",value:t}),i.open(),a(r)}},t?n("edit-index.add-highlight.button","Add Highlight"):n("edit-index.edit-highlight.button","Edit Highlight"))}function gI(e){let{message:t}=e;return(0,k.Y)(Ft.A,{primaryColor:W.A.yellow70},(0,k.Y)(te.A,{size:"xs"},(0,k.Y)(Gt.A,{size:"sm",color:W.A.yellow70}),t))}function vI(e){var t,a,r;let{createNewPersonFormPage1Overlay:n,currentTask:o,handleSubmit:s,hasSelectedHighlights:l,editHighlightsOverlay:d,headingColor:c="green",isPrimaryPerson:u=!1}=e;const h=(0,bi.Y)(),[p]=(0,P.B)(),m=(0,ci.Ay)()({default:!0,md:!1}),g=(0,b.A)(),v=Vy(),y=By(),[f,w]=(0,i.useState)(),[T,I]=(0,i.useState)(),[S,E]=(0,i.useState)((0,A.Vs)()),[C,x]=(0,i.useState)((0,A.Vs)()),Y=(0,i.useRef)(!1),N=e=>[...h.getHighlights().mainEditHighlights,...h.getHighlights().splitScreenEditHighlights].find((t=>t.fieldId===e)),R=(0,ur.SV)({mode:"all",defaultValues:{nameType:"BIRTH_NAME",givenField:"",surnameField:"",givenNoHighlightCheckbox:"",surnameNoHighlightCheckbox:""},resolver:e=>{const t={};R.clearErrors();const{givenNoHighlightCheckbox:a,surnameNoHighlightCheckbox:i,givenField:r,surnameField:n,nameType:o}=e;return o||(t.nameType={type:"required",message:p("add-person.form-error-one","Must have a name type")}),r||n||(t.givenField={type:"required",message:p("add-person.form-error-three","Must have a given name or a surname")},t.surnameField={type:"required",message:p("add-person.form-error-three","Must have a given name or a surname")}),Y.current&&(!r||a||N(S)||(t.givenField={type:"required",message:p("add-person.form-error-two","Must either add a highlight or select No Highlight Possible")}),!n||i||N(C)||(t.surnameField={type:"required",message:p("add-person.form-error-two","Must either add a highlight or select No Highlight Possible")}),Y.current=!1),{values:e,errors:t}}}),[O,_]=(0,hr.FH)({name:["givenNoHighlightCheckbox","surnameNoHighlightCheckbox"],control:R.control}),F=(0,Me.ti)({elementType:"FIELD",fieldType:"NAME_GN"},null===g||void 0===g?void 0:g.types,p),D=(0,Me.ti)({elementType:"FIELD",fieldType:"NAME_SURN"},null===g||void 0===g?void 0:g.types,p),M=(0,i.useMemo)((()=>{var e,t;return null===(e=g.types)||void 0===e||null===(t=e.names)||void 0===t?void 0:t.map((e=>({value:e.nameType,label:e.displayLabel})))}),[null===(t=g.types)||void 0===t?void 0:t.names]);(0,i.useEffect)((()=>{n.isOpen&&(R.reset({nameType:"BIRTH_NAME",givenField:"",surnameField:"",givenNoHighlightCheckbox:!1,surnameNoHighlightCheckbox:!1}),E((0,A.Vs)()),x((0,A.Vs)()),w(null),I(null),h.clearDisplay({all:!0}))}),[n.isOpen,R,m]);const H=e=>{e&&y({type:"SET_ACTIVE_FIELD_ID",value:e}),h.setDisplayHighlights({mainPartitionKey:o.partitionKey,splitScreenPartitionKey:v.splitScreenPartitionKey,setMainZoom:!0,setSplitScreenZoom:Boolean(v.splitScreenPartitionKey),attachFilter:t=>t.fieldId===e,mainZoomFilter:t=>t.fieldId===e,splitScreenZoomFilter:t=>t.fieldId===e,isSmallScreen:m})},L=()=>{n.close(),h.clearEdits(),h.clearDisplay({all:!0})},z=Boolean((null===(a=R.formState.errors)||void 0===a?void 0:a.givenField)||(null===(r=R.formState.errors)||void 0===r?void 0:r.surnameField))&&Boolean(!T&&!f);return(0,k.Y)(hi.A,(0,j.A)({},n,{close:()=>{L()},headingColor:c,title:v.currentStep===_y.STEP_ONE?p("family-review.step1.heading","Identify Primary Person"):p("family-review.step3.heading","Family Relationships"),footer:(0,k.Y)(J.Ay,{alignX:"end"},(0,k.Y)(Z.A,{onClick:()=>{L()},"data-testid":"add-person-create-form-cancel-button",linkName:"Create New Person One Cancel"},p("navigation.cancel-button","Cancel")),(0,k.Y)(Z.A,{emphasis:"high","data-testid":"add-person-create-form-next-button",type:"submit",form:"create-new-person-form-1",linkName:"Add Person "+(u?"Save":"Next")},u?p("navigation.save-button","Save"):p("navigation.next-button","Next")))}),n.isOpen&&(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H2,{size:"H5"},u?p("family-review.addPerson.add-new-primary","Add New Primary Person"):p("family-review.addPerson.add-new","Add new Person")),(0,k.Y)(_e.A,{heading:p("add-person.subtitle","Select and fill out a name part to continue."),data:p("add-person.body-text","Must have at least one name part and a highlight.")}),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(pr.Ay,{methods:R,onSubmit:async()=>{Y.current=!0;await R.trigger()&&s(R.getValues(),S,C)},id:"create-new-person-form-1"},(0,k.Y)(mr.FX,{name:"nameType",label:p("add-person.name-type-select","Name Type"),placeholder:p("add-person.name-type-select","Name Type"),options:M}),!f&&(0,k.Y)(J.Ay,null,(0,k.Y)(Si.A,{"data-testid":"add-given-name",Icon:Ci.A,color:"blue",emphasis:"low",linkName:"Add Person Add Given Name",onClick:()=>w({id:S,label:F,fieldType:"NAME_GN",name:"givenField"})},p("add-person.add-given-name","Add given name"))),f&&(0,k.Y)(Ne.A,{initiallyOpen:!0},(0,k.Y)(Re.A,null,F),(0,k.Y)(Pe.A,null,(0,k.Y)(mr.YJ,{"data-testid":"addPersonNameField0",name:"givenField",label:F,placeholder:F,maxLength:256}),(0,k.Y)(mI,{handleHighlightButtonClicked:e=>{H(e)},disabled:O,editHighlightsOverlay:d,id:S,isAdding:!l(S)},p("add-person.highlight-button","Add Highlight")),(0,k.Y)(mr.cG,{"data-testid":"addPersonNoHighlightPossible0",label:p("highlight-required-checkbox-label","No highlight possible"),name:"givenNoHighlightCheckbox",disabled:Boolean(l(S))}),(0,k.Y)(Si.A,{"data-testid":"delete-given-name",color:"red",Icon:xi.A,emphasis:"low",linkName:"Add Person Remove Given Name",onClick:()=>{w(null),R.setValue("givenField","")}},p("add-person.remove-given-name","Remove given name")))),!T&&(0,k.Y)(J.Ay,null,(0,k.Y)(Si.A,{"data-testid":"add-surname",Icon:Ci.A,color:"blue",emphasis:"low",linkName:"Add Person Add Surname",onClick:()=>I({id:C,label:D,fieldType:"NAME_SURN",newPersonId:"",name:"surnameField"})},p("add-person.add-surname","Add surname"))),z&&(0,k.Y)(gI,{message:p("add-person.form-error-three","Must have a given name or a surname")}),T&&(0,k.Y)(Ne.A,{initiallyOpen:!0},(0,k.Y)(Re.A,null,D),(0,k.Y)(Pe.A,null,(0,k.Y)(mr.YJ,{"data-testid":"addPersonNameField1",name:"surnameField",label:D,placeholder:D,maxLength:256}),(0,k.Y)(mI,{handleHighlightButtonClicked:e=>{H(e)},disabled:_,editHighlightsOverlay:d,id:C,isAdding:!l(C)},p("add-person.highlight-button","Add Highlight")),(0,k.Y)(mr.cG,{"data-testid":"addPersonNoHighlightPossible1",label:p("highlight-required-checkbox-label","No highlight possible"),name:"surnameNoHighlightCheckbox",disabled:Boolean(l(C))}),(0,k.Y)(Si.A,{"data-testid":"delete-surname",color:"red",Icon:xi.A,emphasis:"low",linkName:"Add Person Remove Surname",onClick:()=>{I(null),R.setValue("surnameField","")}},p("add-person.remove-surname","Remove surname")))))))}function yI(e){let{createNewPersonFormPage1Overlay:t,createNewPersonFormPage2Overlay:a,stepOnePartTwoOverlay:r,handleSubmit:n,givenField:o,surnameField:s,primaryPersonName:l,editHighlightsOverlay:d,currentTask:c,headingColor:u="green",isPrimaryPerson:h=!1,stepTwoOverlay:p}=e;const m=(0,bi.Y)(),[g]=(0,P.B)(),v=(0,ci.Ay)()({default:!0,md:!1}),y=(0,b.A)(),f=Vy(),w=By(),T=(0,ur.SV)({mode:"all",defaultValues:{sexField:{key:"",primaryText:""},relationshipField:{key:"",primaryText:""}},resolver:e=>{const t={};T.clearErrors();const{relationshipField:a,sexField:i}=e;return null!==i&&void 0!==i&&i.key&&A.AZ.includes(null===i||void 0===i?void 0:i.key)||(t.sexField={message:g("standardizedSexField.validation.warning","No Standard Selected")}),h||a||(t.relationshipField={type:"required",message:g("FormValidation.notEmpty","Field cannot be empty.")}),{values:e,errors:t}}}),[I]=(0,hr.FH)({name:["sexField"],control:T.control}),S=(0,i.useMemo)((()=>HT(y.types,null===I||void 0===I?void 0:I.key)||[]),[y.types,I]);(0,i.useEffect)((()=>{a.isOpen&&(T.reset({sexField:{key:"",primaryText:""},relationshipField:{key:"",primaryText:""}}),T.reset({sexField:"",relationshipField:null}))}),[a.isOpen,f.addedSexId,T]);const E=[o,s].filter(Boolean).join(" ");return(0,k.Y)(hi.A,(0,j.A)({},a,{headingColor:u,title:f.currentStep===_y.STEP_ONE?g("family-review.step1.heading","Identify Primary Person"):g("family-review.step3.heading","Family Relationships"),footer:(0,k.Y)(J.Ay,{alignX:"end"},(0,k.Y)(Z.A,{onClick:()=>{a.close()},"data-testid":"add-person-create-form-back-button",linkName:"Add Person Go Back"},g("navigation.back-button","Back")),(0,k.Y)(Z.A,{emphasis:"high",linkName:"Add Person Save","data-testid":"add-person-create-form-save-button",type:"submit",form:"create-new-person-two"},h?g("navigation.update-button","Update"):g("navigation.save-button","Save")))}),a.isOpen&&(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H2,{size:"H5"},h?g("family-review.addPerson.add-new-primary","Add New Primary Person"):g("family-review.addPerson.add-new","Add new Person")),(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)(_e.A,{heading:E,data:h?g("family-review.addPerson.select-sex-only","Select the sex of {newPersonName}.",{newPersonName:E}):g("family-review.addPerson.select-instructions","Select the sex of {newPersonName} and the relationship to {primaryPersonName}.",{newPersonName:E,primaryPersonName:l})}),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(pr.Ay,{methods:T,onSubmit:()=>{n(T.getValues(),f.addedSexId),h&&(p.open(),r.close(),t.close(),a.close(),w({type:"SET_CURRENT_STEP",value:My.STEP_TWO}))},id:"create-new-person-two"},(0,k.Y)(br,{fieldName:"sexField",key:f.addedSexId,addedSexCode:{id:f.addedSexId,displayLabel:g("edit-essential-info.sex-code","Sex")},onChange:()=>{T.setValue("relationshipField",{key:"",primaryText:""})}}),(0,k.Y)(mI,{handleHighlightButtonClicked:e=>{e&&w({type:"SET_ACTIVE_FIELD_ID",value:e}),m.setDisplayHighlights({mainPartitionKey:c.partitionKey,splitScreenPartitionKey:f.splitScreenPartitionKey,setMainZoom:!0,setSplitScreenZoom:Boolean(f.splitScreenPartitionKey),attachFilter:t=>t.fieldId===e,mainZoomFilter:t=>t.fieldId===e,splitScreenZoomFilter:t=>t.fieldId===e,isSmallScreen:v})},editHighlightsOverlay:d,id:f.addedSexId,isAdding:!0},g("add-person.highlight-button","Add Highlight")),h?"":(0,k.Y)(mr.eP,{"data-testid":"addPersonRelationshipField",name:"relationshipField",label:g("family-review.addPerson.relationship-to-person","Relationship To {primaryPersonName}",{primaryPersonName:l}),placeholder:g("family-review.addPerson.relationship-to-person","Relationship To {primaryPersonName}",{primaryPersonName:l}),suggestions:S,sortFunction:BT,highlightMatchingText:!0}))))}function fI(e){let{images:t,mainPartitionKey:a,splitScreenPartitionKey:r,primaryPersonId:n,currentRecordId:o}=e;const[s]=(0,P.B)(),l=(0,i.useMemo)((()=>{var e;if(!t||!a)return[];const i=(0,A.Qp)(t,a),l=(0,A.Qp)(t,r),d=e=>e.sort(((e,t)=>(null===e||void 0===e?void 0:e.primary)>(null===t||void 0===t?void 0:t.primary)?-1:1)).map((e=>{let t="",a=e.primary?0:1;e.recordId===o?(t=s("edit-relationships.autosuggest.record-group","IN THIS RECORD"),a=1):e.partitionKey===r?(t=s("edit-relationships.autosuggest.image-group.split-screen.simple","NAMES ON SPLIT SCREEN"),a=3):(t=s("edit-relationships.autosuggest.image-group.this","IN THIS IMAGE"),a=2);const i={key:e.id,primaryText:(0,Ee.hA)({person:e,justOneName:!0}),group:t,sortKey:a};return e.recordId===o&&e.partitionKey===r?i.secondaryText=s("family-review.edit-relationships.autosuggest.split-screen","(Split Screen)"):e.primary&&(i.secondaryText=s("edit-relationships.autosuggest.primary","(Principal)")),i})).filter((e=>(0,Ee.cP)(e.primaryText.trim())));let c=[...null!==i&&void 0!==i&&i.subElements?i.subElements.flatMap((e=>d((0,A.q5)(e,"PERSON").filter((e=>{let{id:t}=e;return t!==n}))))):[],...null!==i&&void 0!==i&&i.floatingElements?d((0,A.Wh)(i,"PERSON").filter((e=>{let{id:t}=e;return t!==n}))):[]];return l?(c=c.concat(null!==l&&void 0!==l&&l.subElements?null===(e=l.subElements)||void 0===e?void 0:e.flatMap((e=>d((0,A.q5)(e,"PERSON")))):[]).concat(null!==l&&void 0!==l&&l.floatingElements?d((0,A.Wh)(l,"PERSON")):[]),c.sort(((e,t)=>e.sortKey-t.sortKey))):c}),[t,a,r,n,s,o]);return l}function bI(e){let{addNewPersonOverlay:t,currentTask:a,stepOnePartTwoOverlay:r,stepTwoOverlay:n,setSaveUpdateCalled:o,editHighlightsOverlay:s,hasImagePermission:l,handleGoToNextRecordAndResetStep:d}=e;const c=(0,bi.Y)(),[u]=(0,P.B)(),h=(0,ci.Ay)()({default:!0,md:!1}),p=(0,L.u)("rip_sharedImageViewer_saveChanges"),m=(0,Ae.l)(),g=(0,b.A)(),v=Vy(),y=By(),f=(0,A.Qp)(g.images,g.currentImageArk),[w,T]=(0,i.useState)("BIRTH_NAME"),[I,S]=(0,i.useState)(""),[E,C]=(0,i.useState)(""),[x,Y]=(0,i.useState)(),[N,R]=(0,i.useState)(),[_,F]=(0,i.useState)(),[D,M]=(0,i.useState)([]),[H,z]=(0,i.useState)(""),[V,B]=(0,i.useState)(""),G=(0,ur.SV)({mode:"all",defaultValues:{selectedId:{key:"",primaryText:""}},resolver:e=>{const t={};G.clearErrors();const{selectedId:a}=e;return a&&a.key||(t.selectedId={type:"required",message:u("FormValidation.notEmpty","Field cannot be empty.")}),{values:e,errors:t}}}),U=(0,i.useCallback)((async()=>{const e=await(0,Se.XM)("person");z(e),y({type:"SET_SELECTED_PERSON_ID",value:e})}),[y]),K=(0,$.Ay)(),q=(0,$.Ay)(),X=(0,$.Ay)(),Q=xT(a),ee=(0,Ee.hA)({person:Q}),ie=fI({images:g.images,mainPartitionKey:a.partitionKey,splitScreenPartitionKey:v.splitScreenPartitionKey,primaryPersonId:null===Q||void 0===Q?void 0:Q.id,currentRecordId:null===a||void 0===a?void 0:a.id}),ne=(0,i.useCallback)((e=>[...c.getHighlights().mainEditHighlights,...c.getHighlights().splitScreenEditHighlights].find((t=>t.fieldId===e))),[c]),oe=()=>{if(v.currentStep===_y.STEP_ONE){var e,t;const i=(null===Q||void 0===Q?void 0:Q.id)||(null===a||void 0===a||null===(e=a.subElements)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.id);sI({h:c,mainPartitionKey:a.partitionKey,splitScreenPartitionKey:v.splitScreenPartitionKey,personIds:[i],isSmallScreen:h}),y({type:"SET_SELECTED_PERSON_ID",value:i})}else if(v.currentStep===_y.STEP_TWO){const e=v.stepTwo.relationshipCards.findIndex((e=>!e.hasBeenReviewed));y({type:"SET_SELECTED_PERSON_ID",value:v.stepTwo.relationshipCards[e].personId});const t=v.stepTwo.relationshipCards[e+1];t&&sI({h:c,mainPartitionKey:a.partitionKey,splitScreenPartitionKey:v.splitScreenPartitionKey,personIds:[t.personId],isSmallScreen:h})}},se=(0,$.Ay)();return(0,k.Y)(i.Fragment,null,(0,k.Y)(pr.Ay,{methods:G,onSubmit:async()=>{const e=G.getValues(),t=Object.values(Object.fromEntries(Object.entries(e).filter((e=>{let[,t]=e;return t}))))[0].key,i=a.subElements.filter((e=>"PERSON"===e.elementType&&e.primary)).map((e=>null===e||void 0===e?void 0:e.id));if(!i.includes(t)||!v.stepTwo.initialized){await XT({primaryPerson:(0,A.rr)(g.images,t),currentTask:a,partitionKey:a.partitionKey,zionSLSState:g,zionSlsDispatch:m,userId:v.userId,saveChangesFlag:p});const e=i.filter((e=>e!==t));await async function(e){let{notPrimaries:t,partitionKey:a,zionSLSState:i,zionSlsDispatch:r,userId:n,saveChangesFlag:o}=e;const s=t.flatMap((e=>[{type:"SET_PRIMARY",value:{partitionKey:a,id:e,primary:!1}}]));await $T({dispatches:s,userId:n,taskTypeParam:"Family Review",appName:qe.uO,saveChangesFlag:o,zionSLSState:i,zionSlsDispatch:r})}({notPrimaries:e,partitionKey:a.partitionKey,zionSLSState:g,zionSlsDispatch:m,userId:v.userId,saveChangesFlag:p}),o(!0)}G.reset({selectedId:{key:"",primaryText:""}}),r.close(),n.open(),y({type:"SET_CURRENT_STEP",value:My.STEP_TWO})},id:"step-one-part-two-form"},(0,k.Y)(hi.A,(0,j.A)({},r,{close:()=>{G.reset({selectedId:{key:"",primaryText:""}}),r.close(),t.close(),oe()},headingColor:"purple",title:u("family-review.step1.heading","Identify Primary Person"),footer:(0,k.Y)(J.Ay,{alignX:"end"},(0,k.Y)(Z.A,{onClick:()=>{G.reset({selectedId:{key:"",primaryText:""}}),r.close(),oe()},linkName:"Step One Part Two Cancel","data-testid":"step-one-part-two-cancel-button"},u("edit-index.cancel.button","Cancel")),(0,k.Y)(Z.A,{emphasis:"high",linkName:"Step One Part Two Save","data-testid":"step-one-part-two-save-button",form:"step-one-part-two-form",type:"submit"},u("edit-index.save.button","Save")))}),r.isOpen&&(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H2,{size:"H5"},(0,k.Y)(Mt.A,null,u("family-review.stepXof4","Step {step} of 4",{step:"1"})),(0,k.Y)(O.x,{i18nKey:"family-review.step1.part2.content"},"Who is this"," ",(0,k.Y)(Z.A,{onClick:se.handleClick,dense:!0,"data-testid":"record-tooltip-button",linkName:"Family Review Step One Part Two Record Tooltip Button"},(0,k.Y)("strong",null,(0,k.Y)("u",null,"record"))),(0,k.Y)("span",null,"\xa0primarily about?"),(0,k.Y)(te.A,{size:"sm"},"The primary person is who this record was created about."))),(0,k.Y)(ZT,{overlay:se}),(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)(mr.eP,{"data-testid":"select-primary-person-autosuggest",clearable:!0,clearOnClickAway:!0,label:u("family-review.step1.part2.select-primary-person","Select primary person"),suggestions:ie,name:"selectedId",control:G.control,placeholder:u("family-review.step1.part2.select-primary-person","Select primary person"),lastResort:{key:"LAST-RESORT-KEY",primaryText:u("family-review.addPerson.name-not-on-list","Name Not In This List"),onClick:()=>{K.handleClick(),U(),G.reset({selectedId:{key:"",primaryText:""}}),B("")}},inputText:V,onInputTextChange:B,onSuggestionSelected:e=>{if(!K.isOpen&&e){const t=(0,A.rr)([f],null===e||void 0===e?void 0:e.key);if(y({type:"SET_SELECTED_PERSON_ID",value:null===e||void 0===e?void 0:e.key}),(null===t||void 0===t?void 0:t.recordId)!==(null===Q||void 0===Q?void 0:Q.recordId)){const e=(0,Ie.FA)(t,[f]);(null===e||void 0===e?void 0:e.length)>0&&(F(t),M(e),X.open())}sI({h:c,mainPartitionKey:a.partitionKey,splitScreenPartitionKey:v.splitScreenPartitionKey,personIds:[null===e||void 0===e?void 0:e.key],isSmallScreen:h})}}}),(0,k.Y)(go,{overline:" ",primaryText:(0,k.Y)("span",{style:{color:W.A.blue60}},(0,k.Y)("strong",null,u("family-review.step1.help-with-this-step","Help with this step"))),listPrimaryText:(0,k.Y)(qT,{personId:null===a||void 0===a?void 0:a.personId,currentStep:"1-2",handleGoToNextRecordAndResetStep:d,hasImagePermission:l})}),_&&(0,k.Y)(nl,{overlay:X,person:_,existingRelationships:D,genericVersion:!0,onCancel:()=>{G.reset({selectedId:{key:"",primaryText:""}}),c.clearDisplay({all:!0})}})))),(0,k.Y)(vI,{createNewPersonFormPage1Overlay:K,currentTask:a,handleSubmit:(e,t,a)=>{T(e.nameType),S(e.givenField),C(e.surnameField),Y(t),R(a);const i=(0,$e.Vs)();y({type:"SET_STATE",value:{addedSexId:i}}),q.handleClick()},hasSelectedHighlights:ne,editHighlightsOverlay:s,headingColor:"purple",isPrimaryPerson:!0}),(0,k.Y)(yI,{editHighlightsOverlay:s,createNewPersonFormPage1Overlay:K,createNewPersonFormPage2Overlay:q,stepOnePartTwoOverlay:r,givenField:I,surnameField:E,primaryPersonName:ee,handleSubmit:async(e,i)=>{await pI({partitionKey:g.currentImageArk,addNewPersonData:{nameType:w,givenField:I,surnameField:E,sexField:e.sexField,relationshipField:e.relationshipField,givenNameFieldId:x,surnameFieldId:N,sexFieldId:i},personId:H,userId:v.userId,recordId:Q.recordId,setAsPrimary:!0,highlights:[...c.getHighlights().mainEditHighlights,...c.getHighlights().splitScreenEditHighlights],relatedPersonId:null===Q||void 0===Q?void 0:Q.id,zionSLSState:g,zionSlsDispatch:m,currentTask:a,saveChangesFlag:p}),o(!0),q.close(),K.close(),t.close(),oe()},headingColor:"purple",isPrimaryPerson:!0,stepTwoOverlay:n}))}var AI=a(43742);function wI(e){var t;let{personId:a,currentTask:r,editPersonOverlay:n,handleCorrectClick:o}=e;const s=(0,bi.Y)(),l=(0,b.A)(),d=By(),c=Vy(),[u]=(0,P.B)(),h=(0,ci.Ay)(),p=h({default:!0,md:!1}),m=c.stepTwo.relationshipCards.find((e=>e.personId===a)).hasBeenReviewed,g=c.selectedPersonId===a,[v,y]=(0,i.useState)(!1),f=(0,i.useCallback)((()=>{d({type:"SET_SELECTED_PERSON_ID",value:a}),sI({h:s,mainPartitionKey:r.partitionKey,splitScreenPartitionKey:c.splitScreenPartitionKey,personIds:[a],isSmallScreen:p}),n.open()}),[s,r,d,a,n,p,c.splitScreenPartitionKey]),w=r.subElements.find((e=>e.id===a)),T=(0,Ee.hA)({person:w,justOneName:!0}),I=null===(t=(0,A.q5)(w,"SEX_CODE"))||void 0===t?void 0:t[0],S=(0,A.J1)(I,u),E=GT(m,g,W.A.gray10,W.A.yellow10,W.A.green10),C=GT(m,g,W.A.white100,W.A.yellow02,W.A.white100);return(0,k.Y)(Ye.A,{edges:g||v?"elevation":"border","data-hasbeenreviewed":m,backgroundColor:C,onMouseDown:()=>{y(!0),sI({h:s,mainPartitionKey:r.partitionKey,splitScreenPartitionKey:c.splitScreenPartitionKey,personIds:[a],isSmallScreen:p})}},(0,k.Y)(J.Ay,null,(0,k.Y)(AI.A,{size:"md",background:E,noShrinkX:!0}),(0,k.Y)(_e.A,{growX:!0,heading:PT(w,l.types,r,u),data:(0,k.Y)(te.A,{size:"sm"},u("edit-essential-info.title","Name"),": ",T,(0,k.Y)("br",null),u("edit-essential-info.sex-code","Sex"),": ",S)}),h({default:(0,k.Y)(i.Fragment,null,!m&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ee.A,{size:"sm",emphasis:"high",disabled:!g,Icon:vn.A,"data-testid":"Correct Person Icon",description:u("family-review.step2.correct-button","Correct"),linkName:"Review Relationship Correct",onClick:()=>o(a)}),(0,k.Y)(ae.A,{size:"xs"})),(0,k.Y)(ee.A,{size:"sm",emphasis:"medium",disabled:!m&&!g,Icon:Ei.A,"data-testid":"Edit Person Icon",description:u("family-review.step2.edit-button","Edit"),linkName:"Review Relationship Edit",onClick:f})),sm:m&&(0,k.Y)(ee.A,{size:"sm",noShrinkX:!0,emphasis:"medium",Icon:Ei.A,"data-testid":"Edit Person Icon",description:u("family-review.step2.edit-button","Edit"),linkName:"Review Person Edit",onClick:f})})),!m&&h({default:(0,k.Y)(i.Fragment,null),sm:(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,null),(0,k.Y)(J.Ay,{alignX:"center",wrap:!0,guttersY:"xxs"},(0,k.Y)(Si.A,{noShrinkX:!0,onClick:f,color:g?"yellow":"blue",emphasis:g?"medium":"low",linkName:"Review Relationship Edit","data-testid":"Edit",Icon:Ei.A},u("family-review.step2.edit-button","Edit")),(0,k.Y)(Si.A,{noShrinkX:!0,onClick:()=>o(a),color:g?"yellow":"blue",emphasis:g?"lightHigh":"medium",linkName:"Review Relationship Correct","data-testid":"Correct",Icon:vn.A},u("family-review.step2.correct-button","Correct"))))}))}var TI=a(78438);const II=e=>{let{overlay:t,children:a}=e;return(0,k.Y)(Z.A,{title:"record",linkName:"Family Review Step Two Record Tooltip Button",onClick:t.handleClick,"data-testid":"record-tooltip-button",dense:!0},(0,k.Y)("strong",null,(0,k.Y)("u",null,a)))},SI=e=>{let{overlay:t,handleNewEntity:a,handleClick:i,isStepThree:r}=e;const[n]=(0,P.B)();return(0,k.Y)(Ye.A,{edges:"elevation",backgroundColor:W.A.yellow02},(0,k.Y)(J.Ay,null,(0,k.Y)(TI.A,{size:"md",background:W.A.yellow03,noShrinkX:!0}),(0,k.Y)(te.A,{size:"sm"},(0,k.Y)("strong",null,r?(0,k.Y)(O.x,{i18nKey:"family-review.step3.is-everything-accounted-for"},"Is everything in this ",(0,k.Y)(II,{overlay:t},"record")," accounted for?"):(0,k.Y)(O.x,{i18nKey:"family-review.step2.is-everyone-here"},"Is everyone in this ",(0,k.Y)(II,{overlay:t},"record")," accounted for?")))),(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)(Si.A,{title:r?"Yes":"Everyone is here",linkName:r?"Family Review Step Three Yes Button":"Family Review Step Two Everyone Is Here Button",Icon:vn.A,onClick:i,emphasis:"lightHigh",color:"yellow","data-testid":r?"yes-button":"everyone-is-here-button"},r?n("family-review.step3.yes","Yes"):n("family-review.step2.everyone-is-here","Everyone is here")),(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)(Si.A,{Icon:Ci.A,onClick:a,"data-testid":r?"add-event":"add-person",linkName:r?"Step Three Add Event":"Step Two Add Person",color:"yellow",emphasis:"low"},r?n("family-review.step3.add-new-event-button","Add new event"):n("family-review.step2.add-new-person-button","Add new person")))};function EI(e){var t,a,r,n;let{currentTask:o,handleNewPerson:s,handleGoToNextRecordAndResetStep:l,editPersonOverlay:d,stepTwoOverlay:c,stepThreeOverlay:u,hasImagePermission:h,setCardState:p,updateStepThreeData:m}=e;const g=(0,bi.Y)(),v=Vy(),y=By(),{t:f}=(0,P.B)(),b=(0,ci.Ay)()({default:!0,md:!1}),A=(0,$.Ay)(),w=(0,i.useCallback)((()=>{const e=((e,t)=>{var a;const i={},r=xT(t),n=null===r||void 0===r?void 0:r.id;e.forEach((e=>{const t=null===e||void 0===e?void 0:e.personId;i[t]||(i[t]={primaryEvents:null,nonPrimaryEvents:[]}),e.primary?t===n&&(i[t].primaryEvents=e):i[t].nonPrimaryEvents.push(e)})),Object.keys(i).forEach((e=>{i[e].nonPrimaryEvents.sort(((e,t)=>e.label.localeCompare(t.label)))}));const o=[];return n&&null!==(a=i[n])&&void 0!==a&&a.primaryEvents&&o.push(i[n].primaryEvents),n&&i[n]&&(o.push(...i[n].nonPrimaryEvents),delete i[n]),Object.keys(i).forEach((e=>{o.push(...i[e].nonPrimaryEvents)})),o})(DT(o),o);p({elements:e,stepStateCards:v.stepThree.eventCards,key:"eventId",updateStepData:m})}),[o,p,v.stepThree.eventCards,m]),T=()=>{w(),u.open(),y({type:"SET_CURRENT_STEP",value:My.STEP_THREE})},I=e=>{y({type:"MARK_RELATIONSHIP_CARD_CORRECT",value:e}),setTimeout((()=>{const t=v.stepTwo.relationshipCards.map((t=>t.personId===e?{...t,hasBeenReviewed:!0}:t));t.every((e=>e.hasBeenReviewed))?(e=>{(0,tI.d)(e,["h","mainPartitionKey","splitScreenPartitionKey","personIds","isSmallScreen"]);const{h:t,mainPartitionKey:a,splitScreenPartitionKey:i,personIds:r,isSmallScreen:n}=e,o=[...t.getHighlights().mainEditHighlights,...t.getHighlights().splitScreenEditHighlights],s=Un()(r.flatMap((e=>o.filter((t=>t.personIds.includes(e))).filter((e=>aI.includes(e.fieldType))).map((e=>({...e,attached:!0}))))),(e=>e.id));t.setDisplayHighlights({mainPartitionKey:a,splitScreenPartitionKey:i,highlights:s,isSmallScreen:n,attachFilter:()=>!0})})({h:g,mainPartitionKey:o.partitionKey,splitScreenPartitionKey:v.splitScreenPartitionKey,personIds:t.map((e=>e.personId)),isSmallScreen:b}):(()=>{const e=v.stepTwo.relationshipCards.findIndex((e=>e.personId===v.selectedPersonId)),t=v.stepTwo.relationshipCards[e+1];t&&sI({h:g,mainPartitionKey:o.partitionKey,splitScreenPartitionKey:v.splitScreenPartitionKey,personIds:[t.personId],isSmallScreen:b})})()}),0)},S=()=>{var e;c.close(),v.currentStep===My.STEP_TWO&&y({type:"SET_CURRENT_STEP",value:My.STEP_ONE}),sI({h:g,mainPartitionKey:o.partitionKey,splitScreenPartitionKey:v.splitScreenPartitionKey,personIds:[null===(e=xT(o))||void 0===e?void 0:e.id],isSmallScreen:b})};return(0,k.Y)(i.Fragment,null,(0,k.Y)(hi.A,(0,j.A)({},c,{close:()=>{S()},headingColor:"purple",title:f("family-review.step3.heading","Family Relationships"),footer:(0,k.Y)(i.Fragment,null,!(null!==(t=v.stepTwo)&&void 0!==t&&t.allReviewsComplete)&&(0,k.Y)(i.Fragment,null,(0,k.Y)(te.A,{size:"sm",secondary:!0},f("family-review.step2.must-review-everyone-message","You cannot move on until each person has been reviewed.")),(0,k.Y)(ae.A,{size:"sm"})),(0,k.Y)(J.Ay,{alignX:"end"},(0,k.Y)(Z.A,{onClick:()=>{S()},"data-testid":"step-two-back-button",linkName:"Step Two Go Back"},f("navigation.back-button","Back")),(0,k.Y)(Z.A,{disabled:!(null!==(a=v.stepTwo)&&void 0!==a&&a.allReviewsComplete),emphasis:"high",onClick:T,linkName:"Step Two Next","data-testid":"step-two-next-button"},f("navigation.next-button","Next"))))}),c.isOpen&&(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H5,null,(0,k.Y)(Mt.A,null,f("family-review.stepXof4","Step {step} of 4",{step:"2"})),(0,k.Y)(O.x,{i18nKey:"family-review.step2.main-instruction"},"Review each person on this"," ",(0,k.Y)(II,{overlay:A},"record")," and their relationship to ",{person:YT(o)},"."),(0,k.Y)(ne.A,null,f("family-review.step2.subheading","Click the Edit button to correct any highlight or spelling mistakes."))),(0,k.Y)(ZT,{overlay:A}),(0,k.Y)(go,{overline:" ",primaryText:(0,k.Y)("span",{style:{color:W.A.blue60}},(0,k.Y)("strong",null,f("family-review.step2.help-with-this-step","Help with this step"))),listPrimaryText:(0,k.Y)(qT,{personId:null===o||void 0===o?void 0:o.personId,currentStep:v.currentStep,handleGoToNextRecordAndResetStep:l,hasImagePermission:h})}),(0,k.Y)(ae.A,{size:"sm"}),v.stepTwo.relationshipCards.map(((e,t,a)=>(0,k.Y)("div",{key:e.personId},(0,k.Y)(wI,{personId:e.personId,currentTask:o,editPersonOverlay:d,handleCorrectClick:I}),t<a.length-1&&(0,k.Y)(ae.A,{size:"xs"})))),(0,k.Y)(ae.A,{size:"sm"}),!(null!==(r=v.stepTwo)&&void 0!==r&&r.allReviewsComplete)&&(0,k.Y)(Z.A,{Icon:Ci.A,onClick:s,"data-testid":"add-person",linkName:"Step Two Add Person"},f("family-review.step2.add-new-person-button","Add new person")),(null===(n=v.stepTwo)||void 0===n?void 0:n.allReviewsComplete)&&(0,k.Y)(SI,{overlay:A,handleNewEntity:s,handleClick:T,isStepThree:!1}))))}var kI=a(37151),CI=a(67884),xI=a(47736),YI=a(95402),NI=a(26817),RI=a(16633),PI=a(37844),OI=a(34993),_I=a(378),FI=a(84372),DI=a(94900),MI=a(17004),HI=a(85856),LI=a(65239),zI=a(79318),VI=a(5739),BI=a(19257);const GI={BIRTH:kI.A,DEATH:CI.A,MARRIAGE:xI.A,HOME:YI.A,BARMITZVAH:NI.A,BURIAL:RI.A,CENSUS:ac.A,CHRISTENING:PI.A,COURT:OI.A,CREMATION:_I.A,DIVORCE:FI.A,HISTORICAL:DI.A,IMMIGRATION:MI.A,MILITARY_SERVICE:HI.A,NATURALIZATION:LI.A,NOBILITY:zI.A,OCCUPATION:VI.A,RESIDENCE:YI.A};function UI(e){var t,a,r,n,o;let{event:s,currentTask:l,editEventOverlay:d,reviewPersonEventsOverlay:c,handleCorrectClick:u}=e;const h=(0,bi.Y)(),p=By(),m=Vy(),g=(0,b.A)(),[v]=(0,P.B)(),y=(0,ci.Ay)(),f=null===(t=m.stepThree.eventCards)||void 0===t||null===(a=t.find((e=>e.eventId===s.id)))||void 0===a?void 0:a.hasBeenReviewed,w=m.selectedEventId===s.id,[T,I]=(0,i.useState)(!1),S=(0,i.useCallback)((()=>{p({type:"SET_SELECTED_EVENT_ID",value:s.id}),d.open(),c.close(),lI({h:h,currentTask:l,highlights:[...h.getHighlights().mainEditHighlights,...h.getHighlights().splitScreenEditHighlights],eventIds:[s.id],splitScreenPartitionKey:m.splitScreenPartitionKey})}),[h,p,s.id,d,c,l,m]),E=(null===s||void 0===s?void 0:s.personId)||(null===s||void 0===s||null===(r=s.superElements.find((e=>e.id.includes("1:1"))))||void 0===r?void 0:r.id),C=(0,A.cd)(null===l||void 0===l?void 0:l.subElements,E),x=[{displayLabel:v("edit-essential-info.title","Name"),value:C&&(0,Ee.hA)({person:C,justOneName:!0}),id:E}],Y=null===s||void 0===s||null===(n=s.superElements)||void 0===n||null===(o=n.filter((e=>{let{id:t}=e;return Boolean((0,A.cd)([l],t))})))||void 0===o?void 0:o.length,N=OT(s),R=_T(s),O=GT(f,w,W.A.gray10,W.A.yellow10,W.A.green10),_=GT(f,w,W.A.white100,W.A.yellow02,W.A.white100),F=GI[s.eventType]||BI.A;return(0,k.Y)(Ye.A,{edges:w||T?"elevation":"border","data-hasbeenreviewed":f,backgroundColor:_,onMouseDown:()=>{I(!0),lI({h:h,currentTask:l,highlights:[...h.getHighlights().mainEditHighlights,...h.getHighlights().splitScreenEditHighlights],eventIds:[s.id],splitScreenPartitionKey:m.splitScreenPartitionKey})}},(0,k.Y)(J.Ay,null,(0,k.Y)(F,{size:y({default:"sm",md:"md"}),background:O,noShrinkX:!0}),(0,k.Y)("div",{growX:!0},(0,k.Y)(re.H6,{size:"H5"},(0,Ni.hW)(s,g.types)||v("view-index.event.title","Event")),(0,k.Y)(te.A,{size:"sm"},(0,k.Y)(km,{heading:x.displayLabel,values:x}),(0,k.Y)(KI,{superElementsLength:Y,t:v}),N&&N.length>0&&(0,k.Y)(km,{heading:v("edit-events.fields.place-heading","Place"),values:N}),R&&R.length>0&&(0,k.Y)(km,{heading:v("edit-events.fields.date-heading","Date"),values:R}))),y({default:(0,k.Y)(i.Fragment,null,!f&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ee.A,{size:"sm",emphasis:"high",disabled:!w,Icon:vn.A,"data-testid":"Correct Event Icon",description:v("family-review.step2.correct-button","Correct"),linkName:"Review Event Correct",onClick:()=>u(s.id)}),(0,k.Y)(ae.A,{size:"xs"})),(0,k.Y)(ee.A,{size:"sm",emphasis:"medium",Icon:Ei.A,"data-testid":"Edit Event Icon",description:v("family-review.step2.edit-button","Edit"),linkName:"Review Event Edit",onClick:S})),sm:f&&(0,k.Y)(ee.A,{size:"sm",emphasis:"medium",Icon:Ei.A,"data-testid":"Edit Event Icon",description:v("family-review.step2.edit-button","Edit"),linkName:"Review Event Edit",onClick:S,noShrinkX:!0})})),!f&&y({default:(0,k.Y)(i.Fragment,null),sm:(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,null),(0,k.Y)(J.Ay,{alignX:"center",wrap:!0,guttersY:"xxs"},(0,k.Y)(Si.A,{noShrinkX:!0,onClick:S,color:w?"yellow":"blue",emphasis:w?"medium":"low",linkName:"Review Event Edit","data-testid":"Edit",Icon:Ei.A},v("family-review.step2.edit-button","Edit")),(0,k.Y)(Si.A,{noShrinkX:!0,onClick:()=>u(s.id),color:w?"yellow":"blue",emphasis:w?"high":"medium",linkName:"Review Event Correct","data-testid":"Correct Event",Icon:vn.A},v("family-review.step2.correct-button","Correct"))))}))}function KI(e){let{superElementsLength:t,t:a}=e;return(0,k.Y)(i.Fragment,null,t>1&&(0,k.Y)("span",{key:"some things about other people"},t>2?a("edit-events.fields.other-names-plural","+ {total} Other Names",{total:t-1}):a("edit-events.fields.other-name-singular","+ 1 Other Name"),(0,k.Y)("br",null)))}function qI(e){var t,a;let{addFloatingEventOverlay:r,addNewEventOverlay:n,currentTask:o,stepFourOverlay:s,editEventOverlay:l,stepThreeOverlay:d,reviewPersonEventsOverlay:c,handleGoToNextRecord:u,hasImagePermission:h}=e;const p=(0,bi.Y)(),[m]=(0,P.B)(),g=(0,ci.Ay)()({default:!0,md:!1}),v=Vy(),y=(0,b.A)(),f=By(),w=(0,$.Ay)(),T=()=>{s.open(),f({type:"SET_CURRENT_STEP",value:My.STEP_FOUR});const e=o.subElements.filter((e=>"PERSON"===e.elementType)).flatMap((e=>null===e||void 0===e?void 0:e.id));dI({h:p,currentTask:o,highlights:[...p.getHighlights().mainEditHighlights,...p.getHighlights().splitScreenEditHighlights],personIds:e,isSmallScreen:g,splitScreenPartitionKey:v.splitScreenPartitionKey})},I=e=>{f({type:"MARK_EVENT_CARD_CORRECT",value:e});v.stepThree.eventCards.map((t=>t.eventId===e?{...t,hasBeenReviewed:!0}:t)).every((e=>e.hasBeenReviewed))?dI({h:p,currentTask:o,highlights:[...p.getHighlights().mainEditHighlights,...p.getHighlights().splitScreenEditHighlights],personIds:o.subElements.filter((e=>"PERSON"===e.elementType)).map((e=>null===e||void 0===e?void 0:e.id)),isSmallScreen:g,splitScreenPartitionKey:v.splitScreenPartitionKey}):(()=>{const e=v.stepThree.eventCards.findIndex((e=>e.eventId===v.selectedEventId)),t=v.stepThree.eventCards[e+1];t&&lI({h:p,currentTask:o,highlights:[...p.getHighlights().mainEditHighlights,...p.getHighlights().splitScreenEditHighlights],eventIds:[t.eventId],isSmallScreen:g,splitScreenPartitionKey:v.splitScreenPartitionKey})})()},S=()=>{f({type:"SET_ADD_NEW_EVENT_IDS"});0!==(0,A.Wh)(y.images[0],"EVENT").length?r.open():n.open(),p.clearDisplay({all:!0})},E=()=>{d.close(),f({type:"SET_CURRENT_STEP",value:My.STEP_TWO}),sI({h:p,mainPartitionKey:o.partitionKey,splitScreenPartitionKey:v.splitScreenPartitionKey,personIds:[v.stepTwo.relationshipCards[v.stepTwo.relationshipCards.length-1].personId],isSmallScreen:g})},C=YT(o),x=v.stepThree.eventCards.filter((e=>(0,A.cd)(null===o||void 0===o?void 0:o.subElements,e.eventId))),Y=x.find((e=>{const t=(0,A.cd)(null===o||void 0===o?void 0:o.subElements,e.eventId);return!0===(null===t||void 0===t?void 0:t.primary)})),N=(e=>{const t={};return e.forEach((e=>{const a=(0,A.cd)(null===o||void 0===o?void 0:o.subElements,e.eventId);if(a){const e=a.personId;t[e]||(t[e]=[]),t[e].push(a)}else console.warn(`Event with ID ${e.eventId} not found in currentTask subElements`)})),t})(x.filter((e=>e.eventId!==(null===Y||void 0===Y?void 0:Y.eventId))));return(0,k.Y)(hi.A,(0,j.A)({},d,{close:()=>{E()},headingColor:"purple",title:m("family-review.step4.heading","Life Events"),footer:(0,k.Y)(i.Fragment,null,!(null!==(t=v.stepThree)&&void 0!==t&&t.allReviewsComplete)&&(0,k.Y)(i.Fragment,null,(0,k.Y)(te.A,{size:"sm",secondary:!0},m("family-review.step3.must-review-all-events-message","You cannot move on until each event has been reviewed.")),(0,k.Y)(ae.A,{size:"sm"})),(0,k.Y)(J.Ay,{alignX:"end"},(0,k.Y)(Z.A,{onClick:()=>{E()},"data-testid":"step-three-back-button",linkName:"Step Three Go Back"},m("navigation.back-button","Back")),(0,k.Y)(Z.A,{disabled:!(null!==(a=v.stepThree)&&void 0!==a&&a.allReviewsComplete),emphasis:"high",onClick:T,linkName:"Step Three Next","data-testid":"step-three-next-button"},m("navigation.next-button","Next"))))}),d.isOpen&&(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H2,{size:"H5"},(0,k.Y)(Mt.A,null,m("family-review.stepXof4","Step {step} of 4",{step:"3"})),m("family-review.step3.subheading-short","Are these events correct for each person?")),(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(ZT,{overlay:w}),(0,k.Y)(go,{overline:" ",primaryText:(0,k.Y)("span",{style:{color:W.A.blue60}},(0,k.Y)("strong",null,m("family-review.step1.help-with-this-step","Help with this step"))),listPrimaryText:(0,k.Y)(qT,{personId:null===o||void 0===o?void 0:o.personId,currentStep:v.currentStep,handleGoToNextRecordAndResetStep:()=>{f({type:"SET_CURRENT_STEP",value:My.STEP_ONE}),d.close(),u()},hasImagePermission:h})}),(0,k.Y)(ae.A,{size:"xxs"}),Y&&(0,k.Y)(i.Fragment,null,(0,k.Y)(_e.A,{heading:C,data:(0,A.cd)(null===o||void 0===o?void 0:o.subElements,Y.eventId).data}),(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(te.A,{size:"sm"},"Event linked with ",v.stepThree.eventCards.length-1," others"),(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(UI,{event:(0,A.cd)(null===o||void 0===o?void 0:o.subElements,Y.eventId),currentTask:o,editEventOverlay:l,handleCorrectClick:I,reviewPersonEventsOverlay:c})),Object.keys(N).length>0&&(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(te.A,{size:"md"},m("family-review.step3.inferred-text","Inferred events from the record")),Object.keys(N).map((e=>{const t=o.subElements.find((t=>(null===t||void 0===t?void 0:t.id)===e)),a=(0,Ee.hA)({person:t,justOneName:!0}),i=(e=>{var t;const a=null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t.find((e=>"SEX_CODE"===e.fieldType)),i=a?(0,A.Ut)(a):"unknown";return"male"===i?W.A.blue10:"female"===i?W.A.red10:W.A.gray10})(t);return(0,k.Y)("div",{key:e},(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(J.Ay,{alignItemsY:"middle",guttersX:"nano"},(0,k.Y)(La.A,{background:i}),(0,k.Y)(te.A,{size:"sm"},(0,k.Y)("strong",null,a))),(0,k.Y)(ae.A,{size:"xs"}),N[e].map(((t,a)=>(0,k.Y)("div",{key:`${null===t||void 0===t?void 0:t.id}-card`},(0,k.Y)(UI,{event:t,currentTask:o,editEventOverlay:l,handleCorrectClick:I,reviewPersonEventsOverlay:c}),a<N[e].length-1&&(0,k.Y)(ae.A,{size:"xs"})))))}))),(0,k.Y)(ae.A,{size:"sm"}),!v.stepThree.allReviewsComplete&&(0,k.Y)(Z.A,{Icon:Ci.A,onClick:S,"data-testid":"add-event",linkName:"Step Three Add Event"},m("edit-index.add-event.button","Add Event")),(0,k.Y)(ae.A,{size:"sm"}),v.stepThree.allReviewsComplete&&(0,k.Y)(SI,{overlay:w,handleNewEntity:S,handleClick:T,isStepThree:!0})))}function jI(e){let{values:t}=e;const[a]=(0,P.B)(),[r,n]=(0,i.useState)();return(0,k.Y)(i.Fragment,null,(0,k.Y)("span",null,t[0].displayLabel,": ",t[0].value),!r&&t.length>1&&(0,k.Y)("br",null),!r&&t.length>1&&(0,k.Y)(Z.A,{linkName:"See More","data-testid":"see-more-button",onClick:()=>{n(!0)}},a("family-review.field.display.toggleInfo.more","See More")),r&&t.map(((e,t)=>{let{displayLabel:a,value:r,id:n}=e;return r&&a&&"<Unknown Type>"!==a&&(0,k.Y)("span",{key:n},0!==t&&(0,k.Y)(i.Fragment,null,a,": ",r),(0,k.Y)("br",null))})),r&&t.length>1&&(0,k.Y)(Z.A,{linkName:"See Less","data-testid":"see-less-button",onClick:()=>{n(!1)}},a("family-review.field.display.toggleInfo.less","See Less")))}function $I(e){let{event:t}=e;const[a]=(0,P.B)(),r=(0,b.A)(),n=OT(t),o=_T(t);return n&&o?(0,k.Y)(te.A,{size:"sm"},(0,k.Y)("strong",null,(0,Ni.hW)(t,r.types)),(0,k.Y)("br",null),o&&o.length>0&&(0,k.Y)(i.Fragment,null,(0,k.Y)(jI,{heading:a("edit-events.fields.date-heading","Date"),values:o,hideLong:!0}),(0,k.Y)("br",null)),n&&n.length>0&&(0,k.Y)(jI,{heading:a("edit-events.fields.place-heading","Place"),values:n,hideLong:!0})):(0,k.Y)(i.Fragment,null)}function WI(e){var t,a,r;let{person:n,currentTask:o,editPersonOverlay:s}=e;const l=(0,bi.Y)(),d=(0,b.A)(),c=Vy(),u=By(),[h]=(0,P.B)(),p=(0,ci.Ay)()({default:!0,md:!1}),m=(0,i.useCallback)((()=>{u({type:"SET_SELECTED_PERSON_ID",value:n.id}),s.open(),sI({h:l,mainPartitionKey:o.partitionKey,splitScreenPartitionKey:c.splitScreenPartitionKey,personIds:[n.id],isSmallScreen:p})}),[l,o,u,s,n.id,p,c.splitScreenPartitionKey]),g=(0,Ee.hA)({person:n,justOneName:!0}),v=null===(t=(0,A.q5)(n,"SEX_CODE"))||void 0===t?void 0:t[0],y=(0,A.Ut)(v),f=null===n||void 0===n||null===(a=n.subElements)||void 0===a?void 0:a.filter((e=>"EVENT"===e.elementType)),w=null===(r=PT(n,null===d||void 0===d?void 0:d.types,o,h))||void 0===r?void 0:r.toUpperCase();return(0,k.Y)(Ye.A,{edges:"border",backgroundColor:(T=y,T===A.K6?W.A.blue02:T===A.Vk?W.A.red02:W.A.gray02)},(0,k.Y)(J.Ay,null,(0,k.Y)(La.A,{size:"sm",background:y===A.K6?W.A.blue10:y===A.Vk?W.A.red10:W.A.gray10}),(0,k.Y)(_e.A,{growX:!0,heading:(0,k.Y)(i.Fragment,null,(0,k.Y)(te.A,{size:"xs"},w),g),data:(0,k.Y)(i.Fragment,null,f&&f.map((e=>(0,k.Y)("span",{key:e.id},(0,k.Y)(ae.A,{size:"xs"}),e&&(0,k.Y)($I,{event:e})))))}),(0,k.Y)(ee.A,{size:"sm",emphasis:"medium",Icon:Ei.A,"data-testid":"Edit Person Icon",description:h("family-review.step2.edit-button","Edit"),linkName:"Review Person Edit",onClick:m})));var T}function XI(e){let{currentTask:t,handleOpenFinishedOverlay:a,editPersonOverlay:r,stepFourOverlay:n}=e;const o=(0,bi.Y)(),[s]=(0,P.B)(),l=(0,ci.Ay)()({default:!0,md:!1}),d=(0,L.u)("rip_sharedImageViewer_saveChanges"),c=Vy(),u=By(),h=(0,b.A)(),p=(0,Ae.l)(),m=FT(t),[g,v]=(0,i.useState)(),y=()=>{n.close(),u({type:"SET_CURRENT_STEP",value:My.STEP_THREE}),lI({h:o,currentTask:t,highlights:[...o.getHighlights().mainEditHighlights,...o.getHighlights().splitScreenEditHighlights],eventIds:[c.stepThree.eventCards[c.stepThree.eventCards.length-1].eventId],isSmallScreen:l,splitScreenPartitionKey:c.splitScreenPartitionKey})};return(0,k.Y)(i.Fragment,null,(0,k.Y)(hi.A,(0,j.A)({},n,{close:()=>{y()},headingColor:"purple",title:s("family-review.step5.heading","Final Review"),footer:(0,k.Y)(J.Ay,{alignX:"end"},(0,k.Y)(Z.A,{onClick:()=>{y()},"data-testid":"step-four-back-button",linkName:"Step Four Go Back"},s("navigation.back-button","Back")),(0,k.Y)(Z.A,{emphasis:"high",onClick:async()=>{try{mA({partitionKey:null===t||void 0===t?void 0:t.partitionKey,taskType:"Family Review",action:c.statsTrackingUserAction}),u({type:"SET_STATS_TRACKING_USER_ACTION",value:Fy.statsTrackingUserAction}),await async function(e){let{currentTask:t,userId:a,zionSLSState:i,zionSlsDispatch:r,saveChangesFlag:n}=e;const o=t.id,s=[{type:"SET_REVIEW_ATTRIBUTION",value:{partitionKey:t.partitionKey,id:o,elementType:"RECORD",sequenceNumber:1,attributionArg:{}}}];await $T({dispatches:s,updateState:!1,userId:a,taskTypeParam:"Family Review",appName:qe.uO,saveChangesFlag:n,zionSLSState:i,zionSlsDispatch:r})}({currentTask:t,userId:c.userId,zionSLSState:h,zionSlsDispatch:p,saveChangesFlag:d}),a()}catch(e){console.error(e),v(e)}},"data-testid":"step-four-done-button",linkName:"Step Four Done"},s("navigation.submit-button","Submit")))}),n.isOpen&&(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H2,{size:"H5"},(0,k.Y)(Mt.A,null,s("family-review.stepXof4","Step {step} of 4",{step:"4"})),s("family-review.step5.subheading","Is this review ready to submit?")),(0,k.Y)(te.A,{size:"sm"},s("family-review.step5.content","If you need to make an edit, select the pencil icon.")),(0,k.Y)(ae.A,{size:"sm"}),m.map(((e,a,i)=>(0,k.Y)("div",{key:null===e||void 0===e?void 0:e.id},(0,k.Y)(WI,{person:e,editPersonOverlay:r,currentTask:t}),a<i.length-1&&(0,k.Y)(ae.A,{size:"xs"})))))),(0,k.Y)(it,{error:g,setError:v,title:s("save-error-overlay.heading","Unable to Save Changes"),message:s("save-error-overlay.content-generic","Your changes were not saved.  Please try again later.")}))}function QI(e){let{finishedOverlay:t,currentTask:a,goBackToGive:r,handleContinue:n,placeCode:s,hasImagePermission:l}=e;const[d]=(0,P.B)(),c=(0,i.useRef)(),[u,h]=(0,i.useState)(""),p=xT(a),m=(0,Ee.Ls)(p);return(0,i.useEffect)((()=>{s&&async function(){const{displayName:e}=await oa(s,o.i18n.language);h(e.name)}()}),[s]),(0,k.Y)(Ze.A,(0,j.A)({},t,{focusRef:c}),(0,k.Y)(Dt.A,{src:qA,alt:d("completion-dialog.thank-you","Thank you!")}),(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(re.H1,{size:"H5"},m&&u&&d("family-review.finishedOverlay.content","You just helped the {surname} Family from {placeName}!",{surname:m,placeName:u}),!m&&u&&d("family-review.finishedOverlay.contentA","You just helped a family from {placeName}!",{placeName:u}),m&&!u&&d("family-review.finishedOverlay.contentB","You just helped the {surname} Family!",{surname:m}),!m&&!u&&d("family-review.finishedOverlay.contentC","You just helped a family!")),(0,k.Y)(ae.A,{size:"xxs"}),(null===p||void 0===p?void 0:p.id)&&l&&(0,k.Y)(go,{primaryText:(0,k.Y)(te.A,{size:"sm"},d("family-review.finished-overlay.question.heading","Do you want to explore this record in more detail?")),listPrimaryText:(0,k.Y)(i.Fragment,null,(0,k.Y)(Z.A,{emphasis:"low",Icon:Ha.A,title:d("navigation.finalPage.details-button","GO TO RECORD DETAILS"),onClick:()=>KT(null===p||void 0===p?void 0:p.id),"data-testid":"record-details",linkName:"Finished Overlay Record Details"},d("navigation.finalPage.details-button","GO TO RECORD DETAILS")))}),(0,k.Y)(et.Ay,null,(0,k.Y)(te.A,{size:"sm"},(0,k.Y)("strong",null,d("family-review.finishedOverlay.content2","Do you want to continue with Family Review?"))),(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{linkName:"Finished Overlay Back to Give",onClick:r,"data-testid":"Maybe Later"},d("finished-overlay.later-btn","Maybe later")),(0,k.Y)(Z.A,{ref:c,linkName:"Finished Overlay Continue",onClick:n,emphasis:"high","data-testid":"continue-button"},d("finished-overlay.continue-btn","Continue")))))}function JI(e){let{content:t,headerText:a}=e;return(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)(Ne.A,null,(0,k.Y)(Re.A,null,(0,k.Y)(re.H3,{size:"H5",supplementary:!0},a)),(0,k.Y)(Pe.A,null,t)))}function ZI(e){let{welcomeOverlay:t}=e;const[a]=(0,P.B)(),{accessFromPrison:r,isReady:n}=(0,LA.A)();(0,i.useEffect)((()=>{const e=new fi.Ay({storeName:"RIP_settings"});e.getItem("shownFRWelcome").then((a=>{a||(t.handleClick(),e.setItem("shownFRWelcome",!0))}))}),[]);const o=[{key:"step1",headerText:a("family-review.welcome-overlay.step1","Step 1: Find the Primary Person"),content:(0,k.Y)(te.A,{size:"sm"},a("family-review.welcome-overlay.step1-content","Identify the primary person in the record. This is the individual (or individuals, depending on the record type) at the center of the event\u2014the person who was born, for example, or the couple who was married."))},{key:"step2",headerText:a("family-review.welcome-overlay.step2","Step 2: Review the Name, Sex, and Relationship"),content:(0,k.Y)(i.Fragment,null,(0,k.Y)(te.A,{size:"sm"},a("family-review.welcome-overlay.step2-content","Verify that the primary person's name, sex, and relationships have been correctly documented in the transcription. If you see a mistake, you can fix it.")),(0,k.Y)(te.A,{size:"sm"},a("family-review.welcome-overlay.step2-content2","Verify that the names of the other people mentioned in the record have also been transcribed correctly.")),(0,k.Y)("ul",null,(0,k.Y)("li",null,a("family-review.welcome-overlay.step2-item","Choose the relationship that connects them to the primary person.")),(0,k.Y)("li",null,(0,k.Y)(O.x,{i18nKey:"family-review.welcome-overlay.step2-item2"},"If you cannot see the correct relationship type, select ",(0,k.Y)("strong",null,"Other"),"."))))},{key:"step3",headerText:a("family-review.welcome-overlay.step3","Step 3: Verify Events"),content:(0,k.Y)(i.Fragment,null,(0,k.Y)(te.A,{size:"sm"},a("family-review.welcome-overlay.step3-content","Identify the primary event being documented, and verify that the place and date have been transcribed correctly.")),(0,k.Y)("ul",null,(0,k.Y)("li",null,a("family-review.welcome-overlay.step3-item","The primary event is the reason the record was created.")),(0,k.Y)("li",null,a("family-review.welcome-overlay.step3-item2","In a birth certificate, for example, the primary event is the birth."))),a("family-review.welcome-overlay.step3-content2","Historical records often contain information about other life events, and depending on the type of record, you may be asked to verify these as well. These are called inferred events. An example of an inferred event might be a birth date listed on a marriage certificate."))},{key:"step4",headerText:a("family-review.welcome-overlay.step4","Step 4: Review and Submit"),content:(0,k.Y)(te.A,{size:"sm"},(0,k.Y)(O.x,{i18nKey:"family-review.welcome-overlay.step4-content"},"Before clicking ",(0,k.Y)("strong",null,"Submit"),", take a moment to review your work. Double-check your corrections and look for any errors you may have missed. This is one final opportunity to ensure the accuracy of the transcription."))}],s=[{key:"question1",headerText:a("family-review.welcome-overlay.faq-question1","Why does FamilySearch use artificial intelligence to transcribe records?"),content:(0,k.Y)(te.A,{size:"sm"},a("family-review.welcome-overlay.faq-answer1","It would take human volunteers many years to transcribe the historical records FamilySearch currently has access to. We are using artificial intelligence to accelerate this process and make more records available to more people."))},{key:"question2",headerText:a("family-review.welcome-overlay.faq-question2","How does Family Review help?"),content:(0,k.Y)(i.Fragment,null,(0,k.Y)(te.A,{size:"sm"},a("family-review.welcome-overlay.faq-answer2","Artificial intelligence can transcribe much faster than a human, but it still makes mistakes and needs a human to review the information before it becomes searchable. This is what you do in Family Review.")),(0,k.Y)(te.A,{size:"sm"},a("family-review.welcome-overlay.faq-answer2-p2","The activity is called Family Review because you are paying close attention to all of the family members mentioned in the record and trying to document their relationships.")))},{key:"question3",headerText:a("family-review.welcome-overlay.faq-question3","Does Family Review attach the historical records to the FamilySearch Family Tree?"),content:(0,k.Y)(te.A,{size:"sm"},a("family-review.welcome-overlay.faq-answer3","No, it just makes the name on the record easier to find. But the person who searches for and finds the record could then add the name to Family Tree."))},{key:"question4",headerText:a("family-review.welcome-overlay.faq-question4","What's the white line on images?"),content:(0,k.Y)(te.A,{size:"sm"},a("family-review.welcome-overlay.faq-answer4","Some images contain more than one historical record. The white lines show the portion of the image that the artificial intelligence identified and transcribed as a single record."))},{key:"question5",headerText:a("family-review.welcome-overlay.faq-question5","Where does all of the information for this activity come from?"),content:(0,k.Y)(te.A,{size:"sm"},a("family-review.welcome-overlay.faq-answer5","The information that you review for this activity comes from historical records that were transcribed by artificial intelligence. The artificial intelligence can transcribe much faster than human volunteers, but it still makes mistakes. Your review makes the names on the record easier for other people to find."))},{key:"question6",headerText:a("family-review.welcome-overlay.faq-question6","Can I choose the historical records that I want to review?"),content:(0,k.Y)(te.A,{size:"sm"},a("family-review.welcome-overlay.faq-answer6","As with most of the activities on Get Involved, you can choose the general location for where the records come from. Once the location is selected, however, the records are randomly assigned to you."))},{key:"question7",headerText:a("family-review.welcome-overlay.faq-question7","Can I save a record and work on it later?"),content:(0,k.Y)(te.A,{size:"sm"},a("family-review.welcome-overlay.faq-answer7","This is an option in traditional indexing, but it is not currently available on Get Involved. If you do not finish a review assignment, it is assigned to another volunteer."))},{key:"question8",headerText:a("family-review.welcome-overlay.faq-question8","Why should I participate in Family Review? What is my impact?"),content:(0,k.Y)(i.Fragment,null,(0,k.Y)(te.A,{size:"sm"},a("family-review.welcome-overlay.faq-answer8","By participating in Family Review, you are making it easier for people who visit the FamilySearch website to find their relatives, learn their family story, and connect their families.")),(0,k.Y)(te.A,{size:"sm"},a("family-review.welcome-overlay.faq-answer8-p2","In addition, any corrections or edits you make to the transcription help to improve the artificial intelligence so that future transcriptions are more accurate.")))},{key:"question9",headerText:a("family-review.welcome-overlay.faq-question9","After I review one family, will I get the next record in the record collection?"),content:(0,k.Y)(i.Fragment,null,(0,k.Y)(te.A,{size:"sm"},a("family-review.welcome-overlay.faq-answer9","It is possible but not guaranteed. It just depends on what's available and how many people are volunteering on Get Involved at any given moment.")),(0,k.Y)(te.A,{size:"sm"},a("family-review.welcome-overlay.faq-answer9-p2","If you\u2019re interested in viewing the record that comes before or after, go to the Record Details page, and select the option for viewing the record.")))}];return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:a("family-review.welcome-overlay.title","Welcome to Family Review")}),(0,k.Y)(zt.A,{fullWidth:!0},(0,k.Y)(Vt.A,{title:a("family-review.welcome-overlay.instructions-tab","Instructions")},!r&&n&&(0,k.Y)(Nb.DJ,{sharable:{url:"https://www.familysearch.org/en/help/helpcenter/article/welcome-to-family-review"},buttonText:a("family-review.welcome-overlay.share-instructions.btn","Share Instructions")}),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(te.A,{size:"sm"},a("family-review.welcome-overlay.ai-generated-transcription","The transcription you will review for this activity was generated by AI. Your task is to compare the transcription with the image and correct any errors you find.")),(0,k.Y)(te.A,{size:"sm"},a("The instructions in the sidebar will guide you through the review. The following is an overview of the entire activity.")),(0,k.Y)(ae.A,{size:"sm"}),o.map((e=>(0,k.Y)(JI,e)))),(0,k.Y)(Vt.A,{title:a("family-review.welcome-overlay.faq-tab","FAQ")},!r&&n&&(0,k.Y)(i.Fragment,null,(0,k.Y)(Nb.DJ,{sharable:{url:"https://www.familysearch.org/en/help/helpcenter/article/frequently-asked-questions-about-family-review"},buttonText:a("family-review.welcome-overlay.share-faq.btn","Share FAQ")}),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(te.A,{size:"sm"},(0,k.Y)(O.x,{i18nKey:"family-review.welcome-overlay.faq-content"},"Here are some of the more common questions we receive about Family Review. For more personalized help, please contact"," ",(0,k.Y)(M.Ay,{to:"https://www.familysearch.org/en/fieldops/familysearch-support-contact-us"},"FamilySearch Support"),"."))),s.map((e=>(0,k.Y)(JI,e))))),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{onClick:()=>t.close(),emphasis:"high","data-testid":"family-review-welcome-overlay-close"},a("family-review.welcome-overlay.done.btn","Done")))))}function eS(e){let{currentTask:t,addNewPersonOverlay:a,editHighlightsOverlay:r,setSaveUpdateCalled:n}=e;const o=(0,bi.Y)(),[s]=(0,P.B)(),l=(0,ci.Ay)()({default:!0,md:!1}),{rip_sharedImageViewer_saveChanges:d}=(0,L.h)(["rip_sharedImageViewer_saveChanges"]),c=(0,b.A)(),u=(0,Ae.l)(),h=Vy(),p=By(),m=xT(t),g=(0,Ee.hA)({person:m,justOneName:!0}),v=(0,$.Ay)(),y=(0,$.Ay)(),f=(0,$.Ay)(),w=fI({images:c.images,mainPartitionKey:t.partitionKey,splitScreenPartitionKey:h.splitScreenPartitionKey,primaryPersonId:null===m||void 0===m?void 0:m.id,currentRecordId:null===t||void 0===t?void 0:t.id}),[T,I]=(0,i.useState)("BIRTH_NAME"),[S,E]=(0,i.useState)(""),[C,x]=(0,i.useState)(""),[Y,N]=(0,i.useState)(),[R,_]=(0,i.useState)(),[F,D]=(0,i.useState)(),[M,H]=(0,i.useState)([]),[z,V]=(0,i.useState)(""),[B,G]=(0,i.useState)(""),U=(0,ur.SV)({mode:"all",defaultValues:{selectedId:null},resolver:e=>{const t={};U.clearErrors();const{selectedId:a}=e;return a||(t.selectedId={type:"required",message:s("FormValidation.notEmpty","Field cannot be empty.")}),{values:e,errors:t}}}),[K]=(0,hr.FH)({name:["selectedId"],control:U.control});(0,i.useEffect)((()=>{let e=!0;return a.isOpen&&(U.reset({selectedId:null}),G(""),(async()=>{const t=await(0,Se.XM)("person");e&&(V(t),p({type:"SET_SELECTED_PERSON_ID",value:t}))})()),()=>{e=!1}}),[a.isOpen,U,p]);const q=()=>{if(h.currentStep===_y.STEP_ONE){const e=xT(t);sI({h:o,mainPartitionKey:t.partitionKey,splitScreenPartitionKey:h.splitScreenPartitionKey,personIds:[e],isSmallScreen:l}),p({type:"SET_SELECTED_PERSON_ID",value:e})}else if(h.currentStep===_y.STEP_TWO){const e=h.stepTwo.relationshipCards.find((e=>!e.hasBeenReviewed));e&&(p({type:"SET_SELECTED_PERSON_ID",value:e.personId}),sI({h:o,mainPartitionKey:t.partitionKey,splitScreenPartitionKey:h.splitScreenPartitionKey,personIds:[e.personId],isSmallScreen:l}))}},W=()=>{a.close(),q()},X=(0,i.useCallback)((e=>[...o.getHighlights().mainEditHighlights,...o.getHighlights().splitScreenEditHighlights].find((t=>t.fieldId===e))),[o]);return(0,k.Y)(i.Fragment,null,(0,k.Y)(hi.A,(0,j.A)({},a,{close:()=>{W()},headingColor:"green",title:h.currentStep===_y.STEP_ONE?s("family-review.step1.heading","Identify Primary Person"):s("family-review.step3.heading","Family Relationships"),footer:(0,k.Y)(J.Ay,{alignX:"end"},(0,k.Y)(Z.A,{onClick:()=>{W()},"data-testid":"add-person-back-button",linkName:"Add Person Go Back"},s("navigation.back-button","Back")),(0,k.Y)(Z.A,{emphasis:"high",linkName:"Add Person Save","data-testid":"add-person-save-button",type:"submit",form:"add-person"},s("navigation.save-button","Save")))}),a.isOpen&&(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H2,{size:"H5"},s("family-review.addPerson.heading","Add a Person")),(0,k.Y)(te.A,{size:"sm"},s("family-review.addPerson.content","Fill out the following information to add a person to the record.")),(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)(pr.Ay,{methods:U,onSubmit:async()=>{const e=(0,A.rr)(c.images,K.key);await async function(e){let{partitionKey:t,selectedPerson:a,primaryPerson:i,currentStep:r,images:n,userId:o,zionSLSState:s,zionSlsDispatch:l,saveChangesFlag:d}=e;const c=(0,Ai.fN)({mainPerson:i,otherPerson:a,images:n});r===_y.STEP_ONE&&(c.push({type:"SET_PRIMARY",value:{partitionKey:t,id:a.id,primary:!0}}),c.push({type:"SET_PRIMARY",value:{partitionKey:t,id:i.id,primary:!1}})),await $T({dispatches:c,userId:o,taskTypeParam:"Family Review",appName:qe.uO,saveChangesFlag:d,zionSLSState:s,zionSlsDispatch:l})}({partitionKey:c.currentImageArk,selectedPerson:e,primaryPerson:m,currentStep:h.currentStep,images:c.images,userId:h.userId,zionSLSState:c,zionSlsDispatch:u,saveChangesFlag:d}),n(!0),W()},id:"add-person"},(0,k.Y)(mr.eP,{label:s("family-review.addPerson.select-person","Select Person"),placeholder:s("family-review.addPerson.select-person","Select Person"),suggestions:w,sortFunction:BT,highlightMatchingText:!0,name:"selectedId",inputText:B,onInputTextChange:G,lastResort:{key:"LAST-RESORT-KEY",primaryText:s("family-review.addPerson.name-not-on-list","Name Not In This List"),onClick:()=>{y.handleClick(),U.reset({selectedId:null}),G("")}},showLastResortOnFocus:!0,onSuggestionSelected:e=>{if(!y.isOpen){const a=(0,A.rr)(c.images,e.key);if(p({type:"SET_SELECTED_PERSON_ID",value:null===e||void 0===e?void 0:e.key}),a.recordId!==m.recordId){const e=(0,Ie.FA)(a,c.images);e.length>0&&(D(a),H(e),v.open())}sI({h:o,mainPartitionKey:t.partitionKey,splitScreenPartitionKey:h.splitScreenPartitionKey,personIds:[e.key],isSmallScreen:l})}}})),(0,k.Y)(go,{primaryText:s("family-review.addPerson.tip-primary-text","Don't see the name you are looking for?"),listPrimaryText:(0,k.Y)(O.x,{i18nKey:"family-review.addPerson.list-primary-text"},(0,k.Y)("span",null,"Looks like our computer left someone out! ",(0,k.Y)("strong",null,"Select"),' the "Name Not In This List" option in the menu add a new person.'))}),F&&(0,k.Y)(nl,{overlay:v,person:F,existingRelationships:M,genericVersion:!0,onCancel:()=>{U.reset({selectedId:null}),o.clearDisplay({all:!0})}}))),(0,k.Y)(vI,{createNewPersonFormPage1Overlay:y,currentTask:t,handleSubmit:(e,t,a)=>{I(e.nameType),E(e.givenField),x(e.surnameField),N(t),_(a);const i=(0,$e.Vs)();p({type:"SET_STATE",value:{addedSexId:i}}),f.handleClick()},hasSelectedHighlights:X,editHighlightsOverlay:r}),(0,k.Y)(yI,{createNewPersonFormPage2Overlay:f,handleSubmit:async(e,i)=>{await pI({partitionKey:c.currentImageArk,addNewPersonData:{nameType:T,givenField:S,surnameField:C,sexField:e.sexField,relationshipField:e.relationshipField,givenNameFieldId:Y,surnameFieldId:R,sexFieldId:i},personId:z,userId:h.userId,recordId:m.recordId,setAsPrimary:h.currentStep===_y.STEP_ONE,highlights:[...o.getHighlights().mainEditHighlights,...o.getHighlights().splitScreenEditHighlights],relatedPersonId:null===m||void 0===m?void 0:m.id,zionSLSState:c,zionSlsDispatch:u,saveChangesFlag:d,currentTask:t}),n(!0),f.close(),y.close(),a.close(),q()},givenField:S,surnameField:C,primaryPersonName:g,editHighlightsOverlay:r,currentTask:t}))}function tS(e){let{confirmRemoveOverlay:t,currentTask:a,handleNotAPerson:i,removePerson:r,setRelationshipAsOther:n}=e;const[o]=(0,P.B)(),s=Vy(),l=null===a||void 0===a?void 0:a.subElements.find((e=>(null===e||void 0===e?void 0:e.id)===s.selectedPersonId)),d=(0,Ee.hA)({person:l,justOneName:!0});return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:o("confirm-remove-overlay.title","Are you sure?"),size:"lg"}),(0,k.Y)(O.x,{i18nKey:"confirm-remove-overlay.body-1"},(0,k.Y)(te.A,null,"If the document includes ",(0,k.Y)("em",null,d)," in the record, then mark the Relationship as"," ",(0,k.Y)("strong",null,"No Direct Relation"),".")),(0,k.Y)(O.x,{i18nKey:"confirm-remove-overlay.body-2"},(0,k.Y)(te.A,null,"Otherwise, ",(0,k.Y)("strong",null,"Remove")," ",(0,k.Y)("em",null,d)," from the record.")),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(O.x,{i18nKey:"confirm-remove-overlay.body-3"},(0,k.Y)(te.A,null,"If this isn't a name at all, mark as"," ",(0,k.Y)(Z.A,{title:o("confirm-remove-overlay.not-a-person-button","Not a person"),linkName:"Confirm Remove Overlay Not A Person",onClick:i,"data-testid":"not-a-person-button",text:o("confirm-remove-overlay.not-a-person-button","Not a person"),dense:!0},o("confirm-remove-overlay.not-a-person-button","Not a person")),".")),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(O.x,{i18nKey:"confirm-remove-overlay.body-4"},(0,k.Y)(te.A,null,"Please confirm this change.")),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(at.A,{onClick:r,Icon:xi.A,"data-testid":"confirm-remove-button",linkName:"Confirm Remove Submit"},o("confirm-remove-overlay.remove-button","Remove from record")),(0,k.Y)(Z.A,{onClick:n,emphasis:"medium","data-testid":"relationship-as-other-button",linkName:"Confirm Remove Relationship as Other"},o("confirm-remove-overlay.no-direct-relation-button","Relationship as No Direct Relation")))))}const aS=e=>{let{field:t,unlinkingState:a,editHighlightsOverlay:r,handleHighlightButtonClicked:n,hasSelectedHighlights:o,fieldType:s,onFieldValueChange:l,disableUnlinking:d}=e;const[c,u]=a,[h]=(0,P.B)(),p=(0,b.A)(),m=(null===t||void 0===t?void 0:t.displayLabel)||(null===t||void 0===t?void 0:t.label),g=(0,Ee.lY)(t,p.images),v=(0,A.mk)(t,p.images),y=g?g.filter((e=>e!==t.personId)).map((e=>{const t=(0,Ee.hA)({person:(0,A.rr)(p.images,e)});return t?` \u2022 ${t}`:""})):null,f=` \u2022 ${h("family-review.editEntity.and-more"," and more")}`;let w=c?h("family-review.editEntity.changes-to-unlinked-field","Changes to this {fieldType} NO LONGER change the {fieldType} for:",{fieldType:m}):h("family-review.editEntity.changes-to-field","Changes to this {fieldType} will also change the {fieldType} for:",{fieldType:m}),T=!1;return y&&y.forEach((e=>{T||(w.length+e.length+f.length>140?(T=!0,w+=f):w+=e)})),(0,k.Y)(i.Fragment,null,v?(0,k.Y)(Da.A,{overline:m,primaryText:null===t||void 0===t?void 0:t.value,endElement:(0,k.Y)(Hs.A,{target:(0,k.Y)(Fr.A,{size:"sm"}),label:`Locked ${m}`,description:h("family-review.editEntity.locked-description","To keep records searchable on Family Search, this field will not accept any changes.")})}):(0,k.Y)(i.Fragment,null,(0,Ni.YL)(t)&&(0,k.Y)(mr.kV,{"data-testid":(null===t||void 0===t?void 0:t.fieldType)||(null===t||void 0===t?void 0:t.elementType),name:t.id,key:t.id,label:t.label,placeholder:t.label,standardize:!0,clearOnClickAway:!0}),(0,Ni.vE)(t)&&(0,k.Y)(mr.nW,{"data-testid":(null===t||void 0===t?void 0:t.fieldType)||(null===t||void 0===t?void 0:t.elementType),name:t.id,key:t.id,label:t.label,placeholder:t.label,standardize:!0,clearOnClickAway:!0}),!(0,Ni.YL)(t)&&!(0,Ni.vE)(t)&&(0,k.Y)(mr.YJ,{label:`${m}`,placeholder:m,name:t.id,maxLength:256,"data-testid":`edit-${s}-${t.fieldType}`,onChange:"event"===s?l:void 0})),!v&&y&&y.length>0&&(0,k.Y)(J.Ay,null,(0,k.Y)("span",{growX:!0},c?h("family-review.editEntity.unlinked-field","{fieldType} unlinked on save.",{fieldType:m}):h("family-review.editEntity.linked-field","Linked {fieldType}",{fieldType:m})),(0,k.Y)(Hs.A,{target:(0,k.Y)(Pi.A,{size:"sm"}),label:h("family-review.editEntity.linked-field","Linked {fieldType}",{fieldType:m}),description:w})),!v&&(0,k.Y)(mI,{isAdding:!o(t.id),editHighlightsOverlay:r,id:t.id,handleHighlightButtonClicked:n}),!v&&y&&y.length>0&&(0,k.Y)(go,{primaryText:h("family-review.editEntity.what-is-a-linked-field","What is a linked {fieldType}?",{fieldType:m}),listPrimaryText:(0,k.Y)(i.Fragment,null,(0,k.Y)("p",null,h("family-review.editEntity.primary-text","A linked {fieldType} is a {fieldType} that is shared with other record names.",{fieldType:m})),(0,k.Y)("br",null),!d&&(0,k.Y)(i.Fragment,null,(0,k.Y)(O.x,{i18nKey:"family-review.editEntity.linked-field-tip-instructions"},(0,k.Y)("span",null,(0,k.Y)("strong",null,"Select")," the Unlink ",{fieldType:m}," button to remove the link.")),(0,k.Y)(Z.A,{onClick:()=>u(!c),"data-testid":`toggle-unlink-${m.toLowerCase()}-button`,linkName:c?"Shareable Field Relink Field":"Shareable Field Unlink Field"},c?h("family-review.editEntity.relink-field","Relink {fieldType}",{fieldType:m}):h("family-review.editEntity.unlink-field","Unlink {fieldType}",{fieldType:m}))))}))},iS=(0,y.Ay)("rip:familyReview:EditPerson"),rS=e=>{var t,a,r,n,o,s;let{currentTask:l,editPersonOverlay:d,editHighlightsOverlay:c,stepTwoOverlay:u,stepOnePartTwoOverlay:h,onSubmit:p,primaryPerson:m,setSaveUpdateCalled:g}=e;iS({currentTask:l,primaryPerson:m});const v=(0,bi.Y)(),[y]=(0,P.B)(),f=(0,ci.Ay)()({default:!0,md:!1}),{rip_sharedImageViewer_saveChanges:w}=(0,L.h)(["rip_sharedImageViewer_saveChanges"]),T=By(),I=Vy(),S=(0,b.A)(),E=(0,Ae.l)(),C=(0,$.Ay)(),x=(0,$.Ay)(),[Y,N]=(0,i.useState)([]),[R,_]=(0,i.useState)([]),[F,D]=(0,i.useState)([]),[M,H]=(0,i.useState)([]),[z,V]=(0,i.useState)({}),B=null===l||void 0===l?void 0:l.subElements.find((e=>(null===e||void 0===e?void 0:e.id)===I.selectedPersonId)),G=(0,Ee.hA)({person:m,justOneName:!0}),U=(0,i.useMemo)((()=>{var e;return(null===(e=(0,A.q5)(B,"SEX_CODE"))||void 0===e?void 0:e[0])||{id:(0,A.Vs)()}}),[B]),[K]=(0,i.useState)({id:(0,A.Vs)()}),q=(null===B||void 0===B?void 0:B.subElements.find((e=>"NAME"===e.elementType&&"BIRTH_NAME"===e.nameType)))||(null===B||void 0===B?void 0:B.subElements.find((e=>"NAME"===e.elementType))),j=(0,Ie.TK)({person:B,primaryPersonId:null===m||void 0===m?void 0:m.id})||K,W=(0,A.Ut)(U),X=["NAME_GN","NAME_SURN","NAME_PRE","NAME_SPRE","NAME_SUF","NAME_PATR","NAME_MATR"],{selectedFieldData:Q,treatedNameFieldChipData:J}=So(q,S.types,Y,F,M);Q!==R&&(N(on()(Q)),_(Q));const Z={};Q.forEach((e=>{Z[null===e||void 0===e?void 0:e.id]=(0,A.OV)(e)||""})),U&&(Z[null===U||void 0===U?void 0:U.id]={primaryText:(0,A.J1)(U,y)||"",key:W||""},Z[`${null===U||void 0===U?void 0:U.id}_fieldType`]="SEX_CODE");const ee=null===j||void 0===j||null===(t=j.superElements)||void 0===t||null===(a=t.find((e=>(null===e||void 0===e?void 0:e.id)===(null===B||void 0===B?void 0:B.id))))||void 0===a?void 0:a.order,te=HT(S.types,W)||[],ie=j?te.find((e=>e.key===`${j.relType}_${ee}`))||te.find((e=>e.key===`${j.relType}_FIRST`)):null;j&&(Z[null===j||void 0===j?void 0:j.id]=ie,Z[`${null===j||void 0===j?void 0:j.id}_fieldType`]="REL_TYPE");const re=(0,ur.SV)({mode:"all",defaultValues:Z,resolver:e=>{var t,a;const i={};re.clearErrors();const r=Object.entries(e),n=[];r.forEach((t=>{const a=(0,A.cd)(l.subElements,t[0])||{fieldType:e[`${t[0]}_fieldType`]};n.find((e=>(null===e||void 0===e?void 0:e.id)===t[0].replace("_fieldType","")))||n.push({id:t[0],fieldType:(null===a||void 0===a?void 0:a.fieldType)||(null===a||void 0===a?void 0:a.elementType),value:t[1]})}));const o=n.find((e=>"NAME_GN"===e.fieldType)),s=n.find((e=>"NAME_SURN"===e.fieldType));null!==o&&void 0!==o&&o.value||null!==s&&void 0!==s&&s.value||(i[null===o||void 0===o?void 0:o.id]={type:"required",message:y("add-person.form-error-one","Must have at least one name part")},i[null===s||void 0===s?void 0:s.id]={type:"required",message:y("add-person.form-error-one","Must have at least one name part")});const d=n.find((e=>"SEX_CODE"===e.fieldType));!d||null!==d&&void 0!==d&&null!==(t=d.value)&&void 0!==t&&t.key&&A.AZ.includes(null===d||void 0===d||null===(a=d.value)||void 0===a?void 0:a.key)||(i[null===d||void 0===d?void 0:d.id]={message:y("standardizedSexField.validation.warning","No Standard Selected")});return["NAME_GN","NAME_SURN","NAME_PRE","NAME_SPRE","NAME_SUF","NAME_PATR","NAME_MATR"].forEach((e=>{const t=n.find((t=>t.fieldType===e));if(t){t.value!==(0,$e.tK)(t.value)&&(i[null===t||void 0===t?void 0:t.id]={type:"invalid",message:y("task-viewer.error.illegal-characters","You can only enter ' - , . diacritic, and alphanumeric characters.")})}})),{values:e,errors:i}}}),ne=re.formState.dirtyFields,oe=(0,hr.FH)({name:null===U||void 0===U?void 0:U.id,control:re.control}),se=(0,hr.FH)({name:null===j||void 0===j?void 0:j.id,control:re.control}),le=(0,i.useMemo)((()=>({key:"OTHER",primaryText:"No Direct Relation"})),[]),de=(0,i.useMemo)((()=>{const e=HT(S.types,null===oe||void 0===oe?void 0:oe.key)||[];return e.push(le),e}),[S.types,oe,le]),ce=(0,i.useCallback)(((e,t)=>{V((a=>({...a,[e]:t})))}),[]),ue=(0,i.useCallback)((e=>z[e]||!1),[z]);(0,i.useEffect)((()=>{if(de&&de.length){const e=de.find((e=>e.key===(null===se||void 0===se?void 0:se.key)));(null===e||void 0===e?void 0:e.primaryText)!==(null===se||void 0===se?void 0:se.primaryText)&&re.setValue(null===j||void 0===j?void 0:j.id,e)}}),[de,re,null===j||void 0===j?void 0:j.id,se]);const he=(0,i.useCallback)((e=>[...v.getHighlights().mainEditHighlights,...v.getHighlights().splitScreenEditHighlights].find((t=>t.fieldId===e))),[v]),pe=e=>{e&&T({type:"SET_ACTIVE_FIELD_ID",value:e}),v.setDisplayHighlights({mainPartitionKey:l.partitionKey,splitScreenPartitionKey:I.splitScreenPartitionKey,setMainZoom:!0,setSplitScreenZoom:Boolean(I.splitScreenPartitionKey),attachFilter:t=>t.fieldId===e,mainZoomFilter:t=>t.fieldId===e,splitScreenZoomFilter:t=>t.fieldId===e,isSmallScreen:f})};return(0,k.Y)(i.Fragment,null,(0,k.Y)(pr.Ay,{methods:re,onSubmit:e=>{p(e,ne,null===q||void 0===q?void 0:q.id,z)},id:"edit-person"},I.selectedPersonId===(null===m||void 0===m?void 0:m.id)&&(0,k.Y)(Ye.A,null,(0,k.Y)(Da.A,{startElement:(0,k.Y)(Da.A.Icon,{Icon:Xf.A}),primaryText:(0,k.Y)("span",null,(0,k.Y)(O.x,{i18nKey:"family-review.editPerson.change-primary"},(0,k.Y)("span",null,"This is the "),(0,k.Y)("strong",null,"Primary Person."),(0,k.Y)("span",null," To change "),(0,k.Y)(rn.A,{linkName:"Edit Person Go Back To Step 1",onClick:()=>{d.close(),T({type:"SET_CURRENT_STEP",value:_y.stepOne}),u.close(),h.handleClick()}},"Go back to step 1"),"."))})),(0,k.Y)(ae.A,{size:"xs"}),[...Y].sort(((e,t)=>X.indexOf(e.fieldType)-X.indexOf(t.fieldType))).map((e=>(0,k.Y)("div",{key:null===e||void 0===e?void 0:e.id},(0,k.Y)(aS,{field:e,unlinkingState:[ue(e.fieldType),t=>ce(e.fieldType,t)],editHighlightsOverlay:c,handleHighlightButtonClicked:pe,hasSelectedHighlights:he,fieldType:"person"})))),(null===U||void 0===U?void 0:U.id)&&(0,k.Y)(i.Fragment,null,(0,k.Y)(br,{person:B,fieldName:null===U||void 0===U?void 0:U.id,key:null===U||void 0===U?void 0:U.id,addedSexCode:U}),(0,k.Y)(mI,{editHighlightsOverlay:c,id:null===U||void 0===U?void 0:U.id,handleHighlightButtonClicked:pe,isAdding:!he(null===U||void 0===U?void 0:U.id)})),j&&(null===I||void 0===I?void 0:I.selectedPersonId)!==(null===m||void 0===m?void 0:m.id)&&(0,k.Y)(mr.eP,{label:y("family-review.editPerson.relationship-to-person","Relationship To {primaryPersonName}",{primaryPersonName:G}),placeholder:y("family-review.editPerson.relationship-to-person","Relationship To {primaryPersonName}",{primaryPersonName:G}),name:null===j||void 0===j?void 0:j.id,maxLength:256,suggestions:de,"data-testid":"edit-person-relationship-to-primary",sortFunction:BT,highlightMatchingText:!0}),(0,k.Y)(ae.A,null),(0,k.Y)(Si.A,{"data-testid":"add-or-remove-fields",Icon:Ci.A,color:"yellow",emphasis:"low",onClick:C.handleClick,linkName:"Edit Person Add or Remove Fields"},y("edit-index.add-fields.button","+ Add or Remove Fields")),(0,k.Y)(ae.A,null),(0,k.Y)(Si.A,{"data-testid":"remove-person-button",color:"red",emphasis:"medium",onClick:x.handleClick,disabled:I.selectedPersonId===(null===m||void 0===m?void 0:m.id),linkName:"Edit Person Remove"},y("edit-index.remove-person.button","Remove {name}",{name:null===(r=Q.find((e=>"NAME_GN"===e.fieldType)))||void 0===r||null===(n=r.fieldValues)||void 0===n||null===(o=n[0])||void 0===o||null===(s=o.origValue)||void 0===s?void 0:s.text}))),(0,k.Y)(An,{title:y("edit-index.add-fields.title","Add or Remove Fields"),chipData:[{title:y("edit-index.chips.name-fields.title","Name"),data:J,key:`nameFields-${null===q||void 0===q?void 0:q.id}`}],fieldData:Y,handleSelection:(e,t)=>{const a=[...Y];Y.filter((a=>!e.map((e=>{let{id:t}=e;return t})).includes(null===a||void 0===a?void 0:a.id)&&!t.map((e=>{let{id:t}=e;return t})).includes(null===a||void 0===a?void 0:a.id))).forEach((e=>{_n(e,re);const t=a.findIndex((t=>(null===t||void 0===t?void 0:t.id)===(null===e||void 0===e?void 0:e.id)));a.splice(t,1)}));const i=e.filter((e=>!(null!==e&&void 0!==e&&e.id)));i&&i.forEach((e=>{const t={label:e.label,fieldType:e.value.split(":")[0],id:(0,A.Vs)(),added:!0};a.push(t),re.setValue(null===t||void 0===t?void 0:t.id,""),re.setValue(`${null===t||void 0===t?void 0:t.id}_fieldType`,e.value.split(":")[0])}));const r={subElements:[{elementType:"NAME",subElements:a}]};(0,Ee.qz)(r),N(a)},handleSelectionChange:(e,t)=>{D(e),H(t)},overlay:C,disabledFunc:ko,unlinkingStates:z}),(0,k.Y)(tS,{confirmRemoveOverlay:x,currentTask:l,handleNotAPerson:async()=>{await JT({partitionKey:l.partitionKey,personId:null===B||void 0===B?void 0:B.id,zionSLSState:S,zionSlsDispatch:E,userId:I.userId,saveChangesFlag:w}),g(!0),x.close(),d.close()},removePerson:async()=>{try{await async function(e){let{partitionKey:t,recordId:a,personId:i,zionSLSState:r,zionSlsDispatch:n,userId:o,saveChangesFlag:s}=e;const l=[{type:"REM_SUB",value:{superId:a,superPartitionKey:t,subId:i,subPartitionKey:t,elementType:"RECORD"}}];await $T({dispatches:l,userId:o,taskTypeParam:"Family Review",appName:qe.uO,saveChangesFlag:s,zionSLSState:r,zionSlsDispatch:n})}({partitionKey:S.currentImageArk,recordId:null===l||void 0===l?void 0:l.id,personId:null===B||void 0===B?void 0:B.id,zionSLSState:S,zionSlsDispatch:E,userId:I.userId,saveChangesFlag:w}),g(!0),x.close(),d.close()}catch(e){console.error(e)}},setRelationshipAsOther:()=>{re.setValue(null===j||void 0===j?void 0:j.id,le),x.close()}}))};function nS(e){let{currentTask:t,editPersonOverlay:a,editHighlightsOverlay:r,stepTwoOverlay:n,stepOnePartTwoOverlay:o,reviewPersonEventsOverlay:s,setSaveUpdateCalled:l,setStepTwoData:d}=e;const c=(0,bi.Y)(),[u]=(0,P.B)(),h=(0,ci.Ay)()({default:!0,md:!1}),p=Vy(),m=(0,b.A)(),g=(0,Ae.l)(),v=By(),y=xT(t),{rip_sharedImageViewer_saveChanges:f}=(0,L.h)(["rip_sharedImageViewer_saveChanges"]),A=(0,i.useCallback)((e=>{if(p.currentStep===My.STEP_FOUR){const a=t.subElements.filter((e=>"PERSON"===e.elementType)).flatMap((e=>null===e||void 0===e?void 0:e.id));dI({h:c,currentTask:t,highlights:e,personIds:a,isSmallScreen:h,splitScreenPartitionKey:p.splitScreenPartitionKey})}}),[t,p,h,c]),w=(0,i.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;a.close(),p.currentStep===My.STEP_TWO&&d(e?p.selectedPersonId:null,t),p.currentStep===My.STEP_FOUR&&A(t)}),[a,p,d,A]),T=(0,i.useCallback)((async(e,a,i,r)=>{await hI({currentTask:t,partitionKey:m.currentImageArk,personId:p.selectedPersonId,formValues:e,unlinkingNames:r,dirtyFields:a,userId:p.userId,nameElementId:i,highlights:[...c.getHighlights().mainEditHighlights,...c.getHighlights().splitScreenEditHighlights],relatedPersonId:null===y||void 0===y?void 0:y.id,zionSLSState:m,zionSlsDispatch:g,saveChangesFlag:f,handleError:e=>v({type:"SET_ERROR",value:e}),handleSuccess:()=>{l(!0),w(!0,[...c.getHighlights().mainEditHighlights,...c.getHighlights().splitScreenEditHighlights]),p.currentStep===My.STEP_FOUR&&s.open()}})}),[c,p,t,null===y||void 0===y?void 0:y.id,m,g,f,l,w,s,v]);return(0,k.Y)(hi.A,(0,j.A)({},a,{close:()=>{const e=c.clearEdits().mainHighlights;w(!1,e)},title:u("family-review.step3.heading","Family Relationships"),headingColor:"green",footer:(0,k.Y)(J.Ay,{alignX:"end"},(0,k.Y)(Z.A,{onClick:()=>{const e=c.clearEdits().mainHighlights;w(!1,e),p.currentStep===My.STEP_FOUR&&s.open()},"data-testid":"edit-person-cancel-button",linkName:"Edit Person Cancel"},u("edit-index.cancel.button","Cancel")),(0,k.Y)(Z.A,{emphasis:"high",linkName:"Edit Person Save",form:"edit-person",type:"submit","data-testid":"edit-person-save-button"},u("edit-index.save.button","Save")))}),a.isOpen&&(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H2,{size:"H5"},(0,k.Y)(Mt.A,null,u("family-review.stepXof4","Step {step} of 4",{step:p.currentStep===My.STEP_TWO?"2":"4"})),u("family-review.editPerson.heading","Edit Name and Relationship")),(0,k.Y)(te.A,{size:"sm"},u("family-review.editPerson.subHeading","Fix any incorrect fields or highlights. Add or remove fields as necessary.")),(0,k.Y)(ae.A,null),a.isOpen&&(0,k.Y)(rS,{currentTask:t,editPersonOverlay:a,editHighlightsOverlay:r,stepTwoOverlay:n,stepOnePartTwoOverlay:o,onSubmit:T,primaryPerson:y,setSaveUpdateCalled:l})))}const oS={name:"s6q9tg",styles:"& div{margin-bottom:0px;}"};function sS(e){var t;let{currentTask:a,addNewEventOverlay:r,editHighlightsOverlay:n,editEventOverlay:o,setSaveUpdateCalled:s}=e;const l=(0,bi.Y)(),d=null===a||void 0===a?void 0:a.id,c=By(),u=(0,L.u)("rip_sharedImageViewer_saveChanges"),h=(0,Ae.l)(),p=(0,b.A)(),m=Vy(),[g]=(0,P.B)(),v=(0,ci.Ay)()({default:!0,md:!1}),y=null===(t=a.subElements)||void 0===t?void 0:t.filter((e=>"PERSON"===e.elementType)).flatMap((e=>{var t;return null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t.filter((e=>"EVENT"===e.elementType))})),f=Boolean(y.find((e=>{var t;return null===e||void 0===e||null===(t=e.typeData)||void 0===t?void 0:t.primaryOnly}))),[w,T]=(0,i.useState)(!f),I=xT(a),S=(0,ur.SV)({mode:"all",defaultValues:{type:{key:"",primaryText:""},person:{key:"",primaryText:"",isPrimary:!1}},resolver:e=>{const t={};S.clearErrors();const{type:a,person:i}=e;return null!==a&&void 0!==a&&a.key||(t.type={type:"required",message:g("FormValidation.notEmpty","Field cannot be empty.")}),null!==i&&void 0!==i&&i.key||(t.person={type:"required",message:g("FormValidation.notEmpty","Field cannot be empty.")}),{values:e,errors:t}}}),[E,C]=(0,hr.FH)({name:["type","person"],control:S.control}),x=async()=>{var e,t;const i=null===(e=p.types)||void 0===e||null===(t=e.events)||void 0===t?void 0:t.find((e=>e.eventType===E.key));E.fieldId=m.addNewEvent.typeId,await async function(e){let{eventId:t,highlights:a,isPrimary:i=!1,partitionKey:r,personId:n,saveChangesFlag:o,type:s,typeFieldId:l,userId:d,recordId:c,zionSLSState:u,zionSlsDispatch:h}=e;const p=u.images,m=null===s||void 0===s?void 0:s.displayLabel,g=(0,Je.cN)(m,WT,null===s||void 0===s?void 0:s.uri);let v=(0,Ai.bp)({partitionKey:r,eventType:null===s||void 0===s?void 0:s.eventType,personId:n,id:t,eventTypeId:l,eventTypeFieldValue:g,extraArgs:{primary:i}});const y=(0,Ai.Aq)(p,r,a,"",!0);v=v.concat(y),v.length&&v.push({type:"SET_RECORD_PERSON_IDS",value:c}),v&&await $T({dispatches:v,userId:d,taskTypeParam:"Family Review",appName:qe.uO,saveChangesFlag:o,zionSLSState:u,zionSlsDispatch:h})}({eventId:m.addNewEvent.eventId,highlights:[...l.getHighlights().mainEditHighlights,...l.getHighlights().splitScreenEditHighlights],isEventPrimary:w,partitionKey:a.partitionKey,personId:C.key,saveChangesFlag:u,type:i,typeFieldId:m.addNewEvent.typeId,userId:m.userId,recordId:d,zionSLSState:p,zionSlsDispatch:h}),s(!0),c({type:"SET_SELECTED_EVENT_ID",value:m.addNewEvent.eventId})},Y=()=>{var e;lI({h:l,currentTask:a,highlights:[...l.getHighlights().mainEditHighlights,...l.getHighlights().splitScreenEditHighlights],eventIds:[null===(e=m.stepThree.eventCards.find((e=>!e.hasBeenReviewed)))||void 0===e?void 0:e.eventId],isSmallScreen:v,splitScreenPartitionKey:m.splitScreenPartitionKey})},N=()=>{const e=m.stepThree.eventCards.find((e=>!e.hasBeenReviewed));e&&c({type:"SET_SELECTED_EVENT_ID",value:e.eventId})},R=()=>{S.reset(),c({type:"RESET_ADD_NEW_EVENT_IDS"}),r.close()},O=FT(a).map((e=>{var t;return{key:null===e||void 0===e?void 0:e.id,primaryText:(0,Ee.hA)({person:e,justOneName:!0}),isPrimary:null!==(t=null===e||void 0===e?void 0:e.primary)&&void 0!==t&&t}})),_=(0,i.useMemo)((()=>{var e;const t=C&&(null===C||void 0===C?void 0:C.key)===(null===I||void 0===I?void 0:I.id),i=null===(e=m.stepThree.eventCards.map((e=>(0,A.cd)(null===a||void 0===a?void 0:a.subElements,e.eventId))).filter((e=>null===e||void 0===e?void 0:e.primary))[0])||void 0===e?void 0:e.eventType;return MT({types:p.types,t:g,isPrimary:w,primaryEventType:t?i:null})}),[g,p.types,w,null===a||void 0===a?void 0:a.subElements,m.stepThree.eventCards,C,null===I||void 0===I?void 0:I.id]);return(0,i.useEffect)((()=>{null===E||void 0===E||!E.key||null!==_&&void 0!==_&&_.find((e=>e.key===E.key))||S.setValue("type",{key:"",primaryText:""})}),[_,E,S]),(0,i.useEffect)((()=>{const e=m.stepThree.addedFloatingEventPersonId;let t=!0;if(e&&""===(null===C||void 0===C?void 0:C.key)){const r=(0,A.cd)(a.subElements,e),n=r?(0,Ee.hA)({person:r,justOneName:!0}):"";var i;if(t)S.setValue("person",{key:e,primaryText:n,isPrimary:null!==(i=null===r||void 0===r?void 0:r.primary)&&void 0!==i&&i})}return()=>{t=!1}}),[m.stepThree.addedFloatingEventPersonId,a.subElements,S,C]),(0,k.Y)(hi.A,(0,j.A)({},r,{close:()=>{R(),Y(),N()},title:m.currentStep===My.STEP_THREE?g("family-review.step4.heading","Life Events"):g("family-review.step5.heading","Final Review"),headingColor:"green",footer:(0,k.Y)(J.Ay,{alignX:"end"},(0,k.Y)(Z.A,{onClick:()=>{R(),Y(),N()},linkName:"New Event Cancel","data-testid":"add-new-event-cancel-button"},g("edit-index.cancel.button","Cancel")),(0,k.Y)(Z.A,{emphasis:"high",linkName:"New Event Save","data-testid":"add-new-event-save-button",form:"add-new-event",type:"submit"},g("edit-index.save.button","Save")))}),r.isOpen&&(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H2,{size:"H5"},(0,k.Y)(Mt.A,null,g("family-review.stepXof4","Step {step} of 4",{step:m.currentStep===My.STEP_THREE?"3":"4"})),g("family-review.addEvent.heading","Add New Event")),(0,k.Y)(te.A,{size:"sm"},g("family-review.addEvent.content","Select a person from the dropdown, select an event type, and add any new fields.")),(0,k.Y)(ae.A,null),(0,k.Y)(pr.Ay,{methods:S,onSubmit:async()=>{await x(),R(),o.open()},id:"add-new-event"},(0,k.Y)(mr.eP,{"data-testid":"person-autosuggest",clearOnClickAway:!0,clearable:!0,id:"event-person",name:"person",label:g("family-review.addEvent.formLabel.person","Event Person"),placeholder:g("family-review.addEvent.formLabel.person","Event Person"),suggestions:O,onSuggestionSelected:e=>{const t=!f&&(null===e||void 0===e?void 0:e.isPersonPrimary);T(t)}}),(0,k.Y)("span",{css:oS},(0,k.Y)(mr.eP,{"data-testid":"type-autosuggest",clearOnClickAway:!0,clearable:!0,id:"event-type",name:"type",label:g("family-review.addEvent.formLabel.type","Event Type"),placeholder:g("family-review.addEvent.formLabel.type","Event Type"),suggestions:_})),(0,k.Y)(mI,{isAdding:!l.getHighlights().mainEditHighlights.find((e=>e.fieldId===m.addNewEvent.typeId)),editHighlightsOverlay:n,handleHighlightButtonClicked:()=>{var e;(e=m.addNewEvent.typeId)&&(c({type:"SET_ACTIVE_FIELD_ID",value:e}),l.setDisplayHighlights({mainPartitionKey:a.partitionKey,splitScreenPartitionKey:m.splitScreenPartitionKey,setMainZoom:!0,setSplitScreenZoom:Boolean(m.splitScreenPartitionKey),attachFilter:t=>t.fieldId===e,mainZoomFilter:t=>t.fieldId===e,splitScreenZoomFilter:t=>t.fieldId===e,isSmallScreen:v}))}}))))}function lS(e){let{addNewEventOverlay:t,addFloatingEventOverlay:a,currentTask:r,editEventOverlay:n,setSaveUpdateCalled:o}=e;const s=(0,bi.Y)(),l=By(),d=(0,L.u)("rip_sharedImageViewer_saveChanges"),c=(0,Ae.l)(),u=(0,b.A)(),h=Vy(),[p]=(0,P.B)(),m=(0,ci.Ay)()({default:!0,md:!1}),g=(0,ur.SV)({mode:"all",defaultValues:{floatingEvent:{key:"",primaryText:""},person:{key:"",primaryText:""}},resolver:e=>{const t={};g.clearErrors();const{floatingEvent:a,person:i}=e;return null!==a&&void 0!==a&&a.key||(t.floatingEvent={type:"required",message:p("FormValidation.notEmpty","Field cannot be empty.")}),null!==i&&void 0!==i&&i.key||(t.person={type:"required",message:p("FormValidation.notEmpty","Field cannot be empty.")}),{values:e,errors:t}}}),[v,y]=(0,hr.FH)({name:["floatingEvent","person"],control:g.control}),f=async()=>{await async function(e){let{eventId:t,personId:a,saveChangesFlag:i,userId:r,zionSLSState:n,zionSlsDispatch:o}=e;const s=(0,A.cd)(n.images,a),l=(0,A.hP)(n.images,t);if(s&&l){const e=[{type:"ADD_SUB",value:{superPartitionKey:s.partitionKey,subPartitionKey:l.partitionKey,superId:a,subId:t,elementType:"PERSON"}}];e&&await $T({dispatches:e,userId:r,taskTypeParam:"Family Review",appName:qe.uO,saveChangesFlag:i,zionSLSState:n,zionSlsDispatch:o})}}({eventId:v.key,personId:y.key,saveChangesFlag:d,userId:h.userId,zionSLSState:u,zionSlsDispatch:c}),o(!0),l({type:"SET_SELECTED_EVENT_ID",value:v.key})},w=()=>{var e;lI({h:s,currentTask:r,highlights:[...s.getHighlights().mainEditHighlights,...s.getHighlights().splitScreenEditHighlights],eventIds:[null===(e=h.stepThree.eventCards.find((e=>!e.hasBeenReviewed)))||void 0===e?void 0:e.eventId],isSmallScreen:m,splitScreenPartitionKey:h.splitScreenPartitionKey})},T=()=>{const e=h.stepThree.eventCards.find((e=>!e.hasBeenReviewed));e&&l({type:"SET_SELECTED_EVENT_ID",value:e.eventId})},I=()=>{g.reset(),a.close()},S=FT(r).map((e=>({key:null===e||void 0===e?void 0:e.id,primaryText:(0,Ee.hA)({person:e,justOneName:!0})}))),E=(0,i.useMemo)((()=>{var e;const t=null===(e=r.subElements)||void 0===e?void 0:e.filter((e=>"PERSON"===e.elementType)).flatMap((e=>{var t;return null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t.filter((e=>"EVENT"===e.elementType))})),a=Boolean(t.find((e=>e.typeData.primaryOnly)));return(0,A.Wh)(u.images[0],"EVENT").filter((e=>a?!e.typeData.primaryOnly:e)).map((e=>{var t;const a=_T(e).map((e=>e.value)).join(" "),i=OT(e).map((e=>e.value)).join(" "),r=a&&i?`${a} | ${i}`:a||i||"";return{key:null===e||void 0===e?void 0:e.id,primaryText:(null===(t=e.typeData)||void 0===t?void 0:t.displayLabel)||"type",secondaryText:r}}))}),[u.images,r.subElements]);return(0,k.Y)(hi.A,(0,j.A)({},a,{close:()=>{I(),w(),T()},title:h.currentStep===My.STEP_THREE?p("family-review.step4.heading","Life Events"):p("family-review.step5.heading","Final Review"),headingColor:"green",footer:(0,k.Y)(J.Ay,{alignX:"end"},(0,k.Y)(Z.A,{onClick:()=>{I(),w(),T()},linkName:"Floating Event Cancel","data-testid":"add-floating-event-cancel-button"},p("edit-index.cancel.button","Cancel")),(0,k.Y)(Z.A,{emphasis:"high",linkName:"Floating Event Save","data-testid":"add-floating-event-save-button",form:"add-floating-event",type:"submit"},p("edit-index.save.button","Save")))}),a.isOpen&&(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H2,{size:"H5"},(0,k.Y)(Mt.A,null,p("family-review.stepXof4","Step {step} of 4",{step:h.currentStep===My.STEP_THREE?"3":"4"})),p("family-review.addFloatingEvent.heading","Add an Event")),(0,k.Y)(te.A,{size:"sm"},p("family-review.addFloatingEvent.content","Select an event from the dropdown to add an existing event to the record.")),(0,k.Y)(ae.A,null),(0,k.Y)(pr.Ay,{methods:g,onSubmit:async()=>{await f(),I(),n.open()},id:"add-floating-event"},(0,k.Y)(mr.eP,{"data-testid":"person-autosuggest",clearOnClickAway:!0,clearable:!0,id:"event-person",name:"person",label:p("family-review.addEvent.formLabel.person","Event Person"),placeholder:p("family-review.addEvent.formLabel.person","Event Person"),suggestions:S}),(0,k.Y)(mr.eP,{"data-testid":"floating-event-autosuggest",clearOnClickAway:!0,clearable:!0,id:"floating-event",name:"floatingEvent",label:p("edit-events.fields.new-event-heading","Event"),placeholder:p("edit-events.fields.new-event-heading","Event"),suggestions:E}),(0,k.Y)(Z.A,{onClick:()=>{null!==y&&void 0!==y&&y.key&&l({type:"SET_ADDED_FLOATING_EVENT_PERSON",value:y.key}),I(),t.open()},"data-testid":"event-not-on-list",linkName:"Floating Event Not On List"},p("family-review.addFloatingEvent.button","Event not on list")),(0,k.Y)(go,{primaryText:p("family-review.addFloatingEvent.tip.heading","What is an event?"),listPrimaryText:(0,k.Y)(i.Fragment,null,p("family-review.addFloatingEvent.tip.content","Events include births, deaths, marriages, burials, etc."))}))))}const dS=(0,y.Ay)("rip:EditEventForm"),cS={name:"1g75xum",styles:"& div{margin-bottom:0px;margin-top:0px;}"},uS=(0,i.createContext)();function hS(e){var t,a;let{reviewPersonEventsOverlay:r,currentTask:n,editHighlightsOverlay:o,setSaveUpdateCalled:s,handleEditEventClose:l,isPrimaryEvent:d}=e;const c=(0,bi.Y)(),u=n.id,h=(0,$.Ay)(),p=(0,L.u)("rip_sharedImageViewer_saveChanges"),[m]=(0,P.B)(),g=(0,ci.Ay)()({default:!0,md:!1}),v=By(),y=Vy(),f=(0,b.A)(),w=(0,Ae.l)(),{displayHighlights:T}=(0,je.Z0)(),[I,S]=(0,i.useState)([]),[E,C]=(0,i.useState)([]),x=(0,$.Ay)(),[Y,N]=(0,i.useState)(null),[R,_]=(0,i.useState)({}),F=n.subElements.find((e=>e.primary)),D=(0,i.useMemo)((()=>(0,A.cd)(n.subElements,y.selectedEventId)),[n.subElements,y.selectedEventId]),M=n.subElements.find((e=>(null===e||void 0===e?void 0:e.id)===(null===D||void 0===D?void 0:D.personId))),H=(0,i.useMemo)((()=>d?FT(n).filter((e=>e.id!==(null===M||void 0===M?void 0:M.id))):FT(n)),[n,d,null===M||void 0===M?void 0:M.id]),[z,V]=(0,i.useState)((()=>H.filter((e=>null===D||void 0===D?void 0:D.superElements.some((t=>t.id===e.id)))).map((e=>e.id)))),[B,G]=(0,i.useState)(z.length>=H.length),[U,K]=(0,i.useState)((()=>z.map((e=>({id:`person-${(0,$e.Vs)()}`,personId:e,displayLabel:(0,Ee.hA)({person:H.find((t=>t.id===e)),justOneName:!0})}))))),q=(0,i.useMemo)((()=>H.filter((e=>!z.includes(e.id))).map((e=>({primaryText:(0,Ee.hA)({person:e,justOneName:!0}),key:e.id,personId:e.id})))),[z,H]),[W,X]=(0,i.useState)({eventType:null===D||void 0===D?void 0:D.eventType,displayLabel:null===D||void 0===D?void 0:D.displayLabel}),Q=(0,i.useMemo)((()=>{var e;const t=xT(n),a=U.find((e=>e.personId===t.id)),i=null===(e=y.stepThree.eventCards.map((e=>(0,A.cd)(null===n||void 0===n?void 0:n.subElements,e.eventId))).filter((e=>null===e||void 0===e?void 0:e.primary))[0])||void 0===e?void 0:e.eventType;return MT({types:f.types,t:m,isPrimary:d,primaryEventType:a?i:null})}),[f.types,m,d,y.stepThree.eventCards,n,U]),[J,ee]=(0,i.useState)([...OT(D),..._T(D)]),{treatedFieldChipData:ie}=function(e,t,a,r,n){const o=(0,i.useMemo)((()=>n(e)),[e,n]),s=(0,i.useMemo)((()=>{const e=a.concat(r),i=e.map((e=>null===e||void 0===e?void 0:e.value.split(":")[0])),n=e.map((e=>{var a;return{...e,fieldType:null===(a=t.find((t=>(null===t||void 0===t?void 0:t.id)===(null===e||void 0===e?void 0:e.id))))||void 0===a?void 0:a.fieldType}})),s=t.filter((e=>e.added)).map((e=>e.fieldType));return null===o||void 0===o?void 0:o.map((e=>{var t;const a=i.includes(e.value)?e.value:null===(t=n.find((t=>(null===t||void 0===t?void 0:t.fieldType)===(null===e||void 0===e?void 0:e.value))))||void 0===t?void 0:t.fieldType;return{...e,disabled:Boolean(a)||s.includes(e.value)}}))}),[t,o,a,r]);return{treatedFieldChipData:s}}(f.types,J,I,E,Qe);const re=(0,ur.SV)({mode:"all",defaultValues:function(){let e={};if(n&&D){var t,a;const i=null===(t=D.subElements)||void 0===t?void 0:t.find((e=>"EVENT_TYPE"===e.fieldType)),r=(0,A.OV)(i)||(null===D||void 0===D?void 0:D.displayLabel),n=(null===D||void 0===D?void 0:D.eventType)||(0,A.OV)(i);e={[D.id]:{primaryText:r,key:n}};const o={};U.forEach((e=>{o[e.id]={primaryText:e.displayLabel,key:e.personId}}));const s={};return D&&(0,$e._A)(s,(null===D||void 0===D||null===(a=D.subElements)||void 0===a?void 0:a.flatMap((e=>null===e||void 0===e?void 0:e.subElements)).filter((e=>"FIELD"===(null===e||void 0===e?void 0:e.elementType))))||[]),Object.assign(e,o,s)}return{}}(),resolver:e=>{var t;let a={};re.clearErrors();const i=Object.entries(e),r=i.filter((e=>{let[t]=e;return t.includes("person")})),n=e=>{let[,t]=e;return!t||!(null!==t&&void 0!==t&&t.key)};let o=!1;!d&&(o=r.every(n),o&&r.forEach((e=>{let[t]=e;a[t]={type:"required",message:m("FormValidation.notEmpty","Field cannot be empty.")}})));const s=!(null!==(t=i.find((e=>{let[t]=e;return t===D.id}))[1])&&void 0!==t&&t.key);return s&&(a={...a,[D.id]:{type:"required",message:"Event Type is required"}}),{values:e,errors:a}}}),[ne]=(0,hr.FH)({name:[null===D||void 0===D?void 0:D.id],control:re.control}),se=(0,i.useCallback)((async e=>{await QT({eventId:D.id,dirtyFields:re.formState.dirtyFields,highlights:[...c.getHighlights().mainEditHighlights,...c.getHighlights().splitScreenEditHighlights],partitionKey:n.partitionKey,saveChangesFlag:p,values:e,userId:y.userId,zionSLSState:f,zionSlsDispatch:w,unlinkingStates:R,isPrimaryEvent:d,primaryPerson:F,currentTask:n,recordId:u,handleError:e=>v({type:"SET_ERROR",value:e}),handleSuccess:()=>{s(!0),l(D.id,[...c.getHighlights().mainEditHighlights,...c.getHighlights().splitScreenEditHighlights]),y.currentStep===My.STEP_FOUR&&r.open()}})}),[c,D.id,re.formState.dirtyFields,s,l,r,p,y.currentStep,y.userId,f,w,R,d,F,n,u,v]),le=e=>{e&&(v({type:"SET_ACTIVE_FIELD_ID",value:e}),c.setDisplayHighlights({mainPartitionKey:n.partitionKey,splitScreenPartitionKey:y.splitScreenPartitionKey,setMainZoom:!0,setSplitScreenZoom:Boolean(y.splitScreenPartitionKey),attachFilter:t=>t.fieldId===e,mainZoomFilter:t=>t.fieldId===e,splitScreenZoomFilter:t=>t.fieldId===e,isSmallScreen:g}))},de=(0,i.useCallback)((e=>{const t=e.filter((e=>"new-event-person"===e.key)).length,a=Array.from({length:t},(()=>{const e=`person-${(0,$e.Vs)()}`;return re.setValue(e,{key:"",primaryText:""},{shouldDirty:!0}),{id:e,personId:"",displayLabel:""}})),i=U.filter((t=>e.every((e=>e.id!==t.id))));i.forEach((e=>{e.personId&&V((t=>t.filter((t=>t!==e.personId)))),re.unregister(e.id)})),K((e=>{const t=[...e.filter((e=>!i.includes(e))),...a];if(0===t.length){const e=`person-${(0,$e.Vs)()}`;return re.setValue(e,{key:"",primaryText:""},{shouldDirty:!1}),[{id:e,personId:"",displayLabel:""}]}return t}))}),[U,re]),ce=(0,i.useCallback)((e=>{const t=Object.values(T.highlights).flatMap((e=>e.fieldId)).filter((t=>!e.includes(t)));lI({h:c,currentTask:n,eventIds:[],highlights:[...c.getHighlights().mainEditHighlights,...c.getHighlights().splitScreenEditHighlights],forceFieldIds:t,isSmallScreen:g,splitScreenPartitionKey:y.splitScreenPartitionKey})}),[T,c,n,y.splitScreenPartitionKey,g]),ue=(0,i.useCallback)(((e,t)=>{const a=J.filter((a=>e.every((e=>e.id!==a.id))&&t.every((e=>e.id!==a.id)))).map((e=>e.id));a.forEach((e=>{(e=>(0,A.cd)(n.subElements,e))(e)?re.setValue(e,"REMOVED",{shouldDirty:!0}):(re.unregister(e),re.unregister(`${e}-fieldType`),re.unregister(`${e}-superType`))})),ce(a),ee((e=>e.filter((e=>!a.includes(e.id)))));const i=e.filter((e=>!!e.key&&e.key.includes("new-field"))).map((e=>{const t=(0,$e.Vs)(),a=e.value.split(":")[0],i=e.elementTypes[0];return re.setValue(t,"",{shouldDirty:!0}),re.setValue(`${t}-fieldType`,a,{shouldDirty:!0}),re.setValue(`${t}-superType`,i,{shouldDirty:!0}),{displayLabel:e.label,fieldType:a,id:t,value:"",added:!0}}));ee((e=>[...e,...i]))}),[n,J,re,ce]),he=(0,i.useCallback)(((e,t)=>{de(e),ue(e,t)}),[de,ue]),pe=(0,i.useCallback)((e=>{let{event:t,index:a}=e;ee((e=>{const i=[...e];return i[a].value=t.target.value,i}))}),[]),me=(0,i.useCallback)((e=>({key:e.personId||"",primaryText:(0,Ee.hA)({person:H.find((t=>t.id===e.personId)),justoneName:!0})||""})),[H]),ge=(0,i.useCallback)((e=>{e&&e.key!==(null===D||void 0===D?void 0:D.eventType)&&(N({eventType:null===e||void 0===e?void 0:e.key,displayLabel:null===e||void 0===e?void 0:e.primaryText}),x.open())}),[x,D]),ve=(0,i.useRef)(!1),ye=e=>{const{name:t}=null===e||void 0===e?void 0:e.target;x.close(),ve.current=t},fe=[],be=n.subElements.flatMap((e=>e.id));(null===(t=D.superElements)||void 0===t?void 0:t.filter((e=>e.id.includes("1:1")))).forEach((e=>{be.includes(e.id)&&!fe.flatMap((e=>e.id)).includes(e.id)&&fe.push((0,A.cd)(n.subElements,e.id))}));const we=(0,i.useCallback)(((e,t)=>{_((a=>({...a,[e.id]:{...a[e.id],state:t,type:e.fieldType}})))}),[]),Te=(0,i.useCallback)((e=>{var t;return(null===(t=R[e.id])||void 0===t?void 0:t.state)||!1}),[R]),Ie=(0,i.useCallback)((e=>[...c.getHighlights().mainEditHighlights,...c.getHighlights().splitScreenEditHighlights].find((t=>t.fieldId===e))),[c]);dS("EditEventForm state values",{"Form values":re.getValues(),selectablePersonElements:H,autosuggestStateArray:U,personIdsInUse:z,personSuggestions:q,fieldValues:J,isPrimaryEvent:d});return(0,i.useEffect)((()=>{null===ne||void 0===ne||!ne.key||null!==Q&&void 0!==Q&&Q.find((e=>e.key===ne.key))||re.setValue(null===D||void 0===D?void 0:D.id,{key:"",primaryText:""})}),[Q,ne,re,null===D||void 0===D?void 0:D.id]),(0,k.Y)(pr.Ay,{methods:re,id:"edit-event",onSubmit:se},(0,k.Y)(gS,{autosuggestStateArray:U,getSelectedItem:me,personSuggestions:q,onPersonSuggestionSelected:e=>{let{event:t,autoSuggestIndex:a,oldPersonId:i}=e;if(t){const{personId:e}=t;V((t=>[...t.filter((e=>e!==i)),e])),K((t=>t.map(((t,i)=>i===a?{...t,personId:e,displayLabel:(0,Ee.hA)({person:H.find((t=>t.id===e)),justOneName:!0})}:t))))}else V((e=>e.filter((e=>e!==i)))),K((e=>e.map(((e,t)=>t===a?{...e,personId:"",displayLabel:""}:e))))},isPrimaryEvent:d,t:m}),(0,k.Y)(oe.A,null),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)("span",{css:cS},(0,k.Y)(mr.eP,{"data-testid":"type-autosuggest",clearOnClickAway:!0,clearable:!0,id:"event-type",name:null===D||void 0===D?void 0:D.id,label:m("family-review.addEvent.formLabel.type","Event Type"),placeholder:m("family-review.addEvent.formLabel.type","Event Type"),suggestions:Q,onSuggestionSelected:e=>{d&&ge(e)}})),(0,k.Y)(mI,{isAdding:!(e=>{const t=(0,A.OV)(e)||e.id;return Boolean([...c.getHighlights().mainEditHighlights].find((e=>e.fieldId===t)))})((null===(a=D.subElements)||void 0===a?void 0:a.find((e=>"EVENT_TYPE"===e.fieldType)))||D),editHighlightsOverlay:o,handleHighlightButtonClicked:()=>le(null===D||void 0===D?void 0:D.id)}),(0,k.Y)(ae.A,null),null===J||void 0===J?void 0:J.map(((e,t)=>{var a,i,r;let n=!1;const s=(0,A.rr)(null===f||void 0===f?void 0:f.images,null===(a=e.superElements)||void 0===a||null===(i=a.find((t=>{var a;return(null===(a=(0,A.rr)(null===f||void 0===f?void 0:f.images,null===t||void 0===t?void 0:t.id))||void 0===a?void 0:a.personId)===(null===e||void 0===e?void 0:e.personId)})))||void 0===i?void 0:i.id);if((null===s||void 0===s||null===(r=s.superElements)||void 0===r?void 0:r.length)>1)n=!0;else if("DATE"===(null===s||void 0===s?void 0:s.elementType)||"PLACE"===(null===s||void 0===s?void 0:s.elementType)){var l,d,c;const e=(0,A.rr)(null===f||void 0===f?void 0:f.images,null===s||void 0===s||null===(l=s.superElements)||void 0===l||null===(d=l[0])||void 0===d?void 0:d.id);(null===e||void 0===e||null===(c=e.superElements)||void 0===c?void 0:c.length)>1&&(n=!0)}return(0,k.Y)("span",{key:e.id,css:cS},(0,k.Y)(aS,{field:e,unlinkingState:[Te(e),t=>we(e,t)],editHighlightsOverlay:o,handleHighlightButtonClicked:le,hasSelectedHighlights:Ie,fieldType:"event",onFieldValueChange:e=>pe({event:e,index:t}),disableUnlinking:n}))})),(0,k.Y)(An,{lockSharedFields:!0,title:m("edit-index.add-fields.title","Add or Remove Fields"),chipData:[{title:m("family-review.edit-event.fieldSelector.common-fields","Most Common Fields"),data:[...ie.filter(mS).map((e=>({...e,key:`new-field:${(0,$e.Vs)()}`}))),{label:m("edit-index.chip.event-person","Event Person"),key:"new-event-person",disabled:B}],key:"commonFamilyReviewEventFields"},{title:m("edit-index.chips.event-fields.title","Event Fields"),data:ie.map((e=>({...e,key:`new-field:${(0,$e.Vs)()}`}))),key:"eventFields"}],fieldData:[...J.map((e=>({...e,label:e.displayLabel}))),...U.map((e=>({...e,label:`${m("family-review.addEvent.chip.person","Event Person ({personName})",{personName:e.displayLabel})}`})))],handleSelectionChange:(e,t)=>{S(e),C(t);let a=0;e.forEach((e=>{e.label.includes("Event Person")&&a++})),a===H.length?G(!0):G(!1)},handleSelection:he,overlay:h,unlinkingStates:R}),(0,k.Y)(ae.A,{size:"xs"}),(0,k.Y)(pS,{onClick:()=>{h.open()}}),(0,k.Y)(Ze.A,(0,j.A)({},x,{title:m("family-review.editEventForm.warningDialog.title","Are you sure?"),onClose:()=>{const e=ve.current;"keep"!==e&&e||(X(W),re.setValue(null===D||void 0===D?void 0:D.id,{key:null===D||void 0===D?void 0:D.eventType,primaryText:null===W||void 0===W?void 0:W.displayLabel},{shouldDirty:!0})),ve.current=!1}}),(0,k.Y)(O.x,{i18nKey:"family-review.editEvent.dialog.changePrimaryEventText"},(0,k.Y)(te.A,null,"The computer identified this as a ",(0,k.Y)("strong",null," ",{cD:null===W||void 0===W?void 0:W.displayLabel}," Record. "))),(0,k.Y)(O.x,{i18nKey:"family-review.editEvent.dialog.changePrimaryEventText2"},(0,k.Y)(te.A,null,"By changing the",(0,k.Y)("i",null," Primary Event Type,"),"you are indicating that it is a ",(0,k.Y)("strong",null," ",{td:null===Y||void 0===Y?void 0:Y.displayLabel}," Record"),".")),(0,k.Y)(te.A,null,m("family-review.editEvent.dialog.confirmChange","Please confirm this change.")),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{name:"change",onClick:ye,"data-testid":"change-to-button",linkName:"Edit Event Change Event Type"},m("family-review.editEvent.dialog.changeTo","Change to")," ",null===Y||void 0===Y?void 0:Y.displayLabel),(0,k.Y)(Z.A,{emphasis:"high",name:"keep",onClick:ye,"data-testid":"keep-as-button",linkName:"Edit Event Keep Event Type"},m("family-review.editEvent.dialog.keepAs","Keep as")," ",null===W||void 0===W?void 0:W.displayLabel)))))}function pS(e){let{onClick:t}=e;const[a]=(0,P.B)();return(0,k.Y)(Si.A,{"data-testid":"add-or-remove-fields",Icon:Ci.A,color:"yellow",emphasis:"low",onClick:t,linkName:"Edit Event Add or Remove Fields"},a("edit-index.add-fields.button","Add or Remove Fields"))}function mS(e){return["Date","City","Country","Place","Providence","State","Territory"].includes(e.label)}function gS(e){let{autosuggestStateArray:t,getSelectedItem:a,personSuggestions:i,onPersonSuggestionSelected:r,isPrimaryEvent:n,t:o}=e;return(0,k.Y)(uS.Provider,{value:{autosuggestStateArray:t,getSelectedItem:a,personSuggestions:i,onPersonSuggestionSelected:r,isPrimaryEvent:n,t:o}},n?(0,k.Y)(vS,null):(0,k.Y)(yS,null))}function vS(){return(0,k.Y)(fS,null)}function yS(){return(0,k.Y)(i.Fragment,null,(0,k.Y)(bS,{index:0}),(0,k.Y)(fS,{skipFirstIndex:!0}))}function fS(e){let{skipFirstIndex:t}=e;const{autosuggestStateArray:a,t:r}=(0,i.useContext)(uS),n=t?a.length-1:a.length,o=(0,i.useMemo)((()=>n>1?r("family-review.addEvent.expanderHeader","+ {totalOtherPersons} Other People",{totalOtherPersons:n}):r("family-review.addEvent.expanderHeader-singular","+ {otherPerson} Other Person",{otherPerson:n})),[n,r]);return n>0?(0,k.Y)(Ne.A,null,(0,k.Y)(Re.A,null,o),(0,k.Y)(Pe.A,null,a.map(((e,a)=>{if(t&&0===a)return null;const i=e.id?`person-autosuggest-${e.id}-${a}`:`person-autosuggest-${a}`;return(0,k.Y)(bS,{key:i,index:a})})))):null}function bS(e){let{index:t}=e;const{autosuggestStateArray:a,getSelectedItem:r,personSuggestions:n,onPersonSuggestionSelected:o,t:s}=(0,i.useContext)(uS);return(0,k.Y)(mr.eP,{name:a[t].id,key:a[t].id,selectedItem:r(a[t]),"data-testid":"person-autosuggest",clearOnClickAway:!0,clearable:!0,label:s("family-review.addEvent.formLabel.person","Event Person"),placeholder:s("family-review.addEvent.formLabel.person","Event Person"),suggestions:n,onSuggestionSelected:e=>o({event:e,autoSuggestIndex:t,oldPersonId:a[t].personId})})}function AS(e){let{confirmRemoveEventOverlay:t,removeEvent:a}=e;const[i]=(0,P.B)();return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:i("confirm-remove-overlay.title","Are you sure?")}),(0,k.Y)(te.A,{size:"sm"},i("confirm-remove-event-overlay.content","Once the event is removed, you will not be able to restore the information.")),(0,k.Y)(te.A,{size:"sm"},i("confirm-remove-event-overlay.content-2","Please confirm this change.")),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(at.A,{onClick:a,Icon:xi.A,"data-testid":"confirm-remove-button",linkName:"Confirm Remove Event Submit"},i("confirm-remove-event-overlay.remove-button","Remove Event")),(0,k.Y)(Z.A,{onClick:()=>{t.close()},linkName:"Confirm Remove Event Cancel","data-testid":"remove-event-cancel-button"},i("edit-index.cancel.button","Cancel")))))}function wS(e){let{editEventOverlay:t,stepOnePartTwoOverlay:a,reviewPersonEventsOverlay:r,currentTask:n,editHighlightsOverlay:o,setSaveUpdateCalled:s,setCardState:l,updateStepThreeData:d,navigateToStepOne:c,handleEventTypeChange:u}=e;const h=(0,bi.Y)(),[p]=(0,P.B)(),m=(0,L.u)("rip_sharedImageViewer_saveChanges"),g=Vy(),v=By(),y=(0,b.A)(),f=(0,Ae.l)(),w=(0,ci.Ay)()({default:!0,md:!1}),T=(0,$.Ay)(),I=(0,i.useMemo)((()=>(0,A.cd)(null===n||void 0===n?void 0:n.subElements,null===g||void 0===g?void 0:g.selectedEventId)),[null===n||void 0===n?void 0:n.subElements,null===g||void 0===g?void 0:g.selectedEventId]),S=null===I||void 0===I?void 0:I.id,E=(null===I||void 0===I?void 0:I.primary)||!1,C=n.subElements.find((e=>(null===e||void 0===e?void 0:e.id)===(null===I||void 0===I?void 0:I.personId))),x=C?(0,Ee.hA)({person:C,justOneName:!0}):"",Y=(0,i.useCallback)(((e,t)=>{const a=DT(n);l({elements:a,stepStateCards:g.stepThree.eventCards,key:"eventId",updateStepData:d,markThisCardCorrect:e,highlights:t})}),[n,l,g.stepThree.eventCards,d]),N=(0,i.useCallback)(((e,a)=>{t.close(),g.currentStep===My.STEP_THREE?Y(e,a):lI({h:h,currentTask:n,highlights:a||[...h.getHighlights().mainEditHighlights,...h.getHighlights().splitScreenEditHighlights],eventIds:[S],isSmallScreen:w,splitScreenPartitionKey:g.splitScreenPartitionKey})}),[h,t,Y,S,g,n,w]);return(0,k.Y)(i.Fragment,null,(0,k.Y)(hi.A,(0,j.A)({},t,{close:()=>{const e=h.clearEdits().mainHighlights;N(null,e)},title:g.currentStep===My.STEP_THREE?p("family-review.step4.heading","Life Events"):p("family-review.step5.heading","Final Review"),headingColor:"green",footer:(0,k.Y)(TS,{cancelButtonButtonClicked:()=>{const e=h.clearEdits().mainHighlights;N(null,e),g.currentStep===My.STEP_FOUR&&r.open()}})}),t.isOpen&&(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H2,{size:"H5"},(0,k.Y)(Mt.A,null,p("family-review.stepXof4","Step {step} of 4",{step:g.currentStep===My.STEP_THREE?"3":"4"})),E?p("family-review.editPrimaryEvent.heading","Edit Primary Event"):p("family-review.editEvent.heading","Edit Event")),(0,k.Y)(te.A,{size:"sm"},p("family-review.editEvent.content","Fix any incorrect fields or highlights. Add or remove fields as necessary.")),(0,k.Y)(ae.A,null),E&&(0,k.Y)(i.Fragment,null,(0,k.Y)(Ye.A,null,(0,k.Y)(Da.A,{startElement:(0,k.Y)(Da.A.Icon,{Icon:Xf.A}),primaryText:(0,k.Y)("span",null,(0,k.Y)(O.x,{i18nKey:"family-review.editEvent.change-primary"},(0,k.Y)("span",null,"This is the"),(0,k.Y)("strong",null,"Primary Event"),(0,k.Y)("span",null,"for the"),(0,k.Y)("strong",null,"Primary Person."),(0,k.Y)("span",null," To change "),(0,k.Y)(rn.A,{linkName:"Edit Event Back To Step 1",onClick:()=>{t.close(),v({type:"SET_CURRENT_STEP",value:_y.STEP_ONE}),c(),a.handleClick()}},"Go back to step 1")))})),(0,k.Y)(Bn.A,null,(0,k.Y)(Da.A,{overline:p("family-review.addEvent.formLabel.person","Event Person"),primaryText:x}))),(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(hS,{key:`${g.selectedEventId}-panel`,reviewPersonEventsOverlay:r,currentTask:n,editHighlightsOverlay:o,setSaveUpdateCalled:s,handleEditEventClose:N,handleEventTypeChange:u,isPrimaryEvent:E}),(0,k.Y)(ae.A,null),(0,k.Y)(Si.A,{"data-testid":"remove-event-button",color:"red",emphasis:"medium",onClick:T.handleClick,disabled:E,linkName:"Edit Event Remove"},p("edit-index.remove-event.button","Remove Event")))),(0,k.Y)(AS,{confirmRemoveEventOverlay:T,removeEvent:async()=>{try{await async function(e){let{partitionKey:t,personIds:a,eventId:i,zionSLSState:r,zionSlsDispatch:n,userId:o,saveChangesFlag:s}=e;const l=[];a.forEach((e=>{l.push({type:"REM_SUB",value:{superId:e.id,superPartitionKey:t,subId:i,subPartitionKey:t,elementType:"PERSON"}})})),await $T({dispatches:l,userId:o,taskTypeParam:"Family Review",appName:qe.uO,saveChangesFlag:s,zionSLSState:r,zionSlsDispatch:n})}({partitionKey:y.currentImageArk,personIds:I.superElements,eventId:null===I||void 0===I?void 0:I.id,zionSLSState:y,zionSlsDispatch:f,userId:g.userId,saveChangesFlag:m}),s(!0),N(),g.currentStep===My.STEP_FOUR&&r.open(),T.close()}catch(e){console.error(e)}}}))}function TS(e){let{cancelButtonButtonClicked:t}=e;const[a]=(0,P.B)();return(0,k.Y)(J.Ay,{alignX:"end"},(0,k.Y)(Z.A,{onClick:t,linkName:"Edit Event Cancel","data-testid":"edit-event-cancel-button"},a("edit-index.cancel.button","Cancel")),(0,k.Y)(Z.A,{emphasis:"high",linkName:"Edit Event Save","data-testid":"edit-event-save-button",form:"edit-event",type:"submit"},a("edit-index.save.button","Save")))}function IS(e){var t;let{currentTask:a,addNewEventOverlay:r,addFloatingEventOverlay:n,editEventOverlay:o,editPersonOverlay:s,reviewPersonEventsOverlay:l}=e;const d=(0,bi.Y)(),[c]=(0,P.B)(),u=(0,ci.Ay)()({default:!0,md:!1}),h=(0,b.A)(),p=Vy(),m=null===a||void 0===a||null===(t=a.subElements)||void 0===t?void 0:t.filter((e=>"PERSON"===(null===e||void 0===e?void 0:e.elementType))).filter((e=>(null===e||void 0===e?void 0:e.id)===p.selectedPersonId)).flatMap((e=>{var t;return null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t.filter((e=>"EVENT"===e.elementType))})).map((e=>({eventId:null===e||void 0===e?void 0:e.id,hasBeenReviewed:!0}))),g=()=>{l.close(),sI({h:d,mainPartitionKey:a.partitionKey,splitScreenPartitionKey:p.splitScreenPartitionKey,personIds:[p.selectedPersonId],isSmallScreen:u})};return(0,k.Y)(hi.A,(0,j.A)({},l,{close:()=>{g()},title:c("family-review.step5.heading","Final Review"),headingColor:"purple",footer:(0,k.Y)(J.Ay,{alignX:"end"},(0,k.Y)(Z.A,{onClick:()=>{g(),s.open()},linkName:"Review Person Events Cancel","data-testid":"review-person-events-cancel-button"},c("edit-index.cancel.button","Cancel")),(0,k.Y)(Z.A,{emphasis:"high",onClick:()=>{const e=a.subElements.filter((e=>"PERSON"===e.elementType)).flatMap((e=>null===e||void 0===e?void 0:e.id));dI({h:d,currentTask:a,highlights:[...d.getHighlights().mainEditHighlights,...d.getHighlights().splitScreenEditHighlights],personIds:e,isSmallScreen:u,splitScreenPartitionKey:p.splitScreenPartitionKey}),l.close()},linkName:"Review Person Events Save","data-testid":"review-person-events-save-button"},c("edit-index.save.button","Save")))}),l.isOpen&&(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H2,{size:"H5"},(0,k.Y)(Mt.A,null,c("family-review.stepXof4","Step {step} of 4",{step:"4"})),c("family-review.editEvents.heading","Edit Events")),(0,k.Y)(te.A,{size:"sm"},c("family-review.reviewPersonEventsPanel.content","Review the information below. Select the pencil icon to edit the information.")),(0,k.Y)(ae.A,{size:"sm"}),m.map(((e,t,r)=>{const n=(0,A.cd)(null===a||void 0===a?void 0:a.subElements,e.eventId);return(0,k.Y)("div",{key:`${e.eventId}-card`},n&&(0,k.Y)(i.Fragment,null,(0,k.Y)(UI,{event:n,currentTask:a,editEventOverlay:o,reviewPersonEventsOverlay:l}),t<r.length-1&&(0,k.Y)(ae.A,{size:"sm"})))})),(0,k.Y)(ae.A,{size:"sm"}),(0,k.Y)(Z.A,{Icon:Ci.A,onClick:()=>{l.close(),0!==(0,A.Wh)(h.images[0],"EVENT").length?n.open():r.open(),d.clearDisplay({all:!0})},"data-testid":"add-event",linkName:"Review Person Events Add Event"},c("edit-index.add-event.button","Add Event"))))}function SS(e){let{overlay:t,goBackToGive:a,getNewImage:i}=e;const[r]=(0,P.B)();return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:r("family-review.no-records-on-task-overlay.title","Whoops! There is nothing left to review")}),(0,k.Y)(te.A,{size:"sm"},(0,k.Y)(O.x,{i18nKey:"family-review.no-records-on-task-overlay.content"},(0,k.Y)("strong",null,"Get another image")," or ",(0,k.Y)("strong",null,"go back")," to Get Involved.")),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{onClick:a,"data-testid":"no-records-on-task-overlay-close-button",linkName:"No Records Go Back"},r("family-review.no-records-on-task-overlay.go-back-button","Go Back")),(0,k.Y)(Z.A,{onClick:i,"data-testid":"no-records-on-task-overlay-new-task-button",emphasis:"high",linkName:"No Records Get New Image"},r("family-review.no-records-on-task-overlay.new-image-button","Get Another Image")))))}function ES(e){let{editHighlightsOverlay:t,editEventOverlay:a,editPersonOverlay:r,currentTask:n}=e;const o=(0,bi.Y)(),[s]=(0,P.B)(),l=(0,ci.Ay)()({default:!0,md:!1}),d=Vy(),c=By(),u=d.currentStep===My.STEP_ONE,h=d.currentStep===My.STEP_TWO,p=d.currentStep===My.STEP_THREE,m=d.currentStep===My.STEP_FOUR,g=e=>{(p||m&&a.isOpen)&&(e=>{const t=(0,A.cd)(null===n||void 0===n?void 0:n.subElements,d.selectedEventId),a=t?[...RT(t),t.id]:Object.values(d.addNewEvent);lI({h:o,currentTask:n,highlights:e,forceFieldIds:a,isSmallScreen:l,splitScreenPartitionKey:d.splitScreenPartitionKey})})(e),(h||m&&r.isOpen)&&sI({h:o,mainPartitionKey:n.partitionKey,splitScreenPartitionKey:d.splitScreenPartitionKey,personIds:[d.selectedPersonId],highlights:e,isSmallScreen:l}),u&&sI({h:o,mainPartitionKey:n.partitionKey,splitScreenPartitionKey:d.splitScreenPartitionKey,personIds:[d.selectedPersonId],highlights:e,isSmallScreen:l})},v=()=>{t.close(),g([...o.getHighlights().mainEditHighlights,...o.getHighlights().splitScreenEditHighlights])},y=v;return(0,k.Y)(hi.A,(0,j.A)({},t,{close:y,headingColor:"yellow",title:d.isAddingHighlight?s("editHighlight.panelHeader.panelHeadingAdd","Add Highlight"):s("editHighlight.panelHeader.panelHeadingEdit","Edit Highlight"),footer:(0,k.Y)(J.Ay,{alignX:"end"},(0,k.Y)(Z.A,{onClick:v,linkName:"Edit Highlights Cancel","data-testid":"edit-highlights-cancel-button"},s("edit-index.cancel.button","Cancel")),(0,k.Y)(Z.A,{emphasis:"high",onClick:()=>{const e=o.stageEdits();t.close(),g([...e.mainEditHighlights,...e.splitScreenEditHighlights])},linkName:"Edit Highlights Save","data-testid":"edit-highlights-save-button"},s("edit-index.save.button","Save")))}),t.isOpen&&(0,k.Y)(i.Fragment,null,(0,k.Y)(re.H5,null,d.isAddingHighlight?s("editHighlight.panelHeader.panelHeadingAdd","Add Highlight"):s("editHighlight.panelHeader.panelHeadingEdit","Edit Highlight")),(0,k.Y)(te.A,{size:"sm"},s("editHighlight.panelHeader.panelCaption","Select the blue highlights or create your own")),(0,k.Y)(Z.A,{Icon:Ar.A,onClick:()=>{c({type:"SET_CREATING_RECT",value:!0})},"data-testid":"editHighlightTipsNewHighlightButton",linkName:"Edit Highlights New Highlight"},s("editHighlight.highlightTips.newHighlight","New Highlight")),(0,k.Y)(Zw,null)))}const kS=e=>{let{advancedRecordDetectionOverlay:t,onSkip:a,onProceed:r}=e;const[n,o]=(0,i.useState)(!1),{t:s}=(0,P.B)();return(0,k.Y)(Ze.A,(0,j.A)({},t,{title:(0,k.Y)(i.Fragment,null,(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(J.Ay,null,(0,k.Y)(un.A,{color:W.A.yellow90,background:W.A.yellow10}),(0,k.Y)(re.H5,null,s("advanced-record-detection.title","Advanced Record Detection")))),size:"md"}),(0,k.Y)("div",null,(0,k.Y)(te.A,{size:"md"},(0,k.Y)(O.x,{i18nKey:"advanced-record-detection.body-1"},"This record spans over ",(0,k.Y)("b",null,"more than one page"),". We recommend ",(0,k.Y)("b",null,"some indexing or genealogy")," experience to fix these families.")),(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(te.A,{size:"md"},s("advanced-record-detection.body-2","Proceed with this record?")),(0,k.Y)(ae.A,{size:"xxs"}),(0,k.Y)(_a.A,{label:(0,k.Y)(te.A,{size:"sm"},"Remember my choice"),name:"Remember my choice",checked:n,onChange:()=>o(!n)})),(0,k.Y)(et.Ay,null,(0,k.Y)(tt.A,null,(0,k.Y)(Z.A,{onClick:()=>{n&&(localStorage.setItem("rip:doNotShowAdvancedRecordDetectionModal","true"),localStorage.setItem("rip:advancedRecordDetectionChoice","skip")),a()},"data-testid":"skip-button",linkName:"skipButton"},s("advanced-record-detection.skip-button","Skip This Record")),(0,k.Y)(Z.A,{onClick:()=>{n&&(localStorage.setItem("rip:doNotShowAdvancedRecordDetectionModal","true"),localStorage.setItem("rip:advancedRecordDetectionChoice","proceed")),r()},emphasis:"high","data-testid":"proceed-button",linkName:"proceedButton"},s("advanced-record-detection.proceed-button","Proceed")))))},CS=(0,y.Ay)("FamilyReview"),xS={name:"1ylu0bo",styles:"display:flex;flex-direction:column;flex-grow:1;"};function YS(){var e;(0,K.O)({page_channel:"RIP",page_detail:"Family Review"});const{query:t}=(0,G.A)(),{task:a,placeCode:r,debugArk:n}=t,o=(0,i.useMemo)((()=>Boolean(n)),[n]),s=parseInt(r,10),[l]=(0,P.B)(),d=Vy(),c=By(),u=(0,b.A)(),h=(0,Ae.l)(),{displayHighlights:p,displayHighlightsApi:m,splitScreenDisplayHighlights:v,splitScreenDisplayHighlightsApi:y,recordDisplayHighlights:f,recordDisplayHighlightsApi:w,splitScreenRecordDisplayHighlights:T,splitScreenRecordDisplayHighlightsApi:I}=(0,je.Z0)(),[{controllerRef:S,stageRef:E,viewerRef:C},{set:x}]=(0,ga.Ay)(),[Y,{set:N}]=(0,ga.Ay)(),R=(0,L.u)("shared_dasProxy"),O=(0,L.u)("rip_familyReview_advancedRecordDetection"),_=(0,L.u)("rip_sharedImageViewer_feedback_FamilyReview"),F=(0,L.u)("rip_sharedImageViewer_saveChanges"),[D,M]=(0,i.useState)(!1),H=(0,i.useCallback)((e=>{e&&c({type:"SET_STATS_TRACKING_USER_ACTION",value:"fixed"}),M(e)}),[c,M]),[z,V]=(0,i.useState)(!1),B=(0,ci.Ay)()({default:!0,md:!1}),{accessFromPrison:U,isReady:q}=(0,LA.A)(),W=(0,yT.b)({mainDisplay:p,mainApi:m,splitScreenDisplay:v,splitScreenApi:y,mainRecordDisplay:f,mainRecordApi:w,splitScreenRecordDisplay:T,splitScreenRecordApi:I,setZoomPanCb:x,setSplitScreenZoomPanCb:N}),[X,Q]=(0,i.useState)(3),[J,Z]=(0,i.useState)([]),ee=(0,i.useMemo)((()=>J.map((e=>{let{signedUrl:t,apid:a}=e;return{src:t,alt:a,id:a}}))),[J]),te=(0,i.useMemo)((()=>J.length?J.map((e=>{let{partitionKey:t}=e;return t})):[]),[J]),{data:ie}=(0,aa.Zm)({fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],dispatchTypes:!0,lang:"en"}),{loading:re}=(0,fT.H)({imageArks:te,fsUserAgentChain:qe.b3["FS-User-Agent-Chain"],sort:!0,types:ie,dispatchImages:!0,enableHook:!0}),[ne,oe]=(0,i.useState)(null),se=(0,ma.A)({initiallyOpen:!0}),le=(0,$.Ay)(),de=(0,$.Ay)(),ue=(0,$.Ay)(),he=(0,$.Ay)(),pe=(0,$.Ay)(),me=(0,$.Ay)(),ge=(0,$.Ay)(),ve=(0,$.Ay)(),ye=(0,$.Ay)(),fe=(0,$.Ay)(),be=(0,$.Ay)(),we=(0,$.Ay)(),Te=(0,$.Ay)(),Ie=(0,$.Ay)(),Se=(0,$.Ay)();(0,i.useEffect)((()=>{(0,Wd.getUser)().then((e=>c({type:"SET_USER_ID",value:e.cisId})))}),[c]);const Ee=(0,i.useCallback)(((e,t)=>t||(0,xe.F)(e,R.isOn)),[R.isOn]),ke=(0,i.useCallback)((e=>{c({type:"SET_ERROR",value:e})}),[c]),Ce=localStorage.getItem("rip:doNotShowAdvancedRecordDetectionModal"),{hasShownModalForRecordId:Ye,setHasShownModalForRecordId:Ne}=function(){const e=(0,i.useRef)("unset"),t=(0,i.useCallback)((t=>{let{recordId:a}=t;return"unset"!==e.current&&e.current===a}),[]),a=(0,i.useCallback)((a=>{let{recordId:i}=a;e.current!==i&&(e.current=i,t.current=!0)}),[t]);return{hasShownModalForRecordId:t,setHasShownModalForRecordId:a}}(),Re=(0,i.useCallback)((e=>{var t,a,i,r;let{newTask:n,imageHighlights:o,recordHighlights:s}=e;O.isOn&&VT(n)&&(null!==Ce||Ye({recordId:null===n||void 0===n?void 0:n.id})||(Se.open(),Ne({recordId:null===n||void 0===n?void 0:n.id}))),oe(null===(t=xT(n))||void 0===t?void 0:t.id),sI({h:W,mainPartitionKey:n.partitionKey,splitScreenPartitionKey:d.splitScreenPartitionKey,personIds:[null===(a=xT(n))||void 0===a?void 0:a.id],highlights:o,recordHighlights:s,isSmallScreen:B}),c({type:"SET_SELECTED_PERSON_ID",value:null===(i=xT(n))||void 0===i?void 0:i.id});const l=FT(n);c({type:"SET_STEP_TWO_CARD_REVIEWS",value:l.map((e=>({personId:null===e||void 0===e?void 0:e.id,hasBeenReviewed:!1})))});const u=[],h=null===(r=n.subElements)||void 0===r?void 0:r.filter((e=>"PERSON"===e.elementType)).flatMap((e=>{var t;return null===e||void 0===e||null===(t=e.subElements)||void 0===t?void 0:t.filter((e=>"EVENT"===e.elementType))}));null===h||void 0===h||h.forEach((e=>{u.find((t=>t.eventId===(null===e||void 0===e?void 0:e.id)))||u.push({eventId:null===e||void 0===e?void 0:e.id,hasBeenReviewed:!1})}))}),[W,c,B,Ce,O.isOn,Se,d.splitScreenPartitionKey,Ye,Ne]),Pe=(0,i.useRef)(null),Oe=(0,i.useRef)(null),[_e,Fe]=(0,i.useState)(!1),[De,He]=(0,i.useState)(!1),Le=localStorage.getItem("rip:advancedRecordDetectionChoice"),[ze,Ve]=(0,i.useState)([]),Be=(0,i.useCallback)((e=>{let{data:t,images:a=[],currentIndex:i=0}=e;null!==t&&void 0!==t&&t.associatedImages&&Ve(t.associatedImages),null!==t&&void 0!==t&&t.slsImageInfo&&null!==t&&void 0!==t&&t.artifactId&&(Pe.current=t.artifactId,Oe.current=t.artifactUrl,a=(0,BA.D2)([{elements:t.slsImageInfo.elements,danglingSupers:t.slsImageInfo.danglingSupers,danglingElementTypes:t.slsImageInfo.danglingElementTypes,danglingElementDescriptions:t.slsImageInfo.danglingElementDescriptions,partitionKey:(0,na.XJ)(Pe.current)}]).images),(0,Me.OU)(a,ie,l("type-unknown.label","<Unknown Type>")),a.forEach((e=>{(0,Me.OU)(e.floatingElements,ie,l("type-unknown.label","<Unknown Type>"))}));const r=[],n=(0,A.Qc)(a[0],"RECORD"),s=n.filter((e=>{var t;const a=null===(t=e.subElements)||void 0===t?void 0:t.filter((e=>"PERSON"===e.elementType));return!(null===a||void 0===a||!a.length)||(r.push(e),!1)})).filter((e=>{var t;const a=null===(t=e.subElements)||void 0===t?void 0:t.filter((e=>"PERSON"===e.elementType)),i=null===a||void 0===a?void 0:a.filter((e=>!e.isDangling)),n=null===a||void 0===a?void 0:a.filter((e=>e.isDangling));return!(!i.length&&n.length)||(r.push(e),!1)})).filter((e=>{const t=e.subElements.filter((e=>"PERSON"===e.elementType)).filter((e=>e.isDangling));return!((null===t||void 0===t?void 0:t.length)>0&&"skip"===Le&&O.isOn)||(console.error("This image contains records that have persons on two images. These persons will be skipped."),!1)})).filter((e=>{var t,a;return!!o||!(null!==(t=e.reviewAttribution)&&void 0!==t&&null!==(a=t.userId)&&void 0!==a&&a.includes("cis"))})).map((e=>({...e,artifactUrl:Ee(e.partitionKey,Oe.current)})));if(r.length){const e=[];r.forEach((t=>{e.push({type:"SET_REVIEW_ATTRIBUTION",value:{partitionKey:t.partitionKey,id:null===t||void 0===t?void 0:t.id,elementType:"RECORD",sequenceNumber:1,attributionArg:{}}})}));(async()=>{try{await $T({dispatches:e,updateState:!0,userId:d.userId,taskTypeParam:"Family Review",appName:qe.uO,saveChangesFlag:F,zionSLSState:u,zionSlsDispatch:h})}catch(t){yi.A.log("Failed to save skipped Family Review records.",t)}})()}if(s.length){const e=(0,ia.mV)({element:a[0]}),t=(0,ia.L2)(a[[0]]);W.setHighlights({mainHighlights:e,mainRecordHighlights:t,setStaticCopy:!0,setEditCopy:!0});const r=(0,na.XJ)(Pe.current);return z||(async e=>{XA(e,qe.uO).then((e=>{Fe(e),V(!0)}))})(s),h({type:"SET_DATA",value:{images:a,currentImageArk:r}}),Re({newTask:s[i],imageHighlights:e,recordHighlights:t}),CS("Family Review Records: ",{recordElements:n,filteredRecordElements:s}),s}CS("Family Review Records: ",{recordElements:n,filteredRecordElements:s});return(async()=>{try{await lA(Pe.current,!0,"Family Review")}catch(e){console.error("taskCompleted failed.",e)}})(),Ie.handleClick()}),[F,d.userId,u,o,O.isOn,Le,Re,ie,Ee,W,z,Ie,l,h]),Ge=(0,i.useCallback)((()=>{le.handleClick()}),[le]),{continueWithNewGoal:Ue,goToNextTask:Ke,skipTask:$e,updateTaskList:We,fetchTaskData:Xe,currentTask:Qe,loading:Je,currentIndex:Ze}=Yw({currentTaskUpdated:Re,generateTasks:Be,goalDefault:1,goalCacheKey:"familyReviewTaskLengthPreference",onGoalCompleted:Ge,setError:e=>c({type:"SET_ERROR",value:e}),types:ie}),[et,tt]=(0,i.useState)(!1);(0,i.useEffect)((()=>{if(u.images.length&&ze.length&&!J.length&&Z(ze),J.length&&!re&&u.images.length&&!1===et&&null!==Qe&&void 0!==Qe&&Qe.partitionKey){const e=J[0].partitionKey;c({type:"SET_SPLIT_SCREEN_PARTITION_KEY",value:e}),c({type:"SET_SPLIT_SCREEN_FOCUSED_INDEX",value:0});const{splitScreenHighlights:t}=W.init({splitScreenImageArk:e}),{mainEditHighlights:a}=W.getHighlights();sI({h:W,personIds:[ne],highlights:[...t,...a],isSmallScreen:B,mainPartitionKey:Qe.partitionKey,splitScreenPartitionKey:e});const i=Be({images:u.images,currentIndex:Ze});We({newTaskList:i}),tt(!0)}}),[W,J,ze,c,Qe,u,B,ne,re,et,y,h,Be,We,Ze]),Xi(null===u||void 0===u?void 0:u.images,null===Qe||void 0===Qe?void 0:Qe.id).then((e=>{He(e)}));const at=(0,i.useCallback)(((e,t,a)=>{c({type:"RESET_STEP_TWO"}),c({type:"SET_STEP_TWO_DATA",value:{relationshipCards:e,selectedPersonId:t.personId}}),sI({h:W,highlights:a,mainPartitionKey:Qe.partitionKey,splitScreenPartitionKey:d.splitScreenPartitionKey,personIds:[null===t||void 0===t?void 0:t.personId],isSmallScreen:B})}),[Qe,c,B,W,d.splitScreenPartitionKey]),rt=(0,i.useCallback)(((e,t,a)=>{c({type:"RESET_STEP_THREE"}),c({type:"SET_STEP_THREE_DATA",value:{eventCards:e,selectedEventId:null===t||void 0===t?void 0:t.eventId}}),lI({h:W,currentTask:Qe,highlights:a||[...W.getHighlights().mainEditHighlights,...W.getHighlights().splitScreenEditHighlights],eventIds:[null===t||void 0===t?void 0:t.eventId],isSmallScreen:B,splitScreenPartitionKey:d.splitScreenPartitionKey})}),[Qe,c,B,W,d]),nt=(0,i.useCallback)((e=>{let{elements:t,stepStateCards:a,key:i,updateStepData:r,markThisCardCorrect:n,highlights:o}=e;const s=[];if(t){t.forEach((e=>{var t;s.find((t=>t.eventId===(null===e||void 0===e?void 0:e.id)))||s.push({[i]:null===e||void 0===e?void 0:e.id,hasBeenReviewed:(null===e||void 0===e?void 0:e.id)===n||(null===(t=a.find((t=>t[i]===(null===e||void 0===e?void 0:e.id))))||void 0===t?void 0:t.hasBeenReviewed)||!1})}));const e=s.find((e=>!e.hasBeenReviewed))||s[s.length-1];r(s,e,o)}}),[]),ot=(0,i.useCallback)(((e,t)=>{const a=FT(Qe);nt({elements:a,stepStateCards:d.stepTwo.relationshipCards,key:"personId",updateStepData:at,markThisCardCorrect:e,highlights:t})}),[Qe,nt,d.stepTwo.relationshipCards,at]),st=(0,i.useCallback)((()=>{me.close(),pe.close(),he.close(),ue.close(),c({type:"SET_CURRENT_STEP",value:My.STEP_ONE})}),[c,me,pe,he,ue]),lt=(0,i.useCallback)((()=>{le.handleClick(),st(),Ue(1)}),[le,Ue,st]),dt=()=>{c({type:"SET_CURRENT_STEP",value:My.STEP_ONE}),he.close(),$e()};return(0,i.useEffect)((()=>{if(D){const e=Be({images:u.images,currentIndex:Ze});We({newTaskList:e}),H(!1)}}),[Ze,Be,We,D,u.images,H]),CS({artifactUrl:null===Qe||void 0===Qe?void 0:Qe.artifactUrl,currentTask:Qe,state:d,zionSlsState:u,saveUpdateCalled:D}),(0,k.Y)(i.Suspense,{fallback:(0,k.Y)(g.A,null)},(0,k.Y)(bT.I,{value:W},(0,k.Y)(Ot.A,null,l("family-review.title","Family Review")),Qe&&(null===Qe||void 0===Qe?void 0:Qe.id)&&(0,k.Y)(ce.A,(0,j.A)({title:l("family-review.infoSheetTitle","Identify Primary Person")},se,{nonClosable:!0,size:"md",headingColor:"purple",elevated:!0}),(0,k.Y)(eI,{currentTask:Qe,loading:Je,setStepTwoData:ot,stepTwoOverlay:he,stepOnePartTwoOverlay:ue,skipTask:$e,saveNotAName:cA,taskType:a,hasImagePermission:_e,handleGoToNextRecordAndResetStep:dt,setSaveUpdateCalled:H}),(0,k.Y)(bI,{addNewPersonOverlay:ge,currentTask:Qe,goToNextStep:ot,stepOnePartTwoOverlay:ue,stepTwoOverlay:he,editHighlightsOverlay:fe,setSaveUpdateCalled:H,hasImagePermission:_e,handleGoToNextRecordAndResetStep:dt}),(0,k.Y)(EI,{currentTask:Qe,handleNewPerson:()=>{ge.open(),W.clearDisplay({all:!0})},handleGoToNextRecordAndResetStep:dt,stepTwoOverlay:he,stepThreeOverlay:pe,editPersonOverlay:be,hasImagePermission:_e,setCardState:nt,updateStepThreeData:rt}),(0,k.Y)(qI,{currentTask:Qe,addNewEventOverlay:ve,addFloatingEventOverlay:ye,stepThreeOverlay:pe,stepFourOverlay:me,editEventOverlay:Te,reviewPersonEventsOverlay:we,handleGoToNextRecord:Ke,hasImagePermission:_e}),(0,k.Y)(XI,{currentTask:Qe,handleOpenFinishedOverlay:()=>{le.handleClick()},getAllPersons:FT,stepFourOverlay:me,editPersonOverlay:be}),(0,k.Y)(eS,{addNewPersonOverlay:ge,currentTask:Qe,editHighlightsOverlay:fe,setSaveUpdateCalled:H}),(0,k.Y)(sS,{currentTask:Qe,setSaveUpdateCalled:H,addNewEventOverlay:ve,editHighlightsOverlay:fe,editEventOverlay:Te}),(0,k.Y)(lS,{addFloatingEventOverlay:ye,addNewEventOverlay:ve,currentTask:Qe,editEventOverlay:Te,setSaveUpdateCalled:H}),(0,k.Y)(nS,{currentTask:Qe,editPersonOverlay:be,editHighlightsOverlay:fe,stepTwoOverlay:he,stepOnePartTwoOverlay:ue,reviewPersonEventsOverlay:we,setSaveUpdateCalled:H,setStepTwoData:ot}),(0,k.Y)(wS,{currentTask:Qe,editEventOverlay:Te,stepOnePartTwoOverlay:ue,reviewPersonEventsOverlay:we,editHighlightsOverlay:fe,setSaveUpdateCalled:H,setCardState:nt,updateStepThreeData:rt,navigateToStepOne:st}),(0,k.Y)(IS,{addNewEventOverlay:ve,addFloatingEventOverlay:ye,currentTask:Qe,editEventOverlay:Te,editPersonOverlay:be,reviewPersonEventsOverlay:we}),(0,k.Y)(ES,{currentTask:Qe,editHighlightsOverlay:fe,editEventOverlay:Te,editPersonOverlay:be}),Se.isOpen&&O.isOn&&(0,k.Y)(kS,{advancedRecordDetectionOverlay:Se,onSkip:()=>{$e(),Se.close()},onProceed:()=>{Se.close()}})),(0,k.Y)("div",{css:xS},(0,k.Y)(ae.A,{size:"nano"}),(0,k.Y)(TT,{loading:Je,personId:null===(e=xT(Qe))||void 0===e?void 0:e.id,recordDetails:De,handwriting:!0,social:!0,welcomeOverlay:de,title:l("family-review.title","Family Review"),setStepTwoData:ot,stepTwoOverlay:he,stepOnePartTwoOverlay:ue,skipTask:$e,saveNotAName:cA,taskType:a,hasImagePermission:_e,handleGoToNextRecordAndResetStep:dt,setSaveUpdateCalled:H}),(0,k.Y)(ae.A,{size:"nano"}),(null===Qe||void 0===Qe?void 0:Qe.artifactUrl)&&(0,k.Y)(Ny,{appName:"FamilyReview",mainImageTitleText:l("family-review.simple-mainImageTitle","Main Image"),splitScreenTitleText:l("family-review.splitScreenTitle","View Only: Image {currentIndex}",{currentIndex:d.splitScreenFocusedIndex+1}),MainImageViewer:(0,k.Y)(Aa.A,{controllerRef:S,stageRef:E,viewerRef:C,initialZoom:vA(W.getAttachedMainRects()),initialPanX:gA(W.getAttachedMainRects()).panX,initialPanY:gA(W.getAttachedMainRects()).panY,alt:"",src:Qe.artifactUrl,drawingMode:d.creatingRect,onRectangleDrawn:e=>{(0,ha.pH)(e,[Qe],Qe.partitionKey,d,m,c)},prompt:d.creatingRect?l("draw-highlight.body","Click anywhere and drag to create a highlight"):""},(0,k.Y)(uT,{showEditHighlights:fe.isOpen})),SplitScreenImageViewer:(0,k.Y)($t.A,(0,j.A)({},Y,{alt:"",images:ee,showImageGrid:d.showImageGrid,setShowImageGrid:e=>c({type:"SET_SHOW_IMAGE_GRID",value:e}),focusedIndex:d.splitScreenFocusedIndex||0,setFocusedIndex:e=>{var t;c({type:"SET_SPLIT_SCREEN_FOCUSED_INDEX",value:e}),c({type:"SET_SPLIT_SCREEN_PARTITION_KEY",value:null===J||void 0===J||null===(t=J[e])||void 0===t?void 0:t.partitionKey})},columnCount:X,setColumnCount:Q,ImageComponent:Wt.A,thinganated:!0}),(0,k.Y)(uT,{showEditHighlights:fe.isOpen,forSplitScreen:!0})),splitScreenRibbonReady:et,SplitScreenRibbonViewer:(0,k.Y)(Jt.A,{images:ee,focusedIndex:d.splitScreenFocusedIndex||0,setFocusedIndex:e=>{var t;c({type:"SET_SPLIT_SCREEN_FOCUSED_INDEX",value:e}),c({type:"SET_SPLIT_SCREEN_PARTITION_KEY",value:null===J||void 0===J||null===(t=J[e])||void 0===t?void 0:t.partitionKey})}}),splitScreenIsOpen:O.isOn&&VT(Qe)})),(0,k.Y)(it,{error:d.error,setError:ke}),(0,k.Y)(ZI,{welcomeOverlay:de}),(0,k.Y)(QI,{finishedOverlay:le,placeCode:s,currentTask:Qe,handleContinue:lt,goBackToGive:()=>WA(U&&q,"familyReview"),hasImagePermission:_e}),(0,k.Y)(SS,{overlay:Ie,goBackToGive:async()=>{WA(U&&q,"familyReview")},getNewImage:async()=>{Ie.close(),Xe()}}),!B&&(0,k.Y)(du.Ay,{url:"//w.usabilla.com/fa948ca83eea.js",hideOnMobile:!0,mobileBreakpoint:"md"}),!B&&_.isOn&&(0,k.Y)($f,null)))}function NS(){const[e,t]=(0,i.useState)(""),{query:a}=(0,G.A)();return(0,i.useEffect)((()=>{!async function(){try{await sA({placeCode:a.placeCode||"158",language:"en",isFirstRequest:!1,taskType:"Family Review",surname:"",action:"EnhanceImageRecords"}),t("Successfully got a task")}catch(e){t("Failed to get task: ",e)}}()}),[]),(0,k.Y)("div",null,e)}function RS(){const e=(0,L.u)("rip_sharedImageViewer_fullNameCorrectionRefactor"),{query:t}=(0,G.A)(),{task:a}=t;return(0,k.Y)(i.Fragment,null,"Name Correction"===a&&(0,k.Y)(_A,null,(0,k.Y)(iw,null)),"Full Name Review"===a&&(0,k.Y)(Tw,null,(0,k.Y)(i.Fragment,null,e.isOn?(0,k.Y)(Xw,null):(0,k.Y)(gT,null))),"Family Review"===a&&(0,k.Y)(di.A,{FallbackComponent:qf,errorHandler:(e,t)=>{var a,i;console.error("well, sorry about the bad news",e,t),(0,$e.Yt)(e,null,{codeId:1e3,status:null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.status,responseBody:null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.data,...t})}},(0,k.Y)(zy,null,(0,k.Y)(YS,null))),"Get New Task"===a&&(0,k.Y)(NS,null))}function PS(e){let{children:t,...a}=e;const{signedIn:i,userLoading:r}=(0,Wd.useUser)(),{accessFromPrison:n,isReady:o}=(0,LA.A)();return o&&n?(0,k.Y)(z.A,a,t):(i||r||window.location.replace(`/auth/familysearch/login?display=lite&returnUrl=${encodeURIComponent(window.location)}`),o&&!n?(0,k.Y)(B.A,null):null)}const OS=e=>{let{children:t}=e;const[{controllerRef:a,stageRef:i,viewerRef:r},{set:n}]=(0,ga.Ay)(),{displayHighlights:o,displayHighlightsApi:s,splitScreenDisplayHighlights:l,splitScreenDisplayHighlightsApi:d,recordDisplayHighlights:c,recordDisplayHighlightsApi:u,splitScreenRecordDisplayHighlights:h,splitScreenRecordDisplayHighlightsApi:p}=(0,je.Z0)(),m=(0,yT.b)({mainDisplay:o,mainApi:s,mainRecordDisplay:c,mainRecordApi:u,splitScreenDisplay:l,splitScreenApi:d,splitScreenRecordDisplay:h,splitScreenRecordApi:p,setZoomPanCb:n});return(0,k.Y)(bT.I,{value:{...m,zoomPanRefs:{controllerRef:a,stageRef:i,viewerRef:r}}},t)},_S=i.lazy((()=>a.e(29869).then(a.bind(a,29869)))),FS=i.lazy((()=>a.e(2835).then(a.bind(a,2835))));const DS=function(e){let{setCollectionId:t,imagePermission:a}=e;const{accessFromPrison:r,isInmate:n,isReady:o}=(0,LA.A)(),{pathname:s}=(0,D.zy)(),{collectionId:l}=Y();return(0,i.useEffect)((()=>{t(l)}),[l,t]),o&&"/not-authorized"!==s&&(r&&!n||n&&!r)?(0,k.Y)(D.rd,{to:"/not-authorized"}):(0,k.Y)(je.v5,null,(0,k.Y)(OS,null,(0,k.Y)(D.dO,null,(0,k.Y)(z.A,{exact:!0,path:"/ark\\:/61903/:arkPath"},(0,k.Y)(Pr.Ay,null,(0,k.Y)(je.Ay,null,(0,k.Y)(Cb,{imagePermission:a})))),(0,k.Y)(V.A,{exact:!0,path:"/tasks",component:RS}),(0,k.Y)(PS,{exact:!0,path:"/corrections",component:RS}),(0,k.Y)(z.A,{path:"/cacheboard",component:_S}),(0,k.Y)(z.A,{path:"/not-authorized"},(0,k.Y)(i.Suspense,{fallback:null},(0,k.Y)(FS,null))),(0,k.Y)(z.A,{component:B.A}))))};const MS=e=>{let{apolloClient:t}=e;const[a]=(0,P.B)(),r=(0,D.zy)(),n=(0,$e._I)(),[s]=(0,_.r)("rmsEndpointAuthEx"),[l,d]=(0,i.useState)(""),[c,u]=(0,i.useState)(null),[h]=(0,N.usePermission)("ThemisPrmDiscoveryCenter","CrxCtxPublicAccess"),[p]=(0,N.usePermission)("ThemisPrmAffiliate","CrxCtxPublicAccess"),{rip_sharedImageViewer_imagePermissionAlertBanner:m}=(0,L.h)(["rip_sharedImageViewer_imagePermissionAlertBanner"]),g=r.pathname.split("/").pop(),[v]=uy();s&&(t.link.options.headers.rmsendpointauthex="true"),t.link.options.headers["User-Locale"]=o.i18n.language;const{alertBannerProps:y,showBanner:f}=function(e){let{collectionId:t}=e;const[a,r]=(0,i.useState)(!0),[n]=(0,P.B)(),o=E[t],s=(0,L.u)(null===o||void 0===o?void 0:o.flag),l=n("index.alert.banner-message","Due to some issues, this record collection is unavailable for edits.");return{alertBannerProps:{message:null!==s&&void 0!==s&&s.isOn?null!==o&&void 0!==o&&o.alertMessageKey&&null!==o&&void 0!==o&&o.alertMessageValue?n(o.alertMessageKey,o.alertMessageValue):l:n("index.alert.banner-message","Due to some issues, this record collection is unavailable for edits."),confirmText:n("index.1931.Census.alert.confirm-button","Confirm"),dismissText:n("index.1931.Census.alert.dismiss-button","Dismiss"),onConfirm:e=>e(),onDismiss:e=>e(),open:a,setOpen:r},showBanner:null===s||void 0===s?void 0:s.isOn}}({collectionId:l}),b=function(e){let{message:t,confirmText:a,dismissText:r,...n}=e;const[o,s]=(0,i.useState)(!0);return{message:t,confirmText:a,dismissText:r,onConfirm:()=>s(!1),onDismiss:()=>s(!1),open:o,setOpen:s,...n}}({message:(0,k.Y)(O.x,{i18nKey:"index.alert.banner.image.permission",defaults:"This image and the information that was indexed is only available in a <FSLink>FamilySearch center</FSLink> or <AffLink>affiliated library</AffLink>.",components:{FSLink:(0,k.Y)(M.Ay,{to:(0,H.i6)("https://www.familysearch.org/centers/about"),target:"_blank",rel:"noopener noreferrer"}),AffLink:(0,k.Y)(M.Ay,{to:(0,H.i6)("https://www.familysearch.org/library/"),target:"_blank",rel:"noopener noreferrer"})}}),dismissText:a("index.1931.Census.alert.dismiss-button","Dismiss"),type:"warning"});let A=f,w=y;(p||h)&&(null!==c&&void 0!==c&&c.includes("ThemisPrmAffiliate")||null!==c&&void 0!==c&&c.includes("ThemisPrmFhlc"))&&m.isOn&&(A=!0,w=b);return(0,i.useEffect)((()=>{(async()=>{try{const e=await(0,xe.ns)(g);if(!e.data)return void u(null);u(e.data)}catch(e){u(null)}})()}),[g]),(0,k.Y)(R.Ay,{analytics:!0,alertBannerProps:A&&w,footer:{hidden:!0},header:{hidden:Boolean(n)||v},fullScreen:!0},(0,k.Y)(F.A,{fullWidth:!0,noScroll:!0},(0,k.Y)(DS,{setCollectionId:d,imagePermission:c})))};u.z_&&n.T((0,u.ez)({dsn:u.z_})),(0,o.setAppLocales)(o.essentialLocales);const HS=h.X4?new URL(h.X4).pathname:"",LS=new l.R({cache:new d.D({typePolicies:{ImageViewerRecordType:{keyFields:["apolloId"]}}}),headers:{Authorization:`Bearer ${(0,m.u0)()}`,"Timezone-Offset":(new Date).getTimezoneOffset()},uri:"/records/images/orchestration/"});r.render((0,k.Y)(i.Suspense,{fallback:(0,k.Y)(g.A,null)},(0,k.Y)(p.Ay,{mockFlags:undefined},(0,k.Y)(f.P,null,(0,k.Y)((()=>(0,k.Y)(i.StrictMode,null,(0,k.Y)(c.X,{client:LS},(0,k.Y)(v.ni,null,(0,k.Y)(x,null,(0,k.Y)(s.A,{basename:HS},(0,k.Y)(MS,{apolloClient:LS}))))))),null)),!1)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}))},81683:(e,t,a)=>{"use strict";a.d(t,{mO:()=>v,iG:()=>s,bz:()=>n,k3:()=>l,kg:()=>c,rE:()=>h,ig:()=>p,s3:()=>g,Oz:()=>m.A});var i=a(6703),r=a(4629);function n(e){return e.filter((e=>!e.toLowerCase().includes("tomato"))).map(((e,t)=>{try{return{srcSet:{0:(0,r.jx)(e,"thumb_p200.jpg"),500:(0,r.jx)(e,"image.xml")},alt:e,id:e,ark:(0,i.XJ)(e),index:t}}catch(a){return console.error(`Failed to encode ARK for APID: ${e}`,a),null}})).filter((e=>null!==e))}function o(e){var t;const a="IMAGES:";return((null===e||void 0===e||null===(t=e.values)||void 0===t?void 0:t.find((e=>e.includes(a))))||"").replace(a,"")}function s(e){var t,a;const i=null===e||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.find((e=>"auditResults"===e.name)),r=null===e||void 0===e||null===(a=e.properties)||void 0===a?void 0:a.find((e=>"auditFeedback"===e.name));return i?i.values.map((e=>function(e,t){var a;if(!e)return null;const[i,r]=function(e){const t=e.indexOf(":");if(-1===t)return["",e];return[e.slice(0,t),e.slice(t+1)]}(e),n={0:"meetsQualityStandards",1:"informationObscured",2:"missingPages",3:"wrongCaptureMode",4:"motionBlurOrOutOfFocus",5:"overUnderExposed",6:"improperlyCropped",7:"extraMaterialInFrame",8:"wrongImageOrientation",9:"skewed",10:"reflections",11:"duplicate",12:"defective",13:"other",14:"multiple"};return{issue:null!==(a=null===n||void 0===n?void 0:n[i])&&void 0!==a?a:"other",reason:r,feedback:o(t)}}(e,r))):null}function l(e,t){var a;return[].concat(null===t||void 0===t||null===(a=t.find((t=>t.name===e)))||void 0===a?void 0:a.values).filter(Boolean)}var d=a(89093);function c(e){var t,a,i;let r=null!==(t=null===e||void 0===e||null===(a=e.metadata)||void 0===a?void 0:a.title)&&void 0!==t?t:"";return r&&null!==e&&void 0!==e&&null!==(i=e.coverages)&&void 0!==i&&i.length&&(r+=": "),null!==e&&void 0!==e&&e.coverages&&e.coverages.forEach(((e,t)=>{var a;null!==(a=e.place)&&void 0!==a&&a.name&&(t>0&&(r+=" | "),r+=`${e.place.name}.`,e.recordTypes&&e.recordTypes.forEach(((e,t)=>{var a,i;(t>0&&(r+=","),e.name&&(r+=` ${e.name}`),null!==(a=e.date)&&void 0!==a&&a.length)&&(r+=` ${null===(i=e.date)||void 0===i?void 0:i.map((e=>(0,d.A)(e.fromTimestamp,e.toTimestamp,d.z.formatted))).join(", ")}`)})))})),r}var u=a(26774);function h(e){let{dividerOffsets:t,removeDivider:a}=e;const[i]=(0,u.B)();return null===t||void 0===t?void 0:t.map(((e,t)=>({id:e,offset:e,title:i("ImageBrowserViewer.itemNumber",`Item ${t+1}`),action:t>0&&a?{text:i("ImageBrowserViewer.removeDivider","Remove Divider"),onClick:()=>a(e)}:void 0})))}const p={DIVIDE:"DIVIDE",METADATA:"METADATA",METADATA_ALL:"METADATA_ALL"};var m=a(43494);function g(e,t,a,i){var r,n;if(e!==(null===a||void 0===a||null===(r=a.internalFields)||void 0===r?void 0:r.apid)||t!==(null===a||void 0===a||null===(n=a.internalFields)||void 0===n?void 0:n.ark)){i({type:"SET_INTERNAL_FIELDS",value:{...null===a||void 0===a?void 0:a.internalFields,apid:e,ark:t}})}}async function v(e,t){var a,i,r;if(null===t||void 0===t||!t.id)return[];return Array.isArray(null===t||void 0===t?void 0:t.currentWorkflowActions)?t.currentWorkflowActions:null===(a=await e({variables:{groupIdOrArkId:null===t||void 0===t?void 0:t.id}}))||void 0===a||null===(i=a.data)||void 0===i||null===(r=i.group)||void 0===r?void 0:r.currentWorkflowActions}},89093:(e,t,a)=>{"use strict";a.d(t,{A:()=>o,z:()=>n});var i=a(48451),r=a(12477);const n={formatted:"formatted",formattedFullWithTime:"formattedFullWithTime",formattedCompactWithTime:"formattedCompactWithTime",formattedCompactWithHourMinute:"formattedCompactWithHourMinute",formattedMinimalWithTime:"formattedMinimalWithTime"};function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2?arguments[2]:void 0;const n=null!==e?new Date(e).toISOString():null,o=null!==t?new Date(t).toISOString():null,s=e?new Date(e):null,l=t?new Date(t):null,d=i.i18n.language;if("formatted"===a)return(0,r.Zy)({fromISOString:n,toISOString:o,locale:d});const c={formattedFullWithTime:"FULL_WITH_TIME",formattedCompactWithTime:"COMPACT_WITH_TIME",formattedCompactWithHourMinute:"COMPACT_WITH_HOUR_MINUTE",formattedMinimalWithTime:"MINIMAL_WITH_TIME"},u=null===c||void 0===c?void 0:c[a];return u?(0,r.ou)({fromDate:s,toDate:l,format:u,locale:d}):new Error(`The date format ${a} does not exist`)}},93422:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});const i={fs_operations_call:"fs-lightyear"}},94066:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var i=a(74914),r=a(48344),n=a.n(r);function o(e){const t=(0,i.useRef)(e);return n()(e,t.current)||(t.current=e),t.current}},95476:(e,t,a)=>{"use strict";a.d(t,{PY:()=>ie,$p:()=>s,T9:()=>d,zU:()=>w,iB:()=>Q,Ah:()=>x,P2:()=>i.A,Dt:()=>_,gw:()=>g.A,Lw:()=>K,Rb:()=>B,Oq:()=>G,u9:()=>q,Jt:()=>j,p_:()=>$.A,Aq:()=>Y,Ho:()=>re,an:()=>se.A,zm:()=>oe});var i=a(75100);var r=a(74914),n=a(48344),o=a.n(n);function s(e){let{dividerOffsets:t}=e;const a=(0,r.useRef)(),{group:n,initialGroup:s}=(0,i.A)(),l=(0,r.useCallback)((()=>{var e,t,a,i,r,l,d,c,u,h,p,m;if(!s.childGroups)return!1;const g=s.childGroups.find((e=>e.id===n.id));if(null===n||void 0===n||!n.coverages||null===g||void 0===g||!g.imageViewerCoverages)return!1;if((null===(e=g.imageViewerCoverages)||void 0===e?void 0:e.length)!==(null===(t=n.coverages)||void 0===t?void 0:t.length))return!0;const v=Object.keys((null===n||void 0===n||null===(a=n.metadata)||void 0===a?void 0:a.creator)||{}),y=v.length>0?v.map((e=>{var t;return null===n||void 0===n||null===(t=n.metadata)||void 0===t?void 0:t.creator[e]})):[],f={archivalReferenceNumber:null===g||void 0===g||null===(i=g.metadata)||void 0===i?void 0:i.archivalReferenceNumber,title:null===g||void 0===g||null===(r=g.metadata)||void 0===r?void 0:r.title,volume:null===g||void 0===g||null===(l=g.metadata)||void 0===l?void 0:l.volume,creator:(null===g||void 0===g||null===(d=g.metadata)||void 0===d?void 0:d.creator)||[],languages:null===g||void 0===g||null===(c=g.metadata)||void 0===c?void 0:c.languages},b={archivalReferenceNumber:null===n||void 0===n||null===(u=n.metadata)||void 0===u?void 0:u.archivalReferenceNumber,title:null===n||void 0===n||null===(h=n.metadata)||void 0===h?void 0:h.title,volume:null===n||void 0===n||null===(p=n.metadata)||void 0===p?void 0:p.volume,creator:y,languages:null===n||void 0===n||null===(m=n.metadata)||void 0===m?void 0:m.languages};if(!o()(f,b))return!0;for(let o=0;o<n.coverages.length;o++){var A,w;const e=g.imageViewerCoverages[o],t=n.coverages[o];if((null===(A=e.place)||void 0===A?void 0:A.id)!==(null===(w=t.place)||void 0===w?void 0:w.id)||e.recordTypes.length!==t.recordTypes.length)return!0;for(let a=0;a<e.recordTypes.length;a++){var T,I;const i=null===(T=e.recordTypes[a])||void 0===T?void 0:T.date,r=null===(I=t.recordTypes[a])||void 0===I?void 0:I.date;if(i&&!r)return!0;if(e.recordTypes[a].name!==t.recordTypes[a].name||(null===i||void 0===i?void 0:i.length)!==(null===r||void 0===r?void 0:r.length))return!0;for(let e=0;e<(null===i||void 0===i?void 0:i.length);e++){var S,E;if((null===(S=i[e])||void 0===S?void 0:S.fromTimestamp)!==(null===(E=r[e])||void 0===E?void 0:E.fromTimestamp))return!0}}}return!1}),[s,n]);(0,r.useEffect)((()=>{t&&!a.current&&0!==t.length&&(a.current=t)}),[t]);return{getIsDividerOffsetChanges:(0,r.useCallback)((()=>{var e;return(null===t||void 0===t?void 0:t.length)<0&&!a.current||(null===t||void 0===t?void 0:t.length)!==(null===(e=a.current)||void 0===e?void 0:e.length)||(null===t||void 0===t?void 0:t.reduce(((e,t,i)=>!!e||t!==a.current[i]),!1))}),[t]),getGroupHasBeenEdited:l}}var l=a(17636);function d(){return(0,r.useContext)(l.k)}var c=a(77595),u=a(41266),h=a(62320),p=a(71499),m=a(97454),g=a(59881),v=a(40773),y=a(48451);const f={coveragesMarkedCompleteFailedMessage:()=>y.i18n.t("useCoverages.coveragesMarkedCompleteFailedMessage","Error marking coverages as complete."),coveragesMarkedCompleteSuccessMessage:()=>y.i18n.t("useCoverages.coveragesMarkedCompleteSuccessMessage","Coverages marked as complete."),dateRequiredMessage:()=>y.i18n.t("useCoverages.dateRequiredMessage","Each record type requires a date"),dateTooFarFutureMessage:()=>y.i18n.t("useCoverages.dateTooFarFutureMessage","Dates cannot be after current year"),duplicatePlaceError:()=>y.i18n.t("useCoverages.duplicatePlaceError","Place must be unique"),duplicateRecordTypeError:()=>y.i18n.t("editableCoverageRecordType.duplicateRecordTypeError","Record type already exists"),missingPlaceMessage:()=>y.i18n.t("useCoverages.missingPlaceMessage","Place must not be empty"),placeRequiredMessage:()=>y.i18n.t("useCoverages.placeRequiredMessage","At least one place is required"),recordTypeRequiredMessage:()=>y.i18n.t("useCoverages.recordTypeRequiredMessage","Each place requires a record type.")},b=()=>c.J1`
  query GetGroupWorkflowActions($groupIds: [String!]!) {
    groups(groupIds: $groupIds, includeProperties: true) {
      currentWorkflowActions {
        name
        status
        properties {
          name
          value
        }
      }
      workflowActions {
        name
        status
        properties {
          name
          value
        }
      }
    }
  }
`,A=()=>c.J1`
  mutation setAuditMissingCoverageCompleted($params: UpdateWorkflowActionStatusInput) {
    updateWorkflowActionStatus(params: $params) {
      code
      message
    }
  }
`;function w(){let{forVolumeSet:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{group:t,allRecordTypes:a,groupCoverageCheckboxes:n,initialGroup:o,volumeSetCoverageCheckboxes:s}=(0,i.A)(),l=(null===t||void 0===t?void 0:t.coverages)||[],{query:d}=(0,m.A)(),{data:c,error:y}=(0,u.IT)(b(),{variables:{groupIds:[d.groupId]},skip:!(null!==d&&void 0!==d&&d.groupId),fetchPolicy:"network-only"}),[w]=(0,h.n)(A()),{cisId:C}=(0,p.useUser)(),{subscribe:x}=(0,v.HQ)(),[Y,N]=(0,r.useState)(null),[R,P]=(0,r.useState)(!1),[O,_]=(0,r.useState)(!1);(0,r.useEffect)((()=>{var e,t;const a=(null===c||void 0===c||null===(e=c.groups)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.currentWorkflowActions)||[];if(y)console.error(y),N(null);else if(a.length>0&&!Y&&!O){const e=a.find((e=>{let{name:t,status:a}=e;return"AuditMissingCoverage"===t&&"Available"===a}))||null,t=((null===e||void 0===e?void 0:e.properties)||[]).find((e=>{let{name:t}=e;return"coverageIssues"===t}));N((null===t||void 0===t?void 0:t.value)||null)}}),[c,y,Y,O]);const F=(0,g.A)(),D=e?s:n,M=e?null===o||void 0===o?void 0:o.coverages:l,H=(0,r.useCallback)((async e=>{if(null!==t&&void 0!==t&&t.id){try{var a,i;P(!0);const r=await w({variables:{params:{rmsId:t.id,comment:`Reviewed by ${C}`,newStatus:"Completed",action:"AuditMissingCoverage",createNewWorkflowAction:!1}}}),n="204"===(null===r||void 0===r||null===(a=r.data)||void 0===a||null===(i=a.updateWorkflowActionStatus)||void 0===i?void 0:i.code);if(e({message:n?f.coveragesMarkedCompleteSuccessMessage():f.coveragesMarkedCompleteFailedMessage(),type:n?"success":"error"}),r.error)throw new Error(r.errors);_(!0),N(null)}catch(r){console.error(r)}P(!1)}}),[t,w,C]),L=(0,r.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];x((()=>"editPanelOpen")),F({forVolumeSet:e,type:"SET_COVERAGES",value:t})}),[F,e,x]),z=(0,r.useCallback)((t=>{F({forVolumeSet:e,type:"SET_COVERAGE_CHECKBOXES",value:t})}),[F,e]),V=(0,r.useCallback)((t=>{F({forVolumeSet:e,type:"UPDATE_ALL_COVERAGE_CHECKBOXES",value:t})}),[F,e]);const B=(0,r.useCallback)(((e,t)=>{const a=[...D],i=a[e].map((e=>{const a={};return a.recordTypeChecked=t,a.datesChecked=e.datesChecked.map((()=>t)),a}));a[e]=i,z(a)}),[D,z]),G=(0,r.useCallback)(((e,t,a)=>{const i=[...D],r=D[e][t],n={};n.recordTypeChecked=a,n.datesChecked=r.datesChecked.map((()=>a)),i[e][t]=n,z(i)}),[D,z]),U=(0,r.useCallback)(((e,t,a,i)=>{const r=[...D],n=[...D[e][t].datesChecked];n[a]=i,r[e][t].datesChecked=n,z(r)}),[D,z]),K=(0,r.useCallback)((()=>{try{const e=function(e,t){const a=k(e),i=[];let r=0,n=0;for(r=0;r<a.length;r++)try{var o;const e=null===(o=t[r])||void 0===o?void 0:o.every((e=>!0===e.recordTypeChecked)),s=[],l=a[r];if(null!==t&&void 0!==t&&t.length&&l.recordTypes){for(n=0;n<l.recordTypes.length;n++){const e={...l.recordTypes[n]};let a=!1;const i=[];if(t[r]&&t[r][n]){a=t[r][n].recordTypeChecked;for(let e=0;e<t[r][n].datesChecked.length;e++)t[r][n].datesChecked[e]||i.push(l.recordTypes[n].date[e])}e.date=i.length<1?[{}]:i,a||s.push(e)}l.recordTypes=s}e||i.push(l)}catch(s){return console.error(`Error at indexes: i = ${r} | j = ${n}`),console.error(s),console.error(a),a}return i}(M,D);L(e)}catch(e){throw e}}),[M,L,D]),q=(0,r.useCallback)((()=>{const e=k(M);L([...e,{place:{fullName:"",id:String(I())},recordTypes:[S()]}])}),[M,L]),j=(0,r.useCallback)(((e,t,a,i)=>{const r=k(M),n=r[e];n&&(n.place={fullName:t,id:String(a),published:i},String(a)===r[e].id?n.place.name=r[e].name:n.place.name=t.split(",")[0]),L(r)}),[M,L]),$=(0,r.useCallback)(((e,t,a)=>{const i=k(M);E(i,e,t).date=a.map((e=>{var t;return null!==e&&void 0!==e&&null!==(t=e.value)&&void 0!==t&&t.formatted?e.value:{...e.value,formatted:e.label}})),L(i)}),[M,L]),W=(0,r.useCallback)((e=>{const t=k(M),a=t.find((t=>Number(t.place.id)===Number(e)));a&&a.recordTypes.push(S()),L(t)}),[M,L]),X=(0,r.useCallback)(((e,t,a)=>{const i=k(M),r=E(i,e,t);r.id=a.id,r.name=a.name,L(i)}),[M,L]),Q=(0,r.useMemo)((()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[],a={};e&&e.forEach((e=>{var i;const r={placeError:null,recordTypeErrors:[],dateErrors:[]},n=null===(i=e.place)||void 0===i?void 0:i.id;!n||e.place.fullName||function(e){var t,a;const i=Boolean(null===e||void 0===e||null===(t=e.place)||void 0===t?void 0:t.fullName),r=Boolean(null===e||void 0===e||null===(a=e.recordTypes)||void 0===a?void 0:a.find((e=>Boolean(e.name))));return!i&&!r}(e)?a[n]&&(r.placeError=f.duplicatePlaceError()):r.placeError=f.missingPlaceMessage(),a[n]=!0;const o={};e.recordTypes&&e.recordTypes.forEach((e=>{0===e.name.length&&r.recordTypeErrors.push(f.recordTypeRequiredMessage()),o[e.id]?r.recordTypeErrors.push(f.duplicateRecordTypeError()):r.recordTypeErrors.push(null);const t=e.date;null!==t&&void 0!==t&&t.some((e=>e.formatted||Number.isInteger(e.fromTimestamp)))?!function(e){let t=!1;for(let a=0;a<e.length;a++){const i=e[a];let r=i.fromTimestamp;if(r||(r=new Date(i.formatted).getTime()),r&&r>T()){t=!0;break}}return t}(t)?r.dateErrors.push(null):r.dateErrors.push(f.dateTooFarFutureMessage()):r.dateErrors.push(f.dateRequiredMessage()),o[e.id]=!0})),t.push(r)}));return t}(M)),[M]),J=(0,r.useCallback)((()=>{var e,t;if(0===M.length)return f.placeRequiredMessage();const a=Q.find((e=>{var t,a;return e.placeError||(null===(t=e.recordTypeErrors)||void 0===t?void 0:t.find((e=>!!e)))||(null===(a=e.dateErrors)||void 0===a?void 0:a.find((e=>!!e)))}));return(null===a||void 0===a?void 0:a.placeError)||(null===a||void 0===a||null===(e=a.recordTypeErrors)||void 0===e?void 0:e.find((e=>!!e)))||(null===a||void 0===a||null===(t=a.dateErrors)||void 0===t?void 0:t.find((e=>!!e)))}),[M,Q]),Z=(0,r.useCallback)(((e,t)=>{var a;const i=null===(a=Q[e])||void 0===a?void 0:a.recordTypeErrors;return null===i||void 0===i?void 0:i[t]}),[Q]),ee=(0,r.useCallback)(((e,t)=>{var a;const i=null===(a=Q[e])||void 0===a?void 0:a.dateErrors;return null===i||void 0===i?void 0:i[t]}),[Q]),te=(0,r.useCallback)((e=>{var t;return null===(t=Q[e])||void 0===t?void 0:t.placeError}),[Q]);return{addPlace:q,addRecordType:W,allRecordTypes:a,coverages:M,coverageCheckboxes:D,coverageDataMissing:Y,deleteSelectedCoverageCheckboxes:K,handleDateCheckboxChange:U,handlePlaceCheckboxChange:B,handleRecordTypeCheckboxChange:G,savingMissingAuditData:R,setAllCoverageCheckboxes:V,setApplyToChildren:function(e,t,a){const i=k(M),r=i[e];r&&r.recordTypes.forEach(((e,i)=>{i===t&&(e.applyToChildren=a)})),L(i)},setAuditMissingCoveragesAsCompleted:H,setDate:$,setPlace:j,setRecordType:X,updatedAuditCoverages:O,validateCoverages:J,validatePlace:te,validateRecordType:Z,validateDate:ee}}function T(){const e=(new Date).getUTCFullYear();return Date.UTC(e,11,31,23,59,59,0)}function I(){return-Number(String(Date.now()%Math.random()).slice(-5))}function S(){return{date:[{}],id:I(),name:""}}function E(e,t,a){return e.find((e=>e.place.id===t)).recordTypes.find((e=>e.id===a))}function k(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[];return e&&e.forEach((e=>{var a,i,r,n;const o=null===(a=e.recordTypes)||void 0===a?void 0:a.map((e=>{const t=e.date.map((e=>({...e})));return{applyToChildren:e.applyToChildren||!1,date:t,id:Number(e.id),name:e.name}}));t.push({place:{fullName:null===(i=e.place)||void 0===i?void 0:i.fullName,id:null===(r=e.place)||void 0===r?void 0:r.id,name:null===e||void 0===e||null===(n=e.place)||void 0===n?void 0:n.name},recordTypes:o})})),t}var C=a(57475);function x(){return(0,r.useContext)(C.C)}function Y(e){const[t,a]=(0,r.useState)([]),i=0===(null===t||void 0===t?void 0:t.length),n=(null===t||void 0===t?void 0:t.length)===(null===e||void 0===e?void 0:e.length),o=(0,r.useCallback)((()=>{a(n?[]:e.map((e=>{let{place:t}=e;return null===t||void 0===t?void 0:t.id})))}),[n,e]);return{getIsOpen:(0,r.useCallback)((e=>!t.includes(e)),[t]),handleToggleOpenAll:o,handleToggleOpen:(0,r.useCallback)((e=>{a((a=>t.includes(e)?a.filter((t=>t!==e)):[...a,e]))}),[t]),allOpen:i,allClosed:n}}var N=a(78787),R=a(37655);function P(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Array.isArray(e))return e.map((e=>P(e,t)));if(null!==e&&"object"===typeof e){const a={};for(const i of Object.keys(e))"__typename"!==i&&"published"!==i?a[i]=P(e[i],t):"published"!==i||t||(a[i]=P(e[i],t));return a}return e}var O=a(93422);function _(){let{forVolumeSet:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{editMode:t,group:a,initialGroup:n,updating:o,groupCreatorCheckboxes:s}=(0,i.A)(),l=(0,r.useMemo)((()=>(null===a||void 0===a?void 0:a.coverages)||[]),[a]),d=(0,r.useMemo)((()=>(null===a||void 0===a?void 0:a.metadata)||{}),[a]),c=(0,r.useMemo)((()=>(null===a||void 0===a?void 0:a.id)||0),[a]),{coverageCheckboxes:u}=w({forVolumeSet:e}),p=(0,g.A)(),[m]=(0,h.n)(R.A.updateGroupData(),{context:{headers:{...O.A}}}),v=(0,r.useMemo)((()=>D(u)),[u]),y=(0,r.useMemo)((()=>s?D(s):null),[s]),f=(0,r.useCallback)((e=>{p({type:"SET_EDITED",value:e})}),[p]),b=(0,r.useCallback)((()=>{var e;return(null===(e=n.childGroups)||void 0===e?void 0:e.find((e=>e.id===c)))||n}),[c,n]),A=(0,r.useCallback)((async function(){var e,t,a,i,r,n;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const u=b(),h=null!==o&&void 0!==o&&o.coverages?M(o.coverages,!0):function(e,t){var a;let i=[];JSON.stringify(e)!==JSON.stringify(t)&&(i=e);return i=null===(a=i)||void 0===a?void 0:a.filter((e=>!!e.place.fullName)),M(i,!0)}(l,s?l:null===u||void 0===u?void 0:u.coverages),g=null!==o&&void 0!==o&&o.metadata?P(o.metadata,!0):function(e,t){var a;const i=["title","creator","archivalReferenceNumber","languages"].reduce(((a,i)=>{let r;return r="string"===typeof e[i]?e[i].trim():"creator"===i?Object.values(e.creator||{}):e[i],F(r,t[i])?a:{...a,[i]:r}}),{}),r=null===(a=e.volume)||void 0===a?void 0:a.split(/\n/i).reduce(((e,t)=>t?[...e,t.trim()]:e),[]);F(r,t.volumes)||(i.volumes=r);return i}(d,s?d:null===u||void 0===u?void 0:u.metadata);(g.volume||""===g.volume)&&delete g.volume;const v=await m({variables:{updateParams:{id:c,imageViewerCoverages:h,metadata:g}}});if(null!==v&&void 0!==v&&null!==(e=v.data)&&void 0!==e&&null!==(t=e.updateGroupData)&&void 0!==t&&t.group){const e=v.data.updateGroupData;p({type:"UPDATE_GROUP_DATA",value:e})}var y,f;((null===v||void 0===v||null===(a=v.data)||void 0===a||null===(i=a.updateGroupData)||void 0===i||null===(r=i.errorFields)||void 0===r?void 0:r.length)>0||null!==v&&void 0!==v&&v.errors||!v)&&N.A.log({message:"Error saving group data",errorFields:null===v||void 0===v||null===(y=v.data)||void 0===y||null===(f=y.updateGroupData)||void 0===f?void 0:f.errorFields,updateParams:{id:c,imageViewerCoverages:h,metadata:g}});return null===v||void 0===v||null===(n=v.data)||void 0===n?void 0:n.updateGroupData}),[l,p,b,c,d,m]);return{deleteCoveragesMode:v,deleteCreatorMode:y,editMode:t,saveGroupData:A,updating:o,setEdited:f}}function F(e,t){return Array.isArray(e)||Array.isArray(t)?(a=e,i=t,Array.isArray(a)&&Array.isArray(i)&&a.length===i.length&&a.every(((e,t)=>e===i[t]))):e===t;var a,i}function D(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(e)?e.some((e=>D(e))):"object"===typeof e&&null!==e?Object.values(e).some((e=>D(e))):"boolean"===typeof e&&e}function M(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=function(e){return e.map((e=>(e.recordTypes&&e.recordTypes.forEach((e=>{e.date.forEach((e=>{Object.prototype.hasOwnProperty.call(e,"original")&&delete e.original}))})),e)))}(e);return P(a,t)}var H=a(22805),L=a(31767),z=a(75619),V=a(81683);function B(){return(0,r.useContext)(L.y)}function G(){let{unauthorizedCallback:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{query:t,setQuery:a}=(0,m.A)({replaceState:!0}),{hasImageOrganizePermissions:i,imageOrganizePermissionsLoaded:n}=B(),{view:o,mode:s}=t,l="organize"===o,d=l&&s===V.ig.DIVIDE,c=l&&s===V.ig.METADATA_ALL,u=l&&s===V.ig.METADATA,h=(0,r.useCallback)((()=>{a({view:"explore",mode:void 0})}),[a]),p=(0,r.useCallback)((()=>{a({view:"organize",mode:"DIVIDE",grid:"on"})}),[a]);(0,r.useEffect)((()=>{l&&n&&!i&&("function"===typeof e&&e(),h())}),[i,l,h,n,e]),(0,r.useEffect)((()=>{l&&!Object.values(V.ig).find((e=>e===s))&&a({mode:V.ig.METADATA})}),[s,l,a]);const g=(0,r.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=JSON.parse(localStorage.getItem("ly.images.searchResults.lastQuery")||"{}");if(Object.keys(a).length){a.needsToBeOrganized=!0;let i=e;(e||t)&&(localStorage.setItem("leavingMode","divide"),(c||u)&&(localStorage.setItem("leavingMode",c?"metadata_all":"metadata"),t&&(i=t)),localStorage.setItem("previousGroupId",i))}const i=new URLSearchParams(a).toString();window.location.href=`${window.location.origin}/records/images/search-results${i?`?${i}`:""}`}),[c,u]);return{goBackToSearchResults:g,isImageOrganizeMode:l,isDivideMode:d,isMetadataSingleMode:u,isMetadataAllMode:c,switchToExploreView:h,switchToDivideMode:p}}const U={METADATA:"AuditCoverages",DIVIDE:"AuditBoundaries"};function K(){const{cisId:e}=(0,p.useUser)(),{isDivideMode:t,isMetadataAllMode:a,isMetadataSingleMode:n}=G(),{initialGroup:o,initialChildId:s,itemNumber:l}=(0,i.A)(),{dividersAltered:d,dividerOffsets:c,addNewDivider:u,removeDivider:m,skippedItemsMap:v,setSkippedItemsMap:y}=(0,r.useContext)(L.y),[f,{loading:b}]=(0,h.n)(R.A.updateWorkflowActionStatus(),{context:{headers:{...O.A}}}),[A]=(0,h.n)(R.A.updateWorkflowActionStatusList(),{context:{headers:{...O.A}}}),[w,{data:T,loading:I}]=(0,H._)(z.A.imageOrganizeStatusList()),S=(0,r.useRef)(!1),E=(0,g.A)(),k=(0,r.useCallback)((async e=>{if(e)E({type:"SET_WORKFLOW_STATUS",newStatuses:e});else if(!I){var t;let e=(null===T||void 0===T||null===(t=T.imageOrganizeStatusList)||void 0===t?void 0:t[l-1])||null;if(!e&&Array.isArray(null===o||void 0===o?void 0:o.childGroups)){var a,i;const{childGroups:t}=o,r=t.length>0?t.map((e=>e.id)):[o.id];e=null===(a=(await w({variables:{rmsIdList:r}})).data)||void 0===a||null===(i=a.imageOrganizeStatusList)||void 0===i?void 0:i[l-1]}e&&E({type:"SET_WORKFLOW_STATUS",value:e})}}),[E,w,l,o,T,I]),C=(0,r.useCallback)(((e,t)=>{y({...v,[e]:t})}),[v,y]),x=(0,r.useCallback)((e=>Boolean(v[e])),[v]);return{attachWorkflowStatuses:k,addNewDivider:u,dividerOffsets:c,dividersAltered:d,removeDivider:m,updateMetadataWorkflowStatus:(0,r.useCallback)((async(e,t)=>{if(!Object.values(V.Oz).includes(t))return!1;try{await f({variables:{params:{action:U.METADATA,newStatus:t,rmsId:e}}})}catch(a){return!1}return!0}),[f]),loading:b,validateWorkflowActions:(0,r.useCallback)((async i=>{if(S.current||!e)return;let r;if((t||n)&&s?r=[s]:a&&Array.isArray(null===o||void 0===o?void 0:o.childGroups)&&(r=o.childGroups.map((e=>e.id))),r){var l,d;S.current=!0;const o=null!==(l=null===(d=(await w({variables:{rmsIdList:r}})).data)||void 0===d?void 0:d.imageOrganizeStatusList)&&void 0!==l?l:[];let h=!1;if(o.forEach((a=>{var i,r;let n=a.correctMetadata;t&&(n=a.divide),(null===(i=n)||void 0===i?void 0:i.status)===V.Oz.IN_PROGRESS&&(null===(r=n)||void 0===r?void 0:r.userId)!==e&&(h=!0)})),h&&!a)return void(i&&i.handleClick());if(a){const e=o.filter((e=>{var t;return(null===(t=e.correctMetadata)||void 0===t?void 0:t.status)===V.Oz.AVAILABLE})).map((e=>e.id));if(e.length){const t=e.map((e=>({action:U.METADATA,rmsId:e,newStatus:V.Oz.IN_PROGRESS})));await A({variables:{actionStatusList:t}})}}else if(t||n){var c,u;const e=t?null===o||void 0===o||null===(c=o[0])||void 0===c?void 0:c.divide:null===o||void 0===o||null===(u=o[0])||void 0===u?void 0:u.correctMetadata;(null===e||void 0===e?void 0:e.status)===V.Oz.AVAILABLE&&await f({variables:{params:{action:t?U.DIVIDE:U.METADATA,rmsId:s,newStatus:V.Oz.IN_PROGRESS}}})}}}),[e,t,n,s,a,o,w,A,f]),setSkippedStatus:C,getSkippedStatus:x}}function q(){const{language:e}=y.i18n;return(0,r.useCallback)((t=>{let{date:a,options:i={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}}=t;return null==a?null:new Intl.DateTimeFormat(e,i).format(a)}),[e])}function j(){const[e,{data:t,loading:a,error:i}]=(0,H._)(z.A.standardsLanguages(),{errorPolicy:"all"});(0,r.useEffect)((()=>{t||a||i||e()}),[t,i,e,a]);const n=(0,r.useCallback)((function(e,a){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(null===t||void 0===t||!t.standardsLanguages)return null;const r=[],n=null===t||void 0===t?void 0:t.standardsLanguages;return Array.isArray(n)&&Array.isArray(i)&&i&&i.forEach((t=>{var i;const o=null===(i=n.find((e=>e[a]===t)))||void 0===i?void 0:i[e];o&&r.push(o)})),r}),[t]),o=(0,r.useCallback)((e=>n("language","code",e)),[n]),s=(0,r.useCallback)((e=>n("code","language",e)),[n]);return{data:t,loading:a,error:i,getLanguagesFromCodes:o,getCodesFromLanguages:s}}var $=a(19650),W=a(33082);const X=["RMSGroupWritePermission","RMSArtifactWritePermission"];function Q(){const{query:{mode:e}}=(0,m.A)(),[t,a]=(0,W.usePermission)("LightyearRecordMetadataReviewPermission","LightyearContext"),[i,n]=(0,W.usePermission)("LightyearRecordsHomePermission","LightyearContext"),[o,s]=(0,W.usePermission)(X,"RMSContext"),[l,d]=(0,r.useState)();(0,r.useEffect)((()=>{"loaded"===a&&"function"===typeof d&&d(t&&"review"===e)}),[t,a,e,d]);const[c,u]=(0,r.useState)();(0,r.useEffect)((()=>{"loaded"===s&&"loaded"===n&&"function"===typeof u&&u(o&&i&&"metadataAudit"===e)}),[t,a,e,u,o,s,i,n]);const[h,p]=(0,r.useState)();return(0,r.useEffect)((()=>{"function"===typeof p&&p("imageQualityAudit"===e)}),[e,p]),{showRecordMetadataReview:l,showMetadataAudit:c,showImageQualityAudit:h}}var J=a(69262),Z=a(59903),ee=a(61321),te=a(43494);const ae=20,ie={VERIFIED_METADATA:"Verified Metadata",UPDATED_METADATA:"Updated Metadata"};function re(e){let{resolutionType:t=ie.VERIFIED_METADATA,onError:a,onSuccess:r,setLoading:n=()=>{}}=e;const{cisId:o}=(0,p.useUser)(),{group:s}=(0,i.A)(),[l]=(0,H._)(ee.A.workflowActions()),[d]=(0,h.n)(R.A.resolveCAIReview()),[c]=(0,h.n)(R.A.updateMetisProjectStatus()),[u]=(0,h.n)(R.A.updateWorkflowActionStatus());return{submitCaiReview:async()=>{try{n(!0);const a=await d({variables:{resolution:t,groupId:null===s||void 0===s?void 0:s.id}});if("204"!==a.data.resolveCAIReview.code)throw new Error(`response code ${a.data.resolveCAIReview.code} received from resolveCAIReview`);{var e,i,h,p;const a=await(0,V.mO)(l,s),n=null===(e=a.find((e=>{let{name:t,status:a}=e;return"ReviewCAI"===t&&["Available","In Progress"].includes(a)})))||void 0===e||null===(i=e.parameters)||void 0===i?void 0:i.map((e=>{let{name:t,value:a}=e;return{name:t,value:a}})),d=await c({variables:{updateParams:{actionName:"ReviewCAI",newStatus:"COMPLETED",projectId:null===s||void 0===s?void 0:s.id,resourceType:"natural",userId:o,parameters:n,comment:t}}}),S=await(0,J.getPreference)("lightyear.reviewedGroups")||[];if(null!==s&&void 0!==s&&s.id){var m,g,v,y;const e=null===(m=window)||void 0===m||null===(g=m.location)||void 0===g||null===(v=g.pathname)||void 0===v||null===(y=v.split("/"))||void 0===y?void 0:y.pop();S.push({[s.id]:{completedTimestamp:Date.now(),imageArk:e,naturalGroupId:null===s||void 0===s?void 0:s.naturalGroupId,resolutionType:t}}),(0,J.setPreference)("lightyear.reviewedGroups",S.slice(-ae));let i=!1;if(null!==a&&void 0!==a&&a.find((e=>(null===e||void 0===e?void 0:e.name)===te.A.METADATA_AUDIT))&&(i=!0),i){var f,b;const e=await u({variables:{params:{action:te.A.METADATA_AUDIT,newStatus:"Completed",rmsId:null===s||void 0===s?void 0:s.id,createNewWorkflowAction:!1}}});var A,w;if("204"===!(null!==e&&void 0!==e&&null!==(f=e.data)&&void 0!==f&&null!==(b=f.updateMetisProjectStatus)&&void 0!==b&&b.code))console.error(`metisAuditResponse returned code of ${null===e||void 0===e||null===(A=e.data)||void 0===A||null===(w=A.updateMetisProjectStatus)||void 0===w?void 0:w.code}`)}}var T,I;if("204"===!(null!==d&&void 0!==d&&null!==(h=d.data)&&void 0!==h&&null!==(p=h.updateMetisProjectStatus)&&void 0!==p&&p.code))throw new Error(`metisReviewCAIResponse returned code of ${null===d||void 0===d||null===(T=d.data)||void 0===T||null===(I=T.updateMetisProjectStatus)||void 0===I?void 0:I.code}`);"function"===typeof r&&await r(),window.location.assign(`${Z.pc}/records/home/review`)}}catch(S){console.error(S),"function"===typeof a&&a(S)}finally{n(!1)}},resetCaiReview:async()=>{try{var e,t,i,d;n(!0);const a=null===(e=(await(0,V.mO)(l,s)).find((e=>{let{name:t,status:a}=e;return"ReviewCAI"===t&&["In Progress"].includes(a)})))||void 0===e||null===(t=e.parameters)||void 0===t?void 0:t.map((e=>{let{name:t,value:a}=e;return{name:t,value:a}})),p=await c({variables:{updateParams:{actionName:"ReviewCAI",newStatus:"AVAILABLE",projectId:s.id,resourceType:"natural",userId:o,parameters:a}}});var u,h;if("204"===!(null!==p&&void 0!==p&&null!==(i=p.data)&&void 0!==i&&null!==(d=i.updateMetisProjectStatus)&&void 0!==d&&d.code))throw new Error(`caiResetResponse returned code of ${null===p||void 0===p||null===(u=p.data)||void 0===u||null===(h=u.updateMetisProjectStatus)||void 0===h?void 0:h.code}`);"function"===typeof r&&await r(),window.location.assign(`${Z.pc}/records/home/review`)}catch(p){console.error(p),"function"===typeof a&&a(p)}finally{n(!1)}}}}var ne=a(74741);function oe(){var e,t;const a=(0,ne.u)("chinese_sharedImageViewer_clanBranchMultipleValues"),{initialGroup:r}=(0,i.A)();if("VOLUME_SET"!==(null===r||void 0===r||null===(e=r.types)||void 0===e?void 0:e[0]))return null;const n=(0,V.k3)("author",r.properties).map((e=>e.replace(/ - (added|main) author/i,"")));let o="";const s=(0,V.k3)("titleNote",r.properties).reduce(((e,t)=>{const a=t.match(/^[a-z /]+: /i);return"English Summary: "===(null===a||void 0===a?void 0:a[0])?(o=t.replace(a,""),e):[...e,t.replace(a,"")]}),[]);return o&&s.push(o),{ancestralHall:r.ancestralHall,authors:n,clan:r.clan,clanBranch:a.isOn?null:r.clanBranch,clanBranches:a.isOn?r.clanBranches:null,firstAncestor:r.firstAncestor,generationPoem:r.generationPoem,migrantAncestor:r.migrantAncestor,notes:s,surnames:(0,V.k3)("surname",r.properties).join(", "),title:r.volumeSetTitle,volumeCount:null===(t=r.childGroups)||void 0===t?void 0:t.length}}var se=a(99445)},99445:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var i=a(74914),r=a(69227);function n(){return(0,i.useContext)(r.G)}}},t={};function a(i){var r=t[i];if(void 0!==r)return r.exports;var n=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=e,(()=>{var e=[];a.O=(t,i,r,n)=>{if(!i){var o=1/0;for(c=0;c<e.length;c++){i=e[c][0],r=e[c][1],n=e[c][2];for(var s=!0,l=0;l<i.length;l++)(!1&n||o>=n)&&Object.keys(a.O).every((e=>a.O[e](i[l])))?i.splice(l--,1):(s=!1,n<o&&(o=n));if(s){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[i,r,n]}})(),a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;a.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var n=Object.create(null);a.r(n);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&i;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>i[e]));return o.default=()=>i,a.d(n,o),n}})(),a.d=(e,t)=>{for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,i)=>(a.f[i](e,t),t)),[])),a.u=e=>"static/js/"+({684:"locales-hy-common-ui-json-45",923:"locales-eo-common-ui-json-18",933:"locales-hr-translation-json-39",1456:"locales-sq-common-ui-json-97",1901:"locales-to-common-ui-json-109",2067:"locales-lv-translation-json-68",3369:"locales-tr-common-json-112",7651:"locales-ms-common-json-77",8204:"locales-fj-translation-json-32",8610:"locales-da-common-ui-json-9",9001:"locales-hy-translation-json-47",9953:"locales-da-translation-json-10",10022:"locales-uk-common-ui-json-114",10275:"locales-pl-common-ui-json-83",10298:"locales-fa-translation-json-28",10429:"locales-zh-hans-translation-json-119",11088:"locales-hy-common-json-46",11163:"locales-mg-translation-json-71",12197:"locales-lt-common-ui-json-63",12745:"locales-zh-hans-common-ui-json-118",13319:"locales-de-translation-json-12",14575:"locales-gn-common-ui-json-35",15907:"locales-de-common-ui-json-11",16373:"locales-fa-common-json-27",17265:"locales-ko-common-ui-json-61",18086:"locales-th-translation-json-106",18869:"locales-sl-translation-json-94",19384:"locales-sk-translation-json-92",19535:"locales-cs-translation-json-8",19629:"locales-id-translation-json-49",20012:"locales-it-translation-json-53",20381:"locales-cs-common-ui-json-7",20752:"locales-mg-common-json-70",21002:"locales-it-common-ui-json-52",22147:"locales-el-translation-json-14",25566:"locales-ro-translation-json-88",26272:"locales-ar-translation-json-2",26553:"locales-zh-common-ui-json-120",28322:"locales-hr-common-json-38",28616:"locales-bg-common-ui-json-3",28959:"locales-is-common-ui-json-50",31164:"locales-sq-translation-json-98",31254:"locales-tr-translation-json-113",33669:"locales-ko-translation-json-62",33924:"locales-lt-translation-json-65",34627:"locales-lt-common-json-64",38397:"locales-ka-common-json-57",38587:"locales-ar-common-json-1",38699:"locales-es-common-ui-json-21",40498:"locales-fr-common-ui-json-33",42432:"locales-ht-common-json-41",44038:"locales-sm-common-ui-json-95",44533:"locales-km-translation-json-60",45718:"locales-bg-translation-json-4",45957:"locales-is-translation-json-51",46552:"locales-fj-common-ui-json-31",46645:"locales-nl-translation-json-80",46669:"locales-vi-translation-json-117",47933:"locales-mk-translation-json-73",48384:"locales-fi-common-ui-json-29",48469:"locales-sr-common-ui-json-99",48756:"locales-sw-common-ui-json-103",49505:"locales-eo-translation-json-20",50908:"locales-ja-common-ui-json-54",51558:"locales-sw-translation-json-104",52550:"locales-et-common-json-24",53570:"locales-fr-translation-json-34",53632:"locales-mn-common-ui-json-74",54172:"locales-ht-common-ui-json-40",54869:"locales-pt-translation-json-86",55568:"locales-ka-translation-json-58",55685:"locales-sl-common-ui-json-93",55791:"locales-ceb-translation-json-6",56069:"locales-ka-common-ui-json-56",56874:"locales-uk-translation-json-115",56921:"locales-sv-common-ui-json-101",58447:"locales-es-translation-json-22",59127:"locales-ru-translation-json-90",59736:"locales-no-translation-json-82",59854:"locales-nl-common-ui-json-79",61087:"locales-fa-common-ui-json-26",61427:"locales-mk-common-ui-json-72",61769:"locales-sr-translation-json-100",61871:"locales-pl-translation-json-84",64845:"locales-tr-common-ui-json-111",67452:"locales-no-common-ui-json-81",67526:"locales-ms-translation-json-78",68258:"locales-lv-common-ui-json-66",68671:"locales-ms-common-ui-json-76",72042:"locales-et-common-ui-json-23",73774:"locales-sm-translation-json-96",75083:"locales-mg-common-ui-json-69",75095:"locales-et-translation-json-25",75330:"locales-tl-common-ui-json-107",76298:"locales-mn-translation-json-75",76482:"locales-ru-common-ui-json-89",76803:"locales-el-common-ui-json-13",77579:"locales-id-common-ui-json-48",78317:"locales-vi-common-ui-json-116",78516:"locales-tl-translation-json-108",79523:"locales-ar-common-ui-json-0",80657:"locales-zh-translation-json-121",80710:"locales-km-common-ui-json-59",81560:"locales-sk-common-ui-json-91",82308:"locales-hr-common-ui-json-37",83405:"locales-pt-common-ui-json-85",84047:"locales-en-common-json-16",84670:"locales-lv-common-json-67",85862:"locales-hu-translation-json-44",87325:"locales-ht-translation-json-42",89103:"locales-sv-translation-json-102",91635:"locales-eo-common-json-19",92506:"locales-ja-translation-json-55",95557:"locales-fi-translation-json-30",95574:"locales-ro-common-ui-json-87",96676:"locales-th-common-ui-json-105",96758:"locales-to-translation-json-110",97135:"locales-gn-translation-json-36",97742:"locales-hu-common-ui-json-43",97861:"locales-ceb-common-ui-json-5"}[e]||e)+"."+{684:"a88c8d709c03fd7a",750:"274bee5e9463eca0",862:"0bdd00b74b507b01",923:"f112c08307499e9a",933:"025855710e9366fe",974:"bf75d4b4f53cacfc",1028:"c10cfba90db162d1",1036:"a65d27e8c376ab02",1193:"7a7932231842ed5d",1456:"6abbf8cbad6fcf2a",1458:"543410ad5ea75af4",1583:"ab02718b251ec35d",1689:"118ee89d5fd50508",1879:"bf00e58ee28fae4a",1880:"23dd303f81f17569",1901:"6665f5c6d76a58b9",2067:"a36b354c03b26b8b",2102:"31a5465c76235dea",2247:"8fc51751f6e63bd5",2394:"39215853e919ccdf",2835:"636966ac9e4af72d",3095:"f0f54809b202cd85",3166:"51f00dd59278f7d1",3369:"4c0a7ab0aa1bfcd3",3477:"a756afc1b9a1ee75",3593:"14879d2cbab948d2",3655:"9608388668063108",3678:"992499d57b6cf311",3913:"63e9ac6b9ea44e8f",4707:"24a1a4b88b3539dc",4869:"5b9fe0e2fc2a94cc",4982:"6687b173c90296e7",5174:"b78a59c64891a69a",5386:"1a1a5c7aa8d1aafb",5391:"6794010f3cb530be",5429:"163f08f36969cabb",5484:"c9feea80576aaea9",5695:"d0df1ed9c90a70ed",5735:"2b5eb7f5046a2842",5811:"632784e69ee0dffc",6007:"a94a1530a758e942",6110:"786a786f14a77bb9",6168:"0ae407a5d8414c9d",6288:"65a809b7d830a17a",6370:"c8fe3bbf7bc8cc46",7337:"5c84e5935056909d",7478:"9a488b5c12aed545",7541:"6094f4501a6a2070",7651:"94135ff81c6bd14c",7718:"7deaa217bda3a772",7733:"dc34a4274bed4d90",7923:"9cd848deda9b0cbf",8043:"75d1d6fbd90bbae0",8054:"07394085a7ddea15",8056:"7653413a3c428f79",8204:"4de8571a647f7131",8266:"82978da4c00f6880",8435:"ce046598be787b9d",8610:"2e4d99ea0728798b",8699:"c05df3a622e73aa7",8919:"0a067acf971b61fb",8981:"e043422d3c5153bf",9001:"00379e1ea8999573",9219:"81cd3b4c0f8f76cc",9369:"0be3d0cb002fa070",9569:"676e96c545a2d150",9675:"f1df53e750211173",9685:"0caf6d2a0842e211",9727:"dd80b9ba8fec8325",9953:"35343f13a7471b38",10015:"f9648e0df722a5ce",10022:"a0c1c4052f82b5db",10169:"979eb25f2a83f4c7",10250:"fd76532fda753a12",10275:"9a0cd1c7ff7f4184",10298:"4b419d4ebfb267f7",10429:"5bf6f1721a323f81",10457:"8224ba0999178bd1",10606:"0f6a5971a2ca9186",10814:"5f8478a9641b9450",11059:"c6d9b6ad081a1fbe",11088:"ab3a538376169baa",11163:"48c42b9a6402ef10",11165:"2687f5ca12f68b2e",11259:"61181e2d53bc55e3",11524:"2326c4c26cc6ceac",11546:"285416254a758562",11630:"85198e7b336ae41e",11880:"ba879735793b6faa",11929:"c05716f2955c627e",12164:"9abc20d9abcdc901",12197:"131253829cb83278",12439:"2b81f10b6d4765f2",12481:"9cdf080febde51ff",12570:"d1412a8a016f63cf",12745:"c5aa7a01421740c4",13319:"41d0029446c1d1df",13342:"6eac0b816d184793",13494:"be0d73a3f05b4f21",13752:"f50f6b953f550253",13775:"7f3132c1441ca52a",13864:"1bef58a8a6e798d9",13939:"ff8a708b35f3b5c7",13994:"2f225feeb15e31b0",14005:"ef291281643f9782",14354:"55ba84788d22b357",14575:"ce93e016eb1ced13",15635:"8ba2d1cbe7ef280d",15682:"96deaa22fc0cc86b",15767:"26b84d90dc267d3f",15907:"a697c7765a772ed2",16038:"94b274bbc1f8cb07",16109:"a655953c8e9fac62",16211:"92fd073f9d0f082c",16222:"95a3bd94a8c555c2",16344:"cd35f22f8d3ff39f",16373:"c2e1c79f12a3566c",16550:"098b4a67bed18b34",16651:"3933bdf54f6be4cb",16798:"4b5cad3b953c42e1",17146:"254c8b621e6ff682",17265:"da9421c63e5ac7f7",17366:"51a59d494e385e6b",17513:"9b950b4cc0ccc923",18086:"0e1cc73755607d86",18118:"25df23c5091069e5",18218:"54e1cf3acebd308c",18286:"9603da3e0b9f6267",18602:"bf0258026f637658",18869:"743977fbe2f52dfb",18921:"f1dbdd9d3a34c95c",19204:"d398224eba531109",19303:"8090d4d1af05f182",19352:"93a42bce44974663",19384:"c0f693dbe04b8d70",19535:"b42bbc6e95d1cf4e",19629:"a03081b930388007",19785:"74f837bf4ef859db",19806:"b240b2ebd4bdde50",19895:"6bec8ac7c8d7c1f6",20012:"485803ebb1721db3",20076:"b306e7892c797235",20096:"4aaab9de3becb4f8",20154:"b878e7e9661700cb",20381:"60c2e26985be85a1",20722:"22af7abdec22996f",20752:"6db14f16e506b962",20828:"7a95548ca71303be",21002:"61c0d44d352fd92d",21024:"414d54d4525b89fc",21174:"316adb7f2b7cf041",21282:"931037a838463515",21588:"6e41a0f895eac3bf",21628:"8bbf06fd375c348a",21845:"54dc63f87cea4a17",21912:"51de5c92577527b7",22147:"082c1b6905f95921",22294:"487b28f674e9303c",22325:"09132ecea316dd95",22346:"6f4762c8975d44fe",22541:"2e35787d90d70dca",22797:"1f2eddd2d74efc0d",22845:"c7f2bd2eee530806",23549:"ee3e641c287ddbe2",23569:"57bf403f7809bee7",23672:"5513befd8fd2420b",23737:"2391da60dbcb298b",24144:"6d786ffc791c0e6c",24402:"7292534f387a71a2",24505:"fb17f9719c0ffa71",24667:"ee4b76d9b9db978c",24723:"b8f8149ac1d1e23f",24861:"af54b407df959ad7",25094:"752291c96b71cf3d",25114:"e8ffa705d9d6a54a",25216:"f60e70ea936cb070",25383:"6f2c0a79e750e7a1",25418:"48fd0ebf55c01670",25566:"6af471e94e8ee3fe",25944:"cb775a401183eb79",26129:"6fc5df973d4def59",26254:"9a0ee76d54f87b67",26256:"aca2ed026a3e2af0",26272:"de680e627e6a7f2b",26313:"25745769f327c1b1",26333:"6be1c229ec352a89",26474:"b61c0c868a0a68ef",26501:"40aaab3d1cc68ea6",26553:"df0effd0c0620854",26690:"c3891bba6ffaacf0",27097:"504ebcf2b15f1093",27199:"64976b8cd7210608",27405:"90e22af56657ced3",27474:"869ed94b440a46ec",28221:"4a1cc8020465d504",28322:"ad805b1be54554c6",28403:"84580d5eade7ba64",28474:"d305b2a25e56fe9a",28493:"1ab54066d954170b",28568:"a231241c0bb26efa",28616:"2f855c4baff0a70e",28959:"adf534398059c104",28986:"d66405e5778dc89d",29151:"b14889969343f57b",29253:"e29ed24ee45aafd6",29257:"371b2bf263e97b2e",29280:"4b11d25b0e5bc693",29291:"53e726601c55e6ad",29434:"d648e10b85c7d195",29451:"6c3c1112dcdf01fc",29869:"2ae36c0807c162b6",30122:"0c5c659697156b2b",30352:"03254b889f29eedd",30718:"c4d5059cced3254a",30878:"9b1a2e134ffce264",31164:"0a8d8f59564508f7",31218:"62231b67ade6004d",31254:"cb5c3aa457f52919",31563:"b4a0a2b0e5f6d63a",31735:"6b5cb3e63f211ffb",31913:"ba990cc2207eadd2",32450:"de7e7bdafceee1e1",32790:"dae7b56d954004d7",33669:"0dc888de2ebc0268",33717:"818c35f5307f25bb",33841:"c5d3611c6aa85c2f",33924:"481ff955c205ad96",33985:"a4ae36f020282aff",34225:"b118a010ddbac83d",34430:"74bf107116610eaf",34627:"219b317578b49cc3",35059:"088e67ff8a8577e2",35334:"6d8f7ed8acfb7dc6",35910:"4ec5c1473f3a2c6b",36085:"fc4db61e117e1569",36642:"38eff2abbcd5a725",37171:"1f678c6e9a397d2a",37437:"c02daba211208de5",37739:"ea6ba732ba838ee3",37828:"bcf4119d50c1d338",37833:"0a90c390909afa54",37972:"7fc678f5cffe1fbe",38076:"7eb0c442df6ee4bc",38397:"1d72179f9aee5193",38435:"24e1aa31ddee1b97",38528:"41b3a600af935963",38587:"4912a698f575f282",38686:"1aaf08da11d2d0fb",38699:"f117b380e9391d18",38721:"defd58a0b44df465",38756:"b2f8900b301d028c",38782:"7f3c552b32849600",39014:"38ddb6137e146b53",39060:"c4895b5716f1611d",39274:"b93b010b3ff2b1e3",39283:"c97db3b8e26ef3c9",39575:"442ab816dbb629cf",39590:"54fa51311046eeb5",39727:"abc1c4446a8d9110",39988:"71496264d34465ee",40005:"c18696c5e8089363",40026:"fa0d3c66eb6af4f3",40189:"be48c9f12c8719ba",40283:"a680812d2972f737",40498:"07ef49cd5a7f800c",40716:"c1c2e5f459b2c090",40784:"ad604d8c7f9a6e30",40884:"0a404215381a2301",41143:"ea31d89458a546bf",41326:"3f2135f00c5e7b2c",41552:"0ae2048a23abdf8b",41570:"e79de1eab02063aa",41615:"e021a98671c72c4a",41814:"b44975926338b3cc",42308:"99861e5d0c60a864",42432:"eec0d0bf0f131edc",42767:"3569c4af0f724c25",42894:"0265c81c91e2261f",43389:"a2c040161bf57616",43624:"e6185d22303c7a85",43654:"48558480f5214bfb",44038:"fd32f00d1cc93eaa",44297:"583516fc24fc0e1f",44533:"d4e6a61318a4affa",44589:"eddc7e693769219c",44596:"9842d51b7092adc2",44658:"86745fe4c71ce9c5",44692:"8923ebd47530a89e",44895:"02c1cd38a55c77af",45129:"a0fc6cddf87fcf1b",45292:"fe340577cccb5cd1",45646:"7248a24575463a3d",45718:"e28c7574af201bbd",45957:"9d34c0fa8e5fceeb",46046:"966c0c04006bb07c",46361:"ee696b9a67b21a24",46475:"715460a1a9199d15",46552:"9014f0cf20e51429",46629:"5f83eb7ecbc434da",46645:"dd996bf58bdbdc3b",46669:"98395bb8ab7b4d6e",46756:"ca22d3ac051e0db6",46918:"03e2ec18a6357fb3",47050:"922424ff17a3385c",47053:"23c736f4bdb84f9c",47061:"e3fb9f33a1f0d373",47105:"aba37c7fa30d7a37",47773:"e6a00d955dd34d18",47933:"a24830b95e07ad6a",48038:"2f8817890a1b90e4",48130:"7cb72b29c5f86b2f",48168:"a30cdde36bfbdd34",48280:"5ee26f1ce4ac2cb4",48384:"e326d06bc6ec55fb",48469:"bfdeac7e8a117b2e",48536:"c611b6952101e24b",48720:"66e5d4ab5b4e2039",48721:"7fb741df785ffe1c",48756:"05a49dd49b6d384a",49002:"363ab2ad81a1cb29",49140:"1437440fdb53849b",49505:"e43d22ca1c8ad862",49531:"b051a7d1e5bd1873",49668:"ff3d4a61571c73de",49693:"4f9728850e868780",49883:"4c859db8003b3a70",50092:"edda4ff03918d405",50113:"2a52b90994d7ff88",50281:"31eeaff2f927c9bb",50292:"b13a2b7a1600f522",50651:"201a2654673086cb",50903:"24f95079fb6beda6",50908:"80f1048ddf20445a",50972:"34107853a21cbd22",50994:"874e04800b075b8a",51173:"d14ab0cd5eeecaf8",51265:"8b64a165c2a72ea3",51445:"ad8d595417489264",51558:"dcf8f2621075c400",51614:"d75aca2e98b6c4e2",52550:"9d5ea2f8dba6662e",52603:"7e1911514d098d40",52635:"619697eb61443de6",52686:"0a047621bb048283",52691:"a6905c64d19edb92",52842:"8905fa14191e4993",52914:"c79184d713a1055a",53034:"f11ab46f6b545396",53107:"657cc8ad9482f158",53240:"56ce12c058d26860",53570:"ea5827f128552f27",53609:"260af2a6ec8662f9",53632:"5c30501241bfe940",53723:"694c3a3b4f51d982",53865:"b342d24251b8cf24",54008:"30f7e82704ae0a21",54046:"a2217fcaf2c37465",54052:"e26e05e782cb83a2",54144:"f8761ee13e5f069d",54159:"049bfaff02d17962",54172:"fd1ddbf26705de2c",54325:"a50152eed9492f1e",54825:"a1c9d27ec9fbbad7",54869:"e19cb2367197074c",55376:"57ab904a18d0aa65",55527:"7c7e8f6e37cf1d4a",55568:"6771968489ba8d9d",55685:"74f93e77bfe052ce",55791:"88f3cf5c24f1cebf",55917:"15d03e39d8f0d454",55918:"55ca6a60da75b5fc",56069:"da856c2a1262cff5",56101:"b4e26704c5cb2233",56456:"abfe267be27a1d7d",56589:"1baf3b96d6ec3244",56790:"e98012074873e5f4",56874:"6d7c24b02f851691",56921:"8c8124687955e708",57e3:"301520035ad79528",57083:"26c3f55f32621fdf",57118:"ebc6cb3a60fe66b0",57142:"7e7f42076507a6d2",57199:"d5642ceb6fb2f310",57246:"011104ca16c47709",57311:"d457edf33e64c4d2",57320:"e36b7c905abb9f3b",57359:"671912579f510873",57477:"c985f795db9f6cb7",57564:"80f0192de78a25c6",57666:"c0316ddc7d08d25c",57684:"4d61b16bf178b557",57706:"ddba7aa9e2345f3f",57804:"652c170d9e13ab4f",57952:"a0b0bf0918593f03",58422:"349e090a7fd642df",58447:"400e11e3e78bfc52",58515:"22c0a5de547981d1",58587:"80efd877935ea569",58620:"41252b7a529b9f74",58887:"e0c7faff12c271c0",59127:"de51abc98b6aac56",59300:"aaac766955dca6dd",59346:"c7fa865ffb0ca6df",59506:"94a3288b3de255dc",59736:"cadd78340771f3a7",59746:"410624c41a8a7dae",59854:"5c11e4cc1eaaef69",59877:"5ff3f332bb0c2083",60422:"888ec0e3bf7396f8",60711:"3bf5c56f6c1a8c2e",60756:"c544358b7d778f46",60787:"4a26d447221af279",60973:"250613086d2561da",61087:"6a887772a1106e05",61299:"26c40a76125fd8a6",61427:"249565e48a08fcf4",61443:"821b3269d3ccfbd3",61484:"b180aafe365c6ac1",61769:"3679e2b7a0e21ab0",61871:"b4b5e8c37a91f267",62648:"d2c3752173f47b73",62662:"295c4b584ae6415e",62886:"a27f8d6a48eeeb8b",62995:"f7a4c564960cfc39",63112:"b9927b277bd6b998",63162:"8b340146853a94e1",63577:"97c1a8405bd732e8",63659:"4a567a83f4c03270",63677:"9caee887f4e8c5f9",63810:"6ca306a0bbcc7943",63893:"233873887f03abd6",64102:"bc5149facb5bc355",64103:"538da2e72479c74d",64314:"aaf87492e57bed46",64444:"b5948178314fe82a",64845:"cc816c9edab4e73e",64879:"b667b5af5e9f97bb",64915:"dbe36523a5ad63a0",65089:"5e03dd3177b81b1c",65262:"5217f72bd2869e11",65504:"6071c78873ad7a5d",65506:"cf669f9ac4058073",65591:"711e2c4d40a43c8b",65598:"604a145f76022264",65924:"a921a3660cc752c8",65925:"9b13917231f236e9",65926:"15480d11c1e455a9",65993:"19c156bb3c3dd469",66193:"fc2be1466fb56819",66226:"40b26ee32fa34b38",66441:"18de1308de056a53",66453:"8f93cf034a1c7c95",66509:"ad879dee8b280740",66547:"4ae8c0b4a444d215",66580:"cbaaed1d425e9752",66634:"e2fb5884d3449dec",66640:"aeebd947cdf7ed7f",66689:"9555c0a918d8e30c",66770:"f371919afba8df19",67452:"732b2d9f919e6610",67488:"5fafb410b1d3fe0c",67526:"58aa64d3f6b0c952",67693:"28f39fbbf57861af",68078:"aa621cbd73dcb193",68258:"02a009382d7417a0",68420:"f23144746d02a8ab",68544:"6b5fa8774ff5f4c8",68671:"71817e35543ffd73",68747:"65d99fcc22867e1f",68900:"7d9f30ded04b647f",69029:"4fa6131cbdfce25b",69040:"37731a424a3714f4",69140:"7a90faff6a6670bf",69221:"efcfd1bb1550a67d",69243:"aebb1fe1dec095ba",69291:"c2309a459223272f",69420:"ff10b304a12cb958",69813:"795d47c8d1f7fbba",69894:"b6ebd9c21850da66",70274:"9fb55b961b6386dc",70334:"1e7f6a935b678071",70413:"22653ee5d58395d8",70589:"a25a57e4fd1b4b00",70862:"3e5831874968fa2c",71138:"0247140dd92a1a61",71141:"c70db1921f9390e7",71936:"cb1f60645dd7d897",71981:"0b3157d96dae606d",72042:"1be50512c481a47a",72087:"98a2a8682472eba8",72282:"8569908b05581a6e",72446:"d02e98c6d82d3bdc",72649:"d8718d6dd4ce65e0",72803:"b6dd01614db6df7f",72989:"d64d0b4026189104",73089:"208116e63f2660c4",73191:"45716e01e4117028",73612:"f13f1f424b95b0d9",73738:"a056d6b84e39b98f",73774:"912187d7db2234b9",73826:"ad8d595417489264",73969:"f0e5b8ff723c7a1a",74009:"788fc3a8afed4bba",74058:"0e92d66bab82ec6c",74136:"f5b7ed11f2f466bc",74189:"8e3a179649756065",74215:"c19b25e4932b3e88",74490:"db6e074a21cece2e",74516:"c9d48cec782704b0",74706:"acaec13fd0d12932",74908:"09b39c3b29780680",75018:"b63a076614c9a708",75066:"7de3370765dd3468",75083:"d854d65eb7352a2f",75095:"a8f1b2bc68933720",75136:"0d43e8643608b332",75217:"8a207c3d31bd7acc",75330:"caade3b2dcda6b63",75690:"cf608944a3c8b630",75907:"710087df541ee4b6",76153:"0760b4bec42192e4",76298:"de1d9945be332794",76465:"20960d6f34f99075",76482:"d159173a7039c2a9",76552:"ae0943319985c512",76803:"421e38379f8a1e8c",76936:"8fe2e7a0ec1f4c8e",77451:"1c17360f994cc49d",77484:"95080d05a40f07b7",77579:"ae03c949f051647c",77651:"bcaf0466b0f5d628",77707:"e3b4ec1386a0b578",77807:"0883a9ab374c2221",77921:"466f00216dc1f367",78050:"c50aa1210c3d5793",78157:"f82b1d76f758c606",78317:"2537bd8eb303384d",78324:"326a29dbf201b05e",78415:"e8200b5f19745459",78471:"ec518fdad5004196",78516:"d8a101e2a4371cc2",78569:"3a6d0653e5b84009",78698:"a2a6a96e9702026d",79039:"4f1239ba5acaacf7",79377:"00902577954acc71",79421:"c1854b55dcd16df2",79523:"b7429974400fdf4b",79757:"0fd85d4a6691d68d",80069:"f4e1af8f2c24a665",80126:"9385291c77b7e3bf",80191:"a8678aac0238e489",80457:"f3e818b09080ee8e",80533:"a0ce24fa65e40ece",80554:"433ce0de3d3f827c",80657:"fe47b019632dccf1",80710:"3df1e0890f27ea2b",80720:"8fe316f70bdb33f7",80850:"c49e20449e0a8a42",81548:"b33f584c209eedac",81560:"cc07140446c8872c",81634:"f950a7ae64499ddb",81786:"9f1177ed3c8d88fb",81926:"af3794f7db69c242",82028:"8906eb0a319c563e",82078:"b7d17c08eb1a4fc0",82197:"24623dec5133db60",82212:"99c670da318372ec",82242:"83d97d81355982e5",82308:"0d21397397c6d102",82340:"892e3103b4cc03ef",82892:"15c9cd46cd17f2b6",82925:"c2b88f0ffbe4e7ed",83261:"f9490fb563377573",83405:"1fd25f32a4980e3d",83658:"4b2627a7f6844733",83828:"c190617695bd8329",83989:"174a3cbc93917298",84047:"de93bf1d51192971",84241:"649c25d08c4cc40d",84512:"f761b7c8ee000257",84670:"9487974ed80927d5",85054:"e4ee276b6424ab99",85240:"6352d9913950b236",85342:"b221de632ad9aacd",85544:"b3cc4861183cc2a7",85795:"98166ddbd4dae707",85822:"cc07ec18eb0d9164",85862:"9b0e77cbb66e512c",86008:"db25c87782613500",86129:"bae43ab23aa559f6",86536:"709581eb06bd5683",87325:"c6deb8baf82cbb28",87532:"b99314638023a3f1",87862:"a5ea9be06b246b18",88148:"4c3faa4cb2c5a886",88326:"bb62cb1e37af058c",88373:"7842428345259752",88474:"afac8ef85650807a",89103:"ed0644a6ecf0d1e4",89345:"09ba72290f33b2db",89419:"0e860d07306aa65b",89563:"7a533b32b2a0bf40",89617:"352e9f2ce508927f",89803:"db20309c9cba9b1c",90186:"1ccdc20695e8e536",90247:"45503502a1344bc5",90630:"67eb0da96d345f93",91028:"9f8dd7dc1a61862e",91564:"dd7a8d3105036103",91635:"329e76d6fb72a21c",91921:"b9dcef4e6a582411",91953:"9912ad27861dc74f",92154:"ef3ecfcd8aea6a11",92315:"bacf9131cd99b7d9",92506:"b8f8c28abc6b400a",92582:"bc4ba607f5f9a717",92835:"d9f9d98bb14e5a9c",92880:"5a28083f6d104861",93125:"4d37ae5d3263172d",93283:"550c90f43c0c6e16",93337:"f813a87c25c3b874",93449:"3fe0a49427a2f4cd",94042:"b609b9c81945f281",94101:"dd1373615107182f",94118:"be2128087af49c96",94120:"808350dd1afcac40",94555:"52db2b17f532a8ec",94697:"bbb5b82a89365404",95165:"1c45c83927cbfd49",95167:"98955618199f2c98",95216:"0487cae0e0347cc7",95404:"db9e048f017229df",95557:"011d792c637bda3a",95574:"91de1950d0c3bd11",95909:"ff5e331dd34feea9",96200:"b7c976c40ea4a4d1",96207:"ad8d595417489264",96360:"bdd563f901330597",96676:"930c01c8230d50e9",96758:"591c8bc39525d1c7",97025:"1a0d1c589300eb40",97067:"9f2907a64dc05aa4",97135:"08594d8d4837dbda",97651:"a845f9bb2e18e260",97694:"a1f4aea7e68a7cc4",97742:"98462149bbb8900d",97861:"a976e3080801b727",98123:"4824ac176f97b1c3",98289:"66a5d95cfbee5dab",98536:"4a6fa857726567d3",98538:"73e459e321086dc1",99502:"460dd1455976a9ee",99709:"d3adabe17331d6fb",99883:"1b0f55a02f7eba62",99926:"95ba3891cfd383cf"}[e]+".chunk.js",a.miniCssF=e=>"static/css/"+e+"."+{1036:"2e41f2155db68894",1193:"78ce9a6179d1cb20",1583:"2e41f2155db68894",1689:"2e41f2155db68894",2247:"2e41f2155db68894",3678:"2e41f2155db68894",5174:"5f58d36190ff0e48",5429:"e813304a4b75bbd2",5695:"56a7c155e35ca3ed",6007:"2e41f2155db68894",7541:"2e41f2155db68894",8043:"a45395e7bfa74bc1",8698:"051e48ad6e56cf82",8699:"2e41f2155db68894",8919:"2e41f2155db68894",9569:"d4b60c0bd02e50f7",9675:"02641067e96bccb7",10015:"2e41f2155db68894",10606:"f55a21f91f96c70a",10814:"8090493b359f72fa",11546:"078040cdfdd242ac",11630:"ee25dfb51aeeabe9",12038:"51e39940bfe44ac1",12439:"2e41f2155db68894",12481:"448be3bbb4b967ce",12777:"4a4a8efb7349af35",13342:"2e41f2155db68894",15635:"2e41f2155db68894",15682:"2e41f2155db68894",17513:"2e41f2155db68894",18118:"f55a21f91f96c70a",18218:"45869bd78191287a",18602:"2e41f2155db68894",19785:"4fca479933ea0a8e",19895:"e4c75c1ba44d5826",20076:"2e41f2155db68894",20096:"e22de2bdec31155a",21174:"97eff68bd0dbd0e6",22322:"f55a21f91f96c70a",22346:"2e41f2155db68894",22845:"2e41f2155db68894",23569:"2e41f2155db68894",23672:"b4d4d9891f34e12c",23737:"2e41f2155db68894",23758:"e38631c59e5ca0e8",24402:"ffb127361d8de808",24667:"2e41f2155db68894",24861:"ee55bb692a687b17",25094:"2e41f2155db68894",25114:"2e41f2155db68894",26256:"2169c7bc125cfa84",26313:"2e41f2155db68894",26333:"02641067e96bccb7",27405:"3d3657181240c6ab",28221:"42692efe520b9e49",28403:"2e41f2155db68894",29291:"2e41f2155db68894",30474:"a55ab63cd670812d",32450:"50573ef945d5a3fb",36642:"56a7c155e35ca3ed",37739:"ffb127361d8de808",37972:"2e41f2155db68894",38686:"aafe6c4d09597bd8",38721:"ef148f3f4089ed8a",38756:"5fd51de8bf844e92",39014:"6a9fe6a58d5d0fa2",39274:"dbc87823716473e1",39590:"2e41f2155db68894",39988:"cc962e4125bacd34",40189:"2e41f2155db68894",40884:"2e41f2155db68894",41143:"fa15b0dac9d594e4",41552:"2e41f2155db68894",42767:"2e41f2155db68894",43624:"2e41f2155db68894",44589:"dbc87823716473e1",44692:"dafcf42a2ba7e652",45292:"f55a21f91f96c70a",46046:"a1e2428f42d7c2ab",46629:"5ec0c6f6af781f32",47105:"2e41f2155db68894",48280:"78ce9a6179d1cb20",48720:"2e41f2155db68894",49693:"ef148f3f4089ed8a",51682:"350a6e36db76e98e",52635:"3d3657181240c6ab",52914:"f55a21f91f96c70a",53107:"2e41f2155db68894",53240:"2e41f2155db68894",53865:"cdd522c99b59bd92",54008:"5e0e2e3b917685b1",54144:"2e41f2155db68894",54825:"b7e94ecbe02a24d8",55376:"2e41f2155db68894",55918:"e894717bcc6797b3",56456:"2e41f2155db68894",56589:"2e41f2155db68894",57142:"93381733b68db321",57199:"2e41f2155db68894",57246:"8090493b359f72fa",57692:"d533d944d1b5f587",57804:"2e41f2155db68894",57952:"37dac56c409e447a",58422:"bbb91bbf1c481ad2",58515:"ed09f1901ba9ad9d",58587:"3ab0b19223df354f",59300:"dafcf42a2ba7e652",60787:"cb63df759c3b5d4a",61484:"268c335e2b6e3710",61883:"f46689dd9c06b8f9",62662:"2e41f2155db68894",64103:"2e41f2155db68894",64777:"5ec3e884afc59766",65262:"2e41f2155db68894",65506:"82bfda0e82bd082b",65598:"2e41f2155db68894",65924:"2e41f2155db68894",65926:"f55a21f91f96c70a",66453:"2e41f2155db68894",66689:"78ce9a6179d1cb20",68078:"2e41f2155db68894",68420:"04bdc3eb8c360aa0",68544:"2e41f2155db68894",68900:"26fd7a5db43cdec5",69243:"2a8e606e31a66fef",69291:"2e41f2155db68894",70334:"2e41f2155db68894",70413:"2e41f2155db68894",70589:"2e41f2155db68894",70862:"8090493b359f72fa",71138:"a5c5d7d74de277c6",71141:"56a7c155e35ca3ed",72446:"6092147c214f0aab",72649:"f55a21f91f96c70a",74706:"fcda4eb6be7eca30",75907:"2e41f2155db68894",76886:"8bd3716742620761",77707:"cb63df759c3b5d4a",79039:"448be3bbb4b967ce",79377:"dafcf42a2ba7e652",80433:"6045dd428309cd7b",80533:"1cd5ace0f7407b4d",80850:"b2edb281f816d6e5",82197:"56a7c155e35ca3ed",82340:"2e41f2155db68894",85342:"2e41f2155db68894",85795:"4fca479933ea0a8e",86008:"2e41f2155db68894",86129:"2e41f2155db68894",86536:"697455ca6a3b30b8",88373:"771d503e8fd829ce",88474:"31403793b9954e29",88629:"9187bc1f38a41fc3",89345:"2e55267db045ac86",90186:"e6fbffef9d928e02",90560:"268c335e2b6e3710",91564:"8cdd55c19ced2015",91921:"051e48ad6e56cf82",92154:"2e41f2155db68894",92315:"56a7c155e35ca3ed",92582:"02641067e96bccb7",92880:"2e41f2155db68894",93063:"e4a90ed07c549488",93337:"2e41f2155db68894",94101:"52b7476d2f77c419",95165:"cc63597152cad2ce",95167:"2e41f2155db68894",95404:"b7e94ecbe02a24d8",97067:"56a7c155e35ca3ed",97651:"c5372d6522f4934c",99100:"b16d61e999ac6ce8",99502:"cb63df759c3b5d4a",99883:"f5b5f9b794d30570"}[e]+".chunk.css",a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="shared-image-viewer:";a.l=(i,r,n,o)=>{if(e[i])e[i].push(r);else{var s,l;if(void 0!==n)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+n){s=u;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",t+n),s.src=i),e[i]=[r];var h=(t,a)=>{s.onerror=s.onload=null,clearTimeout(p);var r=e[i];if(delete e[i],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(a))),t)return t(a)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),a.p="https://edge.fscdn.org/assets/",(()=>{var e=a.u,t=a.e,i=new Map,r=new Map;a.u=function(t){return e(t)+(i.has(t)?"?"+i.get(t):"")},a.e=function(n){return t(n).catch((function(t){var o=r.has(n)?r.get(n):5;if(o<1){var s=e(n);throw t.message="Loading chunk "+n+" failed after 5 retries.\n("+s+")",t.request=s,t}return new Promise((function(e){setTimeout((function(){var t=Date.now();i.set(n,t),r.set(n,o-1),e(a.e(n))}),0)}))}))}})(),(()=>{if("undefined"!==typeof document){var e=e=>new Promise(((t,i)=>{var r=a.miniCssF(e),n=a.p+r;if(((e,t)=>{for(var a=document.getElementsByTagName("link"),i=0;i<a.length;i++){var r=(o=a[i]).getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(r===e||r===t))return o}var n=document.getElementsByTagName("style");for(i=0;i<n.length;i++){var o;if((r=(o=n[i]).getAttribute("data-href"))===e||r===t)return o}})(r,n))return t();((e,t,i,r,n)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",a.nc&&(o.nonce=a.nc),o.onerror=o.onload=a=>{if(o.onerror=o.onload=null,"load"===a.type)r();else{var i=a&&a.type,s=a&&a.target&&a.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+i+": "+s+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=i,l.request=s,o.parentNode&&o.parentNode.removeChild(o),n(l)}},o.href=t,i?i.parentNode.insertBefore(o,i.nextSibling):document.head.appendChild(o)})(e,n,null,t,i)})),t={38792:0};a.f.miniCss=(a,i)=>{t[a]?i.push(t[a]):0!==t[a]&&{1036:1,1193:1,1583:1,1689:1,2247:1,3678:1,5174:1,5429:1,5695:1,6007:1,7541:1,8043:1,8698:1,8699:1,8919:1,9569:1,9675:1,10015:1,10606:1,10814:1,11546:1,11630:1,12038:1,12439:1,12481:1,12777:1,13342:1,15635:1,15682:1,17513:1,18118:1,18218:1,18602:1,19785:1,19895:1,20076:1,20096:1,21174:1,22322:1,22346:1,22845:1,23569:1,23672:1,23737:1,23758:1,24402:1,24667:1,24861:1,25094:1,25114:1,26256:1,26313:1,26333:1,27405:1,28221:1,28403:1,29291:1,30474:1,32450:1,36642:1,37739:1,37972:1,38686:1,38721:1,38756:1,39014:1,39274:1,39590:1,39988:1,40189:1,40884:1,41143:1,41552:1,42767:1,43624:1,44589:1,44692:1,45292:1,46046:1,46629:1,47105:1,48280:1,48720:1,49693:1,51682:1,52635:1,52914:1,53107:1,53240:1,53865:1,54008:1,54144:1,54825:1,55376:1,55918:1,56456:1,56589:1,57142:1,57199:1,57246:1,57692:1,57804:1,57952:1,58422:1,58515:1,58587:1,59300:1,60787:1,61484:1,61883:1,62662:1,64103:1,64777:1,65262:1,65506:1,65598:1,65924:1,65926:1,66453:1,66689:1,68078:1,68420:1,68544:1,68900:1,69243:1,69291:1,70334:1,70413:1,70589:1,70862:1,71138:1,71141:1,72446:1,72649:1,74706:1,75907:1,76886:1,77707:1,79039:1,79377:1,80433:1,80533:1,80850:1,82197:1,82340:1,85342:1,85795:1,86008:1,86129:1,86536:1,88373:1,88474:1,88629:1,89345:1,90186:1,90560:1,91564:1,91921:1,92154:1,92315:1,92582:1,92880:1,93063:1,93337:1,94101:1,95165:1,95167:1,95404:1,97067:1,97651:1,99100:1,99502:1,99883:1}[a]&&i.push(t[a]=e(a).then((()=>{t[a]=0}),(e=>{throw delete t[a],e})))}}})(),(()=>{var e={38792:0};a.f.j=(t,i)=>{var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else if(/^(12(038|777)|8(0433|698|8629)|9(0560|3063|9100)|(2232|5168|5769)2|23758|30474|61883|64777|76886)$/.test(t))e[t]=0;else{var n=new Promise(((a,i)=>r=e[t]=[a,i]));i.push(r[2]=n);var o=a.p+a.u(t),s=new Error;a.l(o,(i=>{if(a.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var n=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;s.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",s.name="ChunkLoadError",s.type=n,s.request=o,r[1](s)}}),"chunk-"+t,t)}},a.O.j=t=>0===e[t];var t=(t,i)=>{var r,n,o=i[0],s=i[1],l=i[2],d=0;if(o.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(l)var c=l(a)}for(t&&t(i);d<o.length;d++)n=o[d],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},i=self.webpackChunkshared_image_viewer=self.webpackChunkshared_image_viewer||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var i=a.O(void 0,[51638,80465],(()=>a(79810)));i=a.O(i)})();
//# sourceMappingURL=main.35d7f22c9d216812.js.map